require=function e(t,o,n){function i(r,s){if(!o[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(a)return a(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var l=o[r]={exports:{}};t[r][0].call(l.exports,function(e){var o=t[r][1][e];return i(o||e)},l,l.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({CubeInfo:[function(e,t,o){"use strict";cc._RF.push(t,"2930bvJNTtBFJRPJ4Qml4Ba","CubeInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Common/C"),i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){this.moveType=n.C.MoveType.SlowLoopMoveLeft,this.size=cc.Size.ZERO,this.cubeType=n.C.CubeType.CanNotTouch}return e=__decorate([a],e)}());o.default=r,cc._RF.pop()},{"../Common/C":"C"}],CubeMgr:[function(e,t,o){"use strict";cc._RF.push(t,"cf866Jy9TxOyIqb/wF/wot7","CubeMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYResMgr"),i=e("./CubeInfo"),a=e("./Cube"),r=e("../Common/C"),s=e("../Tools/FYUtility"),c=e("./PropMgr"),p=e("./PropInfo"),l=e("./RoleMgr"),u=e("../Common/UserDataMgr"),d=e("./SFMgr"),h=cc._decorator,f=h.ccclass,_=(h.property,function(){function e(){this.cubeDeltaWidth=19,this.cubeHeight=42,this.deltaY=190,this._cubePool=new cc.NodePool,this._nodeCubeContainer=null,this._listUseCube=[],this._startPosY=170,this._curPosY=this._startPosY,this._borderCube=null,this._nCurMaxCubeIndex=0,this._nCameraIndex=6,this._dictProCubeGeneral={},this._dictSmallCubeGeneral={}}return t=e,e.prototype.init=function(e){this._nodeCubeContainer=e},e.prototype.reset=function(){this._nCurMaxCubeIndex=0,this._nCameraIndex=6,this._dictProCubeGeneral={},this._dictSmallCubeGeneral={}},e.prototype.getCube=function(){return this._cubePool.size()>0?this._cubePool.get():cc.instantiate(n.default.Instance.loadOther("Cube"))},e.prototype.putCube=function(e){if(e){var t=e.getComponent(a.default);t.removeProp(),t.destroyStab(),e.stopAllActions(),this._cubePool.put(e)}else cc.error("nodeCube is null")},e.prototype.addCube=function(e,t){void 0===t&&(t=this._nodeCubeContainer);var o=this.getCube();o.parent=t,o.scale=1,o.opacity=255,o.setPosition(cc.Vec2.ZERO);var n=o.getComponent(a.default);return n.setInfo(e),n},e.prototype.removeCube=function(e){this.putCube(e),this.popFirst(),this.createOne()},e.prototype.removeAllCube=function(){for(var e=this._listUseCube.length-1;e>=0;e--)this.putCube(this._listUseCube[e].node);this._listUseCube=[]},e.prototype.addProp=function(e){var o=new p.default;if(u.default.Instance.GameMode==r.C.GameMode.Normal){var n=s.default.getRangeRandom(1,100);n<=67?o.propType=r.C.PropType.Prop_0:n<=70?o.propType=r.C.PropType.Prop_1:n<=73?o.propType=r.C.PropType.Prop_2:n<=76?o.propType=r.C.PropType.Prop_3:n<=79?o.propType=r.C.PropType.Prop_4:n<=82?o.propType=r.C.PropType.Prop_5:n<=88?o.propType=r.C.PropType.Prop_6_0:n<=94?o.propType=r.C.PropType.Prop_6_1:n<=100&&(o.propType=r.C.PropType.Prop_6_2)}else o.propType=r.C.PropType.Prop_1;var i=c.default.Instance.addProp(o,e.node);i.node.setPosition(new cc.Vec2(0,t.Instance.cubeHeight)),u.default.Instance.GameMode==r.C.GameMode.Normal?i.setPropActive(!1):i.setPropActive(!0),e.addProp(i)},e.prototype.setCubeSizeAndMoveType=function(e){if(this._nCurMaxCubeIndex<=5){e.size=new cc.Size(s.default.getRangeRandom(15,19)*this.cubeDeltaWidth,this.cubeHeight);var t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.SlowLoopMoveLeft:r.C.MoveType.SlowLoopMoveRight}else if(this._nCurMaxCubeIndex<=10){if(e.size=new cc.Size(s.default.getRangeRandom(13,19)*this.cubeDeltaWidth,this.cubeHeight),(n=s.default.getRangeRandom(1,100))<=5&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.LeftMove:r.C.MoveType.RightMove,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else{t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.SlowLoopMoveLeft:r.C.MoveType.SlowLoopMoveRight}}else if(this._nCurMaxCubeIndex<=15){if(e.size=new cc.Size(s.default.getRangeRandom(10,15)*this.cubeDeltaWidth,this.cubeHeight),(n=s.default.getRangeRandom(1,100))<=5&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.LeftMove:r.C.MoveType.RightMove,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else if(n<=10&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.FlickeringLoopMoveLeft:r.C.MoveType.FlickeringLoopMoveRight,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else{t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.SlowLoopMoveLeft:r.C.MoveType.SlowLoopMoveRight}}else if(this._nCurMaxCubeIndex<=20){if(e.size=new cc.Size(s.default.getRangeRandom(8,15)*this.cubeDeltaWidth,this.cubeHeight),(n=s.default.getRangeRandom(1,100))<=5&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.LeftMove:r.C.MoveType.RightMove,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else if(n<=10&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.FlickeringLoopMoveLeft:r.C.MoveType.FlickeringLoopMoveRight,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else if(n<=15&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.FastLoopMoveLeft:r.C.MoveType.FastLoopMoveRight,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else{t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.SlowLoopMoveLeft:r.C.MoveType.SlowLoopMoveRight}}else{if(this._dictSmallCubeGeneral[this._nCurMaxCubeIndex/5])e.size=new cc.Size(s.default.getRangeRandom(8,15)*this.cubeDeltaWidth,this.cubeHeight);else{var o=s.default.getRangeRandom(6,15);e.size=new cc.Size(o*this.cubeDeltaWidth,this.cubeHeight),o<8&&(this._dictSmallCubeGeneral[this._nCurMaxCubeIndex/5]=!0)}var n;if((n=s.default.getRangeRandom(1,100))<=5&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.LeftMove:r.C.MoveType.RightMove,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else if(n<=10&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.FlickeringLoopMoveLeft:r.C.MoveType.FlickeringLoopMoveRight,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else if(n<=15&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.FastLoopMoveLeft:r.C.MoveType.FastLoopMoveRight,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else if(n<=20&&!this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]){t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.LeftSlowRightFastLoopMove:r.C.MoveType.LeftFastRightSlowLoopMove,this._dictProCubeGeneral[this._nCurMaxCubeIndex/5]=!0}else{t=s.default.getRangeRandom(1,2);e.moveType=1==t?r.C.MoveType.SlowLoopMoveLeft:r.C.MoveType.SlowLoopMoveRight}}},e.prototype.createGuidance=function(){this._nCameraIndex=6,this._curPosY=this._startPosY;var e=new i.default;e.size=new cc.Size(20*this.cubeDeltaWidth,this.cubeHeight),e.cubeType=r.C.CubeType.CanTouch,e.moveType=r.C.MoveType.SlowLoopMoveRight,e.cubeType=r.C.CubeType.CanTouch;var o=this.addCube(e);o.node.setPosition(0,this._curPosY),o.move(),this._listUseCube.push(o),this._curPosY-=this.deltaY,this._nCurMaxCubeIndex++;var n=new i.default;n.size=new cc.Size(18*this.cubeDeltaWidth,this.cubeHeight),n.cubeType=r.C.CubeType.CanTouch,n.moveType=r.C.MoveType.SlowLoopMoveLeft;var a=this.addCube(n);a.node.setPosition(-200,this._curPosY),a.move();var s=new p.default;s.propType=r.C.PropType.Prop_6_2;var l=c.default.Instance.addProp(s,a.node);l.node.setPosition(new cc.Vec2(0,t.Instance.cubeHeight)),l.setPropActive(!1),a.addProp(l),this._listUseCube.push(a),this._curPosY-=this.deltaY,this._nCurMaxCubeIndex++;var u=new i.default;u.size=new cc.Size(17*this.cubeDeltaWidth,this.cubeHeight),u.cubeType=r.C.CubeType.CanNotTouch,u.moveType=r.C.MoveType.SlowLoopMoveLeft;var d=this.addCube(u);d.node.setPosition(-200,this._curPosY),d.move();var h=new p.default;h.propType=r.C.PropType.Prop_6_0;var f=c.default.Instance.addProp(h,d.node);f.node.setPosition(new cc.Vec2(0,t.Instance.cubeHeight)),f.setPropActive(!1),d.addProp(f),this._listUseCube.push(d),this._curPosY-=this.deltaY,this._nCurMaxCubeIndex++;var _=new i.default;_.size=new cc.Size(15*this.cubeDeltaWidth,this.cubeHeight),_.cubeType=r.C.CubeType.CanNotTouch,_.moveType=r.C.MoveType.FastLoopMoveLeft;var y=this.addCube(_);y.node.setPosition(200,this._curPosY),y.move();var C=new p.default;C.propType=r.C.PropType.Prop_6_1;var v=c.default.Instance.addProp(C,y.node);v.node.setPosition(new cc.Vec2(0,t.Instance.cubeHeight)),v.setPropActive(!1),y.addProp(v),this._listUseCube.push(y),this._curPosY-=this.deltaY,this._nCurMaxCubeIndex++;var g=new i.default;g.size=new cc.Size(16*this.cubeDeltaWidth,this.cubeHeight),g.cubeType=r.C.CubeType.CanNotTouch,g.moveType=r.C.MoveType.SlowLoopMoveLeft;var m=this.addCube(g);m.node.setPosition(400,this._curPosY),m.move();var P=new p.default;P.propType=r.C.PropType.Prop_6_0;var T=c.default.Instance.addProp(P,m.node);T.node.setPosition(new cc.Vec2(0,t.Instance.cubeHeight)),T.setPropActive(!1),m.addProp(T),this._listUseCube.push(m),this._curPosY-=this.deltaY,this._nCurMaxCubeIndex++;var b=new i.default;b.size=new cc.Size(15*this.cubeDeltaWidth,this.cubeHeight),b.cubeType=r.C.CubeType.CanNotTouch,b.moveType=r.C.MoveType.SlowLoopMoveRight;var I=this.addCube(b);I.node.setPosition(0,this._curPosY),I.move(),this._listUseCube.push(I),this._curPosY-=this.deltaY,this._nCurMaxCubeIndex++;var M=new i.default;M.size=new cc.Size(16*this.cubeDeltaWidth,this.cubeHeight),M.cubeType=r.C.CubeType.CanNotTouch,M.moveType=r.C.MoveType.SlowLoopMoveLeft;var S=this.addCube(M);S.node.setPosition(0,this._curPosY),S.move(),this._listUseCube.push(S),this._curPosY-=this.deltaY,this._nCurMaxCubeIndex++;var R=new i.default;R.size=new cc.Size(14*this.cubeDeltaWidth,this.cubeHeight),R.cubeType=r.C.CubeType.CanNotTouch,R.moveType=r.C.MoveType.SlowLoopMoveRight;var F=this.addCube(R);F.node.setPosition(0,this._curPosY),F.move(),this._listUseCube.push(F),this._curPosY-=this.deltaY,this._nCurMaxCubeIndex++,this.createBorder()},e.prototype.createFirst=function(){this._nCameraIndex=6,this._curPosY=this._startPosY;for(var e=0;e<6;e++){var t=new i.default;if(u.default.Instance.GameMode==r.C.GameMode.Normal){0==e?(t.size=new cc.Size(20*this.cubeDeltaWidth,this.cubeHeight),t.cubeType=r.C.CubeType.CanTouch,t.moveType=r.C.MoveType.SlowLoopMoveLeft):(this.setCubeSizeAndMoveType(t),t.cubeType=1==e?r.C.CubeType.CanTouch:r.C.CubeType.CanNotTouch);var o=this.addCube(t);0==this._nCurMaxCubeIndex||0==e?o.node.setPosition(0,this._curPosY):o.node.setPosition(s.default.getRangeRandom(-150,150),this._curPosY),0!=e&&this.addProp(o),o.setPropActive(0==this._nCurMaxCubeIndex||1==this._nCurMaxCubeIndex),this._curPosY-=this.deltaY,0==e?o.stopMove():o.move(),this._listUseCube.push(o),this._nCurMaxCubeIndex++}else{t.size=new cc.Size(40*this.cubeDeltaWidth,this.cubeHeight),t.moveType=r.C.MoveType.None,t.cubeType=r.C.CubeType.CanTouch,(o=this.addCube(t)).node.setPosition(0,this._curPosY),this.addProp(o),this._curPosY-=this.deltaY,this._listUseCube.push(o),this._nCurMaxCubeIndex++}}this.createBorder()},e.prototype.createOne=function(){var e,t=new i.default;u.default.Instance.GameMode==r.C.GameMode.Normal?(this.setCubeSizeAndMoveType(t),t.cubeType=r.C.CubeType.CanNotTouch,(e=this.addCube(t)).node.setPosition(s.default.getRangeRandom(-150,150),this._curPosY),this._curPosY-=this.deltaY,e.move(),u.default.Instance.PropState[r.C.PropType.Prop_3]&&e.changeToOnePointFiveSize(),this._listUseCube.push(e),this._borderCube.node.setPosition(this._borderCube.node.x,this._borderCube.node.y-this.deltaY),this.addProp(e)):(t.size=new cc.Size(40*this.cubeDeltaWidth,this.cubeHeight),t.moveType=r.C.MoveType.None,t.cubeType=r.C.CubeType.CanTouch,(e=this.addCube(t)).node.setPosition(0,this._curPosY),this._curPosY-=this.deltaY,this._listUseCube.push(e),this._borderCube.node.setPosition(this._borderCube.node.x,this._borderCube.node.y-this.deltaY),this.addProp(e));this._nCurMaxCubeIndex++,this._nCameraIndex++},e.prototype.popFirst=function(){for(var e=1;e<this._listUseCube.length;e++)this._listUseCube[e-1]=this._listUseCube[e];this._listUseCube.length>0&&this._listUseCube.pop()},e.prototype.getCubeList=function(){return this._listUseCube},e.prototype.changeTopCubeType=function(){this._listUseCube[1].getInfo().cubeType=r.C.CubeType.CanTouch,this._listUseCube[1].refreshUI(),this._listUseCube[1].setPropActive(!0)},e.prototype.createBorder=function(){this._borderCube&&this._borderCube.node&&this._borderCube.node.destroy();var e=new i.default;e.moveType=r.C.MoveType.None,e.size=new cc.Size(50*this.cubeDeltaWidth,this.cubeHeight),e.cubeType=r.C.CubeType.Border;var t=cc.instantiate(n.default.Instance.loadOther("Cube"));t.parent=this._nodeCubeContainer;var o=t.getComponent(a.default);o.setInfo(e),o.node.setPosition(0,this._curPosY),this._borderCube=o},e.prototype.moveToRole=function(){this._listUseCube[0].stopMove();var e=Math.abs(this._listUseCube[0].node.x-l.default.Instance.getCurRole().node.position.x)/4e3,t=cc.moveTo(e,new cc.Vec2(l.default.Instance.getCurRole().node.position.x,this._listUseCube[0].node.y));this._listUseCube[0].node.runAction(t)},e.prototype.CubeDoubleSize=function(e){if(void 0===e&&(e=null),e){e.changeToOnePointFiveSize()}else for(var t=0;t<this._listUseCube.length;t++)this._listUseCube[t].changeToOnePointFiveSize()},e.prototype.CubeNormalSize=function(e){if(void 0===e&&(e=null),e)e.changeToNormalSize();else for(var t=1;t<this._listUseCube.length;t++)this._listUseCube[t].changeToNormalSize()},e.prototype.CubeSpeedSlow=function(e){if(void 0===e&&(e=null),e)e.node.stopAllActions(),e.move();else for(var t=0;t<this._listUseCube.length;t++)this._listUseCube[t].node.stopAllActions(),this._listUseCube[t].move()},e.prototype.CubeSpeedNormal=function(e){if(void 0===e&&(e=null),e)e.node.stopAllActions(),e.move();else for(var t=0;t<this._listUseCube.length;t++)this._listUseCube[t].node.stopAllActions(),this._listUseCube[t].move()},e.prototype.UseBomb=function(){var e=this._listUseCube[0],o=this._listUseCube[1];this._listUseCube[1].node.position,this._listUseCube[0].node.position;this._listUseCube[0]=this._listUseCube[1],this._listUseCube[1]=e,this.popFirst(),d.default.Instance.playSF(r.C.SequenceFrameName.SFCubeDestroy,o.node.position,o.node.parent),this.putCube(o.node),this.createOne(),t.Instance.subCameraIndex(),t.Instance.changeTopCubeType();for(var n=function(e){var o=i._listUseCube[e];i._listUseCube[e].node.stopAllActions();var n=cc.moveTo(.2,new cc.Vec2(i._listUseCube[e].node.x,i._listUseCube[0].node.y-t.Instance.deltaY*e)),a=cc.callFunc(function(){o.move()}),r=cc.sequence(n,a);i._listUseCube[e].node.runAction(r)},i=this,a=1;a<this._listUseCube.length;a++)n(a);this._curPosY+=t.Instance.deltaY},e.prototype.getCameraIndex=function(){return this._nCameraIndex},e.prototype.subCameraIndex=function(){this._nCameraIndex--},e.Instance=new t,e=t=__decorate([f],e);var t}());o.default=_,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYResMgr":"FYResMgr","../Tools/FYUtility":"FYUtility","./Cube":"Cube","./CubeInfo":"CubeInfo","./PropInfo":"PropInfo","./PropMgr":"PropMgr","./RoleMgr":"RoleMgr","./SFMgr":"SFMgr"}],Cube:[function(e,t,o){"use strict";cc._RF.push(t,"1d5b1uFUElDdIaJKSKSz59Q","Cube"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseNode"),i=e("../Common/C"),a=e("../Tools/FYResMgr"),r=e("./PropMgr"),s=e("../Common/UserDataMgr"),c=e("./OtherMgr"),p=e("../Tools/FYMessenger"),l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprCube=null,t._cubeInfo=null,t._bMove=!1,t._baseSpeed=200,t._curSpeed=t._baseSpeed,t._listStab=[],t._prop=null,t._nFlickeringActionTag=0,t._anim=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),p.default.Instance.add(i.C.MsgType.ChangeGameSwitch,this.onChangeGameSwitch,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),p.default.Instance.remove(i.C.MsgType.ChangeGameSwitch,this.onChangeGameSwitch,this)},t.prototype.setInfo=function(e){this._cubeInfo=e,this.node.setContentSize(this._cubeInfo.size),this.sprCube.node.setContentSize(this._cubeInfo.size),e.moveType!=i.C.MoveType.None&&(c.default.Instance.destroyStab(this._listStab),this._listStab=c.default.Instance.createStab(this._cubeInfo.size,this.node)),this.refreshUI()},t.prototype.getInfo=function(){return this._cubeInfo},t.prototype.addProp=function(e){this._prop=e},t.prototype.removeProp=function(){this._prop&&(r.default.Instance.removeProp(this._prop.node),this._prop=null)},t.prototype.useProp=function(){this._prop&&(this._prop.useProp(),this.removeProp())},t.prototype.getProp=function(){return this._prop},t.prototype.setPropActive=function(e){this._prop&&this._prop.setPropActive(e)},t.prototype.destroyStab=function(){c.default.Instance.destroyStab(this._listStab),this._listStab=[]},t.prototype.refreshUI=function(){var e=this.node.getComponent(cc.PhysicsBoxCollider);e.size=this.node.getContentSize(),this._cubeInfo.cubeType==i.C.CubeType.CanNotTouch?(this.sprCube.spriteFrame=a.default.Instance.loadSpriteFrame(i.C.ResName.Cube_can_not_touch),e.restitution=.5,c.default.Instance.setStabActive(!0,this._listStab)):(this.sprCube.spriteFrame=a.default.Instance.loadSpriteFrame(i.C.ResName.Cube_can_touch),e.restitution=0,c.default.Instance.setStabActive(!1,this._listStab)),e.apply()},t.prototype.move=function(){this._cubeInfo.moveType==i.C.MoveType.SlowLoopMoveLeft?this.moveLoop(this.node,110*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.66:1),0):this._cubeInfo.moveType==i.C.MoveType.SlowLoopMoveRight?this.moveLoop(this.node,110*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.66:1),1):this._cubeInfo.moveType==i.C.MoveType.FastLoopMoveLeft?this.moveLoop(this.node,220*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.66:1),0):this._cubeInfo.moveType==i.C.MoveType.FastLoopMoveRight?this.moveLoop(this.node,220*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.66:1),1):this._cubeInfo.moveType==i.C.MoveType.FlickeringLoopMoveLeft?(this.moveLoop(this.node,110*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.66:1),0),this.startFlichering()):this._cubeInfo.moveType==i.C.MoveType.FlickeringLoopMoveRight&&(this.moveLoop(this.node,110*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.66:1),1),this.startFlichering()),this._bMove=!0},t.prototype.stopMove=function(){this._bMove=!1,this.node.stopAllActions()},t.prototype.getMoveState=function(){return this._bMove},t.prototype.startFlichering=function(){this.node.opacity=255;var e=cc.fadeTo(.2,0),t=cc.fadeTo(.2,255),o=cc.sequence(e,cc.delayTime(1),t,cc.delayTime(1)).repeatForever();o.setTag(this._nFlickeringActionTag),this.node.runAction(o)},t.prototype.stopFlichering=function(){this.node.opacity=255,this.node.stopActionByTag(this._nFlickeringActionTag)},t.prototype.moveLoop=function(e,t,o){if(e){var n=this.getMaxPos(e,!0),i=this.getMaxPos(e,!1),a=e.getPosition(),r=i/t,s=(i-this.node.position.x)/i*r,c=Math.abs(n-this.node.position.x)/i*r,p=cc.moveTo(r,n,a.y).easing(cc.easeInOut(2)),l=cc.moveTo(r,i,a.y).easing(cc.easeInOut(2)),u=null;if(0==o)if(this.node.position.x>n){var d=cc.moveTo(c,n,a.y).easing(cc.easeInOut(2)),h=cc.callFunc(function(){var t=cc.sequence(l,p).repeatForever();e.runAction(t)});u=cc.sequence(d,h)}else u=cc.sequence(l,p).repeatForever();else if(this.node.position.x<i){d=cc.moveTo(s,i,a.y).easing(cc.easeInOut(2)),h=cc.callFunc(function(){var t=cc.sequence(p,l).repeatForever();e.runAction(t)});u=cc.sequence(d,h)}else u=cc.sequence(p,l).repeatForever();e.runAction(u)}else cc.error("node is null")},t.prototype.getMaxPos=function(e,t){if(e){var o=e.getContentSize().width,n=cc.winSize.width/2-o/2;return t&&(n=-n),n}cc.error("node is null")},t.prototype.changeToOnePointFiveSize=function(){var e=new cc.Size(1.5*this._cubeInfo.size.width,this._cubeInfo.size.height);this.node.setContentSize(e),this.sprCube.node.setContentSize(e),c.default.Instance.destroyStab(this._listStab),this._listStab=c.default.Instance.createStab(e,this.node),this.refreshUI()},t.prototype.changeToNormalSize=function(){this.node.setContentSize(this._cubeInfo.size),this.sprCube.node.setContentSize(this._cubeInfo.size),c.default.Instance.destroyStab(this._listStab),this._listStab=c.default.Instance.createStab(this._cubeInfo.size,this.node),this.refreshUI()},t.prototype.playCubeStandOn=function(){this._anim.play("CubeClean")},t.prototype.init=function(){this._anim=this.node.getComponent(cc.Animation)},t.prototype.onChangeGameSwitch=function(e){this._cubeInfo&&(this._cubeInfo.moveType!=i.C.MoveType.SlowLoopMoveLeft&&this._cubeInfo.moveType!=i.C.MoveType.SlowLoopMoveRight&&this._cubeInfo.moveType!=i.C.MoveType.FastLoopMoveLeft&&this._cubeInfo.moveType!=i.C.MoveType.FastLoopMoveRight&&this._cubeInfo.moveType!=i.C.MoveType.FlickeringLoopMoveLeft&&this._cubeInfo.moveType!=i.C.MoveType.FlickeringLoopMoveRight||(s.default.Instance.GameSwitch?this.node.resumeAllActions():this.node.pauseAllActions()))},t.prototype.start=function(){this.init()},t.prototype.update=function(e){if(s.default.Instance.GameSwitch&&this._bMove&&this._cubeInfo){var t=cc.winSize.width;if(this._cubeInfo.moveType==i.C.MoveType.LeftMove){var o=t/2+this.node.getContentSize().width/2;this.node.x-=e*this._curSpeed*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.5:1),this.node.x<-o&&(this.node.x=o)}else if(this._cubeInfo.moveType==i.C.MoveType.RightMove){o=t/2+this.node.getContentSize().width/2;this.node.x+=e*this._curSpeed*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.5:1),this.node.x>o&&(this.node.x=-o)}else if(this._cubeInfo.moveType==i.C.MoveType.LeftFastRightSlowLoopMove){o=t/2-this.node.getContentSize().width/2;this.node.x+=e*this._curSpeed,this.node.x<=-o?this._curSpeed=this._baseSpeed*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.5:1):this.node.x>=o&&(this._curSpeed=3*-this._baseSpeed*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.5:1))}else if(this._cubeInfo.moveType==i.C.MoveType.LeftSlowRightFastLoopMove){o=t/2-this.node.getContentSize().width/2;this.node.x-=e*this._curSpeed,this.node.x<=-o?this._curSpeed=3*-this._baseSpeed*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.5:1):this.node.x>=o&&(this._curSpeed=this._baseSpeed*(s.default.Instance.PropState[i.C.PropType.Prop_4]?.5:1))}}},__decorate([d(cc.Sprite)],t.prototype,"sprCube",void 0),t=__decorate([u],t)}(n.default);o.default=h,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYBaseNode":"FYBaseNode","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","./OtherMgr":"OtherMgr","./PropMgr":"PropMgr"}],C:[function(e,t,o){"use strict";var n,i,a,r,s,c,p,l,u,d,h,f,_,y,C;cc._RF.push(t,"d29a4xpQm5I26IDnhWkgbug","C"),Object.defineProperty(o,"__esModule",{value:!0}),n=o.C||(o.C={}),(i=n.SaveKey||(n.SaveKey={})).Gold="PYDrop_Gold",i.MaxScore="PYDrop_MaxScore",i.RevivePropNum="PYDrop_RevivePropNum",i.CurRoleType="PYDrop_CurRoleType",i.PassGuidance="PYDrop_PassGuidance",(a=n.MsgType||(n.MsgType={})).TouchStart="TouchStart",a.MoveCamera="MoveCamera",a.RestartGame="RestartGame",a.ChangeRoleParent="ChangeRoleParent",a.GoldChange="GoldChange",a.ScoreChange="ScoreChange",a.PropTime="PropTime",a.PropTimeOut="PropTimeOut",a.RefreshBean="RefreshBean",a.RewardStage="RewardStage",a.ChangeRole="ChangeRole",a.ChangeGameSwitch="GameSwitch",a.UseBomb="UseBomb",a.GetProp="GetProp",(r=n.UIName||(n.UIName={})).UIGamePanel="UIGamePanel",r.UIGameOverPanel="UIGameOverPanel",r.UIMainPanel="UIMainPanel",r.UIShopPanel="UIShopPanel",r.UIResultPanel="UIResultPanel",r.UIRankPanel="UIRankPanel",r.UIGroupRankPanel="UIGroupRankPanel",r.UIPropRevivePanel="UIPropRevivePanel",r.UIGuidancePanel="UIGuidancePanel",(s=n.PropType||(n.PropType={})).Prop_0="prop_0",s.Prop_1="prop_1",s.Prop_2="prop_2",s.Prop_3="prop_3",s.Prop_4="prop_4",s.Prop_5="prop_5",s.Prop_6_0="prop_6_0",s.Prop_6_1="prop_6_1",s.Prop_6_2="prop_6_2",s.Prop_7="prop_7",s.None="",(c=n.EffectName||(n.EffectName={})).Fog="Fog01",c.Xin="Xin01",(n.SequenceFrameName||(n.SequenceFrameName={})).SFCubeDestroy="SFCubeDestroy",(p=n.ResName||(n.ResName={})).Cube_can_not_touch="cube_can_not_touch",p.Cube_can_touch="cube_can_touch",n.OtherName||(n.OtherName={}),(l=n.MoveType||(n.MoveType={}))[l.SlowLoopMoveLeft=0]="SlowLoopMoveLeft",l[l.SlowLoopMoveRight=1]="SlowLoopMoveRight",l[l.FastLoopMoveLeft=2]="FastLoopMoveLeft",l[l.FastLoopMoveRight=3]="FastLoopMoveRight",l[l.LeftMove=4]="LeftMove",l[l.RightMove=5]="RightMove",l[l.FlickeringLoopMoveLeft=6]="FlickeringLoopMoveLeft",l[l.FlickeringLoopMoveRight=7]="FlickeringLoopMoveRight",l[l.LeftSlowRightFastLoopMove=8]="LeftSlowRightFastLoopMove",l[l.LeftFastRightSlowLoopMove=9]="LeftFastRightSlowLoopMove",l[l.None=10]="None",(u=n.CubeType||(n.CubeType={}))[u.CanTouch=0]="CanTouch",u[u.CanNotTouch=1]="CanNotTouch",u[u.Border=2]="Border",(d=n.RoleAnimType||(n.RoleAnimType={})).Drop="RoleTvdrop",d.Big="RoleTvBig",d.Small="RoleTvSmall",d.Idle="RoleTvIdle",d.BigDrop="RoleTvBigdrop",(h=n.GameMode||(n.GameMode={}))[h.Normal=0]="Normal",h[h.Reward=1]="Reward",(f=n.Music||(n.Music={}))[f.bg=0]="bg",(_=n.Sound||(n.Sound={}))[_.bomb=0]="bomb",_[_.btn_click=1]="btn_click",_[_.comb_reward=2]="comb_reward",_[_.cube_destroy=3]="cube_destroy",_[_.die=4]="die",_[_.get_bean=5]="get_bean",_[_.get_gold=6]="get_gold",_[_.get_prop=7]="get_prop",_[_.reward_stage=8]="reward_stage",_[_.drop=9]="drop",(y=n.RoleType||(n.RoleType={}))[y.Role_0=0]="Role_0",y[y.Role_1=1]="Role_1",y[y.Role_2=2]="Role_2",y[y.Role_3=3]="Role_3",y[y.Role_None=4]="Role_None",(C=n.AnimationEventType||(n.AnimationEventType={})).Play="play",C.Stop="stop",C.Pause="pause",C.Resume="resume",C.LastFrame="lastframe",C.Finished="finished",cc._RF.pop()},{}],Demo:[function(e,t,o){"use strict";cc._RF.push(t,"5b4c6xeRiBLR7xQFgIlT8ws","Demo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Common/UserDataMgr"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){n.default.Instance.Gold=1,cc.log(n.default.Instance.Gold),delete n.default.Instance.Gold},t=__decorate([a],t)}(cc.Component));o.default=r,cc._RF.pop()},{"./Common/UserDataMgr":"UserDataMgr"}],EffectMgr:[function(e,t,o){"use strict";cc._RF.push(t,"238d4gGAedCX4tFqGKvfmPi","EffectMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYResMgr"),i=e("../Tools/FYEffectItem"),a=e("../Tools/FYScheduleCtl"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){this._effectContainer=null,this._dictEffectPool={}}return t=e,e.prototype.init=function(e){this._effectContainer=e},e.prototype.preLoad=function(){},e.prototype.playEffect=function(e,o,n,i){void 0===i&&(i=this._effectContainer);var r=this.add(e,o);return r.parent=i,a.default.Instance.setScheduleOnce(function(){t.Instance.remove(r)},n),r},e.prototype.add=function(e,t,o){void 0===o&&(o=this._effectContainer);var a=this.poolGet(e);return null==a&&(a=cc.instantiate(n.default.Instance.loadEffect(e))),a.active=!0,a.parent=o,a.setPosition(t),a.getComponent(i.default).play(),a},e.prototype.remove=function(e){this.poolPut(e)},e.prototype.poolPut=function(e){this._dictEffectPool&&this._dictEffectPool.hasOwnProperty(e.name)?this._dictEffectPool[e.name].put(e):(this._dictEffectPool[e.name]=new cc.NodePool,this._dictEffectPool[e.name].put(e))},e.prototype.poolGet=function(e){return this._dictEffectPool&&this._dictEffectPool.hasOwnProperty(e)&&this._dictEffectPool[e].size()>0?this._dictEffectPool[e].get():null},e.Instance=new t,e=t=__decorate([s],e);var t}());o.default=c,cc._RF.pop()},{"../Tools/FYEffectItem":"FYEffectItem","../Tools/FYResMgr":"FYResMgr","../Tools/FYScheduleCtl":"FYScheduleCtl"}],FYAudioCtl:[function(e,t,o){"use strict";cc._RF.push(t,"1c11fMZ5+NGqJjKmWa5by6S","FYAudioCtl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./FYUtility"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arraySound=[],t.arrayMusic=[],t._bOpenSound=!0,t._bOpenMusic=!0,t._nPlayingMusic=-1,t}return __extends(t,e),o=t,Object.defineProperty(t,"Instance",{get:function(){return o._instance},enumerable:!0,configurable:!0}),t.prototype.playSound=function(e){this.arraySound[e]&&this._bOpenSound&&(n.default.log("-----------playSound------",e),this.arraySound[e].setCurrentTime(0),this.arraySound[e].play())},t.prototype.playMusic=function(e){this._nPlayingMusic!=e&&(this.arrayMusic[this._nPlayingMusic]&&this.arrayMusic[this._nPlayingMusic].stop(),this.arrayMusic[e]&&this.arrayMusic[e].play(),this._nPlayingMusic=e)},t.prototype.rewindMusic=function(){this.arrayMusic[this._nPlayingMusic]&&this.arrayMusic[this._nPlayingMusic].resume()},t.prototype.pauseSound=function(e){this.arraySound[e]&&this.arraySound[e].pause()},t.prototype.pauseMusic=function(e){this.arrayMusic[e]&&this.arrayMusic[e].pause()},t.prototype.stopSound=function(e){this.arraySound[e]&&this.arraySound[e].stop()},t.prototype.stopMusic=function(e){this.arrayMusic[e]&&this.arrayMusic[e].stop()},t.prototype.changeSoundVolume=function(e){for(var t=0;t<this.arraySound.length;t++)this.arraySound[t]&&(this.arraySound[t].volume=e)},t.prototype.changeMusicVolume=function(e){for(var t=0;t<this.arrayMusic.length;t++)this.arrayMusic[t]&&(this.arrayMusic[t].volume=e,this.arrayMusic[t].play())},t.prototype.onLoad=function(){o._instance=this},t._instance=null,__decorate([r({type:Array(cc.AudioSource),displayName:"音效数组"})],t.prototype,"arraySound",void 0),__decorate([r({type:Array(cc.AudioSource),displayName:"音乐数组"})],t.prototype,"arrayMusic",void 0),t=o=__decorate([a],t);var o}(cc.Component);o.default=s,cc._RF.pop()},{"./FYUtility":"FYUtility"}],FYBaseNode:[function(e,t,o){"use strict";cc._RF.push(t,"3e5b1ALxXhAGJHLj6QrQX2M","FYBaseNode"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addListener=function(){},t.prototype.removeListener=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener()},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],FYBaseUIPanel:[function(e,t,o){"use strict";cc._RF.push(t,"490dcBJXE5E16zU6g11Td3j","FYBaseUIPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./FYBaseNode"),i=e("./FYMessenger"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeWidget=null,t}return __extends(t,e),t.prototype.setActive=function(e){this.nodeWidget&&(this.nodeWidget.active=e)},t.prototype.addListener=function(){e.prototype.addListener.call(this),i.default.Instance.add(this.node.name,this.onShow,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),i.default.Instance.remove(this.node.name,this.onShow,this)},t.prototype.onShow=function(e,t){},__decorate([s(cc.Node)],t.prototype,"nodeWidget",void 0),t=__decorate([r],t)}(n.default);o.default=c,cc._RF.pop()},{"./FYBaseNode":"FYBaseNode","./FYMessenger":"FYMessenger"}],FYEffectControl:[function(e,t,o){"use strict";cc._RF.push(t,"7243cZGHglChod3JhCE9Gok","FYEffectControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.partical=null,t}return __extends(t,e),t.prototype.playPartical=function(){this.partical.node.active=!0,this.partical.resetSystem()},t.prototype.stopPartical=function(){this.partical.node.active=!1,this.partical.stopSystem()},t.prototype.start=function(){},__decorate([a({type:cc.ParticleSystem})],t.prototype,"partical",void 0),t=__decorate([i],t)}(cc.Component);o.default=r,cc._RF.pop()},{}],FYEffectItem:[function(e,t,o){"use strict";cc._RF.push(t,"0c656atI3BPwJrhEzYDcD7/","FYEffectItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listAnimation=[],t.listParticleSystem=[],t}return __extends(t,e),t.prototype.play=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!0,this.listAnimation[e].play();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!0,this.listParticleSystem[e].resetSystem()},t.prototype.stop=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!1,this.listAnimation[e].stop();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!1,this.listParticleSystem[e].stopSystem()},t.prototype.start=function(){},__decorate([a({type:Array(cc.Animation),displayName:"动作列表"})],t.prototype,"listAnimation",void 0),__decorate([a({type:Array(cc.ParticleSystem),displayName:"特效列表"})],t.prototype,"listParticleSystem",void 0),t=__decorate([i],t)}(cc.Component);o.default=r,cc._RF.pop()},{}],FYGlobalVarMgr:[function(e,t,o){"use strict";cc._RF.push(t,"71d0eOTwslMTpy8XiWviIZx","FYGlobalVarMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){this._nodeCanvas=null,this._canvas=null,this._nodeBottom=null,this._nodeCenter=null,this._nodeTop=null,this._nDesignSize=cc.Size.ZERO}return t=e,e.prototype.reset=function(){this._nodeCanvas=null,this._canvas=null,this._nodeBottom=null,this._nodeCenter=null,this._nodeTop=null},Object.defineProperty(e.prototype,"NodeCanvas",{get:function(){return this._nodeCanvas||(this._nodeCanvas=this._nodeCanvas=cc.director.getScene().getChildByName("Canvas")),this._nodeCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Canvas",{get:function(){return this._canvas||(this._canvas=this.NodeCanvas.getComponent(cc.Canvas)),this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeBottom",{get:function(){return this._nodeBottom||(this._nodeBottom=this.NodeCanvas.getChildByName("Bottom")),this._nodeBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeCenter",{get:function(){return this._nodeCenter||(this._nodeCenter=this.NodeCanvas.getChildByName("Center")),this._nodeCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeTop",{get:function(){return this._nodeTop||(this._nodeTop=this.NodeCanvas.getChildByName("Top")),this._nodeTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DesignSize",{get:function(){return 0==this._nDesignSize.width&&0==this._nDesignSize.height&&(this._nDesignSize=this.NodeCanvas.getComponent(cc.Canvas).designResolution),this._nDesignSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WinSize",{get:function(){return cc.winSize},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=__decorate([i],e);var t}());o.default=a,cc._RF.pop()},{}],FYMessenger:[function(e,t,o){"use strict";cc._RF.push(t,"61a7eOT0OZAXK4lApqz4hd1","FYMessenger"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.listeners={}}return e.prototype.add=function(e,t,o){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e][o.__instanceId]=new i(t,o)},e.prototype.remove=function(e,t,o){var n=this.listeners[e];if(n){n.length;delete n[o.__instanceId],0==n.length&&delete this.listeners[e]}},e.prototype.send=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.listeners[e];if(n){n.length;for(var i in n){var a=n[i];a.notify.apply(a,[e].concat(t))}}},e.Instance=new e,e}();o.default=n;var i=function(){function e(e,t){this.callback=null,this.context=null;this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o;(o=this.callback).call.apply(o,[this.context].concat(e))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],FYResMgr:[function(e,t,o){"use strict";cc._RF.push(t,"69c02vGOERDzbO8IDtkhlci","FYResMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./FYMessenger"),i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){this.dictAtlas={},this.dictEffect={},this.dictSequenceFrame={},this.dictOther={}}return t=e,e.prototype.preLoadAltlas=function(){var e=this;cc.loader.loadResDir("atlas",cc.SpriteAtlas,function(e,o,i){n.default.Instance.send(t.MsgPreLoadAtlasProgress,e,o)},function(o,i){for(var a=0;a<i.length;a++)for(var r in i[a]._spriteFrames)e.dictAtlas[i[a]._spriteFrames[r]._name]=i[a]._spriteFrames[r];n.default.Instance.send(t.MsgPreLoadAtlasComplete)})},e.prototype.preLoadEffect=function(){var e=this;cc.loader.loadResDir("prefabs/Effect",cc.Prefab,function(e,o,i){n.default.Instance.send(t.MsgPreLoadEffectProgress,e,o)},function(o,i){for(var a=0;a<i.length;a++)e.dictEffect[i[a]._name]=i[a].data;n.default.Instance.send(t.MsgPreLoadEffectComplete)})},e.prototype.preLoadSequenceFrame=function(){var e=this;cc.loader.loadResDir("prefabs/SequenceFrame",cc.Prefab,function(e,o,i){n.default.Instance.send(t.MsgPreLoadSequenceFrameProgress,e,o)},function(o,i){for(var a=0;a<i.length;a++)e.dictSequenceFrame[i[a]._name]=i[a].data;n.default.Instance.send(t.MsgPreLoadSequenceFrameComplete)})},e.prototype.preLoadOther=function(){var e=this;cc.loader.loadResDir("prefabs/Other",cc.Prefab,function(e,o,i){n.default.Instance.send(t.MsgPreLoadOtherProgress,e,o)},function(o,i){for(var a=0;a<i.length;a++)e.dictOther[i[a]._name]=i[a].data;n.default.Instance.send(t.MsgPreLoadOtherComplete)})},e.prototype.loadSpriteFrame=function(e){return e in this.dictAtlas?this.dictAtlas[e]:null},e.prototype.loadEffect=function(e){return e in this.dictEffect?this.dictEffect[e]:null},e.prototype.loadSequenceFrame=function(e){return e in this.dictSequenceFrame?this.dictSequenceFrame[e]:null},e.prototype.loadOther=function(e){if(e in this.dictOther)return this.dictOther[e]},e.Instance=new t,e.MsgPreLoadAtlasProgress="PreLoadAtlasProgress",e.MsgPreLoadEffectProgress="MsgPreLoadEffectProgress",e.MsgPreLoadSequenceFrameProgress="MsgPreLoadSequenceFrameProgress",e.MsgPreLoadOtherProgress="MsgPreLoadOtherProgress",e.MsgPreLoadAtlasComplete="PreLoadAtlasComplete",e.MsgPreLoadEffectComplete="PreLoadEffectComplete",e.MsgPreLoadSequenceFrameComplete="MsgPreLoadSequenceFrameComplete",e.MsgPreLoadOtherComplete="MsgPreLoadOtherComplete",e.MsgPreLoadComplete="PreLoadComplete",e=t=__decorate([a],e);var t}());o.default=r,cc._RF.pop()},{"./FYMessenger":"FYMessenger"}],FYSDKMgr:[function(e,t,o){"use strict";cc._RF.push(t,"a4d77hfjeRLi69n5V71ufRy","FYSDKMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){this.test={},this.test2={}}return t=e,e.prototype.saveLocalData=function(e,t){cc.sys.localStorage.setItem(e,t)},e.prototype.loadLocalData=function(e,t){return void 0===t&&(t="0"),cc.sys.localStorage.getItem(e)||t},e.prototype.saveLocalJsonData=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.prototype.loadLocalJsonData=function(e){return JSON.parse(cc.sys.localStorage.getItem(e)||JSON.stringify({}))},e.prototype.removeLocalData=function(e){cc.sys.localStorage.removeItem(e)},e.prototype.removeAllLocalData=function(){cc.sys.localStorage.clear()},e.Instance=new t,e=t=__decorate([i],e);var t}());o.default=a,cc._RF.pop()},{}],FYScheduleCtl:[function(e,t,o){"use strict";cc._RF.push(t,"ad93830nspIwZhX4wuibyuF","FYScheduleCtl"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),o=t,Object.defineProperty(t,"Instance",{get:function(){return o._instance},enumerable:!0,configurable:!0}),t.prototype.setSchedule=function(e,t,o,n){this.schedule(e,t,o,n)},t.prototype.setScheduleOnce=function(e,t){this.scheduleOnce(e,t)},t.prototype.onLoad=function(){o._instance=this},t._instance=null,t=o=__decorate([i],t);var o}(cc.Component));o.default=a,cc._RF.pop()},{}],FYSequenceFrameControl:[function(e,t,o){"use strict";cc._RF.push(t,"8b9a2RgcEFFtrfWmPqLXEPv","FYSequenceFrameControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./FYUtility"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arraySprite=[],t.interval=.1,t.delay=.1,t.playCount=-1,t.isPlayOnLoad=!1,t.isAutoDestroy=!1,t.isRandomStartIndex=!1,t._curIndex=0,t._curPlayCount=0,t._callback=null,t}return __extends(t,e),t.prototype.updateSprite=function(){if(this._curIndex++,this._curIndex>=this.arraySprite.length&&(this._curIndex=0,this.playCount>0&&(this._curPlayCount++,this._curPlayCount>=this.playCount)))return this.stop(),this._callback&&this._callback(),void(this.isAutoDestroy&&(this.node.destroy(),this.destroy()));this._curIndex=this._curIndex%this.arraySprite.length;var e=(this._curIndex-1+this.arraySprite.length)%this.arraySprite.length;this.arraySprite[e].active=!1,this.arraySprite[this._curIndex%this.arraySprite.length].active=!0},t.prototype.play=function(){this._curPlayCount=0,this.stop(),this.isRandomStartIndex&&(this.arraySprite[0].active=!1,this._curIndex=n.default.getRangeRandom(0,this.arraySprite.length-1)),this.schedule(this.updateSprite,this.interval,cc.macro.REPEAT_FOREVER,this.delay)},t.prototype.stop=function(){this.unschedule(this.updateSprite)},t.prototype.setCompleteCallback=function(e){this._callback=e},t.prototype.getCurIndex=function(){return this._curIndex},t.prototype.setCurIndex=function(e){this._curIndex=e,this._curIndex=this._curIndex%this.arraySprite.length},t.prototype.start=function(){this.isPlayOnLoad&&this.play()},__decorate([r({type:Array(cc.Node),displayName:"图片数组"})],t.prototype,"arraySprite",void 0),__decorate([r({type:cc.Float,displayName:"间隔时间"})],t.prototype,"interval",void 0),__decorate([r({type:cc.Float,displayName:"延迟时间"})],t.prototype,"delay",void 0),__decorate([r({type:cc.Integer,displayName:"播放次数"})],t.prototype,"playCount",void 0),__decorate([r({displayName:"是否启动就播放"})],t.prototype,"isPlayOnLoad",void 0),__decorate([r({displayName:"是否自动删除"})],t.prototype,"isAutoDestroy",void 0),__decorate([r({displayName:"是否随机开始索引"})],t.prototype,"isRandomStartIndex",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./FYUtility":"FYUtility"}],FYTweenMgr:[function(e,t,o){"use strict";cc._RF.push(t,"c5f894cQTtNrIw9965abunw","FYTweenMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return e.moveTo=function(e,t,o,n,i,a){if(void 0===i&&(i=0),e instanceof cc.Node){var r=cc.moveTo(t,o,n),s=cc.callFunc(function(e){a&&a()},this,0),c=cc.sequence(cc.delayTime(i),r,s);return e.runAction(c),c}return null},e.moveBy=function(e,t,o,n,i,a){if(void 0===i&&(i=0),e instanceof cc.Node){var r=cc.moveBy(t,o,n),s=cc.callFunc(function(e){a&&a()},this,0),c=cc.sequence(cc.delayTime(i),r,s);return e.runAction(c),c}return null},e.rotateBy=function(e,t,o,n,i){if(void 0===n&&(n=0),e instanceof cc.Node){var a=cc.rotateBy(t,o),r=cc.callFunc(function(e){i&&i()},this,0),s=cc.sequence(cc.delayTime(n),a,r);return e.runAction(s),s}return null},e.scaleTo=function(e,t,o,n,i,a){if(void 0===i&&(i=0),e instanceof cc.Node){var r=cc.scaleTo(t,o,n),s=cc.callFunc(function(e){a&&a()},this,0),c=cc.sequence(cc.delayTime(i),r,s);return e.runAction(c),c}return null},e.scaleBigAndSmall=function(e,t,o,n,i){if(void 0===o&&(o=0),void 0===n&&(n=!1),e instanceof cc.Node){var a=cc.scaleTo(t/2,1.1,1.1),r=cc.scaleTo(t/2,.9,.9),s=cc.callFunc(function(e){i&&i()},this,0),c=cc.sequence(cc.delayTime(o),a,r,s);return n&&c.repeatForever(),e.runAction(c),c}return null},e.scaleBigAndNormal=function(e,t,o,n,i,a,r){if(void 0===i&&(i=0),void 0===a&&(a=!1),e instanceof cc.Node){var s=cc.scaleTo(t/2,o,n),c=cc.scaleTo(t/2,1,1),p=cc.callFunc(function(e){r&&r()},this,0),l=cc.sequence(cc.delayTime(i),s,c,p);return a&&l.repeatForever(),e.runAction(l),l}return null},e.waitBy=function(e,t,o){if(e instanceof cc.Node){var n=cc.fadeTo(t,e.opacity),i=cc.callFunc(function(e){o&&o()},this,0),a=cc.sequence(n,i);return e.runAction(a),a}return null},e.stopAllActions=function(e){e instanceof cc.Node&&e.stopAllActions()},e.stopAction=function(e,t){e instanceof cc.Node&&e.stopAction(t)},e=__decorate([i],e)}());o.default=a,cc._RF.pop()},{}],FYUIMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2604aqnyTdJkYCkKucAU3P5","FYUIMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./FYMessenger"),i=e("./FYGlobalVarMgr"),a=e("./FYUtility"),r=e("./FYBaseUIPanel"),s=cc._decorator,c=s.ccclass,p=(s.property,function(){function e(){this._dictUIPrefab={},this._dictUIPanel={}}return t=e,e.prototype.preLoad=function(){var e=this;cc.loader.loadResDir("prefabs/UI",cc.Prefab,function(e,o,i){n.default.Instance.send(t.MsgPreLoadUIProgress,e,o)},function(o,i){for(var a=0;a<i.length;a++)e._dictUIPrefab[i[a]._name]=i[a].data;n.default.Instance.send(t.MsgPreLoadUIComplete)})},e.prototype.show=function(e,t){void 0===t&&(t=i.default.Instance.NodeTop);for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];t||(t=i.default.Instance.NodeTop),this._dictUIPrefab[e]?(this._dictUIPanel[e]?this._dictUIPanel[e].setActive(!0):this._dictUIPanel[e]=a.default.addChild(t,this._dictUIPrefab[e]).getComponent(r.default),this._dictUIPanel[e].node.setSiblingIndex(this._dictUIPanel[e].node.parent.childrenCount),n.default.Instance.send(e,o)):cc.error(e+" is not prelaod")},e.prototype.hide=function(e){this._dictUIPanel[e]&&this._dictUIPanel[e].setActive(!1)},e.prototype.close=function(e){this._dictUIPanel[e]&&(this._dictUIPanel[e].node.destroy(),delete this._dictUIPanel[e])},e.Instance=new t,e.MsgPreLoadUIProgress="PreLoadUIProgress",e.MsgPreLoadUIComplete="PreLoadUIComplete",e=t=__decorate([c],e);var t}());o.default=p,cc._RF.pop()},{"./FYBaseUIPanel":"FYBaseUIPanel","./FYGlobalVarMgr":"FYGlobalVarMgr","./FYMessenger":"FYMessenger","./FYUtility":"FYUtility"}],FYUtility:[function(e,t,o){"use strict";cc._RF.push(t,"89d0b1gEwNHGL/lAt6LxF7n","FYUtility"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(){function e(){}return t=e,e.changeSpriteFrame=function(e,t,o){cc.loader.loadRes(t,cc.SpriteAtlas,function(t,n){if(n instanceof cc.SpriteAtlas){var i=n.getSpriteFrame(o);e.spriteFrame=i}})},e.getRandomValueDif=function(e,t,o){for(var n=new Array,i=o?o>t-e+1?t-e+1:o:1,a=e,r=0;a<=t;a++,r++)n[r]=a;var s=[];n.sort(function(){return.5-Math.random()});for(var c=0;c<i;c++){var p=Math.floor(Math.random()*n.length);s.push(n[p]);var l=n[p];n[p]=n[n.length-1],n[n.length-1]=l,n.pop()}return s},e.getRangeRandom=function(e,o){return t.getRandomValueDif(e,o,1)[0]},e.addChild=function(e,t,o,n){if(void 0===o&&(o=cc.Vec2.ZERO),void 0===n&&(n=!0),null==e||null==t)return cc.error("----------\x3e>>>>>>>>parent is undefined",null==e),void cc.error("----------\x3e>>>>>>>>child is undefined",null==t);cc.Vec2.ZERO;var i=cc.instantiate(t);return i.parent=e,i.position=o,i.active=n,i},e.getCanvasWidth=function(){return cc.Canvas.instance.node.width},e.getCanvasHeight=function(){return cc.Canvas.instance.node.height},e.loadScene=function(e){cc.director.loadScene(e)},e.enablePhysicsSystem=function(e){cc.director.getPhysicsManager().enabled=e},e.enableCollisionSystem=function(e){cc.director.getCollisionManager().enabled=e},e.convertDateFromString=function(e){if(e){var t=e.split(" ")[0].split("/");return new Date(t[0],t[1]-1,t[2])}},e.getMonTimeByNowTime=function(){var e=new Date,t=e.getDay();return 0==t&&(t=7),e.setHours(0,0,0,0),new Date(e.getTime()-24*(t-1)*60*60*1e3).getTime()},e.isSameDay=function(e,t){void 0===t&&(t=Date.now());var o=Number(e),n=Number(t);if(o&&n){var i=new Date(o),a=new Date(n);return i.setHours(0,0,0,0)==a.setHours(0,0,0,0)}return!1},e.getDictionaryCount=function(e){var t=0;for(var o in e)t++;return t},e.formatTime=function(e){var o,n,i;return i=(e=parseInt(e))%60,n=e%3600/60,(o=e/3600)?t.PadZero(o)+":"+t.PadZero(n)+":"+t.PadZero(i):t.PadZero(n)+":"+t.PadZero(i)},e.formatTime2=function(e){var o,n;e=parseInt(e);return o=(n=Math.floor((e-1e3*Math.floor(e/1e3))/10))/1e3%60,e/1e3%3600/60,e/1e3/3600,t.PadZero(o)+":"+t.PadZero(n)},e.PadZero=function(e){return new RegExp(/^\d$/g).test(e)?"0"+e:e},e.getMonthWeek=function(){var e=new Date,t=(e.getFullYear(),e.getDay(),e.getDate(),e.getDay()),o=e.getDate();return Math.ceil((o+6-t)/7)},e.log=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},e.changeParentKeepPos=function(e,t){var o=e.parent.convertToWorldSpaceAR(e.position),n=t.parent.convertToNodeSpaceAR(o);e.parent=t,e.setPosition(n)},e=t=__decorate([i],e);var t}());o.default=a,cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"644a1+0GQZISoqJUaWIV9+i","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseNode"),i=e("../Tools/FYUIMgr"),a=e("../Common/C"),r=e("../Tools/FYGlobalVarMgr"),s=e("../Tools/FYUtility"),c=e("../Tools/FYMessenger"),p=e("../Common/UserDataMgr"),l=cc._decorator,u=l.ccclass,d=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onTouchStart=function(e){p.default.Instance.TouchSwitch&&c.default.Instance.send(a.C.MsgType.TouchStart)},t.prototype.onLoad=function(){r.default.Instance.reset(),s.default.enablePhysicsSystem(!0),cc.director.getCollisionManager().enabledDebugDraw=!0},t.prototype.start=function(){i.default.Instance.show(a.C.UIName.UIMainPanel)},t=__decorate([u],t)}(n.default));o.default=d,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYBaseNode":"FYBaseNode","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],OtherMgr:[function(e,t,o){"use strict";cc._RF.push(t,"ae50ejLneFF9LtE5esBC6gA","OtherMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYResMgr"),i=e("../Tools/FYGlobalVarMgr"),a=e("./CubeMgr"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){this._dictOthertPool={}}return t=e,e.prototype.poolPut=function(e){this._dictOthertPool&&this._dictOthertPool.hasOwnProperty(e.name)?this._dictOthertPool[e.name].put(e):(this._dictOthertPool[e.name]=new cc.NodePool,this._dictOthertPool[e.name].put(e))},e.prototype.poolGet=function(e){return this._dictOthertPool&&this._dictOthertPool.hasOwnProperty(e)&&this._dictOthertPool[e].size()>0?this._dictOthertPool[e].get():cc.instantiate(n.default.Instance.loadOther(e))},e.prototype.playComboTween=function(e,t){var o=this.poolGet("TxtCombo");o.parent=t.parent,o.setPosition(t.position);var n=this;o.getComponentInChildren(cc.Label).string=e.toString(),o.scale=0,o.opacity=255;var i=cc.scaleTo(.2,1.5,1.5),a=cc.scaleTo(.2,1,1),r=cc.moveBy(.2,0,100),s=cc.moveBy(.2,0,60),c=cc.fadeTo(.2,0),p=cc.callFunc(function(){n.poolPut(o)}),l=cc.sequence(i,a),u=cc.sequence(r,s,c,p);o.runAction(l),o.runAction(u)},e.prototype.playBounsTween=function(){var e=this.poolGet("Bouns");e.parent=i.default.Instance.NodeCenter,e.setPosition(new cc.Vec2(100,0)),e.scale=0;var t=this,o=cc.scaleTo(.2,1,1),n=cc.delayTime(.05),a=cc.moveTo(.4,new cc.Vec2(-cc.winSize.width,0)),r=cc.callFunc(function(){t.poolPut(e)}),s=cc.sequence(o,n,a,r);e.runAction(s)},e.prototype.playComboBuffTween=function(){var e=this.poolGet("ComboBuff");e.parent=i.default.Instance.NodeCenter,e.setPosition(cc.Vec2.ZERO),e.scale=1,e.opacity=0;var t=cc.fadeTo(.1,255),o=cc.scaleTo(.2,.6,.6),n=cc.moveBy(.2,0,100),a=cc.scaleTo(.2,1,1),r=cc.moveTo(.7,0,i.default.Instance.WinSize.height),s=cc.scaleTo(.2,0,0),c=cc.fadeTo(.2,0),p=cc.sequence(t,o,a,cc.delayTime(.1),r),l=cc.sequence(cc.delayTime(.1),n,cc.delayTime(.5),s),u=cc.sequence(cc.delayTime(.8),c);e.runAction(p),e.runAction(l),e.runAction(u)},e.prototype.createStab=function(e,t){for(var o=e.width/a.default.Instance.cubeDeltaWidth,n=[],i=0;i<o;i++){var r=this.poolGet("Stab");r.parent=t,r.setPosition(new cc.Vec2(-e.width/2+a.default.Instance.cubeDeltaWidth*i,a.default.Instance.cubeHeight)),r.active=!1,n.push(r)}return n},e.prototype.destroyStab=function(e){for(var t=0;t<e.length;t++)this.poolPut(e[t])},e.prototype.setStabActive=function(e,t){for(var o=0;o<t.length;o++)t[o].active=e},e.Instance=new t,e=t=__decorate([s],e);var t}());o.default=c,cc._RF.pop()},{"../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYResMgr":"FYResMgr","./CubeMgr":"CubeMgr"}],PropInfo:[function(e,t,o){"use strict";cc._RF.push(t,"831aeXX9UZIx771i2l6B3Rl","PropInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Common/C"),i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){this.propType=n.C.PropType.Prop_0}return e=__decorate([a],e)}());o.default=r,cc._RF.pop()},{"../Common/C":"C"}],PropMgr:[function(e,t,o){"use strict";cc._RF.push(t,"247f3QE3hlHkbA/tZMtXzXd","PropMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYResMgr"),i=e("./Prop"),a=e("../Common/C"),r=e("./PropState"),s=e("../Tools/FYMessenger"),c=e("../Tools/FYAudioCtl"),p=e("../Common/UserDataMgr"),l=cc._decorator,u=l.ccclass,d=(l.property,function(){function e(){this._propPool=new cc.NodePool,this._nodePropContainer=null,this._dictUsingProp={},this._listBean=[]}return t=e,e.prototype.init=function(e){this._nodePropContainer=e},e.prototype.getProp=function(){return this._propPool.size()>0?this._propPool.get():cc.instantiate(n.default.Instance.loadOther("Prop"))},e.prototype.putProp=function(e){e?this._propPool.put(e):cc.error("nodeProp is null")},e.prototype.addProp=function(e,t){void 0===t&&(t=this._nodePropContainer);var o=this.getProp();o.parent=t,o.scale=1,o.opacity=255,o.anchorX=.5,o.anchorY=0;var n=o.getComponent(i.default);return n.setInfo(e),n},e.prototype.removeProp=function(e){this.putProp(e)},e.prototype.useProp=function(e){if(e==a.C.PropType.Prop_0)p.default.Instance.Gold++,c.default.Instance.playSound(a.C.Sound.get_gold);else if(e==a.C.PropType.Prop_1)p.default.Instance.Gold+=5,c.default.Instance.playSound(a.C.Sound.get_gold);else if(e!=a.C.PropType.None&&e!=a.C.PropType.Prop_7){var t=new r.default;t.propType=e,this._dictUsingProp[e]=t,p.default.Instance.PropState[e]=e,e==a.C.PropType.Prop_6_0||e==a.C.PropType.Prop_6_1||e==a.C.PropType.Prop_6_2?(this.addBean(e),c.default.Instance.playSound(a.C.Sound.get_bean)):(s.default.Instance.send(a.C.MsgType.PropTime,e,e==a.C.PropType.Prop_2?3:5),c.default.Instance.playSound(a.C.Sound.get_prop))}},e.prototype.useOutProp=function(e){this._dictUsingProp.hasOwnProperty(e)&&(delete this._dictUsingProp[e],s.default.Instance.send(a.C.MsgType.PropTimeOut,e))},e.prototype.addBean=function(e){if(e==a.C.PropType.Prop_6_0||e==a.C.PropType.Prop_6_1||e==a.C.PropType.Prop_6_2){if(this._listBean.length>=5){for(var t=1;t<this._listBean.length;t++)this._listBean[t-1]=this._listBean[t];this._listBean.pop(),this._listBean.push(e)}else this._listBean.push(e);this._listBean.length>=3&&this._listBean[this._listBean.length-1]==this._listBean[this._listBean.length-2]&&this._listBean[this._listBean.length-2]==this._listBean[this._listBean.length-3]&&(this._listBean.pop(),this._listBean.pop(),this._listBean.pop(),s.default.Instance.send(a.C.MsgType.RewardStage))}s.default.Instance.send(a.C.MsgType.RefreshBean)},e.prototype.getBeanList=function(){return this._listBean},e.prototype.resetBeanList=function(){this._listBean=[]},e.Instance=new t,e=t=__decorate([u],e);var t}());o.default=d,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYAudioCtl":"FYAudioCtl","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","./Prop":"Prop","./PropState":"PropState"}],PropState:[function(e,t,o){"use strict";cc._RF.push(t,"61fdcxiaq1CN4gfAYIz9Z2H","PropState"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Common/C"),i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){this.propType=n.C.PropType.None}return e=__decorate([a],e)}());o.default=r,cc._RF.pop()},{"../Common/C":"C"}],PropTimeMgr:[function(e,t,o){"use strict";cc._RF.push(t,"37f0aOnuwlO17Mai8uyPHaJ","PropTimeMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYResMgr"),i=e("./PropTime"),a=cc._decorator,r=a.ccclass,s=(a.property,function(){function e(){this.DeltaY=35,this._propTimePool=new cc.NodePool,this._nodePropTimeContainer=null}return t=e,e.prototype.init=function(e){this._nodePropTimeContainer=e},e.prototype.getPropTime=function(){return this._propTimePool.size()>0?this._propTimePool.get():cc.instantiate(n.default.Instance.loadOther("PropTime"))},e.prototype.putPropTime=function(e){e?this._propTimePool.put(e):cc.error("nodePropTime is null")},e.prototype.addPropTime=function(e,t){void 0===t&&(t=this._nodePropTimeContainer);var o=this.getPropTime();return o.parent=t,o.getComponent(i.default)},e.prototype.removePropTime=function(e){e.curIndex=-1,this.putPropTime(e.node)},e.Instance=new t,e=t=__decorate([r],e);var t}());o.default=s,cc._RF.pop()},{"../Tools/FYResMgr":"FYResMgr","./PropTime":"PropTime"}],PropTime:[function(e,t,o){"use strict";cc._RF.push(t,"a95d0dKi9xGLI3ziwiANND0","PropTime"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseNode"),i=e("../Common/C"),a=e("../Tools/FYResMgr"),r=e("./PropMgr"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprPropIcon=null,t.sprPropTimeFg=null,t.curIndex=0,t.propType=i.C.PropType.Prop_0,t}return __extends(t,e),t.prototype.playCountDown=function(e,t){this.unscheduleAllCallbacks();var o=this,n=30*t,i=30*t;this.sprPropIcon.spriteFrame=a.default.Instance.loadSpriteFrame(e),this.schedule(function(){n--,o.sprPropTimeFg.fillRange=n/i,0==n&&r.default.Instance.useOutProp(e)},1/30,30*t-1,0)},t.prototype.closeCountDown=function(){this.unscheduleAllCallbacks()},__decorate([p(cc.Sprite)],t.prototype,"sprPropIcon",void 0),__decorate([p(cc.Sprite)],t.prototype,"sprPropTimeFg",void 0),t=__decorate([c],t)}(n.default);o.default=l,cc._RF.pop()},{"../Common/C":"C","../Tools/FYBaseNode":"FYBaseNode","../Tools/FYResMgr":"FYResMgr","./PropMgr":"PropMgr"}],Prop:[function(e,t,o){"use strict";cc._RF.push(t,"ca002bOVeBIapx1zdnwuZcY","Prop"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseNode"),i=e("../Tools/FYResMgr"),a=e("../Common/C"),r=e("./PropMgr"),s=e("../Tools/FYMessenger"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprProp=null,t._propInfo=null,t._anim=null,t}return __extends(t,e),t.prototype.setInfo=function(e){this._anim=this.getComponent(cc.Animation),this._propInfo=e,this.refreshUI()},t.prototype.getInfo=function(){return this._propInfo},t.prototype.refreshUI=function(){this.sprProp.spriteFrame=i.default.Instance.loadSpriteFrame(this._propInfo.propType)},t.prototype.useProp=function(){r.default.Instance.useProp(this._propInfo.propType),s.default.Instance.send(a.C.MsgType.GetProp,this)},t.prototype.setPropActive=function(e){this.node.active!=e&&(this.node.active=e,e&&(this.node.scale=0,this._anim.play("Prop")))},__decorate([l(cc.Sprite)],t.prototype,"sprProp",void 0),t=__decorate([p],t)}(n.default);o.default=u,cc._RF.pop()},{"../Common/C":"C","../Tools/FYBaseNode":"FYBaseNode","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","./PropMgr":"PropMgr"}],RoleMgr:[function(e,t,o){"use strict";cc._RF.push(t,"dc15bTWfNFKGraXAlhlTV0n","RoleMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Role"),i=e("../Tools/FYResMgr"),a=e("../Tools/FYUtility"),r=e("../Common/UserDataMgr"),s=e("../Common/C"),c=cc._decorator,p=c.ccclass,l=(c.property,function(){function e(){this._role=null,this._nodeRoleContainer=null}return t=e,e.prototype.init=function(e){this._nodeRoleContainer=e},e.prototype.getCurRole=function(){return this._role},e.prototype.resetPos=function(){this._role.node.setPosition(new cc.Vec2(0,400))},e.prototype.addRole=function(){return this._role&&this._role.node?(this._role.node.destroy(),this._role=cc.instantiate(i.default.Instance.loadOther("Role")).getComponent(n.default)):this._role=cc.instantiate(i.default.Instance.loadOther("Role")).getComponent(n.default),this._role.node.parent=this._nodeRoleContainer,this._role.node.scale=1,this._role.node.rotation=0,this._role.node.setPosition(new cc.Vec2(0,400)),this._role.changeRoleType(r.default.Instance.CurRoleType),this._role},e.prototype.removeRole=function(){this._role&&(this._role.node.parent=this._nodeRoleContainer,this._role.node.active=!1)},e.prototype.resetRoleParent=function(){this._role&&a.default.changeParentKeepPos(this._role.node,this._nodeRoleContainer)},e.prototype.getFacePosByType=function(e){return e==s.C.RoleType.Role_0?new cc.Vec2(6,33):e==s.C.RoleType.Role_1?new cc.Vec2(16,37):e==s.C.RoleType.Role_2?new cc.Vec2(8.5,39):e==s.C.RoleType.Role_3?new cc.Vec2(8,33):void 0},e.Instance=new t,e=t=__decorate([p],e);var t}());o.default=l,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYResMgr":"FYResMgr","../Tools/FYUtility":"FYUtility","./Role":"Role"}],Role:[function(e,t,o){"use strict";cc._RF.push(t,"ca0bf8ZF/hLd4Q33iaL4y50","Role"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseNode"),i=e("../Tools/FYUtility"),a=e("../Common/C"),r=e("./RoleMgr"),s=e("./CubeMgr"),c=e("../Tools/FYMessenger"),p=e("../Tools/FYTweenMgr"),l=e("./Cube"),u=e("../Tools/FYUIMgr"),d=e("./EffectMgr"),h=e("../Common/UserDataMgr"),f=e("../Tools/FYAudioCtl"),_=e("../Tools/FYResMgr"),y=e("./OtherMgr"),C=e("./SFMgr"),v=e("./PropMgr"),g=cc._decorator,m=g.ccclass,P=g.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprRole=null,t.sprFace0=null,t.sprFace1=null,t.nodeRainBow=null,t._rigidBody=null,t._anim=null,t._curStandOnCube=null,t._physicBoxCollider=null,t._bRainBowAnim=!1,t}return __extends(t,e),t.prototype.init=function(){this._rigidBody=this.node.getComponent(cc.RigidBody),this._anim=this.node.getComponent(cc.Animation),this._physicBoxCollider=this.node.getComponent(cc.PhysicsBoxCollider),this.playRainBow()},t.prototype.addListener=function(){e.prototype.addListener.call(this),c.default.Instance.add(a.C.MsgType.TouchStart,this.onTouchStart,this),c.default.Instance.add(a.C.MsgType.ChangeRoleParent,this.onChangeRoleParent,this),this._anim.on(a.C.AnimationEventType.Finished,this.onAnimationEvent,this),this._anim.on(a.C.AnimationEventType.Pause,this.onAnimationEvent,this),this._anim.on(a.C.AnimationEventType.Resume,this.onAnimationEvent,this),this._anim.on(a.C.AnimationEventType.Stop,this.onAnimationEvent,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),c.default.Instance.remove(a.C.MsgType.TouchStart,this.onTouchStart,this),c.default.Instance.remove(a.C.MsgType.ChangeRoleParent,this.onChangeRoleParent,this),this._anim.off(a.C.AnimationEventType.Finished,this.onAnimationEvent,this),this._anim.off(a.C.AnimationEventType.Pause,this.onAnimationEvent,this),this._anim.off(a.C.AnimationEventType.Resume,this.onAnimationEvent,this),this._anim.off(a.C.AnimationEventType.Stop,this.onAnimationEvent,this)},t.prototype.changeRoleType=function(e){this.sprRole.spriteFrame=_.default.Instance.loadSpriteFrame("Role_"+e),this.sprFace0.spriteFrame=_.default.Instance.loadSpriteFrame("Role_"+e+"_face_0"),this.sprFace1.spriteFrame=_.default.Instance.loadSpriteFrame("Role_"+e+"_face_1"),this.sprFace0.node.setPosition(r.default.Instance.getFacePosByType(e)),this.sprFace1.node.setPosition(r.default.Instance.getFacePosByType(e));var t=this.sprRole.node.getContentSize();this._physicBoxCollider.size=t,this._physicBoxCollider.offset.y=t.height/2+2,this._physicBoxCollider.apply()},t.prototype.stickOnCube=function(e){if(!h.default.Instance.bGameOver)if(cc.log("出发碰撞"),"Cube"==e.name){var t=e.getComponent(l.default);if(t.getInfo().cubeType==a.C.CubeType.CanTouch){var o=this.node.getContentSize(),n=(this.node.position.y,o.height,this.node.position.x,o.width,this.node.position.x,o.width,e.getContentSize()),r=(e.position.y,n.height,e.position.x-n.width/2),c=e.position.x+n.width/2;r<this.node.position.x&&c>this.node.position.x&&e.y<=this.node.position.y?(this._curStandOnCube=e,h.default.Instance.BombSwitch=!0,this.stopRainBow(),t.getMoveState()||t.move(),t.getInfo().moveType!=a.C.MoveType.FlickeringLoopMoveLeft&&t.getInfo().moveType!=a.C.MoveType.FlickeringLoopMoveRight||t.stopFlichering(),this.checkCombo(),i.default.enablePhysicsSystem(!1),d.default.Instance.playEffect(a.C.EffectName.Fog,this.node.position,1),d.default.Instance.playEffect(a.C.EffectName.Xin,new cc.Vec2(this.node.position.x,this.node.position.y+100),1),t.useProp(),h.default.Instance.PropState[a.C.PropType.Prop_5]?this.play(a.C.RoleAnimType.BigDrop):this.play(a.C.RoleAnimType.Drop),i.default.changeParentKeepPos(this.node,e),h.default.Instance.Score++,s.default.Instance.changeTopCubeType(),f.default.Instance.playSound(a.C.Sound.drop),t.playCubeStandOn(),cc.log("站在板子上")):(this._rigidBody.fixedRotation=!1,this.shoot(this.node.position.x<=e.position.x),cc.log("弹走"))}else this._rigidBody.fixedRotation=!1,this.shoot(this.node.position.x<=e.position.x),cc.log("弹走")}else cc.log("Not Cube")},t.prototype.removeStickedCube=function(){this._curStandOnCube&&(h.default.Instance.BombSwitch=!1,p.default.stopAllActions(this._curStandOnCube),r.default.Instance.resetRoleParent(),i.default.enablePhysicsSystem(!0),this._rigidBody.linearVelocity=new cc.Vec2(0,-200),C.default.Instance.playSF(a.C.SequenceFrameName.SFCubeDestroy,this._curStandOnCube.position,this._curStandOnCube.parent),s.default.Instance.removeCube(this._curStandOnCube),this._curStandOnCube=null,c.default.Instance.send(a.C.MsgType.MoveCamera),(h.default.Instance.PropState[a.C.PropType.Prop_2]||h.default.Instance.playingGuidance)&&s.default.Instance.moveToRole(),f.default.Instance.playSound(a.C.Sound.cube_destroy),this.playRainBow())},t.prototype.shoot=function(e){h.default.Instance.bGameOver||(this.stopRainBow(),h.default.Instance.bGameOver=!0,e?(this._rigidBody.linearVelocity=new cc.Vec2(-1e3,500),this._rigidBody.angularVelocity=-1e3):(this._rigidBody.linearVelocity=new cc.Vec2(1e3,500),this._rigidBody.angularVelocity=1e3),this._rigidBody.fixedRotation=!1,this.scheduleOnce(function(){u.default.Instance.show(a.C.UIName.UIGameOverPanel)},1),f.default.Instance.playSound(a.C.Sound.die))},t.prototype.play=function(e){this._anim.play(e)},t.prototype.changeBigger=function(){this.node.scale=2},t.prototype.changeNormal=function(){this.node.scale=1},t.prototype.checkCombo=function(){Date.now()-h.default.Instance.ComboStartTime<1e3?(h.default.Instance.ComboNum++,h.default.Instance.ComboNum>=5?(y.default.Instance.playComboTween(h.default.Instance.ComboNum,this.node),h.default.Instance.ComboNum=0,y.default.Instance.playComboBuffTween(),v.default.Instance.useProp(a.C.PropType.Prop_5)):y.default.Instance.playComboTween(h.default.Instance.ComboNum,this.node)):h.default.Instance.ComboNum=0,h.default.Instance.ComboStartTime=Date.now()},t.prototype.playRainBow=function(){this.nodeRainBow.parent.active=!0,this.nodeRainBow.setPosition(0,-300);var e=cc.moveTo(.3,0,0);this.nodeRainBow.runAction(e)},t.prototype.stopRainBow=function(){var e=this,t=cc.moveTo(.2,0,-300),o=cc.callFunc(function(){e.nodeRainBow.parent.active=!1}),n=cc.sequence(t,o);this.nodeRainBow.stopAllActions(),this.nodeRainBow.runAction(n)},t.prototype.onBeginContact=function(e,t,o){this.stickOnCube(o.node)},t.prototype.onEndContact=function(e,t,o){},t.prototype.onCollisionEnter=function(e,t){},t.prototype.onTouchStart=function(e){this.removeStickedCube()},t.prototype.onChangeRoleParent=function(e,t,o){i.default.changeParentKeepPos(t,o)},t.prototype.onAnimationEvent=function(e){e.getUserData().name;e.type==a.C.AnimationEventType.Finished?this._anim.play(a.C.RoleAnimType.Idle):e.type==a.C.AnimationEventType.Pause||e.type==a.C.AnimationEventType.Resume||(e.type,a.C.AnimationEventType.Stop)},t.prototype.onLoad=function(){this.init()},t.prototype.update=function(){},__decorate([P(cc.Sprite)],t.prototype,"sprRole",void 0),__decorate([P(cc.Sprite)],t.prototype,"sprFace0",void 0),__decorate([P(cc.Sprite)],t.prototype,"sprFace1",void 0),__decorate([P(cc.Node)],t.prototype,"nodeRainBow",void 0),t=__decorate([m],t)}(n.default);o.default=T,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYAudioCtl":"FYAudioCtl","../Tools/FYBaseNode":"FYBaseNode","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYTweenMgr":"FYTweenMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility","./Cube":"Cube","./CubeMgr":"CubeMgr","./EffectMgr":"EffectMgr","./OtherMgr":"OtherMgr","./PropMgr":"PropMgr","./RoleMgr":"RoleMgr","./SFMgr":"SFMgr"}],SFMgr:[function(e,t,o){"use strict";cc._RF.push(t,"b737bxIOR5FX6fR6xJpG8G8","SFMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYResMgr"),i=e("../Tools/FYSequenceFrameControl"),a=cc._decorator,r=a.ccclass,s=(a.property,function(){function e(){this._dictSFPool={}}return t=e,e.prototype.poolPut=function(e){this._dictSFPool&&this._dictSFPool.hasOwnProperty(e.name)?this._dictSFPool[e.name].put(e):(this._dictSFPool[e.name]=new cc.NodePool,this._dictSFPool[e.name].put(e))},e.prototype.poolGet=function(e){return this._dictSFPool&&this._dictSFPool.hasOwnProperty(e)&&this._dictSFPool[e].size()>0?this._dictSFPool[e].get():cc.instantiate(n.default.Instance.loadSequenceFrame(e))},e.prototype.playSF=function(e,t,o){var n=this.poolGet(e);n.parent=o,n.setPosition(t);var a=n.getComponent(i.default),r=this;a.setCompleteCallback(function(){r.poolPut(n)}),a.play()},e.Instance=new t,e=t=__decorate([r],e);var t}());o.default=s,cc._RF.pop()},{"../Tools/FYResMgr":"FYResMgr","../Tools/FYSequenceFrameControl":"FYSequenceFrameControl"}],UIGameOverPanel:[function(e,t,o){"use strict";cc._RF.push(t,"96ec9TNQrlNPJML+PQU67iw","UIGameOverPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Common/C"),a=e("../Tools/FYUIMgr"),r=e("../Common/UserDataMgr"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labGold=null,t.btnWatchADRevive=null,t.btnPropRevive=null,t.btnSkip=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnWatchADRevive.on(cc.Node.EventType.TOUCH_END,this.onClickWatchADRevive,this),this.btnPropRevive.on(cc.Node.EventType.TOUCH_END,this.onClickPropRevive,this),this.btnSkip.on(cc.Node.EventType.TOUCH_END,this.onClickSkip,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnWatchADRevive.off(cc.Node.EventType.TOUCH_END,this.onClickWatchADRevive,this),this.btnPropRevive.off(cc.Node.EventType.TOUCH_END,this.onClickPropRevive,this),this.btnSkip.off(cc.Node.EventType.TOUCH_END,this.onClickSkip,this)},t.prototype.onShow=function(e,t){this.labGold.string=r.default.Instance.Gold.toString()},t.prototype.onClickWatchADRevive=function(){},t.prototype.onClickPropRevive=function(){},t.prototype.onClickSkip=function(){a.default.Instance.show(i.C.UIName.UIResultPanel),a.default.Instance.close(i.C.UIName.UIGameOverPanel)},__decorate([p(cc.Label)],t.prototype,"labGold",void 0),__decorate([p(cc.Node)],t.prototype,"btnWatchADRevive",void 0),__decorate([p(cc.Node)],t.prototype,"btnPropRevive",void 0),__decorate([p(cc.Node)],t.prototype,"btnSkip",void 0),t=__decorate([c],t)}(n.default);o.default=l,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYUIMgr":"FYUIMgr"}],UIGamePanel:[function(e,t,o){"use strict";cc._RF.push(t,"519f3IP+M9KMZX4EhPq4H45","UIGamePanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYResMgr"),a=e("../Common/C"),r=e("../Game/CubeMgr"),s=e("../Game/RoleMgr"),c=e("../Tools/FYMessenger"),p=e("../Game/PropMgr"),l=e("../Game/EffectMgr"),u=e("../Common/UserDataMgr"),d=e("../Game/PropTimeMgr"),h=e("../Tools/FYUtility"),f=e("../Tools/FYAudioCtl"),_=e("../Game/OtherMgr"),y=e("../Tools/FYUIMgr"),C=e("../Tools/FYGlobalVarMgr"),v=e("../Game/PropInfo"),g=cc._decorator,m=g.ccclass,P=g.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeRoleContainer=null,t.nodeCubeContainer=null,t.nodePropTimeContainer=null,t.nodeBomb=null,t.nodeCamera=null,t.labGold=null,t.labScore=null,t.listBean=[],t.nodeCloud01=null,t.nodeCloud02=null,t.nodeCloud03=null,t.nodeBg=null,t.nodeRewardBg1=null,t.nodeRewardBg2=null,t._nPropTimeIndex=0,t._dictPropCountDown={},t._nPropTimeStartY=435,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),c.default.Instance.add(a.C.MsgType.MoveCamera,this.onMoveCamera,this),c.default.Instance.add(a.C.MsgType.RestartGame,this.onRestartGame,this),c.default.Instance.add(a.C.MsgType.GoldChange,this.refreshUI,this),c.default.Instance.add(a.C.MsgType.ScoreChange,this.refreshScore,this),c.default.Instance.add(a.C.MsgType.PropTime,this.onPropTime,this),c.default.Instance.add(a.C.MsgType.PropTimeOut,this.onPropTimeOut,this),c.default.Instance.add(a.C.MsgType.RefreshBean,this.onRefreshBean,this),c.default.Instance.add(a.C.MsgType.RewardStage,this.onRewardStage,this),c.default.Instance.add(a.C.MsgType.UseBomb,this.onUseBomb,this),c.default.Instance.add(a.C.MsgType.GetProp,this.onGetProp,this),this.nodeBomb.on(cc.Node.EventType.TOUCH_START,this.onUseBomb,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),c.default.Instance.remove(a.C.MsgType.MoveCamera,this.onMoveCamera,this),c.default.Instance.remove(a.C.MsgType.RestartGame,this.onRestartGame,this),c.default.Instance.remove(a.C.MsgType.GoldChange,this.refreshUI,this),c.default.Instance.remove(a.C.MsgType.ScoreChange,this.refreshScore,this),c.default.Instance.remove(a.C.MsgType.PropTime,this.onPropTime,this),c.default.Instance.remove(a.C.MsgType.PropTimeOut,this.onPropTimeOut,this),c.default.Instance.remove(a.C.MsgType.RefreshBean,this.onRefreshBean,this),c.default.Instance.remove(a.C.MsgType.RewardStage,this.onRewardStage,this),c.default.Instance.remove(a.C.MsgType.UseBomb,this.onUseBomb,this),c.default.Instance.remove(a.C.MsgType.GetProp,this.onGetProp,this),this.nodeBomb.off(cc.Node.EventType.TOUCH_START,this.onUseBomb,this)},t.prototype.playMoveUpTween=function(){this.nodeCamera.stopAllActions();var e=cc.moveTo(.5,new cc.Vec2(0,1280-r.default.Instance.deltaY*(r.default.Instance.getCameraIndex()+1)+50));this.nodeCamera.runAction(e)},t.prototype.reset=function(){u.default.Instance.bGameOver=!1,u.default.Instance.PropState={},this.putAllPropTime(),this._nPropTimeIndex=0,u.default.Instance.GameMode=a.C.GameMode.Normal,this.nodeBomb.active=!0,r.default.Instance.removeAllCube(),this.nodeCamera.stopAllActions(),this.nodeCamera.setPosition(cc.Vec2.ZERO),s.default.Instance.addRole(),u.default.Instance.passGuidance?r.default.Instance.createFirst():(r.default.Instance.createGuidance(),this.scheduleOnce(function(){y.default.Instance.show(a.C.UIName.UIGuidancePanel)},.5)),h.default.enablePhysicsSystem(!0)},t.prototype.restartGame=function(){r.default.Instance.reset(),this.reset()},t.prototype.backToNormal=function(){this.reset()},t.prototype.enterRewardStage=function(){var e=this;u.default.Instance.TouchSwitch=!0,f.default.Instance.playSound(a.C.Sound.reward_stage),u.default.Instance.PropState={},this._nPropTimeIndex=0,this.putAllPropTime(),u.default.Instance.GameMode=a.C.GameMode.Reward,this.nodeBomb.active=!1,r.default.Instance.removeAllCube(),this.nodeCamera.setPosition(cc.Vec2.ZERO),s.default.Instance.addRole(),r.default.Instance.createFirst(),h.default.enablePhysicsSystem(!0),this.switchRewardBg(),this.scheduleOnce(function(){e.backToNormal(),e.switchNormalBg()},5)},t.prototype.refreshUI=function(){this.labGold.string=u.default.Instance.Gold.toString()},t.prototype.refreshScore=function(){this.labScore.string=u.default.Instance.Score.toString(),this.labScore.node.scale=1,this.labScore.node.stopAllActions();var e=cc.scaleTo(.2,1.5,1.5),t=cc.scaleTo(.2,1,1),o=cc.sequence(e,t);this.labScore.node.runAction(o)},t.prototype.refreshBean=function(){for(var e=0;e<this.listBean.length;e++)e<p.default.Instance.getBeanList().length?this.listBean[e].spriteFrame=i.default.Instance.loadSpriteFrame(p.default.Instance.getBeanList()[e]):this.listBean[e].spriteFrame=i.default.Instance.loadSpriteFrame("prop_6_bg")},t.prototype.getPropTime=function(e){var t=null;return this._dictPropCountDown[e]?t=this._dictPropCountDown[e]:((t=d.default.Instance.addPropTime(e)).curIndex=this._nPropTimeIndex,t.propType=e,t.node.setPosition(0,this._nPropTimeStartY-this._nPropTimeIndex*d.default.Instance.DeltaY),t.node.active=!0,this._nPropTimeIndex++),t},t.prototype.putPropTime=function(e){delete this._dictPropCountDown[e.propType],d.default.Instance.removePropTime(e),this._nPropTimeIndex--},t.prototype.putAllPropTime=function(){for(var e in this._dictPropCountDown)this._dictPropCountDown[e].closeCountDown(),d.default.Instance.removePropTime(this._dictPropCountDown[e]),delete this._dictPropCountDown[this._dictPropCountDown[e].propType],this._nPropTimeIndex--},t.prototype.switchNormalBg=function(){this.nodeCloud01.active=!0,this.nodeCloud02.active=!0,this.nodeCloud03.active=!0,this.nodeBg.opacity=0,this.nodeRewardBg1.opacity=255,this.nodeRewardBg2.opacity=255,this.nodeBg.active=!0,this.nodeRewardBg1.active=!0,this.nodeRewardBg2.active=!0,this.nodeBg.stopAllActions(),this.nodeRewardBg1.stopAllActions(),this.nodeRewardBg2.stopAllActions();var e=cc.fadeTo(.2,255);this.nodeBg.runAction(e)},t.prototype.switchRewardBg=function(){this.nodeCloud01.active=!1,this.nodeCloud02.active=!1,this.nodeCloud03.active=!1,this.nodeBg.opacity=255,this.nodeRewardBg1.opacity=255,this.nodeRewardBg2.opacity=255,this.nodeBg.active=!0,this.nodeRewardBg1.active=!0,this.nodeRewardBg2.active=!0,this.nodeBg.stopAllActions(),this.nodeRewardBg1.stopAllActions(),this.nodeRewardBg2.stopAllActions();var e=cc.fadeTo(.2,0),t=cc.fadeTo(.2,0),o=cc.fadeTo(.2,255),n=cc.sequence(t,o).repeatForever();this.nodeBg.runAction(e),this.nodeRewardBg2.runAction(n)},t.prototype.onShow=function(e,t){u.default.Instance.Score=0,this.refreshUI()},t.prototype.onMoveCamera=function(e){this.playMoveUpTween()},t.prototype.onRestartGame=function(e){u.default.Instance.Score=0,p.default.Instance.resetBeanList(),this.refreshBean(),this.restartGame()},t.prototype.onRefreshBean=function(e){this.refreshBean()},t.prototype.onPropTime=function(e,t,o){var n=this.getPropTime(t);n.playCountDown(t,o),this._dictPropCountDown[t]=n,t==a.C.PropType.Prop_3?r.default.Instance.CubeDoubleSize():t==a.C.PropType.Prop_4?r.default.Instance.CubeSpeedSlow():a.C.PropType.Prop_5},t.prototype.onPropTimeOut=function(e,t){var o=this._dictPropCountDown[t],n=o.curIndex;for(var i in this._dictPropCountDown)if(this._dictPropCountDown[i]&&this._dictPropCountDown[i].curIndex>n){this._dictPropCountDown[i].curIndex--;var c=this._dictPropCountDown[i].node.position;this._dictPropCountDown[i].node.setPosition(c.x,c.y+d.default.Instance.DeltaY)}if(delete u.default.Instance.PropState[t],this.putPropTime(o),t==a.C.PropType.Prop_3)r.default.Instance.CubeNormalSize();else if(t==a.C.PropType.Prop_4)r.default.Instance.CubeSpeedNormal();else if(t==a.C.PropType.Prop_5){s.default.Instance.getCurRole().node.y;s.default.Instance.getCurRole().play(a.C.RoleAnimType.Small)}},t.prototype.onUseBomb=function(){u.default.Instance.BombSwitch&&!u.default.Instance.PropState[a.C.PropType.Prop_2]&&u.default.Instance.Gold>=20&&(r.default.Instance.UseBomb(),f.default.Instance.playSound(a.C.Sound.bomb),u.default.Instance.Gold-=20)},t.prototype.onRewardStage=function(e){u.default.Instance.TouchSwitch=!1;var t=this;_.default.Instance.playBounsTween(),this.scheduleOnce(function(){t.enterRewardStage()},.3)},t.prototype.onGetProp=function(e,t){if(t){var o=t.getInfo().propType;if(!this.listBean[p.default.Instance.getBeanList().length-1]&&(o==a.C.PropType.Prop_6_0||o==a.C.PropType.Prop_6_1||o==a.C.PropType.Prop_6_2))return;var n=t.node.parent.convertToWorldSpaceAR(t.node.position),i=C.default.Instance.NodeCenter.convertToNodeSpaceAR(n),r=p.default.Instance.addProp(t.getInfo()).node;if(r.parent=C.default.Instance.NodeCenter,r.setPosition(i.x,191),r.anchorX=.5,r.anchorY=.5,o==a.C.PropType.Prop_0){var s=this.labGold.node.parent,c=s.position,l=s.parent.convertToWorldSpaceAR(c),u=r.parent.convertToNodeSpaceAR(l),d=cc.pDistance(r.position,u)/3e3,h=cc.moveTo(d,u.x,u.y),f=cc.scaleTo(d,.7,.7),_=cc.callFunc(function(){p.default.Instance.removeProp(r),s.scale=1,s.stopAllActions();var e=cc.scaleTo(.07,1.5,1.5),t=cc.scaleTo(.07,1,1),o=cc.sequence(e,t);s.runAction(o)}),y=cc.spawn(h,f),g=cc.sequence(y,_);r.runAction(g)}else if(o==a.C.PropType.Prop_1){var m=this.labGold.node.parent;c=m.position,l=m.parent.convertToWorldSpaceAR(c),u=r.parent.convertToNodeSpaceAR(l),d=cc.pDistance(r.position,u)/3e3,h=cc.moveTo(d,u.x,u.y),f=cc.scaleTo(d,.7,.7),_=cc.callFunc(function(){p.default.Instance.removeProp(r),m.scale=1,m.stopAllActions();var e=cc.scaleTo(.07,1.5,1.5),t=cc.scaleTo(.07,1,1),o=cc.sequence(e,t);m.runAction(o)}),y=cc.spawn(h,f),g=cc.sequence(y,_);r.runAction(g);for(var P=function(e){var t=new v.default;t.propType=a.C.PropType.Prop_0;var o=p.default.Instance.addProp(t).node;o.parent=C.default.Instance.NodeCenter,o.opacity=0,o.setPosition(60*-(e+1),450-20*(e+1));var n=cc.fadeTo(.2,255),i=cc.moveTo(.15,u.x,u.y),r=cc.scaleTo(.15,.7,.7),s=cc.spawn(i,r),c=cc.callFunc(function(){p.default.Instance.removeProp(o)}),l=cc.sequence(cc.delayTime(.03*e),n,cc.delayTime(.1),s,c);o.runAction(l)},T=0;T<5;T++)P(T)}else if(o==a.C.PropType.Prop_2||o==a.C.PropType.Prop_3||o==a.C.PropType.Prop_4||o==a.C.PropType.Prop_5){var b=this._dictPropCountDown[o].sprPropIcon.node,I=b.position,M=b.parent.convertToWorldSpaceAR(I),S=r.parent.convertToNodeSpaceAR(M);d=cc.pDistance(r.position,S)/3e3,h=cc.moveTo(d,S.x,S.y),f=cc.scaleTo(d,.35,.35),_=cc.callFunc(function(){p.default.Instance.removeProp(r),b.stopAllActions(),b.scale=.35;var e=cc.scaleTo(.07,1.5,1.5),t=cc.scaleTo(.07,.35,.35),o=cc.sequence(e,t);b.runAction(o)}),y=cc.spawn(h,f),g=cc.sequence(y,_);r.runAction(g)}else if(o==a.C.PropType.Prop_6_0||o==a.C.PropType.Prop_6_1||o==a.C.PropType.Prop_6_2){var R=this.listBean[p.default.Instance.getBeanList().length-1].node,F=R.position,U=R.parent.convertToWorldSpaceAR(F),w=r.parent.convertToNodeSpaceAR(U);d=cc.pDistance(r.position,w)/3e3,h=cc.moveTo(d,w.x,w.y),f=cc.scaleTo(d,1,1),_=cc.callFunc(function(){p.default.Instance.removeProp(r),R.stopAllActions(),R.scale=1;var e=cc.scaleTo(.07,1.5,1.5),t=cc.scaleTo(.07,1,1),o=cc.sequence(e,t);R.runAction(o)}),y=cc.spawn(h,f),g=cc.sequence(y,_);r.runAction(g)}}},t.prototype.onLoad=function(){r.default.Instance.init(this.nodeCubeContainer),s.default.Instance.init(this.nodeCubeContainer),p.default.Instance.init(this.nodeCubeContainer),l.default.Instance.init(this.nodeCubeContainer),d.default.Instance.init(this.nodePropTimeContainer)},t.prototype.start=function(){this.restartGame()},t.prototype.update=function(e){if(u.default.Instance.GameSwitch){var t=cc.winSize.width;this.nodeCloud01.x-=100*e,this.nodeCloud01.x<-t&&(this.nodeCloud01.x=t),this.nodeCloud02.x-=50*e,this.nodeCloud02.x<-t&&(this.nodeCloud02.x=t),this.nodeCloud03.x-=150*e,this.nodeCloud03.x<-t&&(this.nodeCloud03.x=t)}},__decorate([P(cc.Node)],t.prototype,"nodeRoleContainer",void 0),__decorate([P(cc.Node)],t.prototype,"nodeCubeContainer",void 0),__decorate([P(cc.Node)],t.prototype,"nodePropTimeContainer",void 0),__decorate([P(cc.Node)],t.prototype,"nodeBomb",void 0),__decorate([P(cc.Node)],t.prototype,"nodeCamera",void 0),__decorate([P(cc.Label)],t.prototype,"labGold",void 0),__decorate([P(cc.Label)],t.prototype,"labScore",void 0),__decorate([P(Array(cc.Sprite))],t.prototype,"listBean",void 0),__decorate([P(cc.Node)],t.prototype,"nodeCloud01",void 0),__decorate([P(cc.Node)],t.prototype,"nodeCloud02",void 0),__decorate([P(cc.Node)],t.prototype,"nodeCloud03",void 0),__decorate([P(cc.Node)],t.prototype,"nodeBg",void 0),__decorate([P(cc.Node)],t.prototype,"nodeRewardBg1",void 0),__decorate([P(cc.Node)],t.prototype,"nodeRewardBg2",void 0),t=__decorate([m],t)}(n.default);o.default=T,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Game/CubeMgr":"CubeMgr","../Game/EffectMgr":"EffectMgr","../Game/OtherMgr":"OtherMgr","../Game/PropInfo":"PropInfo","../Game/PropMgr":"PropMgr","../Game/PropTimeMgr":"PropTimeMgr","../Game/RoleMgr":"RoleMgr","../Tools/FYAudioCtl":"FYAudioCtl","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIGroupRankPanel:[function(e,t,o){"use strict";cc._RF.push(t,"9f78eCk5GxE4oWi4QmP97sj","UIGroupRankPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYUIMgr"),a=e("../Common/C"),r=cc._decorator,s=r.ccclass,c=r.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.btnPlay=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnPlay.on(cc.Node.EventType.TOUCH_END,this.onClickPlay,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnClose.off(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnPlay.off(cc.Node.EventType.TOUCH_END,this.onClickPlay,this)},t.prototype.onShow=function(e,t){},t.prototype.onClickClose=function(){i.default.Instance.close(a.C.UIName.UIGroupRankPanel)},t.prototype.onClickPlay=function(){},__decorate([c(cc.Node)],t.prototype,"btnClose",void 0),__decorate([c(cc.Node)],t.prototype,"btnPlay",void 0),t=__decorate([s],t)}(n.default);o.default=p,cc._RF.pop()},{"../Common/C":"C","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYUIMgr":"FYUIMgr"}],UIGuidancePanel:[function(e,t,o){"use strict";cc._RF.push(t,"0f394H4YRxINrbCknPLZ4KI","UIGuidancePanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Common/UserDataMgr"),a=e("../Common/C"),r=e("../Tools/FYMessenger"),s=e("../Tools/FYUIMgr"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeStage1=null,t.nodeStage2=null,t.nodeStage3=null,t.nodeStage4=null,t.nodeStage5=null,t._nCurStage=0,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),r.default.Instance.add(a.C.MsgType.TouchStart,this.onTouchStart,this),this.nodeStage3.on(cc.Node.EventType.TOUCH_START,this.onTouchStage3,this),this.nodeStage4.on(cc.Node.EventType.TOUCH_START,this.onTouchStage4,this),this.nodeStage5.on(cc.Node.EventType.TOUCH_START,this.onTouchStage5,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),r.default.Instance.remove(a.C.MsgType.TouchStart,this.onTouchStart,this),this.nodeStage3.off(cc.Node.EventType.TOUCH_START,this.onTouchStage3,this),this.nodeStage4.off(cc.Node.EventType.TOUCH_START,this.onTouchStage4,this),this.nodeStage5.off(cc.Node.EventType.TOUCH_START,this.onTouchStage5,this)},t.prototype.nextStage=function(){this._nCurStage++,this.nodeStage1.active=1==this._nCurStage,this.nodeStage2.active=2==this._nCurStage,this.nodeStage3.active=3==this._nCurStage,this.nodeStage4.active=4==this._nCurStage,this.nodeStage5.active=5==this._nCurStage,i.default.Instance.GameSwitch=!1,this._nCurStage>=3?i.default.Instance.TouchSwitch=!1:i.default.Instance.TouchSwitch=!0},t.prototype.onShow=function(e,t){i.default.Instance.playingGuidance=!0,this.nextStage()},t.prototype.onTouchStart=function(){this.nodeStage1.active=!1,this.nodeStage2.active=!1,this.nodeStage3.active=!1,this.nodeStage4.active=!1,this.nodeStage5.active=!1,i.default.Instance.TouchSwitch=!1,i.default.Instance.GameSwitch=!0;var e=this;1==this._nCurStage?this.scheduleOnce(function(){e.nextStage()},1):2==this._nCurStage&&this.scheduleOnce(function(){e.nextStage()},1)},t.prototype.onTouchStage3=function(){this.nodeStage1.active=!1,this.nodeStage2.active=!1,this.nodeStage3.active=!1,this.nodeStage4.active=!1,this.nodeStage5.active=!1,i.default.Instance.GameSwitch=!0;var e=this;this.scheduleOnce(function(){e.nextStage()},1),r.default.Instance.send(a.C.MsgType.UseBomb)},t.prototype.onTouchStage4=function(){this.nextStage()},t.prototype.onTouchStage5=function(){i.default.Instance.playingGuidance=!1,i.default.Instance.passGuidance=!0,i.default.Instance.TouchSwitch=!0,r.default.Instance.send(a.C.MsgType.RestartGame),s.default.Instance.close(a.C.UIName.UIGuidancePanel),i.default.Instance.GameSwitch=!0},__decorate([l(cc.Node)],t.prototype,"nodeStage1",void 0),__decorate([l(cc.Node)],t.prototype,"nodeStage2",void 0),__decorate([l(cc.Node)],t.prototype,"nodeStage3",void 0),__decorate([l(cc.Node)],t.prototype,"nodeStage4",void 0),__decorate([l(cc.Node)],t.prototype,"nodeStage5",void 0),t=__decorate([p],t)}(n.default);o.default=u,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYUIMgr":"FYUIMgr"}],UILoadingPanel:[function(e,t,o){"use strict";cc._RF.push(t,"e58e8Q36UZOhL2I0Ju+IcRh","UILoadingPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYMessenger"),a=e("../Tools/FYUIMgr"),r=e("../Tools/FYResMgr"),s=e("../Tools/FYGlobalVarMgr"),c=e("../Common/UserDataMgr"),p=cc._decorator,l=p.ccclass,u=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labProgress=null,t._nPreNum=5,t._nCurNum=0,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),i.default.Instance.add(a.default.MsgPreLoadUIComplete,this.onPreLoad,this),i.default.Instance.add(r.default.MsgPreLoadAtlasComplete,this.onPreLoad,this),i.default.Instance.add(r.default.MsgPreLoadEffectComplete,this.onPreLoad,this),i.default.Instance.add(r.default.MsgPreLoadOtherComplete,this.onPreLoad,this),i.default.Instance.add(r.default.MsgPreLoadSequenceFrameComplete,this.onPreLoad,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),i.default.Instance.remove(a.default.MsgPreLoadUIComplete,this.onPreLoad,this),i.default.Instance.remove(r.default.MsgPreLoadAtlasComplete,this.onPreLoad,this),i.default.Instance.remove(r.default.MsgPreLoadEffectComplete,this.onPreLoad,this),i.default.Instance.remove(r.default.MsgPreLoadOtherComplete,this.onPreLoad,this),i.default.Instance.remove(r.default.MsgPreLoadSequenceFrameComplete,this.onPreLoad,this)},t.prototype.refreshUI=function(){this.labProgress.string=this._nCurNum.toString()+"/"+this._nPreNum.toString()},t.prototype.SetSelfAdaption=function(){var e=s.default.Instance.DesignSize;cc.winSize.width<e.width&&(s.default.Instance.Canvas.fitWidth=!0,s.default.Instance.Canvas.fitHeight=!1,c.default.Instance.bNeedSetSelfAdaption=!0)},t.prototype.onShow=function(e,t){},t.prototype.onPreLoad=function(e){this._nCurNum++,this._nCurNum>=this._nPreNum?cc.director.preloadScene("Game",function(e){cc.director.loadScene("Game")}):this.refreshUI()},t.prototype.onPreLoadComplete=function(){},t.prototype.onLoad=function(){this.SetSelfAdaption(),a.default.Instance.preLoad(),r.default.Instance.preLoadAltlas(),r.default.Instance.preLoadEffect(),r.default.Instance.preLoadOther(),r.default.Instance.preLoadSequenceFrame()},t.prototype.start=function(){this.refreshUI()},__decorate([u(cc.Label)],t.prototype,"labProgress",void 0),t=__decorate([l],t)}(n.default);o.default=d,cc._RF.pop()},{"../Common/UserDataMgr":"UserDataMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYUIMgr":"FYUIMgr"}],UIMainPanel:[function(e,t,o){"use strict";cc._RF.push(t,"6ac78yl8vBGh5Nu2wywOXFu","UIMainPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYMessenger"),a=e("../Tools/FYUIMgr"),r=e("../Common/C"),s=e("../Tools/FYGlobalVarMgr"),c=e("../Common/UserDataMgr"),p=e("../Tools/FYResMgr"),l=e("../Tools/FYAudioCtl"),u=e("../Game/RoleMgr"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labGold=null,t.btnStart=null,t.btnShop=null,t.btnRank=null,t.btnShare=null,t.sprRole=null,t.sprFace=null,t.nodeCloud01=null,t.nodeCloud02=null,t.nodeCloud03=null,t._nBtnStartSpeed=50,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnStart.on(cc.Node.EventType.TOUCH_END,this.onClickStart,this),this.btnShop.on(cc.Node.EventType.TOUCH_END,this.onClickShop,this),this.btnRank.on(cc.Node.EventType.TOUCH_END,this.onClickRank,this),this.btnShare.on(cc.Node.EventType.TOUCH_END,this.onClickShare,this),i.default.Instance.add(r.C.MsgType.ChangeRole,this.onChangeRole,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnStart.off(cc.Node.EventType.TOUCH_END,this.onClickStart,this),this.btnShop.off(cc.Node.EventType.TOUCH_END,this.onClickShop,this),this.btnRank.off(cc.Node.EventType.TOUCH_END,this.onClickRank,this),this.btnShare.off(cc.Node.EventType.TOUCH_END,this.onClickShare,this),i.default.Instance.remove(r.C.MsgType.ChangeRole,this.onChangeRole,this)},t.prototype.refreshUI=function(){this.labGold.string=c.default.Instance.Gold.toString(),this.sprRole.spriteFrame=p.default.Instance.loadSpriteFrame("Role_"+c.default.Instance.CurRoleType),this.sprFace.spriteFrame=p.default.Instance.loadSpriteFrame("Role_"+c.default.Instance.CurRoleType+"_face_0"),this.sprFace.node.setPosition(u.default.Instance.getFacePosByType(c.default.Instance.CurRoleType))},t.prototype.onShow=function(e,t){this.refreshUI(),l.default.Instance.playMusic(r.C.Music.bg)},t.prototype.onClickStart=function(){a.default.Instance.show(r.C.UIName.UIGamePanel,s.default.Instance.NodeBottom),a.default.Instance.close(r.C.UIName.UIMainPanel)},t.prototype.onClickShop=function(){a.default.Instance.show(r.C.UIName.UIShopPanel)},t.prototype.onClickRank=function(){a.default.Instance.show(r.C.UIName.UIRankPanel)},t.prototype.onClickShare=function(){},t.prototype.onChangeRole=function(e){this.refreshUI()},t.prototype.update=function(e){var t=cc.winSize.width;this.nodeCloud01.x-=100*e,this.nodeCloud01.x<-t&&(this.nodeCloud01.x=t),this.nodeCloud02.x-=50*e,this.nodeCloud02.x<-t&&(this.nodeCloud02.x=t),this.nodeCloud03.x-=150*e,this.nodeCloud03.x<-t&&(this.nodeCloud03.x=t),this.btnStart.x-=e*this._nBtnStartSpeed,this.btnStart.x<-50?this._nBtnStartSpeed=-this._nBtnStartSpeed:this.btnStart.x>50&&(this._nBtnStartSpeed=-this._nBtnStartSpeed)},__decorate([f(cc.Label)],t.prototype,"labGold",void 0),__decorate([f(cc.Node)],t.prototype,"btnStart",void 0),__decorate([f(cc.Node)],t.prototype,"btnShop",void 0),__decorate([f(cc.Node)],t.prototype,"btnRank",void 0),__decorate([f(cc.Node)],t.prototype,"btnShare",void 0),__decorate([f(cc.Sprite)],t.prototype,"sprRole",void 0),__decorate([f(cc.Sprite)],t.prototype,"sprFace",void 0),__decorate([f(cc.Node)],t.prototype,"nodeCloud01",void 0),__decorate([f(cc.Node)],t.prototype,"nodeCloud02",void 0),__decorate([f(cc.Node)],t.prototype,"nodeCloud03",void 0),t=__decorate([h],t)}(n.default);o.default=_,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Game/RoleMgr":"RoleMgr","../Tools/FYAudioCtl":"FYAudioCtl","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYUIMgr":"FYUIMgr"}],UIPropRevivePanel:[function(e,t,o){"use strict";cc._RF.push(t,"4685aq7PblO05lfmMD8yyLX","UIPropRevivePanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Common/C"),a=e("../Tools/FYUIMgr"),r=e("../Common/UserDataMgr"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.btnRevive=null,t.btnInvite=null,t.labRevivePropNum=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnRevive.on(cc.Node.EventType.TOUCH_END,this.onClickRevive,this),this.btnInvite.on(cc.Node.EventType.TOUCH_END,this.onClickInvite,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnClose.off(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnRevive.off(cc.Node.EventType.TOUCH_END,this.onClickRevive,this),this.btnInvite.off(cc.Node.EventType.TOUCH_END,this.onClickInvite,this)},t.prototype.refreshUI=function(){this.labRevivePropNum.string=r.default.Instance.RevivePropNum+"/"+r.default.Instance.MaxRevivePropNum},t.prototype.onShow=function(e,t){this.refreshUI()},t.prototype.onClickClose=function(){a.default.Instance.close(i.C.UIName.UIPropRevivePanel)},t.prototype.onClickRevive=function(){},t.prototype.onClickInvite=function(){},__decorate([p(cc.Node)],t.prototype,"btnClose",void 0),__decorate([p(cc.Node)],t.prototype,"btnRevive",void 0),__decorate([p(cc.Node)],t.prototype,"btnInvite",void 0),__decorate([p(cc.Label)],t.prototype,"labRevivePropNum",void 0),t=__decorate([c],t)}(n.default);o.default=l,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYUIMgr":"FYUIMgr"}],UIRankPanel:[function(e,t,o){"use strict";cc._RF.push(t,"61759RF9S5Ob60o5iZTSo/I","UIRankPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Common/C"),a=e("../Tools/FYUIMgr"),r=cc._decorator,s=r.ccclass,c=r.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.btnGroupRank=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnGroupRank.on(cc.Node.EventType.TOUCH_END,this.onClickGroupRank,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnClose.off(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnGroupRank.off(cc.Node.EventType.TOUCH_END,this.onClickGroupRank,this)},t.prototype.onShow=function(e,t){},t.prototype.onClickClose=function(){a.default.Instance.close(i.C.UIName.UIRankPanel)},t.prototype.onClickGroupRank=function(){},__decorate([c(cc.Node)],t.prototype,"btnClose",void 0),__decorate([c(cc.Node)],t.prototype,"btnGroupRank",void 0),t=__decorate([s],t)}(n.default);o.default=p,cc._RF.pop()},{"../Common/C":"C","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYUIMgr":"FYUIMgr"}],UIResultPanel:[function(e,t,o){"use strict";cc._RF.push(t,"88ced6FbcdL9630vaEtXPPu","UIResultPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYMessenger"),a=e("../Common/C"),r=e("../Tools/FYUIMgr"),s=e("../Common/UserDataMgr"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labGold=null,t.labScore=null,t.nodeWeekMaxScore=null,t.btnShare=null,t.btnRestart=null,t.btnBack=null,t.btnShowAllRank=null,t.nodeLight=null,t.nodeRank=null,t.nodeWeekRank=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnShare.on(cc.Node.EventType.TOUCH_END,this.onClickBtnShare,this),this.btnRestart.on(cc.Node.EventType.TOUCH_END,this.onClickRestart,this),this.btnBack.on(cc.Node.EventType.TOUCH_END,this.onClickBack,this),this.btnShowAllRank.on(cc.Node.EventType.TOUCH_END,this.onClickShowAllRank,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnShare.off(cc.Node.EventType.TOUCH_END,this.onClickBtnShare,this),this.btnRestart.off(cc.Node.EventType.TOUCH_END,this.onClickRestart,this),this.btnBack.off(cc.Node.EventType.TOUCH_END,this.onClickBack,this),this.btnShowAllRank.off(cc.Node.EventType.TOUCH_END,this.onClickShowAllRank,this)},t.prototype.playLightTween=function(){var e=cc.rotateBy(5,360).repeatForever();this.nodeLight.runAction(e)},t.prototype.showHighRank=function(e){this.nodeLight.active=e,this.nodeRank.active=e,this.nodeWeekRank.active=e},t.prototype.onShow=function(e,t){this.labGold.string=s.default.Instance.Gold.toString(),this.labScore.string=s.default.Instance.Score.toString(),s.default.Instance.Score>s.default.Instance.MaxScore?(s.default.Instance.MaxScore=s.default.Instance.Score,this.showHighRank(!0),this.playLightTween()):this.showHighRank(!1)},t.prototype.onClickBtnShare=function(){},t.prototype.onClickRestart=function(){i.default.Instance.send(a.C.MsgType.RestartGame),r.default.Instance.close(a.C.UIName.UIResultPanel)},t.prototype.onClickBack=function(){r.default.Instance.show(a.C.UIName.UIMainPanel),r.default.Instance.close(a.C.UIName.UIGamePanel),r.default.Instance.close(a.C.UIName.UIResultPanel)},t.prototype.onClickShowAllRank=function(){r.default.Instance.show(a.C.UIName.UIRankPanel)},__decorate([l(cc.Label)],t.prototype,"labGold",void 0),__decorate([l(cc.Label)],t.prototype,"labScore",void 0),__decorate([l(cc.Node)],t.prototype,"nodeWeekMaxScore",void 0),__decorate([l(cc.Node)],t.prototype,"btnShare",void 0),__decorate([l(cc.Node)],t.prototype,"btnRestart",void 0),__decorate([l(cc.Node)],t.prototype,"btnBack",void 0),__decorate([l(cc.Node)],t.prototype,"btnShowAllRank",void 0),__decorate([l(cc.Node)],t.prototype,"nodeLight",void 0),__decorate([l(cc.Node)],t.prototype,"nodeRank",void 0),__decorate([l(cc.Node)],t.prototype,"nodeWeekRank",void 0),t=__decorate([p],t)}(n.default);o.default=u,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYUIMgr":"FYUIMgr"}],UIShopPanel:[function(e,t,o){"use strict";cc._RF.push(t,"12551Ph0QtClJfQF2nQboHv","UIShopPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYUIMgr"),a=e("../Common/C"),r=e("../Common/UserDataMgr"),s=e("../Tools/FYResMgr"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.btnSelect=null,t.btnSelected=null,t.btnWatchAd=null,t.pageView=null,t.listCube=[],t.sprName=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnSelect.on(cc.Node.EventType.TOUCH_END,this.onClickSelect,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnClose.off(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnSelect.off(cc.Node.EventType.TOUCH_END,this.onClickSelect,this)},t.prototype.refreshUI=function(){for(var e=0;e<this.listCube.length;e++)r.default.Instance.CurRoleType==e?this.listCube[e].spriteFrame=s.default.Instance.loadSpriteFrame("cube_can_touch"):this.listCube[e].spriteFrame=s.default.Instance.loadSpriteFrame("cube_can_not_touch");this.btnSelected.active=this.pageView.getCurrentPageIndex()==r.default.Instance.CurRoleType,this.btnSelect.active=this.pageView.getCurrentPageIndex()!=r.default.Instance.CurRoleType},t.prototype.onShow=function(e,t){this.pageView.scrollToPage(r.default.Instance.CurRoleType,.1),this.refreshUI()},t.prototype.onClickClose=function(){i.default.Instance.close(a.C.UIName.UIShopPanel)},t.prototype.onClickSelect=function(){r.default.Instance.CurRoleType=this.pageView.getCurrentPageIndex(),this.refreshUI()},t.prototype.onPageView=function(){this.sprName.spriteFrame=s.default.Instance.loadSpriteFrame("Role_"+this.pageView.getCurrentPageIndex()+"_name"),this.btnSelected.active=this.pageView.getCurrentPageIndex()==r.default.Instance.CurRoleType,this.btnSelect.active=this.pageView.getCurrentPageIndex()!=r.default.Instance.CurRoleType},__decorate([l(cc.Node)],t.prototype,"btnClose",void 0),__decorate([l(cc.Node)],t.prototype,"btnSelect",void 0),__decorate([l(cc.Node)],t.prototype,"btnSelected",void 0),__decorate([l(cc.Node)],t.prototype,"btnWatchAd",void 0),__decorate([l(cc.PageView)],t.prototype,"pageView",void 0),__decorate([l(Array(cc.Sprite))],t.prototype,"listCube",void 0),__decorate([l(cc.Sprite)],t.prototype,"sprName",void 0),t=__decorate([p],t)}(n.default);o.default=u,cc._RF.pop()},{"../Common/C":"C","../Common/UserDataMgr":"UserDataMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYResMgr":"FYResMgr","../Tools/FYUIMgr":"FYUIMgr"}],UserDataMgr:[function(e,t,o){"use strict";cc._RF.push(t,"c95ec/9nQVFW4WwmvRM5qyR","UserDataMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tools/FYSDKMgr"),i=e("./C"),a=e("../Tools/FYMessenger"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){this.bNeedSetSelfAdaption=!1,this._nGold=-1,this._nScore=0,this._nMaxScore=-1,this._nRevivePropNum=-1,this._dictPropState={},this._dictPropTime={prop_2:5,prop_3:5,prop_4:5,prop_5:5},this._GameMode=i.C.GameMode.Normal,this.MaxRevivePropNum=5,this._CurRoleType=i.C.RoleType.Role_None,this.bGameOver=!1,this.ComboStartTime=0,this.ComboNum=0,this.TouchSwitch=!0,this.BombSwitch=!0,this._GameSwitch=!0,this._Guidance=-1,this.playingGuidance=!1}return t=e,Object.defineProperty(e.prototype,"Gold",{get:function(){return this._nGold<=0&&(this._nGold=parseInt(n.default.Instance.loadLocalData(i.C.SaveKey.Gold,"0"))),this._nGold},set:function(e){this._nGold!=e&&(this._nGold=e,n.default.Instance.saveLocalData(i.C.SaveKey.Gold,e.toString()),a.default.Instance.send(i.C.MsgType.GoldChange))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Score",{get:function(){return this._nScore},set:function(e){this._nScore!=e&&(this._nScore=e,a.default.Instance.send(i.C.MsgType.ScoreChange))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxScore",{get:function(){return this._nMaxScore<=0&&(this._nMaxScore=parseInt(n.default.Instance.loadLocalData(i.C.SaveKey.MaxScore,"0"))),this._nMaxScore},set:function(e){this._nMaxScore!=e&&(this._nMaxScore=e,n.default.Instance.saveLocalData(i.C.SaveKey.MaxScore,e.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RevivePropNum",{get:function(){return this._nRevivePropNum<=0&&(this._nRevivePropNum=parseInt(n.default.Instance.loadLocalData(i.C.SaveKey.RevivePropNum,"0"))),this._nRevivePropNum},set:function(e){this._nRevivePropNum!=e&&(this._nRevivePropNum=e,n.default.Instance.saveLocalData(i.C.SaveKey.RevivePropNum,e.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PropState",{get:function(){return this._dictPropState},set:function(e){this._dictPropState=e},enumerable:!0,configurable:!0}),e.prototype.GetPropTime=function(e){return this._dictPropTime[e]},Object.defineProperty(e.prototype,"GameMode",{get:function(){return this._GameMode},set:function(e){this._GameMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurRoleType",{get:function(){return this._CurRoleType==i.C.RoleType.Role_None&&(this._CurRoleType=parseInt(n.default.Instance.loadLocalData(i.C.SaveKey.CurRoleType,i.C.RoleType.Role_0.toString()))),this._CurRoleType},set:function(e){this._CurRoleType!=e&&(this._CurRoleType=e,n.default.Instance.saveLocalData(i.C.SaveKey.CurRoleType,e.toString()),a.default.Instance.send(i.C.MsgType.ChangeRole))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GameSwitch",{get:function(){return this._GameSwitch},set:function(e){e!=this._GameSwitch&&(this._GameSwitch=e,a.default.Instance.send(i.C.MsgType.ChangeGameSwitch))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"passGuidance",{get:function(){return this._Guidance<0&&(this._Guidance=parseInt(n.default.Instance.loadLocalData(i.C.SaveKey.PassGuidance,"0"))),1==this._Guidance},set:function(e){var t=e?1:0;t!=this._Guidance&&(this._Guidance=t,n.default.Instance.saveLocalData(i.C.SaveKey.PassGuidance,t.toString()))},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=__decorate([s],e);var t}());o.default=c,cc._RF.pop()},{"../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","./C":"C"}]},{},["C","UserDataMgr","Demo","Cube","CubeInfo","CubeMgr","EffectMgr","Game","OtherMgr","Prop","PropInfo","PropMgr","PropState","PropTime","PropTimeMgr","Role","RoleMgr","SFMgr","FYAudioCtl","FYBaseNode","FYBaseUIPanel","FYEffectControl","FYEffectItem","FYGlobalVarMgr","FYMessenger","FYResMgr","FYSDKMgr","FYScheduleCtl","FYSequenceFrameControl","FYTweenMgr","FYUIMgr","FYUtility","UIGameOverPanel","UIGamePanel","UIGroupRankPanel","UIGuidancePanel","UILoadingPanel","UIMainPanel","UIPropRevivePanel","UIRankPanel","UIResultPanel","UIShopPanel"]);