require=function i(r,s,l){function c(t,e){if(!s[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var a=s[t]={exports:{}};r[t][0].call(a.exports,function(e){return c(r[t][1][e]||e)},a,a.exports,i,r,s,l)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({ButtonMgr:[function(e,t,n){"use strict";cc._RF.push(t,"5e3c6Tf6vBGsLzDCnXce6Ql","ButtonMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listButtonNode=[],e}return __extends(e,t),e.prototype.onDisable=function(){for(var e=0;e<this.listButtonNode.length;e++){this.listButtonNode[e].scale=1}},__decorate([i({type:Array(cc.Node),displayName:"所有脚本下的按钮"})],e.prototype,"listButtonNode",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],ClickMask:[function(e,t,n){"use strict";cc._RF.push(t,"f6635CCbQhD7IG/pOXxxEyM","ClickMask"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},t.prototype.onClickMask=function(){},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],CubeContainer:[function(e,t,n){"use strict";cc._RF.push(t,"ec6bf21fcxGwbKBiYePO6KB","CubeContainer"),Object.defineProperty(n,"__esModule",{value:!0});var C=e("./GridItem"),T=e("./Tools/FYMessenger"),v=e("./FYUserDataMgr"),b=e("./C"),I=e("./FYUserDataMgr"),o=cc._decorator,a=o.ccclass,i=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dictGrid={0:null},e._nRow=0,e._nColumn=0,e._bModeAdvance=!1,e}return __extends(e,t),e.prototype.createGrid=function(e,t,n,o,a,i){void 0===o&&(o=[]),void 0===a&&(a=b.C.GridState.CanPut),void 0===i&&(i=!1),this._nRow=e,this._nColumn=t,this._bModeAdvance=i;for(var r=this.node.width+130,s=this.node.height+140,l=r/(t+1),c=s/(e+1),d=0;d<this._nRow;d++)for(var u=0;u<this._nColumn;u++){var p=null;(p=0<I.default.Instance.gridPool.size()?I.default.Instance.gridPool.get():cc.instantiate(n)).setPosition((u+1)*l-r/2,(d+1)*c-s/2),p.parent=this.node,p.active=!0;var h=p.getComponent(C.default);if(i){var f=h.mSpriteBg.node.getContentSize().width;h.mSpriteBg.node.setContentSize(.8*f,.8*f)}for(var y=u+d*this._nRow,m=!0,g=0;g<o.length;g++)if(o[g]==y){m=!1;break}h.showPoint(m),h.setState(a),a!=b.C.GridState.GetPanel&&h.setState(m?b.C.GridState.CanPut:b.C.GridState.NotCanPut),a==b.C.GridState.ViewPanel&&h.setState(b.C.GridState.ViewPanel),(this._dictGrid[u+d*this._nRow]=h).setWorldPos(p.convertToWorldSpace(p.getPosition())),h.setPostion(p.getPosition()),h.setWidth(l),h.setHeight(c),h.setIndex(y)}a==b.C.GridState.CanPut&&(v.default.Instance.setPutContainCenter(this.getBorderCenter()),v.default.Instance.setPutContainSize(this.getBorderSize()))},e.prototype.getTotalGrid=function(){return this._dictGrid},e.prototype.convertPosToIndex=function(e){var t=this.node.width+130,n=this.node.height+140,o=this.node.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),a=t/(this._nColumn+1),i=n/(this._nRow+1);return Math.floor(Math.abs((o.x+t/2-a/2)/a))+Math.floor(Math.abs((o.y+n/2-i/2)/i))*this._nColumn},e.prototype.isInContainer=function(e){var t=v.default.Instance.getPutContainSize(),n=v.default.Instance.getPutContainCenter(),o=e.node.convertToWorldSpaceAR(new cc.Vec2(0,0));return o.x>=n.x-.5*t.x&&o.x<=n.x+.5*t.x&&o.y>=n.y-.5*t.y&&o.y<=n.y+.5*t.y},e.prototype.putCube=function(e){var t=!1;if(e instanceof C.default)if(this.isInContainer(e)){var n=this.convertPosToIndex(e);if(n<=this._nRow*this._nColumn-1){e.getIndex();var o=!1;if(this._dictGrid[n].node.active&&(o=this._dictGrid[n].putGrid(n,e)),e.setIndex(n),e.resetPos(),o){if(e.removeAllCube(),1!=this.checkOneGridSame())this.checkThreeGridSameExt(n);t=!0}}else e.resetPos()}else e.resetPos();else cc.error("cubeItem is not CubeItem type");return t},e.prototype.putCubeWithNoClean=function(e){var t=!1;if(e instanceof C.default){var n=this.isInContainer(e);if(n){var o=this.convertPosToIndex(e);if(cc.log("@@@@@@@@@@@@@@index：",o,n),o<=this._nRow*this._nColumn-1){e.getIndex();var a=this._dictGrid[o].putGrid(o,e);e.resetPos(),a&&(e.removeAllCube(),t=!0)}else e.resetPos()}else e.resetPos()}else cc.error("cubeItem is not CubeItem type");return t},e.prototype.putCubeByIndex=function(e,t){return e<=this._nRow*this._nColumn-1&&this._dictGrid[e].putCube(e,t)},e.prototype.checkRemainCube=function(){for(var e=this._nRow*this._nColumn,t=0;t<e;t++)for(var n=0;n<b.C.CubeItemSize.Length;n++)if(null!=this._dictGrid[t].getCubeItem(n))return cc.log("==========================="+t+" "+n),!0;return!1},e.prototype.getCubeByIndex=function(e,t){return null!=this._dictGrid[e]?this._dictGrid[e].getCubeItem(t):null},e.prototype.removeCube=function(e,t){this._dictGrid[e].removeCube(t)},e.prototype.destroyCube=function(e,t){return null!=this._dictGrid[e]&&(this._dictGrid[e].destroyCube(t),!0)},e.prototype.getCubeNum=function(){for(var e=this._nRow*this._nColumn,t=0,n=0;n<e;n++)t+=this._dictGrid[n].getCubeNum();return t},e.prototype.getGridTotalLength=function(){return this._nRow*this._nColumn},e.prototype.getGridHaveCubeSize=function(){for(var e=this._nRow*this._nColumn,t=[],n=0;n<e;n++){for(var o="",a=0;a<b.C.CubeItemSize.Length;a++)null==this._dictGrid[n].getCubeItem(a)?o+="0":o+="1";t.push(o)}return t},e.prototype.getGridByIndex=function(e){if(null!=this._dictGrid[e])return this._dictGrid[e];cc.error("-------------\x3e>>>>>>>>>index is wrong!!!")},e.prototype.getGridCanPutCubeSize=function(){for(var e=this._nRow*this._nColumn,t=[],n=0;n<e;n++){for(var o="",a=0;a<b.C.CubeItemSize.Length;a++)null==this._dictGrid[n].getCubeItem(a)?this._dictGrid[n].getState()==b.C.GridState.NotCanPut?o+="0":o+="1":o+="0";t.push(o)}return t},e.prototype.getGridCanPutCubeSizeGroup=function(e){for(var t=this._nRow*this._nColumn,n=[],o={},a=0;a<t;a++){for(var i=0,r=0;r<e;r++)null==this._dictGrid[a].getCubeItem(r)&&this._dictGrid[a].getState()==b.C.GridState.CanPut&&(r==b.C.CubeItemSize.Small?i+=1:r==b.C.CubeItemSize.Normal?i+=3:i+=5);0!=i&&null==o[i.toString()]&&(o[i.toString()]=!0)}for(var s in o)n.push(s);return n},e.prototype.checkOneGridSame=function(){for(var e=this._nRow*this._nColumn,t=0;t<e;t++){var n=this._dictGrid[t].checkSame();if(3==n.length){for(var o=n[0].getCubeItemType(),a=0;a<n.length;a++)this.destroyCube(t,n[a].getCubeItemSize());var i=this._dictGrid[t].node.convertToWorldSpaceAR(new cc.Vec2(0,0));return T.default.Instance.send(b.C.MsgType.ShowGetPointEffect,i,!0),T.default.Instance.send(b.C.MsgType.GetPoint,n.length,1),T.default.Instance.send(b.C.MsgType.CubeEliminateOne,t,o),T.default.Instance.send(b.C.MsgType.CubeDownCanGetPoint,!0,1),!0}}return!1},e.prototype.checkThreeGridSameExt=function(e){var t=this._bModeAdvance?3:2,n=[],o=Math.floor(e/this._nColumn)+1,a=e%this._nColumn+1;cc.log(this._nColumn,this._nRow,o,a);for(var i=[],r=0;r<b.C.CubeItemSize.Length;r++){for(var s=this._dictGrid[e].getCubeItem(r),l=!1,c=0;c<i.length;c++)null!=s&&s.getCubeItemType()==i[c]&&(l=!0);null!=s&&0==l&&i.push(s.getCubeItemType())}var d=0;for(c=0;c<i.length;c++){for(var u=i[c],p=[],h=e;h-1>=o*this._nColumn-this._nColumn&&null!=this._dictGrid[h-1]&&0<this._dictGrid[h-1].getCubeItemByType(u).length;)p.push(h-1),h-=1;for(h=e;h+1<=o*this._nColumn-1&&null!=this._dictGrid[h+1]&&0<this._dictGrid[h+1].getCubeItemByType(u).length;)p.push(h+1),h+=1;if(p.length>=t){p.push(e),d++;for(r=0;r<p.length;r++)for(var f=this._dictGrid[p[r]].getCubeItemByType(u),y=0;y<f.length;y++)n.push(f[y]);T.default.Instance.send(b.C.MsgType.ShowEffectLine,p,[u])}for(h=e,p=[];0<=h-this._nColumn&&null!=this._dictGrid[h-this._nColumn]&&0<this._dictGrid[h-this._nColumn].getCubeItemByType(u).length;)p.push(h-this._nColumn),h-=this._nColumn;for(h=e;h+this._nColumn<=this._nColumn*this._nRow&&null!=this._dictGrid[h+this._nColumn]&&0<this._dictGrid[h+this._nColumn].getCubeItemByType(u).length;)p.push(h+this._nColumn),h+=this._nColumn;if(p.length>=t){p.push(e),d++;for(r=0;r<p.length;r++){f=this._dictGrid[p[r]].getCubeItemByType(u);for(var m=0;m<f.length;m++)n.push(f[m])}T.default.Instance.send(b.C.MsgType.ShowEffectLine,p,[u])}p=[],h=e;for(var g=1;g<=a-1;g++){var C=h-this._nColumn-1;if(null==this._dictGrid[C])break;if(!(0<=C&&0<this._dictGrid[C].getCubeItemByType(u).length))break;p.push(C),h=C}h=e;for(var v=1;v<=this._nColumn-a;v++){C=h+this._nColumn+1;if(null==this._dictGrid[C])break;if(!(C<=this._nColumn*this._nRow&&0<this._dictGrid[C].getCubeItemByType(u).length))break;p.push(C),h=C}if(p.length>=t){p.push(e),d++;for(r=0;r<p.length;r++){f=this._dictGrid[p[r]].getCubeItemByType(u);for(var I=0;I<f.length;I++)n.push(f[I])}T.default.Instance.send(b.C.MsgType.ShowEffectLine,p,[u])}p=[],h=e;for(g=1;g<=a-1;g++){C=h+this._nColumn-1;if(null==this._dictGrid[C])break;if(!(C<this._nColumn*this._nRow&&0<this._dictGrid[C].getCubeItemByType(u).length))break;p.push(C),h=C}h=e;for(v=1;v<=this._nColumn-a;v++){C=h-this._nColumn+1;if(null==this._dictGrid[C])break;if(!(0<C&&0<this._dictGrid[C].getCubeItemByType(u).length))break;p.push(C),h=C}if(p.length>=t){p.push(e),d++;for(r=0;r<p.length;r++){f=this._dictGrid[p[r]].getCubeItemByType(u);for(var _=0;_<f.length;_++)n.push(f[_])}T.default.Instance.send(b.C.MsgType.ShowEffectLine,p,[u])}}for(r=0;r<n.length;r++){var S=n[r].node.convertToWorldSpaceAR(new cc.Vec2(0,0));this.destroyCube(n[r].getIndex(),n[r].getCubeItemSize()),T.default.Instance.send(b.C.MsgType.ShowGetPointEffect,S,r==n.length-1),T.default.Instance.send(b.C.MsgType.CubeEliminateThree)}return 0<n.length&&T.default.Instance.send(b.C.MsgType.GetPoint,n.length,d),this.isFull()&&0==n.length&&T.default.Instance.send(b.C.MsgType.ShowGameOver),T.default.Instance.send(b.C.MsgType.CubeDownCanGetPoint,0<n.length,d),0<n.length},e.prototype.isFull=function(){for(var e=this._nRow*this._nColumn,t=!0,n=0;n<e;n++)t=t&&this._dictGrid[n].isFull();return t},e.prototype.clear=function(){for(var e=this._nRow*this._nColumn,t=0;t<e;t++)for(var n=0;n<b.C.CubeItemSize.Length;n++)this.destroyCube(t,n)},e.prototype.clearGrid=function(){this._bModeAdvance=!1;for(var e=0;e<this._nRow;e++)for(var t=0;t<this._nColumn;t++){var n=this._dictGrid[t+e*this._nRow];I.default.Instance.gridPool.put(n.node)}},e.prototype.getBorderCenter=function(){return this.node.convertToWorldSpaceAR(new cc.Vec2(0,0))},e.prototype.getBorderSize=function(){var e=this._dictGrid[0].node.getPosition(),t=this._dictGrid[this._nColumn*this._nRow-1].node.getPosition();return new cc.Vec2(t.x-e.x+this._dictGrid[0].getWidth(),t.y-e.y+this._dictGrid[0].getHeight())},e=__decorate([a],e)}(cc.Component));n.default=i,cc._RF.pop()},{"./C":"C","./FYUserDataMgr":"FYUserDataMgr","./GridItem":"GridItem","./Tools/FYMessenger":"FYMessenger"}],CubeItem:[function(e,t,n){"use strict";cc._RF.push(t,"d6e0biIyGdG7I0gMJ6UD2Th","CubeItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./C"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas=null,e.mCubeItemType=o.C.CubeItemType.A,e.mCubeItemSize=o.C.CubeItemSize.Small,e._bEnableMove=!0,e._v2Pos=new cc.Vec2(0,0),e._nIndex=-1,e}return __extends(e,t),e.prototype.init=function(e,t,n){this.node.stopAllActions(),this.mCubeItemType=e,this.mCubeItemSize=t,this.setPos(n),this.refreshUI(),this.node.active=!0},e.prototype.getCubeItemType=function(){return this.mCubeItemType},e.prototype.getCubeItemSize=function(){return this.mCubeItemSize},e.prototype.enableMove=function(e){this._bEnableMove=e},e.prototype.setPos=function(e){this._v2Pos=e,this.node.setPosition(e)},e.prototype.resetPos=function(){this.node.setPosition(this._v2Pos)},e.prototype.setIndex=function(e){this._nIndex=e},e.prototype.getIndex=function(){return this._nIndex},e.prototype.refreshUI=function(){var e=this.node.getComponent(cc.Sprite),t="cube_"+this.mCubeItemType+"_"+this.mCubeItemSize,n=this.atlas.getSpriteFrame(t);e.spriteFrame=n},e.prototype.getColorByType=function(){return this.mCubeItemType==o.C.CubeItemType.A?new cc.Color(26,180,244,255):this.mCubeItemType==o.C.CubeItemType.B?new cc.Color(127,226,39,255):this.mCubeItemType==o.C.CubeItemType.C?new cc.Color(243,229,62,255):this.mCubeItemType==o.C.CubeItemType.D?new cc.Color(245,58,49,255):this.mCubeItemType==o.C.CubeItemType.E?new cc.Color(184,42,238,255):new cc.Color(255,255,255,255)},e.prototype.playUsePropAnimShow=function(){var e=cc.scaleTo(.1,1.2,.72),t=cc.scaleTo(.05,1.05,1.2),n=cc.scaleTo(.05,.9,1.05),o=cc.scaleTo(.05,.95,.9),a=cc.scaleTo(.05,1,.95),i=cc.scaleTo(.05,1,1),r=cc.sequence(e,t,n,o,a,i);this.node.stopAllActions(),this.node.runAction(r)},e.prototype.playUsePropAnimHide=function(){var e=cc.scaleTo(.05,.9,.93),t=cc.scaleTo(.02,1.1,.9),n=cc.scaleTo(.05,1.5,1.3),o=cc.scaleTo(.02,1.525,1.5),a=cc.scaleTo(.1,1.6,1.575),i=cc.scaleTo(.02,1.2,1.6),r=(cc.scaleTo(.1,0,0),cc.sequence(e,t,n,o,a,i));this.node.stopAllActions(),this.node.runAction(r)},e.prototype.addListener=function(){},e.prototype.removeListener=function(){},e.prototype.start=function(){this.addListener()},e.prototype.onEnable=function(){this.addListener()},e.prototype.onDisable=function(){this.removeListener()},__decorate([r(cc.SpriteAtlas)],e.prototype,"atlas",void 0),e=__decorate([i],e)}(cc.Component);n.default=s,cc._RF.pop()},{"./C":"C"}],C:[function(e,t,n){"use strict";var o,a,i,r,s,l,c,d,u,p,h,f,y,m,g,C,v,I,_,S,T,b,P,D,M,w,R,G;cc._RF.push(t,"3b849ZCPBhHF7IJT9/e/uq7","C"),Object.defineProperty(n,"__esModule",{value:!0}),(o=n.C||(n.C={})).Width=function(){return cc.director.getWinSize().width},o.Height=function(){return cc.director.getWinSize().height},o.getCanvas=function(){return a},o.setCanvas=function(e){a=e},o.getCurRoleCount=function(){return 5},o.getCurPropCount=function(){return 2},o.getCurVersion=function(){return"1.0.3"},(i=o.wxKey||(o.wxKey={})).ScoreA="wxScoreA",i.ScoreB="wxScoreB",i.ScoreC="wxScoreC",i.ScoreD="wxScoreD",i.ScoreE="wxScoreE",i.AssistTime="AssistTime",i.AssistId="AssistId",i.AssistDoneId="AssistDoneId",i.AssistDoneTime="AssistDoneTime",i.PassDailyTime="PassDailyTime",i.SaveDailyNTime="SaveDailyNTime",i.SaveDailyDTime="SaveDailyDTime",i.DailyNStartTime="DailyNStartTime",i.DailyDStartTime="DailyDStartTime",(r=o.DataKey||(o.DataKey={})).needToClearValue="SquarePatch_needToClearValue0607",r.selectMode="SquarePatch_selectMode",r.soundState="SquarePatch_soundState",r.SoundNum="SquarePatch_SoundNum",r.MusicNum="SquarePatch_MusicNum",r.guidanceState="SquarePatch_guidanceState",r.prizeFreeTimes="SquarePatch_prizeFreeTimes",r.orangeNum="SquarePatch_orangeNum",r.userRoleId="SquarePatch_userRoleId",r.dailyNormalState="SquarePatch_dailyNormalState",r.dailyDiffcultState="SquarePatch_dailyDiffcultState",r.dailyNormalFirstTime="SquarePatch_dailyNormalFirstTime",r.dailyDiffcultFirstTime="SquarePatch_dailyDiffcultFirstTime",r.dailyShareGetNum="SquarePatch_dailyShareGetNum",r.dailyShareLastTime="SquarePatch_dailyShareLastTime",r.DailyModeNTimer="DailyModeNTimer",r.DailyModeDTimer="DailyModeDTimer",r.DailyModeNFirstTime="DailyModeNFirstTime",r.DailyModeDFirstTime="DailyModeDFirstTime",r.DailyModeNFirstSaveTimes="DailyModeNFirstSaveTimes",r.DailyModeDFirstSaveTime="DailyModeDFirstSaveTime",r.DailyModeRefreshTimes="DailyModeRefreshTimes",r.DailyModeNOpenPanelTimes="DailyModeNOpenPanelTimes",r.DailyModeDOpenPanelTimes="DailyModeDOpenPanelTimes",r.WeekRefreshScoreTimes="WeekRefreshScoreTimes",r.PropHammerFirstUse="SquarePatch_PropHammerFirstUse",r.PropSuperStarFirstUse="SquarePatch_PropSuperStarFirstUse",r.GetSignRewardLastTime="SquarePatch_GetSignRewardLastTime",r.GetSignRewardIndex="SquarePatch_GetSignRewardIndex",r.GetFirstWeekSignTime="SquarePatch_GetFirstWeekSignTime",r.DailyAdsViewLastTime="SquarePatch_DailyAdsViewLastTime",r.DailyDiffcultAskHelpSteps="SquarePatch_DailyDiffcultAskHelpSteps",r.DailyPrizeAdsTimes="SquarePatch_DailyPrizeAdsTimes",r.DailyPrizeAdsLastTime="SquarePatch_DailyPrizeAdsLastTime",(s=o.JsonDataKey||(o.JsonDataKey={})).maxScoreByType="SquarePatch_maxScoreByType",s.userOwnRole="SquarePatch_userOwnRole",s.userOwnProp="SquarePatch_userOwnProp",s.userRoleExpCard="SquarePatch_userRoleExpCard",s.levelNormalConfig="SquarePatch_levelNormalConfig",s.randomRandomConfig="SquarePatch_randomRandomConfig",s.levelDiffcultConfig="SquarePatch_levelDiffcultConfig",s.randomDiffcultConfig="SquarePatch_randomDiffcultConfig",s.dailyShareGetPropTotal="SquarePatch_dailyShareGetPropTotal",s.gameSceneInfo="SquarePatch_gameSceneInfo",(l=o.SoundType||(o.SoundType={}))[l.Eliminate=0]="Eliminate",l[l.Get=1]="Get",l[l.Put=2]="Put",l[l.ClickBtn=3]="ClickBtn",l[l.ReadyGo=4]="ReadyGo",l[l.GameOverBg=5]="GameOverBg",l[l.RoleSkillUse=6]="RoleSkillUse",l[l.Comb1=7]="Comb1",l[l.Comb2=8]="Comb2",l[l.Comb3=9]="Comb3",l[l.Comb4=10]="Comb4",l[l.Comb5=11]="Comb5",l[l.Length=12]="Length",(c=o.UIPath||(o.UIPath={})).UIGetMenuPanel="UIGetMenuPanel",c.UITipsPanel="UITipsPanel",c.UIReStorePanel="UIReStorePanel",c.UIPropGetPanel="UIPropGetPanel",c.UIBackPackPanel="UIBackPackPanel",c.UIPrizePanel="UIPrizePanel",c.UIShopPanel="UIShopPanel",c.UIHelpPanel="UIHelpPanel",c.UIAdvPanel="UIAdvPanel",c.UIGameOverPanel="UIGameOverPanel",c.UISelectRolePanel="UISelectRolePanel",c.UIDailySharePanel="UIDailySharePanel",c.UISelectDailyPanel="UISelectDailyPanel",c.UISevenDayLoginPanel="UISevenDayLoginPanel",c.UIMainPanel="UIMainPanel",(d=o.EffectName||(o.EffectName={})).fxSkillBullet="fxSkillBullet",d.fxCubeTuoWei="fxCubeTuoWei",d.fxCubeShouJi="fxCubeShouJi",d.fxCubeClean="fxCubeClean",d.fxSkillFillCube="fxSkillFillCube",d.fxSkillFillHitCube="fxSkillFillHitCube",d.fxPropChange="fxPropChange",d.fxCleanLine="fxCleanLine",d.fxCleanSingleColor="fxCleanSingleColor_",d.fxRoleColInWall="fxRoleColInWall",d.fxRolePlayShowEnd="fxRolePlayShowEnd",d.fxRolePlaySkillStart="fxRolePlaySkillStart",d.fxRolePlayGlow="fxRolePlayGlow",d.fxGameOverExplore="fxGameOverExplore",(u=o.AdUnitIdType||(o.AdUnitIdType={})).Revive="adunit-3f9e16fe5e5bea9a",u.MainGetGold="adunit-7ed80c6711a751b5",(p=o.MusicType||(o.MusicType={}))[p.MainBg=0]="MainBg",p[p.Length=1]="Length",p[p.None=2]="None",(h=o.GameModeName||(o.GameModeName={}))[h["经典模式"]=0]="经典模式",h[h["进阶模式"]=1]="进阶模式",h[h["限时挑战"]=2]="限时挑战",h[h["单环挑战"]=3]="单环挑战",h[h["每日挑战"]=4]="每日挑战",(f=o.RoleType||(o.RoleType={})).QQ="1",f.Duck="2",f.Cat="3",f.Octopus="4",f.Bird="5",f.Whale="6",o.getModeNameByType=function(e){var t="";switch(e){case g.A:t="经典模式";break;case g.B:t="进阶模式";break;case g.C:t="限时挑战";break;case g.D:t="单环挑战"}return t},o.getRoleNameByType=function(e){var t="";switch(parseInt(e)){case 1:t="企鹅";break;case 2:t="鸭子";break;case 3:t="紫猫";break;case 4:t="章鱼";break;case 5:t="青鸟"}return t},(y=o.ToChildProgramMsgName||(o.ToChildProgramMsgName={})).ToInitData="ToInitData",y.GameOver="GameOve",y.ShowRank="ShowRank",y.HideRank="HideRank",y.SetPoint="SetPoint",y.ShowGroup="ShowGroup",y.ToDailyAssist="ToDailyAssist",y.CompleteDailyAssist="CompleteDailyAssist",y.ShowAssist="ShowAssist",y.HideAssist="HideAssist",y.PassDailyTime="PassDailyTime",y.DailyPassState="DailyPassState",y.ShowDailyPassTime="ShowDailyPassTime",y.HideDailyPassTime="HideDailyPassTime",y.ShowMainStar="ShowMainStar",y.HideMainStar="HideMainStar",y.DailyNStartTime="DailyNStartTime",y.DailyDStartTime="DailyDStartTime",y.ShowGameOverShare="ShowGameOverShare",y.HideGameOverShare="HideGameOverShare",y.ShowSurpassFriend="ShowSurpassFriend",y.UpdateSurpassFriend="UpdateSurpassFriend",y.HideSurpassFriend="HideSurpassFriend",y.ShowGameOverRank="ShowGameOverRank",y.HideGameOverRank="HideGameOverRank",(m=o.ShareState||(o.ShareState={})).ToSeeGroup="ToSeeGroup",m.SysShare="SysShare",m.DailyShare="DailyShare",m.DailyChallenge="DailyChallenge",m.DailyAssist="DailyAssist",m.InviteFriend="InviteFriend",(C=g=o.GameMode||(o.GameMode={}))[C.A=0]="A",C[C.B=1]="B",C[C.C=2]="C",C[C.D=3]="D",C[C.E=4]="E",C[C.Length=5]="Length",(v=o.DailyShareType||(o.DailyShareType={}))[v.dailyNormalWin=0]="dailyNormalWin",v[v.dailyNormalLose=1]="dailyNormalLose",v[v.dailyDiffcultWin=2]="dailyDiffcultWin",v[v.dailyDiffcutLose=3]="dailyDiffcutLose",v[v.Length=4]="Length",(I=o.GridState||(o.GridState={}))[I.NotCanPut=0]="NotCanPut",I[I.CanPut=1]="CanPut",I[I.GetPanel=2]="GetPanel",I[I.ViewPanel=3]="ViewPanel",I[I.Length=4]="Length",(_=o.CubeItemType||(o.CubeItemType={}))[_.A=0]="A",_[_.B=1]="B",_[_.C=2]="C",_[_.D=3]="D",_[_.E=4]="E",_[_.F=5]="F",_[_.G=6]="G",_[_.H=7]="H",_[_.Length=8]="Length",(S=o.ReportType||(o.ReportType={})).SceneFlow="SceneFlow",S.GuideFlow="GuideFlow",S.SnsFlow="SnsFlow",S.ActionFlow="ActionFlow",(T=o.CubeItemSize||(o.CubeItemSize={}))[T.Small=0]="Small",T[T.Normal=1]="Normal",T[T.Big=2]="Big",T[T.Length=3]="Length",(b=o.MsgType||(o.MsgType={})).SaveShareInfo="SaveShareInfo",b.ShowRankNode="ShowRankNode",b.CubeItemTouchUp="CubeItemTouchUp",b.CubeRemoveFromGetContainer="CubeRemoveFromGetContainer",b.CubeRemoveFromPutContainer="CubeRemoveFromPutContainer",b.GameOver="GameOver",b.ShowGameOver="ShowGameOver",b.CubeEliminateOne="CubeEliminateOne",b.CubeEliminateThree="CubeEliminateThree",b.CubeItemTouchDown="CubeItemTouchDown",b.ShowEffectLine="ShowEffectLine",b.ShowEffectPoint="ShowEffectPoint",b.GetPoint="GetPoint",b.StartGame="StartGame",b.ChangeMode="ChangeMode",b.ShowHelp="ShowHelp",b.ChangeSound="ChangeSound",b.CubeDownCanGetPoint="CubeDownCanGetPoint",b.PlayClickAudio="PlayClickAudio",b.PlayGameOverAudio="PlayGameOverAudio",b.ChangeBgAudio="ChangeBgAudio",b.ShowSkillShake="ShowSkillShake",b.SkillTrigger="SkillTrigger",b.PropHammerTrigger="PropHammerTrigger",b.ActiveGameMenu="ActiveGameMenu",b.ShowGetPointEffect="ShowGetPointEffect",b.ShowSkillBorderEffect="ShowSkillBorderEffect",b.onSetDailyConfigPath="onSetDailyConfigPath",b.RefreshOrange="RefreshOrange",b.RefreshSelectRole="RefreshSelectRole",b.RefreshSignState="RefreshSignState",b.RefreshShareState="RefreshShareState",b.RefreshGameClubBtn="RefreshGameClubBtn",b.GameHideOrShow="GameHideOrShow",b.DailyModeNewTips="DailyModeNewTips",b.GameRemainTimeEnd="GameRemainTimeEnd",b.GuidanceCloseAnim="GuidanceCloseAnim",b.EnableGridMove="EnableGridMove",b.EnableGridPropUse="EnableGridPropUse",b.DailyLevelConfigFinish="DailyLevelConfigFinish",b.RefreshProp="RefreshProp",b.GameShareGetPropAdd="GameShareGetPropAdd",b.GameAdsGetPropAdd="GameAdsGetPropAdd",b.RefreshRoleItems="RefreshRoleItems",b.RefreshMoveCubePos="RefreshMoveCubePos",b.CancelMoveCubePos="CancelMoveCubePos",(P=o.GetType||(o.GetType={}))[P.kGetOrange=0]="kGetOrange",P[P.kGetRole=1]="kGetRole",P[P.kGetProp=2]="kGetProp",P[P.kGetExpCard=3]="kGetExpCard",P[P.Length=4]="Length",(D=o.GameOverType||(o.GameOverType={}))[D.kTimeLimit=0]="kTimeLimit",D[D.kNoSetCanPut=1]="kNoSetCanPut",D[D.Length=2]="Length",(M=o.LimitModeDir||(o.LimitModeDir={}))[M.kRight=0]="kRight",M[M.kDown=1]="kDown",M[M.kLeft=2]="kLeft",M[M.kUp=3]="kUp",M[M.KNone=4]="KNone",(R=w=o.PropType||(o.PropType={})).kNone="kNone",R.kHammer="kHammer",R.kSuperStar="kSuperStar",o.getPropItemID=function(e){var t="";switch(e){case w.kHammer:t="锤子";break;case w.kSuperStar:t="超能星星"}return t},(G=o.ccaEventType||(o.ccaEventType={})).NewbeeGuideFinish="完成新手引导次数",G.GameModeShare="胜利炫耀次数",G.GameModeRePlay="重玩次数",G.GameModeAdsView="看广告复活次数",G.DailyModeUIEnter="每日挑战界面进入次数",G.DailyNormal="每日挑战普通模式",G.DailyNormalFirstPass="每日挑战普通模式首通",G.DailyNormalBattleFriend="每日挑战普通模式挑战好友次数",G.DailyNormalAskHelpClick="每日挑战普通模式求助次数",G.DailyNormalReplay="每日挑战普通模式重玩次数",G.DailyNormalShare="每日挑战普通模式炫耀次数",G.DailyDiffcult="每日挑战困难模式",G.DailyDiffcultFirstPass="每日挑战困难模式首通",G.DailyDiffcultBattleFriend="每日挑战困难模式挑战好友次数",G.DailyDiffcultAskHelpClick="每日挑战困难模式求助次数",G.DailyDiffcultReplay="每日挑战困难模式重玩次数",G.DailyDiffcultShare="每日挑战困难模式炫耀次数",G.PrizeClickToRotate="转盘成功次数",G.PrizeGetRole="转盘抽取角色次数",G.RoleSelect="角色选择次数",G.RoleGet="角色获得次数",G.RoleBuy="角色购买次数",G.RolePrize="角色抽取次数",G.RoleUseSkill="角色技能使用次数",G.RankUIClick="进入排行界面次数",G.RankShareGroupClick="分享群排行点击次数",G.MoreGameUIClick="更多游戏点击次数",G.HelpUIClick="帮助界面打开次数",G.SoundCloseUIClick="关闭声音点击次数",G.PropShareGetInMode="-分享获得道具-",G.PropAdsGetInMode="-广告获得道具-",G.PropBuyGetInMode="-购买获得道具-",G.PropUseInMode="-使用道具-",G.OnGameShow="激活游戏到前台",G.OnGameHide="隐藏游戏到后台",cc._RF.pop()},{}],DailyInfoMenu:[function(e,t,n){"use strict";cc._RF.push(t,"1a67cTyE7VGV7Y9eAotazsG","DailyInfoMenu"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Tools/FYSDKMgr"),s=e("./Tools/FYMessenger"),a=e("./Tools/FYUtility"),l=e("./C"),o=cc._decorator,r=o.ccclass,c=o.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.btnAgain=null,e.btnShare=null,e.nodeTimerGrid=null,e.nodeTimerItem=null,e.nodeFriendBg=null,e._dailyType=null,e._tex=null,e.assistFriend=null,e}return __extends(e,t),e.prototype.initUI=function(e){void 0===e&&(e=null),this._dailyType=e,this.node.active=!0;var t,n,o,a=i.default.Instance.loadLocalData(l.C.DataKey.DailyModeNFirstTime);1==this._dailyType&&(a=i.default.Instance.loadLocalData(l.C.DataKey.DailyModeDFirstTime)),cc.log("_seconds "+a),o=(a=parseInt(a))%60,n=a%3600/60,t=a/3600,this.nodeTimerGrid.removeAllChildren(),0!=t?(this.nodeTimerGrid.setContentSize(600,this.nodeTimerItem.getContentSize().height),this.createTimer("timeHour",t),this.createTimer("timeMinute",n)):0!=n?(this.nodeTimerGrid.setContentSize(400,this.nodeTimerItem.getContentSize().height),this.createTimer("timeMinute",n)):this.nodeTimerGrid.setContentSize(200,this.nodeTimerItem.getContentSize().height),this.createTimer("timeSecond",o)},e.prototype.createTimer=function(e,t){var n=a.default.addChild(this.nodeTimerGrid,this.nodeTimerItem),o=n.getChildByName("MinT").getComponent(cc.Sprite);a.default.changeSpriteFrame(o,"atlas/common/common",e),n.getChildByName("Min").getComponent(cc.Label).string=t},e.prototype.onEnable=function(){if(this.btnAgain.node.scale=.75,this.btnShare.node.scale=.75,cc.sys.platform==cc.sys.WECHAT_GAME){var e=i.default.Instance.hsdkGetSessionInfo();i.default.Instance.wxPostMessage(l.C.ToChildProgramMsgName.ShowAssist,[{id:e.h5game_openid},{mode:this._dailyType}]),this.nodeFriendBg.active=!1}else this.nodeFriendBg.active=!0;s.default.Instance.send(l.C.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.btnBack.node.scale=1,this.btnAgain.node.scale=.75,this.btnShare.node.scale=.75,s.default.Instance.send(l.C.MsgType.RefreshGameClubBtn,!0)},e.prototype.onClickShare=function(){if(s.default.Instance.send(l.C.MsgType.PlayClickAudio),cc.sys.platform==cc.sys.WECHAT_GAME){var e=i.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share1.png");console.log("-----------分享路径：  ",e),i.default.Instance.hsdkShareMessage({shareInfo:{title:"最强智力比拼，不服来战！",imageUrl:e,gameScene:l.C.ShareState.DailyChallenge,query:"form="+l.C.ShareState.DailyChallenge+"&mode="+this._dailyType},success:function(e){console.log("-----------每日挑战分享成功",e)}})}},e.prototype.onClickAgain=function(){1==this._dailyType?this.onClickDiffcultMode():this.onClickEasyMode()},e.prototype.onClickEasyMode=function(){s.default.Instance.send(l.C.MsgType.PlayClickAudio);var r=(new Date).getDay();cc.loader.loadRes("DailyLevelConfigNormal.txt",function(e,t){var i=t.split("\n")[r];cc.loader.loadRes("DailyRandomConfigNormal.txt",function(e,t){var n=JSON.parse(i).level,o=t.split("\n")[r],a=JSON.parse(o);this.node.active=!1,s.default.Instance.send(l.C.MsgType.onSetDailyConfigPath,0,n,a),s.default.Instance.send(l.C.MsgType.StartGame,l.C.GameMode.E,!0)}.bind(this))}.bind(this))},e.prototype.onClickDiffcultMode=function(){s.default.Instance.send(l.C.MsgType.PlayClickAudio);var r=(new Date).getDay();cc.loader.loadRes("DailyLevelConfigDiffcult.txt",function(e,t){var i=t.split("\n")[r];cc.loader.loadRes("DailyRandomConfigDiffcult.txt",function(e,t){var n=JSON.parse(i).level,o=t.split("\n")[r],a=JSON.parse(o);this.node.active=!1,s.default.Instance.send(l.C.MsgType.onSetDailyConfigPath,1,n,a),s.default.Instance.send(l.C.MsgType.StartGame,l.C.GameMode.E,!0)}.bind(this))}.bind(this))},e.prototype.onClickBack=function(){s.default.Instance.send(l.C.MsgType.PlayClickAudio),this.node.active=!1},e.prototype.start=function(){this._tex=new cc.Texture2D},e.prototype.updaetSubDomainCanvas=function(){this._tex&&cc.sys.platform==cc.sys.WECHAT_GAME&&(this._tex.initWithElement(sharedCanvas),this._tex.handleLoadedTexture(),this.assistFriend.spriteFrame=new cc.SpriteFrame(this._tex))},e.prototype.update=function(){this.updaetSubDomainCanvas()},__decorate([c(cc.Button)],e.prototype,"btnBack",void 0),__decorate([c(cc.Button)],e.prototype,"btnAgain",void 0),__decorate([c(cc.Button)],e.prototype,"btnShare",void 0),__decorate([c(cc.Node)],e.prototype,"nodeTimerGrid",void 0),__decorate([c(cc.Node)],e.prototype,"nodeTimerItem",void 0),__decorate([c(cc.Node)],e.prototype,"nodeFriendBg",void 0),__decorate([c(cc.Sprite)],e.prototype,"assistFriend",void 0),e=__decorate([r],e)}(cc.Component);n.default=d,cc._RF.pop()},{"./C":"C","./Tools/FYMessenger":"FYMessenger","./Tools/FYSDKMgr":"FYSDKMgr","./Tools/FYUtility":"FYUtility"}],DailyLevelConfig:[function(e,t,n){"use strict";cc._RF.push(t,"a981ayB0M1AvpDGAeavMLzI","DailyLevelConfig"),Object.defineProperty(n,"__esModule",{value:!0});var l=e("./Tools/FYMessenger"),c=e("./C"),o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this._nLoadConfigTotal=6,this.dictNormalLevelInfo={},this.dictNormalRandomInfo={},this.dictNormalAnswerInfo={},this.dictDiffcultLevelInfo={},this.dictDiffcultRandomInfo={},this.dictDiffcultAnswerInfo={}}var t;return(t=e).prototype.initAllConfig=function(){var r=0,s=this;cc.loader.loadRes("DailyLevelConfigNormal.txt",function(e,t){var n=t.split("\n");for(var o in n){var a=JSON.parse(n[o]);for(var i in a)s.dictNormalLevelInfo[i]=a[i]}++r==s._nLoadConfigTotal&&l.default.Instance.send(c.C.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyRandomConfigNormal.txt",function(e,t){var n=t.split("\n");for(var o in n){var a=JSON.parse(n[o]);for(var i in a)s.dictNormalRandomInfo[i]=a[i]}++r==s._nLoadConfigTotal&&l.default.Instance.send(c.C.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyLevelConfigDiffcult.txt",function(e,t){var n=t.split("\n");for(var o in n){var a=JSON.parse(n[o]);for(var i in a)s.dictDiffcultLevelInfo[i]=a[i]}++r==s._nLoadConfigTotal&&l.default.Instance.send(c.C.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyRandomConfigDiffcult.txt",function(e,t){var n=t.split("\n");for(var o in n){var a=JSON.parse(n[o]);for(var i in a)s.dictDiffcultRandomInfo[i]=a[i]}++r==s._nLoadConfigTotal&&l.default.Instance.send(c.C.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyAnswerConfigNormal.txt",function(e,t){var n=t.split("\n");for(var o in n){var a=JSON.parse(n[o]);for(var i in a)s.dictNormalAnswerInfo[i]=a[i]}++r==s._nLoadConfigTotal&&l.default.Instance.send(c.C.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyAnswerConfigDiffcult.txt",function(e,t){var n=t.split("\n");for(var o in n){var a=JSON.parse(n[o]);for(var i in a)s.dictDiffcultAnswerInfo[i]=a[i]}++r==s._nLoadConfigTotal&&l.default.Instance.send(c.C.MsgType.DailyLevelConfigFinish)})},e.prototype.getNormalLevelInfoByDays=function(e){return null!=this.dictNormalLevelInfo[e]?this.dictNormalLevelInfo[e]:null},e.prototype.getNormalRandomInfoByDays=function(e){return null!=this.dictNormalRandomInfo[e]?this.dictNormalRandomInfo[e]:null},e.prototype.getNormalAnswerInfoByDays=function(e){return null!=this.dictNormalAnswerInfo[e]?this.dictNormalAnswerInfo[e]:null},e.prototype.getDiffcultLevelInfoByDays=function(e){return null!=this.dictDiffcultLevelInfo[e]?this.dictDiffcultLevelInfo[e]:null},e.prototype.getDiffcultRandomInfoByDays=function(e){return null!=this.dictDiffcultRandomInfo[e]?this.dictDiffcultRandomInfo[e]:null},e.prototype.getDiffcultAnswerInfoByDays=function(e){return null!=this.dictDiffcultAnswerInfo[e]?this.dictDiffcultAnswerInfo[e]:null},e.Instance=new t,e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{"./C":"C","./Tools/FYMessenger":"FYMessenger"}],DailyLevelCreator:[function(require,module,exports){"use strict";cc._RF.push(module,"2c128yihOZP8IJd616RuYyF","DailyLevelCreator"),Object.defineProperty(exports,"__esModule",{value:!0});var CubeItem_1=require("./CubeItem"),CubeContainer_1=require("./CubeContainer"),FYMessenger_1=require("./Tools/FYMessenger"),GridItem_1=require("./GridItem"),FYUserDataMgr_1=require("./FYUserDataMgr"),FYSDKMgr_1=require("./Tools/FYSDKMgr"),FYUserDataMgr_2=require("./FYUserDataMgr"),C_1=require("./C"),_a=cc._decorator,ccclass=_a.ccclass,property=_a.property,DailyLevelCreator=function(_super){function DailyLevelCreator(){var e=null!==_super&&_super.apply(this,arguments)||this;return e.nodeTop=null,e.nodeCenter=null,e.nodeBottom=null,e.sPutContainer=null,e.sGetContainer=null,e.nodeItem=null,e.nodePoint=null,e.nodeLevelGrid=null,e.nodeRandomGrid=null,e.editColor=null,e.editSize=null,e.editLevel=null,e.editRandomNum=null,e.labMode=null,e.labConfigType=null,e._curMode=C_1.C.GameMode.A,e._bStartTimeGame=!1,e._bPauseTimeGame=!1,e._nRow=3,e._nColumn=3,e._nRandomCube=3,e._nRandomCubeTimes=0,e._nGetRow=1,e._nGetColumn=3,e._arrCubeType=[],e._arrCubeType1=[],e._arrayGetGridIndex=[0,1,2],e._arrayDailyRandomConfig={},e._currDailyRandomConfigIdx=-1,e._strLevelConfigPath="",e._strRandomConfigPath="",e._curSelectLevel=0,e._curSelectMode=0,e._curConfigType=0,e}return __extends(DailyLevelCreator,_super),DailyLevelCreator.prototype.createPoint=function(){this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint)},DailyLevelCreator.prototype.createCubeByUser=function(){this._nRandomCubeTimes++,this.sGetContainer.clear(),this.sGetContainer.createGrid(this._nGetRow,this._arrayGetGridIndex.length,this.nodePoint,this._arrayGetGridIndex,C_1.C.GridState.GetPanel);var e=C_1.C.Width()/4,t=Number(parseInt(this.editColor.string)-1),n=Number(parseInt(this.editSize.string)-1),o=null;(o=0<FYUserDataMgr_2.default.Instance.cubePool.size()?FYUserDataMgr_2.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sGetContainer.node;var a=o.getComponent(CubeItem_1.default);a.init(t,n,new cc.Vec2(1*e-C_1.C.Width()/2,0)),o.active=!0,this.sGetContainer.putCubeByIndex(1,a)||a.node.destroy()},DailyLevelCreator.prototype.createLevelByConfig=function(e){for(var t in e){var n=e[t],o=Math.floor(parseInt(t)/3),a=parseInt(t)%3,i=parseInt(n);cc.log("gridKey:"+o+" cubeKey:"+a+" color:"+i);var r=this.sPutContainer.getGridByIndex(o),s=this.sPutContainer.node.convertToNodeSpaceAR(r.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),l=Number(i),c=Number(a),d=null;(d=0<FYUserDataMgr_2.default.Instance.cubePool.size()?FYUserDataMgr_2.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sPutContainer.node;var u=d.getComponent(CubeItem_1.default);u.init(l,c,new cc.Vec2(s.x,s.y)),d.active=!0,this.sPutContainer.putCube(r);this.sPutContainer.putCubeByIndex(o,u)}},DailyLevelCreator.prototype.addListener=function(){FYMessenger_1.default.Instance.add(C_1.C.MsgType.CubeItemTouchUp,this.onCubeItemTouchUp,this),FYMessenger_1.default.Instance.add(C_1.C.MsgType.onSetDailyConfigPath,this.onSetDailyConfigPath,this)},DailyLevelCreator.prototype.removeListener=function(){FYMessenger_1.default.Instance.remove(C_1.C.MsgType.CubeItemTouchUp,this.onCubeItemTouchUp,this),FYMessenger_1.default.Instance.remove(C_1.C.MsgType.onSetDailyConfigPath,this.onSetDailyConfigPath,this)},DailyLevelCreator.prototype.isCanPut=function(){for(var e=this._nGetRow*this._nGetColumn,t=this._nRow*this._nColumn,n=this.sGetContainer.getGridHaveCubeSize(),o=this.sPutContainer.getGridCanPutCubeSize(),a=0;a<e;a++)for(var i=0;i<t;i++){var r=!0;if("000"==n[a])r=!1;else for(var s=0;s<C_1.C.CubeItemSize.Length;s++)"1"==n[a][s]&&("1"==o[i][s]||(r=!1));if(r)return!0}return!1},DailyLevelCreator.prototype.checkRandomList=function(){var e={},t=this.sPutContainer.getTotalGrid();for(var n in t){var o=parseInt(n),a=t[n].getAllCubeItem();for(var i in a){parseInt(i);var r=a[i];if(null!=r)e[(3*o+r.getCubeItemSize()).toString()]=r.getCubeItemType()}}var s=this._currDailyRandomConfigIdx.toString();this._arrayDailyRandomConfig[s]=e},DailyLevelCreator.prototype.onCubeItemTouchUp=function(e,t){if(0!=this._curSelectLevel){if(t instanceof GridItem_1.default&&0<t.getCubeNum()){this.sPutContainer.putCubeWithNoClean(t);2==this._curMode&&this.checkRandomList(),this.createCubeByUser()}}else t.resetPos()},DailyLevelCreator.prototype.onSetDailyConfigPath=function(e,t,n){this._strLevelConfigPath=t,this._strRandomConfigPath=n},DailyLevelCreator.prototype.onChangeSelectMode=function(){0!=this._curSelectLevel&&(this._curSelectMode=0==this._curSelectMode?1:0,0==this._curSelectMode?this.labMode.string="模式:普通":this.labMode.string="模式:困难",this.onStartByMode(1,!0))},DailyLevelCreator.prototype.onChangeConfigType=function(){if(0!=this._curSelectLevel)if(this._curConfigType=0==this._curConfigType?1:0,0==this._curConfigType){this.labConfigType.string="关卡配置",this.onStartByMode(1,!0);var e=0==this._curSelectMode?C_1.C.JsonDataKey.levelNormalConfig:C_1.C.JsonDataKey.levelDiffcultConfig,t="level"+this._curSelectLevel;null!=(o=FYSDKMgr_1.default.Instance.loadLocalJsonData(e))&&o[t]&&0==this._curConfigType&&(cc.log(o[t]),this.createLevelByConfig(o[t]))}else{this.labConfigType.string="随机配置",this.onStartByMode(2,!0);var n=0==this._curSelectMode?C_1.C.JsonDataKey.randomRandomConfig:C_1.C.JsonDataKey.randomDiffcultConfig,o=(t="random"+this._curSelectLevel,FYSDKMgr_1.default.Instance.loadLocalJsonData(n));if(cc.log(o),null!=o&&o[t]){for(var a in cc.log(o[t]),o[t]){var i=parseInt(a);1==i&&(this._currDailyRandomConfigIdx=i,this._arrayDailyRandomConfig=o[t])}this.createLevelByConfig(this._arrayDailyRandomConfig[1])}}},DailyLevelCreator.prototype.onEditSelectLevel=function(){if(null!=this.editLevel.string){var e=parseInt(this.editLevel.string);if(this._curSelectLevel!=e){this._curSelectLevel=e,this._curConfigType=1,this.onChangeConfigType(),this.onStartByMode(1,!0),cc.log("_curSelectLevel:"+this._curSelectLevel);var t=0==this._curSelectMode?C_1.C.JsonDataKey.levelNormalConfig:C_1.C.JsonDataKey.levelDiffcultConfig,n="level"+this._curSelectLevel,o=FYSDKMgr_1.default.Instance.loadLocalJsonData(t);null!=o&&o[n]&&0==this._curConfigType&&(cc.log(o[n]),this.createLevelByConfig(o[n]))}}},DailyLevelCreator.prototype.onEditRandomNum=function(){if(0!=this._curSelectLevel&&null!=this.editRandomNum.string){var e=0,t=this._arrayDailyRandomConfig[this._currDailyRandomConfigIdx.toString()];for(var n in t)null!=t[n]&&e++;if(e<3&&parseInt(this.editRandomNum.string)>this._currDailyRandomConfigIdx)return cc.log(this._arrayDailyRandomConfig),void cc.log("没有放置完全部的物体！");var o=parseInt(this.editRandomNum.string);if(this._currDailyRandomConfigIdx!=o){this._currDailyRandomConfigIdx=o,this.onStartByMode(2,!0);var a=this._currDailyRandomConfigIdx.toString();cc.log(this._arrayDailyRandomConfig),null!=this._arrayDailyRandomConfig[a]&&this.createLevelByConfig(this._arrayDailyRandomConfig[a])}}},DailyLevelCreator.prototype.onEditEnd=function(){if(0==this._curConfigType){if(null==this.editColor.string||null==this.editSize.string||null==this.editLevel.string)return;if((e=parseInt(this.editColor.string)-1)>=C_1.C.CubeItemType.Length||e<C_1.C.CubeItemType.A)return void console.log("color not Fit");if((t=parseInt(this.editSize.string)-1)>=C_1.C.CubeItemSize.Length||t<C_1.C.CubeItemSize.Small)return void console.log("size not Fit");this.createCubeByUser()}if(1==this._curConfigType){if(null==this.editColor.string||null==this.editSize.string||null==this.editLevel.string||null==this.editRandomNum.string)return;var e,t;if((e=parseInt(this.editColor.string)-1)>=C_1.C.CubeItemType.Length||e<C_1.C.CubeItemType.A)return void console.log("color not Fit");if((t=parseInt(this.editSize.string)-1)>=C_1.C.CubeItemSize.Length||t<C_1.C.CubeItemSize.Small)return void console.log("size not Fit");if(parseInt(this.editRandomNum.string)<=0)return void console.log("randomNum not Fit");this.createCubeByUser()}},DailyLevelCreator.prototype.onClearConfig=function(){0==this._curConfigType?this.onStartByMode(1,!0):this.onStartByMode(2,!0)},DailyLevelCreator.prototype.onSaveConfig=function(){if(0!=this._curSelectLevel){var e={},t=this.sPutContainer.getTotalGrid();for(var n in t){var o=parseInt(n),a=t[n].getAllCubeItem();for(var i in a){parseInt(i);var r=a[i];if(null!=r)e[(3*o+r.getCubeItemSize()).toString()]=r.getCubeItemType()}}1==this._curMode?this.saveConfig(e):this.saveConfig(this._arrayDailyRandomConfig)}else cc.log("this._curSelectLevel = null")},DailyLevelCreator.prototype.saveConfig=function(e){cc.log("saveInfo:"+e);var t=0==this._curSelectMode?C_1.C.JsonDataKey.levelNormalConfig:C_1.C.JsonDataKey.levelDiffcultConfig,n=0==this._curSelectMode?C_1.C.JsonDataKey.randomRandomConfig:C_1.C.JsonDataKey.randomDiffcultConfig;if(1==this._curMode){var o="level"+this._curSelectLevel,a=FYSDKMgr_1.default.Instance.loadLocalJsonData(t);null==a&&(a={});var i=JSON.stringify(e);a[o]=e,FYSDKMgr_1.default.Instance.saveLocalJsonData(t,a),console.log("关卡保存数据",'{"'+o+'":'+i+"}")}else{var r="random"+this._curSelectLevel,s=FYSDKMgr_1.default.Instance.loadLocalJsonData(n);null==s&&(s={});var l=JSON.stringify(e);s[r]=e,FYSDKMgr_1.default.Instance.saveLocalJsonData(n,s);FYSDKMgr_1.default.Instance.loadLocalJsonData(n);console.log("随机保存数据",'{"'+r+'":'+l+"}")}},DailyLevelCreator.prototype.onStartByMode=function(mode,bReset){if(this._bPauseTimeGame=!1,this._curMode=mode,this._nRandomCubeTimes=0,bReset){if(this.sPutContainer.clear(),this.sGetContainer.clear(),this.sPutContainer.clearGrid(),this.sGetContainer.clearGrid(),this._arrayGetGridIndex=[0,1,2],this._arrCubeType=this._arrCubeType1,this.nodeLevelGrid.active=!1,this.nodeRandomGrid.active=!1,this.editRandomNum.node.parent.active=!1,1==mode)this.sPutContainer.node.setContentSize(704,682),this.nodeLevelGrid.active=!0,this.nodeRandomGrid.active=!1,this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this._currDailyRandomConfigIdx=1,this.editRandomNum.string="1",this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);else if(2==mode)this.sPutContainer.node.setContentSize(704,227),this.nodeLevelGrid.active=!1,this.nodeRandomGrid.active=!0,this.editRandomNum.node.parent.active=!0,-1==this._currDailyRandomConfigIdx&&(this._currDailyRandomConfigIdx=1,this.editRandomNum.string="1"),this.nodeLevelGrid.active=!0,this._nRow=1,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);else if(mode==C_1.C.GameMode.E){this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);var txtLevelPath=this._strLevelConfigPath;return void cc.loader.loadRes(txtLevelPath,function(errLevel,resLevel){var txtRandomPath=this._strRandomConfigPath;cc.loader.loadRes(txtRandomPath,function(errRandom,resRandom){var objLevel=JSON.parse(resLevel),levelInfo=objLevel.level1,objRandom=JSON.parse(resRandom);this._arrayDailyRandomConfig=objRandom,this._currDailyRandomConfigIdx=1;var randomInfo=objRandom[1];this.createLevelByConfig(eval(levelInfo)),this.createCubeByConfig(eval(randomInfo))}.bind(this))}.bind(this))}this.createCubeByUser()}},DailyLevelCreator.prototype.onLoad=function(){C_1.C.setCanvas(this.getComponent(cc.Canvas))},DailyLevelCreator.prototype.start=function(){cc.log(FYUserDataMgr_1.default.Instance.value);for(var e=0;e<C_1.C.CubeItemType.Length;e++){C_1.C.CubeItemType[e];for(var t=0;t<3;t++){var n=(e+"_"+t).toString();this._arrCubeType1.push(n)}}this.onStartByMode(1,!0)},DailyLevelCreator.prototype.onEnable=function(){this.addListener()},DailyLevelCreator.prototype.onDisable=function(){this.removeListener()},DailyLevelCreator.prototype.update=function(e){},__decorate([property({type:cc.Node,displayName:"顶容器",tooltip:"顶部容器，主要放菜单"})],DailyLevelCreator.prototype,"nodeTop",void 0),__decorate([property({type:cc.Node,displayName:"中容器",tooltip:"中间容器，主要放游戏操作的对象"})],DailyLevelCreator.prototype,"nodeCenter",void 0),__decorate([property({type:cc.Node,displayName:"底容器",tooltip:"底部容器，主要放广告"})],DailyLevelCreator.prototype,"nodeBottom",void 0),__decorate([property({type:CubeContainer_1.default,displayName:"放容器",tooltip:"放方块的容器"})],DailyLevelCreator.prototype,"sPutContainer",void 0),__decorate([property({type:CubeContainer_1.default,displayName:"拿容器",tooltip:"拿方块的容器"})],DailyLevelCreator.prototype,"sGetContainer",void 0),__decorate([property({type:cc.Node,displayName:"方块",tooltip:"方块的样板，包括大中小"})],DailyLevelCreator.prototype,"nodeItem",void 0),__decorate([property({type:cc.Node,displayName:"位置点",tooltip:"显示放置的位置的点"})],DailyLevelCreator.prototype,"nodePoint",void 0),__decorate([property(cc.Node)],DailyLevelCreator.prototype,"nodeLevelGrid",void 0),__decorate([property(cc.Node)],DailyLevelCreator.prototype,"nodeRandomGrid",void 0),__decorate([property(cc.EditBox)],DailyLevelCreator.prototype,"editColor",void 0),__decorate([property(cc.EditBox)],DailyLevelCreator.prototype,"editSize",void 0),__decorate([property(cc.EditBox)],DailyLevelCreator.prototype,"editLevel",void 0),__decorate([property(cc.EditBox)],DailyLevelCreator.prototype,"editRandomNum",void 0),__decorate([property(cc.Label)],DailyLevelCreator.prototype,"labMode",void 0),__decorate([property(cc.Label)],DailyLevelCreator.prototype,"labConfigType",void 0),DailyLevelCreator=__decorate([ccclass],DailyLevelCreator),DailyLevelCreator}(cc.Component);exports.default=DailyLevelCreator,cc._RF.pop()},{"./C":"C","./CubeContainer":"CubeContainer","./CubeItem":"CubeItem","./FYUserDataMgr":"FYUserDataMgr","./GridItem":"GridItem","./Tools/FYMessenger":"FYMessenger","./Tools/FYSDKMgr":"FYSDKMgr"}],DailyViewMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1098eG7budDF6C0NqEZjhd4","DailyViewMgr"),Object.defineProperty(n,"__esModule",{value:!0});var f=e("./CubeItem"),y=e("./Tools/FYUtility"),m=e("./C"),o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBgItems=[],e.nodeItem=null,e._arrayDailyRandomConfig={},e}return __extends(e,t),e.prototype.refreshCubeSet=function(e){var t=m.C.Width()/16;for(var n in this._arrayDailyRandomConfig=e,this._arrayDailyRandomConfig){var o=this._arrayDailyRandomConfig[n],a=this.nodeBgItems[parseInt(n)-1];if(null!=a)for(var i in o){var r=y.default.addChild(a,this.nodeItem.node),s=o[i],l=Math.floor(parseInt(i)/3),c=parseInt(i)%3,d=parseInt(s),u=Number(d),p=Number(c),h=r.getComponent(f.default);h.init(u,p,new cc.Vec2((l+1)*t-this.nodeBgItems[0].width/2,0)),h.node.active=!0}}},__decorate([i({type:Array(cc.Node),displayName:"所有背景的list",tooltip:"所有背景的list"})],e.prototype,"nodeBgItems",void 0),__decorate([i(f.default)],e.prototype,"nodeItem",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{"./C":"C","./CubeItem":"CubeItem","./Tools/FYUtility":"FYUtility"}],EffectMgr:[function(e,t,n){"use strict";cc._RF.push(t,"eb1d5O/yDFHALjCitQap/ED","EffectMgr"),Object.defineProperty(n,"__esModule",{value:!0});var s=e("./Tools/FYResMgr"),a=e("./Tools/FYEffectItem"),i=e("./Tools/FYScheduleCtl"),l=e("./C"),o=cc._decorator,c=o.ccclass,r=(o.property,function(){function e(){this._effectContainer=null,this._dictEffectPool={}}var r;return(r=e).prototype.init=function(e){this._effectContainer=e},e.prototype.preLoad=function(){for(var e=0;e<16;e++){var t=cc.instantiate(s.default.Instance.loadEffect(l.C.EffectName.fxCubeTuoWei)),n=cc.instantiate(s.default.Instance.loadEffect(l.C.EffectName.fxCubeClean)),o=cc.instantiate(s.default.Instance.loadEffect(l.C.EffectName.fxCleanLine)),a=cc.instantiate(s.default.Instance.loadEffect(l.C.EffectName.fxSkillFillCube)),i=cc.instantiate(s.default.Instance.loadEffect(l.C.EffectName.fxSkillFillHitCube));t.parent=this._effectContainer,n.parent=this._effectContainer,o.parent=this._effectContainer,a.parent=this._effectContainer,i.parent=this._effectContainer,t.position=cc.Vec2.ZERO,n.position=cc.Vec2.ZERO,o.position=cc.Vec2.ZERO,a.position=cc.Vec2.ZERO,i.position=cc.Vec2.ZERO,t.active=!1,n.active=!1,o.active=!1,a.active=!1,i.active=!1,r.Instance.remove(t),r.Instance.remove(n),r.Instance.remove(o),r.Instance.remove(a),r.Instance.remove(i)}},e.prototype.playEffect=function(e,t,n,o){void 0===o&&(o=this._effectContainer);var a=this.add(e,t);return a.parent=o,-1!=n&&i.default.Instance.setScheduleOnce(function(){r.Instance.remove(a)},n),a},e.prototype.add=function(e,t,n){void 0===n&&(n=this._effectContainer);var o=this.poolGet(e);return null==o&&(o=cc.instantiate(s.default.Instance.loadEffect(e))),o.active=!0,o.parent=n,o.setPosition(t),o.getComponent(a.default).play(),o},e.prototype.remove=function(e){this.poolPut(e)},e.prototype.poolPut=function(e){this._dictEffectPool.hasOwnProperty(e.name)||(this._dictEffectPool[e.name]=new cc.NodePool),this._dictEffectPool[e.name].put(e)},e.prototype.poolGet=function(e){return this._dictEffectPool.hasOwnProperty(e)&&0<this._dictEffectPool[e].size()?this._dictEffectPool[e].get():null},e.Instance=new r,e=r=__decorate([c],e)}());n.default=r,cc._RF.pop()},{"./C":"C","./Tools/FYEffectItem":"FYEffectItem","./Tools/FYResMgr":"FYResMgr","./Tools/FYScheduleCtl":"FYScheduleCtl"}],FYAudioCtl:[function(e,t,n){"use strict";cc._RF.push(t,"1c11fMZ5+NGqJjKmWa5by6S","FYAudioCtl"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arraySound=[],e.arrayMusic=[],e._bOpenSound=!0,e._bOpenMusic=!0,e._nPlayingMusic=-1,e}var n;return __extends(e,t),n=e,Object.defineProperty(e,"Instance",{get:function(){return n._instance},enumerable:!0,configurable:!0}),e.prototype.playSound=function(e){this.arraySound[e]&&this._bOpenSound&&(this.arraySound[e].setCurrentTime(0),this.arraySound[e].play())},e.prototype.playMusic=function(e){this._nPlayingMusic!=e&&(this.arrayMusic[this._nPlayingMusic]&&this.arrayMusic[this._nPlayingMusic].stop(),this.arrayMusic[e]&&this.arrayMusic[e].play(),this._nPlayingMusic=e)},e.prototype.rewindMusic=function(){this.arrayMusic[this._nPlayingMusic]&&(this.arrayMusic[this._nPlayingMusic].stop(),this.arrayMusic[this._nPlayingMusic].play())},e.prototype.pauseSound=function(e){this.arraySound[e]&&this.arraySound[e].pause()},e.prototype.pauseMusic=function(e){this.arrayMusic[e]&&this.arrayMusic[e].pause()},e.prototype.stopSound=function(e){this.arraySound[e]&&this.arraySound[e].stop()},e.prototype.stopMusic=function(e){this.arrayMusic[e]&&this.arrayMusic[e].stop()},e.prototype.changeSoundVolume=function(e){for(var t=0;t<this.arraySound.length;t++)this.arraySound[t]&&(this.arraySound[t].volume=e)},e.prototype.changeMusicVolume=function(e){for(var t=0;t<this.arrayMusic.length;t++)this.arrayMusic[t]&&(this.arrayMusic[t].volume=e,this.arrayMusic[t].play())},e.prototype.onLoad=function(){n._instance=this},e._instance=null,__decorate([i({type:Array(cc.AudioSource),displayName:"音效数组"})],e.prototype,"arraySound",void 0),__decorate([i({type:Array(cc.AudioSource),displayName:"音乐数组"})],e.prototype,"arrayMusic",void 0),e=n=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],FYBaseNode:[function(e,t,n){"use strict";cc._RF.push(t,"3e5b1ALxXhAGJHLj6QrQX2M","FYBaseNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addListener=function(){},t.prototype.removeListener=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener()},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],FYBaseUIPanel:[function(e,t,n){"use strict";cc._RF.push(t,"490dcBJXE5E16zU6g11Td3j","FYBaseUIPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./FYBaseNode"),a=e("./FYMessenger"),i=cc._decorator,r=i.ccclass,s=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Widget=null,e}return __extends(e,t),e.prototype.setActive=function(e){this.Widget&&(this.Widget.active=e)},e.prototype.getActive=function(){return this.Widget.active},e.prototype.addListener=function(){t.prototype.addListener.call(this),a.default.Instance.add(this.node.name,this.onShow,this)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this),a.default.Instance.remove(this.node.name,this.onShow,this)},e.prototype.onShow=function(e,t){cc.log("msgType = "+e+" param = "+t)},__decorate([s({type:cc.Node,displayName:"Widget节点"})],e.prototype,"Widget",void 0),e=__decorate([r],e)}(o.default);n.default=l,cc._RF.pop()},{"./FYBaseNode":"FYBaseNode","./FYMessenger":"FYMessenger"}],FYEffectControl:[function(e,t,n){"use strict";cc._RF.push(t,"7243cZGHglChod3JhCE9Gok","FYEffectControl"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.partical=null,e}return __extends(e,t),e.prototype.playPartical=function(){this.partical.node.active=!0,this.partical.resetSystem()},e.prototype.stopPartical=function(){this.partical.node.active=!1,this.partical.stopSystem()},e.prototype.start=function(){},__decorate([i({type:cc.ParticleSystem})],e.prototype,"partical",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],FYEffectItem:[function(e,t,n){"use strict";cc._RF.push(t,"0c656atI3BPwJrhEzYDcD7/","FYEffectItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listAnimation=[],e.listParticleSystem=[],e}return __extends(e,t),e.prototype.play=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!0,this.listAnimation[e].play();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!0,this.listParticleSystem[e].resetSystem()},e.prototype.stop=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!1,this.listAnimation[e].stop();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!1,this.listParticleSystem[e].stopSystem()},e.prototype.start=function(){},__decorate([i({type:Array(cc.Animation),displayName:"动作列表"})],e.prototype,"listAnimation",void 0),__decorate([i({type:Array(cc.ParticleSystem),displayName:"特效列表"})],e.prototype,"listParticleSystem",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],FYGlobalVarMgr:[function(e,t,n){"use strict";cc._RF.push(t,"71d0eOTwslMTpy8XiWviIZx","FYGlobalVarMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this._nodeCanvas=null,this._canvas=null,this._nodeBottom=null,this._nodeCenter=null,this._nodeTop=null,this._nDesignSize=cc.Size.ZERO}var t;return(t=e).prototype.reset=function(){this._nodeCanvas=null,this._canvas=null,this._nodeTop=null,this._nodeBottom=null,this._nodeCenter=null},Object.defineProperty(e.prototype,"NodeCanvas",{get:function(){return this._nodeCanvas||(this._nodeCanvas=this._nodeCanvas=cc.director.getScene().getChildByName("Canvas")),this._nodeCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Canvas",{get:function(){return this._canvas||(this._canvas=this.NodeCanvas.getComponent(cc.Canvas)),this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeBottom",{get:function(){return this._nodeBottom||(this._nodeBottom=this.NodeCanvas.getChildByName("Bottom")),this._nodeBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeCenter",{get:function(){return this._nodeCenter||(this._nodeCenter=this.NodeCanvas.getChildByName("Center")),this._nodeCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeTop",{get:function(){return this._nodeTop||(this._nodeTop=this.NodeCanvas.getChildByName("Top")),this._nodeTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DesignSize",{get:function(){return 0==this._nDesignSize.width&&0==this._nDesignSize.height&&(this._nDesignSize=this.NodeCanvas.getComponent(cc.Canvas).designResolution),this._nDesignSize},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],FYMessenger:[function(e,t,n){"use strict";cc._RF.push(t,"61a7eOT0OZAXK4lApqz4hd1","FYMessenger"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.listeners={}}return e.prototype.add=function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(new a(t,n))},e.prototype.remove=function(e,t,n){var o=this.listeners[e];if(o){for(var a=o.length,i=0;i<a;i++){if(o[i].compar(n)){o.splice(i,1);break}}0==o.length&&delete this.listeners[e]}},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.listeners[e];if(o)for(var a=o.length,i=0;i<a;i++){var r=o[i];r.notify.apply(r,[e].concat(t))}},e.Instance=new e,e}();n.default=o;var a=function(){function e(e,t){this.callback=null,this.context=null;this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.callback).call.apply(e,[this.context].concat(t))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],FYResMgr:[function(e,t,n){"use strict";cc._RF.push(t,"69c02vGOERDzbO8IDtkhlci","FYResMgr"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("./FYMessenger"),o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this.dictAtlas={},this.dictEffect={},this.dictSequenceFrame={},this.dictOther={}}var i;return(i=e).prototype.preLoadAltlas=function(){var a=this;cc.loader.loadResDir("atlas",cc.SpriteAtlas,function(e,t,n){r.default.Instance.send(i.MsgPreLoadAtlasProgress,e,t)},function(e,t){for(var n=0;n<t.length;n++)for(var o in t[n]._spriteFrames)a.dictAtlas[t[n]._spriteFrames[o]._name]=t[n]._spriteFrames[o];r.default.Instance.send(i.MsgPreLoadAtlasComplete)})},e.prototype.preLoadEffect=function(){var o=this;cc.loader.loadResDir("prefabs/Effect",cc.Prefab,function(e,t,n){r.default.Instance.send(i.MsgPreLoadEffectProgress,e,t)},function(e,t){for(var n=0;n<t.length;n++)o.dictEffect[t[n]._name]=t[n].data;r.default.Instance.send(i.MsgPreLoadEffectComplete)})},e.prototype.preLoadSequenceFrame=function(){var o=this;cc.loader.loadResDir("prefabs/SequenceFrame",cc.Prefab,function(e,t,n){r.default.Instance.send(i.MsgPreLoadSequenceFrameProgress,e,t)},function(e,t){for(var n=0;n<t.length;n++)o.dictSequenceFrame[t[n]._name]=t[n].data;r.default.Instance.send(i.MsgPreLoadSequenceFrameComplete)})},e.prototype.preLoadOther=function(){var o=this;cc.loader.loadResDir("prefabs/Other",cc.Prefab,function(e,t,n){r.default.Instance.send(i.MsgPreLoadOtherProgress,e,t)},function(e,t){for(var n=0;n<t.length;n++)o.dictOther[t[n]._name]=t[n].data;r.default.Instance.send(i.MsgPreLoadOtherComplete)})},e.prototype.loadSpriteFrame=function(e){return e in this.dictAtlas?this.dictAtlas[e]:null},e.prototype.loadEffect=function(e){return e in this.dictEffect?this.dictEffect[e]:null},e.prototype.loadSequenceFrame=function(e){return e in this.dictSequenceFrame?this.dictSequenceFrame[e]:null},e.prototype.loadOther=function(e){if(e in this.dictOther)return this.dictOther[e]},e.Instance=new i,e.MsgPreLoadAtlasProgress="PreLoadAtlasProgress",e.MsgPreLoadEffectProgress="MsgPreLoadEffectProgress",e.MsgPreLoadSequenceFrameProgress="MsgPreLoadSequenceFrameProgress",e.MsgPreLoadOtherProgress="MsgPreLoadOtherProgress",e.MsgPreLoadAtlasComplete="PreLoadAtlasComplete",e.MsgPreLoadEffectComplete="PreLoadEffectComplete",e.MsgPreLoadSequenceFrameComplete="MsgPreLoadSequenceFrameComplete",e.MsgPreLoadOtherComplete="MsgPreLoadOtherComplete",e.MsgPreLoadComplete="PreLoadComplete",e=i=__decorate([a],e)}());n.default=i,cc._RF.pop()},{"./FYMessenger":"FYMessenger"}],FYSDKMgr:[function(e,t,n){"use strict";cc._RF.push(t,"a4d77hfjeRLi69n5V71ufRy","FYSDKMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,e("./h5jssdk")),r=e("./FYAudioCtl"),s=e("../C"),l=function(){function e(){this.test={},this.test2={}}var o;return(o=e).prototype.hsdkInit=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.QQ_PLAY||i.H5SDK.init({qqappid:"",wxappid:"wx7022d5e904f02d74",gameVersion:s.C.getCurVersion()})},e.prototype.wxMd5Pipe=function(e){var t=e;return cc.loader.md5Pipe&&(t=cc.loader.md5Pipe.transformURL(t)),t},e.prototype.hsdkCheckLogin=function(e){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.QQ_PLAY||i.H5SDK.checkLogin(e)},e.prototype.hsdkShare=function(e){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.QQ_PLAY||i.H5SDK.share(e)},e.prototype.hsdkShareMessage=function(e){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.QQ_PLAY||i.H5SDK.shareMessage(e)},e.prototype.hsdkGetSessionInfo=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME||cc.sys.platform==cc.sys.QQ_PLAY)return i.H5SDK.getSessionInfo()},e.prototype.hsdkGetShareInfo=function(e){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.QQ_PLAY||i.H5SDK.getShareInfo(e)},e.prototype.hsdkReportData=function(e){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.QQ_PLAY||i.H5SDK.report(e)},e.prototype.saveLocalData=function(e,t){cc.sys.localStorage.setItem(e,t),console.log("--set---key-------value---",e,t)},e.prototype.loadLocalData=function(e,t){void 0===t&&(t="0");var n=cc.sys.localStorage.getItem(e);return console.log("--get---key, defaultValue-------value---",e,t,n,typeof n),n||t},e.prototype.saveLocalJsonData=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.prototype.loadLocalJsonData=function(e){return JSON.parse(cc.sys.localStorage.getItem(e)||JSON.stringify({}))},e.prototype.removeLocalData=function(e){cc.sys.localStorage.removeItem(e)},e.prototype.removeAllLocalData=function(){cc.sys.localStorage.clear()},e.prototype.wxGetFriendCloudStorage=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getFriendCloudStorage(e)},e.prototype.wxGetUserCloudStorage=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getUserCloudStorage(e)},e.prototype.wxGetUserInfo=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getUserInfo(e)},e.prototype.wxGetGroupCloudStorage=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getGroupCloudStorage(e)},e.prototype.wxGetSharedCanvas=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME)return wx.getSharedCanvas()},e.prototype.wxRemoveUserCloudStorage=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.removeUserCloudStorage(e)},e.prototype.wxPostMessage=function(e,t){(void 0===t&&(t=[]),cc.sys.platform==cc.sys.WECHAT_GAME)&&wx.getOpenDataContext().postMessage({req:e,data:t})},e.prototype.wxSetUserCloudStorage=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.setUserCloudStorage(e)},e.prototype.wxCreateGameClubButton=function(e){if(cc.sys.platform==cc.sys.WECHAT_GAME&&wx.createGameClubButton)return wx.createGameClubButton(e)},e.prototype.wxOnMessage=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.onMessage(e)},e.prototype.wxIsWx=function(){return cc.sys.platform==cc.sys.WECHAT_GAME},e.prototype.wxIsAds=function(){return!!this.wxIsWx()&&"2.0.4"<=wx.getSystemInfoSync().SDKVersion},e.prototype.wxCreateAd=function(e){if(this.wxIsWx&&this.wxIsAds)return wx.createRewardedVideoAd({adUnitId:e})},e.prototype.wxShowAd=function(t,e){var n=this.wxCreateAd(e);if(n){try{n.load().then(function(){n.show(),r.default.Instance.stopMusic(0),console.log("===广告加载成功==="),wx.hideToast()})}catch(e){wx.showToast({title:"广告加载失败!",icon:"loading"})}var o=function(e){console.log("------fysdk----播放回调-------",e),e&&e.isEnded||null==e?t&&t(!0):t&&t(!1),r.default.Instance.rewindMusic(),n.offClose(o)};n.onClose(o),n.onError(function(e){console.log("========广告加载失败===========",e),t&&t(!1),n.offClose(o),wx.showToast({title:"广告加载失败!",icon:"loading"})})}},e.prototype.wxCheckUpdate=function(){if(o.Instance.wxIsWx()&&"function"==typeof wx.getUpdateManager){var e=wx.getUpdateManager();e.onCheckForUpdate(function(e){console.log(e.hasUpdate)}),e.onUpdateReady(function(){e.applyUpdate()}),e.onUpdateFailed(function(){console.log("----下载失败")})}},e.prototype.cca_init=function(e,t,n,o){cocosAnalytics.init({appID:e,appSecret:t,channel:n,version:o})},e.prototype.cca_onPause=function(e){cocosAnalytics.onPause(e)},e.prototype.cca_onResume=function(e){cocosAnalytics.onResume(e)},e.prototype.cca_enableDebug=function(e){cocosAnalytics.enableDebug(e)},e.prototype.cca_loginStart=function(){cocosAnalytics.CAAccount.loginStart()},e.prototype.cca_loginSuccess=function(e){cocosAnalytics.CAAccount.loginSuccess({userID:e})},e.prototype.cca_loginFailed=function(){cocosAnalytics.CAAccount.loginFailed()},e.prototype.cca_logout=function(e){cocosAnalytics.CAAccount.logout({userID:e})},e.prototype.cca_setAccountType=function(e){cocosAnalytics.CAAccount.setAccountType(e)},e.prototype.cca_setAge=function(e){cocosAnalytics.CAAccount.setAge(e)},e.prototype.cca_setGender=function(e){cocosAnalytics.CAAccount.setGender(e)},e.prototype.cca_createRole=function(e,t,n,o,a){cocosAnalytics.CAAccount.createRole({roleID:e,userName:t,race:n,class:o,gameServer:a})},e.prototype.cca_setLevel=function(e){cocosAnalytics.CAAccount.setLevel(e)},e.prototype.cca_onEvent=function(e){cocosAnalytics.CAEvent.onEvent({eventName:e})},e.prototype.cca_onEventStart=function(e){cocosAnalytics.CAEvent.onEventStart({eventName:e})},e.prototype.cca_onEventEnd=function(e){cocosAnalytics.CAEvent.onEventEnd({eventName:e})},e.prototype.cca_payBegin=function(e,t,n,o,a){void 0===t&&(t="CNY"),void 0===n&&(n="未知"),void 0===o&&(o="未知"),void 0===a&&(a="未知"),cocosAnalytics.CAPayment.payBegin({amount:e,currencyType:t,payType:n,iapID:o,orderID:a})},e.prototype.cca_paySuccess=function(e,t,n,o,a){void 0===t&&(t="CNY"),void 0===n&&(n="未知"),void 0===o&&(o="未知"),void 0===a&&(a="未知"),cocosAnalytics.CAPayment.paySuccess({amount:e,currencyType:t,payType:n,iapID:o,orderID:a})},e.prototype.cca_payFailed=function(e,t,n,o,a){void 0===t&&(t="CNY"),void 0===n&&(n="未知"),void 0===o&&(o="未知"),void 0===a&&(a="未知"),cocosAnalytics.CAPayment.payFailed({amount:e,currencyType:t,payType:n,iapID:o,orderID:a})},e.prototype.cca_levelBegin=function(e){cocosAnalytics.CALevels.begin({level:e})},e.prototype.cca_levelComplete=function(e){cocosAnalytics.CALevels.complete({level:e})},e.prototype.cca_levelFailed=function(e,t){cocosAnalytics.CALevels.failed({level:e,reason:t})},e.prototype.cca_taskBegin=function(e,t){var n=cocosAnalytics.CATaskType.GuideLine;t==o.cca_Task_GuideLine?n=cocosAnalytics.CATaskType.GuideLine:t==o.cca_Task_MainLine?n=cocosAnalytics.CATaskType.MainLine:t==o.cca_Task_BranchLine?n=cocosAnalytics.CATaskType.BranchLine:t==o.cca_Task_Daily?n=cocosAnalytics.CATaskType.Daily:t==o.cca_Task_Activity?n=cocosAnalytics.CATaskType.Activity:t==o.cca_Task_Other&&(n=cocosAnalytics.CATaskType.Other),cocosAnalytics.CATask.begin({taskID:e,type:n})},e.prototype.cca_taskComplete=function(e){cocosAnalytics.CATask.complete({taskID:e})},e.prototype.cca_taskFailed=function(e,t){cocosAnalytics.CATask.failed({taskID:e,reason:t})},e.prototype.cca_itemBuy=function(e,t,n,o,a,i){cocosAnalytics.CAItem.buy({itemID:e,itemType:t,itemCount:n,VirtualCoin:o,VirtualType:a,consumePoint:i})},e.prototype.cca_itemGet=function(e,t,n,o){cocosAnalytics.CAItem.get({itemID:e,itemType:t,itemCount:n,reason:o})},e.prototype.cca_itemConsume=function(e,t,n,o){cocosAnalytics.CAItem.consume({itemID:e,itemType:t,itemCount:n,reason:o})},e.prototype.cca_setVirtualNum=function(e,t){cocosAnalytics.CAVirtual.setVirtualNum({type:e,count:t})},e.prototype.cca_getVirtual=function(e,t,n){cocosAnalytics.CAVirtual.get({type:e,count:t,reason:n})},e.prototype.cca_consumeVirtual=function(e,t,n){cocosAnalytics.CAVirtual.consume({type:e,count:t,reason:n})},e.Instance=new o,e.channel_WXMiniGame="160564",e.cca_Task_GuideLine=0,e.cca_Task_MainLine=1,e.cca_Task_BranchLine=2,e.cca_Task_Daily=3,e.cca_Task_Activity=4,e.cca_Task_Other=5,e=o=__decorate([a],e)}();n.default=l,cc._RF.pop()},{"../C":"C","./FYAudioCtl":"FYAudioCtl","./h5jssdk":"h5jssdk"}],FYScheduleCtl:[function(e,t,n){"use strict";cc._RF.push(t,"ad93830nspIwZhX4wuibyuF","FYScheduleCtl"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance},enumerable:!0,configurable:!0}),t.prototype.setSchedule=function(e,t,n,o){this.schedule(e,t,n,o)},t.prototype.setScheduleOnce=function(e,t){this.scheduleOnce(e,t)},t.prototype.onLoad=function(){n._instance=this},t._instance=null,t=n=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],FYSequenceFrameControl:[function(e,t,n){"use strict";cc._RF.push(t,"8b9a2RgcEFFtrfWmPqLXEPv","FYSequenceFrameControl"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arraySprite=[],e.interval=.1,e.delay=.1,e.playCount=-1,e.isAutoDestroy=!1,e._curIndex=0,e._curPlayCount=0,e._callback=null,e}return __extends(e,t),e.prototype.updateSprite=function(){if(this._curIndex++,this._curIndex>=this.arraySprite.length&&(this._curIndex=0)<this.playCount&&(this._curPlayCount++,this._curPlayCount==this.playCount))return this._callback&&this._callback(),this.stop(),void(this.isAutoDestroy&&(this.node.destroy(),this.destroy()));this._curIndex=this._curIndex%this.arraySprite.length;var e=(this._curIndex-1+this.arraySprite.length)%this.arraySprite.length;this.arraySprite[e].active=!1,this.arraySprite[this._curIndex%this.arraySprite.length].active=!0},e.prototype.stop=function(){this.unschedule(this.updateSprite)},e.prototype.getCurIndex=function(){return this._curIndex},e.prototype.setCurIndex=function(e){this._curIndex=e,this._curIndex=this._curIndex%this.arraySprite.length},e.prototype.start=function(){this.schedule(this.updateSprite,this.interval,cc.macro.REPEAT_FOREVER,this.delay)},__decorate([i({type:Array(cc.Node),displayName:"图片数组"})],e.prototype,"arraySprite",void 0),__decorate([i({type:cc.Float,displayName:"间隔时间"})],e.prototype,"interval",void 0),__decorate([i({type:cc.Float,displayName:"延迟时间"})],e.prototype,"delay",void 0),__decorate([i({type:cc.Integer,displayName:"播放次数"})],e.prototype,"playCount",void 0),__decorate([i({type:cc.Boolean,displayName:"是否自动删除"})],e.prototype,"isAutoDestroy",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],FYTweenMgr:[function(e,t,n){"use strict";cc._RF.push(t,"c5f894cQTtNrIw9965abunw","FYTweenMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.moveTo=function(e,t,n,o,a,i){if(void 0===a&&(a=0),e instanceof cc.Node){var r=cc.moveTo(t,n,o),s=cc.callFunc(function(e){i&&i()},this,0),l=cc.sequence(cc.delayTime(a),r,s);return e.runAction(l),l}return null},e.moveBy=function(e,t,n,o,a,i){if(void 0===a&&(a=0),e instanceof cc.Node){var r=cc.moveBy(t,n,o),s=cc.callFunc(function(e){i&&i()},this,0),l=cc.sequence(cc.delayTime(a),r,s);return e.runAction(l),l}return null},e.rotateBy=function(e,t,n,o,a){if(void 0===o&&(o=0),e instanceof cc.Node){var i=cc.rotateBy(t,n),r=cc.callFunc(function(e){a&&a()},this,0),s=cc.sequence(cc.delayTime(o),i,r);return e.runAction(s),s}return null},e.scaleTo=function(e,t,n,o,a,i){if(void 0===a&&(a=0),e instanceof cc.Node){var r=cc.scaleTo(t,n,o),s=cc.callFunc(function(e){i&&i()},this,0),l=cc.sequence(cc.delayTime(a),r,s);return e.runAction(l),l}return null},e.scaleBigAndSmall=function(e,t,n,o,a){if(void 0===n&&(n=0),void 0===o&&(o=!1),e instanceof cc.Node){var i=cc.scaleTo(t/2,1.1,1.1),r=cc.scaleTo(t/2,.9,.9),s=cc.callFunc(function(e){a&&a()},this,0),l=cc.sequence(cc.delayTime(n),i,r,s);return o&&l.repeatForever(),e.runAction(l),l}return null},e.waitBy=function(e,t,n){if(e instanceof cc.Node){var o=cc.fadeTo(t,e.opacity),a=cc.callFunc(function(e){n&&n()},this,0),i=cc.sequence(o,a);return e.runAction(i),i}return null},e.stopAllActions=function(e){e instanceof cc.Node&&e.stopAllActions()},e.stopAction=function(e,t){e instanceof cc.Node&&e.stopAction(t)},e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],FYUIMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2604aqnyTdJkYCkKucAU3P5","FYUIMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./FYMessenger"),r=e("./FYGlobalVarMgr"),s=e("./FYUtility"),l=e("./FYBaseUIPanel"),o=e("../C"),a=cc._decorator,c=a.ccclass,d=(a.property,function(){function e(){this._dictUIPrefab={},this._dictUIPanel={},this._panelDepth=0}var a;return(a=e).prototype.preLoad=function(){var o=this;cc.loader.loadResDir("prefabs/UI",cc.Prefab,function(e,t,n){i.default.Instance.send(a.MsgPreLoadUIProgress,e,t)},function(e,t){for(var n=0;n<t.length;n++)o._dictUIPrefab[t[n]._name]=t[n].data;i.default.Instance.send(a.MsgPreLoadUIComplete)})},e.prototype.getActiveState=function(e){if(this._dictUIPanel[e])return this._dictUIPanel[e].getActive()},e.prototype.preInstantiate=function(){this._dictUIPanel[o.C.UIPath.UIMainPanel]=cc.instantiate(this._dictUIPrefab[o.C.UIPath.UIMainPanel]).getComponent(l.default),this._dictUIPanel[o.C.UIPath.UIMainPanel].setActive(!1),this._dictUIPanel[o.C.UIPath.UISevenDayLoginPanel]=cc.instantiate(this._dictUIPrefab[o.C.UIPath.UISevenDayLoginPanel]).getComponent(l.default),this._dictUIPanel[o.C.UIPath.UISevenDayLoginPanel].setActive(!1),this._dictUIPanel[o.C.UIPath.UIReStorePanel]=cc.instantiate(this._dictUIPrefab[o.C.UIPath.UIReStorePanel]).getComponent(l.default),this._dictUIPanel[o.C.UIPath.UIReStorePanel].setActive(!1)},e.prototype.show=function(e,t){void 0===t&&(t=r.default.Instance.NodeCenter);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];t||(t=r.default.Instance.NodeCenter),this._dictUIPrefab[e]?(this._dictUIPanel[e]?(null==this._dictUIPanel[e].node.parent&&(this._dictUIPanel[e].node.parent=t,this._dictUIPanel[e].node.position=cc.Vec2.ZERO),this._dictUIPanel[e].setActive(!0)):this._dictUIPanel[e]=s.default.addChild(t,this._dictUIPrefab[e]).getComponent(l.default),cc.log(e),i.default.Instance.send(e,n)):cc.error(e+" is not prelaod")},e.prototype.hide=function(e){this._dictUIPanel[e]&&(this._dictUIPanel[e].setActive(!1),this._panelDepth--)},e.prototype.hideAll=function(){for(var e in this._dictUIPanel)this._dictUIPanel[e].setActive(!1);this._panelDepth=0},e.prototype.close=function(e){this._dictUIPanel[e]&&(this._dictUIPanel[e].node.destroy(),delete this._dictUIPanel[e],this._panelDepth--)},e.Instance=new a,e.MsgPreLoadUIProgress="PreLoadUIProgress",e.MsgPreLoadUIComplete="PreLoadUIComplete",e=a=__decorate([c],e)}());n.default=d,cc._RF.pop()},{"../C":"C","./FYBaseUIPanel":"FYBaseUIPanel","./FYGlobalVarMgr":"FYGlobalVarMgr","./FYMessenger":"FYMessenger","./FYUtility":"FYUtility"}],FYUserDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"4bf12223OBLEYRnr8XGQIwX","FYUserDataMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./C"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){this._gameMode=o.C.GameMode.A,this._putContainSize=new cc.Vec2(870,900),this._putContainCenter=cc.Vec2.ZERO,this.cubePool=new cc.NodePool,this.gridPool=new cc.NodePool,this.value=0,this.isRankUpdating=!1}var t;return(t=e).prototype.setGameMode=function(e){this._gameMode=e},e.prototype.getGameMode=function(){return this._gameMode},e.prototype.setPutContainCenter=function(e){this._putContainCenter=e},e.prototype.getPutContainCenter=function(){return this._putContainCenter},e.prototype.setPutContainSize=function(e){this._putContainSize=e},e.prototype.getPutContainSize=function(){return this._putContainSize},e.Instance=new t,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"./C":"C"}],FYUtility:[function(e,t,n){"use strict";cc._RF.push(t,"89d0b1gEwNHGL/lAt6LxF7n","FYUtility"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(){function e(){}var a;return(a=e).changeSpriteFrame=function(o,e,a){cc.loader.loadRes(e,cc.SpriteAtlas,function(e,t){if(t instanceof cc.SpriteAtlas){var n=t.getSpriteFrame(a);o.spriteFrame=n}})},e.getWXPos=function(e){var t=cc.winSize,n=cc.view.getFrameSize(),o=n.width/t.width,a=n.height/t.height;return new cc.Vec2(e.x*o,(t.height-e.y)*a)},e.getRandomValueDif=function(e,t,n){for(var o=new Array,a=n?t-e+1<n?t-e+1:n:1,i=e,r=0;i<=t;i++,r++)o[r]=i;var s=[];o.sort(function(){return.5-Math.random()});for(var l=0;l<a;l++){var c=Math.floor(Math.random()*o.length);s.push(o[c]);var d=o[c];o[c]=o[o.length-1],o[o.length-1]=d,o.pop()}return s},e.getRangeRandom=function(e,t){return a.getRandomValueDif(e,t,1)[0]},e.addChild=function(e,t,n,o){if(void 0===n&&(n=cc.Vec2.ZERO),void 0===o&&(o=!0),null==e||null==t)return cc.error("----------\x3e>>>>>>>>parent is undefined",null==e),void cc.error("----------\x3e>>>>>>>>child is undefined",null==t);cc.Vec2.ZERO;var a=cc.instantiate(t);return e.addChild(a),a.position=n,a.active=o,a},e.getCanvasWidth=function(){return cc.Canvas.instance.node.width},e.getCanvasHeight=function(){return cc.Canvas.instance.node.height},e.loadScene=function(e){cc.director.loadScene(e)},e.enablePhysicsSystem=function(e){cc.director.getPhysicsManager().enabled=e},e.enableCollisionSystem=function(e){cc.director.getCollisionManager().enabled=e},e.convertDateFromString=function(e){if(e){var t=e.split(" ")[0].split("/");return new Date(t[0],t[1]-1,t[2])}},e.getMonTimeByNowTime=function(){var e=new Date,t=e.getDay();return 0==t&&(t=7),e.setHours(0,0,0,0),new Date(e.getTime()-24*(t-1)*60*60*1e3).getTime()},e.isSameDay=function(e,t){void 0===t&&(t=Date.now());var n=Number(e),o=Number(t);if(n&&o){var a=new Date(n),i=new Date(o);return a.setHours(0,0,0,0)==i.setHours(0,0,0,0)}return!1},e.getDictionaryCount=function(e){var t=0;for(var n in e)t++;return t},e.formatTime=function(e){var t,n,o;e=parseInt(e);return o=parseInt(e%60),n=parseInt(e%3600/60),(t=parseInt(e/3600))?a.PadZero(t)+":"+a.PadZero(n)+":"+a.PadZero(o):a.PadZero(n)+":"+a.PadZero(o)},e.formatTime2=function(e){var t,n;e=parseInt(e);return n=parseInt(Math.floor((e-1e3*Math.floor(e/1e3))/10)),t=parseInt(e/1e3%60),parseInt(e/1e3%3600/60),parseInt(e/1e3/3600),a.PadZero(t)+":"+a.PadZero(n)},e.PadZero=function(e){return new RegExp(/^\d$/g).test(e)?"0"+e:e},e.getMonthWeek=function(){var e=new Date,t=(e.getFullYear(),e.getDay(),e.getDate(),e.getDay()),n=e.getDate();return Math.ceil((n+6-t)/7)},e=a=__decorate([i],e)}());n.default=a,cc._RF.pop()},{}],GameMain:[function(e,t,n){"use strict";cc._RF.push(t,"af292iZkvxImb8g29+oybeG","GameMain"),Object.defineProperty(n,"__esModule",{value:!0});var v=e("./CubeItem"),o=e("./CubeContainer"),w=e("./Tools/FYMessenger"),O=e("./Tools/FYUtility"),h=e("./GridItem"),Y=e("./RoleAnim"),a=e("./GuidanceMgr"),K=e("./Tools/FYSDKMgr"),T=e("./RoleConfig"),I=e("./FYUserDataMgr"),H=e("./Tools/FYAudioCtl"),R=e("./Tools/FYGlobalVarMgr"),J=e("./DailyLevelConfig"),i=e("./DailyViewMgr"),V=e("./C"),q=e("./Tools/FYUIMgr"),r=e("./Tools/FYResMgr"),_=e("./EffectMgr"),W=e("./Game/RoleMgr"),s=cc._decorator,l=s.ccclass,c=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animShakeAnim=null,e.nodeTop=null,e.nodeCenter=null,e.nodeBottom=null,e.sPutContainer=null,e.sEffectContainer=null,e.sGetContainer=null,e.nodeItem=null,e.nodePoint=null,e.sprSurpassFriend=null,e.nodeLoadRole=null,e.nodeRoleEffectPoint=null,e.btnPlayInRank=null,e.btnSeeGroupRank=null,e.rank=null,e.btnCloseRank=null,e._tex=null,e.FX_SkillCanSkillIdle=null,e.FX_RoleCanSkillFire=null,e.FX_RoleCanSkillFire2=null,e.FX_curLeftBorderEffect=null,e.FX_curRightBorderEffect=null,e.FX_nodeRoleFireRotateItem=null,e.nodeDailyContainer=null,e.nodeDailyView=null,e.nodeDailyViewMask=null,e.btnDailyViewLeft=null,e.btnDailyViewRight=null,e.nodeDailyStepRemain1=null,e.nodeDailyStepRemain2=null,e.nodeDailyAnswer=null,e.nodeDailyShareTips=null,e.arrayAnswerPoint={},e.arrayAnswerPos=[],e.dictAnswerPos={},e.btnBack=null,e.score=null,e.combo=null,e.maxScore=null,e.pauseManu=null,e.nodeRoleSkillCol=null,e.comboAni=null,e.sprComboAni=null,e.pointAni=null,e.animReadyGo=null,e.timeBg=null,e.timeLimitFiveSecond=null,e.sprEnergy=null,e.fx_EnergyProgess=null,e.labEnergy=null,e.goGuidaceNode=null,e.animGuidance=null,e.sprGuidance=null,e.nodeFinger=null,e.bInGuidance=!1,e._currGuidaceIdx=-1,e.nodeMaskBg=null,e.goTimerNode=null,e.goAddTimeLizi=null,e.sprFxAddTimeNode=null,e.sprFxAddTimeNode2=null,e.sprFxBlinkTimeNode=null,e.labTimer=null,e.goTimerNode2=null,e.sprTimeNode2_Fg=null,e.nodeTime2_Effect=null,e.nodeTimeEffectOffset=10,e.dictPropUseInGames={},e.dictPropShareInGames={},e.maskUseProp=null,e.bUsingProp=!1,e.btnPropHammer=null,e.btnPropSuperStar=null,e.labHammerNum=null,e.labSuperStarNum=null,e.nodeHammerAdd=null,e.nodeSuperStarAdd=null,e.actionFirstUseSuperStar=null,e.animPropHammer=null,e.bShowCanUseProp=!1,e.nodePropUseTips=null,e.labLevelTopTips=null,e.labTargetTopTips=null,e._nCurLevelTarget=0,e.animLevelArrive=null,e.labLevelArriveTips=null,e.labTargetArriveTips=null,e.animGameOver=null,e.sprOverResult=null,e.roleAnim=null,e.bShowAdvMenu=!1,e._curMode=V.C.GameMode.A,e._bStartTimeGame=!1,e._bPauseTimeGame=!1,e._addTime=30,e._remainTime=30,e.bBlinkInFiveSecond=!1,e._totalTime=30,e._combos=1,e._nowPoint=0,e._nowPointInRole=0,e._nRow=3,e._nColumn=3,e._nRandomCube=3,e._nRandomCubeTimes=0,e._nGetRow=1,e._nGetColumn=3,e._nStartEnergy=120,e._nGetPointRatio=10,e._nEveryLevelTarget=800,e._nCurrLastPoints=0,e._nCurrTotalPoints=0,e._nCurrEachPoints=0,e._nAddPoint=0,e._arrCubeType=[],e._arrCubeType1=[],e._arrCubeType2=["0_0","0_1","1_0","1_1","2_0","2_1","3_0","3_1","4_0","4_1","5_0","5_1","6_0","6_1","7_0","7_1"],e._arrayGetGridIndex=[0,1,2],e._arrayDailyRandomConfig={},e._currDailyRandomConfigIdx=-1,e._maxDailyRandomConfigIdx=-1,e._arrayDailyAnswerConfig={},e._currDailyViewConfigIdx=-1,e._dailyType=null,e._dailyNChallengeTime=-1,e._dailyDChallengeTime=-1,e.shareMode=null,e.shareId=null,e.playingBgName="",e._StartGaming=!1,e._EndDailyTimer=!1,e._bPlayingRoleShow=!1,e._bEffectSwitch=!0,e._bSurviveLimit=!1,e._bTestRestore=!1,e._bStarUpdateSub=!1,e.nodeBg=null,e.nodeScoreBg=null,e.bIsBackGround=!1,e._nCurrFillCount=0,e._listCleanCubes=[],e._listRestoreCleanCubes=[],e.bPlayingHammer=!1,e.limitSpriteWidth=666,e.rightOffsetX=30,e.downOffsetX=25,e.downOffsetY=-10,e.upOffsetX=10,e}return __extends(e,t),e.prototype.createPoint=function(){this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint)},e.prototype.getRandomTypeByRandomTimes=function(e){return 1<=e&&e<=3?this._arrCubeType.length-19:e<=6?this._arrCubeType.length-16:e<=10?this._arrCubeType.length-13:e<=15?this._arrCubeType.length-10:e<=20?this._arrCubeType.length-7:e<=25?this._arrCubeType.length-4:this._arrCubeType.length-1},e.prototype.getRandomTypeByRandomTimesInModeAdvance=function(e){return 1<=e&&e<=5?this._arrCubeType.length-19:e<=10?this._arrCubeType.length-16:e<=20?this._arrCubeType.length-13:e<=30?this._arrCubeType.length-10:e<=45?this._arrCubeType.length-7:this._arrCubeType.length-4},e.prototype.getRandomTypeByRandomTimesInModeSingle=function(e){return 1<=e&&e<=9?this._arrCubeType.length-19:e<=18?this._arrCubeType.length-16:e<=45?this._arrCubeType.length-13:e<=72?this._arrCubeType.length-10:e<=105?this._arrCubeType.length-7:e<=150?this._arrCubeType.length-4:this._arrCubeType.length-1},e.prototype.randomCube=function(h){if(void 0===h&&(h=!1),0==this.sGetContainer.getCubeNum()){this._nRandomCubeTimes++;var f=3==this._arrayGetGridIndex.length?this.getRandomTypeByRandomTimes(this._nRandomCubeTimes):this.getRandomTypeByRandomTimesInModeSingle(this._nRandomCubeTimes);this._curMode==V.C.GameMode.B&&(f=this.getRandomTypeByRandomTimesInModeAdvance(this._nRandomCubeTimes));var y=this.sPutContainer.getGridCanPutCubeSizeGroup(V.C.CubeItemSize.Length);cc.log("----------------dictCanPutCubeSizeGroup----------------:"+y);var e=O.default.getRandomValueDif(0,f,3==this._arrayGetGridIndex.length?3:1);cc.log(this._arrCubeType.length+"arrType: "+e.length),this.sGetContainer.createGrid(this._nGetRow,this._arrayGetGridIndex.length,this.nodePoint,this._arrayGetGridIndex,V.C.GridState.GetPanel),this.nodeRoleSkillCol.active&&w.default.Instance.send(V.C.MsgType.EnableGridMove,!1);for(var m=V.C.Width()/4,g=0,t=function(e){var t=O.default.getRangeRandom(0,y.length-1),n=parseInt(y[t]);if(1==n||3==n||5==n){cc.log("===================single=======================");var o=O.default.getRangeRandom(0,f),a=1==n?V.C.CubeItemSize.Small:3==n?V.C.CubeItemSize.Normal:V.C.CubeItemSize.Big;C.createNodeItem(e,o,a,h)}else if(9==n){cc.log("===================all=======================");var i=O.default.getRangeRandom(0,f),r=C._arrCubeType[i].split("_");o=Number(r[0]),a=Number(r[1]);g>C._arrayGetGridIndex.length-1&&(g-=C._arrayGetGridIndex.length);var s=null;(s=0<I.default.Instance.cubePool.size()?I.default.Instance.cubePool.get():cc.instantiate(C.nodeItem)).parent=C.sGetContainer.node;var l=s.getComponent(v.default);C._curMode==V.C.GameMode.B?l.node.scale=.8:l.node.scale=1,l.init(o,a,new cc.Vec2((g+1)*m-V.C.Width()/2,0)),s.active=!0,h&&(l.playUsePropAnimShow(),C.scheduleOnce(function(){var e=this.sEffectContainer.node.convertToNodeSpaceAR(s.convertToWorldSpaceAR(new cc.Vec2(0,0)));_.default.Instance.playEffect(V.C.EffectName.fxPropChange,e,5)},.06)),C.sGetContainer.putCubeByIndex(g,l)||I.default.Instance.cubePool.put(l.node)}else if(4==n){cc.log("===================double4=======================");var c=O.default.getRangeRandom(0,f),d=V.C.CubeItemSize.Small;if(C.createNodeItem(e,c,d,h),C.getDoubleCircleByRandomCubeTimes()){var u=O.default.getRangeRandom(0,f),p=V.C.CubeItemSize.Normal;C.createNodeItem(e,u,p,h)}}else if(6==n){cc.log("===================double6=======================");c=O.default.getRangeRandom(0,f),d=V.C.CubeItemSize.Small;if(C.createNodeItem(e,c,d,h),C.getDoubleCircleByRandomCubeTimes()){u=O.default.getRangeRandom(0,f),p=V.C.CubeItemSize.Big;C.createNodeItem(e,u,p,h)}}else if(8==n){cc.log("===================double8=======================");c=O.default.getRangeRandom(0,f),d=V.C.CubeItemSize.Normal;if(C.createNodeItem(e,c,d,h),C.getDoubleCircleByRandomCubeTimes()){u=O.default.getRangeRandom(0,f),p=V.C.CubeItemSize.Big;C.createNodeItem(e,u,p,h)}}},C=this,n=0;n<e.length;n++,g++)t(n)}},e.prototype.getDoubleCircleByRandomCubeTimes=function(){var e=!1,t=O.default.getRangeRandom(1,100);return this._nRandomCubeTimes<=6?e=!1:this._nRandomCubeTimes<=10?t<=20&&(e=!0):this._nRandomCubeTimes<=15?t<=35&&(e=!0):t<=50&&(e=!0),e},e.prototype.createNodeItem=function(e,t,n,o){void 0===o&&(o=!1);var a=this._arrCubeType[t].split("_"),i=Number(a[0]),r=V.C.Width()/4,s=null;(s=0<I.default.Instance.cubePool.size()?I.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sGetContainer.node;var l=s.getComponent(v.default);this._curMode==V.C.GameMode.B?l.node.scale=.8:l.node.scale=1,l.init(i,n,new cc.Vec2((e+1)*r-V.C.Width()/2,0)),s.active=!0,o&&(l.playUsePropAnimShow(),this.scheduleOnce(function(){var e=this.sEffectContainer.node.convertToNodeSpaceAR(s.convertToWorldSpaceAR(new cc.Vec2(0,0)));_.default.Instance.playEffect(V.C.EffectName.fxPropChange,e,5)},.06)),this.sGetContainer.putCubeByIndex(e,l)||I.default.Instance.cubePool.put(l.node)},e.prototype.createLevelByConfig=function(e){for(var t in e){var n=e[t],o=Math.floor(parseInt(t)/3),a=parseInt(t)%3,i=parseInt(n);cc.log("gridKey:"+o+" cubeKey:"+a+" color:"+i);var r=this.sPutContainer.getGridByIndex(o),s=this.sPutContainer.node.convertToNodeSpaceAR(r.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),l=Number(i),c=Number(a),d=null;(d=0<I.default.Instance.cubePool.size()?I.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sPutContainer.node;var u=d.getComponent(v.default);this._curMode==V.C.GameMode.B?u.node.scale=.8:u.node.scale=1,u.init(l,c,new cc.Vec2(s.x,s.y)),d.active=!0;this.sPutContainer.putCubeByIndex(o,u)}},e.prototype.createCubeByConfig=function(e){this.sGetContainer.createGrid(this._nGetRow,this._arrayGetGridIndex.length,this.nodePoint,this._arrayGetGridIndex,V.C.GridState.GetPanel);var t=V.C.Width()/4,n=0;for(var o in e){n++;var a=e[o],i=Math.floor(parseInt(o)/3),r=parseInt(o)%3,s=parseInt(a),l=Number(s),c=Number(r);n>this._arrayGetGridIndex.length-1&&(n-=this._arrayGetGridIndex.length);var d=null;(d=0<I.default.Instance.cubePool.size()?I.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sGetContainer.node;var u=d.getComponent(v.default);this._curMode==V.C.GameMode.B?u.node.scale=.8:u.node.scale=1,u.init(l,c,new cc.Vec2((i+1)*t-V.C.Width()/2,0)),d.active=!0,this.sGetContainer.putCubeByIndex(i,u)||I.default.Instance.cubePool.put(u.node)}},e.prototype.createAnswerByConfig=function(e){this.nodeDailyAnswer.active=!0;var t=this.nodeDailyAnswer.getChildByName("point");for(var n in e){0;var o=e[n].split("_"),a="lab"+(parseInt(n)+1).toString();this.nodeDailyAnswer.getChildByName(a).getComponent(cc.Label).string=o[0].toString();var i=parseInt(n),r=this.sGetContainer.getGridByIndex(i),s=this.sEffectContainer.node.convertToNodeSpaceAR(r.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),l=parseInt(o[1]),c=this.sPutContainer.getGridByIndex(l),d=this.sEffectContainer.node.convertToNodeSpaceAR(c.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.arrayAnswerPos[parseInt(o[0])-1]=i+"_"+l,this.dictAnswerPos[i]=i+"_"+l,this.arrayAnswerPoint[i]=[];for(var u=0;u<=10;u++){var p=s.x+(d.x-s.x)/10*u,h=s.y+(d.y-s.y)/10*u,f=O.default.addChild(this.sEffectContainer.node,t);f.position=new cc.Vec2(p,h),this.arrayAnswerPoint[i].push(f)}}},e.prototype.onHideGame=function(e){this.bIsBackGround||(this.bIsBackGround=!0,cc.log("切换后台",e),w.default.Instance.send(V.C.MsgType.GameHideOrShow,!1))},e.prototype.onShowGame=function(e){this.bIsBackGround&&(this.bIsBackGround=!1,cc.log("切换前台",e),w.default.Instance.send(V.C.MsgType.GameHideOrShow,!0))},e.prototype.onClickMask=function(){cc.log("--------------------------Click Mask Full !!!!!!!!!!!!!!!!!!!!"),this.bInGuidance&&w.default.Instance.send(V.C.MsgType.GuidanceCloseAnim)},e.prototype.onClickMaskDailyView=function(){this.sGetContainer.node.active=!0},e.prototype.onClickMaskUseProp=function(){console.log("================onClickMaskUseProp======================"),this.bUsingProp&&(this.maskUseProp.active=!1),this.bUsingProp=!1,this._bPauseTimeGame=!1,w.default.Instance.send(V.C.MsgType.EnableGridMove,!0),w.default.Instance.send(V.C.MsgType.EnableGridPropUse,!1)},e.prototype.onClickBack=function(){(!this.bUsingProp&&!this.nodeRoleSkillCol.active||this._bTestRestore)&&(this._bPauseTimeGame=!0,this.pauseManu.active=!0,this._bTestRestore&&this.saveGameSceneInfo())},e.prototype.onClickResumeGame=function(){this._bPauseTimeGame=!1,this.pauseManu.active=!1,w.default.Instance.send(V.C.MsgType.PlayClickAudio)},e.prototype.onClickReStartGame=function(){if(this.pauseManu.active=!1,null!=this.roleAnim){var e=K.default.Instance.loadLocalData(V.C.DataKey.userRoleId,"1");W.default.Instance.putRole(e.toString(),this.roleAnim.node),this.roleAnim=null}w.default.Instance.send(V.C.MsgType.StartGame,this._curMode,!0),this._curMode!=V.C.GameMode.E?(K.default.Instance.cca_levelFailed(V.C.getModeNameByType(this._curMode),"点击重新开始"),K.default.Instance.cca_onEvent(V.C.getModeNameByType(this._curMode)+V.C.ccaEventType.GameModeRePlay+"暂停菜单重玩")):0==this._dailyType?(K.default.Instance.cca_onEvent(V.C.ccaEventType.DailyNormalReplay+"暂停菜单重玩"),K.default.Instance.cca_levelFailed(V.C.ccaEventType.DailyNormal,"点击重新开始")):(K.default.Instance.cca_onEvent(V.C.ccaEventType.DailyDiffcultReplay+"暂停菜单重玩"),K.default.Instance.cca_levelFailed(V.C.ccaEventType.DailyDiffcult,"点击重新开始")),w.default.Instance.send(V.C.MsgType.PlayClickAudio)},e.prototype.onClickResult=function(){this.pauseManu.active=!1,this._StartGaming=!1,this.onResult(),this._curMode!=V.C.GameMode.E?K.default.Instance.cca_levelFailed(V.C.getModeNameByType(this._curMode),"点击直接结算"):0==this._dailyType?K.default.Instance.cca_levelFailed(V.C.ccaEventType.DailyNormal,"点击直接结算"):K.default.Instance.cca_levelFailed(V.C.ccaEventType.DailyDiffcult,"点击直接结算"),w.default.Instance.send(V.C.MsgType.PlayClickAudio),K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.HideSurpassFriend)},e.prototype.onClickUseHammer=function(){if(this._bPlayingRoleShow)console.log("================PlayingRoleShow======================");else if(this.bUsingProp)console.log("================onUsingProp======================");else if(this._bPauseTimeGame)console.log("================_bPauseTimeGame======================");else{console.log("================onClickUseHammer======================");var e=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnProp),t=this.dictPropUseInGames[V.C.PropType.kHammer],n=this.dictPropShareInGames[V.C.PropType.kHammer];if(null==e||null==e[V.C.PropType.kHammer]||0==parseInt(e[V.C.PropType.kHammer])){var o=this;o._bPauseTimeGame=!0,q.default.Instance.show(V.C.UIPath.UIPropGetPanel,R.default.Instance.NodeCenter,this._curMode,V.C.PropType.kHammer,t,n,function(){o._bPauseTimeGame=!1}.bind(this))}else{if(t<T.default.Instance.getPropInfoByPropId(V.C.PropType.kHammer).limit)this.onUseProp(V.C.PropType.kHammer);else{this.bInGuidance=!0,this.goGuidaceNode.active=!0,this.animGuidance.PlayBegin();O.default.changeSpriteFrame(this.sprGuidance,"atlas/common/common","guidance_propLimit"),this.nodeMaskBg.active=!0}}}},e.prototype.onClickUseSuperStar=function(){if(this._bPlayingRoleShow)console.log("================PlayingRoleShow======================");else if(this.bUsingProp)console.log("================onUsingProp======================");else if(this._bPauseTimeGame)console.log("================_bPauseTimeGame======================");else{console.log("================onClickUseSuperStar======================");var e=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnProp),t=this.dictPropUseInGames[V.C.PropType.kSuperStar],n=this.dictPropShareInGames[V.C.PropType.kSuperStar];if(null==e||null==e[V.C.PropType.kSuperStar]||0==parseInt(e[V.C.PropType.kSuperStar])){var o=this;o._bPauseTimeGame=!0,q.default.Instance.show(V.C.UIPath.UIPropGetPanel,R.default.Instance.NodeCenter,this._curMode,V.C.PropType.kSuperStar,t,n,function(){o._bPauseTimeGame=!1}.bind(this))}else{if(t<T.default.Instance.getPropInfoByPropId(V.C.PropType.kSuperStar).limit)this.onUseProp(V.C.PropType.kSuperStar);else{this.bInGuidance=!0,this.goGuidaceNode.active=!0,this.animGuidance.PlayBegin();O.default.changeSpriteFrame(this.sprGuidance,"atlas/common/common","guidance_propLimit"),this.nodeMaskBg.active=!0}}}},e.prototype.onClickBtnRequestHelp=function(){if(w.default.Instance.send(V.C.MsgType.PlayClickAudio),cc.sys.platform==cc.sys.WECHAT_GAME){var u=K.default.Instance.hsdkGetSessionInfo(),p=this,h=K.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share3.png");console.log("-----------分享路径：  ",h),K.default.Instance.hsdkShareMessage({shareInfo:{title:"这一关实在是太难了，求大神破解之法",imageUrl:h,gameScene:V.C.ShareState.DailyAssist,query:"form="+V.C.ShareState.DailyAssist+"&mode="+p._dailyType+"&id="+u.h5game_openid+"&time="+Date.now()},success:function(e){console.log("-----------每日助战分享成功",e,{title:"这一关实在是太难了，求大神破解之法",imageUrl:h,gameScene:V.C.ShareState.DailyAssist,query:"form="+V.C.ShareState.DailyAssist+"&mode="+p._dailyType+"&id="+u.h5game_openid+"&time="+Date.now()});var t=!1,n=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal);if(0==p._dailyType){null!=(o=n[V.C.DailyShareType.dailyNormalLose])&&0==o&&(n[V.C.DailyShareType.dailyNormalLose]=1,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal,n),t=!0),K.default.Instance.cca_onEvent(V.C.ccaEventType.DailyNormalAskHelpClick)}else{var o;null!=(o=n[V.C.DailyShareType.dailyDiffcutLose])&&0==o&&(n[V.C.DailyShareType.dailyDiffcutLose]=1,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal,n),t=!0);var a=parseInt(K.default.Instance.loadLocalJsonData(V.C.DataKey.DailyDiffcultAskHelpSteps));3<++a?a=-1:t=!0,K.default.Instance.saveLocalJsonData(V.C.DataKey.DailyDiffcultAskHelpSteps,a.toString()),K.default.Instance.cca_onEvent(V.C.ccaEventType.DailyDiffcultAskHelpClick)}if(console.log("-----------每日挑战求助成功,可以获得提示：",t),t){O.default.getMonthWeek();var i=new Date,r=i.getMonth()+1,s=i.getDate(),l=r.toString()+s.toString(),c=0==p._dailyType?J.default.Instance.getNormalLevelInfoByDays(l):J.default.Instance.getDiffcultLevelInfoByDays(l),d=0==p._dailyType?J.default.Instance.getNormalRandomInfoByDays(l):J.default.Instance.getDiffcultRandomInfoByDays(l);w.default.Instance.send(V.C.MsgType.onSetDailyConfigPath,p._dailyType,c,d),w.default.Instance.send(V.C.MsgType.StartGame,V.C.GameMode.E,!0)}}})}},e.prototype.onClickUseSkill=function(){this.bUsingProp||this.scheduleOnce(function(){console.log("======================roleFight========================="),w.default.Instance.send(V.C.MsgType.EnableGridMove,!1),null!=this.roleAnim&&this.roleAnim.playAnim(3),this._bEffectSwitch&&(this.FX_SkillCanSkillIdle.active=!1,this.FX_RoleCanSkillFire.active=!1,this.FX_RoleCanSkillFire2.node.active=!1,this.FX_nodeRoleFireRotateItem.stopAllActions()),this._bPauseTimeGame=!0,H.default.Instance.playSound(V.C.SoundType.RoleSkillUse);var e=K.default.Instance.loadLocalData(V.C.DataKey.userRoleId);K.default.Instance.cca_onEvent(V.C.getRoleNameByType(e.toString())+V.C.ccaEventType.RoleUseSkill)},.5)},e.prototype.onGePoint=function(e,t,n,o){void 0===o&&(o=!1),1<n&&(t=t-n+Math.floor(n/2));var a=Math.floor((.3*t*t+10*t-2)*(n+this._combos-1));if(o&&(a=Math.floor(4*t+60)),0==t&&(a=0),this._nCurrLastPoints=this._nowPoint,this._nowPoint=this._nowPoint+a,this._nowPointInRole+=a,this._curMode!=V.C.GameMode.E)if(250<=this._nowPointInRole&&this._nowPointInRole<500)null!=this.roleAnim&&this.roleAnim.playAnim(1);else if(500<=this._nowPointInRole&&this._nowPointInRole<800)cc.log("======================roleUp2========================="),null!=this.roleAnim&&this.roleAnim.playAnim(2);else if(800<=this._nowPointInRole){if(this._nowPointInRole=this._nowPointInRole-this._nEveryLevelTarget,this.nodeRoleSkillCol.active=!0,this._bEffectSwitch){this.FX_SkillCanSkillIdle.active=!0,this.FX_RoleCanSkillFire.active=!0,this.FX_RoleCanSkillFire2.node.active=!0,this.FX_RoleCanSkillFire2.play();var i=cc.rotateBy(2,360).repeatForever();this.FX_nodeRoleFireRotateItem.runAction(i)}this.onSkillFillGrids()}if(cc.log("---------------------\x3ethis.score.string :"+this._nowPoint),0<a&&(this._nCurrTotalPoints=0,this._nAddPoint=a,this._nCurrEachPoints=Math.ceil(a/20),this.unschedule(this.onCountDownPoints),this.schedule(this.onCountDownPoints,.05,20)),cc.sys.platform==cc.sys.WECHAT_GAME){var r=K.default.Instance.hsdkGetSessionInfo().h5game_openid,s=K.default.Instance.loadLocalData(V.C.DataKey.userRoleId),l=T.default.Instance.getRoleInfoByRoleId(s).point;null==l&&(l=0);var c=Math.floor(this._nowPoint*l/100),d=this._nowPoint+c;K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.UpdateSurpassFriend,[{openId:r},{point:d}]),this.updaetSubDomainCanvas()}},e.prototype.onCountDownPoints=function(){this._nCurrTotalPoints+=this._nCurrEachPoints,this._nCurrTotalPoints>=this._nAddPoint&&(this._nCurrTotalPoints=this._nAddPoint,this.score.string=this._nowPoint.toString(),this.unschedule(this.onCountDownPoints)),this.score.string=(this._nCurrTotalPoints+this._nCurrLastPoints).toString()},e.prototype.reduceRemainTime=function(){if(this._remainTime=this._remainTime+this._addTime,this._remainTime>this._totalTime&&(this._remainTime=this._totalTime),this.timeBg.fillRange=this.timeBg.fillRange+1/this._totalTime*this._addTime,this._curMode==V.C.GameMode.C&&null!=this.sprFxAddTimeNode&&null!=this.sprFxAddTimeNode2){this.sprFxAddTimeNode.node.removeAllChildren(),this.sprFxAddTimeNode.node.stopAllActions(),this.sprFxAddTimeNode.node.active=!0,this.sprFxAddTimeNode.node.color=new cc.Color(255,255,255,0);O.default.addChild(this.sprFxAddTimeNode.node,this.goAddTimeLizi);var e=cc.fadeTo(.3,255),t=cc.fadeTo(.2,255),n=cc.fadeTo(.5,0),o=cc.sequence(e,t,n);this.sprFxAddTimeNode.node.runAction(o),this.sprFxAddTimeNode2.node.removeAllChildren(),this.sprFxAddTimeNode2.node.stopAllActions(),this.sprFxAddTimeNode2.node.active=!0,this.sprFxAddTimeNode2.node.color=new cc.Color(121,210,252,0);var a=cc.fadeTo(.3,187),i=cc.fadeTo(.2,187),r=cc.fadeTo(.5,0),s=cc.sequence(a,i,r);this.sprFxAddTimeNode2.node.runAction(s)}this.sprTimeNode2_Fg.node.width=this._remainTime/this._totalTime*500,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-250+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y);this._totalTime,this._remainTime;5<this._remainTime&&this.bBlinkInFiveSecond&&(this.bBlinkInFiveSecond=!1,this.timeLimitFiveSecond.active=!1,this.timeLimitFiveSecond.stopAllActions(),this.sprFxBlinkTimeNode.active=!1,this.sprFxBlinkTimeNode.stopAllActions())},e.prototype.ChangeCombSpriteByCombTimes=function(e){if(1==e)this.comboAni.node.active=!1,this.comboAni.stop("combo");else if(e<=5){var t="comb"+(e-1).toString(),n=r.default.Instance.loadSpriteFrame(t);this.sprComboAni.spriteFrame=n,H.default.Instance.playSound(V.C.SoundType.Comb1+e-2)}else{n=r.default.Instance.loadSpriteFrame("comb5");this.sprComboAni.spriteFrame=n,H.default.Instance.playSound(V.C.SoundType.Comb5)}},e.prototype.onCanGetPoint=function(e,t,n){t?(this._combos=this._combos+n,this.combo.string=this._combos.toString(),this.combo.node.active=!0,this.ChangeCombSpriteByCombTimes(this._combos),this.comboAni.node.active=!0,this.comboAni.play("combo")):(this._combos=1,this.combo.string=this._combos.toString(),this.combo.node.active=!1,this.comboAni.node.active=!1,this.comboAni.stop("combo"))},e.prototype.onPlayClick=function(){H.default.Instance.playSound(V.C.SoundType.ClickBtn)},e.prototype.onPlayGameOverClick=function(){H.default.Instance.playSound(V.C.SoundType.GameOverBg)},e.prototype.onShowSkillShake=function(e){cc.log("======================roleFightShake========================="),this.animShakeAnim.play("roleFightshake")},e.prototype.onHideRank=function(e){this.rank.node.active=!1,K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.HideRank),w.default.Instance.send(V.C.MsgType.RefreshGameClubBtn,!0),this.animShakeAnim.node.active=!1,q.default.Instance.hideAll(),q.default.Instance.hide(V.C.UIPath.UIMainPanel),q.default.Instance.show(V.C.UIPath.UIMainPanel),this._StartGaming=!1,this._bStarUpdateSub=!1},e.prototype.onShowRankNode=function(e,t){this.rank.node.active=!0,t==V.C.ShareState.ToSeeGroup?(q.default.Instance.hide(V.C.UIPath.UIMainPanel),this.btnPlayInRank.active=!0,this.btnSeeGroupRank.active=!1):(this.btnPlayInRank.active=!1,this.btnSeeGroupRank.active=!0)},e.prototype.onClickGroupInRank=function(e){w.default.Instance.send(V.C.MsgType.PlayClickAudio);var t=K.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share1.png");console.log("-----------分享路径：  ",t),K.default.Instance.hsdkShareMessage({shareInfo:{title:"超魔性的消除小游戏，看看你排第几?",imageUrl:t,gameScene:V.C.ShareState.ToSeeGroup,query:"form="+V.C.ShareState.ToSeeGroup},success:function(e){console.log("-----------群排行分享成功",e)}})},e.prototype.callbackToNone=function(){},e.prototype.addListener=function(){if(this.nodeMaskBg.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this),this.maskUseProp.on(cc.Node.EventType.TOUCH_END,this.onClickMaskUseProp,this),this.nodeDailyViewMask.on(cc.Node.EventType.TOUCH_END,this.onClickMaskDailyView,this),this.rank.node.on(cc.Node.EventType.TOUCH_START,this.callbackToNone,this),this.rank.node.on(cc.Node.EventType.TOUCH_CANCEL,this.callbackToNone,this),this.rank.node.on(cc.Node.EventType.TOUCH_END,this.callbackToNone,this),this.rank.node.on(cc.Node.EventType.TOUCH_MOVE,this.callbackToNone,this),this.btnCloseRank.on(cc.Node.EventType.TOUCH_END,this.onHideRank,this),this.btnPlayInRank.on(cc.Node.EventType.TOUCH_END,this.onHideRank,this),this.btnSeeGroupRank.on(cc.Node.EventType.TOUCH_END,this.onClickGroupInRank,this),w.default.Instance.add(V.C.MsgType.ShowRankNode,this.onShowRankNode,this),w.default.Instance.add(V.C.MsgType.SaveShareInfo,this.onSaveShareInfo,this),w.default.Instance.add(V.C.MsgType.CubeItemTouchUp,this.onCubeItemTouchUp,this),w.default.Instance.add(V.C.MsgType.RefreshMoveCubePos,this.RefreshMoveCubePos,this),w.default.Instance.add(V.C.MsgType.CancelMoveCubePos,this.RefreshMoveCubePos,this),w.default.Instance.add(V.C.MsgType.GameOver,this.onGameOver,this),w.default.Instance.add(V.C.MsgType.ShowGameOver,this.onShowGameOver,this),w.default.Instance.add(V.C.MsgType.CubeEliminateOne,this.onCubeEliminateOne,this),w.default.Instance.add(V.C.MsgType.CubeEliminateThree,this.onCubeEliminateThree,this),w.default.Instance.add(V.C.MsgType.CubeItemTouchDown,this.onCubeItemTouchDown,this),w.default.Instance.add(V.C.MsgType.ShowEffectLine,this.onShowEffectLine,this),w.default.Instance.add(V.C.MsgType.GetPoint,this.onGePoint,this),w.default.Instance.add(V.C.MsgType.StartGame,this.onStartByMode,this),w.default.Instance.add(V.C.MsgType.CubeDownCanGetPoint,this.onCanGetPoint,this),w.default.Instance.add(V.C.MsgType.PlayClickAudio,this.onPlayClick,this),w.default.Instance.add(V.C.MsgType.PlayGameOverAudio,this.onPlayGameOverClick,this),w.default.Instance.add(V.C.MsgType.ShowSkillShake,this.onShowSkillShake,this),w.default.Instance.add(V.C.MsgType.ActiveGameMenu,this.onActiveGameMenu,this),w.default.Instance.add(V.C.MsgType.ShowGetPointEffect,this.onShowEnergyEffect,this),w.default.Instance.add(V.C.MsgType.ShowSkillBorderEffect,this.onShowBorderEffect,this),w.default.Instance.add(V.C.MsgType.onSetDailyConfigPath,this.onSetDailyConfigPath,this),w.default.Instance.add(V.C.MsgType.GuidanceCloseAnim,this.onCloseGuidanceAnim,this),w.default.Instance.add(V.C.MsgType.PropHammerTrigger,this.onPropHammerTrigger,this),w.default.Instance.add(V.C.MsgType.RefreshProp,this.updatePropNum,this),w.default.Instance.add(V.C.MsgType.GameShareGetPropAdd,this.addGamePropShareGet,this),w.default.Instance.add(V.C.MsgType.SkillTrigger,this.onUseSkill,this),cc.game.on(cc.game.EVENT_HIDE,this.onHideGame),cc.game.on(cc.game.EVENT_SHOW,this.onShowGame),cc.sys.platform==cc.sys.WECHAT_GAME){var t=K.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share1.png");K.default.Instance.hsdkShare({shareInfo:{title:"美味甜甜圈，今天你吃了吗？",imageUrl:t,query:""},success:function(e){console.log("------share---success-------",{title:"美味甜甜圈，今天你吃了吗？",imageUrl:t,query:""})},fail:function(e){}})}},e.prototype.removeListener=function(){this.btnCloseRank.off(cc.Node.EventType.TOUCH_END,this.onHideRank,this),this.nodeMaskBg.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this),this.maskUseProp.off(cc.Node.EventType.TOUCH_END,this.onClickMaskUseProp,this),this.nodeDailyViewMask.off(cc.Node.EventType.TOUCH_END,this.onClickMaskDailyView,this),w.default.Instance.remove(V.C.MsgType.SaveShareInfo,this.onSaveShareInfo,this),w.default.Instance.remove(V.C.MsgType.ShowRankNode,this.onShowRankNode,this),w.default.Instance.remove(V.C.MsgType.CubeItemTouchUp,this.onCubeItemTouchUp,this),w.default.Instance.remove(V.C.MsgType.RefreshMoveCubePos,this.RefreshMoveCubePos,this),w.default.Instance.remove(V.C.MsgType.CancelMoveCubePos,this.RefreshMoveCubePos,this),w.default.Instance.remove(V.C.MsgType.GameOver,this.onGameOver,this),w.default.Instance.remove(V.C.MsgType.ShowGameOver,this.onShowGameOver,this),w.default.Instance.remove(V.C.MsgType.CubeEliminateOne,this.onCubeEliminateOne,this),w.default.Instance.remove(V.C.MsgType.CubeEliminateThree,this.onCubeEliminateThree,this),w.default.Instance.remove(V.C.MsgType.CubeItemTouchDown,this.onCubeItemTouchDown,this),w.default.Instance.remove(V.C.MsgType.ShowEffectLine,this.onShowEffectLine,this),w.default.Instance.remove(V.C.MsgType.GetPoint,this.onGePoint,this),w.default.Instance.remove(V.C.MsgType.StartGame,this.onStartByMode,this),w.default.Instance.remove(V.C.MsgType.CubeDownCanGetPoint,this.onCanGetPoint,this),w.default.Instance.remove(V.C.MsgType.PlayClickAudio,this.onPlayClick,this),w.default.Instance.remove(V.C.MsgType.PlayGameOverAudio,this.onPlayGameOverClick,this),w.default.Instance.remove(V.C.MsgType.ShowSkillShake,this.onShowSkillShake,this),w.default.Instance.remove(V.C.MsgType.ActiveGameMenu,this.onActiveGameMenu,this),w.default.Instance.remove(V.C.MsgType.ShowGetPointEffect,this.onShowEnergyEffect,this),w.default.Instance.remove(V.C.MsgType.ShowSkillBorderEffect,this.onShowBorderEffect,this),w.default.Instance.remove(V.C.MsgType.onSetDailyConfigPath,this.onSetDailyConfigPath,this),w.default.Instance.remove(V.C.MsgType.SkillTrigger,this.onUseSkill,this),w.default.Instance.remove(V.C.MsgType.GuidanceCloseAnim,this.onCloseGuidanceAnim,this),w.default.Instance.remove(V.C.MsgType.PropHammerTrigger,this.onPropHammerTrigger,this),w.default.Instance.remove(V.C.MsgType.RefreshProp,this.updatePropNum,this),w.default.Instance.remove(V.C.MsgType.GameShareGetPropAdd,this.addGamePropShareGet,this),cc.game.off(cc.game.EVENT_HIDE,this.onHideGame),cc.game.off(cc.game.EVENT_SHOW,this.onShowGame),cc.sys.platform,cc.sys.WECHAT_GAME},e.prototype.isCanPut=function(){for(var e=this._nGetRow*this._nGetColumn,t=this._nRow*this._nColumn,n=this.sGetContainer.getGridHaveCubeSize(),o=this.sPutContainer.getGridCanPutCubeSize(),a=0;a<e;a++)for(var i=0;i<t;i++){var r=!0;if("000"==n[a])r=!1;else for(var s=0;s<V.C.CubeItemSize.Length;s++)"1"==n[a][s]&&("1"==o[i][s]||(r=!1));if(r)return!0}return!1},e.prototype.shakeScreen=function(){this.animShakeAnim.play(),this._curMode!=V.C.GameMode.B?this.scheduleOnce(function(){for(var e=0;e<9;e++){this.sPutContainer.getGridByIndex(e).node.getChildByName("ItemBg").getComponent(cc.Animation).play()}}.bind(this),.3):this.scheduleOnce(function(){for(var e in this.bgGridMode2.childrens){this.bgGridMode2.childrens[e].getComponent(cc.Animation).play()}},.3)},e.prototype.onCubeItemTouchUp=function(e,t){if(!(this._curMode==V.C.GameMode.C&&this._remainTime<=0)&&this._StartGaming&&t instanceof h.default){if(0<t.getCubeNum()){var n=t.getIndex(),o=this.sPutContainer.putCube(t);if(this._curMode==V.C.GameMode.E){if(o&&(this._maxDailyRandomConfigIdx--,this.nodeDailyStepRemain1.string=this._maxDailyRandomConfigIdx.toString(),this.nodeDailyStepRemain2.string=this._maxDailyRandomConfigIdx.toString(),this.nodeDailyAnswer.active)){var a=t.getIndex(),i=this.arrayAnswerPos.length-this._maxDailyRandomConfigIdx%3-1,r=this.arrayAnswerPos[i].split("_");if(parseInt(r[1])!=a||parseInt(r[0])!=n){for(var s in this.nodeDailyAnswer.active=!1,this.arrayAnswerPoint){var l=this.arrayAnswerPoint[s];for(var c in l){l[c].destroy()}}this.arrayAnswerPoint={}}else{var d=this.arrayAnswerPoint[n];for(var c in d){d[c].destroy()}}}if(0==this.sGetContainer.getCubeNum()){this._currDailyRandomConfigIdx++;var u=this._arrayDailyRandomConfig[this._currDailyRandomConfigIdx.toString()];if(null!=u){if(this.createCubeByConfig(u),this.nodeDailyAnswer.active){for(var s in this.arrayAnswerPoint){l=this.arrayAnswerPoint[s];for(var c in l){l[c].destroy()}}var p=parseInt(K.default.Instance.loadLocalJsonData(V.C.DataKey.DailyDiffcultAskHelpSteps));p>=this._currDailyRandomConfigIdx||-1==p?(this.arrayAnswerPoint={},this.createAnswerByConfig(this._arrayDailyAnswerConfig[this._currDailyRandomConfigIdx.toString()])):this.nodeDailyAnswer.active=!1}}else{if(0!=this.sPutContainer.getCubeNum())return void this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverDailyFail");this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverDailySuccess")}}else this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverNoSet"),H.default.Instance.playSound(V.C.SoundType.Put)}else this.bInGuidance?0==this.sGetContainer.getCubeNum()&&(console.log("=================onbInGuidanceNextStep=================="),this.onNextStep()):(this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverNoSet"),H.default.Instance.playSound(V.C.SoundType.Put))}this.onCheckShowPropTips()}},e.prototype.onCubeItemTouchDown=function(e,t){t instanceof h.default&&(H.default.Instance.playSound(V.C.SoundType.Put),w.default.Instance.send(V.C.MsgType.GuidanceCloseAnim))},e.prototype.RefreshMoveCubePos=function(e,t){if(this.nodeDailyAnswer.active){var n=t.getIndex();if(null!=this.dictAnswerPos[n])for(var o=this.dictAnswerPos[n].split("_"),a=(parseInt(o[1]),this.sGetContainer.getGridByIndex(n)),i=this.sEffectContainer.node.convertToNodeSpaceAR(a.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),r=parseInt(o[1]),s=this.sPutContainer.getGridByIndex(r),l=this.sEffectContainer.node.convertToNodeSpaceAR(s.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),c=this.arrayAnswerPoint[n],d=0;d<=10;d++){var u=i.x+(l.x-i.x)/10*d,p=i.y+(l.y-i.y)/10*d;c[d].position=new cc.Vec2(u,p)}}},e.prototype.onCheckShowPropTips=function(){if(this._curMode!=V.C.GameMode.E){for(var e=this._curMode==V.C.GameMode.B?32:18,t=this.sPutContainer.getGridTotalLength(),n=0,o=0;o<t;o++){var a=this.sPutContainer.getTotalGrid()[o].getCubeNum();if(0==a)return this.bShowCanUseProp=!1,void(this.nodePropUseTips.active=!1);n+=a}if(e<=n){var i=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnProp);if(null!=i){var r=parseInt(i[V.C.PropType.kHammer]),s=parseInt(i[V.C.PropType.kSuperStar]);0!=r||0!=s?(this.bShowCanUseProp=!0,this.nodePropUseTips.active=!0):(this.bShowCanUseProp=!1,this.nodePropUseTips.active=!1)}}else this.bShowCanUseProp=!1,this.nodePropUseTips.active=!1}},e.prototype.onCheckGameOver=function(){var e=!1;return this.nodeRoleSkillCol.active&&(this.onClickUseSkill(),e=!0),e},e.prototype.onShowGameOver=function(e,t){if(void 0===t&&(t=null),cc.log("strSpriteFrame:"+t),1!=this.onCheckGameOver()){if(this._StartGaming&&!this._bPauseTimeGame){if(this.nodeDailyAnswer.active){for(var n in this.nodeDailyAnswer.active=!1,this.arrayAnswerPoint){var o=this.arrayAnswerPoint[n];for(var a in o){o[a].destroy()}}this.arrayAnswerPoint={}}t=null==t?"txtGameOverNoSet":t,this._StartGaming=!1,this.nodeMaskBg.active=!0,this.animGameOver.node.active=!0;var i=r.default.Instance.loadSpriteFrame(t);this.sprOverResult.spriteFrame=i,this.animGameOver.stop(),this.animGameOver.play(),this.scheduleOnce(function(){w.default.Instance.send(V.C.MsgType.GameOver)},2)}}else cc.log("onCheckGameOver == true")},e.prototype.onGameOver=function(e){if(K.default.Instance.wxIsAds())if(this._curMode!=V.C.GameMode.E){if(this._bSurviveLimit)return this._StartGaming=!0,this.nodePropUseTips.active=!1,this.nodeMaskBg.active=!1,this.sPutContainer.clear(),this.sGetContainer.clear(),void(this._curMode==V.C.GameMode.A||this._curMode==V.C.GameMode.B||this._curMode==V.C.GameMode.D?this.randomCube():this._curMode==V.C.GameMode.C&&(this.randomCube(),this._remainTime+=20,this.sprTimeNode2_Fg.node.width=this._remainTime/this._totalTime*500,this.nodeTime2_Effect.active=!0,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-250+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y)));if(this.bShowAdvMenu)this.onResult();else{this.bShowAdvMenu=!0;var t=this;K.default.Instance.removeLocalData(V.C.JsonDataKey.gameSceneInfo),t._bPauseTimeGame=!0,q.default.Instance.show(V.C.UIPath.UIAdvPanel,R.default.Instance.NodeCenter,function(){t._StartGaming=!0,t._bPauseTimeGame=!1,t.nodePropUseTips.active=!1,t.nodeMaskBg.active=!1,t.sPutContainer.clear(),t.sGetContainer.clear(),t._curMode==V.C.GameMode.A||t._curMode==V.C.GameMode.B||t._curMode==V.C.GameMode.D?t.randomCube():t._curMode==V.C.GameMode.C&&(t.randomCube(),t._remainTime+=20,t.sprTimeNode2_Fg.node.width=t._remainTime/t._totalTime*500,t.nodeTime2_Effect.active=!0,t.nodeTime2_Effect.setPosition(t.sprTimeNode2_Fg.node.width-250+t.nodeTimeEffectOffset,t.nodeTime2_Effect.getPosition().y)),K.default.Instance.cca_onEvent(V.C.getModeNameByType(t._curMode)+V.C.ccaEventType.GameModeAdsView)},function(){t.onResult()})}}else this.onResult();else this.onResult()},e.prototype.onResult=function(){var e,t,n,o;this.nodeMaskBg.active=!1,this.nodePropUseTips.active=!1;var a=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.maxScoreByType),i=a[this._curMode];this._curMode==V.C.GameMode.C&&(this._bStartTimeGame=!1,this._bPauseTimeGame=!1,this.bBlinkInFiveSecond=!1,this.timeLimitFiveSecond.active=!1,this.timeLimitFiveSecond.stopAllActions(),this.sprFxBlinkTimeNode.active=!1,this.sprFxBlinkTimeNode.stopAllActions(),this.labTimer.string=O.default.formatTime2(0),0<this._remainTime&&(this.labTimer.string=O.default.formatTime2(1e3*this._remainTime)));var r=this._nowPoint;if(this.animGameOver.node.active=!1,this.nodeRoleSkillCol.active=!1,this.FX_SkillCanSkillIdle.active=!1,this.FX_RoleCanSkillFire.active=!1,this.FX_RoleCanSkillFire2.node.active=!1,this.FX_nodeRoleFireRotateItem.stopAllActions(),K.default.Instance.removeLocalData(V.C.JsonDataKey.gameSceneInfo),null!=this.roleAnim){var s=K.default.Instance.loadLocalData(V.C.DataKey.userRoleId,"1");W.default.Instance.putRole(s.toString(),this.roleAnim.node),this.roleAnim=null}if(this._curMode==V.C.GameMode.E){if(0==this.sPutContainer.getCubeNum()){if(cc.log("====================ModeE onGameOver Success===================="),0==this._dailyType){var l=K.default.Instance.loadLocalData(V.C.DataKey.DailyModeNFirstTime);if(0==parseInt(l)){var c=this._dailyNChallengeTime;if(q.default.Instance.show(V.C.UIPath.UIGameOverPanel,R.default.Instance.NodeCenter,this._curMode,r,r,!0,V.C.GameOverType.kNoSetCanPut,this._dailyType,c),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeNFirstTime,c),cc.sys.platform==cc.sys.WECHAT_GAME){var d=K.default.Instance.hsdkGetSessionInfo().h5game_openid;K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.PassDailyTime,[(e={},e.passTime=c,e),(t={},t.mode=0,t)])}var u=new Date;K.default.Instance.saveLocalData(V.C.DataKey.DailyModeNFirstSaveTimes,u.getTime()),K.default.Instance.cca_onEvent(V.C.ccaEventType.DailyNormalFirstPass),this._EndDailyTimer=!0}else q.default.Instance.show(V.C.UIPath.UIGameOverPanel,R.default.Instance.NodeCenter,this._curMode,r,r,!0,V.C.GameOverType.kNoSetCanPut,this._dailyType);var p=new Date;K.default.Instance.saveLocalData(V.C.DataKey.DailyModeNTimer,p.getTime()),K.default.Instance.cca_levelComplete(V.C.ccaEventType.DailyNormal),null!=(y=(f=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal))[V.C.DailyShareType.dailyNormalLose])&&1==y&&(f[V.C.DailyShareType.dailyNormalLose]=2,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal,f))}else{var h=K.default.Instance.loadLocalData(V.C.DataKey.DailyModeDFirstTime);if(cc.log("####################################firstDiffcult:"+h),0==parseInt(h)){c=this._dailyDChallengeTime;if(q.default.Instance.show(V.C.UIPath.UIGameOverPanel,R.default.Instance.NodeCenter,this._curMode,r,r,!0,V.C.GameOverType.kNoSetCanPut,this._dailyType,c),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeDFirstTime,c),cc.sys.platform==cc.sys.WECHAT_GAME){d=K.default.Instance.hsdkGetSessionInfo().h5game_openid;K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.PassDailyTime,[{passTime:c},{mode:1}])}u=new Date;cc.log("####################################DailyModeDFirstSaveTime:"+u.getTime()),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeDFirstSaveTime,u.getTime()),K.default.Instance.cca_onEvent(V.C.ccaEventType.DailyDiffcultFirstPass),this._EndDailyTimer=!0}else q.default.Instance.show(V.C.UIPath.UIGameOverPanel,R.default.Instance.NodeCenter,this._curMode,r,r,!0,V.C.GameOverType.kNoSetCanPut,this._dailyType);var f,y;p=new Date;K.default.Instance.saveLocalData(V.C.DataKey.DailyModeDTimer,p.getTime()),K.default.Instance.cca_levelComplete(V.C.ccaEventType.DailyDiffcult),null!=(y=(f=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal))[V.C.DailyShareType.dailyDiffcutLose])&&1==y&&(f[V.C.DailyShareType.dailyDiffcutLose]=2,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal,f))}var m=[V.C.DataKey.dailyNormalFirstTime,V.C.DataKey.dailyDiffcultFirstTime],g=K.default.Instance.loadLocalData(m[this._dailyType],"0");if(!O.default.isSameDay(g)&&(cc.sys.platform==cc.sys.WECHAT_GAME||cc.sys.platform==cc.sys.QQ_PLAY)){d=K.default.Instance.hsdkGetSessionInfo().h5game_openid;K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.SetPoint,[(n={},n.index=this._curMode,n.score=this._dailyType+1,n.openId=d,n)]),K.default.Instance.saveLocalData(m[this._dailyType],Date.now())}return console.log("------胜利了--------",this.shareId,this.shareMode),void(this.shareMode&&this.shareId&&K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.CompleteDailyAssist,[{mode:this.shareMode},{openId:this.shareId}]))}}else{var C=K.default.Instance.loadLocalData(V.C.DataKey.userRoleId),v=T.default.Instance.getRoleInfoByRoleId(C).point;null==v&&(v=0);var I=Math.floor(r*v/100),_=r+I;if(console.log("==point====nPointAdding======roleAddingPoint====curPoint=====",r,v,I,_),0<_&&K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.SetPoint,[(o={},o.index=this._curMode,o.score=_,o)]),i<_)return a[this._curMode]=_,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.maxScoreByType,a),q.default.Instance.show(V.C.UIPath.UIGameOverPanel,R.default.Instance.NodeCenter,this._curMode,r,r,!0,V.C.GameOverType.kNoSetCanPut),this._nowPoint=0,void K.default.Instance.cca_levelComplete(V.C.getModeNameByType(this._curMode))}console.log("====================onGameOver===================="),this._nowPoint=0,this._nowPointInRole=0,this.sprEnergy.fillRange=0,this.fx_EnergyProgess.active=!0,this.fx_EnergyProgess.scale=1,this.fx_EnergyProgess.rotation=0,this.labEnergy.string="0";var S=this._remainTime<=0?V.C.GameOverType.kTimeLimit:V.C.GameOverType.kNoSetCanPut;q.default.Instance.show(V.C.UIPath.UIGameOverPanel,R.default.Instance.NodeCenter,this._curMode,r,a[this._curMode],!1,S,this._dailyType),this._curMode!=V.C.GameMode.E?K.default.Instance.cca_levelComplete(V.C.getModeNameByType(this._curMode)):0==this._dailyType?K.default.Instance.cca_levelFailed(V.C.ccaEventType.DailyNormal,"游戏失败"):K.default.Instance.cca_levelFailed(V.C.ccaEventType.DailyDiffcult,"游戏失败")},e.prototype.onCubeEliminateOne=function(e,t,n){this.shakeScreen(),this.onShowEffectOne(V.C.MsgType.ShowEffectPoint,t,n),H.default.Instance.playSound(V.C.SoundType.Eliminate)},e.prototype.onShowEffectOne=function(e,t,n){var o=this.sPutContainer.getGridByIndex(t),a=this.sEffectContainer.node.convertToNodeSpaceAR(o.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));_.default.Instance.playEffect(V.C.EffectName.fxCleanSingleColor+n.toString(),a,1).zIndex=10},e.prototype.onCubeEliminateThree=function(e){this.shakeScreen(),H.default.Instance.playSound(V.C.SoundType.Eliminate)},e.prototype.onShowEffectLine=function(e,t,n){if(this._bEffectSwitch){var o=t.sort(),a=this.sPutContainer.getGridByIndex(o[o.length-1]),i=this.sPutContainer.getGridByIndex(o[0]),r=i.getWorldPos().x-a.getWorldPos().x,s=i.getWorldPos().y-a.getWorldPos().y,l=180*Math.atan2(r,s)/Math.PI,c=i.node.convertToNodeSpace(i.getWorldPos()),d=a.node.convertToNodeSpace(a.getWorldPos()),u=new cc.Vec2((d.x+c.x)/2,(d.y+c.y)/2),p=_.default.Instance.playEffect(V.C.EffectName.fxCleanLine,u,1);p.rotation=l;for(var h=0;h<p.childrenCount;h++){var f=p.getChildByName("p"+h);n[0]==h?f.active=!0:f.active=!1}for(var y=0;y<t.length;y++)for(var m=0;m<n.length;m++){var g=this.sPutContainer.getGridByIndex(t[y]),C=this.sEffectContainer.node.convertToNodeSpaceAR(g.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));_.default.Instance.playEffect(V.C.EffectName.fxCleanSingleColor+n[m].toString(),C,1).zIndex=10}}},e.prototype.onActiveGameMenu=function(e,t){this.animShakeAnim.node.active=t},e.prototype.onShowEnergyEffect=function(e,t,n){if(this._curMode!=V.C.GameMode.E)if(this._bEffectSwitch){var o=this.sEffectContainer.node.convertToNodeSpaceAR(t),a=_.default.Instance.playEffect(V.C.EffectName.fxCubeTuoWei,o,1),i=this.sEffectContainer.node.convertToNodeSpaceAR(this.sprEnergy.node.parent.convertToWorldSpaceAR(new cc.Vec2(-30,-10))),r=O.default.getRangeRandom(1,3),s=[cc.v2(200,0),cc.v2(300,250),i];2==r&&(s=[cc.v2(-200,0),cc.v2(-300,250),i]),3==r&&(s=[cc.v2(0,100),cc.v2(0,100),i]);var l=cc.bezierTo(.8,s),c=cc.sequence(l,cc.callFunc(function(){this.scheduleOnce(function(){if(n){_.default.Instance.playEffect(V.C.EffectName.fxCubeShouJi,i,1),this.sprEnergy.fillRange=.25*this._nowPointInRole/800,.25<this.sprEnergy.fillRange&&(this.sprEnergy.fillRange=.25),this.labEnergy.string=Math.floor(this._nowPointInRole/800*100).toString();var e=-this.sprEnergy.fillRange/.25*90;this.fx_EnergyProgess.rotation=e,.25==this.sprEnergy.fillRange&&(this.fx_EnergyProgess.active=!1)}},.1)}.bind(this),this));a.runAction(c)}else if(n){this.sprEnergy.fillRange=.25*this._nowPointInRole/800,.25<this.sprEnergy.fillRange&&(this.sprEnergy.fillRange=.25),this.labEnergy.string=Math.floor(this._nowPointInRole/800*100).toString();var d=-this.sprEnergy.fillRange/.25*90;this.fx_EnergyProgess.rotation=d,.25==this.sprEnergy.fillRange&&(this.fx_EnergyProgess.active=!1)}},e.prototype.onShowBorderEffect=function(e){if(null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect){this.FX_curLeftBorderEffect.node.active=!0,this.FX_curLeftBorderEffect.node.stopAllActions();var t=this.FX_curLeftBorderEffect.node.getChildByName("shouji_lizi").getComponent(cc.ParticleSystem);this.FX_curLeftBorderEffect.play(),t.resetSystem(),this.FX_curRightBorderEffect.node.active=!0,this.FX_curRightBorderEffect.node.stopAllActions();var n=this.FX_curRightBorderEffect.node.getChildByName("shouji_lizi").getComponent(cc.ParticleSystem);this.FX_curRightBorderEffect.play(),n.resetSystem()}},e.prototype.onSetDailyConfigPath=function(e,t,n,o){this._dailyType=t,this._dictDailyLevelInfo=n,this._listDailyRandomInfo=o},e.prototype.getDictionaryCount=function(e){var t=0;for(var n in e)t++;return t},e.prototype.checkRoleExpCard=function(){var e=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userRoleExpCard);if(null!=e&&0!=O.default.getDictionaryCount(e)){K.default.Instance.loadLocalData(V.C.DataKey.userRoleId,"1");for(var t=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnRole),n=new Date,o=0;o<V.C.getCurRoleCount();o++){var a=(o+1).toString();if(null!=e[a]){var i=e[a].duration,r=e[a].lastTime;i<=n.getTime()-r&&(console.log("体验卡角色:",a,"已经过期!!!!"),delete e[a],delete t[a.toString()],K.default.Instance.saveLocalData(V.C.DataKey.userRoleId,"1"))}}K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.userOwnRole,t),K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.userRoleExpCard,e)}},e.prototype.onStartByMode=function(e,t,n,o,a){void 0===a&&(a=!1),console.log("---!!!!!!!------=-=------",e,t,n,o,a),this.shareId=null,this.shareMode=null,this._bPauseTimeGame=!1,this._curMode=t,this.comboAni.node.setScale(0,0),this.animShakeAnim.node.active=!0,this._nRandomCubeTimes=0,this._nowPointInRole=0,this.bShowAdvMenu=!1,this.bShowCanUseProp=!1,this.checkRoleExpCard();var i=K.default.Instance.loadLocalData(V.C.DataKey.userRoleId,"1"),r=W.default.Instance.getRole(i.toString()),s=O.default.addChild(this.nodeCenter,r),l=this.nodeLoadRole.getSiblingIndex();for(var c in s.setSiblingIndex(l),this.roleAnim=s.getComponent(Y.default),this.roleAnim.SetEffectParent(this.nodeRoleEffectPoint),this.roleAnim.resetAnim(),this.roleAnim.cleanEffect(),V.C.PropType)this.dictPropUseInGames[V.C.PropType[c]]=0;for(var c in V.C.PropType)this.dictPropShareInGames[V.C.PropType[c]]=0;if(this.btnPropHammer.node.active=this._curMode!=V.C.GameMode.E,this.btnPropSuperStar.node.active=this._curMode!=V.C.GameMode.E,this.updatePropNum(),this.timeLimitFiveSecond.active=!1,this.timeLimitFiveSecond.stopAllActions(),this.sprFxBlinkTimeNode.active=!1,this.sprFxBlinkTimeNode.stopAllActions(),this.sprEnergy.node.parent.active=!0,this.sprEnergy.fillRange=0,this.fx_EnergyProgess.active=!0,this.fx_EnergyProgess.scale=1,this.fx_EnergyProgess.rotation=0,this.labEnergy.string="0",null!=this.roleAnim&&(this.roleAnim.node.active=!0),q.default.Instance.hideAll(),n){for(var c in this._bPlayingRoleShow=!0,null!=o||t==V.C.GameMode.E||a?null!=this.roleAnim&&(this.roleAnim.resetInIdle(),this.roleAnim.anim.play("roleIdle1")):(null!=this.roleAnim&&this.roleAnim.playShow(),this.scheduleOnce(function(){this._bPlayingRoleShow=!1}.bind(this),3)),this._StartGaming=!0,this.nodeRoleSkillCol.active=!1,this.FX_SkillCanSkillIdle.active=!1,this.FX_RoleCanSkillFire.active=!1,this.FX_RoleCanSkillFire2.node.active=!1,this.FX_nodeRoleFireRotateItem.stopAllActions(),this.animGameOver.node.active=!1,this.sPutContainer.clear(),this.sGetContainer.clear(),this.sPutContainer.clearGrid(),this.sGetContainer.clearGrid(),this._arrayGetGridIndex=[0,1,2],this._nowPoint=0,this._combos=1,this.combo.node.active=!1,this.pointAni.stop(),this.pointAni.node.scale=0,this.comboAni.stop(),this.comboAni.node.scale=0,this.animReadyGo.node.active=!1,this._arrCubeType=this._arrCubeType1,this._bStartTimeGame=!1,this._bPauseTimeGame=!1,this.goGuidaceNode.active=!1,this.nodeDailyContainer.active=!1,this._currGuidaceIdx=-1,this.goTimerNode.active=!1,this.goTimerNode2.active=!1,this.nodePropUseTips.active=!1,this.nodeDailyView.node.active=!1,this.nodeDailyShareTips.active=!1,this.nodeDailyAnswer.active=!1,this.arrayAnswerPoint){var d=this.arrayAnswerPoint[c];for(var u in d){d[u].destroy()}}this.arrayAnswerPoint={},this.labLevelTopTips.node.parent.active=!1;var p=(K.default.Instance.hsdkGetSessionInfo()||{}).h5game_openid;if(null!=o&&o){this.btnPropHammer.node.active=!1,this.btnPropSuperStar.node.active=!1;var h=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.maxScoreByType);if(null==h||0==O.default.getDictionaryCount(h)){h={};for(var f=0;f<V.C.GameMode.Length;f++)h[f]=0}K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.maxScoreByType,h);var y=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnRole);if(null==y||0==O.default.getDictionaryCount(y)){(y={})[1..toString()]=1,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.userOwnRole,y),0==K.default.Instance.loadLocalData(V.C.DataKey.userRoleId)&&K.default.Instance.saveLocalData(V.C.DataKey.userRoleId,1..toString())}this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);var m=this.sPutContainer.getTotalGrid();for(var c in m){var g=m[c];3!=parseInt(c)&&4!=parseInt(c)&&5!=parseInt(c)&&(g.node.active=!1)}this.btnBack.node.active=!1,this.bInGuidance=!0,this.score.string="0",this._nCurLevelTarget=1,this.labLevelTopTips.node.parent.active=!0,this.labLevelTopTips.string=this._nCurLevelTarget.toString(),this.labTargetTopTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString(),this.animLevelArrive.node.active=!0,this.animLevelArrive.stop(),this.animLevelArrive.play(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString(),this.scheduleOnce(function(){this.animLevelArrive.node.active=!1,this.goGuidaceNode.active=!0,this.onNextStep()},1.5),K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.ShowSurpassFriend,[{index:V.C.GameMode.A},{openId:p}]);return this.unschedule(this.updaetSubDomainCanvas),void this.schedule(this.updaetSubDomainCanvas,.2,10)}this._curMode!=V.C.GameMode.E&&K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.ShowSurpassFriend,[{index:t},{openId:p}]);this.unschedule(this.updaetSubDomainCanvas),this.schedule(this.updaetSubDomainCanvas,.2,10);var C=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.maxScoreByType);if(null!=C&&null!=C[t]){C[t];this.score.string=this._nowPoint.toString()}else this.score.string="0";if(t==V.C.GameMode.A)this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint),a||(this._nCurLevelTarget=1,this.labLevelTopTips.node.parent.active=!0,this.labLevelTopTips.string=this._nCurLevelTarget.toString(),this.labTargetTopTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString(),this.animLevelArrive.node.active=!0,this.animLevelArrive.stop(),this.animLevelArrive.play(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString(),this.scheduleOnce(function(){this.animLevelArrive.node.active=!1},1.5));else if(t==V.C.GameMode.B)this._nRow=4,this._nColumn=4,this._nGetRow=1,this._nGetColumn=3,this._arrCubeType=this._arrCubeType1,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint,[],V.C.GridState.CanPut,!0);else if(t==V.C.GameMode.C)this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint),this.sprFxAddTimeNode.node.removeAllChildren(),this.sprFxAddTimeNode.node.stopAllActions(),this.sprFxAddTimeNode2.node.removeAllChildren(),this.sprFxAddTimeNode2.node.stopAllActions(),this._bStartTimeGame=!1,this.bBlinkInFiveSecond=!1,this.goTimerNode2.active=!0,this._totalTime=60,this._bPauseTimeGame=!1,this.nodeTime2_Effect.active=!0,a||(this._remainTime=60,this.labTimer.string=O.default.formatTime2(1e3*this._remainTime),this.sprTimeNode2_Fg.node.width=500,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-250+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y),this.animReadyGo.node.active=!0,this.animReadyGo.play(),this.scheduleOnce(function(){this._bStartTimeGame=!0,this.animReadyGo.node.active=!1},1.5));else{if(t==V.C.GameMode.E){if(this.sprEnergy.node.parent.active=!1,null!=this.roleAnim&&(this.roleAnim.node.active=!1),this.nodeDailyContainer.active=!0,this.goTimerNode.active=!0,this.nodeDailyView.node.active=0!=this._dailyType,console.log("!!!!!!!!!!!!!!!!!!!每日挑战: ",this._dailyType),this._EndDailyTimer=!1,0==this._dailyType){var v=K.default.Instance.loadLocalData(V.C.DataKey.DailyModeNFirstTime);0!=parseInt(v)&&(this._EndDailyTimer=!0,cc.log("dailyNormalFirstPass:"+v),this.goTimerNode.active=!1);var I=K.default.Instance.loadLocalData(V.C.DataKey.DailyModeNTimer);if(cc.log("easeModeTimer:"+I),0==parseInt(I)){this._dailyNChallengeTime=0;var _=new Date;cc.log(_.getTime()),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeNTimer,_.getTime()),K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.DailyNStartTime)}else{var S=(D=(k=new Date).getTime())-I;if(0!=(M=Math.floor(S/864e5)))cc.log("deltaNormalTimer:"+S/1e3),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeNTimer,k.getTime()),this._dailyNChallengeTime=S/1e3;else{var T=D-I;this._dailyNChallengeTime=T/1e3}}this.labTimer.string=O.default.formatTime(this._dailyNChallengeTime)}else{var b=K.default.Instance.loadLocalData(V.C.DataKey.DailyModeDFirstTime);0!=parseInt(b)&&(this._EndDailyTimer=!0,cc.log("dailyDiffcultFirstPass:"+b),this.goTimerNode.active=!1);var P=K.default.Instance.loadLocalData(V.C.DataKey.DailyModeDTimer);if(cc.log("hardModeTimer:"+P),0==parseInt(P)){this._dailyDChallengeTime=0;_=new Date;cc.log(_.getTime()),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeDTimer,_.getTime()),K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.DailyDStartTime)}else{S=(D=(k=new Date).getTime())-P;var D,M=Math.floor(S/864e5);if(cc.log("deltaDays:"+M+" deltaTimer:"+S),0!=M)K.default.Instance.saveLocalData(V.C.DataKey.DailyModeDTimer,k.getTime()),this._dailyDChallengeTime=S/1e3;else{var w=D-P;this._dailyDChallengeTime=w/1e3}}this.labTimer.string=O.default.formatTime(this._dailyDChallengeTime)}this.score.string="0",this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);var R=this._dictDailyLevelInfo,G=this._listDailyRandomInfo;this._arrayDailyRandomConfig=G,this._currDailyRandomConfigIdx=1,this._maxDailyRandomConfigIdx=3*this.getDictionaryCount(G),this.nodeDailyStepRemain1.string=this._maxDailyRandomConfigIdx.toString(),this.nodeDailyStepRemain2.string=this._maxDailyRandomConfigIdx.toString();var N=G[1];this.createLevelByConfig(R),this.createCubeByConfig(N),0!=this._dailyType&&this.nodeDailyView.refreshCubeSet(this._arrayDailyRandomConfig);var A=0==this._dailyType?K.default.Instance.loadLocalData(V.C.DataKey.DailyModeNFirstTime):K.default.Instance.loadLocalData(V.C.DataKey.DailyModeDFirstTime);if(0==parseInt(A)){var k,L=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal),E=(O.default.getMonthWeek(),(k=new Date).getMonth()+1),x=k.getDate(),F=E.toString()+x.toString();if(1==E&&(F="0"+E.toString()+x.toString()),0==this._dailyType){var B=L[V.C.DailyShareType.dailyNormalLose];null!=B&&0==B&&(this.nodeDailyShareTips.active=!0),null!=B&&1==B&&(this._arrayDailyAnswerConfig=J.default.Instance.getNormalAnswerInfoByDays(F),this.createAnswerByConfig(this._arrayDailyAnswerConfig[this._currDailyRandomConfigIdx.toString()]))}else{parseInt(K.default.Instance.loadLocalJsonData(V.C.DataKey.DailyDiffcultAskHelpSteps));var U=L[V.C.DailyShareType.dailyDiffcutLose];null!=U&&0==U&&(this.nodeDailyShareTips.active=!0),null!=U&&1==U&&(this._arrayDailyAnswerConfig=J.default.Instance.getDiffcultAnswerInfoByDays(F),this.createAnswerByConfig(this._arrayDailyAnswerConfig[this._currDailyRandomConfigIdx.toString()]))}}return}this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=1,this._arrayGetGridIndex=[0],this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint)}this.randomCube(),t==V.C.GameMode.C&&H.default.Instance.playSound(V.C.SoundType.ReadyGo),H.default.Instance.playMusic(V.C.MusicType.MainBg),this._curMode!=V.C.GameMode.E?K.default.Instance.cca_levelBegin(V.C.getModeNameByType(this._curMode)):0==this._dailyType?K.default.Instance.cca_levelBegin(V.C.ccaEventType.DailyNormal):K.default.Instance.cca_levelBegin(V.C.ccaEventType.DailyDiffcult)}},e.prototype.saveGameSceneInfo=function(){var e={},t=new Date;if(e.time=t.getTime(),e.mode=this._curMode,e.score=this._nowPoint,e.level=this._nCurLevelTarget,e.cubeRandom=this._nRandomCubeTimes,e.comb=this._combos,e.roleScore=this._nowPointInRole,e.remain=this._remainTime,e.propUse=this.dictPropUseInGames,e.propShare=this.dictPropShareInGames,e.showAds=this.bShowAdvMenu?1:0,this.nodeRoleSkillCol.active&&0!=this._listRestoreCleanCubes.length){var n=[];for(var o in this._listRestoreCleanCubes){var a=this._listRestoreCleanCubes[o];n.push(a.getIndex())}e.skillInfo=n}var i={},r=this.sPutContainer.getTotalGrid();for(var o in r){var s=parseInt(o),l=r[o].getAllCubeItem();for(var c in l){parseInt(c);if(null!=(p=l[c]))i[(3*s+p.getCubeItemSize()).toString()]=p.getCubeItemType()}}console.log("dictLevelInfo:",i),e.levelInfo=i;var d={},u=this.sGetContainer.getTotalGrid();for(var o in u){s=parseInt(o),l=u[o].getAllCubeItem();for(var c in l){var p;parseInt(c);if(null!=(p=l[c]))d[(3*s+p.getCubeItemSize()).toString()]=p.getCubeItemType()}}console.log("dictRandomInfo:",d),e.randomInfo=d;var h=JSON.stringify(e);K.default.Instance.saveLocalData(V.C.JsonDataKey.gameSceneInfo,h)},e.prototype.reStoreGameScene=function(){var e=K.default.Instance.loadLocalData(V.C.JsonDataKey.gameSceneInfo);if(null!=e&&0!=parseInt(e)){var t=JSON.parse(e);if(0<O.default.getDictionaryCount(t)){var n=t.mode;n!=V.C.GameMode.E&&w.default.Instance.send(V.C.MsgType.StartGame,n,!0,!1,!0),this._nowPoint=t.score,this._nCurLevelTarget=t.level,this._nRandomCubeTimes=t.cubeRandom,this._combos=t.comb,this._nowPointInRole=t.roleScore,this._remainTime=t.remain;var o=t.levelInfo,a=t.randomInfo;this.dictPropUseInGames=t.propUse,this.dictPropShareInGames=t.propShare,this.bShowAdvMenu=1==parseInt(t.showAds),this._bPlayingRoleShow=!1,this.sGetContainer.clear(),this.sGetContainer.clearGrid(),this.score.string=this._nowPoint.toString(),w.default.Instance.send(V.C.MsgType.GetPoint,0,1,!1),this.sprEnergy.fillRange=.25*this._nowPointInRole/800,.25<this.sprEnergy.fillRange&&(this.sprEnergy.fillRange=.25),this.labEnergy.string=Math.floor(this._nowPointInRole/800*100).toString();var i=-this.sprEnergy.fillRange/.25*90;if(this.fx_EnergyProgess.rotation=i,.25==this.sprEnergy.fillRange&&(this.fx_EnergyProgess.active=!1),null!=this.roleAnim&&(250<=this._nowPointInRole&&this._nowPointInRole<500?this.roleAnim.playAnim(1):500<=this._nowPointInRole&&this._nowPointInRole<800&&this.roleAnim.playAnim(2)),n==V.C.GameMode.A&&(this.labLevelTopTips.node.parent.active=!0,this.labLevelTopTips.string=this._nCurLevelTarget.toString(),this.labTargetTopTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString()),n==V.C.GameMode.C&&(this.labTimer.string=O.default.formatTime2(1e3*this._remainTime),this.sprTimeNode2_Fg.node.width=this._remainTime/this._totalTime*500,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-250+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y),this._bStartTimeGame=!0),this.createLevelByConfig(o),this.createCubeByConfig(a),null!=t.skillInfo){var r=t.skillInfo;for(var s in r){var l=r[s];this.sPutContainer.getGridByIndex(l).destroyAllCube()}var c=3*r.length;w.default.Instance.send(V.C.MsgType.GetPoint,c,1,!0),this._nCurLevelTarget=Math.floor(this._nowPoint/800)+1,this.labLevelTopTips.string=this._nCurLevelTarget.toString(),this.labTargetTopTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString(),n==V.C.GameMode.C&&this.reduceRemainTime()}}}},e.prototype.onLoad=function(){V.C.setCanvas(this.getComponent(cc.Canvas)),cc.log("=================onLoad=================="),V.C.Width()<750&&(V.C.getCanvas().fitWidth=!0,V.C.getCanvas().fitHeight=!1,this.nodeBg.height=cc.director.getWinSize().height,console.log("this.nodeScoreBg.height = "+this.nodeScoreBg.height),this.nodeScoreBg.height+=(cc.director.getWinSize().height-1334)/2,console.log("after this.nodeScoreBg.height = "+this.nodeScoreBg.height)),K.default.Instance.wxIsWx()&&(sharedCanvas.height=2*cc.game.canvas.height,sharedCanvas.width=2*cc.game.canvas.width)},e.prototype.onNextStep=function(){if(-1==this._currGuidaceIdx&&(this._currGuidaceIdx=0),4<=this._currGuidaceIdx)this.goGuidaceNode.active=!1;else{this._currGuidaceIdx++,this.animGuidance.PlayBegin();var e=this.sPutContainer.getTotalGrid(),t={},n={};switch(this._currGuidaceIdx){case 1:t={3:3},this.createCubeByConfig(t),n={9:3,15:3},this.createLevelByConfig(n),this.playGuidanceFinger(1,4);break;case 2:for(var o in e){var a=e[o];4!=parseInt(o)&&(a.node.active=!1)}t={4:3},this.createCubeByConfig(t),n={12:3,14:3},this.createLevelByConfig(n),this.playGuidanceFinger(1,4);break;case 3:for(var o in e){a=e[o];1!=parseInt(o)&&3!=parseInt(o)&&4!=parseInt(o)&&5!=parseInt(o)&&7!=parseInt(o)?a.node.active=!1:a.node.active=!0}t={4:3},this.createCubeByConfig(t),n={4:3,10:3,16:3,22:3},this.createLevelByConfig(n),this.playGuidanceFinger(1,4);break;case 4:for(var o in e){(a=e[o]).node.active=!0}t={4:0,5:3},this.createCubeByConfig(t),n={2:1,5:3,7:0,10:3,16:3,20:0,22:3,26:1},this.createLevelByConfig(n),this.playGuidanceFinger(1,4)}var i="guidance_"+this._currGuidaceIdx;O.default.changeSpriteFrame(this.sprGuidance,"atlas/common/common",i)}},e.prototype.playGuidanceFinger=function(e,t){var n=this.sGetContainer.getGridByIndex(e),o=this.goGuidaceNode.convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),a=this.sPutContainer.getGridByIndex(t),i=this.goGuidaceNode.convertToNodeSpaceAR(a.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.nodeFinger.active=!0,this.nodeFinger.stopAllActions(),this.nodeFinger.position=o;var r=cc.moveTo(2,i),s=cc.sequence(r,cc.callFunc(function(){this.nodeFinger.position=o}.bind(this),this)).repeatForever();this.nodeFinger.runAction(s)},e.prototype.onCloseGuidanceAnim=function(){this.bInGuidance&&(console.log("===============onCloseGuidanceAnim================="),this.animGuidance.PlayEnd(4==this._currGuidaceIdx,this.actionFirstUseSuperStar),this.nodeFinger.active=!1,this.nodeFinger.stopAllActions(),this.nodeMaskBg.active&&(this.nodeMaskBg.active=!1,this.bInGuidance=!1))},e.prototype.doSkillAsCleanByNum=function(e,t,n){void 0===n&&(n=null);var u=t,o=this.sPutContainer.getTotalGrid(),p=[];for(var a in o)if(!o[a].isEmpty()){var i=o[a].getAllCubeItem();for(var r in i)if(i[r]){var s=i[r];if(null==n){var l=parseInt(r),c=3*parseInt(a)+l;p.push(c)}else if(n==s.getCubeItemSize()){l=parseInt(r),c=3*parseInt(a)+l;p.push(c)}}}if(0==p.length)return this._bPauseTimeGame=!1,w.default.Instance.send(V.C.MsgType.EnableGridMove,!0),void(null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect&&(this.FX_curLeftBorderEffect.node.active=!1,this.FX_curRightBorderEffect.node.active=!1,this.FX_curLeftBorderEffect.node.stopAllActions(),this.FX_curRightBorderEffect.node.stopAllActions()));var h=p.length>=e?e:p.length;console.log("listGridId:==================="+p+" ==============nCleanCount:"+h);var f=O.default.getRandomValueDif(0,p.length-1,h);console.log("arrClear:==================="+f);for(var d=function(l){var c=l;if(0!=l){var e=.01*O.default.getRangeRandom(0,50);y.scheduleOnce(function(){var e=this.sEffectContainer.node.convertToNodeSpaceAR(u),t=_.default.Instance.playEffect(V.C.EffectName.fxSkillBullet,e,.5),n=Math.floor(p[f[l]]/3),o=p[f[l]]%3;console.log("destory ==  "+p[f[l]]+" "+n+" "+o);var a=this.sPutContainer.getGridByIndex(n).node,i=this.sEffectContainer.node.convertToNodeSpaceAR(a.convertToWorldSpaceAR(new cc.Vec2(0,0))),r=cc.moveTo(.4,i),s=cc.sequence(r,cc.callFunc(function(){this.sPutContainer.destroyCube(n,o),this.skillCleanCubes(i,c==f.length-1,!1,!0)}.bind(this),this));t.runAction(s)},e)}else{var t=y.sEffectContainer.node.convertToNodeSpaceAR(u),n=_.default.Instance.playEffect(V.C.EffectName.fxSkillBullet,t,.5),o=Math.floor(p[f[l]]/3),a=p[f[l]]%3;console.log("destory == "+o);var i=y.sPutContainer.getGridByIndex(o).node,r=y.sEffectContainer.node.convertToNodeSpaceAR(i.convertToWorldSpaceAR(new cc.Vec2(0,0))),s=cc.moveTo(.4,r),d=cc.sequence(s,cc.callFunc(function(){this.sPutContainer.destroyCube(o,a),1==h?this.skillCleanCubes(r,c==f.length-1,!1,!0):this.skillCleanCubes(r,c==f.length-1,!0,!1)}.bind(y),y));n.runAction(d)}},y=this,m=0;m<f.length;m++)d(m)},e.prototype.doSkillRefreshRandomCube=function(){new cc.Vec2(0,0);if(null!=this.roleAnim)this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0));for(var e=this.sGetContainer.getGridTotalLength(),i=0,t=0;t<e;t++){0!=this.sGetContainer.getGridByIndex(t).getCubeNum()&&0}var n=function(e){for(var o=e,a=r.sGetContainer.getGridByIndex(o),t=function(e){var t=e;if(0!=a.getCubeNum()){i++;var n=r.sGetContainer.getCubeByIndex(o,t);if(null==n)return"continue";n.playUsePropAnimHide(),r.scheduleOnce(function(){if(this.sGetContainer.destroyCube(o,t)){var e=0==this.sGetContainer.getCubeNum();this.onCheckShowPropTips(),e&&(this._bPauseTimeGame=!1,console.log("----------------EnabledGridMove!!--------------------"),w.default.Instance.send(V.C.MsgType.EnableGridMove,!0),this.randomCube(!0),0==this.isCanPut()&&this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverNoSet"),this.scheduleOnce(function(){this.bUsingProp=!1},2))}},.2)}},n=0;n<V.C.CubeItemSize.Length;n++)t(n)},r=this;for(t=0;t<e;t++)n(t);0==i&&(this.bUsingProp=!1,this._bPauseTimeGame=!1,w.default.Instance.send(V.C.MsgType.EnableGridMove,!0),null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect&&(this.FX_curLeftBorderEffect.node.active=!1,this.FX_curRightBorderEffect.node.active=!1,this.FX_curLeftBorderEffect.node.stopAllActions(),this.FX_curRightBorderEffect.node.stopAllActions()),this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverNoSet"))},e.prototype.doSkillInRandomCleanLine=function(){var n=new cc.Vec2(0,0);null!=this.roleAnim&&(n=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var o=this.sPutContainer.getTotalGrid();function e(e,t){var n=0;if(0==t)n=o[e].getCubeNum()+o[e+1].getCubeNum()+o[e+2].getCubeNum();else if(1==t){n=o[e].getCubeNum()+o[e+3].getCubeNum()+o[e+6].getCubeNum()}else if(3==t){n=o[0].getCubeNum()+o[4].getCubeNum()+o[8].getCubeNum()}else if(4==t){n=o[2].getCubeNum()+o[4].getCubeNum()+o[6].getCubeNum()}return n}var t=[];t.push({start:"0_0",count:e(0,0)}),t.push({start:"3_0",count:e(3,0)}),t.push({start:"6_0",count:e(6,0)}),t.push({start:"0_1",count:e(0,1)}),t.push({start:"1_1",count:e(1,1)}),t.push({start:"2_1",count:e(2,1)}),t.push({start:"0_3",count:e(0,3)}),t.push({start:"0_4",count:e(0,4)}),t.sort(function(e,t){return t.count-e.count}),console.log(t,t[0]);var a=[],i=parseInt(t[0].start.split("_")[0]),r=parseInt(t[0].start.split("_")[1]);if(0==r){var s=O.default.getRandomValueDif(i,3+i-1,3);for(var l in s){var c=parseInt(s[l]),d=o[c];a.push(d)}}else if(1==r){s=[i,i+3,i+6];for(var l in s.sort(function(){return.5-Math.random()}),console.log(s),s){c=s[l],d=o[c];a.push(d)}}else if(3==r){s=[0,4,8];for(var l in s.sort(function(){return.5-Math.random()}),s){c=s[l],d=o[c];a.push(d)}}else if(4==r){s=[2,4,6];for(var l in s.sort(function(){return.5-Math.random()}),s){c=s[l],d=o[c];a.push(d)}}this._listRestoreCleanCubes=a,this.scheduleOnce(function(){for(var e in a){var t=a[e];this.flyEffectToAddCubes(n,t,3)}},1)},e.prototype.doSkillInRandomCleanCross=function(){var n=new cc.Vec2(0,0);null!=this.roleAnim&&(n=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));for(var e=this.sPutContainer.getTotalGrid(),t=0,o=null,a=null,i=0;i<this.sPutContainer.getGridTotalLength();i++){var r=e[i],s=r.getCubeNum(),l=[];l.push(r),null!=e[i-1]&&this.checkNodeInSameRow(i,i-1)&&(s+=e[i-1].getCubeNum(),l.push(e[i-1])),null!=e[i-2]&&this.checkNodeInSameRow(i,i-2)&&(s+=e[i-2].getCubeNum(),l.push(e[i-2])),null!=e[i+1]&&this.checkNodeInSameRow(i,i+1)&&(s+=e[i+1].getCubeNum(),l.push(e[i+1])),null!=e[i+2]&&this.checkNodeInSameRow(i,i+2)&&(s+=e[i+2].getCubeNum(),l.push(e[i+2])),null!=e[i-3]&&(s+=e[i-3].getCubeNum(),l.push(e[i-3])),null!=e[i-6]&&(s+=e[i-6].getCubeNum(),l.push(e[i-6])),null!=e[i+3]&&(s+=e[i+3].getCubeNum(),l.push(e[i+3])),null!=e[i+6]&&(s+=e[i+6].getCubeNum(),l.push(e[i+6])),t<s&&(t=s,o=r,a=l)}console.log(t,o.getIndex(),a),this._listRestoreCleanCubes=a;this.scheduleOnce(function(){for(var e in a){var t=a[e];this.flyEffectToAddCubes(n,t,5)}},1)},e.prototype.doSkillInRandomCleanX=function(){var n=new cc.Vec2(0,0);null!=this.roleAnim&&(n=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var e=this.sPutContainer.getTotalGrid(),o=[];o.push(e[0]),o.push(e[2]),o.push(e[4]),o.push(e[6]),o.push(e[8]),console.log(o),this._listRestoreCleanCubes=o;this.scheduleOnce(function(){for(var e in o){var t=o[e];this.flyEffectToAddCubes(n,t,5)}},1)},e.prototype.doSkillInRandomCleanSquare=function(e){var n=new cc.Vec2(0,0);null!=this.roleAnim&&(n=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var t=[],o=this.sPutContainer.getTotalGrid();function a(e){return o[e].getCubeNum()+o[e+1].getCubeNum()+o[e+3].getCubeNum()+o[e+4].getCubeNum()}t.push({start:0,count:a(0)}),t.push({start:1,count:a(1)}),t.push({start:3,count:a(3)}),t.push({start:4,count:a(4)}),t.sort(function(e,t){return t.count-e.count}),console.log(t,t[0]);var i=[],r=t[0].start,s=e*e;i.push(o[r]),i.push(o[r+1]),i.push(o[r+3]),i.push(o[r+4]),this._listRestoreCleanCubes=i,this.scheduleOnce(function(){for(var e in i){var t=i[e];this.flyEffectToAddCubes(n,t,s)}},1)},e.prototype.doSkillInCleanAllCubes=function(){var n=new cc.Vec2(0,0);null!=this.roleAnim&&(n=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)),console.log(n,this.roleAnim));var e=this.sPutContainer.getTotalGrid(),o=[],t=O.default.getRandomValueDif(0,this.sPutContainer.getGridTotalLength()-1,9);for(var a in console.log("arrRandomIdx   ",t),t){var i=e[parseInt(t[a])];o.push(i)}this._listRestoreCleanCubes=o,this.scheduleOnce(function(){for(var e in o){var t=o[e];this.flyEffectToAddCubes(n,t,this.sPutContainer.getGridTotalLength())}},1)},e.prototype.onSkillFillGrids=function(){this._nCurrFillCount=0,this._listCleanCubes=[],this._bPauseTimeGame=!0,w.default.Instance.send(V.C.MsgType.EnableGridMove,!1);var e=K.default.Instance.loadLocalData(V.C.DataKey.userRoleId,"1"),t=parseInt(e);switch(console.log("nCurrRoleIdx:"+t),t){case 1:this.doSkillInRandomCleanLine();break;case 2:this.doSkillInRandomCleanCross();break;case 3:this.doSkillInCleanAllCubes();break;case 4:this.doSkillInRandomCleanX();break;case 5:this.doSkillInRandomCleanSquare(2)}},e.prototype.onUseSkill=function(e,t){if(this.bUsingProp)this.scheduleOnce(function(){this.bUsingProp=!1},2);else{var n=K.default.Instance.loadLocalData(V.C.DataKey.userRoleId,"1"),l=(parseInt(n),0),c=new cc.Vec2(0,0);null!=this.roleAnim&&(c=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var d=[],o=function(e){l++;var t=u._listCleanCubes[e],n=(t.getIndex(),O.default.getRangeRandom(0,50),u.sEffectContainer.node.convertToNodeSpaceAR(c)),o=_.default.Instance.playEffect(V.C.EffectName.fxSkillBullet,n,-1);o.position=n;var a=u.sEffectContainer.node.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),i=t.node.convertToWorldSpaceAR(new cc.Vec2(0,0));d.push(i);var r=cc.moveTo(.4,a),s=cc.sequence(r,cc.callFunc(function(){_.default.Instance.remove(o),t.destroyAllCube();var e=this.node.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.skillCleanCubes(e,l==this._listCleanCubes.length,!1,!1)}.bind(u),u));o.runAction(s)},u=this;for(var a in this._listCleanCubes)o(a);this.scheduleOnce(function(){for(var e in this._curMode==V.C.GameMode.A&&this._nowPoint>=this._nCurLevelTarget*this._nEveryLevelTarget&&(console.log("===============showLevelTarget=================:"+this._nCurLevelTarget),this._nCurLevelTarget+=1,this.labLevelTopTips.string=this._nCurLevelTarget.toString(),this.labTargetTopTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString(),this.animLevelArrive.node.active=!0,this.animLevelArrive.stop(),this.animLevelArrive.play(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=(this._nCurLevelTarget*this._nEveryLevelTarget).toString(),this.scheduleOnce(function(){this.animLevelArrive.node.active=!1},1.5)),this._curMode==V.C.GameMode.C&&this.reduceRemainTime(),w.default.Instance.send(V.C.MsgType.GetPoint,3*this._listCleanCubes.length,1,!0),d){var t=d[e];w.default.Instance.send(V.C.MsgType.ShowGetPointEffect,t,!0)}this.bInGuidance&&(this.bInGuidance=!1,this.goGuidaceNode.active=!1,K.default.Instance.saveLocalData(V.C.DataKey.guidanceState,1),K.default.Instance.cca_onEvent(V.C.ccaEventType.NewbeeGuideFinish),this.btnBack.node.active=!0,this._bPlayingRoleShow=!1,this.btnPropHammer.node.active=this._curMode!=V.C.GameMode.E,this.btnPropSuperStar.node.active=this._curMode!=V.C.GameMode.E,this.updatePropNum(),this._curMode=V.C.GameMode.A,this.randomCube()),this.nodeRoleSkillCol.active=!1},1),this.sprEnergy.fillRange=0,this.fx_EnergyProgess.scale=1,this.fx_EnergyProgess.active=!0,this.fx_EnergyProgess.rotation=0,this.labEnergy.string="0"}},e.prototype.checkNodeInSameRow=function(e,t){return Math.floor(e/Math.sqrt(this.sPutContainer.getGridTotalLength()))==Math.floor(t/Math.sqrt(this.sPutContainer.getGridTotalLength()))},e.prototype.flyEffectToAddCubes=function(c,d,u){var p=d.getIndex(),h=3-d.getCubeNum();if(0!=h&&this._bEffectSwitch)for(var f=0,e=function(l){if(d.getCubeItem(l)instanceof v.default);else{t._nCurrFillCount++;var e=10<t._nCurrFillCount?.05*t._nCurrFillCount:.2*t._nCurrFillCount;t.scheduleOnce(function(){var e=this.sEffectContainer.node.convertToNodeSpaceAR(c),a=_.default.Instance.playEffect(V.C.EffectName.fxSkillFillCube,e,-1),t=a.getChildByName("tex");t.scale=0;var i=this.sEffectContainer.node.convertToNodeSpaceAR(d.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),n=180*cc.Vec2.UP.signAngle(new cc.Vec2(i.x-e.x,i.y-e.y))/Math.PI;a.rotation=n;var o=cc.moveTo(.4,i),r=cc.scaleTo(.2,1),s=cc.sequence(o,cc.callFunc(function(){_.default.Instance.remove(a),_.default.Instance.playEffect(V.C.EffectName.fxSkillFillHitCube,i,2),f++;var e=null;(e=0<I.default.Instance.cubePool.size()?I.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sPutContainer.node;var t=e.getComponent(v.default),n=this.sPutContainer.node.convertToNodeSpaceAR(d.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),o=O.default.getRangeRandom(0,V.C.CubeItemType.Length-1);t.init(o,l,new cc.Vec2(n.x,n.y)),t.node.scale=1,e.active=!0;this.sPutContainer.putCubeByIndex(p,t);f==h&&(this._listCleanCubes.push(d),this._listCleanCubes.length==u&&this.onClickUseSkill())}.bind(this),this));a.runAction(s),t.runAction(r)},e)}},t=this,n=0;n<V.C.CubeItemSize.Length;n++)e(n);else{cc.log("========================cubeNum full"+p);var o=10<this._nCurrFillCount?.05*this._nCurrFillCount:.2*this._nCurrFillCount;this.scheduleOnce(function(){this._listCleanCubes.push(d),this._listCleanCubes.length==u&&this.onClickUseSkill()},o)}},e.prototype.skillCleanCubes=function(e,n,o,a){(void 0===a&&(a=!1),this._bEffectSwitch)&&(H.default.Instance.playSound(V.C.SoundType.Eliminate),_.default.Instance.playEffect(V.C.EffectName.fxCubeClean,e,1.5).getComponent(cc.Animation).play());this.scheduleOnce(function(){if(o||(this._bPauseTimeGame=o,console.log("----------------EnabledGridMove!!--------------------"),w.default.Instance.send(V.C.MsgType.EnableGridMove,!0)),n&&null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect){this.FX_curLeftBorderEffect.stop();var e=cc.fadeTo(1,0);this.FX_curLeftBorderEffect.node.runAction(e),this.FX_curRightBorderEffect.stop();var t=cc.fadeTo(1,0);this.FX_curRightBorderEffect.node.runAction(t),this.scheduleOnce(function(){null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect&&(this.FX_curLeftBorderEffect.node.active=!1,this.FX_curRightBorderEffect.node.active=!1,this.FX_curLeftBorderEffect.node.stopAllActions(),this.FX_curRightBorderEffect.node.stopAllActions())},1.3)}this.onCheckShowPropTips(),a&&(this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverNoSet"))},1.3)},e.prototype.addGamePropShareGet=function(e,t){this.dictPropShareInGames[t]++},e.prototype.updatePropNum=function(){var e=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnProp);null!=e&&(null!=e[V.C.PropType.kHammer]&&(this.labHammerNum.string=e[V.C.PropType.kHammer]),null!=e[V.C.PropType.kSuperStar]&&(this.labSuperStarNum.string=e[V.C.PropType.kSuperStar]),this.nodeHammerAdd.active=0==parseInt(e[V.C.PropType.kHammer]),this.nodeSuperStarAdd.active=0==parseInt(e[V.C.PropType.kSuperStar]))},e.prototype.onUseProp=function(e){console.log("onUseProp:",e),w.default.Instance.send(V.C.MsgType.EnableGridMove,!1),this.bUsingProp=!0;var t=e==V.C.PropType.kHammer?V.C.DataKey.PropHammerFirstUse:V.C.DataKey.PropSuperStarFirstUse,n=K.default.Instance.loadLocalData(t);if(0==parseInt(n)){this.bInGuidance=!0,this.goGuidaceNode.active=!0,this.animGuidance.PlayBegin(),K.default.Instance.saveLocalData(t,1);var o=e==V.C.PropType.kHammer?"guidance_prop1":"guidance_prop2";if(O.default.changeSpriteFrame(this.sprGuidance,"atlas/common/common",o),this.nodeMaskBg.active=!0,e==V.C.PropType.kSuperStar){var a=this;this.actionFirstUseSuperStar=function(){a.onPropSuperStarTrigger()}}else null!=this.actionFirstUseSuperStar&&(this.actionFirstUseSuperStar=null)}else null!=this.actionFirstUseSuperStar&&(this.actionFirstUseSuperStar=null);e==V.C.PropType.kHammer?(w.default.Instance.send(V.C.MsgType.EnableGridPropUse,!0),this._bPauseTimeGame=!0,this.maskUseProp.active=!0):e==V.C.PropType.kSuperStar&&1==parseInt(n)&&this.onPropSuperStarTrigger()},e.prototype.onPropHammerTrigger=function(e,t){if(!this.bPlayingHammer)if(t instanceof h.default)if(0<t.getCubeNum()){var n=this.node.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.animPropHammer.node.position=new cc.Vec2(n.x+20,n.y+40),this.animPropHammer.node.active=!0,this.animPropHammer.stop(),this.animPropHammer.play(),this.bPlayingHammer=!0,this.scheduleOnce(function(){this.animPropHammer.node.active=!1,H.default.Instance.playSound(V.C.SoundType.Eliminate),_.default.Instance.playEffect(V.C.EffectName.fxCubeClean,new cc.Vec2(n.x,n.y),1.5).getComponent(cc.Animation).play(),t.destroyAllCube(),this.scheduleOnce(function(){w.default.Instance.send(V.C.MsgType.EnableGridMove,!0),w.default.Instance.send(V.C.MsgType.EnableGridPropUse,!1),this.dictPropUseInGames[V.C.PropType.kHammer]++;var e=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnProp),t=parseInt(e[V.C.PropType.kHammer]);t--,e[V.C.PropType.kHammer]=t,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.userOwnProp,e),this.updatePropNum(),this.onCheckShowPropTips(),this.onClickMaskUseProp(),this.bPlayingHammer=!1,this.bUsingProp=!1,this._bPauseTimeGame=!1,0==this.sGetContainer.getCubeNum()&&(this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverNoSet")),K.default.Instance.cca_itemConsume(V.C.getPropItemID(V.C.PropType.kHammer),V.C.PropType.kHammer,1,"使用道具"),K.default.Instance.cca_onEvent(V.C.getModeNameByType(this._curMode)+V.C.ccaEventType.PropUseInMode+V.C.getPropItemID(V.C.PropType.kHammer))}.bind(this),1)}.bind(this),.5)}else this.maskUseProp.active=!1,this.bUsingProp=!1,this._bPauseTimeGame=!1,w.default.Instance.send(V.C.MsgType.EnableGridMove,!0),w.default.Instance.send(V.C.MsgType.EnableGridPropUse,!1);else this.maskUseProp.active=!1,this.bUsingProp=!1,this._bPauseTimeGame=!1,w.default.Instance.send(V.C.MsgType.EnableGridMove,!0),w.default.Instance.send(V.C.MsgType.EnableGridPropUse,!1)},e.prototype.onPropSuperStarTrigger=function(){this.dictPropUseInGames[V.C.PropType.kSuperStar]++;var e=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnProp),t=parseInt(e[V.C.PropType.kSuperStar]);t--,e[V.C.PropType.kSuperStar]=t,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.userOwnProp,e),this.updatePropNum(),this.doSkillRefreshRandomCube(),console.log("---------------onPropSuperStarTrigger---------------",this.nodeRoleSkillCol.active,this.roleAnim),K.default.Instance.cca_itemConsume(V.C.getPropItemID(V.C.PropType.kSuperStar),V.C.PropType.kSuperStar,1,"使用道具"),K.default.Instance.cca_onEvent(V.C.getModeNameByType(this._curMode)+V.C.ccaEventType.PropUseInMode+V.C.getPropItemID(V.C.PropType.kSuperStar))},e.prototype.onSaveShareInfo=function(e,t,n){console.log("-------onSaveShareInfo---------------------",e,t,n),this.shareMode=t,this.shareId=n},e.prototype.onEnable=function(){this.scheduleOnce(function(){this.addListener();var h=this,f=!1,y=!1,e=!1,t=K.default.Instance.loadLocalData(V.C.DataKey.WeekRefreshScoreTimes),n=O.default.getMonTimeByNowTime();(0==parseInt(t)||0!=parseInt(t)&&t!=n)&&(cc.log("on Reset weekRefreshTimes!!!!"),e=!0,K.default.Instance.removeLocalData(V.C.JsonDataKey.maxScoreByType),K.default.Instance.saveLocalData(V.C.DataKey.WeekRefreshScoreTimes,n));var o=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.maxScoreByType);if(null==o||0==O.default.getDictionaryCount(o)||e){o={};for(var a=0;a<V.C.GameMode.Length;a++)o[a]=0}K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.maxScoreByType,o);var i=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal);if(null==i||0==O.default.getDictionaryCount(i)){i={};for(a=0;a<V.C.DailyShareType.Length;a++)i[a]=0;K.default.Instance.saveLocalJsonData(V.C.DataKey.DailyDiffcultAskHelpSteps,"0")}K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal,i);var r=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnRole);if(null==r||0==O.default.getDictionaryCount(r)){(r={})[1..toString()]=1,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.userOwnRole,r),0==parseInt(K.default.Instance.loadLocalData(V.C.DataKey.userRoleId))&&(K.default.Instance.saveLocalData(V.C.DataKey.userRoleId,1..toString()),K.default.Instance.cca_onEvent(V.C.getRoleNameByType(1..toString())+V.C.ccaEventType.RoleGet),K.default.Instance.cca_onEvent(V.C.getRoleNameByType(1..toString())+V.C.ccaEventType.RoleSelect))}var s=K.default.Instance.loadLocalJsonData(V.C.JsonDataKey.userOwnProp);null!=s&&0!=O.default.getDictionaryCount(s)||((s={})[V.C.PropType.kHammer]=3,s[V.C.PropType.kSuperStar]=3,K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.userOwnProp,s));var m=!1;if(cc.sys.platform==cc.sys.WECHAT_GAME){var l=wx.getLaunchOptionsSync();if(console.log("-------------------",l),console.log("----Launch------Launch---scene-",l.scene),console.log("----------Launch---query-",l.query),console.log("----------Launch---shareTicket-",l.shareTicket),H.default.Instance.rewindMusic(),l.query.form&&l.query.form==V.C.ShareState.DailyAssist){f=!0,K.default.Instance.saveLocalData(V.C.DataKey.guidanceState,1);var c=l.query.mode,d=l.query.id,u=K.default.Instance.hsdkGetSessionInfo().h5game_openid,p=l.query.time,g=O.default.isSameDay(p);if(u!=d&&g&&K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.ToDailyAssist,[{openId:d},{mode:c}]),g){var C=0==parseInt(c)?0:1,v=(O.default.getMonthWeek(),(b=new Date).getMonth()+1),I=b.getDate(),_=v.toString()+I.toString();1==v&&(_="0"+v.toString()+I.toString());var S=0==parseInt(c)?J.default.Instance.getNormalLevelInfoByDays(_):J.default.Instance.getDiffcultLevelInfoByDays(_),T=0==parseInt(c)?J.default.Instance.getNormalRandomInfoByDays(_):J.default.Instance.getDiffcultRandomInfoByDays(_);w.default.Instance.send(V.C.MsgType.onSetDailyConfigPath,C,S,T),w.default.Instance.send(V.C.MsgType.StartGame,V.C.GameMode.E,!0)}else q.default.Instance.show(V.C.UIPath.UIMainPanel)}else if(l.query.form&&l.query.form==V.C.ShareState.DailyChallenge){console.log("--------launch--------",l),y=!0;var b;c=l.query.mode,C=0==parseInt(c)?0:1,O.default.getMonthWeek(),v=(b=new Date).getMonth()+1,I=b.getDate(),_=v.toString()+I.toString();1==v&&(_="0"+v.toString()+I.toString());S=0==parseInt(c)?J.default.Instance.getNormalLevelInfoByDays(_):J.default.Instance.getDiffcultLevelInfoByDays(_),T=0==parseInt(c)?J.default.Instance.getNormalRandomInfoByDays(_):J.default.Instance.getDiffcultRandomInfoByDays(_);w.default.Instance.send(V.C.MsgType.onSetDailyConfigPath,C,S,T),w.default.Instance.send(V.C.MsgType.StartGame,V.C.GameMode.E,!0)}else if(l.query.form&&l.query.form==V.C.ShareState.ToSeeGroup)wx.getShareInfo({shareTicket:l.shareTicket,success:function(){h._bStarUpdateSub=!0,h.rank.node.active=!0,console.log("------Launch------getshareInfo- success---");var e=K.default.Instance.hsdkGetSessionInfo(),t="";e&&null!=e.h5game_openid&&null!=e.h5game_openid&&""!=e.h5game_openid&&(t=e.h5game_openid),w.default.Instance.send(V.C.MsgType.ShowRankNode,l.query.form),K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.ShowGroup,[{shareTicket:l.shareTicket},{id:t}])},fail:function(){console.log("-----Launch-------getshareInfo- fail---")}}),m=!0;else{var P=K.default.Instance.loadLocalData(V.C.JsonDataKey.gameSceneInfo);if(null!=P&&0!=parseInt(P)){var D=JSON.parse(P);if(0<O.default.getDictionaryCount(D)){var M=D.time;(g=O.default.isSameDay(M))&&!h.bShowAdvMenu?q.default.Instance.show(V.C.UIPath.UIReStorePanel,R.default.Instance.NodeTop,1):K.default.Instance.removeLocalData(V.C.JsonDataKey.gameSceneInfo)}}}wx.onShow(function(o){if(K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.HideGameOverShare),H.default.Instance.rewindMusic(),console.log("-------------------",o),console.log("----main------onshow---scene-",o.scene),console.log("----------onshow---query-",o.query),console.log("----------onshow---shareTicket-",o.shareTicket),1044==o.scene&&o.query.form&&o.query.form==V.C.ShareState.ToSeeGroup)wx.getShareInfo({shareTicket:o.shareTicket,success:function(e){h.rank.node.active=!0,h._bStarUpdateSub=!0,console.log("------------getshareInfo- success---",e);var t=K.default.Instance.hsdkGetSessionInfo(),n="";console.log("-----------------info",t),t&&null!=t.h5game_openid&&null!=t.h5game_openid&&""!=t.h5game_openid&&(n=t.h5game_openid),w.default.Instance.send(V.C.MsgType.ShowRankNode,o.query.form),K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.ShowGroup,[{shareTicket:o.shareTicket},{id:n}])},fail:function(){console.log("------------getshareInfo- fail---")}}),m=!0,K.default.Instance.cca_onEvent(V.C.ccaEventType.OnGameShow+"-群排行分享");else if(o.query.form&&o.query.form==V.C.ShareState.DailyAssist){console.log("--------res--------",o),K.default.Instance.saveLocalData(V.C.DataKey.guidanceState,1),f=!0;var e=o.query.mode,t=o.query.id,n=K.default.Instance.hsdkGetSessionInfo().h5game_openid,a=o.query.time,i=O.default.isSameDay(a);if(n!=t&&i&&K.default.Instance.wxPostMessage(V.C.ToChildProgramMsgName.ToDailyAssist,[{openId:t},{mode:e}]),i){var r=0==parseInt(e)?0:1,s=(O.default.getMonthWeek(),(p=new Date).getMonth()+1),l=p.getDate(),c=s.toString()+l.toString();1==s&&(c="0"+s.toString()+l.toString());var d=0==parseInt(e)?J.default.Instance.getNormalLevelInfoByDays(c):J.default.Instance.getDiffcultLevelInfoByDays(c),u=0==parseInt(e)?J.default.Instance.getNormalRandomInfoByDays(c):J.default.Instance.getDiffcultRandomInfoByDays(c);w.default.Instance.send(V.C.MsgType.onSetDailyConfigPath,r,d,u),w.default.Instance.send(V.C.MsgType.StartGame,V.C.GameMode.E,!0)}else q.default.Instance.show(V.C.UIPath.UIMainPanel);K.default.Instance.cca_onEvent(V.C.ccaEventType.OnGameShow+"-每日挑战助战")}else if(o.query.form&&o.query.form==V.C.ShareState.DailyChallenge){console.log("--------res--------",o),y=!0;var p;e=o.query.mode,r=0==parseInt(e)?0:1,O.default.getMonthWeek(),s=(p=new Date).getMonth()+1,l=p.getDate(),c=s.toString()+l.toString();1==s&&(c="0"+s.toString()+l.toString());d=0==parseInt(e)?J.default.Instance.getNormalLevelInfoByDays(c):J.default.Instance.getDiffcultLevelInfoByDays(c),u=0==parseInt(e)?J.default.Instance.getNormalRandomInfoByDays(c):J.default.Instance.getDiffcultRandomInfoByDays(c);w.default.Instance.send(V.C.MsgType.onSetDailyConfigPath,r,d,u),w.default.Instance.send(V.C.MsgType.StartGame,V.C.GameMode.E,!0),K.default.Instance.cca_onEvent(V.C.ccaEventType.OnGameShow+"-每日挑战炫耀")}else K.default.Instance.cca_onEvent(V.C.ccaEventType.OnGameShow+"-其他")}),wx.onHide(function(e){K.default.Instance.cca_onEvent(V.C.ccaEventType.OnGameHide),h._StartGaming&&h._curMode!=V.C.GameMode.E&&h.saveGameSceneInfo()})}m?(this.animShakeAnim.node.active=!1,q.default.Instance.hide(V.C.UIPath.UIMainPanel),K.default.Instance.saveLocalData(V.C.DataKey.guidanceState,1)):f||y?K.default.Instance.saveLocalData(V.C.DataKey.guidanceState,1):1==K.default.Instance.loadLocalData(V.C.DataKey.guidanceState)?(H.default.Instance.playMusic(V.C.MusicType.MainBg),q.default.Instance.show(V.C.UIPath.UIMainPanel,R.default.Instance.NodeCenter)):(H.default.Instance.playMusic(V.C.MusicType.MainBg),this.scheduleOnce(function(){w.default.Instance.send(V.C.MsgType.StartGame,V.C.GameMode.A,!0,!0)},.3))},.1)},e.prototype.onDisable=function(){this.btnBack.node.scale=1,this.removeListener()},e.prototype.start=function(){this.scheduleOnce(function(){this._tex=new cc.Texture2D;for(var e=0;e<V.C.CubeItemType.Length;e++){V.C.CubeItemType[e];for(var t=0;t<3;t++){var n=(e+"_"+t).toString();this._arrCubeType1.push(n)}}var o=K.default.Instance.loadLocalData(V.C.DataKey.prizeFreeTimes);0==o?w.default.Instance.send(V.C.MsgType.DailyModeNewTips,!0,!0):O.default.isSameDay(o)||w.default.Instance.send(V.C.MsgType.DailyModeNewTips,!0,!0);var a=K.default.Instance.loadLocalData(V.C.DataKey.DailyModeRefreshTimes);if(0==parseInt(a)||0!=parseInt(a)&&!O.default.isSameDay(a)){var i=new Date,r=(i.getHours(),i.getMinutes(),K.default.Instance.loadLocalData(V.C.DataKey.DailyModeNTimer)),s=K.default.Instance.loadLocalData(V.C.DataKey.DailyModeDTimer),l=!1;if(0!=parseInt(r)&&(O.default.isSameDay(r)||(console.log("on open and reset normal daily in other day!"),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeNFirstTime),K.default.Instance.removeLocalData(V.C.DataKey.dailyNormalState),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeNTimer),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeNFirstSaveTimes),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeNOpenPanelTimes),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeRefreshTimes,i.getTime()),w.default.Instance.send(V.C.MsgType.DailyModeNewTips,!0),l=!0)),0!=parseInt(s)&&(O.default.isSameDay(s)||(console.log("on open and reset diffcult daily in other day!"),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeDFirstTime),K.default.Instance.removeLocalData(V.C.DataKey.dailyDiffcultState),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeDTimer),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeDFirstSaveTime),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeDOpenPanelTimes),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeRefreshTimes,i.getTime()),w.default.Instance.send(V.C.MsgType.DailyModeNewTips,!0),l=!0)),l){for(var c={},d=0;d<V.C.DailyShareType.Length;d++)c[d]=0;K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal,c),K.default.Instance.saveLocalJsonData(V.C.DataKey.DailyDiffcultAskHelpSteps,"0")}0==parseInt(r)&&0==parseInt(s)&&w.default.Instance.send(V.C.MsgType.DailyModeNewTips,!0),this.schedule(function(){var e=new Date,t=e.getHours(),n=e.getMinutes();if(0==t&&0==n){cc.log("on Reset DailyModeNFirstTime And DailyModeDFirstTime"),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeNFirstTime),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeDFirstTime),K.default.Instance.removeLocalData(V.C.DataKey.dailyNormalState),K.default.Instance.removeLocalData(V.C.DataKey.dailyDiffcultState),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeNTimer),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeDTimer),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeNFirstSaveTimes),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeDFirstSaveTime),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeNOpenPanelTimes),K.default.Instance.removeLocalData(V.C.DataKey.DailyModeDOpenPanelTimes);for(var o={},a=0;a<V.C.DailyShareType.Length;a++)o[a]=0;K.default.Instance.saveLocalJsonData(V.C.JsonDataKey.dailyShareGetPropTotal,o),K.default.Instance.saveLocalJsonData(V.C.DataKey.DailyDiffcultAskHelpSteps,"0"),K.default.Instance.saveLocalData(V.C.DataKey.DailyModeRefreshTimes,e.getTime()),w.default.Instance.send(V.C.MsgType.DailyModeNewTips,!0)}}.bind(this),60,cc.macro.REPEAT_FOREVER)}_.default.Instance.init(this.sEffectContainer.node)},.2)},e.prototype.update=function(e){if(cc.sys.platform==cc.sys.WECHAT_GAME&&this._bStarUpdateSub&&this.updaetSubDomainCanvas(),this._curMode!=V.C.GameMode.E||this._EndDailyTimer||(0==this._dailyType?(this._dailyNChallengeTime=this._dailyNChallengeTime+e,this.labTimer.string=O.default.formatTime(this._dailyNChallengeTime)):(this._dailyDChallengeTime=this._dailyDChallengeTime+e,this.labTimer.string=O.default.formatTime(this._dailyDChallengeTime))),this._curMode==V.C.GameMode.C&&this._bStartTimeGame&&!this._bPauseTimeGame){if(this._remainTime<=0)return this.nodeTime2_Effect.active=!1,w.default.Instance.send(V.C.MsgType.GameRemainTimeEnd,!1),void this.onShowGameOver(V.C.MsgType.ShowGameOver,"txtGameOverTimeEnd");if(this._remainTime<=10&&!this.bBlinkInFiveSecond){this.bBlinkInFiveSecond=!0,this.timeLimitFiveSecond.active=!0,this.sprFxBlinkTimeNode.active=!0;var t=cc.fadeTo(1,0),n=cc.fadeTo(1,255),o=cc.sequence(t,n).repeatForever();this.timeLimitFiveSecond.runAction(o);var a=cc.fadeTo(1,0),i=cc.fadeTo(1,255),r=cc.sequence(a,i).repeatForever();this.sprFxBlinkTimeNode.runAction(r)}this._remainTime=this._remainTime-e,this.labTimer.string=O.default.formatTime2(1e3*this._remainTime),this.sprTimeNode2_Fg.node.width=this._remainTime/this._totalTime*500,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-250+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y)}},e.prototype.updaetSubDomainCanvas=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){if(!this._tex)return;this._tex.initWithElement(sharedCanvas),this._tex.handleLoadedTexture(),this.rank.spriteFrame=new cc.SpriteFrame(this._tex),this.sprSurpassFriend.spriteFrame=new cc.SpriteFrame(this._tex)}},__decorate([c({type:cc.Animation,displayName:"抖屏动画",tooltip:"抖屏动画"})],e.prototype,"animShakeAnim",void 0),__decorate([c({type:cc.Node,displayName:"顶容器",tooltip:"顶部容器，主要放菜单"})],e.prototype,"nodeTop",void 0),__decorate([c({type:cc.Node,displayName:"中容器",tooltip:"中间容器，主要放游戏操作的对象"})],e.prototype,"nodeCenter",void 0),__decorate([c({type:cc.Node,displayName:"底容器",tooltip:"底部容器，主要放广告"})],e.prototype,"nodeBottom",void 0),__decorate([c({type:o.default,displayName:"放容器",tooltip:"放方块的容器"})],e.prototype,"sPutContainer",void 0),__decorate([c({type:o.default,displayName:"放容器",tooltip:"放特效的容器"})],e.prototype,"sEffectContainer",void 0),__decorate([c({type:o.default,displayName:"拿容器",tooltip:"拿方块的容器"})],e.prototype,"sGetContainer",void 0),__decorate([c({type:cc.Node,displayName:"方块",tooltip:"方块的样板，包括大中小"})],e.prototype,"nodeItem",void 0),__decorate([c({type:cc.Node,displayName:"位置点",tooltip:"显示放置的位置的点"})],e.prototype,"nodePoint",void 0),__decorate([c({type:cc.Sprite,displayName:"超越好友显示图片"})],e.prototype,"sprSurpassFriend",void 0),__decorate([c({type:cc.Node,displayName:"加载角色",tooltip:"加载角色父节点"})],e.prototype,"nodeLoadRole",void 0),__decorate([c({type:cc.Node,displayName:"角色特效节点",tooltip:"角色特效节点"})],e.prototype,"nodeRoleEffectPoint",void 0),__decorate([c(cc.Node)],e.prototype,"btnPlayInRank",void 0),__decorate([c(cc.Node)],e.prototype,"btnSeeGroupRank",void 0),__decorate([c(cc.Sprite)],e.prototype,"rank",void 0),__decorate([c(cc.Node)],e.prototype,"btnCloseRank",void 0),__decorate([c(cc.Node)],e.prototype,"FX_SkillCanSkillIdle",void 0),__decorate([c(cc.Node)],e.prototype,"FX_RoleCanSkillFire",void 0),__decorate([c(cc.Animation)],e.prototype,"FX_RoleCanSkillFire2",void 0),__decorate([c(cc.Animation)],e.prototype,"FX_curLeftBorderEffect",void 0),__decorate([c(cc.Animation)],e.prototype,"FX_curRightBorderEffect",void 0),__decorate([c(cc.Node)],e.prototype,"FX_nodeRoleFireRotateItem",void 0),__decorate([c(cc.Node)],e.prototype,"nodeDailyContainer",void 0),__decorate([c(i.default)],e.prototype,"nodeDailyView",void 0),__decorate([c(cc.Node)],e.prototype,"nodeDailyViewMask",void 0),__decorate([c(cc.Node)],e.prototype,"btnDailyViewLeft",void 0),__decorate([c(cc.Node)],e.prototype,"btnDailyViewRight",void 0),__decorate([c(cc.Label)],e.prototype,"nodeDailyStepRemain1",void 0),__decorate([c(cc.Label)],e.prototype,"nodeDailyStepRemain2",void 0),__decorate([c(cc.Node)],e.prototype,"nodeDailyAnswer",void 0),__decorate([c(cc.Node)],e.prototype,"nodeDailyShareTips",void 0),__decorate([c({type:cc.Button,displayName:"返回按钮"})],e.prototype,"btnBack",void 0),__decorate([c({type:cc.Label,displayName:"得分"})],e.prototype,"score",void 0),__decorate([c({type:cc.Label,displayName:"连击"})],e.prototype,"combo",void 0),__decorate([c({type:cc.Label,displayName:"最高得分"})],e.prototype,"maxScore",void 0),__decorate([c({type:cc.Node,displayName:"暂停界面"})],e.prototype,"pauseManu",void 0),__decorate([c({type:cc.Node,displayName:"角色技能碰撞"})],e.prototype,"nodeRoleSkillCol",void 0),__decorate([c({type:cc.Animation,displayName:"combo动画"})],e.prototype,"comboAni",void 0),__decorate([c({type:cc.Sprite,displayName:"combo动画图片"})],e.prototype,"sprComboAni",void 0),__decorate([c({type:cc.Animation,displayName:"得分动画"})],e.prototype,"pointAni",void 0),__decorate([c({type:cc.Animation,displayName:"限时模式动画"})],e.prototype,"animReadyGo",void 0),__decorate([c({type:cc.Sprite,displayName:"限时模式背景"})],e.prototype,"timeBg",void 0),__decorate([c({type:cc.Node,displayName:"限时模式倒数5秒图片"})],e.prototype,"timeLimitFiveSecond",void 0),__decorate([c({type:cc.Sprite,displayName:"能量进度"})],e.prototype,"sprEnergy",void 0),__decorate([c({type:cc.Node,displayName:"能量进度特效"})],e.prototype,"fx_EnergyProgess",void 0),__decorate([c({type:cc.Label,displayName:"能量进度文本"})],e.prototype,"labEnergy",void 0),__decorate([c(cc.Node)],e.prototype,"goGuidaceNode",void 0),__decorate([c(a.default)],e.prototype,"animGuidance",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprGuidance",void 0),__decorate([c(cc.Node)],e.prototype,"nodeFinger",void 0),__decorate([c(cc.Node)],e.prototype,"nodeMaskBg",void 0),__decorate([c(cc.Node)],e.prototype,"goTimerNode",void 0),__decorate([c(cc.Node)],e.prototype,"goAddTimeLizi",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprFxAddTimeNode",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprFxAddTimeNode2",void 0),__decorate([c(cc.Node)],e.prototype,"sprFxBlinkTimeNode",void 0),__decorate([c(cc.Label)],e.prototype,"labTimer",void 0),__decorate([c(cc.Node)],e.prototype,"goTimerNode2",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprTimeNode2_Fg",void 0),__decorate([c(cc.Node)],e.prototype,"nodeTime2_Effect",void 0),__decorate([c(cc.Node)],e.prototype,"maskUseProp",void 0),__decorate([c({type:cc.Button,displayName:"锤子道具按钮"})],e.prototype,"btnPropHammer",void 0),__decorate([c({type:cc.Button,displayName:"超能星星道具按钮"})],e.prototype,"btnPropSuperStar",void 0),__decorate([c(cc.Label)],e.prototype,"labHammerNum",void 0),__decorate([c(cc.Label)],e.prototype,"labSuperStarNum",void 0),__decorate([c(cc.Node)],e.prototype,"nodeHammerAdd",void 0),__decorate([c(cc.Node)],e.prototype,"nodeSuperStarAdd",void 0),__decorate([c(cc.Animation)],e.prototype,"animPropHammer",void 0),__decorate([c(cc.Node)],e.prototype,"nodePropUseTips",void 0),__decorate([c(cc.Label)],e.prototype,"labLevelTopTips",void 0),__decorate([c(cc.Label)],e.prototype,"labTargetTopTips",void 0),__decorate([c(cc.Animation)],e.prototype,"animLevelArrive",void 0),__decorate([c(cc.Label)],e.prototype,"labLevelArriveTips",void 0),__decorate([c(cc.Label)],e.prototype,"labTargetArriveTips",void 0),__decorate([c(cc.Animation)],e.prototype,"animGameOver",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprOverResult",void 0),__decorate([c({type:cc.Node,displayName:"背景"})],e.prototype,"nodeBg",void 0),__decorate([c({type:cc.Node,displayName:"分数背景"})],e.prototype,"nodeScoreBg",void 0),e=__decorate([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"./C":"C","./CubeContainer":"CubeContainer","./CubeItem":"CubeItem","./DailyLevelConfig":"DailyLevelConfig","./DailyViewMgr":"DailyViewMgr","./EffectMgr":"EffectMgr","./FYUserDataMgr":"FYUserDataMgr","./Game/RoleMgr":"RoleMgr","./GridItem":"GridItem","./GuidanceMgr":"GuidanceMgr","./RoleAnim":"RoleAnim","./RoleConfig":"RoleConfig","./Tools/FYAudioCtl":"FYAudioCtl","./Tools/FYGlobalVarMgr":"FYGlobalVarMgr","./Tools/FYMessenger":"FYMessenger","./Tools/FYResMgr":"FYResMgr","./Tools/FYSDKMgr":"FYSDKMgr","./Tools/FYUIMgr":"FYUIMgr","./Tools/FYUtility":"FYUtility"}],GetInfo:[function(e,t,n){"use strict";cc._RF.push(t,"16e4ewJyQ1B7JItlw7Ez3uF","GetInfo"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./C"),a=cc._decorator,i=(a.ccclass,a.property,function(){this.getType=null,this.getNum=0,this.roleId=0,this.roleScore=0,this.propType=o.C.PropType.kHammer});n.default=i,cc._RF.pop()},{"./C":"C"}],GridItem:[function(e,t,n){"use strict";cc._RF.push(t,"5dca43mnntK55HSx9+BKrjp","GridItem"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./CubeItem"),i=e("./C"),o=e("./Tools/FYMessenger"),r=e("./FYUserDataMgr"),s=cc._decorator,l=s.ccclass,c=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mSpritePoint=null,e.mSpriteBg=null,e._dictCube={0:null},e._bEnableMove=!0,e._bEnableUseProp=!1,e._nIndex=-1,e}return __extends(e,t),e.prototype.putCube=function(e,t){if(!this.canPutCube(t))return!1;var n=t.getCubeItemSize();return(this._dictCube[n]=t).node.parent=this.node,t.setPos(new cc.Vec2(0,0)),t.setIndex(e),!0},e.prototype.canPutCube=function(e){if(!(e instanceof a.default))return cc.error("cubeItem is not CubeItem type"),!1;var t=e.getCubeItemSize();return this._nState!=i.C.GridState.NotCanPut&&!(this._dictCube[t]instanceof a.default)},e.prototype.canPutGrid=function(e){for(var t=!0,n=0;n<i.C.CubeItemSize.Length;n++){var o=e.getCubeItem(n);o instanceof a.default&&(t=t&&this.canPutCube(o))}return t},e.prototype.putGrid=function(e,t){if(this.canPutGrid(t)){for(var n=0;n<i.C.CubeItemSize.Length;n++){var o=t.getCubeItem(n);o instanceof a.default&&this.putCube(e,o)}return!0}return!1},e.prototype.setIndex=function(e){this._nIndex=e},e.prototype.getIndex=function(){return this._nIndex},e.prototype.removeCube=function(e){null!=this._dictCube[e]&&(r.default.Instance.gridPool.put(this._dictCube[e].node),this._dictCube[e]=null)},e.prototype.removeAllCube=function(){r.default.Instance.gridPool.put(this.node);for(var e=0;e<i.C.CubeItemSize.Length;e++)this._dictCube[e]=null},e.prototype.destroyCube=function(e){this._dictCube[e]&&(r.default.Instance.cubePool.put(this._dictCube[e].node),this._dictCube[e]=null)},e.prototype.destroyAllCube=function(){for(var e=0;e<i.C.CubeItemSize.Length;e++)this._dictCube[e]&&r.default.Instance.cubePool.put(this._dictCube[e].node),this._dictCube[e]=null},e.prototype.checkSame=function(){var e=[];return null!=this._dictCube[i.C.CubeItemSize.Small]&&null!=this._dictCube[i.C.CubeItemSize.Normal]&&null!=this._dictCube[i.C.CubeItemSize.Big]&&this._dictCube[i.C.CubeItemSize.Small].getCubeItemType()==this._dictCube[i.C.CubeItemSize.Normal].getCubeItemType()&&this._dictCube[i.C.CubeItemSize.Normal].getCubeItemType()==this._dictCube[i.C.CubeItemSize.Big].getCubeItemType()&&(e.push(this._dictCube[i.C.CubeItemSize.Small]),e.push(this._dictCube[i.C.CubeItemSize.Normal]),e.push(this._dictCube[i.C.CubeItemSize.Big])),e},e.prototype.getAllCubeItem=function(){return this._dictCube},e.prototype.getEmptyCubeItem=function(){for(var e=[],t=0;t<i.C.CubeItemSize.Length;t++)this._dictCube[t]||e.push(t);return e},e.prototype.getCubeItem=function(e){return this._dictCube[e]},e.prototype.getCubeItemByType=function(e){for(var t=[],n=0;n<i.C.CubeItemSize.Length;n++)null!=this._dictCube[n]&&this._dictCube[n].getCubeItemType()==e&&t.push(this._dictCube[n]);return t},e.prototype.isFull=function(){for(var e=!0,t=0;t<i.C.CubeItemSize.Length;t++)e=e&&null!=this._dictCube[t];return e},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<i.C.CubeItemSize.Length;t++)e=e&&null==this._dictCube[t];return e},e.prototype.getCubeNum=function(){var e=0;return this._dictCube[i.C.CubeItemSize.Small]instanceof a.default&&e++,this._dictCube[i.C.CubeItemSize.Normal]instanceof a.default&&e++,this._dictCube[i.C.CubeItemSize.Big]instanceof a.default&&e++,e},e.prototype.setPostion=function(e){this._v2Position=e},e.prototype.setWorldPos=function(e){this._v2WorldPosition=e},e.prototype.getPosition=function(){return this._v2Position},e.prototype.getWorldPos=function(){return this._v2WorldPosition},e.prototype.resetPos=function(){this.node.setPosition(this._v2Position)},e.prototype.setWidth=function(e){this._nWidth=e},e.prototype.getWidth=function(){return this._nWidth},e.prototype.setHeight=function(e){this._nHeight=e},e.prototype.getHeight=function(){return this._nHeight},e.prototype.setState=function(e){this._nState=e,this._bEnableMove=this._nState==i.C.GridState.GetPanel,this.mSpriteBg.node.active=!(this._nState==i.C.GridState.GetPanel||this._nState==i.C.GridState.ViewPanel)},e.prototype.getState=function(){return this._nState},e.prototype.showPoint=function(e){this.mSpritePoint.enabled=e},e.prototype.addListener=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchUpCallback,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchDown,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancelCallback,this),o.default.Instance.add(i.C.MsgType.GameHideOrShow,this.onGameHideOrShow,this),o.default.Instance.add(i.C.MsgType.EnableGridMove,this.enabledGridMove,this),o.default.Instance.add(i.C.MsgType.GameRemainTimeEnd,this.onGameTimeEndEvent,this),o.default.Instance.add(i.C.MsgType.EnableGridPropUse,this.enabledGridPropUse,this)},e.prototype.removeListener=function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchUpCallback,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchDown,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancelCallback,this),o.default.Instance.remove(i.C.MsgType.GameHideOrShow,this.onGameHideOrShow,this),o.default.Instance.remove(i.C.MsgType.EnableGridMove,this.enabledGridMove,this),o.default.Instance.remove(i.C.MsgType.GameRemainTimeEnd,this.onGameTimeEndEvent,this),o.default.Instance.remove(i.C.MsgType.EnableGridPropUse,this.enabledGridPropUse,this)},e.prototype.touchMoveCallback=function(e){if(this._nState==i.C.GridState.GetPanel&&this._bEnableMove){this.node.opacity=255;var t=e.touch.getDelta();this.node.x+=t.x,this.node.y+=t.y,o.default.Instance.send(i.C.MsgType.RefreshMoveCubePos,this)}},e.prototype.touchUpCallback=function(e){this._bEnableUseProp?o.default.Instance.send(i.C.MsgType.PropHammerTrigger,this):this._nState==i.C.GridState.GetPanel&&(o.default.Instance.send(i.C.MsgType.CubeItemTouchUp,this),o.default.Instance.send(i.C.MsgType.CancelMoveCubePos,this))},e.prototype.touchCancelCallback=function(e){this.resetPos()},e.prototype.onTouchDown=function(e){this._nState==i.C.GridState.GetPanel&&o.default.Instance.send(i.C.MsgType.CubeItemTouchDown,this)},e.prototype.onGameHideOrShow=function(e,t){t||this._bEnableMove&&(this.node.x=0,this.node.y=0,o.default.Instance.send(i.C.MsgType.CubeItemTouchUp,this))},e.prototype.onGameTimeEndEvent=function(e){this._bEnableMove&&(this.resetPos(),this._bEnableMove=!1)},e.prototype.enabledGridMove=function(e,t){this._nState==i.C.GridState.GetPanel&&(this._bEnableMove=t)},e.prototype.enabledGridPropUse=function(e,t){this._bEnableUseProp=t},e.prototype.start=function(){},e.prototype.onEnable=function(){this.addListener()},e.prototype.onDisable=function(){this.removeListener()},__decorate([c(cc.Sprite)],e.prototype,"mSpritePoint",void 0),__decorate([c(cc.Sprite)],e.prototype,"mSpriteBg",void 0),e=__decorate([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"./C":"C","./CubeItem":"CubeItem","./FYUserDataMgr":"FYUserDataMgr","./Tools/FYMessenger":"FYMessenger"}],GuidanceMgr:[function(e,t,n){"use strict";cc._RF.push(t,"66ffdyxyppA445ISmn7NaYj","GuidanceMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animGuidance=null,e.goGuidaceNodeAnim1=null,e.goGuidaceNodeAnim2=null,e.actionAnimEnd=null,e}return __extends(e,t),e.prototype.PlayBegin=function(){this.goGuidaceNodeAnim1.active=!0,this.goGuidaceNodeAnim2.active=!0,this.animGuidance.stop(),this.animGuidance.play("Beginner1")},e.prototype.PlayEnd=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=null),e?this.animGuidance.play("Beginner2"):this.animGuidance.play("Beginner3"),this.actionAnimEnd=t},e.prototype.onAnimBeginEnd=function(){this.animGuidance.play("BeginnerIdle")},e.prototype.onAnimBackEnd=function(){this.goGuidaceNodeAnim1.active=!1,this.goGuidaceNodeAnim2.active=!1,null!=this.actionAnimEnd&&(this.actionAnimEnd(),this.actionAnimEnd=null)},__decorate([i(cc.Animation)],e.prototype,"animGuidance",void 0),__decorate([i(cc.Node)],e.prototype,"goGuidaceNodeAnim1",void 0),__decorate([i(cc.Node)],e.prototype,"goGuidaceNodeAnim2",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],PropMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1f81cteNQ5Ft4UQYnOGbzJP","PropMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../C"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}var t;return(t=e).prototype.getPropInfoByPropType=function(e){var t={limit:5};switch(e){case o.C.PropType.kHammer:t.limit=5,t.desc="txtPropTips7",t.icon="prop_1",t.shareLimit=3,t.cost=10;break;case o.C.PropType.kSuperStar:t.limit=3,t.desc="txtPropTips8",t.icon="prop_2",t.shareLimit=2,t.cost=12}return t},e.Instance=new t,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../C":"C"}],RoleAnim:[function(e,t,n){"use strict";cc._RF.push(t,"99ad5fep7xIqJSIwbiq4424","RoleAnim"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Tools/FYMessenger"),a=e("./C"),i=e("./EffectMgr"),r=e("./Tools/FYSDKMgr"),s=cc._decorator,l=s.ccclass,c=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.bEffectInWall=!1,e.bEffectInShowEnd=!1,e.effectParent=null,e.starPos=null,e.nIdx=0,e.nCurrUpType=0,e.onPlayAnimCall=null,e._bEffectSwitch=!0,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.SetEffectParent=function(e){this.effectParent=e},e.prototype.cleanEffect=function(){0!=this.effectParent.childrenCount&&this.effectParent.removeAllChildren(),this.nIdx=0},e.prototype.resetAnim=function(){cc.log("===========resetAnim=========="),this.nCurrUpType=0,this.anim.stop();var e=r.default.Instance.loadLocalData(a.C.DataKey.userRoleId);e==a.C.RoleType.Duck&&(this.node.getChildByName("effectRole2_Show1").active=!1,this.node.getChildByName("effectRole2_Show2").active=!1);e==a.C.RoleType.Cat&&(this.node.getChildByName("ShowEnd").active=!1)},e.prototype.resetInIdle=function(){cc.log("===========resetInIdle=========="),this.nCurrUpType=0},e.prototype.playShow=function(){cc.log("===========roleShow=========="),this.anim.play("roleShow")},e.prototype.playAnim=function(e,t){if(void 0===t&&(t=null),cc.log("===========playAnim=========="+e),this.onPlayAnimCall=t,this.nCurrUpType!=e)if(this.nCurrUpType=e,this.anim.stop(),1==e){if(this.anim.play("roleUp1"),this._bEffectSwitch){var n=new cc.Vec2(-0,-0);i.default.Instance.playEffect(a.C.EffectName.fxRolePlayGlow,n,2,this.node)}}else if(2==e){if(this.anim.play("roleUp2"),this._bEffectSwitch){n=new cc.Vec2(-0,-0);i.default.Instance.playEffect(a.C.EffectName.fxRolePlayGlow,n,2,this.node)}}else 3==e&&(this.anim.play("roleFight"),this._bEffectSwitch&&o.default.Instance.send(a.C.MsgType.ShowSkillBorderEffect))},e.prototype.onUpAnimEnd=function(){this.anim.stop(),cc.log("===========onUpAnimEnd=========="+this.nCurrUpType),0==this.nCurrUpType&&null!=this.anim&&this.anim.play("roleIdle1"),1==this.nCurrUpType&&null!=this.anim&&this.anim.play("roleIdle2"),2==this.nCurrUpType&&null!=this.anim&&this.anim.play("roleIdle3"),3==this.nCurrUpType&&(this.nCurrUpType=0,null!=this.anim&&this.anim.play("roleIdle1")),null!=this.onPlayAnimCall&&this.onPlayAnimCall()},e.prototype.onRoleColliderWall=function(e){if(this.bEffectInWall){this.nIdx++;e.split(",");var t=null;1==this.nIdx?t=new cc.Vec2(206,115):2==this.nIdx?t=new cc.Vec2(-268,117):3==this.nIdx?t=new cc.Vec2(199,117):4==this.nIdx?t=new cc.Vec2(-149,85):5==this.nIdx&&(t=new cc.Vec2(350,-130)),this._bEffectSwitch&&i.default.Instance.playEffect(a.C.EffectName.fxRoleColInWall,t,10,this.effectParent)}},e.prototype.onRolePlayFightShake=function(){this._bEffectSwitch&&i.default.Instance.playEffect(a.C.EffectName.fxRoleColInWall,new cc.Vec2(-127,-160),10,this.effectParent);var e=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0));console.log("-------------------------------------------start Play Skill!!!!!!!!!!!!!!!"),o.default.Instance.send(a.C.MsgType.SkillTrigger,e),o.default.Instance.send(a.C.MsgType.ShowSkillShake)},e.prototype.onRolePlayShowEnd=function(){if(this.bEffectInShowEnd){var e=r.default.Instance.loadLocalData(a.C.DataKey.userRoleId);if(e==a.C.RoleType.Duck){this.node.getChildByName("effectRole2_Show1").active=!1;var t=this.node.getChildByName("effectRole2_Show2");t.active=!0,this.scheduleOnce(function(){t.active=!1},2)}else if(e==a.C.RoleType.Cat){var n=this.node.getChildByName("ShowEnd").getComponent(cc.ParticleSystem);n.node.active=!0,n.resetSystem(),this.scheduleOnce(function(){n.node.active=!1},2)}else if(this._bEffectSwitch){var o=new cc.Vec2(-124,-135);i.default.Instance.playEffect(a.C.EffectName.fxRolePlayShowEnd,o,1,this.effectParent)}}},e.prototype.onRolePlayShowStart=function(){r.default.Instance.loadLocalData(a.C.DataKey.userRoleId)==a.C.RoleType.Duck&&(this.node.getChildByName("effectRole2_Show1").active=!0)},__decorate([c(cc.Animation)],e.prototype,"anim",void 0),__decorate([c(Boolean)],e.prototype,"bEffectInWall",void 0),__decorate([c(Boolean)],e.prototype,"bEffectInShowEnd",void 0),e=__decorate([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"./C":"C","./EffectMgr":"EffectMgr","./Tools/FYMessenger":"FYMessenger","./Tools/FYSDKMgr":"FYSDKMgr"}],RoleConfig:[function(e,t,n){"use strict";cc._RF.push(t,"fa881hExLJEUI3RQ5TA7Wbq","RoleConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./C"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}var t;return(t=e).prototype.getRoleInfoByRoleId=function(e){var t={point:2,star:1};switch(parseInt(e)){case 1:t.point=2,t.star=1,t.skill=0,t.buyType=0,t.buyNum=0;break;case 2:t.point=6,t.star=2,t.skill=0,t.buyType=1,t.buyNum=2e3;break;case 3:t.point=4,t.star=2,t.skill=3,t.buyType=1,t.buyNum=2e3;break;case 4:t.point=6,t.star=2,t.skill=0,t.buyType=1,t.buyNum=1600;break;case 5:t.point=6,t.star=2,t.skill=2,t.buyType=1,t.buyNum=1600;break;case 6:t.point=4,t.star=2,t.skill=4,t.buyType=1,t.buyNum=2e3}return t},e.prototype.getPropInfoByPropId=function(e){var t={limit:5};switch(e){case o.C.PropType.kHammer:t.limit=5,t.desc="txtPropTips7",t.icon="prop_1",t.shareLimit=3,t.cost=10;break;case o.C.PropType.kSuperStar:t.limit=3,t.desc="txtPropTips8",t.icon="prop_2",t.shareLimit=2,t.cost=12}return t},e.Instance=new t,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"./C":"C"}],RoleItem:[function(e,t,n){"use strict";cc._RF.push(t,"5f804poO4RGJpq26RDIJQvc","RoleItem"),Object.defineProperty(n,"__esModule",{value:!0});var R=e("../Tools/FYSDKMgr"),G=e("../Tools/FYUtility"),N=e("../RoleConfig"),o=e("../Tools/FYMessenger"),A=e("../C"),k=e("../Tools/FYResMgr"),a=e("../Game/RoleMgr"),i=cc._decorator,r=i.ccclass,s=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBg=null,e.sprBg2=null,e.sprName=null,e.nodeSelect=null,e.nodeLoad=null,e.nodeGrid=null,e.nodeStar=null,e.labScore=null,e.btnChoose=null,e.btnChoose2=null,e.btnGoldBuy=null,e.sprSkillDesc=null,e.labSkillCount=null,e.labGold=null,e.selectRoleMenu=null,e.nodeLimit=null,e.labLimitH=null,e.labLimitM=null,e.labLimitS=null,e.bDeveloping=!1,e.limitRemainSec=0,e}return __extends(e,t),e.prototype.getRoleId=function(){return this.roleId},e.prototype.getRoleSkillDescIdx=function(e){var t=0;switch(e){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=3}return t},e.prototype.setItem=function(e,t,n){if(this.roleId=e,this.selectRoleMenu=n,this.bDeveloping){var o=this.node.getChildByName("RoleQ").getComponent(cc.Sprite),a=k.default.Instance.loadSpriteFrame("roleCut"+(parseInt(this.roleId)-3));o.spriteFrame=a}else{var i=G.default.addChild(this.nodeLoad,t);this.goRole=i;for(var r=N.default.Instance.getRoleInfoByRoleId(this.roleId).star,s=0;s<r;s++)G.default.addChild(this.nodeGrid,this.nodeStar);var l=k.default.Instance.loadSpriteFrame("labRoleName"+this.roleId);this.sprName.spriteFrame=l;var c=N.default.Instance.getRoleInfoByRoleId(this.roleId);this.labScore.string=c.point.toString(),this.labGold.string=c.buyNum;var d=this.getRoleSkillDescIdx(parseInt(this.roleId)),u="prizeSkillDesc"+d;G.default.changeSpriteFrame(this.sprSkillDesc,"atlas/common/common",u),3!=d&&5!=d?this.labSkillCount.node.active=!1:(this.labSkillCount.node.active=!0,this.labSkillCount.string=c.skill+"X"+c.skill);var p=R.default.Instance.loadLocalData(A.C.DataKey.userRoleId);if(0!=p&&p==this.roleId){var h=k.default.Instance.loadSpriteFrame("roleBg2");this.sprBg.spriteFrame=h;var f=k.default.Instance.loadSpriteFrame("roleBg22");this.sprBg2.spriteFrame=f}else{var y=k.default.Instance.loadSpriteFrame("roleBg1");this.sprBg.spriteFrame=y;var m=k.default.Instance.loadSpriteFrame("roleBg11");this.sprBg2.spriteFrame=m}this.nodeSelect.active=!1,this.unschedule(this.onCountDownLimit);var g=R.default.Instance.loadLocalJsonData(A.C.JsonDataKey.userRoleExpCard);if(null!=g&&null!=g[this.roleId]){this.nodeLimit.active=!0,this.btnChoose.node.active=!0,this.btnGoldBuy.node.active=!0,this.btnGoldBuy.node.position=new cc.Vec2(3,-70);var C=this.roleId==p;this.btnChoose.node.active=!C,this.btnChoose2.active=C;var v=new Date,I=g[this.roleId].duration,_=g[this.roleId].lastTime,S=v.getTime()-_;if(S<I){this.limitRemainSec=(I-S)/1e3;var T=Math.floor(this.limitRemainSec/3600),b=Math.floor(this.limitRemainSec%3600/60),P=Math.floor(this.limitRemainSec%60);this.labLimitH.string=T<10?"0"+T.toString():T.toString(),this.labLimitM.string=b<10?"0"+b.toString():b.toString(),this.labLimitS.string=P<10?"0"+P.toString():P.toString(),console.log("-----------------------------------------",this.limitRemainSec,T,b,P),this.schedule(this.onCountDownLimit,1,this.limitRemainSec)}}else{this.nodeLimit.active=!1;var D=R.default.Instance.loadLocalJsonData(A.C.JsonDataKey.userOwnRole);if(cc.log(D+" "+this.roleId),null==D||null==D[this.roleId]){this.btnChoose.node.active=!1,this.btnChoose2.active=!1;var M=0!=parseInt(c.buyType);this.btnGoldBuy.node.active=M,this.btnGoldBuy.node.position=new cc.Vec2(200,-70)}else{var w=R.default.Instance.loadLocalData(A.C.DataKey.userRoleId);this.btnGoldBuy.node.active=!1;C=this.roleId==w;this.btnChoose.node.active=!C,this.btnChoose2.active=C}}}},e.prototype.refreshButton=function(){var e=N.default.Instance.getRoleInfoByRoleId(this.roleId),t=R.default.Instance.loadLocalJsonData(A.C.JsonDataKey.userOwnRole),n=R.default.Instance.loadLocalData(A.C.DataKey.userRoleId);cc.log(t+" "+this.roleId),this.unschedule(this.onCountDownLimit);var o=R.default.Instance.loadLocalJsonData(A.C.JsonDataKey.userRoleExpCard);if(null!=o&&null!=o[this.roleId]){this.nodeLimit.active=!0,this.btnChoose.node.active=!0,this.btnGoldBuy.node.active=!0,this.btnGoldBuy.node.position=new cc.Vec2(3,-70);var a=this.roleId==n;this.btnChoose.node.active=!a,this.btnChoose2.active=a;var i=new Date,r=o[this.roleId].duration,s=o[this.roleId].lastTime,l=i.getTime()-s;if(l<r){this.limitRemainSec=(r-l)/1e3;var c=Math.floor(this.limitRemainSec/3600),d=Math.floor(this.limitRemainSec%3600/60),u=Math.floor(this.limitRemainSec%60);this.labLimitH.string=c<10?"0"+c.toString():c.toString(),this.labLimitM.string=d<10?"0"+d.toString():d.toString(),this.labLimitS.string=u<10?"0"+u.toString():u.toString(),console.log("-----------------------------------------",this.limitRemainSec,c,d,u),this.schedule(this.onCountDownLimit,1,this.limitRemainSec)}}else{this.nodeLimit.active=!1;var p=R.default.Instance.loadLocalJsonData(A.C.JsonDataKey.userOwnRole);if(cc.log(p+" "+this.roleId),null==p||null==p[this.roleId]){this.btnChoose.node.active=!1,this.btnChoose2.active=!1;var h=0!=parseInt(e.buyType);this.btnGoldBuy.node.active=h,this.btnGoldBuy.node.position=new cc.Vec2(200,-70)}else{this.btnGoldBuy.node.active=!1;a=this.roleId==n;this.btnChoose.node.active=!a,this.btnChoose2.active=a}}if(0!=n&&n==this.roleId){var f=k.default.Instance.loadSpriteFrame("roleBg2");this.sprBg.spriteFrame=f;var y=k.default.Instance.loadSpriteFrame("roleBg22");this.sprBg2.spriteFrame=y}else{var m=k.default.Instance.loadSpriteFrame("roleBg1");this.sprBg.spriteFrame=m;var g=k.default.Instance.loadSpriteFrame("roleBg11");this.sprBg2.spriteFrame=g}},e.prototype.onCountDownLimit=function(){if(this.limitRemainSec--,0<this.limitRemainSec){var e=Math.floor(this.limitRemainSec/3600),t=Math.floor(this.limitRemainSec%3600/60),n=Math.floor(this.limitRemainSec%60);this.labLimitH.string=e<10?"0"+e.toString():e.toString(),this.labLimitM.string=t<10?"0"+t.toString():t.toString(),this.labLimitS.string=n<10?"0"+n.toString():n.toString()}else this.selectRoleMenu.checkRoleExpCard(),o.default.Instance.send(A.C.MsgType.RefreshSelectRole)},e.prototype.onEnable=function(){o.default.Instance.add(A.C.MsgType.RefreshRoleItems,this.refreshButton,this)},e.prototype.onDisable=function(){a.default.Instance.putRoleInView(this.roleId.toString(),this.goRole),this.goRole=null,o.default.Instance.remove(A.C.MsgType.RefreshRoleItems,this.refreshButton,this),this.node.scale=1},e.prototype.onClickChoose=function(){this.selectRoleMenu.onClickChooseCall(this)},e.prototype.onClickGoldBuy=function(){this.selectRoleMenu.onClickGoldBuyCall(this)},__decorate([s(cc.Sprite)],e.prototype,"sprBg",void 0),__decorate([s(cc.Sprite)],e.prototype,"sprBg2",void 0),__decorate([s(cc.Sprite)],e.prototype,"sprName",void 0),__decorate([s(cc.Node)],e.prototype,"nodeSelect",void 0),__decorate([s(cc.Node)],e.prototype,"nodeLoad",void 0),__decorate([s(cc.Node)],e.prototype,"nodeGrid",void 0),__decorate([s(cc.Node)],e.prototype,"nodeStar",void 0),__decorate([s(cc.Label)],e.prototype,"labScore",void 0),__decorate([s(cc.Button)],e.prototype,"btnChoose",void 0),__decorate([s(cc.Node)],e.prototype,"btnChoose2",void 0),__decorate([s(cc.Button)],e.prototype,"btnGoldBuy",void 0),__decorate([s(cc.Sprite)],e.prototype,"sprSkillDesc",void 0),__decorate([s(cc.Label)],e.prototype,"labSkillCount",void 0),__decorate([s(cc.Label)],e.prototype,"labGold",void 0),__decorate([s(cc.Node)],e.prototype,"nodeLimit",void 0),__decorate([s(cc.Label)],e.prototype,"labLimitH",void 0),__decorate([s(cc.Label)],e.prototype,"labLimitM",void 0),__decorate([s(cc.Label)],e.prototype,"labLimitS",void 0),__decorate([s(Boolean)],e.prototype,"bDeveloping",void 0),e=__decorate([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../C":"C","../Game/RoleMgr":"RoleMgr","../RoleConfig":"RoleConfig","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUtility":"FYUtility"}],RoleMgr:[function(e,t,n){"use strict";cc._RF.push(t,"62b47qTTMBOSqlDQJXDkyqF","RoleMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../C"),a=e("../Tools/FYResMgr"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){}var t;return(t=e).prototype.getRoleKey=function(e){return"Role_"+e},e.prototype.getRoleKeyInView=function(e){return"RoleView_"+e},e.prototype.getRole=function(e){var t=this.getRoleKey(e);return null==this._dictRole&&(this._dictRole={}),this._dictRole.hasOwnProperty(t)&&0<this._dictRole[t].size()?this._dictRole[t].get():(this._dictRole.hasOwnProperty(t)||(this._dictRole[t]=new cc.NodePool),a.default.Instance.loadOther(t))},e.prototype.putRole=function(e,t){var n=this.getRoleKey(e);this._dictRole.hasOwnProperty(n)||(this._dictRole[n]=new cc.NodePool),this._dictRole[n].put(t)},e.prototype.getRoleInView=function(e){var t=this.getRoleKeyInView(e);return null==this._dictRoleInView&&(this._dictRoleInView={}),this._dictRoleInView.hasOwnProperty(t)&&0<this._dictRoleInView[t].size()?this._dictRoleInView[t].get():(this._dictRoleInView.hasOwnProperty(t)||(this._dictRoleInView[t]=new cc.NodePool),a.default.Instance.loadOther(t))},e.prototype.putRoleInView=function(e,t){var n=this.getRoleKeyInView(e);this._dictRoleInView.hasOwnProperty(n)||(this._dictRoleInView[n]=new cc.NodePool),this._dictRoleInView[n].put(t)},e.prototype.getRoleInfoByRoleType=function(e){var t={point:2,star:1};switch(e){case o.C.RoleType.QQ:t.point=2,t.star=1,t.skill=0,t.buyType=0,t.buyNum=0;break;case o.C.RoleType.Duck:t.point=6,t.star=2,t.skill=0,t.buyType=1,t.buyNum=2e3;break;case o.C.RoleType.Cat:t.point=4,t.star=2,t.skill=3,t.buyType=1,t.buyNum=2e3;break;case o.C.RoleType.Octopus:t.point=6,t.star=2,t.skill=0,t.buyType=1,t.buyNum=1600;break;case o.C.RoleType.Bird:t.point=6,t.star=2,t.skill=2,t.buyType=1,t.buyNum=1600;break;case o.C.RoleType.Whale:t.point=4,t.star=2,t.skill=4,t.buyType=1,t.buyNum=2e3}return t},e.Instance=new t,e=t=__decorate([r],e)}());n.default=s,cc._RF.pop()},{"../C":"C","../Tools/FYResMgr":"FYResMgr"}],SpriteAnim:[function(e,t,n){"use strict";cc._RF.push(t,"5409df77AtErqReLxhwJbC4","SpriteAnim"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas=null,e.nAnimLength=0,e.nTimes=.05,e.bLimit=!1,e.sFramePrefix="",e.targetNode=null,e.targetSprite=null,e.targetMask=null,e.nFrameIdx=0,e}return __extends(e,t),e.prototype.onEnable=function(){this.targetSprite=this.targetNode.getComponent(cc.Sprite),this.targetMask=this.targetNode.getComponent(cc.Mask),this.playAnim()},e.prototype.onDisable=function(){},e.prototype.playAnim=function(){this.nFrameIdx=0,null==this.targetSprite||this.bLimit||(cc.log("sprite anim limit"),this.schedule(this.onSpriteFrame,this.nTimes,this.nAnimLength)),null!=this.targetMask&&(cc.log("mask anim not limit"),this.schedule(this.onSpriteFrame,.1,cc.macro.REPEAT_FOREVER)),null!=this.targetSprite&&this.bLimit&&(cc.log("sprite anim not limit"),this.schedule(this.onSpriteFrame,this.nTimes,cc.macro.REPEAT_FOREVER))},e.prototype.padding=function(e,t){for(var n=(e+"").length;n<t;n=e.length)e="0"+e;return e},e.prototype.onSpriteFrame=function(){if(null!=this.atlas){if(this.nFrameIdx=this.nFrameIdx+1,null!=this.targetSprite)if(this.nFrameIdx==this.nAnimLength){if(this.bLimit){this.nFrameIdx=1;var e=this.atlas.getSpriteFrame(this.sFramePrefix+this.nFrameIdx);this.targetSprite.spriteFrame=e}}else{e=this.atlas.getSpriteFrame(this.sFramePrefix+this.nFrameIdx);this.targetSprite.spriteFrame=e}if(null!=this.targetMask)if(this.nFrameIdx==this.nAnimLength+1){this.nFrameIdx=1;e=this.atlas.getSpriteFrame(this.sFramePrefix+this.padding(this.nFrameIdx,2));this.targetMask.spriteFrame=e}else{e=this.atlas.getSpriteFrame(this.sFramePrefix+this.padding(this.nFrameIdx,2));this.targetMask.spriteFrame=e}}},__decorate([i(cc.SpriteAtlas)],e.prototype,"atlas",void 0),__decorate([i({type:cc.Integer})],e.prototype,"nAnimLength",void 0),__decorate([i({type:cc.Float})],e.prototype,"nTimes",void 0),__decorate([i(cc.Boolean)],e.prototype,"bLimit",void 0),__decorate([i({type:cc.String})],e.prototype,"sFramePrefix",void 0),__decorate([i(cc.Node)],e.prototype,"targetNode",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],TestBoLang:[function(e,t,n){"use strict";cc._RF.push(t,"ccb94MB/zpKLbLlRnkwUYfn","TestBoLang"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMask=null,e}return __extends(e,t),e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},__decorate([i(cc.Node)],e.prototype,"nodeMask",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],UIAdvPanel:[function(e,t,n){"use strict";cc._RF.push(t,"965241VW8ZLdZ1kXO8fO0Jp","UIAdvPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/FYSDKMgr"),a=e("../C"),i=e("../Tools/FYBaseUIPanel"),r=e("../Tools/FYUIMgr"),s=cc._decorator,l=s.ccclass,c=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labCountDown=null,e.btnView=null,e.btnPass=null,e.sprCountDown=null,e.reviveCall=null,e.closeCall=null,e._nCountDown=0,e.bIsClick=!1,e}return __extends(e,t),e.prototype.onShow=function(e,t){var n=t[0],o=t[1];this.initUI(n,o)},e.prototype.initUI=function(e,t){this.node.active=!0,this.reviveCall=e,this.closeCall=t,this.btnView.node.active=!0,this.btnPass.node.active=!1,this.unschedule(this.onCountDownCall),this._nCountDown=10,this.sprCountDown.fillRange=0,this.labCountDown.string="10",this.schedule(this.onCountDownCall,1,10)},e.prototype.onCountDownCall=function(){this._nCountDown--,this.labCountDown.string=this._nCountDown.toString(),this.sprCountDown.fillRange=this._nCountDown/10-1,7==this._nCountDown&&(this.btnPass.node.active=!0),0==this._nCountDown&&this.onClickPass()},e.prototype.onClickView=function(){if(!this.bIsClick){this.bIsClick=!0;var t=this;this.unschedule(this.onCountDownCall);o.default.Instance.wxShowAd(function(e){e?null!=t.reviveCall&&(t.reviveCall(),t.reviveCall=null,r.default.Instance.hide(a.C.UIPath.UIAdvPanel)):t.onClickPass(),wx.hideToast(),t.bIsClick=!1},a.C.AdUnitIdType.Revive),this.btnPass.node.active=!0,o.default.Instance.wxIsWx()&&wx.showToast({title:"广告加载中",icon:"loading",duration:6e4})}},e.prototype.onClickPass=function(){null!=this.closeCall&&(this.closeCall(),this.closeCall=null,r.default.Instance.hide(a.C.UIPath.UIAdvPanel)),o.default.Instance.wxIsWx()&&wx.hideToast()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnView.node.scale=1,this.btnPass.node.scale=1.5,o.default.Instance.wxIsWx()&&wx.hideToast()},__decorate([c(cc.Label)],e.prototype,"labCountDown",void 0),__decorate([c(cc.Button)],e.prototype,"btnView",void 0),__decorate([c(cc.Button)],e.prototype,"btnPass",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprCountDown",void 0),e=__decorate([l],e)}(i.default);n.default=d,cc._RF.pop()},{"../C":"C","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr"}],UIBackPackPanel:[function(e,t,n){"use strict";cc._RF.push(t,"1b2d2Kjw8BJuLo4weaONwGl","UIBackPackPanel"),Object.defineProperty(n,"__esModule",{value:!0});var l=e("../Tools/FYUtility"),o=e("../Tools/FYMessenger"),c=e("../Tools/FYSDKMgr"),d=e("../RoleConfig"),u=e("../C"),a=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYUIMgr"),r=cc._decorator,s=r.ccclass,p=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.btnBack=null,e}return __extends(e,t),e.prototype.onEnable=function(){o.default.Instance.send(u.C.MsgType.RefreshGameClubBtn,!1),this.initUI()},e.prototype.onDisable=function(){o.default.Instance.send(u.C.MsgType.RefreshGameClubBtn,!0),this.btnBack.scale=1},e.prototype.onClickBack=function(){o.default.Instance.send(u.C.MsgType.PlayClickAudio),i.default.Instance.hide(u.C.UIPath.UIBackPackPanel)},e.prototype.getPropTypeByIdx=function(e){var t=null;switch(e){case 0:t=u.C.PropType.kHammer;break;case 1:t=u.C.PropType.kSuperStar}return t},e.prototype.initUI=function(){this.content.removeAllChildren();for(var e=c.default.Instance.loadLocalJsonData(u.C.JsonDataKey.userOwnProp),t=0;t<u.C.getCurPropCount();t++){var n=l.default.addChild(this.content,this.item),o=n.getChildByName("PropIcon").getComponent(cc.Sprite),a="prop_"+(t+1).toString();l.default.changeSpriteFrame(o,"atlas/common/common",a);var i=n.getChildByName("labNum").getComponent(cc.Label);i.string=null!=e?e[this.getPropTypeByIdx(t)]:"0";var r=n.getChildByName("Title").getComponent(cc.Sprite),s=d.default.Instance.getPropInfoByPropId(this.getPropTypeByIdx(t));l.default.changeSpriteFrame(r,"atlas/common/common",s.desc),n.getChildByName("labTipsNum").getComponent(cc.Label).string=s.limit.toString()}},__decorate([p(cc.Node)],e.prototype,"content",void 0),__decorate([p(cc.Node)],e.prototype,"item",void 0),__decorate([p(cc.Node)],e.prototype,"btnBack",void 0),e=__decorate([s],e)}(a.default);n.default=h,cc._RF.pop()},{"../C":"C","../RoleConfig":"RoleConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIDailySharePanel:[function(e,t,n){"use strict";cc._RF.push(t,"32b78ytRf9I4aT7x0F6HCLh","UIDailySharePanel"),Object.defineProperty(n,"__esModule",{value:!0});var h=e("../Tools/FYSDKMgr"),a=e("../Tools/FYUtility"),f=e("../Tools/FYMessenger"),y=e("../GetInfo"),m=e("../C"),o=e("../Tools/FYBaseUIPanel"),g=e("../Tools/FYGlobalVarMgr"),C=e("../Tools/FYUIMgr"),i=cc._decorator,r=i.ccclass,s=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rewardList=[[{type:m.C.GetType.kGetOrange,ID:m.C.PropType.kNone,value:5}],[{type:m.C.GetType.kGetProp,ID:m.C.PropType.kHammer,value:1}],[{type:m.C.GetType.kGetOrange,ID:m.C.PropType.kNone,value:5}],[{type:m.C.GetType.kGetProp,ID:m.C.PropType.kSuperStar,value:1}],[{type:m.C.GetType.kGetOrange,ID:m.C.PropType.kNone,value:5},{type:m.C.GetType.kGetProp,ID:m.C.PropType.kHammer,value:1},{type:m.C.GetType.kGetProp,ID:m.C.PropType.kSuperStar,value:1}]],e._shareNum=0,e.listItem=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"rewardList",{get:function(){return this._rewardList},set:function(e){this._rewardList=e},enumerable:!0,configurable:!0}),e.prototype.clickClose=function(){f.default.Instance.send(m.C.MsgType.PlayClickAudio),C.default.Instance.hide(m.C.UIPath.UIDailySharePanel)},e.prototype.getReward=function(){var e=Number(this._shareNum),t=this.rewardList[e];for(var n in console.log("------reward----rewardlist---",t,this.rewardList),t){var o=t[n];if(o){var a=o.type;if(a==m.C.GetType.kGetOrange){var i=h.default.Instance.loadLocalData(m.C.DataKey.orangeNum,"0");h.default.Instance.saveLocalData(m.C.DataKey.orangeNum,Number(i)+o.value),f.default.Instance.send(m.C.MsgType.RefreshOrange)}else if(a==m.C.GetType.kGetProp){var r=h.default.Instance.loadLocalJsonData(m.C.JsonDataKey.userOwnProp),s=r[o.ID]||0,l=Number(s)+o.value;r[o.ID]=l,h.default.Instance.saveLocalJsonData(m.C.JsonDataKey.userOwnProp,r),f.default.Instance.send(m.C.MsgType.RefreshProp)}else if(a==m.C.GetType.kGetRole){var c=h.default.Instance.loadLocalJsonData(m.C.JsonDataKey.userOwnRole)||{},d=o.ID;c[d+""]=1,h.default.Instance.saveLocalJsonData(m.C.JsonDataKey.userOwnRole,c);var u=h.default.Instance.loadLocalJsonData(m.C.JsonDataKey.userRoleExpCard)||{};u[d+""]=null,h.default.Instance.saveLocalJsonData(m.C.JsonDataKey.userRoleExpCard,u)}}}var p=new y.default;p.getType=t[0].type,p.propType=t[0].ID,p.roleId=Number(t[0].ID),p.getNum=t[0].value,C.default.Instance.show(m.C.UIPath.UIGetMenuPanel,g.default.Instance.NodeTop,p,function(){if(t[1]){var e=new y.default;e.getType=t[1].type,e.roleId=Number(t[0].ID),e.propType=t[1].ID,e.getNum=t[1].value,C.default.Instance.show(m.C.UIPath.UIGetMenuPanel,g.default.Instance.NodeTop,e,function(){if(t[2]){var e=new y.default;e.getType=t[2].type,e.roleId=Number(t[0].ID),e.propType=t[2].ID,e.getNum=t[2].value,C.default.Instance.show(m.C.UIPath.UIGetMenuPanel,g.default.Instance.NodeTop,e)}})}})},e.prototype.clickSaveImage=function(){if(h.default.Instance.wxIsWx()){var e=h.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share5.jpg");wx.saveImageToPhotosAlbum({filePath:e,success:function(e){console.log("success",e),wx.showToast({title:"已保存到相册！",icon:"success"})},fail:function(e){console.log(e),wx.showToast({title:"保存到相册失败！",icon:"loading"})}})}},e.prototype.clickShare=function(){if(f.default.Instance.send(m.C.MsgType.PlayClickAudio),h.default.Instance.wxIsWx()){var t=this,e=h.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share1.png");h.default.Instance.hsdkShareMessage({shareInfo:{title:"美味甜甜圈，今天你吃了吗？",imageUrl:e,gameScene:m.C.ShareState.InviteFriend,query:"form="+m.C.ShareState.InviteFriend+"&time="+Date.now()},success:function(e){t.shareRefreshUI(),console.log("-----------每日分享成功",e)}})}else this.shareRefreshUI()},e.prototype.shareRefreshUI=function(){this._shareNum=Number(this._shareNum),this._shareNum<4&&(this._shareNum+=1,this.getReward(),h.default.Instance.saveLocalData(m.C.DataKey.dailyShareGetNum,""+this._shareNum),h.default.Instance.saveLocalData(m.C.DataKey.dailyShareLastTime,Date.now())),this.refreshUI(),f.default.Instance.send(m.C.MsgType.RefreshShareState)},e.prototype.refreshUI=function(){var e=h.default.Instance.loadLocalData(m.C.DataKey.dailyShareLastTime,"0"),t=Date.now();for(var n in!a.default.isSameDay(e)&&0<t-e&&(this._shareNum=-1),this.listItem){var o=this.listItem[n];Number(n)<=Number(this._shareNum)?o.getChildByName("hadSign").active=!0:o.getChildByName("hadSign").active=!1}},e.prototype.onEnable=function(){var e=h.default.Instance.loadLocalData(m.C.DataKey.dailyShareLastTime,"0"),t=Date.now();!a.default.isSameDay(e)&&0<=t-e?this._shareNum=-1:this._shareNum=Number(h.default.Instance.loadLocalData(m.C.DataKey.dailyShareGetNum,"-1")),f.default.Instance.send(m.C.MsgType.RefreshGameClubBtn,!1),this.refreshUI()},e.prototype.onDisable=function(){f.default.Instance.send(m.C.MsgType.RefreshGameClubBtn,!0)},__decorate([s(Array(cc.Node))],e.prototype,"listItem",void 0),e=__decorate([r],e)}(o.default);n.default=l,cc._RF.pop()},{"../C":"C","../GetInfo":"GetInfo","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIGameOverPanel:[function(e,t,n){"use strict";cc._RF.push(t,"4a891zqVb9EfIK/KONhCi4Z","UIGameOverPanel"),Object.defineProperty(n,"__esModule",{value:!0});var K=e("../GameMain"),H=e("../Tools/FYUtility"),J=e("../Tools/FYMessenger"),V=e("../Tools/FYSDKMgr"),q=e("../Tools/FYUtility"),o=e("../Tools/FYAudioCtl"),s=e("../DailyLevelConfig"),d=e("../GetInfo"),W=e("../C"),z=e("../Game/RoleMgr"),a=e("../Tools/FYBaseUIPanel"),u=e("../Tools/FYUIMgr"),p=e("../Tools/FYGlobalVarMgr"),j=e("../EffectMgr"),i=cc._decorator,r=i.ccclass,l=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score2=null,e.maxScore=null,e.labGold=null,e.showHigh=null,e.showHighAnim=null,e.fxBlink=null,e.fxEffectParent=null,e.nodeLight=null,e.nodeTipsNormal=null,e.nodeTipsLimit=null,e.btnRestart=null,e.btnShare=null,e.btnEnd=null,e.btnAssist=null,e.btnDailyBack=null,e.sprBtnDailyNext=null,e.sprDailyNext=null,e.bg=null,e.nodeMask=null,e.nodeTimerGrid=null,e.nodeTimerItem=null,e.scorePanel=null,e.dailyPanel=null,e.sprSuccessBgWin=null,e.sprSuccessBgLose=null,e.sprSuccess=null,e.nodeStarReward=null,e.nodeShowGameOverRank=null,e.btnShowRank=null,e.nodeShowRank=null,e.nodeGameOverShareTips=null,e.nodeGameOverShareTips2=null,e.nodeRoleLoad=null,e.labRolePoint=null,e.btnSeeGroup=null,e._dailyType=null,e._bUpdateSubDomainCanvas=!1,e.bClickShare=!1,e._tex=null,e}return __extends(e,t),e.prototype.onShow=function(e,t){console.log("open game over panel!");var n=t[0],o=t[1],a=t[2],i=t[3],r=t[4],s=t[5],l=t[6];this.initUI(n,o,a,i,r,s,l)},e.prototype.initUI=function(e,t,n,o,a,i,r){void 0===i&&(i=null),void 0===r&&(r=null),this._dailyType=i,this._curGameMode=e,this.bClickShare=!1;var s=V.default.Instance.loadLocalData(W.C.DataKey.userRoleId),l=z.default.Instance.getRoleInfoByRoleType(s).point;null==l&&(l=0);var c=Math.floor(t*l/100);console.log("this._curGameMode"+this._curGameMode,t,c);var d=t+c;this.btnEnd.node.active=!0,this.nodeGameOverShareTips.active=!1,this.nodeGameOverShareTips2.active=!1,null!=n&&(n+=c,this.maxScore.string=n.toString()),this.score2.string=t.toString();var u=this,p=0,h=Math.ceil(c/20),f=function(){c<=(p+=h)&&(p=c,u.unschedule(f)),u.score2.string=(p+t).toString()};this.unschedule(f),this.schedule(f,.05,20);var y=0,m=Math.floor(d);y=m<300?0:m<600?1:Math.floor(d/200);var g=V.default.Instance.loadLocalData(W.C.DataKey.orangeNum),C=parseInt(g)+y;if(V.default.Instance.saveLocalData(W.C.DataKey.orangeNum,C.toString()),V.default.Instance.cca_getVirtual("金币",y,"结算获取金币"),J.default.Instance.send(W.C.MsgType.RefreshOrange),this.labGold.string="X"+y.toString(),this.showHigh.active=o){this.showHighAnim.play(),this.fxBlink.active=!0;for(var v=0;v<3;v++){var I=v;0==I&&this.scheduleOnce(function(){var e=new cc.Vec2(-76,287);j.default.Instance.playEffect(W.C.EffectName.fxGameOverExplore,e,1,this.fxEffectParent)},0),1==I&&this.scheduleOnce(function(){var e=new cc.Vec2(-182,-17);j.default.Instance.playEffect(W.C.EffectName.fxGameOverExplore,e,1,this.fxEffectParent)},.4),2==I&&this.scheduleOnce(function(){var e=new cc.Vec2(260,175);j.default.Instance.playEffect(W.C.EffectName.fxGameOverExplore,e,1,this.fxEffectParent)},1.12)}}this.bg.active=!0,this.nodeLight.active=!0;var _=cc.rotateBy(8,360).repeatForever();if(this.nodeLight.runAction(_),this._curGameMode==W.C.GameMode.C&&a==W.C.GameOverType.kTimeLimit?(this.nodeTipsNormal.active=!1,this.nodeTipsLimit.active=!0):(this.nodeTipsNormal.active=!0,this.nodeTipsLimit.active=!1),this._curGameMode!=W.C.GameMode.E){this.scorePanel.active=!0,this.dailyPanel.active=!1,J.default.Instance.send(W.C.MsgType.PlayGameOverAudio),this.btnAssist.node.active=!1,this.btnShare.node.active=!0,this.btnDailyBack.node.active=!1,this.sprBtnDailyNext.node.active=!1,this.nodeShowGameOverRank.node.active=!0;var S=V.default.Instance.hsdkGetSessionInfo(),T="";S&&null!=S.h5game_openid&&null!=S.h5game_openid&&""!=S.h5game_openid&&(T=S.h5game_openid),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.ShowGameOverRank,[{openId:T}]),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.HideMainStar),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.HideSurpassFriend),this.schedule(this.updaetSubDomainCanvas,.1,10),this.nodeRoleLoad.removeAllChildren();cc.director.getScene().getChildByName("Canvas").getComponent(K.default);var b=z.default.Instance.getRoleInView(s.toString()),P=(q.default.addChild(this.nodeRoleLoad,b),0);this.labRolePoint.string="0";var D=Math.ceil(c/20),M=function(){c<=(P+=D)&&(P=c,u.unschedule(M)),u.labRolePoint.string=P.toString()};this.unschedule(M),this.schedule(M,.05,20)}else{this.nodeShowGameOverRank.node.active=!1,this.scorePanel.active=!1,this.dailyPanel.active=!0,this.btnDailyBack.node.active=o;var w=(this.sprBtnDailyNext.node.active=o)?"txtDailySuccess":"txtDailyFailed";if(H.default.changeSpriteFrame(this.sprSuccess,"atlas/common/common",w),this.sprSuccessBgWin.active=o,this.sprSuccessBgLose.active=!o,this.btnAssist.node.active=!o,this.btnShare.node.active=o){0==i?(V.default.Instance.saveLocalData(W.C.DataKey.dailyNormalState,1),console.log("dailyNormalState:"+V.default.Instance.loadLocalData(W.C.DataKey.dailyNormalState))):(V.default.Instance.saveLocalData(W.C.DataKey.dailyDiffcultState,1),console.log("dailyDiffcultState:"+V.default.Instance.loadLocalData(W.C.DataKey.dailyDiffcultState))),J.default.Instance.send(W.C.MsgType.PlayGameOverAudio),this.btnEnd.node.active=!1;var R=0==this._dailyType?W.C.DataKey.dailyDiffcultState:W.C.DataKey.dailyNormalState,G=1==parseInt(V.default.Instance.loadLocalData(R)),N=G?"btnDailyNext2":"btnDailyNext";H.default.changeSpriteFrame(this.sprDailyNext,"atlas/common/common",N);var A=G?"btnGray":"btnGreen";if(H.default.changeSpriteFrame(this.sprBtnDailyNext,"atlas/common/common",A),G)this.sprBtnDailyNext.node.getComponent(cc.Button).enabled=!1}else this.nodeLight.active=!1;if(this.nodeStarReward.active=null!=r,this.nodeTimerGrid.removeAllChildren(),null!=r){var k=r;cc.log("_seconds "+k);var L,E,x;x=Math.floor(k%60),E=Math.floor(k%3600/60),L=Math.floor(k/3600),this.nodeTimerGrid.removeAllChildren(),0!=L?(this.nodeTimerGrid.setContentSize(600,this.nodeTimerItem.getContentSize().height),this.createTimer("timeHour",L),this.createTimer("timeMinute",E)):0!=E?(this.nodeTimerGrid.setContentSize(400,this.nodeTimerItem.getContentSize().height),this.createTimer("timeMinute",E)):this.nodeTimerGrid.setContentSize(200,this.nodeTimerItem.getContentSize().height),this.createTimer("timeSecond",x),this.nodeStarReward.getChildByName("num").getComponent(cc.Label).string=0==i?"X1":"X2"}var F=V.default.Instance.loadLocalJsonData(W.C.JsonDataKey.dailyShareGetPropTotal);if(o){var B=0==this._dailyType?F[W.C.DailyShareType.dailyNormalWin]:F[W.C.DailyShareType.dailyDiffcultWin];null!=B&&0==B&&(this.nodeGameOverShareTips2.active=!0)}else{var U=0==this._dailyType?V.default.Instance.loadLocalData(W.C.DataKey.DailyModeNFirstTime):V.default.Instance.loadLocalData(W.C.DataKey.DailyModeDFirstTime);if(0==parseInt(U))if(0==this._dailyType){null!=(O=F[W.C.DailyShareType.dailyNormalLose])&&0==O&&(this.nodeGameOverShareTips.active=!0)}else{var O,Y=parseInt(V.default.Instance.loadLocalJsonData(W.C.DataKey.DailyDiffcultAskHelpSteps));(null!=(O=F[W.C.DailyShareType.dailyDiffcutLose])&&0==O||Y<3)&&(this.nodeGameOverShareTips.active=!0)}}}},e.prototype.createTimer=function(e,t){var n=q.default.addChild(this.nodeTimerGrid,this.nodeTimerItem),o=n.getChildByName("MinT").getComponent(cc.Sprite);q.default.changeSpriteFrame(o,"atlas/common/common",e),n.getChildByName("Min").getComponent(cc.Label).string=t},e.prototype.onClickRestart=function(){J.default.Instance.send(W.C.MsgType.PlayClickAudio),J.default.Instance.send(W.C.MsgType.StartGame,this._curGameMode,!0),u.default.Instance.hide(W.C.UIPath.UIGameOverPanel),this._curGameMode!=W.C.GameMode.E?V.default.Instance.cca_onEvent(W.C.getModeNameByType(this._curGameMode)+W.C.ccaEventType.GameModeRePlay):0==this._dailyType?V.default.Instance.cca_onEvent(W.C.ccaEventType.DailyNormalReplay):V.default.Instance.cca_onEvent(W.C.ccaEventType.DailyDiffcultReplay)},e.prototype.onClickEnd=function(){console.log("onClickEnd"),J.default.Instance.send(W.C.MsgType.ActiveGameMenu,!1),u.default.Instance.show(W.C.UIPath.UIMainPanel),u.default.Instance.hide(W.C.UIPath.UIGameOverPanel),J.default.Instance.send(W.C.MsgType.PlayClickAudio),this._curGameMode==W.C.GameMode.C&&(o.default.Instance.playMusic(W.C.MusicType.MainBg),J.default.Instance.send(W.C.MsgType.ChangeBgAudio,"GameBg"))},e.prototype.onClickShare=function(){if(!this.bClickShare){this.bClickShare=!0,J.default.Instance.send(W.C.MsgType.PlayClickAudio);var c=this,t=function(){if(c._curGameMode!=W.C.GameMode.E)V.default.Instance.cca_onEvent(W.C.getModeNameByType(c._curGameMode)+W.C.ccaEventType.GameModeShare);else{var e,t=!1,n=V.default.Instance.loadLocalJsonData(W.C.JsonDataKey.dailyShareGetPropTotal);if(0==c._dailyType)null!=(e=n[W.C.DailyShareType.dailyNormalWin])&&0==e&&(n[W.C.DailyShareType.dailyNormalWin]=1,t=!0),V.default.Instance.cca_onEvent(W.C.ccaEventType.DailyNormalShare);else null!=(e=n[W.C.DailyShareType.dailyDiffcultWin])&&0==e&&(n[W.C.DailyShareType.dailyDiffcultWin]=1,t=!0),V.default.Instance.cca_onEvent(W.C.ccaEventType.DailyDiffcultShare);if(V.default.Instance.saveLocalJsonData(W.C.JsonDataKey.dailyShareGetPropTotal,n),console.log("-----------每日挑战分享成功,可以获得道具：",t),t){c.nodeGameOverShareTips2.active=!1;var o=new d.default,a=V.default.Instance.loadLocalJsonData(W.C.JsonDataKey.userOwnProp);o.getType=W.C.GetType.kGetProp,o.getNum=1;var i=q.default.getRangeRandom(1,W.C.getCurPropCount()),r=c.getPropTypeByIdx(i),s=a[o.propType=r],l=parseInt(s)+o.getNum;a[r]=l,V.default.Instance.saveLocalJsonData(W.C.JsonDataKey.userOwnProp,a),V.default.Instance.cca_itemGet(W.C.getPropItemID(r),r,o.getNum,"每日挑战首次失败分享获得"),u.default.Instance.show(W.C.UIPath.UIGetMenuPanel,p.default.Instance.NodeTop,o)}}};if(this._curGameMode==W.C.GameMode.A||this._curGameMode==W.C.GameMode.C){var e=W.C.Width()/2,n=W.C.Height()/2,o=cc.game.canvas.width,a=cc.game.canvas.height;console.log("-------------------------------",e,n,o,a);var i=sharedCanvas;console.log("-------------------------------",i.width,i.height),c.unschedule(c.updaetSubDomainCanvas),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.ShowGameOverShare,[{score:this.score2.string,mode:this._curGameMode}]),this.scheduleOnce(function(){i.toTempFilePath({x:0,y:i.height/2-.8*i.width/2,width:i.width,height:.8*i.width,destWidth:500,destHeight:400,success:function(e){c.scheduleOnce(function(){c.bClickShare=!1},.2),c.unschedule(c.updaetSubDomainCanvas),c.schedule(c.updaetSubDomainCanvas,.2,3),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.HideGameOverShare),V.default.Instance.hsdkShareMessage({shareInfo:{title:"超有趣的甜甜圈消除游戏，看看你能拿多少分？",imageUrl:e.tempFilePath,gameScene:W.C.ShareState.DailyShare,query:"form="+W.C.ShareState.DailyShare},success:function(e){console.log("-----------每日挑战分享成功",e),t()},complete:function(e){console.log("-----------每日挑战接口调用成功",e)}})}})},.2)}else{var r=["超有趣的甜甜圈消除游戏，看看你能拿多少分？","一直被追赶，从未被超越!","手速大比拼，看看你能排第几？","来挑战我吧，超过我算我输！","我的智力已经超群，不信大可一试！"][this._curGameMode]||"",s="res/raw-assets/resources/share/"+["share1.png","share2_2.png","share2_3.png","share2_4.png","share2_5.png"][this._curGameMode||0],l=V.default.Instance.wxMd5Pipe(s);console.log("-----------分享路径：  ",l),cc.sys.platform==cc.sys.WECHAT_GAME&&(this.bClickShare=!1,V.default.Instance.hsdkShareMessage({shareInfo:{title:r,imageUrl:l,gameScene:W.C.ShareState.DailyShare,query:"form="+W.C.ShareState.DailyShare},success:function(e){console.log("-----------每日挑战分享成功",e),t()}}))}}},e.prototype.onClickAssist=function(){if(J.default.Instance.send(W.C.MsgType.PlayClickAudio),cc.sys.platform==cc.sys.WECHAT_GAME){var a=V.default.Instance.hsdkGetSessionInfo(),i=this,r=V.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share3.png");console.log("-----------分享路径：  ",r),V.default.Instance.hsdkShareMessage({shareInfo:{title:"这一关实在是太难了，求大神破解之法",imageUrl:r,gameScene:W.C.ShareState.DailyAssist,query:"form="+W.C.ShareState.DailyAssist+"&mode="+i._dailyType+"&id="+a.h5game_openid+"&time="+Date.now()},success:function(e){console.log("-----------每日助战分享成功",e,{title:"这一关实在是太难了，求大神破解之法",imageUrl:r,gameScene:W.C.ShareState.DailyAssist,query:"form="+W.C.ShareState.DailyAssist+"&mode="+i._dailyType+"&id="+a.h5game_openid+"&time="+Date.now()});var t=V.default.Instance.loadLocalJsonData(W.C.JsonDataKey.dailyShareGetPropTotal);if(0==i._dailyType){null!=(n=t[W.C.DailyShareType.dailyNormalLose])&&0==n&&(t[W.C.DailyShareType.dailyNormalLose]=1,!0,V.default.Instance.saveLocalJsonData(W.C.JsonDataKey.dailyShareGetPropTotal,t)),V.default.Instance.cca_onEvent(W.C.ccaEventType.DailyNormalAskHelpClick)}else{var n;null!=(n=t[W.C.DailyShareType.dailyDiffcutLose])&&0==n&&(t[W.C.DailyShareType.dailyDiffcutLose]=1,!0,V.default.Instance.saveLocalJsonData(W.C.JsonDataKey.dailyShareGetPropTotal,t));var o=parseInt(V.default.Instance.loadLocalJsonData(W.C.DataKey.DailyDiffcultAskHelpSteps));3<++o&&(o=-1),V.default.Instance.saveLocalJsonData(W.C.DataKey.DailyDiffcultAskHelpSteps,o.toString()),V.default.Instance.cca_onEvent(W.C.ccaEventType.DailyDiffcultAskHelpClick)}}})}},e.prototype.getPropTypeByIdx=function(e){var t=null;switch(e){case 1:t=W.C.PropType.kHammer;break;case 2:t=W.C.PropType.kSuperStar}return t},e.prototype.onClickMask=function(){},e.prototype.onClickBackToDailyMenu=function(){J.default.Instance.send(W.C.MsgType.ActiveGameMenu,!1),u.default.Instance.hide(W.C.UIPath.UIMainPanel),u.default.Instance.hide(W.C.UIPath.UIGameOverPanel),u.default.Instance.show(W.C.UIPath.UISelectDailyPanel,p.default.Instance.NodeTop,this._dailyType),J.default.Instance.send(W.C.MsgType.PlayClickAudio)},e.prototype.onClickNextToGameE=function(){u.default.Instance.hide(W.C.UIPath.UIGameOverPanel);var e=0==this._dailyType?1:0,t=(q.default.getMonthWeek(),new Date),n=t.getMonth()+1,o=t.getDate(),a=n.toString()+o.toString();1==n&&(a="0"+n.toString()+o.toString());var i=0==e?s.default.Instance.getNormalLevelInfoByDays(a):s.default.Instance.getDiffcultLevelInfoByDays(a),r=0==e?s.default.Instance.getNormalRandomInfoByDays(a):s.default.Instance.getDiffcultRandomInfoByDays(a);J.default.Instance.send(W.C.MsgType.onSetDailyConfigPath,e,i,r),J.default.Instance.send(W.C.MsgType.StartGame,W.C.GameMode.E,!0),J.default.Instance.send(W.C.MsgType.PlayClickAudio)},e.prototype.addListener=function(){t.prototype.addListener.call(this),this.btnShare.node.on(cc.Node.EventType.TOUCH_END,this.onClickShare,this),this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this),this.nodeMask.on(cc.Node.EventType.MOUSE_MOVE,this.onClickMask,this),this.btnShowRank.on(cc.Node.EventType.TOUCH_END,this.clickShowRank,this),this.btnSeeGroup.on(cc.Node.EventType.TOUCH_END,this.onClickGroupInRank,this)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this),this.btnShare.node.off(cc.Node.EventType.TOUCH_END,this.onClickShare,this),this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this),this.btnShowRank.off(cc.Node.EventType.TOUCH_END,this.clickShowRank,this),this.nodeMask.off(cc.Node.EventType.MOUSE_MOVE,this.onClickMask,this),this.btnSeeGroup.off(cc.Node.EventType.TOUCH_END,this.onClickGroupInRank,this)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),J.default.Instance.send(W.C.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.HideSurpassFriend),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.HideGameOverRank),this.btnRestart.node.scale=1,this.btnAssist.node.scale=1,this.btnShare.node.scale=1,this.btnEnd.node.scale=1,this.btnDailyBack.node.scale=1,this.sprBtnDailyNext.node.scale=1,this.fxBlink.active=!1,this.fxEffectParent.removeAllChildren(),J.default.Instance.send(W.C.MsgType.RefreshGameClubBtn,!0)},e.prototype.start=function(){this._tex=new cc.Texture2D},e.prototype.clickShowRank=function(){var e=V.default.Instance.hsdkGetSessionInfo(),t="";e&&null!=e.h5game_openid&&null!=e.h5game_openid&&""!=e.h5game_openid&&(t=e.h5game_openid),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.ShowRank,[{id:t}]),this.nodeShowRank.node.active=!0,this._bUpdateSubDomainCanvas=!0,this.nodeShowRank.node.getChildByName("back").once(cc.Node.EventType.TOUCH_END,this.clickHide,this)},e.prototype.clickHide=function(){this.nodeShowRank.node.active=!1,V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.HideRank),V.default.Instance.wxPostMessage(W.C.ToChildProgramMsgName.HideMainStar),this.schedule(this.updaetSubDomainCanvas,.1,20),this._bUpdateSubDomainCanvas=!1},e.prototype.onClickGroupInRank=function(e){J.default.Instance.send(W.C.MsgType.PlayClickAudio);var t=V.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share1.png");console.log("-----------分享路径：  ",t),V.default.Instance.hsdkShareMessage({shareInfo:{title:"超魔性的消除小游戏，看看你排第几?",imageUrl:t,gameScene:W.C.ShareState.ToSeeGroup,query:"form="+W.C.ShareState.ToSeeGroup},success:function(e){console.log("-----------群排行分享成功",e)}})},e.prototype.updaetSubDomainCanvas=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){if(!this._tex)return;this._tex.initWithElement(sharedCanvas),this._tex.handleLoadedTexture(),this.nodeShowGameOverRank.spriteFrame=new cc.SpriteFrame(this._tex),this.nodeShowRank.spriteFrame=new cc.SpriteFrame(this._tex)}},e.prototype.update=function(e){this._bUpdateSubDomainCanvas&&this.updaetSubDomainCanvas()},__decorate([l(cc.Label)],e.prototype,"score2",void 0),__decorate([l(cc.Label)],e.prototype,"maxScore",void 0),__decorate([l(cc.Label)],e.prototype,"labGold",void 0),__decorate([l(cc.Node)],e.prototype,"showHigh",void 0),__decorate([l(cc.Animation)],e.prototype,"showHighAnim",void 0),__decorate([l(cc.Node)],e.prototype,"fxBlink",void 0),__decorate([l(cc.Node)],e.prototype,"fxEffectParent",void 0),__decorate([l(cc.Node)],e.prototype,"nodeLight",void 0),__decorate([l(cc.Node)],e.prototype,"nodeTipsNormal",void 0),__decorate([l(cc.Node)],e.prototype,"nodeTipsLimit",void 0),__decorate([l(cc.Button)],e.prototype,"btnRestart",void 0),__decorate([l(cc.Button)],e.prototype,"btnShare",void 0),__decorate([l(cc.Button)],e.prototype,"btnEnd",void 0),__decorate([l(cc.Button)],e.prototype,"btnAssist",void 0),__decorate([l(cc.Button)],e.prototype,"btnDailyBack",void 0),__decorate([l(cc.Sprite)],e.prototype,"sprBtnDailyNext",void 0),__decorate([l(cc.Sprite)],e.prototype,"sprDailyNext",void 0),__decorate([l(cc.Node)],e.prototype,"bg",void 0),__decorate([l(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([l(cc.Node)],e.prototype,"nodeTimerGrid",void 0),__decorate([l(cc.Node)],e.prototype,"nodeTimerItem",void 0),__decorate([l(cc.Node)],e.prototype,"scorePanel",void 0),__decorate([l(cc.Node)],e.prototype,"dailyPanel",void 0),__decorate([l(cc.Node)],e.prototype,"sprSuccessBgWin",void 0),__decorate([l(cc.Node)],e.prototype,"sprSuccessBgLose",void 0),__decorate([l(cc.Sprite)],e.prototype,"sprSuccess",void 0),__decorate([l(cc.Node)],e.prototype,"nodeStarReward",void 0),__decorate([l(cc.Sprite)],e.prototype,"nodeShowGameOverRank",void 0),__decorate([l(cc.Node)],e.prototype,"btnShowRank",void 0),__decorate([l(cc.Sprite)],e.prototype,"nodeShowRank",void 0),__decorate([l(cc.Node)],e.prototype,"nodeGameOverShareTips",void 0),__decorate([l(cc.Node)],e.prototype,"nodeGameOverShareTips2",void 0),__decorate([l(cc.Node)],e.prototype,"nodeRoleLoad",void 0),__decorate([l(cc.Label)],e.prototype,"labRolePoint",void 0),__decorate([l(cc.Node)],e.prototype,"btnSeeGroup",void 0),e=__decorate([r],e)}(a.default);n.default=c,cc._RF.pop()},{"../C":"C","../DailyLevelConfig":"DailyLevelConfig","../EffectMgr":"EffectMgr","../Game/RoleMgr":"RoleMgr","../GameMain":"GameMain","../GetInfo":"GetInfo","../Tools/FYAudioCtl":"FYAudioCtl","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIGetMenuPanel:[function(e,t,n){"use strict";cc._RF.push(t,"53e58qi8aNEHqJhJEGNCIIF","UIGetMenuPanel"),Object.defineProperty(n,"__esModule",{value:!0});var y=e("../Tools/FYUtility"),m=e("../RoleConfig"),i=e("../Tools/FYMessenger"),g=e("../C"),o=e("../Tools/FYBaseUIPanel"),C=e("../Game/RoleMgr"),v=e("../Tools/FYResMgr"),r=e("../Tools/FYUIMgr"),a=cc._decorator,s=a.ccclass,l=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.btnSure=null,e.nodeLight=null,e.nodeMask=null,e.nodeRole=null,e.sprSkillDesc=null,e.nodeProp=null,e.nodeGold=null,e.nodeLoad=null,e.nodeTipsRole=null,e.nodeTipsGold=null,e.labScore1=null,e.labScore2=null,e.labNum1=null,e.labNum2=null,e.labSkillCount=null,e.nodeGrid=null,e.nodeStar=null,e.sprPropIcon=null,e.getInfo=null,e.delegateClose=null,e.nodeGetAnimGoldSet=null,e.nodeGetAnimGoldNum=null,e.labGetGoldNum=null,e.nodeGetAnimPropSet=null,e.nodeGetAnimGoldItem=null,e.nodeGetAnimPropItem=null,e.nodeWidget=null,e.bClickSureState=!1,e}return __extends(e,t),e.prototype.getRoleSkillDescIdx=function(e){var t=0;switch(e){case g.C.RoleType.QQ:t=1;break;case g.C.RoleType.Duck:t=2;break;case g.C.RoleType.Cat:t=3;break;case g.C.RoleType.Octopus:t=4;break;case g.C.RoleType.Bird:t=3}return t},e.prototype.onShow=function(e,t){var n=t[0],o=t[1],a=t[2];console.log(n,o,a),this.initUI(n,o,a)},e.prototype.initUI=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=-1),this.delegateClose=t,this.anim.play(),this.btnSure.getComponent(cc.Sprite).node.color=this.btnSure.normalColor;var o=cc.rotateBy(8,360).repeatForever();if(this.nodeLight.runAction(o),this.getInfo=e,this.nodeRole.active=!1,this.nodeGold.active=!1,this.nodeProp.active=!1,this.labNum1.node.active=!1,this.nodeTipsRole.active=!1,this.nodeTipsGold.active=!1,this.getInfo.getType==g.C.GetType.kGetOrange){if(0==n){var a=v.default.Instance.loadSpriteFrame("getAllRoles");this.sprPropIcon.spriteFrame=a,this.nodeTipsGold.active=!0}if(1==n){var i=v.default.Instance.loadSpriteFrame("unlockRoleInGetMenu");console.log("=====================================",i),this.nodeTipsGold.getComponent(cc.Sprite).spriteFrame=i,this.nodeTipsGold.active=!0}this.nodeGold.active=!0,this.labNum1.node.active=!0}else if(this.getInfo.getType==g.C.GetType.kGetProp){this.nodeProp.active=!0,this.labNum1.node.active=!0;var r=m.default.Instance.getPropInfoByPropId(e.propType).icon,s=v.default.Instance.loadSpriteFrame(r);this.sprPropIcon.spriteFrame=s}else if(this.getInfo.getType==g.C.GetType.kGetRole||this.getInfo.getType==g.C.GetType.kGetExpCard){2==n&&(this.nodeTipsRole.active=!0),this.nodeRole.active=!0,this.nodeLoad.removeAllChildren();var l=C.default.Instance.getRoleInView(this.getInfo.roleId.toString()),c=(y.default.addChild(this.nodeLoad,l),C.default.Instance.getRoleInfoByRoleType(this.getInfo.roleId.toString()));this.labScore1.string=c.point.toString(),this.labScore2.string=c.point.toString();var d=this.getRoleSkillDescIdx(this.getInfo.roleId.toString()),u="prizeSkillDesc"+d,p=v.default.Instance.loadSpriteFrame(u);this.sprSkillDesc.spriteFrame=p,3!=d&&5!=d?this.labSkillCount.node.active=!1:(this.labSkillCount.node.active=!0,this.labSkillCount.string=c.skill+"X"+c.skill);var h=c.star;this.nodeGrid.removeAllChildren();for(var f=0;f<h;f++)y.default.addChild(this.nodeGrid,this.nodeStar)}null!=this.labNum1&&null!=this.labNum2&&(this.labNum1.string=this.getInfo.getNum.toString(),this.labNum2.string="X"+this.getInfo.getNum.toString())},e.prototype.onClickBtnSure=function(){if(!this.bClickSureState)if(i.default.Instance.send(g.C.MsgType.PlayClickAudio),this.getInfo.getType==g.C.GetType.kGetProp){this.bClickSureState=!0,this.nodeWidget.active=!1,this.nodeGetAnimPropSet.node.active=!0,this.nodeTipsRole.active=!1,this.nodeTipsGold.active=!1,this.labNum1.node.active=!1,this.btnSure.node.active=!1,this.nodeGetAnimPropSet.play();var n=[],e=this.getInfo.getNum;this.nodeGetAnimPropItem.node.active=!1;var t=0;t=4<e?.15:.05*e+.2;for(var o=0;o<e;o++)this.scheduleOnce(function(){var e=y.default.addChild(this.nodeGetAnimPropItem.node.parent,this.nodeGetAnimPropItem.node),t=e.getComponent(cc.Animation);n.push(e),t.play()},t*o);this.scheduleOnce(function(){for(var e in n){n[e].destroy()}this.bClickSureState=!1,this.nodeWidget.active=!0,this.btnSure.node.active=!0,this.nodeGetAnimPropItem.node.active=!0,this.nodeGetAnimPropSet.node.active=!1,r.default.Instance.hide(g.C.UIPath.UIGetMenuPanel),null!=this.delegateClose&&this.delegateClose()},.6)}else if(this.getInfo.getType==g.C.GetType.kGetOrange){this.bClickSureState=!0,this.nodeWidget.active=!1,this.labNum1.node.active=!1,this.btnSure.node.active=!1,this.nodeTipsRole.active=!1,this.nodeTipsGold.active=!1,this.nodeGetAnimGoldSet.node.parent.active=!0,this.labGetGoldNum.string="X"+this.getInfo.getNum.toString(),this.nodeGetAnimGoldSet.play(),this.nodeGetAnimGoldNum.play();var a=[];this.nodeGetAnimGoldItem.node.active=!1;for(o=0;o<6;o++)this.scheduleOnce(function(){var e=y.default.addChild(this.nodeGetAnimGoldItem.node.parent,this.nodeGetAnimGoldItem.node);e.position=new cc.Vec2(0,42.8);var t=e.getComponent(cc.Animation);a.push(e),t.play()},.15*o);this.scheduleOnce(function(){for(var e in a){a[e].destroy()}this.bClickSureState=!1,this.nodeWidget.active=!0,this.btnSure.node.active=!0,this.nodeGetAnimGoldSet.node.parent.active=!1,this.nodeGetAnimGoldItem.node.active=!0,r.default.Instance.hide(g.C.UIPath.UIGetMenuPanel),null!=this.delegateClose&&this.delegateClose()},1)}else r.default.Instance.hide(g.C.UIPath.UIGetMenuPanel),null!=this.delegateClose&&this.delegateClose()},e.prototype.onClickMask=function(){this.onClickBtnSure()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnSure.node.scale=1,this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},__decorate([l(cc.Animation)],e.prototype,"anim",void 0),__decorate([l(cc.Button)],e.prototype,"btnSure",void 0),__decorate([l(cc.Node)],e.prototype,"nodeLight",void 0),__decorate([l(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([l(cc.Node)],e.prototype,"nodeRole",void 0),__decorate([l(cc.Sprite)],e.prototype,"sprSkillDesc",void 0),__decorate([l(cc.Node)],e.prototype,"nodeProp",void 0),__decorate([l(cc.Node)],e.prototype,"nodeGold",void 0),__decorate([l(cc.Node)],e.prototype,"nodeLoad",void 0),__decorate([l(cc.Node)],e.prototype,"nodeTipsRole",void 0),__decorate([l(cc.Node)],e.prototype,"nodeTipsGold",void 0),__decorate([l(cc.Label)],e.prototype,"labScore1",void 0),__decorate([l(cc.Label)],e.prototype,"labScore2",void 0),__decorate([l(cc.Label)],e.prototype,"labNum1",void 0),__decorate([l(cc.Label)],e.prototype,"labNum2",void 0),__decorate([l(cc.Label)],e.prototype,"labSkillCount",void 0),__decorate([l(cc.Node)],e.prototype,"nodeGrid",void 0),__decorate([l(cc.Node)],e.prototype,"nodeStar",void 0),__decorate([l(cc.Sprite)],e.prototype,"sprPropIcon",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimGoldSet",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimGoldNum",void 0),__decorate([l(cc.Label)],e.prototype,"labGetGoldNum",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimPropSet",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimGoldItem",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimPropItem",void 0),__decorate([l(cc.Node)],e.prototype,"nodeWidget",void 0),e=__decorate([s],e)}(o.default);n.default=c,cc._RF.pop()},{"../C":"C","../Game/RoleMgr":"RoleMgr","../RoleConfig":"RoleConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIHelpPanel:[function(e,t,n){"use strict";cc._RF.push(t,"79c74jx/PtMuIOBfz9x8Pnj","UIHelpPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/FYMessenger"),a=e("../C"),i=e("../Tools/FYBaseUIPanel"),r=e("../Tools/FYUIMgr"),s=cc._decorator,l=s.ccclass,c=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.btnNext=null,e.btnPrev=null,e.nodeBg=null,e.nodeHelp1=null,e.nodeHelp2=null,e._bMoveStart=!1,e}return __extends(e,t),e.prototype.onBack=function(){r.default.Instance.hide(a.C.UIPath.UIHelpPanel),o.default.Instance.send(a.C.MsgType.PlayClickAudio),r.default.Instance.show(a.C.UIPath.UIMainPanel)},e.prototype.onNext=function(){this.nodeHelp1.active=!1,this.nodeHelp2.active=!0,this.btnNext.getComponent(cc.Sprite).node.color=this.btnNext.normalColor,this.btnPrev.getComponent(cc.Sprite).node.color=this.btnPrev.normalColor},e.prototype.onPrev=function(){this.nodeHelp1.active=!0,this.nodeHelp2.active=!1,this.btnNext.getComponent(cc.Sprite).node.color=this.btnNext.normalColor,this.btnPrev.getComponent(cc.Sprite).node.color=this.btnPrev.normalColor},e.prototype.touchStartCallback=function(e){this._bMoveStart=!0;var t=this.nodeBg.convertTouchToNodeSpace(e);this._startPos=t},e.prototype.touchEndCallback=function(e){this.nodeBg.convertTouchToNodeSpace(e).x-this._startPos.x<0?this.nodeHelp1.active&&this.onNext():this.nodeHelp2.active&&this.onPrev()},e.prototype.onEnable=function(){this.btnNext.node.on(cc.Node.EventType.TOUCH_END,this.onNext,this),this.btnPrev.node.on(cc.Node.EventType.TOUCH_END,this.onPrev,this),this.nodeBg.on(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.nodeBg.on(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.nodeBg.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),o.default.Instance.send(a.C.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.btnBack.node.scale=1,this.btnNext.node.off(cc.Node.EventType.TOUCH_END,this.onNext,this),this.btnPrev.node.off(cc.Node.EventType.TOUCH_END,this.onPrev,this),this.nodeBg.off(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.nodeBg.off(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.nodeBg.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),o.default.Instance.send(a.C.MsgType.RefreshGameClubBtn,!0)},e.prototype.start=function(){},__decorate([c(cc.Button)],e.prototype,"btnBack",void 0),__decorate([c(cc.Button)],e.prototype,"btnNext",void 0),__decorate([c(cc.Button)],e.prototype,"btnPrev",void 0),__decorate([c(cc.Node)],e.prototype,"nodeBg",void 0),__decorate([c(cc.Node)],e.prototype,"nodeHelp1",void 0),__decorate([c(cc.Node)],e.prototype,"nodeHelp2",void 0),e=__decorate([l],e)}(i.default);n.default=d,cc._RF.pop()},{"../C":"C","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYUIMgr":"FYUIMgr"}],UILoadingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"af7822xy61DbaydUVoGu33f","UILoadingPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/FYMessenger"),a=e("../Tools/FYSDKMgr"),i=e("../Tools/mgplugin"),r=e("../DailyLevelConfig"),s=e("../C"),l=e("../Tools/FYUIMgr"),c=e("../Tools/FYResMgr"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goBg=null,e.goTips=null,e.comCanvas=null,e._preNum=5,e._curPreNum=0,e}return __extends(e,t),e.prototype.onPreLoadComplete=function(){this._curPreNum++,this._curPreNum==this._preNum&&o.default.Instance.send(c.default.MsgPreLoadComplete)},e.prototype.onLoad=function(){cc.log("=================onLoad=================="),a.default.Instance.wxCheckUpdate(),cc.game.setFrameRate(45),s.C.setCanvas(this.comCanvas),s.C.Width()<750&&(s.C.getCanvas().fitWidth=!0,s.C.getCanvas().fitHeight=!1,this.goBg.height=cc.director.getWinSize().height),a.default.Instance.cca_init("696444698","354cc34200d6e2c066e5ecdcefecc2a9",a.default.channel_WXMiniGame,s.C.getCurVersion()),a.default.Instance.cca_loginStart(),cc.sys.platform==cc.sys.WECHAT_GAME&&(a.default.Instance.hsdkInit(),a.default.Instance.hsdkCheckLogin({success:function(e){console.log("login success"),console.log(e);var t=e.userInfo.h5game_openid;i.enterReport("wx7022d5e904f02d74",t),a.default.Instance.cca_loginSuccess(t)},fail:function(e){console.log(e)}}))},e.prototype.start=function(){var e=cc.fadeTo(1,0),t=cc.fadeTo(1,255),n=cc.sequence(e,t).repeatForever();this.goTips.runAction(n),r.default.Instance.initAllConfig(),l.default.Instance.preLoad(),c.default.Instance.preLoadAltlas(),c.default.Instance.preLoadEffect(),c.default.Instance.preLoadOther()},e.prototype.onEnable=function(){o.default.Instance.add(l.default.MsgPreLoadUIComplete,this.onPreLoadComplete,this),o.default.Instance.add(s.C.MsgType.DailyLevelConfigFinish,this.onPreLoadComplete,this),o.default.Instance.add(c.default.MsgPreLoadAtlasComplete,this.onPreLoadComplete,this),o.default.Instance.add(c.default.MsgPreLoadEffectComplete,this.onPreLoadComplete,this),o.default.Instance.add(c.default.MsgPreLoadOtherComplete,this.onPreLoadComplete,this),o.default.Instance.add(c.default.MsgPreLoadComplete,this.onEnterGame,this)},e.prototype.onDisable=function(){o.default.Instance.remove(l.default.MsgPreLoadUIComplete,this.onPreLoadComplete,this),o.default.Instance.remove(s.C.MsgType.DailyLevelConfigFinish,this.onPreLoadComplete,this),o.default.Instance.remove(c.default.MsgPreLoadAtlasComplete,this.onPreLoadComplete,this),o.default.Instance.remove(c.default.MsgPreLoadEffectComplete,this.onPreLoadComplete,this),o.default.Instance.remove(c.default.MsgPreLoadOtherComplete,this.onPreLoadComplete,this),o.default.Instance.remove(c.default.MsgPreLoadComplete,this.onEnterGame,this)},e.prototype.onEnterGame=function(){cc.director.preloadScene("Game",function(e){cc.director.loadScene("Game")})},e.prototype.onDestroy=function(){cc.log("loading Scene onDestroy!")},__decorate([p(cc.Node)],e.prototype,"goBg",void 0),__decorate([p(cc.Node)],e.prototype,"goTips",void 0),__decorate([p(cc.Canvas)],e.prototype,"comCanvas",void 0),e=__decorate([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../C":"C","../DailyLevelConfig":"DailyLevelConfig","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/mgplugin":"mgplugin"}],UIMainPanel:[function(e,t,n){"use strict";cc._RF.push(t,"4f9d9G6KwZHS5M5oawmIXou","UIMainPanel"),Object.defineProperty(n,"__esModule",{value:!0});var h=e("../Tools/FYUtility"),o=e("../Tools/FYMessenger"),f=e("../Tools/FYSDKMgr"),y=e("../Tools/FYAudioCtl");e("../Tools/mgplugin.js");var m=e("../C"),g=e("../Tools/FYUIMgr"),a=e("../Tools/FYBaseUIPanel"),i=e("../GameMain"),r=e("../Tools/FYGlobalVarMgr"),s=e("../GetInfo"),l=cc._decorator,c=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameMain=null,e.modeTxt=null,e.btnHelp=null,e.btnRank=null,e.btnSound=null,e.sprSound=null,e.btnSkin=null,e.btnSetting=null,e.btnModeA=null,e.btnModeB=null,e.btnModeC=null,e.btnModeD=null,e.btnModeE=null,e.btnBuy=null,e.btnService=null,e.orangeNum=null,e.labModeA=null,e.labModeB=null,e.labModeC=null,e.labModeD=null,e.labModeE=null,e.labModeA2=null,e.labModeB2=null,e.labModeC2=null,e.labModeD2=null,e.labModeE2=null,e.btnPrize=null,e.SettingTipsNode=null,e.scoreToSubDomainCanvas=null,e.btnAds=null,e.nodeGameClubButton=null,e.nodeSevenDayLoginBtn=null,e.nodeSevenDayLoginRedPoint=null,e.nodeDailyNewTips=null,e.nodePrizeNewTips=null,e.nodeDailyShareBtn=null,e.nodeDailyShareRedPoint=null,e.nodeHotGame=null,e.spOtherGame=null,e.GameClubButton=null,e._tex=null,e._bOpenSound=!0,e._nLastMode=null,e._restart=!1,e._isFirstLogin=!0,e.imageCache={},e}return __extends(e,t),e.prototype.initScore=function(){var e=f.default.Instance.loadLocalJsonData(m.C.JsonDataKey.maxScoreByType);this.labModeA.string=e[m.C.GameMode.A],this.labModeA2.string=e[m.C.GameMode.A],this.labModeB.string=e[m.C.GameMode.B],this.labModeB2.string=e[m.C.GameMode.B],this.labModeC.string=e[m.C.GameMode.C],this.labModeC2.string=e[m.C.GameMode.C],this.labModeD.string=e[m.C.GameMode.D],this.labModeD2.string=e[m.C.GameMode.D],this.labModeE.string=e[m.C.GameMode.E],this.labModeE2.string=e[m.C.GameMode.E]},e.prototype.onEnable=function(){if(null==this.gameMain){var e=cc.director.getScene().getChildByName("Canvas").getComponent(i.default);this.gameMain=e}this.labModeA=this.btnModeA.node.getChildByName("modeTxt1").getComponent(cc.Label),this.labModeA2=this.labModeA.node.getChildByName("modeTxt2").getComponent(cc.Label),this.labModeB=this.btnModeB.node.getChildByName("modeTxt1").getComponent(cc.Label),this.labModeB2=this.labModeB.node.getChildByName("modeTxt2").getComponent(cc.Label),this.labModeC=this.btnModeC.node.getChildByName("modeTxt1").getComponent(cc.Label),this.labModeC2=this.labModeC.node.getChildByName("modeTxt2").getComponent(cc.Label),this.labModeD=this.btnModeD.node.getChildByName("modeTxt1").getComponent(cc.Label),this.labModeD2=this.labModeD.node.getChildByName("modeTxt2").getComponent(cc.Label),this.labModeE=this.btnModeE.node.getChildByName("modeTxt1").getComponent(cc.Label),this.labModeE2=this.labModeE.node.getChildByName("modeTxt2").getComponent(cc.Label);var t=f.default.Instance.loadLocalData(m.C.DataKey.orangeNum);this.orangeNum.string=t,f.default.Instance.cca_setVirtualNum("金币",t),this.initScore(),this.addListener(),f.default.Instance.wxPostMessage(m.C.ToChildProgramMsgName.ShowMainStar);this.unschedule(this.updaetSubDomainCanvas),this.schedule(this.updaetSubDomainCanvas,.1,20),this.btnAds.active=f.default.Instance.wxIsAds(),this.btnService.node.active=this.gameMain._bTestRestore,this.GameClubButton&&this.GameClubButton.show(),this.onRefreshSignState();var n=f.default.Instance.loadLocalData(m.C.DataKey.GetSignRewardLastTime,"0");this._isFirstLogin&&!h.default.isSameDay(n)&&(this._isFirstLogin=!1,g.default.Instance.show(m.C.UIPath.UISevenDayLoginPanel),this.GameClubButton&&this.GameClubButton.hide()),this.onRefreshShareNumState()},e.prototype.onDisable=function(){this.btnModeA.node.scale=1,this.btnModeB.node.scale=1,this.btnModeC.node.scale=1,this.btnModeD.node.scale=1,this.btnModeE.node.scale=1,this.btnPrize.node.scale=1,this.btnSound.node.scale=.75,this.btnRank.node.scale=1,this.btnHelp.node.scale=.75,this.btnSkin.node.scale=1,this.btnSetting.node.scale=1,this.btnBuy.node.scale=1,this.btnAds.scale=1,this.removeListener(),f.default.Instance.wxPostMessage(m.C.ToChildProgramMsgName.HideMainStar),this.GameClubButton&&this.GameClubButton.hide()},e.prototype.setImage=function(t,n){if(this.imageCache[n])t.spriteFrame=this.imageCache[n],100<this.spOtherGame.width&&(this.spOtherGame.width=100),130<this.spOtherGame.height&&(this.spOtherGame.height=130);else{var o=new Image;o.src=n;var a=this;o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture(),a.imageCache[n]=t.spriteFrame=new cc.SpriteFrame(e),100<a.spOtherGame.width&&(a.spOtherGame.width=100),130<a.spOtherGame.height&&(a.spOtherGame.height=130)}}},e.prototype.start=function(){if(f.default.Instance.wxIsWx()){this.imageCache={};var e=f.default.Instance.hsdkGetSessionInfo(),o=new Recommender({appid:"wx7022d5e904f02d74",openid:e.h5game_openid,env:"prod",debug:!0}),a=this;o.onReady(function(e,t){if(e){a.spOtherGame.active=!0;var n=a.spOtherGame.getComponent(cc.Sprite);a.setImage(n,t.icon),a.spOtherGame.on(cc.Node.EventType.TOUCH_START,function(){o.jumpToCurrentGame()})}else a.spOtherGame.active=!1}),o.onChange(function(e){console.log("game change to",e);var t=a.spOtherGame.getComponent(cc.Sprite);a.setImage(t,e.icon)}),o.getQQGameEntry(function(e){if(e.isOpen){a.nodeHotGame.active=!0;var t=a.nodeHotGame.getComponent(cc.Sprite);a.setImage(t,e.icon),a.nodeHotGame.on(cc.Node.EventType.TOUCH_START,function(){e.navigateToMiniProgram()})}else a.nodeHotGame.active=!1})}this._tex=new cc.Texture2D;var t=f.default.Instance.loadLocalData(m.C.DataKey.soundState,"true");this._bOpenSound="true"==t;var n=this._bOpenSound?"sound":"sound2";if(h.default.changeSpriteFrame(this.sprSound,"atlas/common/common",n),y.default.Instance.changeMusicVolume(this._bOpenSound?1:0),y.default.Instance.changeSoundVolume(this._bOpenSound?1:0),f.default.Instance.wxIsWx()){var i=this;i.scheduleOnce(function(){var e=i.nodeGameClubButton.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=h.default.getWXPos(e);i.GameClubButton=f.default.Instance.wxCreateGameClubButton({icon:"green",style:{left:t.x-15,top:t.y-20,width:30,height:30}}),i.scheduleOnce(function(){f.default.Instance.loadLocalData(m.C.DataKey.GetSignRewardLastTime,"0");g.default.Instance.getActiveState(m.C.UIPath.UISevenDayLoginPanel)&&i.GameClubButton&&i.GameClubButton.hide()},.02)},.2)}var r=cc.moveBy(.5,new cc.Vec2(0,8)),s=cc.moveTo(1,new cc.Vec2(0,-16)),l=cc.sequence(r,s,r).repeatForever();this.nodeHotGame.runAction(l);var c=f.default.Instance.loadLocalJsonData(m.C.JsonDataKey.userRoleExpCard),d=f.default.Instance.loadLocalJsonData(m.C.JsonDataKey.userOwnRole);if(null!=c&&0!=c&&0<h.default.getDictionaryCount(c)){for(var u=1;u<m.C.getCurRoleCount();u++){var p=(u+1).toString();null==c[p]&&delete c[p],null==d[p]&&delete d[p]}f.default.Instance.saveLocalJsonData(m.C.JsonDataKey.userOwnRole,d),f.default.Instance.saveLocalJsonData(m.C.JsonDataKey.userRoleExpCard,c)}this.onRefreshNewTips()},e.prototype.addListener=function(){o.default.Instance.add(m.C.MsgType.ChangeMode,this.onChangeMode,this),o.default.Instance.add(m.C.MsgType.RefreshOrange,this.onRefreshOrange,this),o.default.Instance.add(m.C.MsgType.RefreshSignState,this.onRefreshSignState,this),o.default.Instance.add(m.C.MsgType.RefreshGameClubBtn,this.onRefreshGameClubBtn,this),o.default.Instance.add(m.C.MsgType.RefreshShareState,this.onRefreshShareNumState,this),o.default.Instance.add(m.C.MsgType.DailyModeNewTips,this.onShowNewTips,this)},e.prototype.removeListener=function(){o.default.Instance.remove(m.C.MsgType.ChangeMode,this.onChangeMode,this),o.default.Instance.remove(m.C.MsgType.RefreshOrange,this.onRefreshOrange,this),o.default.Instance.remove(m.C.MsgType.RefreshGameClubBtn,this.onRefreshGameClubBtn,this),o.default.Instance.remove(m.C.MsgType.RefreshSignState,this.onRefreshSignState,this),o.default.Instance.remove(m.C.MsgType.RefreshShareState,this.onRefreshShareNumState,this),o.default.Instance.remove(m.C.MsgType.DailyModeNewTips,this.onShowNewTips,this)},e.prototype.onRefreshNewTips=function(){var e=f.default.Instance.loadLocalData(m.C.DataKey.prizeFreeTimes);0==e?this.nodePrizeNewTips.active=!0:h.default.isSameDay(e)||(this.nodePrizeNewTips.active=!0);var t=f.default.Instance.loadLocalData(m.C.DataKey.DailyModeNTimer),n=f.default.Instance.loadLocalData(m.C.DataKey.DailyModeDTimer);0!=parseInt(t)&&0!=parseInt(n)||(this.nodeDailyNewTips.active=!0)},e.prototype.onShowNewTips=function(e,t,n){void 0===n&&(n=!1),n?this.nodePrizeNewTips.active=t:this.nodeDailyNewTips.active=t},e.prototype.onRefreshGameClubBtn=function(e,t){console.log("----onRefreshGameClubBtn----state----------",t,this.GameClubButton),t?this.GameClubButton&&this.GameClubButton.show():this.GameClubButton&&this.GameClubButton.hide()},e.prototype.onClickShowSevenMenu=function(){g.default.Instance.show(m.C.UIPath.UISevenDayLoginPanel)},e.prototype.onShowHotGame=function(){},e.prototype.onRefreshSignState=function(){var e=f.default.Instance.loadLocalData(m.C.DataKey.GetSignRewardLastTime,"0"),t=Date.now();0==Number(e)?this.nodeSevenDayLoginRedPoint.active=!0:!h.default.isSameDay(e)&&0<=t-e?this.nodeSevenDayLoginRedPoint.active=!0:this.nodeSevenDayLoginRedPoint.active=!1},e.prototype.onRefreshShareNumState=function(){var e=f.default.Instance.loadLocalData(m.C.DataKey.dailyShareGetNum,"-1"),t=f.default.Instance.loadLocalData(m.C.DataKey.dailyShareLastTime,"0"),n=Date.now();Number(e)<4||!h.default.isSameDay(t)&&0<t-n?this.nodeDailyShareRedPoint.active=!0:this.nodeDailyShareRedPoint.active=!1},e.prototype.onCliskModeA=function(){o.default.Instance.send(m.C.MsgType.StartGame,m.C.GameMode.A,!0),this._nLastMode=m.C.GameMode.A,g.default.Instance.hide(m.C.UIPath.UIMainPanel),o.default.Instance.send(m.C.MsgType.PlayClickAudio)},e.prototype.onCliskModeB=function(){o.default.Instance.send(m.C.MsgType.StartGame,m.C.GameMode.B,!0),this._nLastMode=m.C.GameMode.B,g.default.Instance.hide(m.C.UIPath.UIMainPanel),o.default.Instance.send(m.C.MsgType.PlayClickAudio)},e.prototype.onCliskModeC=function(){o.default.Instance.send(m.C.MsgType.StartGame,m.C.GameMode.C,!0),this._nLastMode=m.C.GameMode.C,g.default.Instance.hide(m.C.UIPath.UIMainPanel),o.default.Instance.send(m.C.MsgType.PlayClickAudio)},e.prototype.onCliskModeD=function(){o.default.Instance.send(m.C.MsgType.StartGame,m.C.GameMode.D,!0),this._nLastMode=m.C.GameMode.D,g.default.Instance.hide(m.C.UIPath.UIMainPanel),o.default.Instance.send(m.C.MsgType.PlayClickAudio)},e.prototype.onCliskModeE=function(){o.default.Instance.send(m.C.MsgType.DailyModeNewTips,!1),g.default.Instance.show(m.C.UIPath.UISelectDailyPanel),g.default.Instance.hide(m.C.UIPath.UIMainPanel),this._nLastMode=m.C.GameMode.E,o.default.Instance.send(m.C.MsgType.PlayClickAudio),f.default.Instance.cca_onEvent(m.C.ccaEventType.DailyModeUIEnter)},e.prototype.onCliskStart=function(){var e=f.default.Instance.loadLocalData(m.C.DataKey.selectMode);e!=this._nLastMode?o.default.Instance.send(m.C.MsgType.StartGame,e,e!=this._nLastMode):(o.default.Instance.send(m.C.MsgType.StartGame,e,this._restart),this._restart=!1),this._nLastMode=e,g.default.Instance.hide(m.C.UIPath.UIMainPanel),o.default.Instance.send(m.C.MsgType.PlayClickAudio)},e.prototype.onClickPrize=function(){o.default.Instance.send(m.C.MsgType.PlayClickAudio),g.default.Instance.show(m.C.UIPath.UIPrizePanel)},e.prototype.onClickService=function(){if(o.default.Instance.send(m.C.MsgType.PlayClickAudio),f.default.Instance.wxIsWx())wx.openCustomerServiceConversation({sessionFrom:"点击客户按钮"});else{var e=f.default.Instance.loadLocalData(m.C.JsonDataKey.gameSceneInfo);if(null!=e&&0!=parseInt(e)){var t=JSON.parse(e);if(0<h.default.getDictionaryCount(t)){var n=t.time;h.default.isSameDay(n)?g.default.Instance.show(m.C.UIPath.UIReStorePanel,r.default.Instance.NodeTop,1):f.default.Instance.removeLocalData(m.C.JsonDataKey.gameSceneInfo)}}}},e.prototype.onClickShop=function(){o.default.Instance.send(m.C.MsgType.PlayClickAudio),g.default.Instance.hide(m.C.UIPath.UIMainPanel),g.default.Instance.show(m.C.UIPath.UIShopPanel)},e.prototype.onClickAdsFree=function(){var o=this;f.default.Instance.wxShowAd(function(e){if(console.log("广告播放回调， 状态： ",e),e){console.log("广告播放回调成功");var t=f.default.Instance.loadLocalData(m.C.DataKey.orangeNum);f.default.Instance.saveLocalData(m.C.DataKey.orangeNum,Number(t)+5),o.orangeNum.string=(Number(t)+5).toString();var n=new s.default;n.getType=m.C.GetType.kGetOrange,n.getNum=5,g.default.Instance.show(m.C.UIPath.UIGetMenuPanel,r.default.Instance.NodeTop,n),f.default.Instance.cca_getVirtual("金币",5,"广告获取金币")}},m.C.AdUnitIdType.Revive)},e.prototype.onSetState=function(e){this._restart=!0,this._nLastMode=null},e.prototype.onSetMode=function(e){this._nLastMode=null},e.prototype.onChangeMode=function(e){this.initScore()},e.prototype.onRefreshOrange=function(e){var t=f.default.Instance.loadLocalData(m.C.DataKey.orangeNum);this.orangeNum.string=t},e.prototype.onClickShare=function(){o.default.Instance.send(m.C.MsgType.PlayClickAudio),g.default.Instance.show(m.C.UIPath.UIDailySharePanel)},e.prototype.onClickHelp=function(e){o.default.Instance.send(m.C.MsgType.PlayClickAudio),g.default.Instance.hide(m.C.UIPath.UIMainPanel),g.default.Instance.show(m.C.UIPath.UIHelpPanel),f.default.Instance.cca_onEvent(m.C.ccaEventType.HelpUIClick)},e.prototype.onClickBackPack=function(e){o.default.Instance.send(m.C.MsgType.PlayClickAudio),g.default.Instance.show(m.C.UIPath.UIBackPackPanel)},e.prototype.onClickStar=function(e){o.default.Instance.send(m.C.MsgType.PlayClickAudio)},e.prototype.onClickRole=function(){g.default.Instance.show(m.C.UIPath.UISelectRolePanel),g.default.Instance.hide(m.C.UIPath.UIMainPanel),o.default.Instance.send(m.C.MsgType.PlayClickAudio)},e.prototype.onClickSetting=function(){this.SettingTipsNode.active=!0,o.default.Instance.send(m.C.MsgType.PlayClickAudio)},e.prototype.onClickSettingClose=function(){this.SettingTipsNode.active=!1},e.prototype.onClickGroupInRank=function(e){if(o.default.Instance.send(m.C.MsgType.PlayClickAudio),cc.sys.platform==cc.sys.WECHAT_GAME){var t=f.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share1.png");console.log("-----------分享路径：  ",t),f.default.Instance.hsdkShareMessage({shareInfo:{title:"超魔性的消除小游戏，看看你排第几？",imageUrl:t,gameScene:m.C.ShareState.ToSeeGroup,query:"form="+m.C.ShareState.ToSeeGroup},success:function(e){console.log("-----------群排行分享成功",e)}})}f.default.Instance.cca_onEvent(m.C.ccaEventType.RankShareGroupClick)},e.prototype.onClickPlayInRank=function(e){this.gameMain.rank.node.active=!1,f.default.Instance.wxPostMessage(m.C.ToChildProgramMsgName.HideRank)},e.prototype.onClickRank=function(e){if(o.default.Instance.send(m.C.MsgType.PlayClickAudio),cc.sys.platform==cc.sys.WECHAT_GAME){this.gameMain.rank.node.active=!0,this.gameMain.btnPlayInRank.active=!1,this.gameMain.btnSeeGroupRank.active=!0,this.gameMain._bStarUpdateSub=!0,console.log("------------onClickRank---------");var t=f.default.Instance.hsdkGetSessionInfo(),n="";t&&null!=t.h5game_openid&&null!=t.h5game_openid&&""!=t.h5game_openid&&(n=t.h5game_openid),f.default.Instance.wxPostMessage(m.C.ToChildProgramMsgName.ShowRank,[{id:n}])}o.default.Instance.send(m.C.MsgType.RefreshGameClubBtn,!1),f.default.Instance.cca_onEvent(m.C.ccaEventType.RankUIClick)},e.prototype.onClickShowFriendGame=function(){},e.prototype.onClickMode=function(e){o.default.Instance.send(m.C.MsgType.PlayClickAudio),g.default.Instance.hide(m.C.UIPath.UIMainPanel)},e.prototype.onClickSound=function(e){this._bOpenSound=!this._bOpenSound;var t=this._bOpenSound?"true":"false";f.default.Instance.saveLocalData(m.C.DataKey.soundState,t),o.default.Instance.send(m.C.MsgType.ChangeSound,!this._bOpenSound);var n=this._bOpenSound?"sound":"sound2";h.default.changeSpriteFrame(this.sprSound,"atlas/common/common",n),y.default.Instance.changeMusicVolume(this._bOpenSound?1:0),y.default.Instance.changeSoundVolume(this._bOpenSound?1:0),o.default.Instance.send(m.C.MsgType.PlayClickAudio),this._bOpenSound||f.default.Instance.cca_onEvent(m.C.ccaEventType.SoundCloseUIClick)},e.prototype.updaetSubDomainCanvas=function(){this._tex&&cc.sys.platform==cc.sys.WECHAT_GAME&&(this._tex.initWithElement(sharedCanvas),this._tex.handleLoadedTexture(),this.scoreToSubDomainCanvas.spriteFrame=new cc.SpriteFrame(this._tex))},__decorate([d(cc.Label)],e.prototype,"modeTxt",void 0),__decorate([d(cc.Button)],e.prototype,"btnHelp",void 0),__decorate([d(cc.Button)],e.prototype,"btnRank",void 0),__decorate([d(cc.Button)],e.prototype,"btnSound",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprSound",void 0),__decorate([d(cc.Button)],e.prototype,"btnSkin",void 0),__decorate([d(cc.Button)],e.prototype,"btnSetting",void 0),__decorate([d(cc.Button)],e.prototype,"btnModeA",void 0),__decorate([d(cc.Button)],e.prototype,"btnModeB",void 0),__decorate([d(cc.Button)],e.prototype,"btnModeC",void 0),__decorate([d(cc.Button)],e.prototype,"btnModeD",void 0),__decorate([d(cc.Button)],e.prototype,"btnModeE",void 0),__decorate([d(cc.Button)],e.prototype,"btnBuy",void 0),__decorate([d(cc.Button)],e.prototype,"btnService",void 0),__decorate([d(cc.Label)],e.prototype,"orangeNum",void 0),__decorate([d(cc.Button)],e.prototype,"btnPrize",void 0),__decorate([d(cc.Node)],e.prototype,"SettingTipsNode",void 0),__decorate([d(cc.Sprite)],e.prototype,"scoreToSubDomainCanvas",void 0),__decorate([d(cc.Node)],e.prototype,"btnAds",void 0),__decorate([d({type:cc.Node,displayName:"游戏圈"})],e.prototype,"nodeGameClubButton",void 0),__decorate([d({type:cc.Node,displayName:"每日登录按钮"})],e.prototype,"nodeSevenDayLoginBtn",void 0),__decorate([d({type:cc.Node,displayName:"每日登录红点"})],e.prototype,"nodeSevenDayLoginRedPoint",void 0),__decorate([d(cc.Node)],e.prototype,"nodeDailyNewTips",void 0),__decorate([d(cc.Node)],e.prototype,"nodePrizeNewTips",void 0),__decorate([d({type:cc.Node,displayName:"每日分享按钮"})],e.prototype,"nodeDailyShareBtn",void 0),__decorate([d({type:cc.Node,displayName:"每日分享红点"})],e.prototype,"nodeDailyShareRedPoint",void 0),__decorate([d({type:cc.Node,displayName:"热玩按钮"})],e.prototype,"nodeHotGame",void 0),__decorate([d(cc.Node)],e.prototype,"spOtherGame",void 0),e=__decorate([c],e)}(a.default);n.default=u,cc._RF.pop()},{"../C":"C","../GameMain":"GameMain","../GetInfo":"GetInfo","../Tools/FYAudioCtl":"FYAudioCtl","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility","../Tools/mgplugin.js":"mgplugin"}],UIPrizePanel:[function(e,t,n){"use strict";cc._RF.push(t,"2391fOIjX9GqLNP2H7rMxKV","UIPrizePanel"),Object.defineProperty(n,"__esModule",{value:!0});var I=e("../Tools/FYUtility"),_=e("../Tools/FYSDKMgr"),S=e("../GetInfo"),T=e("../Tools/FYUtility"),b=e("../Tools/FYMessenger"),P=e("../RoleConfig"),D=e("../C"),M=e("../Tools/FYUIMgr"),w=e("../Tools/FYGlobalVarMgr"),o=e("../Tools/FYBaseUIPanel"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circle=null,e.btnStart=null,e.btnBack=null,e.nodeMask=null,e.nodeCost=null,e.nodeFree=null,e.animLight=null,e.sprRemain=null,e.btnAdsPrize=null,e.labAdsPrize=null,e.endAngle=100,e.isMoving=!1,e.speed=0,e.maxSpeed=10,e.minSpeed=.8,e.rotateTimer=2,e.rotateTimer2=4,e.moveState=0,e.keepTime=2,e.bEnding=!1,e.rewards=["1等奖","2等奖","3等奖","4等奖","5等奖","6等奖"],e._num=180,e._num2=180,e._startRotate=0,e._nPriceOnceCost=20,e.nFreeTimes=0,e._index=0,e}return __extends(e,t),e.prototype.setFreeToPrize=function(e,t){this.nFreeTimes=e,this.callbackFinish=t},e.prototype.start=function(){this.targetDir=new cc.Vec2(0,1)},e.prototype.onClickAdsStart=function(){if(b.default.Instance.send(D.C.MsgType.PlayClickAudio),!this.isMoving){var n=_.default.Instance.loadLocalData(D.C.DataKey.DailyPrizeAdsTimes);if(!(3<=parseInt(n))){var o=this;_.default.Instance.wxShowAd(function(e){if(console.log("广告播放回调， 状态： ",e),e){console.log("广告播放回调成功"),o.StartMove();var t=parseInt(n)+1;_.default.Instance.saveLocalData(D.C.DataKey.DailyPrizeAdsTimes,t),o.labAdsPrize.string="("+(3-t)+"/3)",3<=t&&(o.btnAdsPrize.interactable=!1)}},D.C.AdUnitIdType.Revive)}}},e.prototype.onClickRestart=function(){if(!this.isMoving)if(0!=this.nFreeTimes){this.nFreeTimes--;var e=2==this.nFreeTimes?"labFreeTime2":"labFreeTime1";T.default.changeSpriteFrame(this.sprRemain,"atlas/common/common",e),console.log("nFreeTimes"+this.nFreeTimes),this.StartMove()}else if(this.CanFreePrize()){console.log("Start To Free Prize");var t=new Date;_.default.Instance.saveLocalData(D.C.DataKey.prizeFreeTimes,t.getTime()),b.default.Instance.send(D.C.MsgType.DailyModeNewTips,!1,!0),this.StartMove()}else{var n=_.default.Instance.loadLocalData(D.C.DataKey.orangeNum);if(null==n||0==n)return void M.default.Instance.show(D.C.UIPath.UITipsPanel,w.default.Instance.NodeTop,function(){M.default.Instance.hide(D.C.UIPath.UITipsPanel)}.bind(this));if(n<this._nPriceOnceCost)return void M.default.Instance.show(D.C.UIPath.UITipsPanel,w.default.Instance.NodeTop,function(){M.default.Instance.hide(D.C.UIPath.UITipsPanel)}.bind(this));var o=parseInt(n)-this._nPriceOnceCost;_.default.Instance.saveLocalData(D.C.DataKey.orangeNum,o.toString()),b.default.Instance.send(D.C.MsgType.RefreshOrange),_.default.Instance.cca_consumeVirtual("金币",this._nPriceOnceCost,"转盘消耗金币"),this.StartMove()}b.default.Instance.send(D.C.MsgType.PlayClickAudio)},e.prototype.onClickMask=function(){},e.prototype.onClickBack=function(){this.isMoving||(b.default.Instance.send(D.C.MsgType.PlayClickAudio),M.default.Instance.hide(D.C.UIPath.UIPrizePanel))},e.prototype.CanFreePrize=function(){new Date;var e=_.default.Instance.loadLocalData(D.C.DataKey.prizeFreeTimes);return 0==e||(console.log("prizeFreeTimes"+e),!T.default.isSameDay(e))},e.prototype.getAngle=function(){return this.calAngle(this.targetDir,this.calculateDir(this.circle.rotation%360))},e.prototype.calAngle=function(e,t){return t.angle(e)*(180/Math.PI)},e.prototype.calculateDir=function(e){var t=Math.cos(Math.PI*(e+90)/180),n=Math.sin(Math.PI*(e+90)/180);return new cc.Vec2(t,n)},e.prototype.endMove=function(){if(!this.bEnding){if(this.bEnding=!0,cc.log("===============endMove!!!!!!!!!!!!!!================"),this.speed=0,this.moveState=0,null!=this.animLight&&(this.animLight.node.active=!1,this.animLight.stop()),0!=this.nFreeTimes){this.nodeFree.active=!0,this.nodeCost.active=!1;var e=2==this.nFreeTimes?"labFreeTime2":"labFreeTime1";T.default.changeSpriteFrame(this.sprRemain,"atlas/common/common",e),this.btnBack.node.active=!1}else this.btnBack.node.active=!0,this.CanFreePrize()?(cc.log("CanFreePrize!"),this.nodeFree.active=!0,this.nodeCost.active=!1,T.default.changeSpriteFrame(this.sprRemain,"atlas/common/common","labFreeTime1")):(this.nodeFree.active=!1,this.nodeCost.active=!0);this.isMoving=!1,this.bEnding=!1,this.openGetMenu(),0==this.nFreeTimes&&null!=this.callbackFinish&&(M.default.Instance.hide(D.C.UIPath.UITipsPanel),this.callbackFinish(),this.callbackFinish=null)}},e.prototype.StartMove=function(){if(!this.isMoving){null!=this.animLight&&(this.animLight.node.active=!0,this.animLight.play());var e=I.default.getRangeRandom(1,100);1==e?this._index=0:2<=e&&e<=39?this._index=1:40<=e&&e<=49?this._index=2:50<=e&&e<=52?this._index=3:53<=e&&e<=62?this._index=4:63<=e&&e<=100&&(this._index=5),cc.log("恭喜你获得"+this.rewards[this._index]),this.isMoving=!0;var t=this.circle.rotation%360,n=-360/this.rewards.length*this._index-t,o=cc.rotateBy(8,360*this.rewards.length+n),a=(o.easing(cc.easeCubicActionOut()),cc.sequence(o,cc.callFunc(function(){this.endMove()}.bind(this))));this.circle.runAction(a),_.default.Instance.cca_onEvent(D.C.ccaEventType.PrizeClickToRotate)}},e.prototype.openGetMenu=function(){cc.log("openGetMenu");var e=new S.default,t=this._index+1,n=(_.default.Instance.loadLocalData(D.C.DataKey.orangeNum),_.default.Instance.loadLocalJsonData(D.C.JsonDataKey.userOwnProp));switch(t){case 2:case 5:e.getType=D.C.GetType.kGetProp,e.getNum=t,e.propType=D.C.PropType.kHammer;var o=n[D.C.PropType.kHammer],a=parseInt(o)+e.getNum;n[D.C.PropType.kHammer]=a,_.default.Instance.saveLocalJsonData(D.C.JsonDataKey.userOwnProp,n),_.default.Instance.cca_itemGet(D.C.getPropItemID(D.C.PropType.kHammer),D.C.PropType.kHammer,e.getNum,"抽奖获得");break;case 3:case 6:e.getType=D.C.GetType.kGetProp,e.getNum=3==t?5:2,e.propType=D.C.PropType.kSuperStar;var i=n[D.C.PropType.kSuperStar],r=parseInt(i)+e.getNum;n[D.C.PropType.kSuperStar]=r,_.default.Instance.saveLocalJsonData(D.C.JsonDataKey.userOwnProp,n),_.default.Instance.cca_itemGet(D.C.getPropItemID(D.C.PropType.kSuperStar),D.C.PropType.kSuperStar,e.getNum,"抽奖获得");break;case 4:return void this.randomRoleExpCard();case 1:var s=_.default.Instance.loadLocalJsonData(D.C.JsonDataKey.userOwnRole),l=D.C.getCurRoleCount();if(l<=T.default.getDictionaryCount(s)){console.log("================无法获得角色================="),e.getType=D.C.GetType.kGetOrange,e.getNum=888;var c=_.default.Instance.loadLocalData(D.C.DataKey.orangeNum),d=parseInt(c)+e.getNum;return _.default.Instance.saveLocalData(D.C.DataKey.orangeNum,d.toString()),b.default.Instance.send(D.C.MsgType.RefreshOrange),_.default.Instance.cca_getVirtual("金币",e.getNum,"永久角色转化金币"),void M.default.Instance.show(D.C.UIPath.UIGetMenuPanel,w.default.Instance.NodeTop,e,null,0)}for(var u=[],p=0,h=0;h<l;h++){var f=h+1;null!=s&&1!=s[f.toString()]?u.push(f):p++}var y=1<l-p?I.default.getRangeRandom(1,l-p):1;cc.log("nRoleIdRandomList:"+u+" nOwnCount:"+p+" nRoleRandom:"+y);var m=u[y-1];e.getType=D.C.GetType.kGetRole,e.getNum=1,e.roleId=m;var g=P.default.Instance.getRoleInfoByRoleId(m);e.roleScore=g.point,null==s?(s={})[e.roleId.toString()]=1:s[e.roleId.toString()]=1,_.default.Instance.saveLocalJsonData(D.C.JsonDataKey.userOwnRole,s),_.default.Instance.cca_onEvent(D.C.ccaEventType.PrizeGetRole),_.default.Instance.cca_onEvent(D.C.getRoleNameByType(e.roleId.toString())+D.C.ccaEventType.RolePrize),_.default.Instance.cca_onEvent(D.C.getRoleNameByType(e.roleId.toString())+D.C.ccaEventType.RoleGet)}M.default.Instance.show(D.C.UIPath.UIGetMenuPanel,w.default.Instance.NodeTop,e)},e.prototype.onEnable=function(){if(cc.log(this.nFreeTimes),0!=this.nFreeTimes){this.nodeFree.active=!0,this.nodeCost.active=!1;var e=2==this.nFreeTimes?"labFreeTime2":"labFreeTime1";T.default.changeSpriteFrame(this.sprRemain,"atlas/common/common",e),this.btnBack.node.active=!1}else this.CanFreePrize()?(cc.log("CanFreePrize!"),this.nodeFree.active=!0,this.nodeCost.active=!1,T.default.changeSpriteFrame(this.sprRemain,"atlas/common/common","labFreeTime1")):(this.nodeFree.active=!1,this.nodeCost.active=!0),this.btnBack.node.active=!0;var t=_.default.Instance.loadLocalData(D.C.DataKey.DailyPrizeAdsLastTime),n=_.default.Instance.loadLocalData(D.C.DataKey.DailyPrizeAdsTimes);if(T.default.isSameDay(t))3<=parseInt(n)&&(this.btnAdsPrize.interactable=!1);else{this.btnAdsPrize.interactable=!0,_.default.Instance.saveLocalData(D.C.DataKey.DailyPrizeAdsTimes,"0");var o=new Date;_.default.Instance.saveLocalData(D.C.DataKey.DailyPrizeAdsLastTime,o.getTime())}this.labAdsPrize.string="("+(3-parseInt(n))+"/3)",this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this),b.default.Instance.send(D.C.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.unscheduleAllCallbacks(),this.btnBack.node.scale=1,this.btnStart.node.scale=1,this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this),b.default.Instance.send(D.C.MsgType.RefreshGameClubBtn,!0)},e.prototype.randomRoleExpCard=function(){var e=_.default.Instance.loadLocalJsonData(D.C.JsonDataKey.userOwnRole),t=_.default.Instance.loadLocalJsonData(D.C.JsonDataKey.userRoleExpCard),n=new S.default,o=T.default.getDictionaryCount(e),a=0;if(null!=t&&0!=T.default.getDictionaryCount(t)&&(a=T.default.getDictionaryCount(t)),o-a>=D.C.getCurRoleCount()){console.log("================无法获得角色体验卡================="),n.getType=D.C.GetType.kGetOrange,n.getNum=30;var i=_.default.Instance.loadLocalData(D.C.DataKey.orangeNum),r=parseInt(i)+n.getNum;return _.default.Instance.saveLocalData(D.C.DataKey.orangeNum,r.toString()),b.default.Instance.send(D.C.MsgType.RefreshOrange),_.default.Instance.cca_getVirtual("金币",n.getNum,"体验卡转化金币"),void M.default.Instance.show(D.C.UIPath.UIGetMenuPanel,w.default.Instance.NodeTop,n,null,0)}null!=t&&0!=T.default.getDictionaryCount(t)||(t={});for(var s=D.C.getCurRoleCount(),l=[],c=0,d=0;d<s;d++){var u=d+1;null!=e&&1!=e[u.toString()]?l.push(u):null!=t[u.toString()]?l.push(u):c++}var p=1<s-c?I.default.getRangeRandom(1,s-c):1,h=l[p-1];console.log("nRoleIdRandomList:"+l+" nOwnCount:"+c+" nRoleRandom:"+p);var f=new Date;if(null!=t[h]){var y=t[h].duration,m=t[h].lastTime,g=f.getTime()-m,C=864e5-g;y<=g&&(C=0),console.log("=========remain============:"+C),t[h].lastTime=f.getTime(),t[h].duration=864e5+C}else t[h]={},t[h].lastTime=f.getTime(),t[h].duration=864e5;_.default.Instance.saveLocalJsonData(D.C.JsonDataKey.userRoleExpCard,t),n.getType=D.C.GetType.kGetRole,n.getNum=1,n.roleId=h;var v=P.default.Instance.getRoleInfoByRoleId(h);n.roleScore=v.point,null==e?(e={})[n.roleId.toString()]=1:e[n.roleId.toString()]=1,_.default.Instance.saveLocalJsonData(D.C.JsonDataKey.userOwnRole,e),_.default.Instance.saveLocalData(D.C.DataKey.userRoleId,h),b.default.Instance.send(D.C.MsgType.RefreshSelectRole),M.default.Instance.show(D.C.UIPath.UIGetMenuPanel,w.default.Instance.NodeTop,n,null,2)},__decorate([r(cc.Node)],e.prototype,"circle",void 0),__decorate([r(cc.Button)],e.prototype,"btnStart",void 0),__decorate([r(cc.Button)],e.prototype,"btnBack",void 0),__decorate([r(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([r(cc.Node)],e.prototype,"nodeCost",void 0),__decorate([r(cc.Node)],e.prototype,"nodeFree",void 0),__decorate([r(cc.Animation)],e.prototype,"animLight",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprRemain",void 0),__decorate([r(cc.Button)],e.prototype,"btnAdsPrize",void 0),__decorate([r(cc.Label)],e.prototype,"labAdsPrize",void 0),e=__decorate([i],e)}(o.default);n.default=s,cc._RF.pop()},{"../C":"C","../GetInfo":"GetInfo","../RoleConfig":"RoleConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIPropGetPanel:[function(e,t,n){"use strict";cc._RF.push(t,"f6eedYLihpG+Y0g0FQ2vpdO","UIPropGetPanel"),Object.defineProperty(n,"__esModule",{value:!0});var y=e("../Tools/FYUtility"),c=e("../Tools/FYMessenger"),m=e("../RoleConfig"),g=e("../Tools/FYSDKMgr"),d=e("../GetInfo"),C=e("../C"),o=e("../Tools/FYBaseUIPanel"),u=e("../Tools/FYGlobalVarMgr"),p=e("../Tools/FYUIMgr"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actionEnd=null,e.curPropType=null,e.sprPropDesc=null,e.sprPropIcon=null,e.btnClose=null,e.labPropLimit=null,e.labPropCurUse=null,e.labAssistLimit=null,e.labAssistCur=null,e.btnAssist=null,e.btnAds=null,e.btnBuy=null,e.labCost=null,e.labGoldRemain=null,e.nodeGoldFit=null,e.curShareTimes=0,e.curGameMode=null,e.bClickState=!1,e}return __extends(e,t),e.prototype.onShow=function(e,t){var n=t[0],o=t[1],a=t[2],i=t[3],r=t[4];this.initMenu(n,o,a,i,r)},e.prototype.initMenu=function(e,t,n,o,a){void 0===a&&(a=null),this.actionEnd=a,this.curGameMode=e,console.log("curGameMode"+this.curGameMode),this.curPropType=t,this.curShareTimes=o;var i=m.default.Instance.getPropInfoByPropId(t),r=i.desc;y.default.changeSpriteFrame(this.sprPropDesc,"atlas/common/common",r);var s=i.icon;y.default.changeSpriteFrame(this.sprPropIcon,"atlas/common/common",s);var l=i.limit;this.labPropLimit.string=l.toString();var c=i.cost;this.labCost.string=c.toString();var d=n.toString()+"/"+l.toString();this.labPropCurUse.string=d;var u=i.shareLimit;this.labAssistLimit.string=u.toString();var p=o+"/"+u.toString();this.labAssistCur.string=p;var h=g.default.Instance.loadLocalData(C.C.DataKey.orangeNum);this.labGoldRemain.string=h;var f=this.labGoldRemain.node.getContentSize().width;console.log("goldRemainWidth:"+f),this.nodeGoldFit.position=new cc.Vec2(-194+f,this.nodeGoldFit.position.y)},e.prototype.onClickBack=function(){c.default.Instance.send(C.C.MsgType.PlayClickAudio),null!=this.actionEnd&&this.actionEnd(),p.default.Instance.hide(C.C.UIPath.UIPropGetPanel)},e.prototype.onClickAssist=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){var s=this,l=g.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share1.png");g.default.Instance.hsdkShareMessage({shareInfo:{title:"美味甜甜圈，今天你吃了吗？",imageUrl:l,query:""},success:function(e){console.log("------share---success-------",{title:"美味甜甜圈，今天你吃了吗？",imageUrl:l,query:""});var t=m.default.Instance.getPropInfoByPropId(s.curPropType).shareLimit;if(s.curShareTimes++,s.curShareTimes<=t){var n=g.default.Instance.loadLocalJsonData(C.C.JsonDataKey.userOwnProp),o=new d.default;o.getType=C.C.GetType.kGetProp,o.getNum=1,o.propType=s.curPropType;var a=n[s.curPropType],i=parseInt(a)+o.getNum;n[s.curPropType]=i,g.default.Instance.saveLocalJsonData(C.C.JsonDataKey.userOwnProp,n),c.default.Instance.send(C.C.MsgType.RefreshProp),p.default.Instance.show(C.C.UIPath.UIGetMenuPanel,u.default.Instance.NodeTop,o),c.default.Instance.send(C.C.MsgType.GameShareGetPropAdd,s.curPropType);var r=s.curShareTimes+"/"+t.toString();s.labAssistCur.string=r,g.default.Instance.cca_itemGet(C.C.getPropItemID(s.curPropType),s.curPropType,1,"分享获得"),g.default.Instance.cca_onEvent(C.C.getModeNameByType(s.curGameMode)+C.C.ccaEventType.PropShareGetInMode+C.C.getPropItemID(s.curPropType))}else s.node.active=!1;null!=s.actionEnd&&s.actionEnd()},fail:function(e){}})}},e.prototype.onClickAds=function(){if(!this.bClickState){this.bClickState=!0;var i=this;g.default.Instance.wxShowAd(function(e){if(console.log("广告播放回调， 状态： ",e),e){console.log("广告播放回调成功");var t=g.default.Instance.loadLocalJsonData(C.C.JsonDataKey.userOwnProp),n=new d.default;n.getType=C.C.GetType.kGetProp,n.getNum=1,n.propType=i.curPropType;var o=t[i.curPropType],a=parseInt(o)+n.getNum;t[i.curPropType]=a,g.default.Instance.saveLocalJsonData(C.C.JsonDataKey.userOwnProp,t),c.default.Instance.send(C.C.MsgType.RefreshProp),p.default.Instance.show(C.C.UIPath.UIGetMenuPanel,u.default.Instance.NodeTop,n),g.default.Instance.cca_itemGet(C.C.getPropItemID(i.curPropType),i.curPropType,1,"广告获得"),g.default.Instance.cca_onEvent(C.C.getModeNameByType(i.curGameMode)+C.C.ccaEventType.PropAdsGetInMode+C.C.getPropItemID(i.curPropType)),null!=i.actionEnd&&i.actionEnd()}i.bClickState=!1},C.C.AdUnitIdType.MainGetGold)}},e.prototype.onClickBuy=function(){var e=m.default.Instance.getPropInfoByPropId(this.curPropType).cost,t=g.default.Instance.loadLocalData(C.C.DataKey.orangeNum);if(null!=t&&0!=t)if(t<e)p.default.Instance.show(C.C.UIPath.UITipsPanel,u.default.Instance.NodeTop,function(){p.default.Instance.hide(C.C.UIPath.UIPropGetPanel)}.bind(this));else{var n=parseInt(t)-e;g.default.Instance.saveLocalData(C.C.DataKey.orangeNum,n.toString()),c.default.Instance.send(C.C.MsgType.RefreshOrange);var o=g.default.Instance.loadLocalJsonData(C.C.JsonDataKey.userOwnProp),a=new d.default;a.getType=C.C.GetType.kGetProp,a.getNum=1,a.propType=this.curPropType;var i=o[this.curPropType],r=parseInt(i)+a.getNum;o[this.curPropType]=r,g.default.Instance.saveLocalJsonData(C.C.JsonDataKey.userOwnProp,o),c.default.Instance.send(C.C.MsgType.RefreshProp),p.default.Instance.show(C.C.UIPath.UIGetMenuPanel,u.default.Instance.NodeTop,a),g.default.Instance.cca_consumeVirtual("金币",e,"道具消耗金币"),g.default.Instance.cca_itemBuy(C.C.getPropItemID(a.propType),a.propType,a.getNum,e,"金币","金币购买"),g.default.Instance.cca_onEvent(C.C.getModeNameByType(this.curGameMode)+C.C.ccaEventType.PropBuyGetInMode+C.C.getPropItemID(a.propType)),null!=this.actionEnd&&this.actionEnd(),c.default.Instance.send(C.C.MsgType.PlayClickAudio)}else p.default.Instance.show(C.C.UIPath.UITipsPanel,u.default.Instance.NodeTop,function(){p.default.Instance.hide(C.C.UIPath.UIPropGetPanel)}.bind(this))},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnClose.scale=1,this.btnAssist.scale=.8,this.btnAds.scale=.8,this.btnBuy.scale=.8},__decorate([r(cc.Sprite)],e.prototype,"sprPropDesc",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprPropIcon",void 0),__decorate([r(cc.Node)],e.prototype,"btnClose",void 0),__decorate([r(cc.Label)],e.prototype,"labPropLimit",void 0),__decorate([r(cc.Label)],e.prototype,"labPropCurUse",void 0),__decorate([r(cc.Label)],e.prototype,"labAssistLimit",void 0),__decorate([r(cc.Label)],e.prototype,"labAssistCur",void 0),__decorate([r(cc.Node)],e.prototype,"btnAssist",void 0),__decorate([r(cc.Node)],e.prototype,"btnAds",void 0),__decorate([r(cc.Node)],e.prototype,"btnBuy",void 0),__decorate([r(cc.Label)],e.prototype,"labCost",void 0),__decorate([r(cc.Label)],e.prototype,"labGoldRemain",void 0),__decorate([r(cc.Node)],e.prototype,"nodeGoldFit",void 0),e=__decorate([i],e)}(o.default);n.default=s,cc._RF.pop()},{"../C":"C","../GetInfo":"GetInfo","../RoleConfig":"RoleConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIReStorePanel:[function(e,t,n){"use strict";cc._RF.push(t,"2fc7eXh21hNrr2R22quXqUH","UIReStorePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/FYUtility"),a=e("../Tools/FYMessenger"),i=e("../Tools/FYSDKMgr"),r=e("../GameMain"),s=e("../C"),l=e("../Tools/FYBaseUIPanel"),c=e("../Tools/FYUIMgr"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node1=null,e.node2=null,e.btnBack=null,e.btnSure1=null,e.btnCancel1=null,e.btnSure2=null,e}return __extends(e,t),e.prototype.onShow=function(e,t){var n=t[0];this.initUI(n)},e.prototype.initUI=function(e){console.log(e),this.node1.active=1==e,this.node2.active=2==e},e.prototype.onClickBack=function(){i.default.Instance.removeLocalData(s.C.JsonDataKey.gameSceneInfo),a.default.Instance.send(s.C.MsgType.PlayClickAudio),c.default.Instance.hide(s.C.UIPath.UIReStorePanel)},e.prototype.onClickRestore=function(){a.default.Instance.send(s.C.MsgType.PlayClickAudio);var e=i.default.Instance.loadLocalData(s.C.JsonDataKey.gameSceneInfo),t=JSON.parse(e);null!=t&&0!=t&&0<o.default.getDictionaryCount(t)?null==t.mode||null==t.score||null==t.level||null==t.cubeRandom||null==t.comb||null==t.roleScore||null==t.remain||null==t.levelInfo||null==t.randomInfo?(this.node1.active=!1,this.node2.active=!0):(c.default.Instance.hide(s.C.UIPath.UIReStorePanel),cc.director.getScene().getChildByName("Canvas").getComponent(r.default).reStoreGameScene()):(this.node1.active=!1,this.node2.active=!0)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnBack.scale=1,this.btnSure1.scale=1,this.btnCancel1.scale=1,this.btnSure2.scale=1},__decorate([p(cc.Node)],e.prototype,"node1",void 0),__decorate([p(cc.Node)],e.prototype,"node2",void 0),__decorate([p(cc.Node)],e.prototype,"btnBack",void 0),__decorate([p(cc.Node)],e.prototype,"btnSure1",void 0),__decorate([p(cc.Node)],e.prototype,"btnCancel1",void 0),__decorate([p(cc.Node)],e.prototype,"btnSure2",void 0),e=__decorate([u],e)}(l.default);n.default=h,cc._RF.pop()},{"../C":"C","../GameMain":"GameMain","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UISelectDailyPanel:[function(e,t,n){"use strict";cc._RF.push(t,"c1065FTUjVN37TwjpjpTolv","UISelectDailyPanel"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Tools/FYMessenger"),o=e("../Tools/FYSDKMgr"),s=e("../Tools/FYUtility"),l=e("../DailyLevelConfig"),c=e("../C"),a=e("../Tools/FYBaseUIPanel"),d=e("../Tools/FYUIMgr"),i=cc._decorator,u=i.ccclass,p=i.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.nodeEasyItem=null,e.nodeDiffcultItem=null,e.btnNext=null,e.btnPrev=null,e.nodeBg=null,e.nodeStar1=null,e.nodeStar2=null,e.nodeTSwitch1=null,e.nodeTSwitch2=null,e.btnNormalStart=null,e.btnNormalAgain=null,e.btnNormalDetail=null,e.btnDiffcultStart=null,e.btnDiffcultAgain=null,e.btnDiffcultDetail=null,e.nodeAssistBg=null,e.nodeNormalBg=null,e.nodeDiffcultPass=null,e.nodeNormalPass=null,e._bMoveStart=!1,e._dailyType=0,e._tex=null,e.passTimeRank=null,e}return __extends(e,t),e.prototype.onShow=function(e,t){var n=t[0];this.setCurDailyType(n)},e.prototype.setCurDailyType=function(e){void 0===e&&(e=0),0!=e?(this.nodeEasyItem.active=!1,this.nodeDiffcultItem.active=!0,this.initDiffcult()):(this.nodeEasyItem.active=!0,this.nodeDiffcultItem.active=!1,this.initNormal()),cc.sys.platform==cc.sys.WECHAT_GAME?(this.nodeNormalBg.active=!1,this.nodeAssistBg.active=!1):(this.nodeNormalBg.active=!0,this.nodeAssistBg.active=!0)},e.prototype.initFriend=function(){},e.prototype.initNormal=function(){this.nodeTSwitch1.active=!0,this.nodeTSwitch2.active=!1;this.nodeStar2.active=!1;if(this.btnNormalDetail.active=!1,this.nodeNormalPass.active=!1,this._dailyType=0,cc.sys.platform==cc.sys.WECHAT_GAME){var e=o.default.Instance.hsdkGetSessionInfo();o.default.Instance.wxPostMessage(c.C.ToChildProgramMsgName.ShowDailyPassTime,[{openId:e.h5game_openid},{mode:0}])}},e.prototype.initDiffcult=function(){this.nodeTSwitch1.active=!1,this.nodeTSwitch2.active=!0,this.nodeStar2.active=!0;this._dailyType=1;if(this.btnDiffcultDetail.active=!1,this.nodeDiffcultPass.active=!1,cc.sys.platform==cc.sys.WECHAT_GAME){var e=o.default.Instance.hsdkGetSessionInfo();o.default.Instance.wxPostMessage(c.C.ToChildProgramMsgName.ShowDailyPassTime,[{openId:e.h5game_openid},{mode:1}])}},e.prototype.onNext=function(){this.nodeEasyItem.active&&(this.nodeEasyItem.active=!1,this.nodeDiffcultItem.active=!0,this.initDiffcult(),this.btnNormalStart.scale=1,this.btnDiffcultStart.scale=1)},e.prototype.onPrev=function(){this.nodeDiffcultItem.active&&(this.nodeEasyItem.active=!0,this.nodeDiffcultItem.active=!1,this.initNormal(),this.btnNormalStart.scale=1,this.btnDiffcultStart.scale=1)},e.prototype.onBack=function(){d.default.Instance.hide(c.C.UIPath.UISelectDailyPanel),r.default.Instance.send(c.C.MsgType.PlayClickAudio),d.default.Instance.show(c.C.UIPath.UIMainPanel)},e.prototype.touchStartCallback=function(e){this._bMoveStart=!0;var t=this.nodeBg.convertTouchToNodeSpace(e);this._startPos=t},e.prototype.touchEndCallback=function(e){this.nodeBg.convertTouchToNodeSpace(e).x-this._startPos.x<0?this.onNext():this.onPrev()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.nodeBg.on(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.nodeBg.on(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.nodeBg.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),cc.sys.platform==cc.sys.WECHAT_GAME?(this.nodeNormalBg.active=!1,this.nodeAssistBg.active=!1):(this.nodeNormalBg.active=!0,this.nodeAssistBg.active=!0),r.default.Instance.send(c.C.MsgType.RefreshGameClubBtn,!1)},e.prototype.start=function(){this._tex=new cc.Texture2D},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnBack.node.scale=1,this.nodeEasyItem.scale=1,this.nodeDiffcultItem.scale=1,this.btnNext.node.scale=1,this.btnPrev.node.scale=1,this.btnNormalStart.scale=1,this.btnDiffcultStart.scale=1,this.nodeBg.off(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.nodeBg.off(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.nodeBg.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),o.default.Instance.wxPostMessage(c.C.ToChildProgramMsgName.HideDailyPassTime),r.default.Instance.send(c.C.MsgType.RefreshGameClubBtn,!0)},e.prototype.onClickEasyMode=function(){r.default.Instance.send(c.C.MsgType.PlayClickAudio);s.default.getMonthWeek();var e=new Date,t=e.getMonth()+1,n=e.getDate(),o=t.toString()+n.toString();1==t&&(o="0"+t.toString()+n.toString());var a=l.default.Instance.getNormalLevelInfoByDays(o),i=l.default.Instance.getNormalRandomInfoByDays(o);r.default.Instance.send(c.C.MsgType.onSetDailyConfigPath,0,a,i),r.default.Instance.send(c.C.MsgType.StartGame,c.C.GameMode.E,!0),d.default.Instance.hide(c.C.UIPath.UIReStorePanel)},e.prototype.onClickDiffcultMode=function(){r.default.Instance.send(c.C.MsgType.PlayClickAudio);s.default.getMonthWeek();var e=new Date,t=e.getMonth()+1,n=e.getDate(),o=t.toString()+n.toString();1==t&&(o="0"+t.toString()+n.toString());var a=l.default.Instance.getDiffcultLevelInfoByDays(o),i=l.default.Instance.getDiffcultRandomInfoByDays(o);r.default.Instance.send(c.C.MsgType.onSetDailyConfigPath,1,a,i),r.default.Instance.send(c.C.MsgType.StartGame,c.C.GameMode.E,!0),d.default.Instance.hide(c.C.UIPath.UIReStorePanel)},e.prototype.onClickEasyDetail=function(){r.default.Instance.send(c.C.MsgType.PlayClickAudio)},e.prototype.onClickDiffcultDetail=function(){r.default.Instance.send(c.C.MsgType.PlayClickAudio)},e.prototype.onClickShare=function(){if(r.default.Instance.send(c.C.MsgType.PlayClickAudio),cc.sys.platform==cc.sys.WECHAT_GAME){var e=o.default.Instance.wxMd5Pipe("res/raw-assets/resources/share/share2_5.png");console.log("-----------分享路径：  ",e),o.default.Instance.hsdkShareMessage({shareInfo:{title:"最强智力比拼，不服来战！",imageUrl:e,gameScene:c.C.ShareState.DailyChallenge,query:"form="+c.C.ShareState.DailyChallenge+"&mode="+this._dailyType},success:function(e){console.log("-----------每日挑战分享成功",e)}})}0==this._dailyType?o.default.Instance.cca_onEvent(c.C.ccaEventType.DailyNormalBattleFriend):o.default.Instance.cca_onEvent(c.C.ccaEventType.DailyDiffcultBattleFriend)},e.prototype.updaetSubDomainCanvas=function(){this._tex&&cc.sys.platform==cc.sys.WECHAT_GAME&&(this._tex.initWithElement(sharedCanvas),this._tex.handleLoadedTexture(),this.passTimeRank.spriteFrame=new cc.SpriteFrame(this._tex))},e.prototype.update=function(){this.updaetSubDomainCanvas()},__decorate([p(cc.Button)],e.prototype,"btnBack",void 0),__decorate([p(cc.Node)],e.prototype,"nodeEasyItem",void 0),__decorate([p(cc.Node)],e.prototype,"nodeDiffcultItem",void 0),__decorate([p(cc.Button)],e.prototype,"btnNext",void 0),__decorate([p(cc.Button)],e.prototype,"btnPrev",void 0),__decorate([p(cc.Node)],e.prototype,"nodeBg",void 0),__decorate([p(cc.Node)],e.prototype,"nodeStar1",void 0),__decorate([p(cc.Node)],e.prototype,"nodeStar2",void 0),__decorate([p(cc.Node)],e.prototype,"nodeTSwitch1",void 0),__decorate([p(cc.Node)],e.prototype,"nodeTSwitch2",void 0),__decorate([p(cc.Node)],e.prototype,"btnNormalStart",void 0),__decorate([p(cc.Node)],e.prototype,"btnNormalAgain",void 0),__decorate([p(cc.Node)],e.prototype,"btnNormalDetail",void 0),__decorate([p(cc.Node)],e.prototype,"btnDiffcultStart",void 0),__decorate([p(cc.Node)],e.prototype,"btnDiffcultAgain",void 0),__decorate([p(cc.Node)],e.prototype,"btnDiffcultDetail",void 0),__decorate([p(cc.Node)],e.prototype,"nodeAssistBg",void 0),__decorate([p(cc.Node)],e.prototype,"nodeNormalBg",void 0),__decorate([p(cc.Node)],e.prototype,"nodeDiffcultPass",void 0),__decorate([p(cc.Node)],e.prototype,"nodeNormalPass",void 0),__decorate([p(cc.Sprite)],e.prototype,"passTimeRank",void 0),e=__decorate([u],e)}(a.default);n.default=h,cc._RF.pop()},{"../C":"C","../DailyLevelConfig":"DailyLevelConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UISelectRolePanel:[function(e,t,n){"use strict";cc._RF.push(t,"25d50zs+7BFA7WTcQyCRyx0","UISelectRolePanel"),Object.defineProperty(n,"__esModule",{value:!0});var s=e("../Tools/FYUtility"),i=e("./RoleItem"),c=e("../Tools/FYMessenger"),d=e("../Tools/FYSDKMgr"),u=e("../GetInfo"),p=e("../RoleConfig"),h=e("../C"),o=e("../Tools/FYBaseUIPanel"),f=e("../Tools/FYUIMgr"),y=e("../Tools/FYGlobalVarMgr"),r=e("../Game/RoleMgr"),a=cc._decorator,l=a.ccclass,m=a.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.btnBack=null,e.nRoleCount=5,e.curRoleItem=null,e}return __extends(e,t),e.prototype.onEnable=function(){this.checkRoleExpCard(),this.initUI(),c.default.Instance.add(h.C.MsgType.RefreshSelectRole,this.initUI,this),c.default.Instance.send(h.C.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.btnBack.scale=1,c.default.Instance.remove(h.C.MsgType.RefreshSelectRole,this.initUI,this),c.default.Instance.send(h.C.MsgType.RefreshGameClubBtn,!0)},e.prototype.onClickBack=function(){c.default.Instance.send(h.C.MsgType.PlayClickAudio),f.default.Instance.hide(h.C.UIPath.UISelectRolePanel),f.default.Instance.show(h.C.UIPath.UIMainPanel)},e.prototype.initUI=function(){this.content.removeAllChildren();var e=this.content.getComponent(cc.Layout).spacingY;this.content.setContentSize(this.content.getContentSize().width,this.nRoleCount*this.item.getContentSize().height+e*(this.nRoleCount-1)),console.log("=========================="+this.content.getContentSize().height);for(var t=0;t<this.nRoleCount;t++)if(t<h.C.getCurRoleCount()){var n=s.default.addChild(this.content,this.item).getComponent(i.default),o=t+1,a=r.default.Instance.getRoleInView(o.toString());n.setItem(o.toString(),a,this)}else{o=t+1;(n=s.default.addChild(this.content,this.item).getComponent(i.default)).setItem(o.toString(),null,this)}},e.prototype.checkRoleExpCard=function(){var e=d.default.Instance.loadLocalJsonData(h.C.JsonDataKey.userRoleExpCard);if(null!=e&&0!=s.default.getDictionaryCount(e)){d.default.Instance.loadLocalData(h.C.DataKey.userRoleId,"1");for(var t=d.default.Instance.loadLocalJsonData(h.C.JsonDataKey.userOwnRole),n=new Date,o=0;o<h.C.getCurRoleCount();o++){var a=(o+1).toString();if(null!=e[a]){var i=e[a].duration,r=e[a].lastTime;i<=n.getTime()-r&&(console.log("体验卡角色:",a,"已经过期!!!!"),delete e[a],delete t[a.toString()],d.default.Instance.saveLocalData(h.C.DataKey.userRoleId,"1"),this.curRoleItem=null)}}d.default.Instance.saveLocalJsonData(h.C.JsonDataKey.userOwnRole,t),d.default.Instance.saveLocalJsonData(h.C.JsonDataKey.userRoleExpCard,e)}},e.prototype.onClickChooseCall=function(e){var t=e.getRoleId();(null==this.curRoleItem||null!=this.curRoleItem&&this.curRoleItem.getRoleId()!=t)&&(d.default.Instance.saveLocalData(h.C.DataKey.userRoleId,t),this.curRoleItem=e,c.default.Instance.send(h.C.MsgType.RefreshRoleItems),c.default.Instance.send(h.C.MsgType.PlayClickAudio),d.default.Instance.cca_onEvent(h.C.getRoleNameByType(t.toString())+h.C.ccaEventType.RoleSelect))},e.prototype.onClickGoldBuyCall=function(e){var t=e.getRoleId(),n=p.default.Instance.getRoleInfoByRoleId(t),o=parseInt(n.buyNum),a=d.default.Instance.loadLocalData(h.C.DataKey.orangeNum);if(null!=a&&0!=a)if(a<o)f.default.Instance.show(h.C.UIPath.UITipsPanel);else{var i=parseInt(a)-o;d.default.Instance.saveLocalData(h.C.DataKey.orangeNum,i.toString()),c.default.Instance.send(h.C.MsgType.RefreshOrange);var r=new u.default;r.getType=h.C.GetType.kGetRole,r.getNum=1,r.roleId=parseInt(t),r.roleScore=n.point;var s=d.default.Instance.loadLocalJsonData(h.C.JsonDataKey.userOwnRole);null==s?(s={})[r.roleId.toString()]=1:s[r.roleId.toString()]=1,d.default.Instance.saveLocalJsonData(h.C.JsonDataKey.userOwnRole,s),f.default.Instance.show(h.C.UIPath.UIGetMenuPanel,y.default.Instance.NodeTop,r),d.default.Instance.saveLocalData(h.C.DataKey.userRoleId,t),d.default.Instance.cca_onEvent(h.C.getRoleNameByType(t.toString())+h.C.ccaEventType.RoleSelect),d.default.Instance.cca_onEvent(h.C.getRoleNameByType(t.toString())+h.C.ccaEventType.RoleGet),d.default.Instance.cca_onEvent(h.C.getRoleNameByType(t.toString())+h.C.ccaEventType.RoleBuy),d.default.Instance.cca_consumeVirtual("金币",o,"角色消耗金币");var l=d.default.Instance.loadLocalJsonData(h.C.JsonDataKey.userRoleExpCard);null!=l&&null!=l[t]&&(delete l[t],d.default.Instance.saveLocalJsonData(h.C.JsonDataKey.userRoleExpCard,l)),this.curRoleItem=e,c.default.Instance.send(h.C.MsgType.RefreshRoleItems),c.default.Instance.send(h.C.MsgType.PlayClickAudio)}else f.default.Instance.show(h.C.UIPath.UITipsPanel)},__decorate([m(cc.Node)],e.prototype,"content",void 0),__decorate([m(cc.Node)],e.prototype,"item",void 0),__decorate([m(cc.Node)],e.prototype,"btnBack",void 0),e=__decorate([l],e)}(o.default);n.default=g,cc._RF.pop()},{"../C":"C","../Game/RoleMgr":"RoleMgr","../GetInfo":"GetInfo","../RoleConfig":"RoleConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility","./RoleItem":"RoleItem"}],UISevenDayLoginPanel:[function(e,t,n){"use strict";cc._RF.push(t,"4067bpZAupH27/nm2DmfBzn","UISevenDayLoginPanel"),Object.defineProperty(n,"__esModule",{value:!0});var I=e("../Tools/FYSDKMgr"),_=e("../GetInfo"),S=e("../Tools/FYMessenger"),T=e("../Tools/FYUtility"),b=e("../RoleConfig"),P=e("../C"),o=e("../Tools/FYBaseUIPanel"),D=e("../Tools/FYUIMgr"),M=e("../Tools/FYGlobalVarMgr"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardList=[[{type:P.C.GetType.kGetOrange,ID:P.C.PropType.kNone,value:20}],[{type:P.C.GetType.kGetProp,ID:P.C.PropType.kHammer,value:5}],[{type:P.C.GetType.kGetExpCard,ID:P.C.PropType.kNone,value:1}],[{type:P.C.GetType.kGetOrange,ID:P.C.PropType.kNone,value:40}],[{type:P.C.GetType.kGetProp,ID:P.C.PropType.kSuperStar,value:5}],[{type:P.C.GetType.kGetOrange,ID:P.C.PropType.kNone,value:60}],[{type:P.C.GetType.kGetOrange,ID:P.C.PropType.kNone,value:80},{type:P.C.GetType.kGetProp,ID:P.C.PropType.kHammer,value:5},{type:P.C.GetType.kGetProp,ID:P.C.PropType.kSuperStar,value:5}]],e.nodeHadSign=null,e.nodeNoSign=null,e.btnSign=null,e.btnDoubleSign=null,e.nodeItemFirstWeek=null,e.nodeTalk1=null,e.nodeTalk2=null,e.nodeListReward=[],e}return __extends(e,t),e.prototype.checkRoleExpCard=function(){var e=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userRoleExpCard);if(null!=e&&0!=T.default.getDictionaryCount(e)){I.default.Instance.loadLocalData(P.C.DataKey.userRoleId,"1");for(var t=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userOwnRole),n=new Date,o=0;o<P.C.getCurRoleCount();o++){var a=(o+1).toString();if(null!=e[a]){var i=e[a].duration,r=e[a].lastTime;i<=n.getTime()-r&&(console.log("体验卡角色:",a,"已经过期!!!!"),delete e[a],delete t[a.toString()],I.default.Instance.saveLocalData(P.C.DataKey.userRoleId,"1"))}}I.default.Instance.saveLocalJsonData(P.C.JsonDataKey.userOwnRole,t),I.default.Instance.saveLocalJsonData(P.C.JsonDataKey.userRoleExpCard,e)}},e.prototype.randomRoleExpCard=function(){var e=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userOwnRole),t=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userRoleExpCard),n=new _.default,o=T.default.getDictionaryCount(e),a=0;if(null!=t&&0!=T.default.getDictionaryCount(t)&&(a=T.default.getDictionaryCount(t)),o-a>=P.C.getCurRoleCount()){console.log("================无法获得角色体验卡================="),n.getType=P.C.GetType.kGetOrange,n.getNum=30;var i=I.default.Instance.loadLocalData(P.C.DataKey.orangeNum),r=parseInt(i)+n.getNum;return I.default.Instance.saveLocalData(P.C.DataKey.orangeNum,r.toString()),S.default.Instance.send(P.C.MsgType.RefreshOrange),I.default.Instance.cca_getVirtual("金币",n.getNum,"体验卡转化金币"),void D.default.Instance.show(P.C.UIPath.UIGetMenuPanel,M.default.Instance.NodeTop,n,null,0)}null!=t&&0!=T.default.getDictionaryCount(t)||(t={});for(var s=P.C.getCurRoleCount(),l=[],c=0,d=0;d<s;d++){var u=d+1;null!=e&&1!=e[u.toString()]?l.push(u):null!=t[u.toString()]?l.push(u):c++}var p=1<s-c?T.default.getRangeRandom(1,s-c):1,h=l[p-1];console.log("nRoleIdRandomList:"+l+" nOwnCount:"+c+" nRoleRandom:"+p);var f=new Date;if(null!=t[h]){var y=t[h].duration,m=t[h].lastTime,g=f.getTime()-m,C=864e5-g;y<=g&&(C=0),t[h].lastTime=f.getTime(),t[h].duration=864e5+C}else t[h]={},t[h].lastTime=f.getTime(),t[h].duration=864e5;I.default.Instance.saveLocalJsonData(P.C.JsonDataKey.userRoleExpCard,t),n.getType=P.C.GetType.kGetRole,n.getNum=1,n.roleId=h;var v=b.default.Instance.getRoleInfoByRoleId(h);n.roleScore=v.point,null==e?(e={})[n.roleId.toString()]=1:e[n.roleId.toString()]=1,I.default.Instance.saveLocalJsonData(P.C.JsonDataKey.userOwnRole,e),I.default.Instance.saveLocalData(P.C.DataKey.userRoleId,h),S.default.Instance.send(P.C.MsgType.RefreshSelectRole),D.default.Instance.show(P.C.UIPath.UIGetMenuPanel,M.default.Instance.NodeTop,n,null,2)},e.prototype.sign=function(e){void 0===e&&(e=!1);var t=e?2:1,n=I.default.Instance.loadLocalData(P.C.DataKey.GetSignRewardIndex,"-1"),o=Number(n)+1;o=(o+7)%7;var a=this.rewardList[o],i=!1,r=!1,s=I.default.Instance.loadLocalData(P.C.DataKey.GetFirstWeekSignTime,"0");if(6==Number(o)&&0==Number(s)){var l=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userOwnRole);if(a=[{type:P.C.GetType.kGetRole,ID:"5",value:1}],l&&l[5]){var c=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userRoleExpCard);null!=c&&0!=T.default.getDictionaryCount(c)?null==c[5]&&(a=[{type:P.C.GetType.kGetOrange,ID:P.C.PropType.kNone,value:888}],r=!0):(a=[{type:P.C.GetType.kGetOrange,ID:P.C.PropType.kNone,value:888}],r=!0)}}for(var d in a){var u=a[d];if(u&&u.type==P.C.GetType.kGetExpCard){if(this.randomRoleExpCard(),i=!0,e){var p=I.default.Instance.loadLocalData(P.C.DataKey.orangeNum,"0");I.default.Instance.saveLocalData(P.C.DataKey.orangeNum,Number(p)+30),S.default.Instance.send(P.C.MsgType.RefreshOrange)}}else if(u){var h=u.type;if(h==P.C.GetType.kGetOrange){p=I.default.Instance.loadLocalData(P.C.DataKey.orangeNum,"0");I.default.Instance.saveLocalData(P.C.DataKey.orangeNum,Number(p)+u.value*t),S.default.Instance.send(P.C.MsgType.RefreshOrange)}else if(h==P.C.GetType.kGetProp){var f=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userOwnProp),y=f[u.ID]||0,m=Number(y)+u.value*t;f[u.ID]=m,I.default.Instance.saveLocalJsonData(P.C.JsonDataKey.userOwnProp,f),S.default.Instance.send(P.C.MsgType.RefreshProp)}else if(h==P.C.GetType.kGetRole){l=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userOwnRole)||{};var g=u.ID;l[g+""]=1,I.default.Instance.saveLocalJsonData(P.C.JsonDataKey.userOwnRole,l);var C=I.default.Instance.loadLocalJsonData(P.C.JsonDataKey.userRoleExpCard)||{};if(delete C[g+""],I.default.Instance.saveLocalJsonData(P.C.JsonDataKey.userRoleExpCard,C),I.default.Instance.saveLocalData(P.C.DataKey.userRoleId,g.toString()),e){p=I.default.Instance.loadLocalData(P.C.DataKey.orangeNum,"0");I.default.Instance.saveLocalData(P.C.DataKey.orangeNum,Number(p)+80),S.default.Instance.send(P.C.MsgType.RefreshOrange)}}}}if(!i){var v=new _.default;v.getType=a[0].type,v.getType==P.C.GetType.kGetRole?(v.propType=P.C.PropType.kNone,v.roleId=Number(a[0].ID)):(v.propType=a[0].ID,v.roleId=0),v.getNum=a[0].value*t,r?D.default.Instance.show(P.C.UIPath.UIGetMenuPanel,M.default.Instance.NodeTop,v,null,1):D.default.Instance.show(P.C.UIPath.UIGetMenuPanel,M.default.Instance.NodeTop,v,function(){if(a[1]){var e=new _.default;e.getType=a[1].type,e.getType==P.C.GetType.kGetRole?(e.roleId=Number(a[0].ID),e.propType=P.C.PropType.kNone):(e.roleId=0,e.propType=a[1].ID),e.getNum=a[1].value*t,D.default.Instance.show(P.C.UIPath.UIGetMenuPanel,M.default.Instance.NodeTop,e,function(){if(a[2]){var e=new _.default;e.getType=a[2].type,e.getType==P.C.GetType.kGetRole?(e.roleId=Number(a[0].ID),e.propType=P.C.PropType.kNone):(e.roleId=0,e.propType=a[2].ID),e.getNum=a[2].value*t,D.default.Instance.show(P.C.UIPath.UIGetMenuPanel,M.default.Instance.NodeTop,e)}})}})}6==Number(o)&&0==Number(s)&&I.default.Instance.saveLocalData(P.C.DataKey.GetFirstWeekSignTime,Date.now()),I.default.Instance.saveLocalData(P.C.DataKey.GetSignRewardLastTime,Date.now()),I.default.Instance.saveLocalData(P.C.DataKey.GetSignRewardIndex,""+o),console.log("--------sign succed--------------",o),S.default.Instance.send(P.C.MsgType.RefreshSignState)},e.prototype.clickSign=function(){var e=I.default.Instance.loadLocalData(P.C.DataKey.GetSignRewardLastTime,"0"),t=Date.now();(0==Number(e)||!T.default.isSameDay(e)&&e<t)&&(this.sign(),this.refreshUI())},e.prototype.clickDoubleSign=function(){var e=I.default.Instance.loadLocalData(P.C.DataKey.GetSignRewardLastTime,"0"),t=Date.now(),n=this;(0==Number(e)||!T.default.isSameDay(e)&&e<t)&&I.default.Instance.wxShowAd(function(e){console.log("广告播放回调， 状态： ",e),e&&(console.log("广告播放回调成功"),n.sign(!0),n.refreshUI())},P.C.AdUnitIdType.Revive)},e.prototype.clickClose=function(){D.default.Instance.hide(P.C.UIPath.UISevenDayLoginPanel)},e.prototype.setItem=function(e,t){var n=Number(e),o=this.nodeListReward[n],a=I.default.Instance.loadLocalData(P.C.DataKey.GetSignRewardIndex,"-1"),i=I.default.Instance.loadLocalData(P.C.DataKey.GetSignRewardLastTime,"0"),r=Date.now();if(6==(a=Number(a))&&!T.default.isSameDay(i)&&0<r-i&&(a=-1),console.log("-----signIndex------",a,t),n<=a?(o.getChildByName("bgSign").active=!0,o.getChildByName("bgCantSign").active=!1,o.getChildByName("hadSign").active=!0):(console.log("-------lastSignDay-------now---index-signIndex-",i,r,n,a),!T.default.isSameDay(i)&&0<r-i&&n==a+1?(o.getChildByName("bgSign").active=!0,o.getChildByName("bgCantSign").active=!1):(o.getChildByName("bgSign").active=!1,o.getChildByName("bgCantSign").active=!0),o.getChildByName("hadSign").active=!1),6==n){o.active=!0;var s=I.default.Instance.loadLocalData(P.C.DataKey.GetFirstWeekSignTime,"0"),l=this.nodeItemFirstWeek;0==Number(s)?(l.active=!0,o.active=!1,a+1!=6||T.default.isSameDay(i)?(l.getChildByName("bgSign").active=!1,l.getChildByName("bgCantSign").active=!0):(l.getChildByName("bgSign").active=!0,l.getChildByName("bgCantSign").active=!1),l.getChildByName("hadSign").active=!1):T.default.isSameDay(s)?(l.getChildByName("bgSign").active=!0,l.getChildByName("bgCantSign").active=!1,l.getChildByName("hadSign").active=!0):(l.active=!1,o.active=!0)}},e.prototype.refreshUI=function(){var e=I.default.Instance.loadLocalData(P.C.DataKey.GetSignRewardLastTime,"0"),t=Date.now();0==Number(e)?(this.nodeHadSign.active=!1,this.nodeNoSign.active=!0,console.log("-----lastSignDay-===00000-----",e)):!T.default.isSameDay(e)&&0<t-e?(this.nodeHadSign.active=!1,this.nodeNoSign.active=!0,console.log("-----可以签到-===-----")):(this.nodeHadSign.active=!0,this.nodeNoSign.active=!1,console.log("-----已经签到-===-----"));var n=I.default.Instance.loadLocalData(P.C.DataKey.GetSignRewardIndex,"-1");for(var o in 6==Number(n)&&(n=-1),this.nodeListReward)this.setItem(o,n);var a=I.default.Instance.loadLocalData(P.C.DataKey.GetFirstWeekSignTime,"0");0==Number(a)?(this.nodeTalk1.active=!1,this.nodeTalk2.active=!0):T.default.isSameDay(a)?(this.nodeTalk1.active=!1,this.nodeTalk2.active=!0):(this.nodeTalk2.active=!1,this.nodeTalk1.active=!0)},e.prototype.onEnable=function(){this.checkRoleExpCard(),this.refreshUI(),S.default.Instance.send(P.C.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){S.default.Instance.send(P.C.MsgType.RefreshGameClubBtn,!0)},__decorate([r({type:cc.Node,displayName:"已签到按钮面板",tooltip:"已签到按钮面板"})],e.prototype,"nodeHadSign",void 0),__decorate([r({type:cc.Node,displayName:"待签到按钮面板",tooltip:"待签到按钮面板"})],e.prototype,"nodeNoSign",void 0),__decorate([r({type:cc.Node,displayName:"签到按钮",tooltip:"签到按钮"})],e.prototype,"btnSign",void 0),__decorate([r({type:cc.Node,displayName:"双倍签到按钮",tooltip:"双倍签到按钮"})],e.prototype,"btnDoubleSign",void 0),__decorate([r({type:cc.Node,displayName:"首周登录的第七天的item",tooltip:"首周登录的第七天的item"})],e.prototype,"nodeItemFirstWeek",void 0),__decorate([r({type:cc.Node,displayName:"对话1",tooltip:"对话1"})],e.prototype,"nodeTalk1",void 0),__decorate([r({type:cc.Node,displayName:"对话2",tooltip:"对话2"})],e.prototype,"nodeTalk2",void 0),__decorate([r({type:Array(cc.Node),displayName:"奖励item列表",tooltip:"奖励item列表"})],e.prototype,"nodeListReward",void 0),e=__decorate([i],e)}(o.default);n.default=s,cc._RF.pop()},{"../C":"C","../GetInfo":"GetInfo","../RoleConfig":"RoleConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIShopPanel:[function(e,t,n){"use strict";cc._RF.push(t,"99a9ayebKVNwqnO1Rx3tKKe","UIShopPanel"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Tools/FYSDKMgr"),s=e("../Tools/FYMessenger"),l=e("../GetInfo"),c=e("../C"),o=e("../Tools/FYBaseUIPanel"),d=e("../Tools/FYUIMgr"),u=e("../Tools/FYGlobalVarMgr"),a=cc._decorator,i=a.ccclass,p=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeGrid=null,e.btnBack=null,e.btnShop1=null,e.btnShop2=null,e.btnShop3=null,e.btnShop4=null,e.btnShop5=null,e}return __extends(e,t),e.prototype.onEnable=function(){s.default.Instance.send(c.C.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.btnBack.scale=1,this.btnShop1.scale=1,this.btnShop2.scale=1,this.btnShop3.scale=1,this.btnShop4.scale=1,this.btnShop5.scale=1,s.default.Instance.send(c.C.MsgType.RefreshGameClubBtn,!0)},e.prototype.onClickBack=function(){s.default.Instance.send(c.C.MsgType.PlayClickAudio),d.default.Instance.hide(c.C.UIPath.UIShopPanel),d.default.Instance.show(c.C.UIPath.UIMainPanel)},e.prototype.onClickShopBuy=function(e){var t=e.target.parent.getChildByName("score").getComponent(cc.Label).string.replace("X",""),a=parseInt(t);if(cc.sys.platform==cc.sys.WECHAT_GAME)wx.requestMidasPayment({mode:"game",env:1,offerId:"1450015125",currencyType:"CNY",platform:"android",buyQuantity:a,zoneId:1,success:function(e){console.log("-----pay----success---------",e);var t=r.default.Instance.loadLocalData(c.C.DataKey.orangeNum),n=parseInt(t)+a;r.default.Instance.saveLocalData(c.C.DataKey.orangeNum,n.toString()),s.default.Instance.send(c.C.MsgType.RefreshOrange);var o=new l.default;o.getType=c.C.GetType.kGetOrange,o.getNum=a;parseInt(t),o.getNum;d.default.Instance.show(c.C.UIPath.UIGetMenuPanel,u.default.Instance.NodeTop,o,function(){d.default.Instance.hide(c.C.UIPath.UIMainPanel),d.default.Instance.show(c.C.UIPath.UIShopPanel)}.bind(this)),r.default.Instance.cca_getVirtual("金币",o.getNum,"购买获取金币")},fail:function(e){console.log("-----pay----fail---------",e),wx.showToast({title:"购买失败",mask:!0})}});else{var n=r.default.Instance.loadLocalData(c.C.DataKey.orangeNum),o=parseInt(n)+a;r.default.Instance.saveLocalData(c.C.DataKey.orangeNum,o.toString()),s.default.Instance.send(c.C.MsgType.RefreshOrange);var i=new l.default;i.getType=c.C.GetType.kGetOrange,i.getNum=a;parseInt(n),i.getNum;d.default.Instance.show(c.C.UIPath.UIGetMenuPanel,u.default.Instance.NodeTop,i,function(){d.default.Instance.hide(c.C.UIPath.UIMainPanel),d.default.Instance.show(c.C.UIPath.UIShopPanel)}.bind(this)),r.default.Instance.cca_getVirtual("金币",i.getNum,"购买获取金币")}s.default.Instance.send(c.C.MsgType.PlayClickAudio)},__decorate([p(cc.Node)],e.prototype,"nodeGrid",void 0),__decorate([p(cc.Node)],e.prototype,"btnBack",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop1",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop2",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop3",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop4",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop5",void 0),e=__decorate([i],e)}(o.default);n.default=h,cc._RF.pop()},{"../C":"C","../GetInfo":"GetInfo","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr"}],UITipsPanel:[function(e,t,n){"use strict";cc._RF.push(t,"5fbd7Y6To1P4Itxz7ScDDOJ","UITipsPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/FYMessenger"),a=e("../C"),i=e("../Tools/FYBaseUIPanel"),r=e("../Tools/FYUIMgr"),s=cc._decorator,l=s.ccclass,c=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMask=null,e.btnBack=null,e.btnShop=null,e.anim=null,e.delegateClose=null,e}return __extends(e,t),e.prototype.onClickBack=function(){o.default.Instance.send(a.C.MsgType.PlayClickAudio),r.default.Instance.hide(a.C.UIPath.UITipsPanel)},e.prototype.onClickShop=function(){o.default.Instance.send(a.C.MsgType.PlayClickAudio),r.default.Instance.hide(a.C.UIPath.UITipsPanel),r.default.Instance.show(a.C.UIPath.UIShopPanel),null!=this.delegateClose&&this.delegateClose()},e.prototype.onClickMask=function(){},e.prototype.onEnable=function(){this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},e.prototype.onDisable=function(){this.btnBack.node.scale=1,this.btnShop.node.scale=1,this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},e.prototype.onShow=function(e,t){var n=t[0];this.initUI(n)},e.prototype.initUI=function(e){void 0===e&&(e=null),this.delegateClose=e,this.anim.play()},__decorate([c(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([c(cc.Button)],e.prototype,"btnBack",void 0),__decorate([c(cc.Button)],e.prototype,"btnShop",void 0),__decorate([c(cc.Animation)],e.prototype,"anim",void 0),e=__decorate([l],e)}(i.default);n.default=d,cc._RF.pop()},{"../C":"C","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYUIMgr":"FYUIMgr"}],"cocosAnalytics.min":[function(u,e,t){(function(n){"use strict";cc._RF.push(e,"3dac8DcPB1LcKvCk6SORaZX","cocosAnalytics.min");var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function i(r,s,l){function c(t,e){if(!s[t]){if(!r[t]){var n="function"==typeof u&&u;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var a=s[t]={exports:{}};r[t][0].call(a.exports,function(e){return c(r[t][1][e]||e)},a,a.exports,i,r,s,l)}return s[t].exports}for(var d="function"==typeof u&&u,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function c(e,t,n){for(var o,a=[],i=t;i<n;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a.push(d[(r=o)>>18&63]+d[r>>12&63]+d[r>>6&63]+d[63&r]);var r;return a.join("")}n.byteLength=function(e){return 3*e.length/4-l(e)},n.toByteArray=function(e){var t,n,o,a,i,r=e.length;a=l(e),i=new p(3*r/4-a),n=0<a?r-4:r;var s=0;for(t=0;t<n;t+=4)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],i[s++]=o>>16&255,i[s++]=o>>8&255,i[s++]=255&o;return 2===a?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,i[s++]=255&o):1===a&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,i[s++]=o>>8&255,i[s++]=255&o),i},n.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a="",i=[],r=0,s=n-o;r<s;r+=16383)i.push(c(e,r,s<r+16383?s:r+16383));return 1===o?(t=e[n-1],a+=d[t>>2],a+=d[t<<4&63],a+="=="):2===o&&(t=(e[n-2]<<8)+e[n-1],a+=d[t>>10],a+=d[t>>4&63],a+=d[t<<2&63],a+="="),i.push(a),i.join("")};for(var d=[],u=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=o.length;a<i;++a)d[a]=o[a],u[o.charCodeAt(a)]=a;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],2:[function(t,e,x){(function(e){function n(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return a(this,e)}return o(this,e,t,n)}function o(e,t,n,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=i(e,t),e}(e,t,n,o):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|c(t,n),a=(e=s(e,o)).write(t,n);return a!==o&&(e=e.slice(0,a)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|r(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(o=t.length)!=o?s(e,0):i(e,t);if("Buffer"===t.type&&k(t.data))return i(e,t.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function a(e,t){if(l(t),e=s(e,t<0?0:0|r(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function i(e,t){var n=t.length<0?0:0|r(t.length);e=s(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function r(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function c(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return w(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(o)return w(e).length;t=(""+t).toLowerCase(),o=!0}}function d(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function p(e,t,n,o,a){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=u.from(t,o)),u.isBuffer(t))return 0===t.length?-1:h(e,t,n,o,a);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):h(e,[t],n,o,a);throw new TypeError("val must be string, number or Buffer")}function h(e,t,n,o,a){function i(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var r,s=1,l=e.length,c=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;l/=s=2,c/=2,n/=2}if(a){var d=-1;for(r=n;r<l;r++)if(i(e,r)===i(t,-1===d?0:r-d)){if(-1===d&&(d=r),r-d+1===c)return d*s}else-1!==d&&(r-=r-d),d=-1}else for(l<n+c&&(n=l-c),r=n;0<=r;r--){for(var u=!0,p=0;p<c;p++)if(i(e,r+p)!==i(t,p)){u=!1;break}if(u)return r}return-1}function y(e,t,n,o){n=Number(n)||0;var a=e.length-n;o?(o=Number(o))>a&&(o=a):o=a;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");i/2<o&&(o=i/2);for(var r=0;r<o;++r){var s=parseInt(t.substr(2*r,2),16);if(isNaN(s))return r;e[n+r]=s}return r}function m(e,t,n,o){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function f(e,t,n){n=Math.min(e.length,n);for(var o=[],a=t;a<n;){var i,r,s,l,c=e[a],d=null,u=239<c?4:223<c?3:191<c?2:1;if(a+u<=n)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(i=e[a+1]))&&127<(l=(31&c)<<6|63&i)&&(d=l);break;case 3:i=e[a+1],r=e[a+2],128==(192&i)&&128==(192&r)&&2047<(l=(15&c)<<12|(63&i)<<6|63&r)&&(l<55296||57343<l)&&(d=l);break;case 4:i=e[a+1],r=e[a+2],s=e[a+3],128==(192&i)&&128==(192&r)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&i)<<12|(63&r)<<6|63&s)&&l<1114112&&(d=l)}null===d?(d=65533,u=1):65535<d&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|1023&d),o.push(d),a+=u}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);for(var n="",o=0;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=L));return n}(o)}function g(e,t,n){var o="";n=Math.min(e.length,n);for(var a=t;a<n;++a)o+=String.fromCharCode(127&e[a]);return o}function C(e,t,n){var o="";n=Math.min(e.length,n);for(var a=t;a<n;++a)o+=String.fromCharCode(e[a]);return o}function v(e,t,n){var o,a=e.length;(!t||t<0)&&(t=0),(!n||n<0||a<n)&&(n=a);for(var i="",r=t;r<n;++r)i+=(o=e[r])<16?"0"+o.toString(16):o.toString(16);return i}function I(e,t,n){for(var o=e.slice(t,n),a="",i=0;i<o.length;i+=2)a+=String.fromCharCode(o[i]+256*o[i+1]);return a}function _(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,n,o,a,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function T(e,t,n,o){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(o?a:1-a))>>>8*(o?a:1-a)}function b(e,t,n,o){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(o?a:3-a)&255}function P(e,t,n,o,a,i){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,o,a){return a||P(e,0,n,4),A.write(e,t,n,o,23,4),n+4}function M(e,t,n,o,a){return a||P(e,0,n,8),A.write(e,t,n,o,52,8),n+8}function w(e,t){t=t||1/0;for(var n,o=e.length,a=null,i=[],r=0;r<o;++r){if(55295<(n=e.charCodeAt(r))&&n<57344){if(!a){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(r+1===o){-1<(t-=3)&&i.push(239,191,189);continue}a=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(t-=3)&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function R(e){return N.toByteArray(function(e){if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(E,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,o){for(var a=0;a<o&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}var N=t("base64-js"),A=t("ieee754"),k=t("isarray");x.Buffer=u,x.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},x.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),x.kMaxLength=n(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return o(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return o=null,i=t,r=n,l(a=e),a<=0?s(o,a):void 0!==i?"string"==typeof r?s(o,a).fill(i,r):s(o,a).fill(i):s(o,a);var o,a,i,r},u.allocUnsafe=function(e){return a(null,e)},u.allocUnsafeSlow=function(e){return a(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,a=0,i=Math.min(n,o);a<i;++a)if(e[a]!==t[a]){n=e[a],o=t[a];break}return n<o?-1:o<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!k(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var o=u.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!u.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(o,a),a+=i.length}return o},u.byteLength=c,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?f(this,0,e):function(e,t,n){var o,a,i,r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return v(this,t,n);case"utf8":case"utf-8":return f(this,t,n);case"ascii":return g(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return o=this,i=n,0===(a=t)&&i===o.length?N.fromByteArray(o):N.fromByteArray(o.slice(a,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=x.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,o,a){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),t<0||n>e.length||o<0||a>this.length)throw new RangeError("out of range index");if(a<=o&&n<=t)return 0;if(a<=o)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(o>>>=0),r=(n>>>=0)-(t>>>=0),s=Math.min(i,r),l=this.slice(o,a),c=e.slice(t,n),d=0;d<s;++d)if(l[d]!==c[d]){i=l[d],r=c[d];break}return i<r?-1:r<i?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},u.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var a,i,r,s,l,c,d,u,p,h=this.length-t;if((void 0===n||h<n)&&(n=h),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var f=!1;;)switch(o){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return u=t,p=n,G(w(e,(d=this).length-u),d,u,p);case"ascii":return m(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return s=this,l=t,c=n,G(R(e),s,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=t,r=n,G(function(e,t){for(var n,o,a,i=[],r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),o=n>>8,a=n%256,i.push(a),i.push(o);return i}(e,(a=this).length-i),a,i,r);default:if(f)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),f=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;u.prototype.slice=function(e,t){var n,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):o<e&&(e=o),(t=void 0===t?o:~~t)<0?(t+=o)<0&&(t=0):o<t&&(t=o),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var a=t-e;n=new u(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||_(e,t,this.length);for(var o=this[e],a=1,i=0;++i<t&&(a*=256);)o+=this[e+i]*a;return o},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||_(e,t,this.length);for(var o=this[e+--t],a=1;0<t&&(a*=256);)o+=this[e+--t]*a;return o},u.prototype.readUInt8=function(e,t){return t||_(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||_(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||_(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||_(e,t,this.length);for(var o=this[e],a=1,i=0;++i<t&&(a*=256);)o+=this[e+i]*a;return(a*=128)<=o&&(o-=Math.pow(2,8*t)),o},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||_(e,t,this.length);for(var o=t,a=1,i=this[e+--o];0<o&&(a*=256);)i+=this[e+--o]*a;return(a*=128)<=i&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||_(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||_(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||_(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||_(e,4,this.length),A.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||_(e,4,this.length),A.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||_(e,8,this.length),A.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||_(e,8,this.length),A.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,o){e=+e,t|=0,n|=0,o||S(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,o){e=+e,t|=0,n|=0,o||S(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;0<=--a&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):b(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):b(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var a=Math.pow(2,8*n-1);S(this,e,t,n,a-1,-a)}var i=0,r=1,s=0;for(this[t]=255&e;++i<n&&(r*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/r>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var a=Math.pow(2,8*n-1);S(this,e,t,n,a-1,-a)}var i=n-1,r=1,s=0;for(this[t+i]=255&e;0<=--i&&(r*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/r>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):b(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):b(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),0<o&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var a,i=o-n;if(this===e&&n<t&&t<o)for(a=i-1;0<=a;--a)e[a+t]=this[a+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},u.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!u.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var r=u.isBuffer(e)?e:w(new u(e,o).toString()),s=r.length;for(i=0;i<n-t;++i)this[i+t]=r[i%s]}return this};var E=/[^+\/0-9A-Za-z-_]/g}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:5,isarray:7}],3:[function(e,t,n){var o={utf8:{stringToBytes:function(e){return o.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(o.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};t.exports=o},{}],4:[function(e,t,n){var i,o;i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&o.rotl(e,8)|4278255360&o.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=o.endian(e[t]);return e},randomBytes:function(e){for(var t=[];0<e;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,o=0;n<e.length;n++,o+=8)t[o>>>5]|=e[n]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],a=0;a<4;a++)8*n+6*a<=8*e.length?t.push(i.charAt(o>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&t.push((i.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|i.indexOf(e.charAt(n))>>>6-2*o);return t}},t.exports=o},{}],5:[function(e,t,n){n.read=function(e,t,n,o,a){var i,r,s=8*a-o-1,l=(1<<s)-1,c=l>>1,d=-7,u=n?a-1:0,p=n?-1:1,h=e[t+u];for(u+=p,i=h&(1<<-d)-1,h>>=-d,d+=s;0<d;i=256*i+e[t+u],u+=p,d-=8);for(r=i&(1<<-d)-1,i>>=-d,d+=o;0<d;r=256*r+e[t+u],u+=p,d-=8);if(0===i)i=1-c;else{if(i===l)return r?NaN:1/0*(h?-1:1);r+=Math.pow(2,o),i-=c}return(h?-1:1)*r*Math.pow(2,i-o)},n.write=function(e,t,n,o,a,i){var r,s,l,c=8*i-a-1,d=(1<<c)-1,u=d>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:i-1,f=o?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),2<=(t+=1<=r+u?p/l:p*Math.pow(2,1-u))*l&&(r++,l/=2),d<=r+u?(s=0,r=d):1<=r+u?(s=(t*l-1)*Math.pow(2,a),r+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,a),r=0));8<=a;e[n+h]=255&s,h+=f,s/=256,a-=8);for(r=r<<a|s,c+=a;0<c;e[n+h]=255&r,h+=f,r/=256,c-=8);e[n+h-f]|=128*y}},{}],6:[function(e,t,n){function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(o(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&o(t.slice(0,0))||!!e._isBuffer);var t}},{}],7:[function(e,t,n){var o={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==o.call(e)}},{}],8:[function(e,t,n){var C,v,I,_,o;C=e("crypt"),v=e("charenc").utf8,I=e("is-buffer"),_=e("charenc").bin,(o=function e(t,n){t.constructor==String?t=n&&"binary"===n.encoding?_.stringToBytes(t):v.stringToBytes(t):I(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var o=C.bytesToWords(t),a=8*t.length,i=1732584193,r=-271733879,s=-1732584194,l=271733878,c=0;c<o.length;c++)o[c]=16711935&(o[c]<<8|o[c]>>>24)|4278255360&(o[c]<<24|o[c]>>>8);o[a>>>5]|=128<<a%32,o[14+(a+64>>>9<<4)]=a;var d=e._ff,u=e._gg,p=e._hh,h=e._ii;for(c=0;c<o.length;c+=16){var f=i,y=r,m=s,g=l;r=h(r=h(r=h(r=h(r=p(r=p(r=p(r=p(r=u(r=u(r=u(r=u(r=d(r=d(r=d(r=d(r,s=d(s,l=d(l,i=d(i,r,s,l,o[c+0],7,-680876936),r,s,o[c+1],12,-389564586),i,r,o[c+2],17,606105819),l,i,o[c+3],22,-1044525330),s=d(s,l=d(l,i=d(i,r,s,l,o[c+4],7,-176418897),r,s,o[c+5],12,1200080426),i,r,o[c+6],17,-1473231341),l,i,o[c+7],22,-45705983),s=d(s,l=d(l,i=d(i,r,s,l,o[c+8],7,1770035416),r,s,o[c+9],12,-1958414417),i,r,o[c+10],17,-42063),l,i,o[c+11],22,-1990404162),s=d(s,l=d(l,i=d(i,r,s,l,o[c+12],7,1804603682),r,s,o[c+13],12,-40341101),i,r,o[c+14],17,-1502002290),l,i,o[c+15],22,1236535329),s=u(s,l=u(l,i=u(i,r,s,l,o[c+1],5,-165796510),r,s,o[c+6],9,-1069501632),i,r,o[c+11],14,643717713),l,i,o[c+0],20,-373897302),s=u(s,l=u(l,i=u(i,r,s,l,o[c+5],5,-701558691),r,s,o[c+10],9,38016083),i,r,o[c+15],14,-660478335),l,i,o[c+4],20,-405537848),s=u(s,l=u(l,i=u(i,r,s,l,o[c+9],5,568446438),r,s,o[c+14],9,-1019803690),i,r,o[c+3],14,-187363961),l,i,o[c+8],20,1163531501),s=u(s,l=u(l,i=u(i,r,s,l,o[c+13],5,-1444681467),r,s,o[c+2],9,-51403784),i,r,o[c+7],14,1735328473),l,i,o[c+12],20,-1926607734),s=p(s,l=p(l,i=p(i,r,s,l,o[c+5],4,-378558),r,s,o[c+8],11,-2022574463),i,r,o[c+11],16,1839030562),l,i,o[c+14],23,-35309556),s=p(s,l=p(l,i=p(i,r,s,l,o[c+1],4,-1530992060),r,s,o[c+4],11,1272893353),i,r,o[c+7],16,-155497632),l,i,o[c+10],23,-1094730640),s=p(s,l=p(l,i=p(i,r,s,l,o[c+13],4,681279174),r,s,o[c+0],11,-358537222),i,r,o[c+3],16,-722521979),l,i,o[c+6],23,76029189),s=p(s,l=p(l,i=p(i,r,s,l,o[c+9],4,-640364487),r,s,o[c+12],11,-421815835),i,r,o[c+15],16,530742520),l,i,o[c+2],23,-995338651),s=h(s,l=h(l,i=h(i,r,s,l,o[c+0],6,-198630844),r,s,o[c+7],10,1126891415),i,r,o[c+14],15,-1416354905),l,i,o[c+5],21,-57434055),s=h(s,l=h(l,i=h(i,r,s,l,o[c+12],6,1700485571),r,s,o[c+3],10,-1894986606),i,r,o[c+10],15,-1051523),l,i,o[c+1],21,-2054922799),s=h(s,l=h(l,i=h(i,r,s,l,o[c+8],6,1873313359),r,s,o[c+15],10,-30611744),i,r,o[c+6],15,-1560198380),l,i,o[c+13],21,1309151649),s=h(s,l=h(l,i=h(i,r,s,l,o[c+4],6,-145523070),r,s,o[c+11],10,-1120210379),i,r,o[c+2],15,718787259),l,i,o[c+9],21,-343485551),i=i+f>>>0,r=r+y>>>0,s=s+m>>>0,l=l+g>>>0}return C.endian([i,r,s,l])})._ff=function(e,t,n,o,a,i,r){var s=e+(t&n|~t&o)+(a>>>0)+r;return(s<<i|s>>>32-i)+t},o._gg=function(e,t,n,o,a,i,r){var s=e+(t&o|n&~o)+(a>>>0)+r;return(s<<i|s>>>32-i)+t},o._hh=function(e,t,n,o,a,i,r){var s=e+(t^n^o)+(a>>>0)+r;return(s<<i|s>>>32-i)+t},o._ii=function(e,t,n,o,a,i,r){var s=e+(n^(t|~o))+(a>>>0)+r;return(s<<i|s>>>32-i)+t},o._blocksize=16,o._digestsize=16,t.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=C.wordsToBytes(o(e,t));return t&&t.asBytes?n:t&&t.asString?_.bytesToString(n):C.bytesToHex(n)}},{charenc:3,crypt:4,"is-buffer":6}],9:[function(e,d,u){(function(c){(function(){function t(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function k(e){return e=U(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:t(e)}function L(e,t){for(var n in e)s.call(e,n)&&t(e[n],n,e)}function E(e){return null==e?t(e):J.call(e).slice(8,-1)}function x(e,t){var n=null!=e?V(e[t]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function F(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function B(n,o){var a=null;return function(e,t){var n=-1,o=e?e.length:0;if("number"==typeof o&&-1<o&&o<=i)for(;++n<o;)t(e[n],n,e);else L(e,t)}(n,function(e,t){a=o(a,e,t,n)}),a}function U(e){return String(e).replace(/^ +| +$/g,"")}var e={function:!0,object:!0},O=e["undefined"==typeof window?"undefined":V(window)]&&window||this,Y=O,n=e[void 0===u?"undefined":V(u)]&&u,o=e[void 0===d?"undefined":V(d)]&&d&&!d.nodeType&&d,a=n&&o&&"object"==(void 0===c?"undefined":V(c))&&c;!a||a.global!==a&&a.window!==a&&a.self!==a||(O=a);var i=Math.pow(2,53)-1,K=/\bOpera/,H=this,r=Object.prototype,s=r.hasOwnProperty,J=r.toString,l=function e(s){function t(e){return B(e,function(e,t){var n=t.pattern||F(t);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(s)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(s)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(s))&&((e=String(t.label&&!RegExp(n,"i").test(t.label)?t.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),t=t.label||t,e=k(e[0].replace(RegExp(n,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2"))),e})}var n=O,o=s&&"object"==(void 0===s?"undefined":V(s))&&"String"!=E(s);o&&(n=s,s=null);var a=n.navigator||{},i=a.userAgent||"";s||(s=i);var r,l,c=o||H==Y,d=o?!!a.likeChrome:/\bChrome\b/.test(s)&&!/internal|\n/i.test(J.toString()),u=o?"Object":"ScriptBridgingProxyObject",p=o?"Object":"Environment",h=o&&n.java?"JavaPackage":E(n.java),f=o?"Object":"RuntimeObject",y=/\bJava/.test(h)&&n.java,m=y&&E(n.environment)==p,g=y?"a":"伪",C=y?"b":"尾",v=n.document||{},I=n.operamini||n.opera,_=K.test(_=o&&I?I["[[Class]]"]:E(I))?_:I=null,S=s,T=[],b=null,P=s==i,D=P&&I&&"function"==typeof I.version&&I.version(),M=B([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,t){return e||RegExp("\\b"+(t.pattern||F(t))+"\\b","i").exec(s)&&(t.label||t)}),w=B(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,t){return e||RegExp("\\b"+(t.pattern||F(t))+"\\b","i").exec(s)&&(t.label||t)}),R=t([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),G=B({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,t,n){return e||(t[R]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(R)]||RegExp("\\b"+F(n)+"(?:\\b|\\w*\\d)","i").exec(s))&&n}),N=B(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,t){var n,o,a,i,r=t.pattern||F(t);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(s))&&(n=e,o=r,a=t.label||t,i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},o&&a&&/^Win/i.test(n)&&!/^Windows Phone /i.test(n)&&(i=i[/[\d.]+$/.exec(n)])&&(n="Windows "+i),n=String(n),o&&a&&(n=n.replace(RegExp(o,"i"),a)),e=k(n.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),e});if(M&&(M=[M]),G&&!R&&(R=t([G])),(r=/\bGoogle TV\b/.exec(R))&&(R=r[0]),/\bSimulator\b/i.test(s)&&(R=(R?R+" ":"")+"Simulator"),"Opera Mini"==w&&/\bOPiOS\b/.test(s)&&T.push("running in Turbo/Uncompressed mode"),"IE"==w&&/\blike iPhone OS\b/.test(s)?(G=(r=e(s.replace(/like iPhone OS/,""))).manufacturer,R=r.product):/^iP/.test(R)?(w||(w="Safari"),N="iOS"+((r=/ OS ([\d_]+)/i.exec(s))?" "+r[1].replace(/_/g,"."):"")):"Konqueror"!=w||/buntu/i.test(N)?G&&"Google"!=G&&(/Chrome/.test(w)&&!/\bMobile Safari\b/i.test(s)||/\bVita\b/.test(R))||/\bAndroid\b/.test(N)&&/^Chrome/.test(w)&&/\bVersion\//i.test(s)?(w="Android Browser",N=/\bAndroid\b/.test(N)?N:"Android"):"Silk"==w?(/\bMobi/i.test(s)||(N="Android",T.unshift("desktop mode")),/Accelerated *= *true/i.test(s)&&T.unshift("accelerated")):"PaleMoon"==w&&(r=/\bFirefox\/([\d.]+)\b/.exec(s))?T.push("identifying as Firefox "+r[1]):"Firefox"==w&&(r=/\b(Mobile|Tablet|TV)\b/i.exec(s))?(N||(N="Firefox OS"),R||(R=r[1])):!w||(r=!/\bMinefield\b/i.test(s)&&/\b(?:Firefox|Safari)\b/.exec(w))?(w&&!R&&/[\/,]|^[^(]+?\)/.test(s.slice(s.indexOf(r+"/")+8))&&(w=null),(r=R||G||N)&&(R||G||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(N))&&(w=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(N)?N:r)+" Browser")):"Electron"==w&&(r=(/\bChrome\/([\d.]+)\b/.exec(s)||0)[1])&&T.push("Chromium "+r):N="Kubuntu",D||(D=B(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",F(w),"(?:Firefox|Minefield|NetFront)"],function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(s)||0)[1]||null})),(r=("iCab"==M&&3<parseFloat(D)?"WebKit":/\bOpera\b/.test(w)&&(/\bOPR\b/.test(s)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(s)&&!/^(?:Trident|EdgeHTML)$/.test(M)&&"WebKit"||!M&&/\bMSIE\b/i.test(s)&&("Mac OS"==N?"Tasman":"Trident")||"WebKit"==M&&/\bPlayStation\b(?! Vita\b)/i.test(w)&&"NetFront")&&(M=[r]),"IE"==w&&(r=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(s)||0)[1])?(w+=" Mobile",N="Windows Phone "+(/\+$/.test(r)?r:r+".x"),T.unshift("desktop mode")):/\bWPDesktop\b/i.test(s)?(w="IE Mobile",N="Windows Phone 8.x",T.unshift("desktop mode"),D||(D=(/\brv:([\d.]+)/.exec(s)||0)[1])):"IE"!=w&&"Trident"==M&&(r=/\brv:([\d.]+)/.exec(s))&&(w&&T.push("identifying as "+w+(D?" "+D:"")),w="IE",D=r[1]),P){if(x(n,"global"))if(y&&(S=(r=y.lang.System).getProperty("os.arch"),N=N||r.getProperty("os.name")+" "+r.getProperty("os.version")),c&&x(n,"system")&&(r=[n.system])[0]){N||(N=r[0].os||null);try{r[1]=n.require("ringo/engine").version,D=r[1].join("."),w="RingoJS"}catch(s){r[0].global.system==n.system&&(w="Narwhal")}}else"object"==V(n.process)&&!n.process.browser&&(r=n.process)?"object"==V(r.versions)?"string"==typeof r.versions.electron?(T.push("Node "+r.versions.node),w="Electron",D=r.versions.electron):"string"==typeof r.versions.nw&&(T.push("Chromium "+D,"Node "+r.versions.node),w="NW.js",D=r.versions.nw):(w="Node.js",S=r.arch,N=r.platform,D=(D=/[\d.]+/.exec(r.version))?D[0]:"unknown"):m&&(w="Rhino");else E(r=n.runtime)==u?(w="Adobe AIR",N=r.flash.system.Capabilities.os):E(r=n.phantom)==f?(w="PhantomJS",D=(r=r.version||null)&&r.major+"."+r.minor+"."+r.patch):"number"==typeof v.documentMode&&(r=/\bTrident\/(\d+)/i.exec(s))?(D=[D,v.documentMode],(r=+r[1]+4)!=D[1]&&(T.push("IE "+D[1]+" mode"),M&&(M[1]=""),D[1]=r),D="IE"==w?String(D[1].toFixed(1)):D[0]):"number"==typeof v.documentMode&&/^(?:Chrome|Firefox)\b/.test(w)&&(T.push("masking as "+w+" "+D),w="IE",D="11.0",M=["Trident"],N="Windows");N=N&&k(N)}if(D&&(r=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(s+";"+(P&&a.appMinorVersion))||/\bMinefield\b/i.test(s)&&"a")&&(b=/b/i.test(r)?"beta":"alpha",D=D.replace(RegExp(r+"\\+?$"),"")+("beta"==b?C:g)+(/\d+\+?/.exec(r)||"")),"Fennec"==w||"Firefox"==w&&/\b(?:Android|Firefox OS)\b/.test(N))w="Firefox Mobile";else if("Maxthon"==w&&D)D=D.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(R))"Xbox 360"==R&&(N=null),"Xbox 360"==R&&/\bIEMobile\b/.test(s)&&T.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(w)&&(!w||R||/Browser|Mobi/.test(w))||"Windows CE"!=N&&!/Mobi/i.test(s))if("IE"==w&&P)try{null===n.external&&T.unshift("platform preview")}catch(s){T.unshift("embedded")}else(/\bBlackBerry\b/.test(R)||/\bBB10\b/.test(s))&&(r=(RegExp(R.replace(/ +/g," *")+"/([.\\d]+)","i").exec(s)||0)[1]||D)?(N=((r=[r,/BB10/.test(s)])[1]?(R=null,G="BlackBerry"):"Device Software")+" "+r[0],D=null):this!=L&&"Wii"!=R&&(P&&I||/Opera/.test(w)&&/\b(?:MSIE|Firefox)\b/i.test(s)||"Firefox"==w&&/\bOS X (?:\d+\.){2,}/.test(N)||"IE"==w&&(N&&!/^Win/.test(N)&&5.5<D||/\bWindows XP\b/.test(N)&&8<D||8==D&&!/\bTrident\b/.test(s)))&&!K.test(r=e.call(L,s.replace(K,"")+";"))&&r.name&&(r="ing as "+r.name+((r=r.version)?" "+r:""),K.test(w)?(/\bIE\b/.test(r)&&"Mac OS"==N&&(N=null),r="identify"+r):(r="mask"+r,w=_?k(_.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(r)&&(N=null),P||(D=null)),M=["Presto"],T.push(r));else w+=" Mobile";(r=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(s)||0)[1])&&(r=[parseFloat(r.replace(/\.(\d)$/,".0$1")),r],"Safari"==w&&"+"==r[1].slice(-1)?(w="WebKit Nightly",b="alpha",D=r[1].slice(0,-1)):D!=r[1]&&D!=(r[2]=(/\bSafari\/([\d.]+\+?)/i.exec(s)||0)[1])||(D=null),r[1]=(/\bChrome\/([\d.]+)/i.exec(s)||0)[1],537.36==r[0]&&537.36==r[2]&&28<=parseFloat(r[1])&&"WebKit"==M&&(M=["Blink"]),P&&(d||r[1])?(M&&(M[1]="like Chrome"),r=r[1]||((r=r[0])<530?1:r<532?2:r<532.05?3:r<533?4:r<534.03?5:r<534.07?6:r<534.1?7:r<534.13?8:r<534.16?9:r<534.24?10:r<534.3?11:r<535.01?12:r<535.02?"13+":r<535.07?15:r<535.11?16:r<535.19?17:r<536.05?18:r<536.1?19:r<537.01?20:r<537.11?"21+":r<537.13?23:r<537.18?24:r<537.24?25:r<537.36?26:"Blink"!=M?"27":"28")):(M&&(M[1]="like Safari"),r=(r=r[0])<400?1:r<500?2:r<526?3:r<533?4:r<534?"4+":r<535?5:r<537?6:r<538?7:r<601?8:"8"),M&&(M[1]+=" "+(r+="number"==typeof r?".x":/[.+]/.test(r)?"":"+")),"Safari"==w&&(!D||45<parseInt(D))&&(D=r)),"Opera"==w&&(r=/\bzbov|zvav$/.exec(N))?(w+=" ",T.unshift("desktop mode"),"zvav"==r?(w+="Mini",D=null):w+="Mobile",N=N.replace(RegExp(" *"+r+"$"),"")):"Safari"==w&&/\bChrome\b/.exec(M&&M[1])&&(T.unshift("desktop mode"),w="Chrome Mobile",D=null,/\bOS X\b/.test(N)?(G="Apple",N="iOS 4.3+"):N=null),D&&0==D.indexOf(r=/[\d.]+$/.exec(N))&&-1<s.indexOf("/"+r+"-")&&(N=U(N.replace(r,""))),M&&!/\b(?:Avant|Nook)\b/.test(w)&&(/Browser|Lunascape|Maxthon/.test(w)||"Safari"!=w&&/^iOS/.test(N)&&/\bSafari\b/.test(M[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(w)&&M[1])&&(r=M[M.length-1])&&T.push(r),T.length&&(T=["("+T.join("; ")+")"]),G&&R&&R.indexOf(G)<0&&T.push("on "+G),R&&T.push((/^on /.test(T[T.length-1])?"":"on ")+R),N&&(r=/ ([\d.+]+)$/.exec(N),l=r&&"/"==N.charAt(N.length-r[0].length-1),N={architecture:32,family:r&&!l?N.replace(r[0],""):N,version:r?r[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(r=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(S))&&!/\bi686\b/i.test(S)?(N&&(N.architecture=64,N.family=N.family.replace(RegExp(" *"+r),"")),w&&(/\bWOW64\b/i.test(s)||P&&/\w(?:86|32)$/.test(a.cpuClass||a.platform)&&!/\bWin64; x64\b/i.test(s))&&T.unshift("32-bit")):N&&/^OS X/.test(N.family)&&"Chrome"==w&&39<=parseFloat(D)&&(N.architecture=64),s||(s=null);var A={};return A.description=s,A.layout=M&&M[0],A.manufacturer=G,A.name=w,A.prerelease=b,A.product=R,A.ua=s,A.version=w&&D,A.os=N||{architecture:null,family:null,version:null,toString:function(){return"null"}},A.parse=e,A.toString=function(){return this.description||""},A.version&&T.unshift(D),A.name&&T.unshift(w),N&&w&&(N!=String(N).split(" ")[0]||N!=w.split(" ")[0]&&!R)&&T.push(R?"("+N+")":"on "+N),T.length&&(A.description=T.join(" ")),A}();"function"==typeof define&&"object"==V(define.amd)&&define.amd?(O.platform=l,define(function(){return l})):n&&o?L(l,function(e,t){n[t]=e}):O.platform=l}).call(this)}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(t){if(d===setTimeout)return setTimeout(t,0);if((d===o||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(e){return d.call(this,t,0)}}}function r(){y&&h&&(y=!1,h.length?f=h.concat(f):m=-1,f.length&&s())}function s(){if(!y){var e=i(r);y=!0;for(var t=f.length;t;){for(h=f,f=[];++m<t;)h&&h[m].run();m=-1,t=f.length}h=null,y=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var d,u,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:o}catch(e){d=o}try{u="function"==typeof clearTimeout?clearTimeout:a}catch(e){u=a}}();var h,f=[],y=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||y||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],11:[function(t,n,e){(function(C){var v,I,o,e;v=t("crypt"),I=t("charenc").utf8,o=t("charenc").bin,(e=function(e,t){var n=v.wordsToBytes(function(e){e.constructor==String?e=I.stringToBytes(e):void 0!==C&&"function"==typeof C.isBuffer&&C.isBuffer(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());var t=v.bytesToWords(e),n=8*e.length,o=[],a=1732584193,i=-271733879,r=-1732584194,s=271733878,l=-1009589776;t[n>>5]|=128<<24-n%32,t[15+(n+64>>>9<<4)]=n;for(var c=0;c<t.length;c+=16){for(var d=a,u=i,p=r,h=s,f=l,y=0;y<80;y++){if(y<16)o[y]=t[c+y];else{var m=o[y-3]^o[y-8]^o[y-14]^o[y-16];o[y]=m<<1|m>>>31}var g=(a<<5|a>>>27)+l+(o[y]>>>0)+(y<20?1518500249+(i&r|~i&s):y<40?1859775393+(i^r^s):y<60?(i&r|i&s|r&s)-1894007588:(i^r^s)-899497514);l=s,s=r,r=i<<30|i>>>2,i=a,a=g}a+=d,i+=u,r+=p,s+=h,l+=f}return[a,i,r,s,l]}(e));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):v.bytesToHex(n)})._blocksize=16,e._digestsize=20,n.exports=e}).call(this,t("buffer").Buffer)},{buffer:2,charenc:3,crypt:4}],12:[function(e,t,n){var o=function(e){e.extends(this)};o.prototype={loginStart:function(){var e=this._generatePostData({category:"account",action:"start"});this._upload(e)},loginSuccess:function(e){if(e&&e.userID){this.data.userID=e.userID,this._addLocalStorage("_UID_"+this.data.appID,this.data.userID);var t=this._generatePostData({category:"account",action:"success"});this._upload(t)}else console.log("userID 涓嶈兘涓虹┖!")},loginFailed:function(){var e=this._generatePostData({category:"account",action:"failure"});this._upload(e)},logout:function(){var e=this._generatePostData({category:"account",action:"logout"});this._upload(e)},setAccountType:function(e){var t=this._generatePostData({category:"account",action:"setType",accountType:e});this._upload(t)},setAge:function(e){var t=this._generatePostData({category:"account",action:"setAge",age:e});this._upload(t)},setGender:function(e){if(0==e||1==e||2==e){var t=this._generatePostData({category:"account",action:"setGender",gender:e});this._upload(t)}else console.log("gender 涓� int 绫诲瀷锛�0 鏈煡銆�1 鐢锋€с€� 2 濂虫€�")},createRole:function(e){var t={};e.roleID&&(t.roleID=e.roleID),e.userName&&(t.userName=e.userName),e.race&&(t.race=e.race),e.class&&(t.class=e.class),e.gameServer&&(t.gameServer=e.gameServer);var n=this._generatePostData({category:"createRole",role:t});this._upload(n)},setLevel:function(e){var t=this._generatePostData({category:"account",action:"setLevel",level:e});this._upload(t)}},t.exports=o},{}],13:[function(e,d,u){(function(l,c){!function(e,t,n){var o={function:!0,object:!0},a=o["undefined"==typeof window?"undefined":V(window)]&&window||this,i=o[void 0===u?"undefined":V(u)]&&u,r=o[void 0===d?"undefined":V(d)]&&d&&!d.nodeType&&d,s=i&&r&&"object"==(void 0===c?"undefined":V(c))&&c;!s||s.global!==s&&s.window!==s&&s.self!==s||(a=s),"function"==typeof define&&"object"==V(define.amd)&&define.amd?(l.env.NODE_ENV="development",define(n)):i&&r&&(d.exports=n()),a[e]=n()}("cocosAnalytics",window,function(){return e(window.CC_JSB?"./nativeCocosAnalytics":"./h5CocosAnalytics")})}).call(this,e("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./h5CocosAnalytics":16,"./nativeCocosAnalytics":19,_process:10}],14:[function(t,n,e){(function(o){var a=t("sha1"),e={x64Add:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Multiply:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Rotl:function(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},x64LeftShift:function(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},x64Xor:function(e,t){return[e[0]^t[0],e[1]^t[1]]},x64Fmix:function(e){return e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[4283543511,3981806797]),e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[3301882366,444984403]),this.x64Xor(e,[0,e[0]>>>1])},x64hash128:function(e,t){t=t||0;for(var n=(e=e||"0").length%16,o=e.length-n,a=[0,t],i=[0,t],r=[0,0],s=[0,0],l=[2277735313,289559509],c=[1291169091,658871167],d=0;d<o;d+=16)r=[255&e.charCodeAt(d+4)|(255&e.charCodeAt(d+5))<<8|(255&e.charCodeAt(d+6))<<16|(255&e.charCodeAt(d+7))<<24,255&e.charCodeAt(d)|(255&e.charCodeAt(d+1))<<8|(255&e.charCodeAt(d+2))<<16|(255&e.charCodeAt(d+3))<<24],s=[255&e.charCodeAt(d+12)|(255&e.charCodeAt(d+13))<<8|(255&e.charCodeAt(d+14))<<16|(255&e.charCodeAt(d+15))<<24,255&e.charCodeAt(d+8)|(255&e.charCodeAt(d+9))<<8|(255&e.charCodeAt(d+10))<<16|(255&e.charCodeAt(d+11))<<24],r=this.x64Multiply(r,l),r=this.x64Rotl(r,31),r=this.x64Multiply(r,c),a=this.x64Xor(a,r),a=this.x64Rotl(a,27),a=this.x64Add(a,i),a=this.x64Add(this.x64Multiply(a,[0,5]),[0,1390208809]),s=this.x64Multiply(s,c),s=this.x64Rotl(s,33),s=this.x64Multiply(s,l),i=this.x64Xor(i,s),i=this.x64Rotl(i,31),i=this.x64Add(i,a),i=this.x64Add(this.x64Multiply(i,[0,5]),[0,944331445]);switch(r=[0,0],s=[0,0],n){case 15:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(d+14)],48));case 14:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(d+13)],40));case 13:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(d+12)],32));case 12:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(d+11)],24));case 11:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(d+10)],16));case 10:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(d+9)],8));case 9:s=this.x64Xor(s,[0,e.charCodeAt(d+8)]),s=this.x64Multiply(s,c),s=this.x64Rotl(s,33),s=this.x64Multiply(s,l),i=this.x64Xor(i,s);case 8:r=this.x64Xor(r,this.x64LeftShift([0,e.charCodeAt(d+7)],56));case 7:r=this.x64Xor(r,this.x64LeftShift([0,e.charCodeAt(d+6)],48));case 6:r=this.x64Xor(r,this.x64LeftShift([0,e.charCodeAt(d+5)],40));case 5:r=this.x64Xor(r,this.x64LeftShift([0,e.charCodeAt(d+4)],32));case 4:r=this.x64Xor(r,this.x64LeftShift([0,e.charCodeAt(d+3)],24));case 3:r=this.x64Xor(r,this.x64LeftShift([0,e.charCodeAt(d+2)],16));case 2:r=this.x64Xor(r,this.x64LeftShift([0,e.charCodeAt(d+1)],8));case 1:r=this.x64Xor(r,[0,e.charCodeAt(d)]),r=this.x64Multiply(r,l),r=this.x64Rotl(r,31),r=this.x64Multiply(r,c),a=this.x64Xor(a,r)}return a=this.x64Xor(a,[0,e.length]),i=this.x64Xor(i,[0,e.length]),a=this.x64Add(a,i),i=this.x64Add(i,a),a=this.x64Fmix(a),i=this.x64Fmix(i),a=this.x64Add(a,i),i=this.x64Add(i,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)},random32Str:function(){var n,e=Date.now().toString(32).toUpperCase();return n=Date.now(),(e||"")+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t;return t=(n+16*Math.random())%16|0,n=Math.floor(n/16),"x"===e?t.toString(16):(7&t|8).toString(16)}).replace(/-/g,"").toUpperCase()},encryptPostData:function(e,t){var n=new o(e).toString("base64");return a(n+t).substr(0,32)+n}};n.exports=e}).call(this,t("buffer").Buffer)},{buffer:2,sha1:11}],15:[function(e,t,n){var o=function(e){e.extends(this)};o.prototype={onEvent:function(e){if(e&&e.eventName){var t=this._generatePostData({category:"event",action:"success",eventName:e.eventName});this._upload(t)}else console.log("eventName 涓嶈兘涓虹┖!")},onEventStart:function(e){if(e&&e.eventName){var t=this._generatePostData({category:"event",action:"start",eventName:e.eventName});this._upload(t)}else console.log("eventName 涓嶈兘涓虹┖!")},onEventEnd:function(e){if(e&&e.eventName){var t=this._generatePostData({category:"event",action:"end",eventName:e.eventName});this._upload(t)}else console.log("eventName 涓嶈兘涓虹┖!")}},t.exports=o},{}],16:[function(h,f,e){(function(t){var a=h("./encrypt"),n=h("platform"),o=h("md5"),i=h("./account"),r=h("./event"),s=h("./payment"),l=h("./levels"),c=h("./task"),d=h("./item"),u=h("./virtual"),p=h("./taskType"),e={data:{isInit:!1,msgPool:[],apiURL:"https://reportlog.cocos.com",versionCode:2},browserVersion:void 0,isActive:!0,isShowLog:!1,init:function(e){return e.appID?(this.data.appID=e.appID,e.appSecret?(this.data.appSecret=e.appSecret,e.channel&&(this.data.channel=e.channel),e.version&&(this.data.appVersion=e.version),e.build&&(this.data.appBuild=e.build),this.data.resolution=this._getScreenResolution(),this.data.CCID=this._getCCID(),this.data.userID=this._getLocalStorage("_UID_"+this.data.appID),this.data.sessionID=o(this.data.CCID+((new Date).getTime()+"")),this.CAAccount=new i(this),this.CAEvent=new r(this),this.CAPayment=new s(this),this.CALevels=new l(this),this.CATask=new c(this),this.CAItem=new d(this),this.CAVirtual=new u(this),this.CATaskType=new p(this),this._runInterval(),this._bindPageVisibilityEvent(),this.data.isInit=!0,void this._sendInitEvent()):void console.log("appSecret 涓嶈兘涓虹┖!")):void console.log("appID 涓嶈兘涓虹┖!")},isInited:function(){return this.data.isInit},onPause:function(){this.isActive=!1,this.data.end=((new Date).getTime()+"").substr(0,10);var e=this.data.end-this.data.start;this.log("duration..."+e+"s");var t=this._generatePostData({category:"view",action:"background",start:this.data.start,end:this.data.end});this._upload(t)},onResume:function(){this.isActive=!0,this.data.start=((new Date).getTime()+"").substr(0,10),this.data.end&&3600<this.data.start-this.data.end&&(this.data.sessionID=o(this.data.CCID+((new Date).getTime()+"")),this._sendInitEvent())},enableDebug:function(e){this.isShowLog=e},_sendInitEvent:function(){var e=this._generatePostData({type:"game",category:"init",resolution:this.data.resolution,osVersion:n.os.version,language:this._getLanguage(),manufacturer:n.manufacturer,model:n.product,appVersion:this.data.appVersion,appBuild:this.data.appBuild,browserVersion:this._getBrowserVersion()});this._upload(e)},_runInterval:function(){var o=this;setInterval(function(){o.log("cocos analytics check and upload log...");for(var e=o._getLocalStorage("_MSG_"+o.data.appID),t=JSON.parse(e||"[]")||o.data.msgPool;0!==t.length;)if(t.length<=100)o._submit(t),t=[],o.data.msgPool=t,o._addLocalStorage("_MSG_"+o.data.appID,o._toJson(o.data.msgPool));else{var n=t.splice(0,100);o._submit(n),o.data.msgPool=t,o._addLocalStorage("_MSG_"+o.data.appID,o._toJson(o.data.msgPool))}},3e4),setInterval(function(){if(o.isActive){o.log("send heartbeat event");var e=o._generatePostData({category:"heartbeat"});o._upload(e)}},6e4)},_bindPageVisibilityEvent:function(){function e(){var e=document.visibilityState;"visible"===e&&n.onResume(),"hidden"===e&&n.onPause()}var t="hidden";t in document?document.addEventListener("visibilitychange",e):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(t="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e;var n=this;void 0!==document[t]&&e()},_generatePostData:function(e){var t=this._generateBasePostData();if(null==e)return t;for(var n in e)null!=e[n]&&t[n]!==e[n]&&(t[n]=e[n]);return t},_generateBasePostData:function(){var e=((new Date).getTime()+"").substr(0,10);return{versionCode:this.data.versionCode,appID:this.data.appID,channelID:this.data.channel,platform:n.os.family,engine:"h5",tsClient:e,CCID:this.data.CCID,sessionID:this.data.sessionID,userID:this.data.userID}},_toJson:function(e){return JSON.stringify(e)},_fromJson:function(e){return JSON.parse(e)},_upload:function(e){if(this.data.isInit){var t=[e];this._submit(t)}else console.log("Please init first!")},log:function(){if("development"===t.env.NODE_ENV||!0===this.isShowLog)for(var e in arguments)console.log(arguments[e])},_submit:function(t){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var o=this;n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){var e=JSON.parse(n.responseText);e&&"0"===e.status?o.log("resp success:",o._toJson(t),e):o.log("resp error:",o._toJson(t),e)}else o.log("Problem retrieving data:",o._toJson(t),n.status),o._msgPersist(t)},n.open("POST",this.data.apiURL,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;");var e=a.encryptPostData(this._toJson(t),this.data.appSecret);n.send(e)},_msgPersist:function(e){for(var t=0;t<e.length;t++)this.data.msgPool.push(e[t]);this._addLocalStorage("_MSG_"+this.data.appID,this._toJson(this.data.msgPool))},_getCCID:function(){var e=a.x64hash128(),t=this._getLocalStorage(e);return t||(t=o(a.random32Str()),this._addLocalStorage(e,t)),t},extends:function(e){e.data=this.data,e.log=this.log,e._toJson=this._toJson,e._upload=this._upload,e._submit=this._submit,e._msgPersist=this._msgPersist,e._generatePostData=this._generatePostData,e._generateBasePostData=this._generateBasePostData,e._addLocalStorage=this._addLocalStorage,e._delLocalStorage=this._delLocalStorage,e._getLocalStorage=this._getLocalStorage},_addLocalStorage:function(e,t){window.localStorage&&("sessionId"==e&&window.sessionStorage?sessionStorage.setItem("__CA_"+e,t):localStorage.setItem("__CA_"+e,t))},_delLocalStorage:function(e){window.localStorage&&("sessionId"==e&&window.sessionStorage?sessionStorage.removeItem("__CA_"+e):localStorage.removeItem("__CA_"+e))},_getLocalStorage:function(e){if(window.localStorage)return"sessionId"==e&&window.sessionStorage?sessionStorage.getItem("__CA_"+e):localStorage.getItem("__CA_"+e)},_getScreenResolution:function(){return screen.width+"*"+screen.height},_getBrowserVersion:function(){if(!this.browserVersion){var e=navigator.userAgent.toLowerCase(),t=/micromessenger|qqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|edge|baiduboxapp|bidubrowser|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i.exec(e);t||(t=/chrome|safari|firefox|opr|oupeng|opera/i.exec(e));var n=t?t[0]:"unknown";"micromessenger"===n?n="wechat":"safari"===n&&e.match(/android.*applewebkit/)?n="androidbrowser":"trident"===n?n="ie":"360 aphone"===n?n="360browser":"mxbrowser"===n?n="maxthon":"opr"===n?n="opera":"bidubrowser"===n&&(n="baidubrowser");var o=e.match(/(micromessenger|qq|mx|maxthon|edge|bidu|baidu|sogou)(mobile)?(browserType)?\/?([\d.]+)/i);o||(o=e.match(/(msie |rv:|firefox|chrome|ucbrowser|oupeng|opera|opr|safari|miui)(mobile)?(browserType)?\/?([\d.]+)/i));var a=o?o[4]:"";this.browserVersion=n,a&&(this.browserVersion+="-"+a)}return this.browserVersion},_getLanguage:function(){var e=navigator.language;return(e=e||navigator.browserLanguage)?e.split("-")[0]:"en"}};f.exports=e}).call(this,h("_process"))},{"./account":12,"./encrypt":14,"./event":15,"./item":17,"./levels":18,"./payment":20,"./task":21,"./taskType":22,"./virtual":23,_process:10,md5:8,platform:9}],17:[function(e,t,n){var o=function(e){e.extends(this)};o.prototype={buy:function(e){var t={itemID:e.itemID,itemType:e.itemType,itemCount:e.itemCount,virtualCoin:e.virtualCoin,virtualType:e.virtualType,consumePoint:e.consumePoint},n=this._generatePostData({category:"item",action:"buy",item:t});this._upload(n)},get:function(e){var t={itemID:e.itemID,itemType:e.itemType,itemCount:e.itemCount,reason:e.reason},n=this._generatePostData({category:"item",action:"get",item:t});this._upload(n)},consume:function(e){var t={itemID:e.itemID,itemType:e.itemType,itemCount:e.itemCount,reason:e.reason},n=this._generatePostData({category:"item",action:"consume",item:t});this._upload(n)}},t.exports=o},{}],18:[function(e,t,n){var o=function(e){e.extends(this)};o.prototype={begin:function(e){if(e&&e.level){var t=this._generatePostData({category:"level",action:"start",level:e.level});this._upload(t)}else console.log("level 涓嶈兘涓虹┖!")},complete:function(e){if(e&&e.level){var t=this._generatePostData({category:"level",action:"success",level:e.level});this._upload(t)}else console.log("level 涓嶈兘涓虹┖!")},failed:function(e){if(e&&e.level){var t=this._generatePostData({category:"level",action:"failure",level:e.level,reason:e.reason});this._upload(t)}else console.log("level 涓嶈兘涓虹┖!")}},t.exports=o},{}],19:[function(e,t,n){var o={init:function(){},isInited:function(){},onPause:function(){},onResume:function(){},CAAccount:{loginStart:function(){},loginSuccess:function(e){},loginFailure:function(){},logout:function(e){},setAccountType:function(e){},setAge:function(e){},setGender:function(e){},setGameServer:function(e){},createRole:function(e){}},CAEvent:{onEvent:function(e){},onEventStart:function(e){},onEventEnd:function(e){}},CAPayment:{onPayment:function(e){}},CALevels:{begin:function(e){},complete:function(e){},failed:function(e){}},CATask:{begin:function(e){},complete:function(e){},failed:function(e){}},CAItem:{buy:function(e){},get:function(e){},consume:function(e){}},CAVirtual:{setVirtualNum:function(e){},get:function(e){},consume:function(e){}},CATaskType:new(e("./taskType"))(this)};t.exports=o},{"./taskType":22}],20:[function(e,t,n){var o=function(e){e.extends(this)};o.prototype={payBegin:function(e){var t=this._generatePostData({category:"paySDK",action:"start",value:e.amount,orderID:e.orderID,payType:e.payType,iapID:e.iapID,currencyType:e.currencyType});this._upload(t)},paySuccess:function(e){var t=this._generatePostData({category:"paySDK",action:"success",value:e.amount,orderID:e.orderID,payType:e.payType,iapID:e.iapID,currencyType:e.currencyType});this._upload(t)},payFailed:function(e){var t=this._generatePostData({category:"paySDK",action:"failure",value:e.amount,orderID:e.orderID,payType:e.payType,iapID:e.iapID,currencyType:e.currencyType});this._upload(t)},payCanceled:function(e){var t=this._generatePostData({category:"paySDK",action:"canceled",value:e.amount,orderID:e.orderID,payType:e.payType,iapID:e.iapID,currencyType:e.currencyType});this._upload(t)}},t.exports=o},{}],21:[function(e,t,n){var o=function(e){e.extends(this)};o.prototype={begin:function(e){if(e&&e.taskID){var t=this._generatePostData({category:"task",action:"start",taskID:e.taskID,taskType:e.type});this._upload(t)}else console.log("taskID 涓嶈兘涓虹┖!")},complete:function(e){if(e&&e.taskID){var t=this._generatePostData({category:"task",action:"success",taskID:e.taskID});this._upload(t)}else console.log("taskID 涓嶈兘涓虹┖!")},failed:function(e){if(e&&e.taskID){var t=this._generatePostData({category:"task",action:"failure",taskID:e.taskID,reason:e.reason});this._upload(t)}else console.log("taskID 涓嶈兘涓虹┖!")}},t.exports=o},{}],22:[function(e,t,n){var o=function(e){};o.prototype={GuideLine:1,MainLine:2,BranchLine:3,Daily:4,Activity:5,Other:100},t.exports=o},{}],23:[function(e,t,n){var o=function(e){e.extends(this)};o.prototype={setVirtualNum:function(e){var t={type:e.type,count:e.count},n=this._generatePostData({category:"virtual",action:"set",virtual:t});this._upload(n)},get:function(e){var t={type:e.type,count:e.count,reason:e.reason},n=this._generatePostData({category:"virtual",action:"get",virtual:t});this._upload(n)},consume:function(e){var t={type:e.type,count:e.count,reason:e.reason},n=this._generatePostData({category:"virtual",action:"consume",virtual:t});this._upload(n)}},t.exports=o},{}]},{},[13]),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],h5jssdk:[function(t,n,o){"use strict";cc._RF.push(n,"66906BbkKxCfJqDeAk1HsMk","h5jssdk");var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o.H5SDK=function(n){function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var a={};return o.m=n,o.c=a,o.i=function(e){return e},o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=11)}([function(e,t,n){e.exports={api:"https://h5sdk.game.qq.com/api2/H5SDKApi.php",report:"",apptype:4,wxappid:"",networkType:"",h5channel:10030414,h5sdkVersion:"20180510",gameVersion:"",reportCount:9,requestCount:0,maxRequestCount:1,tempUserLoginInfo:{},tempReportData:[]}},function(e,t,n){var o,a=n(0),i=(o=a)&&o.__esModule?o:{default:o};e.exports={setStorage:function(e,t,n){n=null==n?86400:Math.abs(n);var o=Date.now()+1e3*n;try{wx.setStorageSync(e,t),wx.setStorageSync(e+"_expiresIn",o)}catch(n){return i.default.tempUserLoginInfo[e]=t,i.default.tempUserLoginInfo[e+"_expiresIn"]=o,!1}return!0},getStorage:function(e){var t=Date.now(),n=wx.getStorageSync(e+"_expiresIn");if(""==n&&(n=null!=i.default.tempUserLoginInfo[e+"_expiresIn"]||0!==i.default.tempUserLoginInfo[e+"_expiresIn"]?i.default.tempUserLoginInfo[e+"_expiresIn"]:0),n<t)return this.removeStorage(e),null;try{var o=wx.getStorageSync(e);return""==o&&(o=i.default.tempUserLoginInfo[e]),o}catch(e){return null}},removeStorage:function(t){try{wx.removeStorageSync(t),wx.removeStorageSync(t+"_expiresIn"),i.default.tempUserLoginInfo[t]=null,i.default.tempUserLoginInfo[t+"_expiresIn"]=0}catch(e){return i.default.tempUserLoginInfo[t]=null,i.default.tempUserLoginInfo[t+"_expiresIn"]=0,!1}return!0}}},function(e,t,n){var o,a="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)},i=n(0),r=(o=i)&&o.__esModule?o:{default:o};e.exports={getSystemInfoSync:function(){return wx.getSystemInfoSync()},getNetworkType:function(){wx.getNetworkType({success:function(e){r.default.networkType=e.networkType}})},getLaunchOptionsSync:function(){return wx.getLaunchOptionsSync()},getSystem:function(){var e=this.getSystemInfoSync().system;return-1<e.indexOf("Android")?"android":-1<e.indexOf("iOS")?"ios":"pc"},getWXsdkVersion:function(){var e=this.getSystemInfoSync().SDKVersion;return e.replace(/\./g,"")},checkSession:function(){return new Promise(function(t,n){wx.checkSession({success:function(e){t(e)},fail:function(e){n(e)}})})},serialize:function(e){var t=null;if(void 0!==e&&"function"!=typeof e||(t=""),"number"==typeof e&&(t=e.toString()),"boolean"==typeof e&&(t=e?"1":"0"),"object"==(void 0===e?"undefined":a(e))&&(e||(t=""),e instanceof RegExp&&(t=e.toString())),"string"==typeof e&&(t=e),"string"==typeof t)return encodeURIComponent(t);var n=[];if(e instanceof Array){for(var o=0;o<e.length;o++)void 0!==e[o]&&n.push("object"==a(e[o])?"":this.serialize(e[o]));return n.join("|")}for(var o in e)void 0!==e[o]&&(t=null,"object"==a(e[o])?e[o]instanceof Array?(t=e[o],n.push(o+"="+this.serialize(t))):n.push(o+"="):(t=e[o],n.push(o+"="+this.serialize(t))));return n.join("&")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"GET";return function(o,a){return new Promise(function(t,n){var e={url:o,data:a,method:i,success:function(e){t(e)},fail:function(e){n(e)}};"POST"==i&&(e.header={"Content-Type":"GET"==i?"application/json;":"application/x-www-form-urlencoded;"},e.data="reportData="+JSON.stringify(a)),wx.request(e)})}};t.get=o("GET"),t.post=o("POST")},function(e,t,n){var o={wegameUrl:location.protocol+"//wximg.gtimg.com/wxgame/wegame-v2.js",qqapi:location.protocol+"//open.mobile.qq.com/sdk/qqapi.js?_bid=152",wxappid:"",qqappid:"",shareInfo:{image_url:"",title:"",desc:""},h5sdkApi:{default:"h5sdk.game.qq.com",snake:"snake.h5sdk.game.qq.com",h5game:"peng.h5sdk.game.qq.com"},enbaleRightDragToGoBackParams:!1,isNeedPayToken:!0,isNeeduserInfo:!0,isDebug:!1,startTime:0,log:"",countwxloginapi:0,beaconHttpUrl:"https:"==location.protocol?"https://3gimg.qq.com/mig_op/beacon/js/beacon_release_s.js?":"http://3gimg.qq.com/mig_op/beacon/js/beacon_release.js?",version:"v1.0.0"};e.exports=o},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)};n.Report=function(t,n,a){var o,i,r,s,l,c,d,u,p={};if("SceneFlow"==t){if(c=p,u=a,null==(d=n).isubZoneAreaID||""==d.isubZoneAreaID?c.isubZoneAreaID=-1:c.isubZoneAreaID=d.isubZoneAreaID,null==d.vRoleID&&""==d.vRoleID?c.vRoleID=-1:c.vRoleID=d.vRoleID,!(null==d.cardID&&""==d.cardID?("object"==(void 0===u?"undefined":f(u))&&"function"==typeof u.fail&&u.fail("页卡Id不能为空"),0):(c.CardID=d.cardID,null==d.slotID&&""==d.slotID?("object"==(void 0===u?"undefined":f(u))&&"function"==typeof u.fail&&u.fail("槽位Id不能为空"),0):(c.SlotID=d.slotID,null==d.orderID&&""==d.orderID?("object"==(void 0===u?"undefined":f(u))&&"function"==typeof u.fail&&u.fail("次序Id不能为空"),0):(c.OrderID=d.orderID,null==d.iActionId&&""==d.iActionId?("object"==(void 0===u?"undefined":f(u))&&"function"==typeof u.fail&&u.fail("行为类型Id不能为空"),0):(c.iActionId=d.iActionId,"object"==d.extend&&(c.extend=d.extend),1))))))return!1}else if("ActionFlow"==t)s=p,null==(l=n).isubZoneAreaID||""==l.isubZoneAreaID?s.isubZoneAreaID=-1:s.isubZoneAreaID=l.isubZoneAreaID,l.c1&&(s.c1=l.c1),l.c2&&(s.c2=l.c2),l.c3&&(s.c3=l.c3),l.c4&&(s.c4=l.c4),l.c5&&(s.c5=l.c5),l.c6&&(s.c6=l.c6),l.c7&&(s.c7=l.c7),l.c8&&(s.c8=l.c8),l.c9&&(s.c9=l.c9),"object"==l.extend&&(s.extend=l.extend);else{if("GuideFlow"!=t)return!1;if(o=p,r=a,null==(i=n).isubZoneAreaID||""==i.isubZoneAreaID?o.isubZoneAreaID=-1:o.isubZoneAreaID=i.isubZoneAreaID,null==i.vRoleID&&""==i.vRoleID?o.vRoleID=-1:o.vRoleID=i.vRoleID,i.combatEffectiveness&&(o.CombatEffectiveness=i.combatEffectiveness),i.playerFriendsNum&&(o.PlayerFriendsNum=i.playerFriendsNum),i.mapID&&(o.MapID=i.mapID),!(null==i.iGuideType&&""==i.iGuideType?("object"==(void 0===r?"undefined":f(r))&&"function"==typeof r.fail&&r.fail("新手引导节点类型不能为空"),0):(o.iGuideType=i.iGuideType,null==i.iGuideID&&""==i.iGuideID?("object"==(void 0===r?"undefined":f(r))&&"function"==typeof r.fail&&r.fail("新手引导节点ID不能为空"),0):(o.iGuideID=i.iGuideID,o.ClientVersion=y.default.gameVersion,i.result&&(o.Result=0==i.result?0:1),"object"==i.extend&&(o.extend=i.extend),1))))return!1}var h=wx.getStorageSync("HSDK_report_data");if(""==h&&(h=y.default.tempReportData),p.reportType=t,h.push(p),h.length>y.default.reportCount)return(0,m.reportIdata)(h).then(function(t){if(-9999==t.iRet){var n=wx.getStorageSync("HSDK_report_data");""==n&&(n=y.default.tempReportData);for(var o=0;o<h.length;o++)n.push(h[o]);try{wx.setStorageSync("HSDK_report_data",n)}catch(e){y.default.tempUserLoginInfo=n}"object"==(void 0===a?"undefined":f(a))&&"function"==typeof a.fail&&a.fail(e)}else"object"==(void 0===a?"undefined":f(a))&&"function"==typeof a.success&&a.success(t)}).catch(function(e){"object"==(void 0===a?"undefined":f(a))&&"function"==typeof a.fail&&a.fail(e)}),wx.removeStorageSync("HSDK_report_data"),y.default.tempUserLoginInfo.length=0,!1;try{wx.setStorageSync("HSDK_report_data",h)}catch(e){y.default.tempUserLoginInfo=h}},n.onhideReport=function(){wx.onHide(function(){var e=wx.getStorageSync("HSDK_report_data");""==e&&(e=y.default.tempReportData),"object"==(void 0===e?"undefined":f(e))&&0<e.length&&((0,m.reportIdata)(e),y.default.tempReportData.length=0,wx.removeStorageSync("HSDK_report_data"))})};var a,i=o(0),y=(a=i)&&a.__esModule?a:{default:a},m=o(6)},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.reportIdata=function(e){var t=(r.default.getSystemInfoSync(),r.default.getLaunchOptionsSync()),o=i.default.api+"?"+r.default.serialize({methodCmd:1042,apptype:i.default.apptype,h5game_openid:s.default.getStorage("openid"),h5sdk_sessionid:s.default.getStorage("sdkKey"),h5game_os:r.default.getSystem(),appid:i.default.wxappid,h5channel:null==t.query.scene?t.scene:t.query.scene});return new Promise(function(t,n){(0,l.post)(o,e).then(function(e){t(e.data)}).catch(function(e){n(e)})})},t.reportATM=function(e){var t=r.default.getSystemInfoSync(),o=(r.default.getLaunchOptionsSync(),i.default.api+"?"+r.default.serialize({methodCmd:1046,apptype:i.default.apptype,h5game_openid:s.default.getStorage("openid"),appid:i.default.wxappid})),a={h5game_os:r.default.getSystem(),version:null==i.default.gameVersion?"":i.default.gameVersion,h5sdkVersion:i.default.h5sdkVersion,dateTime:(new Date).getTime(),sMsg:e,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:i.default.networkType}};return new Promise(function(t,n){(0,l.post)(o,a).then(function(e){t(e.data)}).catch(function(e){n(e)})})};var i=o(n(0)),r=o(n(2)),s=o(n(1)),l=n(3)},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Init=function(e){a.default.wxappid=e.wxappid,a.default.gameVersion=e.gameVersion,i.default.getNetworkType(),(0,r.onhideReport)()};var a=o(n(0)),i=o(n(2)),r=n(5)},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)},a=o(n(2)),r=o(n(12)),s=o(n(1)),l=o(n(0)),c=n(6);e.exports={login:function(o){var a=this;void 0===o||i(o),a.getLogin().then(function(n){n.code?r.default.getUserInfo().then(function(t){a.getLoginKey(n.code,t.userInfo).then(function(){var e={encryptedData:t.encryptedData,errMsg:t.errMsg,iv:t.iv,rawData:t.rawData,signature:t.signature,userInfo:{avatarUrl:t.userInfo.avatarUrl,city:t.userInfo.city,country:t.userInfo.country,gender:t.userInfo.gender,h5game_openid:s.default.getStorage("openid"),h5sdk_sessionid:s.default.getStorage("sdkKey"),language:t.userInfo.language,nickName:t.userInfo.nickName,province:t.userInfo.province}};null!=s.default.getStorage("unionid")&&(e.userInfo.unionid=s.default.getStorage("unionid")),"function"==typeof o.success&&o.success(e)}).catch(function(e){(0,c.reportATM)(e),"function"==typeof o.fail&&o.fail(e)})}).catch(function(e){!0===o.canUserInfoPlay?"function"==typeof o.fail&&o.fail(e):/auth\sdeny/.test(e.errMsg)?a.getLoginKey(n.code,{}).then(function(){var e={userInfo:{h5game_openid:s.default.getStorage("openid"),h5sdk_sessionid:s.default.getStorage("sdkKey")}};null!=s.default.getStorage("unionid")&&(e.userInfo.unionid=s.default.getStorage("unionid")),"function"==typeof o.success&&o.success(e)}).catch(function(e){"function"==typeof o.fail&&o.fail(e)}):"function"==typeof o.fail&&o.fail(e)}):"function"==typeof o.fail&&o.fail(n)}).catch(function(e){"function"==typeof o.fail&&o.fail(e)})},getLogin:function(){return new Promise(function(n,o){(function t(){wx.login({success:function(e){l.default.requestCount=0,n(e)},fail:function(e){/timed\sout/.test(e.errMsg)||/failed\sto\sconnect\sto/.test(e.errMsg)?l.default.requestCount>=l.default.maxRequestCount?("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="wx login",e.requestCount=l.default.requestCount),o(e)):(t(),l.default.requestCount++):("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="wx login"),o(e))}})})()})},getLoginKey:function(o,a){return new Promise(function(e,n){(function t(){r.default.getLoginKey(o,a).then(function(){l.default.requestCount=0,e()}).catch(function(e){/timed\sout/.test(e.errMsg)||/failed\sto\sconnect\sto/.test(e.errMsg)?l.default.requestCount>=l.default.maxRequestCount?("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="h5sdk getLoginKey",e.requestCount=l.default.requestCount),n(e)):(t(),l.default.requestCount++):("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="h5sdk getLoginKey"),n(e))})})()})},reportUserInfo:function(e,t){var n=a.default.getSystemInfoSync(),o=[{reportType:"userprofile",isubZoneAreaID:-1,gender:null==e.gender?-1:"女"==e.gender?2:1,country:null==e.country?"":e.country,province:null==e.province?"":e.province,city:null==e.city?"":e.city,h5game_os:a.default.getSystem(),model:n.model,vflag:t}];(0,c.reportIdata)(o).then(function(e){console.log("report success",e)}).catch(function(e){console.log("report fail",e)})},createUserInfoButton:function(e,t){var n=wx.createUserInfoButton(e),o=this;n.onTap(function(e){/auth\sdeny/.test(e.errMsg)?(o.reportUserInfo({},0),"function"==typeof t.fail&&t.fail(e)):(o.reportUserInfo(e.userInfo),"function"==typeof t.success&&t.success(e,1))})},getLoginUserInfo:function(o){return new Promise(function(e,n){(function t(){r.default.getLoginUserInfo(o).then(function(){l.default.requestCount=0,e()}).catch(function(e){/timed\sout/.test(e.errMsg)||/failed\sto\sconnect\sto/.test(e.errMsg)?l.default.requestCount>=l.default.maxRequestCount?("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="h5sdk getLoginUserInfo",e.requestCount=l.default.requestCount),n(e)):(t(),l.default.requestCount++):("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="h5sdk getLoginUserInfo"),n(e))})})()})},checkLogin:function(n){var o=this;wx.checkSession({success:function(e){null==s.default.getStorage("openid")||null==s.default.getStorage("sdkKey")||s.default.getStorage("openid").length<8||s.default.getStorage("sdkKey").length<8?o.login(n):r.default.getUserInfo().then(function(t){o.getLoginUserInfo(t.userInfo).then(function(){var e={encryptedData:t.encryptedData,errMsg:t.errMsg,iv:t.iv,rawData:t.rawData,signature:t.signature,userInfo:{avatarUrl:t.userInfo.avatarUrl,city:t.userInfo.city,country:t.userInfo.country,gender:t.userInfo.gender,h5game_openid:s.default.getStorage("openid"),h5sdk_sessionid:s.default.getStorage("sdkKey"),language:t.userInfo.language,nickName:t.userInfo.nickName,province:t.userInfo.province}};null!=s.default.getStorage("unionid")&&(e.userInfo.unionid=s.default.getStorage("unionid")),"function"==typeof n.success&&n.success(e)}).catch(function(e){"object"==(void 0===e?"undefined":i(e))&&"object"==i(e.data)&&"-9201"==e.data.iRet?o.login(n):"function"==typeof n.fail&&n.fail(e)})}).catch(function(e){!0===n.canUserInfoPlay?"function"==typeof n.fail&&n.fail(e):/auth\sdeny/.test(e.errMsg)&&o.getLoginUserInfo({}).then(function(){var e={userInfo:{h5game_openid:s.default.getStorage("openid"),h5sdk_sessionid:s.default.getStorage("sdkKey")}};null!=s.default.getStorage("unionid")&&(e.userInfo.unionid=s.default.getStorage("unionid")),"function"==typeof n.success&&n.success(e)}).catch(function(e){"object"==(void 0===e?"undefined":i(e))&&"object"==i(e.data)&&"-9201"==e.data.iRet?o.login(n):"function"==typeof n.fail&&n.fail(e)})})},fail:function(e){o.login(n)}})}}},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var a="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)},i=o(n(4)),r=o(n(2)),s=o(n(1));e.exports={setUserSnsData:function(n){if("option"!=typeof n&&null!=a(n.rankVal)){var e=r.default.getSystemInfoSync();return r.default.getLaunchOptionsSync(),i.default.apptype,s.default.getStorage("openid"),s.default.getStorage("sdkKey"),r.default.getSystem(),i.default.wxappid,i.default.h5channel,n.rankVal,e.version,e.system,e.model,i.default.networkType,new Promise(function(e,t){get(i.default.api,sendData).then(function(e){"function"==typeof n.success&&n.success(e)}).catch(function(e){"function"==typeof n.fail&&n.fail(res)})})}},exitMiniProgram:function(t){wx.exitMiniProgram({success:function(e){"function"==typeof t.success&&t.success(e)},fail:function(e){"function"==typeof t.fail&&t.fail(e)},complete:function(e){"function"==typeof t.complete&&t.complete(e)}})},getSessionInfo:function(){return{h5game_openid:s.default.getStorage("openid"),h5sdk_sessionid:s.default.getStorage("sdkKey")}},openTencentGameContract:function(){wx.openTencentGameContract()},openTencentPrivacyContract:function(){wx.openTencentPrivacyContract()}}},function(e,t,n){var o,a="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)},i=n(13),r=n(1),s=(o=r)&&o.__esModule?o:{default:o};e.exports={share:function(t){var e={};"object"==a(t.shareInfo)&&(e.title=t.shareInfo.title,null!=t.shareInfo.imageUrl&&""!=t.shareInfo.imageUrl&&(e.imageUrl=t.shareInfo.imageUrl),null!=t.shareInfo.query&&""!=t.shareInfo.query?e.query=t.shareInfo.query+"&openid="+s.default.getStorage("openid"):e.query="openid="+s.default.getStorage("openid"),null!=t.shareInfo.canvas&&""!=t.shareInfo.canvas&&(e.canvas=t.shareInfo.canvas),e.success=function(e){(0,i.shareReport)({shareResult:0,iActionId:1}),"function"==typeof t.success&&t.success(e)},e.fail=function(e){(0,i.shareReport)({shareResult:1,iActionId:1}),"function"==typeof t.fail&&t.fail(e)},e.complete=function(e){"function"==typeof t.complete&&t.complete(e)}),wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return e})},shareMessage:function(t){var e={};e.title=t.shareInfo.title,null!=t.shareInfo.imageUrl&&""!=t.shareInfo.imageUrl&&(e.imageUrl=t.shareInfo.imageUrl),null!=t.shareInfo.query&&""!=t.shareInfo.query?e.query=t.shareInfo.query+"&openid="+s.default.getStorage("openid"):e.query="openid="+s.default.getStorage("openid"),null!=t.shareInfo.canvas&&""!=t.shareInfo.canvas&&(e.canvas=t.shareInfo.canvas),e.success=function(e){(0,i.shareReport)({shareResult:0,iActionId:2,gameScene:t.shareInfo.gameScene}),"function"==typeof t.success&&t.success(e)},e.fail=function(e){(0,i.shareReport)({shareResult:1,iActionId:2,gameScene:t.shareInfo.gameScene}),"function"==typeof t.fail&&t.fail(e)},e.complete=function(e){"function"==typeof t.complete&&t.complete(e)},wx.shareAppMessage(e)}}},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e){(0,a.Init)(e)},t.checkLogin=function(e){i.default.checkLogin(e)},t.login=function(e){i.default.login(e)},t.createUserInfoButton=function(e,t){i.default.createUserInfoButton(e,t)},t.share=function(e){r.default.share(e)},t.shareMessage=function(e){r.default.shareMessage(e)},t.getSessionInfo=function(){return s.default.getSessionInfo()},t.setUserSnsData=function(e){s.default.setUserSnsData(e)},t.exitMiniProgram=function(e){s.default.exitMiniProgram(e)},t.openTencentGameContract=function(e){s.default.openTencentGameContract(e)},t.openTencentPrivacyContract=function(e){s.default.openTencentPrivacyContract(e)},t.report=function(e,t,n){(0,l.Report)(e,t,n)};var a=(o(n(4)),n(7)),i=o(n(8)),r=o(n(10)),s=o(n(9)),l=n(5)},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(n(0)),r=o(n(2)),s=o(n(1)),l=n(3);e.exports={getLoginKey:function(e,t){var n=r.default.getSystemInfoSync(),o=r.default.getLaunchOptionsSync(),a={h5game_code:e,methodCmd:1034,apptype:i.default.apptype,h5game_os:r.default.getSystem(),appid:i.default.wxappid,h5channel:null==o.query.scene?o.scene:o.query.scene,gender:t.gender,country:null==t.country?-1:t.country,province:null==t.province?-1:t.province,city:null==t.city?-1:t.city,regChannel:i.default.h5channel,version:null==i.default.gameVersion?"":i.default.gameVersion,h5sdkVersion:i.default.h5sdkVersion,user_agent:{channelversion:n.version,system:n.system,model:n.model,networkType:i.default.networkType}};return null==o.query.openid||""==o.query.openid||1007!=o.query.scene&&1008!=o.query.scene||(a.shareOpenid=o.query.openid,a.shareStatus=13==o.query.shareStatus?13:-1),new Promise(function(n,o){(0,l.get)(i.default.api,a).then(function(e){if("-9201"==e.data.iRet||"40029"==e.data.iRet||"-9999"==e.data.iRet)o(e);else{var t=e.data;s.default.setStorage("sdkKey",t.list.h5sdk_sessionid,86400),s.default.setStorage("openid",t.list.openid,86400),t.list.unionid&&s.default.setStorage("unionid",t.list.unionid,86400),n(t)}}).catch(function(e){o(e)})})},getUserInfo:function(){return new Promise(function(t,n){wx.getUserInfo({success:function(e){t(e)},fail:function(e){n(e)}})})},getLoginUserInfo:function(e){var t=r.default.getSystemInfoSync(),n=r.default.getLaunchOptionsSync(),o={methodCmd:1039,apptype:i.default.apptype,h5game_openid:s.default.getStorage("openid"),h5sdk_sessionid:s.default.getStorage("sdkKey"),no_strong_check:0,h5game_os:r.default.getSystem(),appid:i.default.wxappid,h5channel:null==n.query.scene?n.scene:n.query.scene,gender:e.gender,country:null==e.country?-1:e.country,province:null==e.province?-1:e.province,city:null==e.city?-1:e.city,regChannel:i.default.h5channel,version:null==i.default.gameVersion?"":i.default.gameVersion,h5sdkVersion:i.default.h5sdkVersion,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:i.default.networkType}};return null==n.query.openid||""==n.query.openid||1007!=n.query.scene&&1008!=n.query.scene||(o.shareOpenid=n.query.openid,o.shareStatus=13==n.query.shareStatus?13:-1),new Promise(function(t,n){(0,l.get)(i.default.api,o).then(function(e){"-9201"==e.data.iRet||"40029"==e.data.iRet||"-9999"==e.data.iRet?n(e):t(e)}).catch(function(e){n(e)})})}}},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.shareReport=function(e){var t=i.default.getSystemInfoSync(),n=i.default.getLaunchOptionsSync(),o={methodCmd:1014,apptype:a.default.apptype,logtype:"share",h5game_openid:r.default.getStorage("openid"),h5sdk_sessionid:r.default.getStorage("sdkKey"),result:e.shareResult,h5game_os:i.default.getSystem(),appid:a.default.wxappid,h5channel:null==n.query.scene?n.scene:n.query.scene,version:null==a.default.gameVersion?"":a.default.gameVersion,shareMode:e.iActionId,shareOpenid:r.default.getStorage("openid"),shareStatus:13,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:a.default.networkType}};return 2==e.shareMode&&(o.scene=null==e.gameScene?-1:e.gameScene),new Promise(function(t,n){(0,s.get)(a.default.api,o).then(function(e){t(e.data)}).catch(function(e){n(e)})})};var a=o(n(0)),i=o(n(2)),r=o(n(1)),s=n(3)}]),cc._RF.pop()},{}],mgplugin:[function(e,t,n){"use strict";cc._RF.push(t,"7de3aBpkKROnb0H1zgU/MLh","mgplugin");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){for(var n in t)e[n]=t[n]}(window,function(n){var o={};function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=n,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==(void 0===t?"undefined":s(t))&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},r="[recommender]";t.default={isAble:!1,setAble:function(e){this.isAble=e},setPlatform:function(e){this.platform=e},log:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a;this.isAble&&("qq"==this.platform&&"undefined"!=typeof BK&&BK.Script&&BK.Script.log?(n=n.map(function(e){return"object"==(void 0===e?"undefined":i(e))?JSON.stringify(e):e}),"object"==(void 0===e?"undefined":i(e))&&(e=JSON.stringify(e)),BK.Script.log(1,1,e+n.join(" "))):(a=console).log.apply(a,["",r,e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))))},error:function(e){if(this.isAble){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a;"qq"==this.platform&&"undefined"!=typeof BK&&BK.Script&&BK.Script.log?BK.Script.log(1,1,e+n.join(" ")):(a=console).error.apply(a,["",r,e].concat(n))}},warn:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a;"qq"==this.platform&&"undefined"!=typeof BK&&BK.Script&&BK.Script.log?BK.Script.log(1,1,e+n.join(" ")):(a=console).warn.apply(a,["",r,e].concat(n))}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.platform=void 0;var o,a=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),s=(o=n(0))&&o.__esModule?o:{default:o},i=new(function(){function n(){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this)}return a(n,[{key:"request",value:function(e){var t=e.url,n=e.data,o=e.method,a=e.success,i=e.fail;if(s.default.log("开始请求：",t,"数据：",n||""),"undefined"==typeof wx){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(200<=r.status&&r.status<400){var e=r.responseText;try{e=JSON.parse(e),s.default.log("请求成功：",t,"回包：",e)}catch(e){s.default.warn("请求失败: ",t),i(e)}a&&a(e)}else i&&i("server error: "+r.status)},r.open(o,t,!0),r.setRequestHeader("Content-Type","application/json"),r.send(n)}else wx.request({url:t,data:n||{},header:{"Content-Type":"application/json"},method:o,success:function(e){s.default.log("请求成功：",t,"回包：",e),a(e.data)},fail:function(e){s.default.warn("请求失败: ",t),i(e)}})}},{key:"setStorage",value:function(e,t){try{wx.setStorageSync(e,t)}catch(e){s.default.warn("存储错误")}}},{key:"getStorage",value:function(e){var t="";try{t=wx.getStorageSync(e)}catch(e){s.default.warn("缓存获取错误")}return t}},{key:"setTimeout",value:function(n){function e(e,t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(e,t){return setTimeout(e,t)})},{key:"clearTimeout",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){clearTimeout(e)})}]),n}());t.platform=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Recommender=void 0;var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),y=a(n(3)),m=a(n(0)),g=a(n(5)),C=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var i=this,t=e.appid,n=e.openid,o=e.debug,a=void 0!==o&&o,r=e.env,s=void 0===r?"prod":r,l=e.forceOpen,c=void 0!==l&&l,d=e.forceClose,u=void 0!==d&&d,p=e.onReady,h=e.platform,f=void 0===h?"wx":h;this.checkInstance(),m.default.setAble(a),m.default.setPlatform(f),t?(n||console.warn("请传入当前玩家的openid"),this.appid=t,this.openid=n,this.config=C.default[s],this.env=s,this.forceOpen=c,this.forceClose=u,this.platform=f,this.pause=!1,this.util=y.default.getInstance(this.platform),this.index=0,this.reporter=new g.default({appid:this.appid,openid:this.openid,svr:this.config.svr}),this.changeHandler=null,p&&"function"==typeof p&&(this.readyHandler=p),m.default.log("当前插件环境：",{dev:"开发",pre:"预发布",prod:"正式"}[s]),m.default.log("当前插件平台:",this.platform),this.games=[],this.checkPlatform()?this.getConfig().then(function(e){if(0===e.result){var t=e.data;if(!t||!t.advise_list)return m.default.warn("后台回包错误，插件开关关闭"),void(i.readyHandler&&i.readyHandler(!1,null));t.IsOpen=t.is_open,i.isLoop=t.is_loop,i.loopTime=t.loop_time||8,i.hejiTime=t.heji_time||8;for(var n=0;n<t.advise_list.length;++n){var o=t.advise_list[n];o.appid&&o.icon&&i.games.push({appid:o.appid,icon:o.icon,path:o.path})}if(i.games.length<=0)return m.default.warn("有效推荐游戏数为0，插件开关关闭"),void(i.readyHandler&&i.readyHandler(!1,null));if(m.default.log("后台配置插件开关：",t.IsOpen?"开启":"关闭"),m.default.log("轮播开关",i.isLoop?"开启":"关闭"),i.isLoop&&(m.default.log("轮播间隔",i.loopTime,"秒"),m.default.log("合集播放时间",i.hejiTime,"秒")),i.forceOpen&&(m.default.log("插件开关强制开启"),t.IsOpen=!0),i.forceClose&&(m.default.log("插件开关强制关闭"),t.IsOpen=!1),m.default.log("最终当前插件开关：",t.IsOpen?"开启":"关闭"),m.default.log("当前配置推荐游戏个数",t.advise_list.length),i.initIndex(),i.readyHandler){var a=i.games[i.index];a&&a.appid&&a.icon?(t.IsOpen&&(i.report(a,0,100),i.startLoop()),i.readyHandler(t.IsOpen,a)):(m.default.warn("后台数据错误，插件关闭"),i.readyHandler(!1,null))}}else m.default.log("后台拒绝，插件开关关闭"),i.readyHandler&&i.readyHandler(!1,null)},function(e){m.default.log("网络错误，插件开关关闭：",e),i.readyHandler&&i.readyHandler(!1,null)}).catch(function(e){throw e}):("wx"==this.platform?m.default.log("当前小游戏基础库版本不支持跳转功能，插件开关关闭，请参照文档 http://open.qqgame.qq.com/mobile/wiki/215/219/219.html 查看兼容相关处理"):m.default.log("当前不在手Q环境或是手Q版本过低，不支持游戏跳转，具体见玩一玩文档 http://hudong.qq.com/docs/engine/userInfo/other.html"),setTimeout(function(){i.readyHandler&&i.readyHandler(!1,null)},100))):console.error("请传入当前游戏的appid")};d.prototype={initIndex:function(){if(!this.isLoop){var e=this.util.getStorage("mgplugin-time"),t=this.util.getStorage("mgplugin-index");""!==e&&""!==t?(m.default.log("上次跳转的时间",e),m.default.log("上次跳转到的游戏坐标",t),this.checkExpired(e)&&t<this.games.length&&(m.default.log("设置上次跳转的游戏坐标"),this.index=t)):m.default.log("当前无历史游戏坐标记录")}},setIndex:function(e){this.isLoop||(this.util.setStorage("mgplugin-time",Date.now()),this.util.setStorage("mgplugin-index",e),m.default.log("设置本地缓存游戏坐标",e))},checkExpired:function(e){var t=new Date,n=new Date(e);return t.getMonth()==n.getMonth()&&t.getDate()==n.getDate()},checkInstance:function(){d.instance&&d.instance.stopLoop&&d.instance.stopLoop(),d.instance=this},getCurrentGame:function(){return this.games[this.index]},stopLoop:function(){void 0!==this.loopInterval&&null!==this.loopInterval?(m.default.log("停止图片轮播",this.loopInterval),this.pause=!0,this.clearInterval(this.loopInterval),this.loopInterval=null):m.default.log("图片未轮播")},resumeLoop:function(){this.pause&&(m.default.log("恢复轮播"),this.pause=!1,this.startLoop())},checkPlatform:function(){if("wx"==this.platform)return"undefined"!=typeof wx&&wx.navigateToMiniProgram;if("qq"==this.platform){var e=!0;return"undefined"!=typeof BK&&BK.QQ&&BK.QQ.skipGame||(m.default.warn("请引入玩一玩基础库"),e=!1),GameStatusInfo&&GameStatusInfo.QQVer&&"7.7.0"<=GameStatusInfo.QQVer?e=!0:(e=!1,m.default.log("当前手Q版本过低",GameStatusInfo)),e}},changeToNextGame:function(){if(this.index=(this.index+1)%this.games.length,this.setIndex(this.index),1<this.games.length){if(m.default.log("切换到下一个游戏，序号",this.index+1),this.report(this.games[this.index],this.index,100),this.changeHandler&&"function"==typeof this.changeHandler){var e=this.games[this.index];e&&e.appid&&e.icon?this.changeHandler(e):m.default.warn("游戏字段缺失")}}else m.default.log("当前游戏配置数为不大于1，不会切换游戏")},jumpToCurrentGame:function(){if(d.clickable){d.clickable=!1;var e=this.games[this.index];e&&e.icon&&e.appid?(m.default.log("当前跳转游戏",e),this.jumpToGame(e),this.report(e,this.index,101)):m.default.warn("游戏不存在")}else m.default.log("您点击的太快了")},jumpToGame:function(e){var t=this;if("wx"==this.platform&&(wx.navigateToMiniProgram?wx.navigateToMiniProgram({appId:e.appid,path:e.path||"",extraData:e.extraData||{},success:function(){m.default.log("游戏跳转成功，appid: "+e.appid)},fail:function(){m.default.warn("游戏跳转失败，appid：",e.appid,"请检查是否和目标跳转小游戏绑定在同一个公众号，或者是当前项目是否使用了正确的小游戏appid。")},complete:function(){setTimeout(function(){d.clickable=!0},1500),t.isLoop||t.changeToNextGame()}}):m.default.warn("当前小游戏基础库版本不支持跳转功能，基础库要求在2.2.0以上，请参照文档 http://open.qqgame.qq.com/mobile/wiki/215/219/219.html 查看兼容相关处理")),"qq"==this.platform)if("undefined"!=typeof BK&&BK.QQ&&BK.QQ.skipGame){var n=parseInt(e.appid);m.default.log("当前跳转appid "+n),n?BK.QQ.skipGame(n,""):m.default.log("appid不符合规范"),setTimeout(function(){d.clickable=!0},1500),this.isLoop||this.changeToNextGame()}else m.default.warn("当前不在手Q环境或是手Q版本过低，不支持游戏跳转，具体见玩一玩文档 http://hudong.qq.com/docs/engine/userInfo/other.html")},onChange:function(e){"function"==typeof e?this.changeHandler=e:m.default.warn("请传入回调函数")},onReady:function(e){"function"==typeof e?this.readyHandler=e:m.default.warn("请传入回调函数")},getConfig:function(){var o=this;return new Promise(function(t,e){var n="qq"==o.platform?"qqplay":"mgplugin";o.util.request({url:o.config.svr+"/"+n+"/getadviselist?appid="+o.appid,method:"GET",success:function(e){t(e)},fail:function(){e()}})})},report:function(e,t,n){var o="未知";101==n&&(o="点击"),100==n&&(o="曝光"),m.default.log("触发上报，上报类型：",o,"游戏序号：",t+1),this.reporter.report({iSceneLevel1:1000001,iSceneLevel2:1,iSceneLevel3:t+1,iActionId:n,iResourceId1:e.appid})},setInterval:function(e){var t=this,n=this.intervalTime();return m.default.log(n,"秒后切换到下一个游戏"),d.interval=this.loopInterval=this.util.setTimeout(function(){e(),t.pause||t.setInterval(e)},1e3*n),m.default.log("设置定时",this.loopInterval),this.loopInterval},clearInterval:function(e){this.util.clearTimeout(e)},getQQGameEntry:function(e){if("wx"==this.platform)var t=new i({appid:this.appid,openid:this.openid,env:this.env,onLoad:function(){e&&e(t)}});else m.default.log("非微信小游戏平台，不开启合集入口"),e&&e({isOpen:!1})},intervalTime:function(){return"wxc2cd6f55732dc1f2"==this.getCurrentGame().appid?(m.default.log("当前游戏为合集，轮播时间为",this.hejiTime,"秒"),this.hejiTime):this.loopTime},startLoop:function(){var e=this;if(this.isLoop){null!=d.loopInterval&&(m.default.log("存在多个定时器，清除旧定时器"),this.clearInterval(d.loopInterval));var t=this.setInterval(function(){e?(m.default.log("定时切换游戏"),e.changeToNextGame()):(m.default.log("实例销毁，定时器清除"),e.clearInterval(t))})}else m.default.log("轮播未打开，不启动轮播")}},d.clickable=!0;var i=function(){function c(e){var n=this,t=e.appid,o=void 0===t?"":t,a=e.openid,i=void 0===a?"unknown":a,r=e.env,s=void 0===r?"prod":r,l=e.onLoad;!function(e,t){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this),o?(this.appid=o,this.openid=i,this.config=C.default[s],this.reporter=new g.default({appid:this.appid,openid:this.openid,svr:this.config.svr}),this.util=y.default.getInstance("wx"),this.getConfig().then(function(e){var t=e.data;n.icon=t.icon,n.path=t.path,n.isOpen=t.is_open,m.default.log("当前的合集图标配置",t),m.default.log("当前合集图标开关：",t.is_open?"开启":"关闭"),"undefined"!=typeof wx&&wx.navigateToMiniProgram||(m.default.log("当前小游戏基础库版本不支持跳转功能，合集图标开关关闭"),t.isOpen=!1),n.isOpen&&(d.clickable=!0,n.report(100)),l&&l()},function(e){m.default.log("网络错误，合集图标开关关闭"),n.isOpen=!1,onload&&l()})):console.error("请传入当前游戏的appid")}return o(c,[{key:"getConfig",value:function(){var n=this;return new Promise(function(t,e){n.util.request({url:n.config.svr+"/heji/getconfig?appid="+n.appid,method:"GET",success:function(e){t(e)},fail:function(){e()}})})}},{key:"navigateToMiniProgram",value:function(){d.clickable?"undefined"!=typeof wx&&wx.navigateToMiniProgram?(d.clickable=!1,this.report(101),wx.navigateToMiniProgram({appId:"wxc2cd6f55732dc1f2",path:this.path||"",extraData:{},success:function(){m.default.log("合集跳转成功")},fail:function(){m.default.warn("合集跳转失败，请检查是否和合集小程序绑定在同一个公众号，或者是当前项目是否使用了正确的小游戏appid。")},complete:function(){setTimeout(function(){d.clickable=!0},1500)}})):m.default.warn("当前小游戏基础库版本不支持跳转功能，基础库要求在2.2.0以上，请参照文档 http://open.qqgame.qq.com/mobile/wiki/215/219/219.html 查看兼容相关处理"):m.default.log("您点击得太快了")}},{key:"report",value:function(e){var t="未知";101==e&&(t="点击"),100==e&&(t="曝光"),m.default.log("触发合集上报，类型：",t),this.reporter.report({iSceneLevel1:1000001,iSceneLevel2:1,iSceneLevel3:1,iActionId:e,iResourceId1:"wxc2cd6f55732dc1f2"})}}]),c}();t.Recommender=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=i(n(4));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.default={getInstance:function(e){return"qq"==e?a.platform:"wx"==e?o.platform:void 0}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.platform=void 0;var o,a=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),s=(o=n(0))&&o.__esModule?o:{default:o},r="GameSandBox://resource/localStorage",i=0,l={},c=new(function(){function n(){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this)}return a(n,[{key:"request",value:function(e){var n=e.url,t=e.data,o=e.method,a=e.success,i=e.fail;s.default.log("开始请求：",n,"数据：",t||""),XMLHttpRequest;var r=new BK.HttpUtil(n);r.setHttpMethod(o),r.setHttpHeader("Content-Type","application/json"),"post"!=o&&"POST"!=o||r.setHttpPostData(function(e){var t=[];for(var n in e){var o=e[n];t.push(n+"="+o)}return t.join("&")}(t)),r.requestAsync(function(t,e){if(200<=e&&e<400){t=t.readAsString(!0);try{t=JSON.parse(t)}catch(e){s.default.warn("请求失败，解析错误: ",t,e),i&&i(e)}s.default.log("请求成功：",n,"回包：",t),a&&a(t)}else s.default.warn("请求失败: ",n),i&&i()})}},{key:"getStorage",value:function(e){if(!BK.FileUtil.isFileExist(r))return"";var t=BK.FileUtil.readFile(r).readAsString();if(!t)return"";var n=void 0;try{n=JSON.parse(t)}catch(e){n={}}return n&&void 0!==n[e]?n[e]:""}},{key:"setStorage",value:function(e,t){var n=BK.FileUtil.readFile(r).readAsString(),o={};if(n){var a=JSON.parse(n);a&&(o=a)}o[e]=t;var i=JSON.stringify(o);return BK.FileUtil.writeFile(r,i),!0}},{key:"setTimeout",value:function(e,t){var n=i;return s.default.log("设置定时",n),l[n]={listener:e,delay:t},i++,BK.Director.ticker.setTimeout(function(){s.default.log("执行定时",n);var e=l[n];e&&e.listener(),delete l[n]},t),n}},{key:"clearTimeout",value:function(e){s.default.log("删除定时",e),l[e]&&delete l[e]}}]),n}());t.platform=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),l=n(1),c=(o=n(0))&&o.__esModule?o:{default:o},r={dtLoginTime:-1,vQimei:-1,vAppVer:-1,PlatID:-1,vOsType:-1,osversion:-1,nettype:-1,model:-1,iActionId:-1,iSceneLevel1:-1,iSceneLevel2:-1,iSceneLevel3:-1,iResourceId1:-1,iResourceId2:-1,iResourceId3:-1,iResourceId4:-1,iResourceId5:-1,iRet:-1,vV1:-1,vV2:-1,vV3:-1,vV4:-1,vV5:-1,vV6:-1,vV7:-1,vV8:-1,vV9:-1,vV10:-1},a=function(){function a(e){var t=e.appid,n=e.openid,o=e.svr;!function(e,t){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.appid=t,this.openid=n,this.svr=o,this.dataTemplate=Object.assign({},r,{iResourceId2:this.appid})}return i(a,[{key:"report",value:function(r){var s=this;return new Promise(function(e,t){r=Object.assign({},s.dataTemplate,r),c.default.log("开始上报：",r);var n,o,a,i=(n={data:[s.genDataString(r)],type:"0",openid:s.openid,appid:s.appid},o="openid",a=s.openid,o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n);l.platform.request({url:s.svr+"/mpreport/reportplugintlog",data:i,method:"POST",success:function(){c.default.log("上报成功：",r),e()},fail:function(){c.default.warn("上报失败：",r)}})})}},{key:"genDataString",value:function(t){var n=[];return Object.keys(t).forEach(function(e){return n.push(t[e])}),n.join("|")}}]),a}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(7)),a=r(n(8)),i=r(n(9));function r(e){return e&&e.__esModule?e:{default:e}}t.default={dev:o.default,prod:a.default,pre:i.default}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={svr:"https://test.ngo.minigame.qq.com"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={svr:"https://goplatform.minigame.qq.com"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={svr:"https://pre.ngo.minigame.qq.com"}}])),cc._RF.pop()},{}]},{},["TestBoLang","ButtonMgr","C","ClickMask","CubeContainer","CubeItem","DailyInfoMenu","DailyLevelConfig","DailyLevelCreator","DailyViewMgr","EffectMgr","FYUserDataMgr","PropMgr","RoleMgr","GameMain","GetInfo","GridItem","GuidanceMgr","RoleAnim","RoleConfig","SpriteAnim","FYAudioCtl","FYBaseNode","FYBaseUIPanel","FYEffectControl","FYEffectItem","FYGlobalVarMgr","FYMessenger","FYResMgr","FYSDKMgr","FYScheduleCtl","FYSequenceFrameControl","FYTweenMgr","FYUIMgr","FYUtility","cocosAnalytics.min","h5jssdk","mgplugin","RoleItem","UIAdvPanel","UIBackPackPanel","UIDailySharePanel","UIGameOverPanel","UIGetMenuPanel","UIHelpPanel","UILoadingPanel","UIMainPanel","UIPrizePanel","UIPropGetPanel","UIReStorePanel","UISelectDailyPanel","UISelectRolePanel","UISevenDayLoginPanel","UIShopPanel","UITipsPanel"]);