require=function n(l,a,s){function r(e,t){if(!a[e]){if(!l[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(h)return h(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var c=a[e]={exports:{}};l[e][0].call(c.exports,function(t){return r(l[e][1][t]||t)},c,c.exports,n,l,a,s)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<s.length;t++)r(s[t]);return r}({BlockCell:[function(t,e,o){"use strict";cc._RF.push(e,"dde8dXaSpJMoJb/LtpfLW1A","BlockCell"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nIndex=0,t}return __extends(t,e),t.prototype.setItem=function(t){this.nIndex=t},t.prototype.getIndex=function(){return this.nIndex},t.prototype.start=function(){},t.prototype.DownMove=function(){return!0},t.prototype.CheckCanTouchMoveNext=function(){return!0},t=__decorate([c],t)}(cc.Component));o.default=n,cc._RF.pop()},{}],BlockConfig:[function(t,e,o){"use strict";cc._RF.push(e,"86c2fLBhmZC4bh4gAJkggiV","BlockConfig"),Object.defineProperty(o,"__esModule",{value:!0});var d=t("./Utility"),u=t("./C"),i=cc._decorator,c=i.ccclass,n=(i.property,function(){function t(){this.m_curBlock=null,this.m_curBlockType=null,this.m_curBlockColor=null,this.m_BlockList=[],this.m_BlockDict={}}return t.prototype.initBlockConfig=function(){this.m_BlockList[0]=[[1]],this.m_BlockList[1]=[[1,1]],this.m_BlockList[2]=[[1],[1]],this.m_BlockList[3]=[[0,0,0],[1,1,1],[0,0,0]],this.m_BlockList[4]=[[0,1,0],[0,1,0],[0,1,0]],this.m_BlockList[5]=[[1,1],[1,0]],this.m_BlockList[6]=[[1,1],[0,1]],this.m_BlockList[7]=[[1,0],[1,1]],this.m_BlockList[8]=[[0,1],[1,1]],this.m_BlockList[9]=[[1,1],[1,1]],this.m_BlockList[10]=[[1,1,1,1]],this.m_BlockList[11]=[[1],[1],[1],[1]],this.m_BlockList[12]=[[1,1,1],[1,0,0]],this.m_BlockList[13]=[[1,1],[0,1],[0,1]],this.m_BlockList[14]=[[1,0],[1,0],[1,1]],this.m_BlockList[15]=[[0,0,1],[1,1,1]],this.m_BlockList[16]=[[1,1],[1,0],[1,0]],this.m_BlockList[17]=[[1,1,1],[0,0,1]],this.m_BlockList[18]=[[0,1],[0,1],[1,1]],this.m_BlockList[19]=[[1,0,0],[1,1,1]],this.m_BlockList[20]=[[1,0,1],[1,1,1]],this.m_BlockList[21]=[[1,1],[1,0],[1,1]],this.m_BlockList[22]=[[1,1,1],[1,0,1]],this.m_BlockList[23]=[[1,1],[0,1],[1,1]],this.m_BlockList[24]=[[0,0,1],[0,0,1],[1,1,1]],this.m_BlockList[25]=[[1,0,0],[1,0,0],[1,1,1]],this.m_BlockList[26]=[[1,1,1],[1,0,0],[1,0,0]],this.m_BlockList[27]=[[1,1,1],[0,0,1],[0,0,1]],this.m_BlockDict[u.BlockType.Single]={num:1,width:1,height:1,rate:3},this.m_BlockDict[u.BlockType.Double]={num:2,width:2,height:1,rate:9},this.m_BlockDict[u.BlockType.Trible]={num:3,width:3,height:1,rate:18},this.m_BlockDict[u.BlockType.TribleL]={num:3,width:2,height:2,rate:27},this.m_BlockDict[u.BlockType.FourSquare]={num:4,width:2,height:2,rate:40},this.m_BlockDict[u.BlockType.Four]={num:4,width:4,height:1,rate:54},this.m_BlockDict[u.BlockType.FourL]={num:4,width:3,height:2,rate:68},this.m_BlockDict[u.BlockType.FourLMirror]={num:4,width:3,height:2,rate:82},this.m_BlockDict[u.BlockType.FiveConvex]={num:5,width:3,height:2,rate:91},this.m_BlockDict[u.BlockType.FiveL]={num:5,width:3,height:3,rate:100};var t=d.default.getRangeRandom(0,u.BlockColorType.Length-1);this.m_curBlockColor=t;var e=d.default.getRangeRandom(1,100);for(var o in this.m_BlockDict){if(this.m_BlockDict[o].rate>=e){this.m_curBlockType=parseInt(o);break}}switch(this.m_curBlockType){case u.BlockType.Single:this.m_curBlock=this.m_BlockList[0];break;case u.BlockType.FourSquare:this.m_curBlock=this.m_BlockList[9];break;case u.BlockType.Double:var i=d.default.getRangeRandom(1,2);this.m_curBlock=this.m_BlockList[i];break;case u.BlockType.Trible:var c=d.default.getRangeRandom(3,4);this.m_curBlock=this.m_BlockList[c];break;case u.BlockType.TribleL:var n=d.default.getRangeRandom(5,8);this.m_curBlock=this.m_BlockList[n];break;case u.BlockType.Four:var l=d.default.getRangeRandom(10,11);this.m_curBlock=this.m_BlockList[l];break;case u.BlockType.FourL:var a=d.default.getRangeRandom(12,15);this.m_curBlock=this.m_BlockList[a];break;case u.BlockType.FourLMirror:var s=d.default.getRangeRandom(16,19);this.m_curBlock=this.m_BlockList[s];break;case u.BlockType.FiveConvex:var r=d.default.getRangeRandom(20,23);this.m_curBlock=this.m_BlockList[r];break;case u.BlockType.FiveL:var h=d.default.getRangeRandom(24,27);this.m_curBlock=this.m_BlockList[h]}},t.prototype.GetBlockCount=function(){return this.m_BlockList.length},t=__decorate([c],t)}());o.default=n,cc._RF.pop()},{"./C":"C","./Utility":"Utility"}],C:[function(t,e,o){"use strict";var i;cc._RF.push(e,"3b849ZCPBhHF7IJT9/e/uq7","C"),Object.defineProperty(o,"__esModule",{value:!0}),o.Width=function(){return 750},o.Height=function(){return 1334},o.getCanvas=function(){return i},o.setCanvas=function(t){i=t};var c,n,l,a,s,r,h,d,u;(c=o.DataKey||(o.DataKey={})).selectMode="selectMode",c.soundState="soundState",(n=o.JsonDataKey||(o.JsonDataKey={})).maxScoreByType="BoxCrush_maxScoreByType",n.firstOpen="BoxCrush_firstOpen",(l=o.SoundType||(o.SoundType={}))[l.btnClick=0]="btnClick",l[l.blockSet=1]="blockSet",l[l.LineClean=2]="LineClean",l[l.Length=3]="Length",(a=o.MusicType||(o.MusicType={}))[a.bgm1=0]="bgm1",a[a.Length=1]="Length",(s=o.MsgType||(o.MsgType={}))[s.UserTouchMove=0]="UserTouchMove",s[s.UserTouchUp=1]="UserTouchUp",s[s.UserTouchDown=2]="UserTouchDown",(r=o.BlockType||(o.BlockType={}))[r.Single=0]="Single",r[r.Double=1]="Double",r[r.Trible=2]="Trible",r[r.TribleL=3]="TribleL",r[r.FourSquare=4]="FourSquare",r[r.Four=5]="Four",r[r.FourL=6]="FourL",r[r.FourLMirror=7]="FourLMirror",r[r.FiveConvex=8]="FiveConvex",r[r.FiveL=9]="FiveL",r[r.Length=10]="Length",(h=o.BlockDir||(o.BlockDir={}))[h.Top=0]="Top",h[h.Bottom=1]="Bottom",h[h.Left=2]="Left",h[h.Right=3]="Right",h[h.Length=4]="Length",(d=o.BlockColorType||(o.BlockColorType={}))[d.Purple=0]="Purple",d[d.Yellow=1]="Yellow",d[d.Red=2]="Red",d[d.Blue=3]="Blue",d[d.Green=4]="Green",d[d.Length=5]="Length",(u=o.SpriteAnimType||(o.SpriteAnimType={}))[u.spriteFrame=0]="spriteFrame",u[u.spriteAlpha=1]="spriteAlpha",cc._RF.pop()},{}],FYAudioCtl:[function(t,e,o){"use strict";cc._RF.push(e,"38c193WqDBOpo15JTzyhBvu","FYAudioCtl"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./C"),c=cc._decorator,n=c.ccclass,l=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arraySound=[],t.arrayMusic=[],t}var o;return __extends(t,e),o=t,Object.defineProperty(t,"Instance",{get:function(){return o._instance},enumerable:!0,configurable:!0}),t.prototype.playSound=function(t){this.arraySound[t]&&this.arraySound[t].play()},t.prototype.playMusic=function(t){this.arrayMusic[t]&&this.arrayMusic[t].play()},t.prototype.changeSoundVolume=function(t){for(var e=0;e<i.SoundType.Length;e++)this.arraySound[e]&&(this.arraySound[e].volume=t)},t.prototype.changeMusicVolume=function(t){for(var e=0;e<i.MusicType.Length;e++)this.arrayMusic[e]&&(this.arrayMusic[e].volume=t)},t.prototype.onLoad=function(){o._instance=this},t._instance=null,__decorate([l({type:Array(cc.AudioSource),displayName:"音效数组"})],t.prototype,"arraySound",void 0),__decorate([l({type:Array(cc.AudioSource),displayName:"音乐数组"})],t.prototype,"arrayMusic",void 0),t=o=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./C":"C"}],FYMessenger:[function(t,e,o){"use strict";cc._RF.push(e,"3686dVsJwxLrJ/z0LDtzaJi","FYMessenger"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){this.listeners={}}return t.prototype.add=function(t,e,o){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(new c(e,o))},t.prototype.remove=function(t,e,o){var i=this.listeners[t];if(i){for(var c=i.length,n=0;n<c;n++){if(i[n].compar(o)){i.splice(n,1);break}}0==i.length&&delete this.listeners[t]}},t.prototype.send=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var i=this.listeners[t];if(i)for(var c=i.length,n=0;n<c;n++){var l=i[n];l.notify.apply(l,[t].concat(e))}},t.Instance=new t,t}();o.default=i;var c=function(){function t(t,e){this.callback=null,this.context=null;this.callback=t,this.context=e}return t.prototype.notify=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];(t=this.callback).call.apply(t,[this.context].concat(e))},t.prototype.compar=function(t){return t==this.context},t}();cc._RF.pop()},{}],GameMain:[function(t,e,o){"use strict";cc._RF.push(e,"af292iZkvxImb8g29+oybeG","GameMain"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./C"),c=t("./GameOverMenu"),n=cc._decorator,l=n.ccclass,a=n.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animShakeAnim=null,t.nodeTop=null,t.nodeCenter=null,t.nodeBottom=null,t.nodeItem=null,t.nodePoint=null,t.audioGameBg=null,t.audioGameBg2=null,t.audioEliminate=null,t.audioGet=null,t.audioPut=null,t.audioClick=null,t.effectLine=null,t.effectGroud=[],t.btnBack=null,t.score=null,t.combo=null,t.maxScore=null,t.mainMenu=null,t.gameOverMenu=null,t.helpMenu=null,t.comboAni=null,t.pointAni=null,t.timeBg=null,t.timeParticle=null,t._curHeight=1334,t._calHeight=1334,t._bStartTimeGame=!1,t._bPauseTimeGame=!1,t._addTime=3,t._remainTime=30,t._totalTime=30,t._combos=1,t._nowPoint=0,t._nRow=3,t._nColumn=3,t._nRandomCube=3,t._nGetRow=1,t._nGetColumn=3,t._arrCubeType=[],t._arrCubeType1=["0_0","0_1","0_2","1_0","1_1","1_2","2_0","2_1","2_2","3_0","3_1","3_2","4_0","4_1","4_2"],t._arrCubeType2=["0_0","0_1","1_0","1_1","2_0","2_1","3_0","3_1","4_0","4_1"],t._arrayGetGridIndex=[0,1,2],t}return __extends(t,e),t.prototype.onClickBack=function(){},t.prototype.onGePoint=function(t,e){this._nowPoint=this._nowPoint+e*this._combos,this.score.string=this._nowPoint.toString(),this.pointAni.getComponent(cc.Label).string=(e*this._combos).toString(),this.pointAni.play("pointFly"),this.score.getComponent(cc.Animation).play("scoreBig"),this._remainTime=this._remainTime+this._addTime;var o=this._curHeight/this._totalTime*this._addTime;this._calHeight=this._calHeight+o},t.prototype.onShowHelp=function(){this.helpMenu.active=!0},t.prototype.onChangeAudio=function(t,e){e?(this.audioGameBg2.volume=0,this.audioGameBg.volume=0,this.audioEliminate.volume=0,this.audioGet.volume=0,this.audioPut.volume=0,this.audioClick.volume=0):(this.audioGameBg.volume=1,this.audioEliminate.volume=1,this.audioGet.volume=1,this.audioPut.volume=1,this.audioClick.volume=1,this.audioGameBg2.volume=1)},t.prototype.onCanGetPoint=function(t,e){e?(this._combos=this._combos+1,this.combo.string=this._combos.toString(),this.combo.node.active=!0,this.comboAni.node.getChildByName("comboShow").getComponent(cc.Label).string=this._combos.toString(),this.comboAni.node.active=!0,this.comboAni.play("combo")):(this._combos=1,this.combo.string=this._combos.toString(),this.combo.node.active=!1,this.comboAni.node.active=!1,this.comboAni.stop("combo")),this._bStartTimeGame=!0},t.prototype.onPlayClick=function(){this.audioClick.play()},t.prototype.onChangeBgAudio=function(t,e){"GameBg"==e?(this.audioGameBg2.stop(),this.audioGameBg.isPlaying||this.audioGameBg.play()):"GameBg2"==e&&(this.audioGameBg2.isPlaying||this.audioGameBg2.play(),this.audioGameBg.stop())},t.prototype.addListener=function(){},t.prototype.removeListener=function(){},t.prototype.onLoad=function(){i.setCanvas(this.getComponent(cc.Canvas))},t.prototype.start=function(){},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener()},t.prototype.update=function(t){},__decorate([a({type:cc.Animation,displayName:"抖屏动画",tooltip:"抖屏动画"})],t.prototype,"animShakeAnim",void 0),__decorate([a({type:cc.Node,displayName:"顶容器",tooltip:"顶部容器，主要放菜单"})],t.prototype,"nodeTop",void 0),__decorate([a({type:cc.Node,displayName:"中容器",tooltip:"中间容器，主要放游戏操作的对象"})],t.prototype,"nodeCenter",void 0),__decorate([a({type:cc.Node,displayName:"底容器",tooltip:"底部容器，主要放广告"})],t.prototype,"nodeBottom",void 0),__decorate([a({type:cc.Node,displayName:"方块",tooltip:"方块的样板，包括大中小"})],t.prototype,"nodeItem",void 0),__decorate([a({type:cc.Node,displayName:"位置点",tooltip:"显示放置的位置的点"})],t.prototype,"nodePoint",void 0),__decorate([a({type:cc.AudioSource,displayName:"背景音乐"})],t.prototype,"audioGameBg",void 0),__decorate([a({type:cc.AudioSource,displayName:"模式2背景音乐"})],t.prototype,"audioGameBg2",void 0),__decorate([a({type:cc.AudioSource,displayName:"消除音效"})],t.prototype,"audioEliminate",void 0),__decorate([a({type:cc.AudioSource,displayName:"选中音效"})],t.prototype,"audioGet",void 0),__decorate([a({type:cc.AudioSource,displayName:"放下音效"})],t.prototype,"audioPut",void 0),__decorate([a({type:cc.AudioSource,displayName:"点击音效"})],t.prototype,"audioClick",void 0),__decorate([a({type:cc.Node,displayName:"特效线贴图",tooltip:"多个方块消除时显示的特效底图"})],t.prototype,"effectLine",void 0),__decorate([a({type:Array(cc.ParticleSystem),displayName:"单个特效组",tooltip:"单个方块消除时显示的特效"})],t.prototype,"effectGroud",void 0),__decorate([a({type:cc.Button,displayName:"返回按钮"})],t.prototype,"btnBack",void 0),__decorate([a({type:cc.Label,displayName:"得分"})],t.prototype,"score",void 0),__decorate([a({type:cc.Label,displayName:"连击"})],t.prototype,"combo",void 0),__decorate([a({type:cc.Label,displayName:"最高得分"})],t.prototype,"maxScore",void 0),__decorate([a({type:cc.Node,displayName:"主界面"})],t.prototype,"mainMenu",void 0),__decorate([a({type:c.default,displayName:"游戏结束脚本"})],t.prototype,"gameOverMenu",void 0),__decorate([a({type:cc.Node,displayName:"帮助页面"})],t.prototype,"helpMenu",void 0),__decorate([a({type:cc.Animation,displayName:"combo动画"})],t.prototype,"comboAni",void 0),__decorate([a({type:cc.Animation,displayName:"得分动画"})],t.prototype,"pointAni",void 0),__decorate([a({type:cc.Sprite,displayName:"限时模式背景"})],t.prototype,"timeBg",void 0),__decorate([a({type:cc.ParticleSystem,displayName:"限时模式粒子"})],t.prototype,"timeParticle",void 0),t=__decorate([l],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./C":"C","./GameOverMenu":"GameOverMenu"}],GameOverMenu:[function(t,e,o){"use strict";cc._RF.push(e,"4a891zqVb9EfIK/KONhCi4Z","GameOverMenu"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./MainMenu"),c=cc._decorator,n=c.ccclass,l=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.score=null,t.maxScore=null,t.goMainPanel=null,t.btnRestart=null,t.btnBack=null,t}return __extends(t,e),t.prototype.initUI=function(t,e,o){this.node.active=!0,this.score.string=t.toString()},t.prototype.onClickRestart=function(){this.node.active=!1;var t=this.goMainPanel.getComponent(i.default);this.goMainPanel.active=!1,this.goMainPanel.active=!0,t.resetGame()},t.prototype.onClickEnd=function(){this.node.active=!1},t.prototype.onClickHelp=function(){},t.prototype.onClickStar=function(){},t.prototype.onClickBack=function(){cc.director.loadScene("main"),this.node.active=!1},t.prototype.addListener=function(){this.btnRestart.node.on(cc.Node.EventType.TOUCH_END,this.onClickRestart,this),this.btnBack.node.on(cc.Node.EventType.TOUCH_END,this.onClickBack,this)},t.prototype.removeListener=function(){this.btnRestart.node.off(cc.Node.EventType.TOUCH_END,this.onClickRestart,this),this.btnBack.node.off(cc.Node.EventType.TOUCH_END,this.onClickBack,this)},t.prototype.onEnable=function(){this.btnRestart.getComponent(cc.Sprite).node.color=this.btnRestart.normalColor,this.addListener()},t.prototype.onDisable=function(){this.removeListener()},t.prototype.start=function(){},__decorate([l(cc.Label)],t.prototype,"score",void 0),__decorate([l(cc.Label)],t.prototype,"maxScore",void 0),__decorate([l(cc.Node)],t.prototype,"goMainPanel",void 0),__decorate([l(cc.Button)],t.prototype,"btnRestart",void 0),__decorate([l(cc.Button)],t.prototype,"btnBack",void 0),t=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./MainMenu":"MainMenu"}],GuideMenu:[function(t,e,o){"use strict";cc._RF.push(e,"84399Q3MzpFvLZlupR0yhD6","GuideMenu"),Object.defineProperty(o,"__esModule",{value:!0});var _=t("./Utility"),n=t("./BlockCell"),i=cc._decorator,c=i.ccclass,l=i.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goMainPanel=null,t.atlas=null,t.touchNode=null,t.touchNode2=null,t.setNodeList1=[],t.setNodeList2=[],t.goGrid1=null,t.goGrid2=null,t.goFGPanel1=null,t.goFGPanel2=null,t.goEffectCleanPoint=null,t.goEffectClean_Col=null,t.goEffectKuang_Col=null,t.goEffectClean_Row=null,t.goEffectKuang_Row=null,t.goEffectItem1=null,t.goEffectItem2=null,t.arrCleanNodes1=[],t.guideTips1=null,t.arrCleanNodes2=[],t.guideTips2=null,t.touchItem=null,t.obstacleItem=null,t.nodeFinger1=null,t.nodeFinger2=null,t.bgWidth=8,t.bgHeight=8,t._bMoveStart=!1,t._touchBgItem={},t.sprObstacle=null,t.sprTouch=null,t._curSelectBlock=null,t._lastSelectBlockCell=null,t}return __extends(t,e),t.prototype.start=function(){this.goGrid1.active=!0,this.goFGPanel1.active=!0,this.playFinger1Tween()},t.prototype.onEnable=function(){this.addListener(),this.sprObstacle=this.obstacleItem.getComponent(cc.Sprite),this.sprTouch=this.touchItem.getComponent(cc.Sprite),this._curSelectBlock={num:3,width:2,height:2}},t.prototype.onDisable=function(){this.removeListener()},t.prototype.addListener=function(){this.touchNode.on(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.touchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),this.touchNode2.on(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.touchNode2.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback2,this),this.touchNode2.on(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.touchNode2.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this)},t.prototype.removeListener=function(){this.touchNode.off(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.touchNode.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.touchNode.off(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.touchNode.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),this.touchNode2.off(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.touchNode2.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback2,this),this.touchNode2.off(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.touchNode2.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this)},t.prototype.playFinger1Tween=function(){this.nodeFinger1.setPosition(171,-101);var t=cc.moveTo(.01,171,-101),e=cc.moveTo(.5,171,-11),o=cc.moveTo(.5,261,-11),i=cc.sequence(t,e,o,cc.delayTime(.5)).repeatForever();this.nodeFinger1.runAction(i)},t.prototype.killFinger1Tween=function(){this.nodeFinger1.stopAllActions()},t.prototype.playFinger2Tween=function(){this.nodeFinger2.setPosition(-101,-13);var t=cc.moveTo(.01,-101,-13),e=cc.moveTo(.5,-101,-103),o=cc.sequence(t,e,cc.delayTime(.5)).repeatForever();this.nodeFinger2.runAction(o)},t.prototype.killFinger2Tween=function(){this.nodeFinger2.stopAllActions()},t.prototype.touchStartCallback=function(t){this._bMoveStart=!0,this._lastSelectBlockCell=null},t.prototype.touchEndCallback=function(t){return this.goFGPanel1.active&&_.default.getDictionaryCount(this._touchBgItem)!=this._curSelectBlock.num?(cc.log("================= number limit"+this._touchBgItem),void this.finishCreateObtacleItem()):_.default.getDictionaryCount(this._touchBgItem)!=this._curSelectBlock.num&&this.goFGPanel2.active?(cc.log("================= number limit"+this._touchBgItem),void this.finishCreateObtacleItem()):void 0},t.prototype.touchMoveCallback=function(t){if(this._bMoveStart&&0==this.goFGPanel2.active)for(var e=this.setNodeList1[0].convertTouchToNodeSpaceAR(t),o=e.x,i=e.y,c=null,n=0;n<3;n++){var l=this.setNodeList1[0];1==n&&(l=this.setNodeList1[1]),2==n&&(l=this.setNodeList1[2]);var a=l.width,s=l.height,r=l.x,h=l.y;if(r<=o&&o<=r+a&&h<=i&&i<=h+s){c=l,this.createTouchItem(n,c);break}}},t.prototype.touchMoveCallback2=function(t){if(this._bMoveStart&&1==this.goFGPanel2.active)for(var e=this.setNodeList2[0].convertTouchToNodeSpaceAR(t),o=e.x,i=e.y+90,c=null,n=0;n<2;n++){var l=this.setNodeList2[0];1==n&&(l=this.setNodeList2[1]);var a=l.width,s=l.height,r=l.x,h=l.y;if(r<=o&&o<=r+a&&h<=i&&i<=h+s){c=l,this.createTouchItem(n,c);break}}},t.prototype.createTouchItem=function(t,e){if(null==this._touchBgItem[t]){var o=this.atlas.getSpriteFrame("block_1");this.sprTouch.spriteFrame=o;var i=_.default.addChild(e,this.touchItem).getComponent(n.default);if(i.setItem(t),this._touchBgItem[t]=i,null!=this._lastSelectBlockCell){var c=this._lastSelectBlockCell.getIndex();if(c!=t-1&&c!=t+1&&c!=t+this.bgWidth&&c!=t-this.bgWidth)return cc.log("touch set item pos Error!"),void this.finishCreateObtacleItem()}this._curSelectBlock.width,this._curSelectBlock.height,this._curSelectBlock.width>this._curSelectBlock.height?this._curSelectBlock.width:this._curSelectBlock.height;if(_.default.getDictionaryCount(this._touchBgItem)>this._curSelectBlock.num)return cc.log("================= number limit"+this._touchBgItem),void this.finishCreateObtacleItem();this._lastSelectBlockCell=i,_.default.getDictionaryCount(this._touchBgItem)==this._curSelectBlock.num&&(this.goFGPanel1.active&&this.scheduleOnce(function(){for(var t in this._touchBgItem){var e=this._touchBgItem[t].node.parent,o=this.atlas.getSpriteFrame("block_"+this._curSelectBlock.m_curBlockColor);this.sprObstacle.spriteFrame=o;var i=_.default.addChild(e,this.obstacleItem);i.name=t,"0"==i.name&&(this.arrCleanNodes1[5]=i)}this.finishCreateObtacleItem(),this.guideTips1.active=!1;var c=0,n=function(t){var e=l.arrCleanNodes1[t];e.parent=l.goFGPanel1,e.getComponent(cc.Sprite).enabled=!1,c++;var o=_.default.addChild(e,l.goEffectItem1),i=l.obstacleItem.getContentSize().width*(c-5)+l.obstacleItem.getContentSize().width/2;o.position=new cc.Vec2(i,-45),l.scheduleOnce(function(){_.default.addChild(e,this.goEffectItem2).position=new cc.Vec2(i,-45)},.1)},l=this;for(var t in this.arrCleanNodes1)n(t);var a=4*-this.obstacleItem.getContentSize().height-this.obstacleItem.getContentSize().height/2;this.scheduleOnce(function(){_.default.addChild(this.goEffectCleanPoint,this.goEffectClean_Row,new cc.Vec2(360,a))},.05);var s=_.default.addChild(this.goEffectCleanPoint,this.goEffectKuang_Row,new cc.Vec2(360,a)),r=cc.fadeTo(.2,0);s.runAction(r),this.scheduleOnce(function(){this.goGrid1.active=!1,this.goFGPanel1.active=!1,this.goGrid2.active=!0,this.goFGPanel2.active=!0,this.killFinger1Tween(),this.playFinger2Tween(),this._curSelectBlock={num:2,width:1,height:2}},.5)},.2),this.goFGPanel2.active&&this.scheduleOnce(function(){var t=0;for(var e in this._touchBgItem){t++;var o=this._touchBgItem[e].node.parent,i=this.atlas.getSpriteFrame("block_"+this._curSelectBlock.m_curBlockColor);this.sprObstacle.spriteFrame=i;var c=_.default.addChild(o,this.obstacleItem);c.name=e,1==t&&(this.arrCleanNodes2[11]=c),2==t&&(this.arrCleanNodes2[2]=c)}this.finishCreateObtacleItem(),this.guideTips2.active=!1;var n=0,l=function(t){var e=a.arrCleanNodes2[t];e.parent=a.goFGPanel2,e.getComponent(cc.Sprite).enabled=!1,n++;var o=_.default.addChild(e,a.goEffectItem1),i=a.obstacleItem.getContentSize().width*(n-5)+a.obstacleItem.getContentSize().width/2;o.position=new cc.Vec2(i,-45),a.scheduleOnce(function(){_.default.addChild(e,this.goEffectItem2).position=new cc.Vec2(i,-45)},.1)},a=this;for(var e in this.arrCleanNodes2)l(e);var s=4*-this.obstacleItem.getContentSize().height-this.obstacleItem.getContentSize().height/2;this.scheduleOnce(function(){_.default.addChild(this.goEffectCleanPoint,this.goEffectClean_Row,new cc.Vec2(360,s))},.05);var r=_.default.addChild(this.goEffectCleanPoint,this.goEffectKuang_Row,new cc.Vec2(360,s)),h=cc.fadeTo(.2,0);r.runAction(h);var d=2*this.obstacleItem.getContentSize().width+this.obstacleItem.getContentSize().width/2;this.scheduleOnce(function(){_.default.addChild(this.goEffectCleanPoint,this.goEffectClean_Col,new cc.Vec2(d,-360))},.05);var u=_.default.addChild(this.goEffectCleanPoint,this.goEffectClean_Col,new cc.Vec2(d,-360)),p=cc.fadeTo(.2,0);u.runAction(p),this.scheduleOnce(function(){this.node.active=!1,this.goMainPanel.active=!0,this.killFinger2Tween()},.5)},.2))}},t.prototype.finishCreateObtacleItem=function(){for(var t in this._touchBgItem){this._touchBgItem[t].node.destroy()}this._touchBgItem={},this._bMoveStart=!1},__decorate([l(cc.Node)],t.prototype,"goMainPanel",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"atlas",void 0),__decorate([l(cc.Node)],t.prototype,"touchNode",void 0),__decorate([l(cc.Node)],t.prototype,"touchNode2",void 0),__decorate([l({type:Array(cc.Node)})],t.prototype,"setNodeList1",void 0),__decorate([l({type:Array(cc.Node)})],t.prototype,"setNodeList2",void 0),__decorate([l(cc.Node)],t.prototype,"goGrid1",void 0),__decorate([l(cc.Node)],t.prototype,"goGrid2",void 0),__decorate([l(cc.Node)],t.prototype,"goFGPanel1",void 0),__decorate([l(cc.Node)],t.prototype,"goFGPanel2",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectCleanPoint",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectClean_Col",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectKuang_Col",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectClean_Row",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectKuang_Row",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectItem1",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectItem2",void 0),__decorate([l({type:Array(cc.Node)})],t.prototype,"arrCleanNodes1",void 0),__decorate([l(cc.Node)],t.prototype,"guideTips1",void 0),__decorate([l({type:Array(cc.Node)})],t.prototype,"arrCleanNodes2",void 0),__decorate([l(cc.Node)],t.prototype,"guideTips2",void 0),__decorate([l(cc.Node)],t.prototype,"touchItem",void 0),__decorate([l(cc.Node)],t.prototype,"obstacleItem",void 0),__decorate([l(cc.Node)],t.prototype,"nodeFinger1",void 0),__decorate([l(cc.Node)],t.prototype,"nodeFinger2",void 0),t=__decorate([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./BlockCell":"BlockCell","./Utility":"Utility"}],HelpMenu:[function(t,e,o){"use strict";cc._RF.push(e,"79c74jx/PtMuIOBfz9x8Pnj","HelpMenu"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./FYMessenger"),c=t("./C"),n=cc._decorator,l=n.ccclass,a=n.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnBack=null,t.mainMenu=null,t}return __extends(t,e),t.prototype.onBack=function(){this.node.active=!1,i.default.Instance.send(c.MsgType.PlayClickAudio),this.mainMenu.active=!0},t.prototype.onEnable=function(){this.btnBack.node.on(cc.Node.EventType.TOUCH_END,this.onBack,this)},t.prototype.onDisable=function(){this.btnBack.node.off(cc.Node.EventType.TOUCH_END,this.onBack,this)},t.prototype.start=function(){},__decorate([a(cc.Button)],t.prototype,"btnBack",void 0),__decorate([a(cc.Node)],t.prototype,"mainMenu",void 0),t=__decorate([l],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./C":"C","./FYMessenger":"FYMessenger"}],MainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"4f9d9G6KwZHS5M5oawmIXou","MainMenu"),Object.defineProperty(o,"__esModule",{value:!0});var N=t("./C"),M=t("./Utility"),h=t("./BlockConfig"),d=t("./BlockCell"),i=t("./GameOverMenu"),c=cc._decorator,n=c.ccclass,l=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlas=null,t.labScore=null,t.labHighestScore=null,t.btnPause=null,t.goStartPanel=null,t.bgItem=null,t.bgGrid=null,t.touchItem=null,t.obstacleItem=null,t.sprObstacle=null,t.sprTouch=null,t.blackItem=null,t.blockGrid=null,t.blockItem=null,t.sprBlock=null,t.blackNextItem=null,t.blockNextGrid=null,t.blockNextItem=null,t.sprBlockNext=null,t.bgWidth=8,t.bgHeight=8,t.goTipsPanel=null,t.goGameOverPanel=null,t.goEffectCleanPoint=null,t.goEffectClean_Col=null,t.goEffectClean_Col2=null,t.goEffectKuang_Col=null,t.goEffectClean_Row=null,t.goEffectClean_Row2=null,t.goEffectKuang_Row=null,t.goPointEffect=null,t._dictBgItem=[],t._dictObstacleItem={},t._dictBlackItem={},t._touchBgItem={},t._curSelectBlock=null,t._nextSelectBlock=null,t._nTotalScore=0,t._fourLSelectBlockCell=null,t._lastSelectBlockCell=null,t._nSelectBlockWidth=0,t._nSelectBlockHeight=0,t._nSelectBlockDirRight=0,t._nSelectBlockDirDown=0,t._bMoveStart=!1,t._bPlaying=!1,t._bCanGuiding=!0,t._nGuidingTime=5,t._guideListPath=[],t}return __extends(t,e),t.prototype.getColorByBlockNum=function(t){var e=null;switch(t){case 3:e=cc.color(10,111,156,255);break;case 1:e=cc.color(245,149,0,255);break;case 2:e=cc.color(246,30,5,255);break;case 4:e=cc.color(15,193,93,255);break;case 0:e=cc.color(217,28,226,255)}return e},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener()},t.prototype.start=function(){this.sprBlock=this.blockItem.getComponent(cc.Sprite),this.sprBlockNext=this.blockNextItem.getComponent(cc.Sprite),this.sprObstacle=this.obstacleItem.getComponent(cc.Sprite),this.sprTouch=this.touchItem.getComponent(cc.Sprite),this.initUI()},t.prototype.addListener=function(){this.btnPause.getComponent(cc.Sprite).node.color=this.btnPause.normalColor,this.bgGrid.node.on(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.bgGrid.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.bgGrid.node.on(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.bgGrid.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),this.btnPause.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnPause,this)},t.prototype.removeListener=function(){this.bgGrid.node.off(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.bgGrid.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.bgGrid.node.off(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.bgGrid.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),this.btnPause.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnPause,this)},t.prototype.update=function(t){if(this._nGuidingTime-=t,this._nGuidingTime<=0&&(this._nGuidingTime=0),0==this._nGuidingTime&&!this._bMoveStart&&this._bCanGuiding){for(var e in this._dictBlackItem){var o=this._dictBlackItem[e],i=parseInt(e);if(0,null!=o){var c=this.findCanSetItem(i);if(c.bCanSet){var n=c.path;cc.log("==================================");for(var l=0;l<n.length;l++)if(null!=this._dictBlackItem[n[l]]){var a=this._dictBgItem[n[l]].getChildByName("bgTips");a.active=!0;var s=cc.fadeTo(.5,0),r=cc.fadeTo(.5,255),h=cc.sequence(s,r).repeatForever();a.runAction(h)}this._guideListPath=n,this._bCanGuiding=!1;break}}}}},t.prototype.onClickBtnPause=function(){this.goStartPanel.active=!0,this.node.active=!1},t.prototype.resetGame=function(){this.cancelCreateTouchItem(),this._dictBlackItem={},this._dictObstacleItem={},this.goEffectCleanPoint.removeAllChildren(),this.initUI()},t.prototype.initUI=function(){this._nTotalScore=0,this.labScore.string=this._nTotalScore.toString();var t=M.default.loadLocalData(N.JsonDataKey.maxScoreByType);this.labHighestScore.string=null!=t?t:"0",this.bgGrid.node.removeAllChildren();for(var e=0;e<this.bgWidth*this.bgHeight;e++){var o=M.default.addChild(this.bgGrid.node,this.bgItem);o.name=(e+1).toString(),this._dictBgItem[e]=o,this._dictBlackItem[e]=!0}this.bgGrid.updateLayout();var i=new h.default;i.initBlockConfig(),this._curSelectBlock=i,this.blockGrid.node.setContentSize(this.blockItem.getContentSize().width*i.m_curBlock[0].length,0),cc.log("blockConfig:"+JSON.stringify(i.m_curBlock)+"getContentSize:"+JSON.stringify(this.blockGrid.node.getContentSize())+"blockType:"+i.m_curBlockType),this.blockGrid.node.removeAllChildren();for(var c=0;c<i.m_curBlock.length;c++)for(var n=i.m_curBlock[c],l=0;l<n.length;l++)if(1==n[l]){var a=this.atlas.getSpriteFrame("block_"+i.m_curBlockColor);this.sprBlock.spriteFrame=a;M.default.addChild(this.blockGrid.node,this.blockItem)}else if(0==n[l])M.default.addChild(this.blockGrid.node,this.blackItem);var s=new h.default;s.initBlockConfig(),this._nextSelectBlock=s,this.blockNextGrid.node.setContentSize(this.blockNextItem.getContentSize().width*s.m_curBlock[0].length,0),cc.log("nextBlockConfig:"+JSON.stringify(s.m_curBlock)+"getContentSize:"+JSON.stringify(this.blockNextGrid.node.getContentSize())+"blockType:"+s.m_curBlockType),this.blockNextGrid.node.removeAllChildren();for(c=0;c<s.m_curBlock.length;c++){var r=s.m_curBlock[c];for(l=0;l<r.length;l++)if(1==r[l]){a=this.atlas.getSpriteFrame("block_"+this._nextSelectBlock.m_curBlockColor);this.sprBlockNext.spriteFrame=a;M.default.addChild(this.blockNextGrid.node,this.blockNextItem)}else if(0==r[l])M.default.addChild(this.blockNextGrid.node,this.blackNextItem)}},t.prototype.touchStartCallback=function(t){this._bMoveStart=!0,this._nGuidingTime=5,this._bCanGuiding=!0;for(var e=0;e<this._guideListPath.length;e++){if(null!=this._dictBlackItem[this._guideListPath[e]])this._dictBgItem[this._guideListPath[e]].getChildByName("bgTips").active=!1}},t.prototype.touchEndCallback=function(t){var e=this._curSelectBlock.m_BlockDict[this._curSelectBlock.m_curBlockType];if(this.getDictionaryCount(this._touchBgItem)!=e.num)return cc.log("init num not equals to mCurrBlockInfo.num!"+this.getDictionaryCount(this._touchBgItem)),void this.cancelCreateTouchItem()},t.prototype.touchMoveCallback=function(t){if(this._bMoveStart)for(var e=this.bgItem.convertTouchToNodeSpace(t),o=e.x,i=e.y,c=null,n=0;n<this._dictBgItem.length;n++){var l=this._dictBgItem[n],a=l.width,s=l.height,r=l.x,h=l.y;if(r<=o&&o<=r+a&&h<=i&&i<=h+s){c=l,this.createTouchItem(n,c);break}}},t.prototype.createTouchItem=function(t,e){if(null!=this._dictObstacleItem[t])return cc.log("have obstacle in this cell!"),void this.cancelCreateTouchItem();if(null==this._touchBgItem[t]){if(null!=this._lastSelectBlockCell){var o=this._lastSelectBlockCell.getIndex();if(o!=t-1&&o!=t+1&&o!=t+this.bgWidth&&o!=t-this.bgWidth)return cc.log("touch set item pos Error!"),void this.cancelCreateTouchItem()}for(var i in this._touchBgItem){var c=this._touchBgItem[i].node;c.getChildByName("anjiankuang").active=!1,c.getChildByName("anjianlizi").active=!1}var n=this.atlas.getSpriteFrame("block_"+this._curSelectBlock.m_curBlockColor);this.sprTouch.spriteFrame=n;var l=M.default.addChild(e,this.touchItem);l.getChildByName("anjiankuang").active=!0,l.getChildByName("anjianlizi").active=!0;var a=l.getComponent(d.default);a.setItem(t),this._touchBgItem[t]=a;var s=this._curSelectBlock.m_BlockDict[this._curSelectBlock.m_curBlockType];null==this._lastSelectBlockCell?(this._nSelectBlockWidth++,this._nSelectBlockHeight++):1==Math.abs(this._lastSelectBlockCell.getIndex()-t)?0==this._nSelectBlockDirRight?(this._nSelectBlockDirRight=t-this._lastSelectBlockCell.getIndex(),this._nSelectBlockWidth++):t-this._lastSelectBlockCell.getIndex()==this._nSelectBlockDirRight&&this._nSelectBlockWidth++:0==this._nSelectBlockDirDown?(this._nSelectBlockDirDown=t-this._lastSelectBlockCell.getIndex(),this._nSelectBlockHeight++):t-this._lastSelectBlockCell.getIndex()==this._nSelectBlockDirDown&&this._nSelectBlockHeight++,2!=this.getDictionaryCount(this._touchBgItem)||this._curSelectBlock.m_curBlockType!=N.BlockType.FourL&&this._curSelectBlock.m_curBlockType!=N.BlockType.FourLMirror&&this._curSelectBlock.m_curBlockType!=N.BlockType.FiveL&&this._curSelectBlock.m_curBlockType!=N.BlockType.FiveConvex||(this._fourLSelectBlockCell=a),this._lastSelectBlockCell=a;s.width,s.height;var r=s.width>s.height?s.width:s.height;if(this._nSelectBlockWidth>r||this._nSelectBlockHeight>r)return cc.log("================= border limit"+this._nSelectBlockWidth+" "+this._nSelectBlockHeight),void this.cancelCreateTouchItem();if(this.getDictionaryCount(this._touchBgItem)>s.num)return cc.log("================= number limit"+this._touchBgItem),void this.cancelCreateTouchItem();if(null!=this._fourLSelectBlockCell){if(this.getDictionaryCount(this._touchBgItem)==s.num){var h=this._fourLSelectBlockCell.getIndex();if(this._touchBgItem[h-1]&&this._touchBgItem[h+1]){if(this._curSelectBlock.m_curBlockType==N.BlockType.FourL&&(this._touchBgItem[h-this.bgWidth+1]||this._touchBgItem[h+this.bgWidth-1]))return void this.createObstacleItem();if(this._curSelectBlock.m_curBlockType==N.BlockType.FourLMirror&&(this._touchBgItem[h-this.bgWidth-1]||this._touchBgItem[h+this.bgWidth+1]))return void this.createObstacleItem();if(this._curSelectBlock.m_curBlockType==N.BlockType.FiveL)return void this.createObstacleItem()}if(this._touchBgItem[h-this.bgWidth]&&this._touchBgItem[h+this.bgWidth]){if(this._curSelectBlock.m_curBlockType==N.BlockType.FourL&&(this._touchBgItem[h-this.bgWidth-1]||this._touchBgItem[h+this.bgWidth+1]))return void this.createObstacleItem();if(this._curSelectBlock.m_curBlockType==N.BlockType.FourLMirror&&(this._touchBgItem[h+this.bgWidth-1]||this._touchBgItem[h-this.bgWidth+1]))return void this.createObstacleItem();if(this._curSelectBlock.m_curBlockType==N.BlockType.FiveL)return void this.createObstacleItem()}if(this._touchBgItem[h+1]&&this._touchBgItem[h+2]||this._touchBgItem[h-1]&&this._touchBgItem[h-2]){if(this._curSelectBlock.m_curBlockType==N.BlockType.FourL){if(this._touchBgItem[h-this.bgWidth]&&t<h)return void this.createObstacleItem();if(this._touchBgItem[h+this.bgWidth]&&h<t)return void this.createObstacleItem()}if(this._curSelectBlock.m_curBlockType==N.BlockType.FourLMirror){if(this._touchBgItem[h-this.bgWidth]&&h<t)return void this.createObstacleItem();if(this._touchBgItem[h+this.bgWidth]&&t<h)return void this.createObstacleItem()}if(this._curSelectBlock.m_curBlockType==N.BlockType.FiveConvex)return void this.createObstacleItem()}if(this._touchBgItem[h+this.bgWidth]&&this._touchBgItem[h+2*this.bgWidth]||this._touchBgItem[h-this.bgWidth]&&this._touchBgItem[h-2*this.bgWidth]){if(this._curSelectBlock.m_curBlockType==N.BlockType.FourL){if(this._touchBgItem[h-1]&&h<t)return void this.createObstacleItem();if(this._touchBgItem[h+1]&&t<h)return void this.createObstacleItem()}if(this._curSelectBlock.m_curBlockType==N.BlockType.FourLMirror){if(this._touchBgItem[h-1]&&t<h)return void this.createObstacleItem();if(this._touchBgItem[h+1]&&h<t)return void this.createObstacleItem()}if(this._curSelectBlock.m_curBlockType==N.BlockType.FiveConvex)return void this.createObstacleItem()}cc.log("===============================L Type Error!"),this.cancelCreateTouchItem()}}else this.getDictionaryCount(this._touchBgItem)==s.num&&this.createObstacleItem()}},t.prototype.createObstacleItem=function(){var t=this._curSelectBlock.m_BlockDict[this._curSelectBlock.m_curBlockType];if(this.getDictionaryCount(this._touchBgItem)!=t.num)return cc.log("init num not equals to mCurrBlockInfo.num!"+this.getDictionaryCount(this._touchBgItem)),void this.cancelCreateTouchItem();if(!(this._nSelectBlockHeight==t.width&&this._nSelectBlockWidth==t.height||this._nSelectBlockHeight==t.height&&this._nSelectBlockWidth==t.width))return cc.log("init num not equals to mCurrBlockInfo.num!"+(this._nSelectBlockHeight+this._nSelectBlockWidth-1)),void this.cancelCreateTouchItem();this._bMoveStart=!1;for(var e in this._touchBgItem){var o=this._touchBgItem[e].node.parent;if(null!=this._dictObstacleItem[e])return cc.log("have obstacle in this cell!"),void this.cancelCreateTouchItem();0;var i=this.atlas.getSpriteFrame("block_"+this._curSelectBlock.m_curBlockColor);this.sprObstacle.spriteFrame=i;var c=M.default.addChild(o,this.obstacleItem),n=c.getChildByName("effect_clean1"),l=c.getChildByName("effect_clean2");M.default.addChild(c,n),M.default.addChild(c,l);this._dictObstacleItem[e]=c,delete this._dictBlackItem[e]}this.cancelCreateTouchItem(),this._fourLSelectBlockCell=null,this._lastSelectBlockCell=null,this._nSelectBlockDirRight=0,this._nSelectBlockDirDown=0,this._nSelectBlockWidth=0,this._nSelectBlockHeight=0,this._touchBgItem={};for(var h=0,d={},a={row:[],col:[]},s=0;s<this.bgHeight;s++)for(var r={},u=!0,p=0;p<this.bgWidth;p++){var _=s*this.bgWidth+p;if(null!=this._dictObstacleItem[_]?(u=u&&!0,r[_]=this._dictObstacleItem[_]):u=!1,p==this.bgWidth-1&&u)for(var e in cc.log("lineRow: "+s+" clean!"),h++,a.row.push(s),r){var m=r[e];d[e]=m}}for(s=0;s<this.bgWidth;s++){var g={},f=!0;for(p=0;p<this.bgHeight;p++){var y=p*this.bgWidth+s;if(null!=this._dictObstacleItem[y]?(f=f&&!0,g[y]=this._dictObstacleItem[y]):f=!1,p==this.bgHeight-1&&f)for(var e in cc.log("lineCol: "+s+" clean!"),h++,a.col.push(s),g){m=g[e];d[e]=m}}}if(0==this.getDictionaryCount(d))return this.createBlockConfig(),cc.log("no clean result!"),void this.resultGame();this.createBlockConfig();var k=a.row,B=function(t){var e=k[t],o=-C.obstacleItem.getContentSize().height*e-C.obstacleItem.getContentSize().height/2;C.scheduleOnce(function(){M.default.addChild(this.goEffectCleanPoint,this.goEffectClean_Row,new cc.Vec2(360,o)),M.default.addChild(this.goEffectCleanPoint,this.goEffectClean_Row2,new cc.Vec2(360,o))},.05);var i=M.default.addChild(C.goEffectCleanPoint,C.goEffectKuang_Row,new cc.Vec2(360,o)),c=cc.fadeTo(.4,0);i.runAction(c)},C=this;for(var e in k)B(e);var v=a.col,b=function(t){var e=v[t],o=S.obstacleItem.getContentSize().width*e+S.obstacleItem.getContentSize().width/2;S.scheduleOnce(function(){M.default.addChild(this.goEffectCleanPoint,this.goEffectClean_Col,new cc.Vec2(o,-360)),M.default.addChild(this.goEffectCleanPoint,this.goEffectClean_Col2,new cc.Vec2(o,-360))},.05);var i=M.default.addChild(S.goEffectCleanPoint,S.goEffectKuang_Col,new cc.Vec2(o,-360)),c=cc.fadeTo(.4,0);i.runAction(c)},S=this;for(var e in v)b(e);var T=function(t){var e=d[t];e.getComponent(cc.Sprite).enabled=!1,0;var o=e.getChildByName("effect_clean2");I.scheduleOnce(function(){M.default.addChild(e,o)},.1)},I=this;for(var e in d)T(e);for(var e in this._dictObstacleItem){this._dictObstacleItem[e].getComponent(cc.Animation).play("shake")}this.scheduleOnce(function(){var e=0,r=this.getDictionaryCount(d),t=function(c){var n=d[c],l=e+=1,a=M.default.addChild(n,o.goPointEffect),s=a.convertToNodeSpace(cc.p(cc.Canvas.instance.node.width/2,1150)),t=M.default.getRangeRandom(1,100);o.scheduleOnce(function(){var t=M.default.getRangeRandom(1,2),e=[cc.p(100,0),cc.p(200,250),s];2==t&&(e=[cc.p(-100,0),cc.p(-200,250),s]);var o=cc.bezierTo(.8,e),i=cc.sequence(o,cc.callFunc(function(){if(this.scheduleOnce(function(){n.destroy(),a.active=!1,delete this._dictObstacleItem[c]},.2),this._dictBlackItem[c]=!0,r==l){this.resultGame(),cc.log("nTotalCleanNum:"+h),this._nTotalScore+=20*h*this.bgWidth;var t=M.default.loadLocalData(N.JsonDataKey.maxScoreByType);(this._nTotalScore>parseInt(t)||null==t)&&M.default.saveLocalData(N.JsonDataKey.maxScoreByType,this._nTotalScore);var e=cc.scaleTo(.5,1.5,1.5),o=cc.scaleTo(.3,1,1),i=cc.sequence(e,o);this.labScore.string=this._nTotalScore.toString(),this.labScore.node.runAction(i),this.labHighestScore.string=M.default.loadLocalData(N.JsonDataKey.maxScoreByType)}}.bind(this),this));a.runAction(i)},.002*t)},o=this;for(var i in d)t(i)},.6)},t.prototype.createBlockConfig=function(){this.blockGrid.node.removeAllChildren(),this._curSelectBlock=this._nextSelectBlock,this.blockGrid.node.setContentSize(this.blockItem.getContentSize().width*this._curSelectBlock.m_curBlock[0].length,0),cc.log("blockConfig:"+JSON.stringify(this._curSelectBlock.m_curBlock)+"getContentSize:"+JSON.stringify(this.blockGrid.node.getContentSize())+"blockType:"+this._curSelectBlock.m_curBlockType);for(var t=0;t<this._curSelectBlock.m_curBlock.length;t++)for(var e=this._curSelectBlock.m_curBlock[t],o=0;o<e.length;o++)if(1==e[o]){var i=this.atlas.getSpriteFrame("block_"+this._curSelectBlock.m_curBlockColor);this.sprBlock.spriteFrame=i;M.default.addChild(this.blockGrid.node,this.blockItem)}else if(0==e[o])M.default.addChild(this.blockGrid.node,this.blackItem);var c=new h.default;c.initBlockConfig(),this._nextSelectBlock=c,this.blockNextGrid.node.removeAllChildren(),this.blockNextGrid.node.setContentSize(this.blockNextItem.getContentSize().width*c.m_curBlock[0].length,0),cc.log("nextBlockConfig:"+JSON.stringify(c.m_curBlock)+"getContentSize:"+JSON.stringify(this.blockNextGrid.node.getContentSize())+"blockType:"+c.m_curBlockType);for(t=0;t<c.m_curBlock.length;t++){var n=c.m_curBlock[t];for(o=0;o<n.length;o++)if(1==n[o]){i=this.atlas.getSpriteFrame("block_"+this._nextSelectBlock.m_curBlockColor);this.sprBlockNext.spriteFrame=i;M.default.addChild(this.blockNextGrid.node,this.blockNextItem)}else if(0==n[o])M.default.addChild(this.blockNextGrid.node,this.blackNextItem)}},t.prototype.resultGame=function(){var t=0;for(var e in this._dictBlackItem){var o=this._dictBlackItem[e],i=parseInt(e);if(t++,null!=o||this._curSelectBlock.m_curBlockType==N.BlockType.FiveConvex){var c=this.findCanSetItem(i);if(c.bCanSet)return;if(!c.bCanSet&&this.getDictionaryCount(this._dictBlackItem)==t){this.goTipsPanel.active=!0,this.scheduleOnce(function(){this.onShowResultPanel(),cc.log("result!")},2);break}}}},t.prototype.findCanSetItem=function(t){var e=[];if(this._curSelectBlock.m_curBlockType==N.BlockType.TribleL){if(null!=this._dictBlackItem[t+1]&&this.checkNodeInSameRow(t+1,t)||null!=this._dictBlackItem[t-1]&&this.checkNodeInSameRow(t-1,t)){var o=null!=this._dictBlackItem[t+1]?t+1:t-1;if((e=[]).push(o),e.push(t),null!=this._dictBlackItem[t+this.bgWidth]||null!=this._dictBlackItem[t-this.bgWidth]){var i=null!=this._dictBlackItem[t+this.bgWidth]?t+this.bgWidth:t-this.bgWidth;return e.push(i),cc.log("find idx = "+t),{bCanSet:!0,path:e}}}}else if(this._curSelectBlock.m_curBlockType==N.BlockType.FourSquare){if(null!=this._dictBlackItem[t+1]&&this.checkNodeInSameRow(t+1,t)&&((e=[]).push(t),e.push(t+1),null!=this._dictBlackItem[t+this.bgWidth]&&null!=this._dictBlackItem[t+this.bgWidth+1]&&this.checkNodeInSameRow(t+this.bgWidth+1,t+this.bgWidth)))return e.push(t+this.bgWidth+1),e.push(t+this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e}}else if(this._curSelectBlock.m_curBlockType==N.BlockType.FiveL){if(null!=this._dictBlackItem[t-1]&&null!=this._dictBlackItem[t-2]&&this.checkNodeInSameRow(t-2,t)){if((e=[]).push(t-2),e.push(t-1),e.push(t),null!=this._dictBlackItem[t+this.bgWidth]&&null!=this._dictBlackItem[t+2*this.bgWidth])return e.push(t+this.bgWidth),e.push(t+2*this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t-this.bgWidth]&&null!=this._dictBlackItem[t-2*this.bgWidth])return e.push(t-this.bgWidth),e.push(t-2*this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e}}if(null!=this._dictBlackItem[t+1]&&null!=this._dictBlackItem[t+2]&&this.checkNodeInSameRow(t+2,t)){if((e=[]).push(t+2),e.push(t+1),e.push(t),null!=this._dictBlackItem[t+this.bgWidth]&&null!=this._dictBlackItem[t+2*this.bgWidth])return e.push(t+this.bgWidth),e.push(t+2*this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t-this.bgWidth]&&null!=this._dictBlackItem[t-2*this.bgWidth])return e.push(t-this.bgWidth),e.push(t-2*this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e}}}else if(this._curSelectBlock.m_curBlockType==N.BlockType.FiveConvex){if(null!=this._dictBlackItem[t-1]&&null!=this._dictBlackItem[t+1]&&this.checkNodeInSameRow(t+1,t)&&this.checkNodeInSameRow(t-1,t)){if((e=[]).push(t-1),null!=this._dictBlackItem[t-this.bgWidth]&&this._dictBlackItem[t-this.bgWidth+1]&&this._dictBlackItem[t-this.bgWidth-1])return e.push(t-this.bgWidth-1),e.push(t-this.bgWidth),e.push(t-this.bgWidth+1),e.push(t+1),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t+this.bgWidth]&&this._dictBlackItem[t+this.bgWidth+1]&&this._dictBlackItem[t+this.bgWidth-1])return e.push(t+this.bgWidth-1),e.push(t+this.bgWidth),e.push(t+this.bgWidth+1),e.push(t+1),cc.log("find idx = "+t),{bCanSet:!0,path:e}}if(null!=this._dictBlackItem[t-this.bgWidth]&&null!=this._dictBlackItem[t+this.bgWidth]){if((e=[]).push(t-this.bgWidth),null!=this._dictBlackItem[t-1]&&this._dictBlackItem[t-this.bgWidth-1]&&this._dictBlackItem[t+this.bgWidth-1]&&this.checkNodeInSameRow(t-1,t))return e.push(t-this.bgWidth-1),e.push(t-1),e.push(t+this.bgWidth-1),e.push(t+this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t+1]&&this._dictBlackItem[t-this.bgWidth+1]&&this._dictBlackItem[t+this.bgWidth+1]&&this.checkNodeInSameRow(t+1,t))return e.push(t-this.bgWidth+1),e.push(t+1),e.push(t+this.bgWidth+1),e.push(t+this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e}}}else if(this._curSelectBlock.m_curBlockType==N.BlockType.FourL){if(null!=this._dictBlackItem[t+1]&&this.checkNodeInSameRow(t+1,t)&&((e=[]).push(t+1),e.push(t),null!=this._dictBlackItem[t-this.bgWidth]&&null!=this._dictBlackItem[t-2*this.bgWidth]))return e.push(t-this.bgWidth),e.push(t-2*this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t-1]&&this.checkNodeInSameRow(t-1,t)&&((e=[]).push(t-1),e.push(t),null!=this._dictBlackItem[t+this.bgWidth]&&null!=this._dictBlackItem[t+2*this.bgWidth]))return e.push(t+this.bgWidth),e.push(t+2*this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t-this.bgWidth]&&((e=[]).push(t-this.bgWidth),e.push(t),null!=this._dictBlackItem[t-1]&&null!=this._dictBlackItem[t-2]&&this.checkNodeInSameRow(t-2,t)))return e.push(t-1),e.push(t-2),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t+this.bgWidth]&&((e=[]).push(t+this.bgWidth),e.push(t),null!=this._dictBlackItem[t+1]&&null!=this._dictBlackItem[t+2]&&this.checkNodeInSameRow(t+2,t)))return e.push(t+1),e.push(t+2),cc.log("find idx = "+t),{bCanSet:!0,path:e}}else if(this._curSelectBlock.m_curBlockType==N.BlockType.FourLMirror){if(null!=this._dictBlackItem[t+1]&&this.checkNodeInSameRow(t+1,t)&&((e=[]).push(t+1),e.push(t),null!=this._dictBlackItem[t+this.bgWidth]&&null!=this._dictBlackItem[t+2*this.bgWidth]))return e.push(t+this.bgWidth),e.push(t+2*this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t-1]&&this.checkNodeInSameRow(t-1,t)&&((e=[]).push(t-1),e.push(t),null!=this._dictBlackItem[t-this.bgWidth]&&null!=this._dictBlackItem[t-2*this.bgWidth]))return e.push(t-this.bgWidth),e.push(t-2*this.bgWidth),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t+this.bgWidth]&&((e=[]).push(t+this.bgWidth),e.push(t),null!=this._dictBlackItem[t-1]&&null!=this._dictBlackItem[t-2]&&this.checkNodeInSameRow(t-2,t)))return e.push(t-1),e.push(t-2),cc.log("find idx = "+t),{bCanSet:!0,path:e};if(null!=this._dictBlackItem[t-this.bgWidth]&&((e=[]).push(t-this.bgWidth),e.push(t),null!=this._dictBlackItem[t+1]&&null!=this._dictBlackItem[t+2]&&this.checkNodeInSameRow(t+2,t)))return e.push(t+1),e.push(t+2),cc.log("find idx = "+t),{bCanSet:!0,path:e}}else{var c=this._curSelectBlock.m_BlockDict[this._curSelectBlock.m_curBlockType],n=(c.width,c.height,c.width>c.height?c.width:c.height),l=!0;(e=[]).push(t);for(var a=1;a<n;a++){null!=this._dictBlackItem[t+a]&&this.checkNodeInSameRow(t+a,t)?(e.push(t+a),l=l&&!0):l=!(e=[])}if(cc.log("not find row line! "+t),!l){l=!0,(e=[]).push(t);for(a=1;a<n;a++){null!=this._dictBlackItem[t+a*this.bgWidth]?(e.push(t+a*this.bgWidth),l=l&&!0):l=!(e=[])}}if(l)return cc.log("find idx = "+t),{bCanSet:!0,path:e}}return{bCanSet:!1,path:[]}},t.prototype.checkNodeInSameRow=function(t,e){return Math.floor(t/this.bgWidth)==Math.floor(e/this.bgWidth)},t.prototype.cancelCreateTouchItem=function(){for(var t in this._touchBgItem){this._touchBgItem[t].node.destroy()}this._fourLSelectBlockCell=null,this._lastSelectBlockCell=null,this._nSelectBlockDirRight=0,this._nSelectBlockDirDown=0,this._nSelectBlockWidth=0,this._nSelectBlockHeight=0,this._touchBgItem={},this._bMoveStart=!1},t.prototype.getDictionaryCount=function(t){var e=0;for(var o in t)e++;return e},t.prototype.onShowResultPanel=function(){this.scheduleOnce(function(){var t=M.default.loadLocalData(N.JsonDataKey.maxScoreByType);(this._nTotalScore>parseInt(t)||null==t)&&M.default.saveLocalData(N.JsonDataKey.maxScoreByType,this._nTotalScore),this._bPlaying=!1,this.goTipsPanel.active=!1,this.goGameOverPanel.active=!0,this.goGameOverPanel.getComponent(i.default).initUI(this._nTotalScore)},1)},__decorate([l(cc.SpriteAtlas)],t.prototype,"atlas",void 0),__decorate([l(cc.Label)],t.prototype,"labScore",void 0),__decorate([l(cc.Label)],t.prototype,"labHighestScore",void 0),__decorate([l(cc.Button)],t.prototype,"btnPause",void 0),__decorate([l(cc.Node)],t.prototype,"goStartPanel",void 0),__decorate([l(cc.Node)],t.prototype,"bgItem",void 0),__decorate([l(cc.Layout)],t.prototype,"bgGrid",void 0),__decorate([l(cc.Node)],t.prototype,"touchItem",void 0),__decorate([l(cc.Node)],t.prototype,"obstacleItem",void 0),__decorate([l(cc.Node)],t.prototype,"blackItem",void 0),__decorate([l(cc.Layout)],t.prototype,"blockGrid",void 0),__decorate([l(cc.Node)],t.prototype,"blockItem",void 0),__decorate([l(cc.Node)],t.prototype,"blackNextItem",void 0),__decorate([l(cc.Layout)],t.prototype,"blockNextGrid",void 0),__decorate([l(cc.Node)],t.prototype,"blockNextItem",void 0),__decorate([l(cc.Node)],t.prototype,"goTipsPanel",void 0),__decorate([l(cc.Node)],t.prototype,"goGameOverPanel",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectCleanPoint",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectClean_Col",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectClean_Col2",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectKuang_Col",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectClean_Row",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectClean_Row2",void 0),__decorate([l(cc.Node)],t.prototype,"goEffectKuang_Row",void 0),__decorate([l(cc.Node)],t.prototype,"goPointEffect",void 0),t=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./BlockCell":"BlockCell","./BlockConfig":"BlockConfig","./C":"C","./GameOverMenu":"GameOverMenu","./Utility":"Utility"}],SelectModeMenu:[function(t,e,o){"use strict";cc._RF.push(e,"3fae1X3H+9N1K5ZoeG+pVUE","SelectModeMenu"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Utility"),c=t("./C"),n=t("./FYMessenger"),l=cc._decorator,a=l.ccclass,s=l.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnBack=null,t.mainMenu=null,t.btnModeA=null,t.btnModeB=null,t.btnModeC=null,t.btnModeD=null,t.labScroeGroud=[],t}return __extends(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){this.addListener(),this.btnModeA.getComponent(cc.Sprite).node.color=this.btnModeA.normalColor,this.btnModeB.getComponent(cc.Sprite).node.color=this.btnModeA.normalColor,this.btnModeC.getComponent(cc.Sprite).node.color=this.btnModeA.normalColor,this.btnModeD.getComponent(cc.Sprite).node.color=this.btnModeA.normalColor,this.btnBack.getComponent(cc.Sprite).node.color=this.btnBack.normalColor;for(var t=i.default.loadLocalJsonData(c.JsonDataKey.maxScoreByType),e=0;e<4;e++)this.labScroeGroud[e].string=t[e]},t.prototype.onDisable=function(){this.removeListener()},t.prototype.addListener=function(){this.btnBack.node.on(cc.Node.EventType.TOUCH_END,this.onClickBack,this),this.btnModeA.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnModeA,this),this.btnModeB.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnModeB,this),this.btnModeC.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnModeC,this),this.btnModeD.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnModeD,this)},t.prototype.removeListener=function(){this.btnBack.node.off(cc.Node.EventType.TOUCH_END,this.onClickBack,this),this.btnModeA.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnModeA,this),this.btnModeB.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnModeB,this),this.btnModeC.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnModeC,this),this.btnModeD.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnModeD,this)},t.prototype.onClickBack=function(t){n.default.Instance.send(c.MsgType.PlayClickAudio),this.node.active=!1,this.mainMenu.active=!0},t.prototype.onClickBtnModeA=function(t){n.default.Instance.send(c.MsgType.PlayClickAudio),n.default.Instance.send(c.MsgType.ChangeBgAudio,"GameBg"),i.default.saveLocalData(c.DataKey.selectMode,c.GameMode.A),n.default.Instance.send(c.MsgType.ChangeMode),this.node.active=!1,this.mainMenu.active=!0},t.prototype.onClickBtnModeB=function(t){n.default.Instance.send(c.MsgType.PlayClickAudio),n.default.Instance.send(c.MsgType.ChangeBgAudio,"GameBg"),i.default.saveLocalData(c.DataKey.selectMode,c.GameMode.B),n.default.Instance.send(c.MsgType.ChangeMode),this.node.active=!1,this.mainMenu.active=!0},t.prototype.onClickBtnModeC=function(t){n.default.Instance.send(c.MsgType.PlayClickAudio),n.default.Instance.send(c.MsgType.ChangeBgAudio,"GameBg2"),i.default.saveLocalData(c.DataKey.selectMode,c.GameMode.C),n.default.Instance.send(c.MsgType.ChangeMode),this.node.active=!1,this.mainMenu.active=!0},t.prototype.onClickBtnModeD=function(t){n.default.Instance.send(c.MsgType.PlayClickAudio),n.default.Instance.send(c.MsgType.ChangeBgAudio,"GameBg"),i.default.saveLocalData(c.DataKey.selectMode,c.GameMode.D),n.default.Instance.send(c.MsgType.ChangeMode),this.node.active=!1,this.mainMenu.active=!0},__decorate([s(cc.Button)],t.prototype,"btnBack",void 0),__decorate([s(cc.Node)],t.prototype,"mainMenu",void 0),__decorate([s(cc.Button)],t.prototype,"btnModeA",void 0),__decorate([s(cc.Button)],t.prototype,"btnModeB",void 0),__decorate([s(cc.Button)],t.prototype,"btnModeC",void 0),__decorate([s(cc.Button)],t.prototype,"btnModeD",void 0),__decorate([s({type:Array(cc.Label)})],t.prototype,"labScroeGroud",void 0),t=__decorate([a],t)}(cc.Component);o.default=r,cc._RF.pop()},{"./C":"C","./FYMessenger":"FYMessenger","./Utility":"Utility"}],SpriteAnim:[function(t,e,o){"use strict";cc._RF.push(e,"2b99bDRpE9B3Y+uxK1rEhcf","SpriteAnim"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./C"),c=cc._decorator,n=c.ccclass,l=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlas=null,t.nSpriteAnimType=0,t.nAnimLength=0,t.sFramePrefix="",t.targetSprite=null,t.nFrameIdx=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.playAnim()},t.prototype.onDisable=function(){},t.prototype.playAnim=function(){switch(this.nSpriteAnimType){case i.SpriteAnimType.spriteFrame:this.nFrameIdx=0,this.schedule(this.onSpriteFrame,.04,this.nAnimLength)}},t.prototype.onSpriteFrame=function(){if(this.nFrameIdx=this.nFrameIdx+1,this.nFrameIdx==this.nAnimLength);else{var t=this.atlas.getSpriteFrame(this.sFramePrefix+this.nFrameIdx);this.targetSprite.spriteFrame=t}},__decorate([l(cc.SpriteAtlas)],t.prototype,"atlas",void 0),__decorate([l({type:Number})],t.prototype,"nSpriteAnimType",void 0),__decorate([l({type:Number})],t.prototype,"nAnimLength",void 0),__decorate([l({type:String})],t.prototype,"sFramePrefix",void 0),__decorate([l(cc.Sprite)],t.prototype,"targetSprite",void 0),t=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./C":"C"}],StartMenu:[function(t,e,o){"use strict";cc._RF.push(e,"1d32c9IvjhAkpXckjoj6BM4","StartMenu"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Utility"),c=t("./C"),n=cc._decorator,l=n.ccclass,a=n.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labHighestScore=null,t.goMainPanel=null,t.goHelpPanel=null,t.goGuidePanel=null,t.btnStart=null,t.btnHelp=null,t.btnHelpBack=null,t.btnRank=null,t.btnAudio=null,t}return __extends(t,e),t.prototype.start=function(){i.default.removeLocalData(c.JsonDataKey.firstOpen)},t.prototype.onEnable=function(){this.addListener(),this.btnStart.getComponent(cc.Sprite).node.color=this.btnStart.normalColor,this.btnHelp.getComponent(cc.Sprite).node.color=this.btnHelp.normalColor,this.btnHelpBack.getComponent(cc.Sprite).node.color=this.btnHelp.normalColor,this.btnRank.getComponent(cc.Sprite).node.color=this.btnRank.normalColor,this.btnAudio.getComponent(cc.Sprite).node.color=this.btnAudio.normalColor;var t=i.default.loadLocalData(c.JsonDataKey.maxScoreByType);this.labHighestScore.string=null!=t?t:"0"},t.prototype.onDisable=function(){this.removeListener()},t.prototype.addListener=function(){this.btnStart.node.on(cc.Node.EventType.TOUCH_END,this.onClickStart,this),this.btnHelp.node.on(cc.Node.EventType.TOUCH_END,this.onClickHelp,this),this.btnHelpBack.node.on(cc.Node.EventType.TOUCH_END,this.onClickHelpBack,this),this.btnRank.node.on(cc.Node.EventType.TOUCH_END,this.onClickRank,this),this.btnAudio.node.on(cc.Node.EventType.TOUCH_END,this.onClickAudio,this)},t.prototype.removeListener=function(){this.btnStart.node.off(cc.Node.EventType.TOUCH_END,this.onClickStart,this),this.btnHelp.node.off(cc.Node.EventType.TOUCH_END,this.onClickHelp,this),this.btnHelpBack.node.on(cc.Node.EventType.TOUCH_END,this.onClickHelpBack,this),this.btnRank.node.off(cc.Node.EventType.TOUCH_END,this.onClickRank,this),this.btnAudio.node.off(cc.Node.EventType.TOUCH_END,this.onClickAudio,this)},t.prototype.onClickStart=function(){null==i.default.loadLocalData(c.JsonDataKey.firstOpen)?(this.node.active=!1,this.goGuidePanel.active=!0,i.default.saveLocalData(c.JsonDataKey.firstOpen,1)):(this.node.active=!1,this.goMainPanel.active=!0)},t.prototype.onClickHelp=function(){this.node.active=!1,this.goHelpPanel.active=!0},t.prototype.onClickHelpBack=function(){this.node.active=!0,this.goHelpPanel.active=!1},t.prototype.onClickRank=function(){},t.prototype.onClickAudio=function(){},__decorate([a(cc.Label)],t.prototype,"labHighestScore",void 0),__decorate([a(cc.Node)],t.prototype,"goMainPanel",void 0),__decorate([a(cc.Node)],t.prototype,"goHelpPanel",void 0),__decorate([a(cc.Node)],t.prototype,"goGuidePanel",void 0),__decorate([a(cc.Button)],t.prototype,"btnStart",void 0),__decorate([a(cc.Button)],t.prototype,"btnHelp",void 0),__decorate([a(cc.Button)],t.prototype,"btnHelpBack",void 0),__decorate([a(cc.Button)],t.prototype,"btnRank",void 0),__decorate([a(cc.Button)],t.prototype,"btnAudio",void 0),t=__decorate([l],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./C":"C","./Utility":"Utility"}],TouchItem:[function(t,e,o){"use strict";cc._RF.push(e,"6e671tXjWxATK/1cze6KmVx","TouchItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./C"),c=t("./FYMessenger"),n=cc._decorator,l=n.ccclass,a=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){this.addListener()},e.prototype.onDisable=function(){this.removeListener()},e.prototype.addListener=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchUpCallback,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchDown,this)},e.prototype.removeListener=function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchUpCallback,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchDown,this)},e.prototype.touchMoveCallback=function(t){this.node.uuid==t.currentTarget.uuid&&c.default.Instance.send(i.MsgType.UserTouchMove,this.node)},e.prototype.touchUpCallback=function(t){this.node.uuid==t.currentTarget.uuid&&c.default.Instance.send(i.MsgType.UserTouchUp,this.node)},e.prototype.onTouchDown=function(t){this.node.uuid==t.currentTarget.uuid&&c.default.Instance.send(i.MsgType.UserTouchDown,this.node)},e=__decorate([l],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./C":"C","./FYMessenger":"FYMessenger"}],UserDataMgr:[function(t,e,o){"use strict";cc._RF.push(e,"3d86a+a3XVL6pz365KBmwy0","UserDataMgr"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=(i.property,function(){function t(){this._putContainSize=new cc.Vec2(870,900),this._putContainCenter=cc.Vec2.ZERO,this.value=0}var e;return(e=t).prototype.UserDataMgr=function(){},t.prototype.setPutContainCenter=function(t){this._putContainCenter=t},t.prototype.getPutContainCenter=function(){return this._putContainCenter},t.prototype.setPutContainSize=function(t){this._putContainSize=t},t.prototype.getPutContainSize=function(){return this._putContainSize},t.Instance=new e,t=e=__decorate([c],t)}());o.default=n,cc._RF.pop()},{}],Utility:[function(t,e,o){"use strict";cc._RF.push(e,"df505YjxShJZZTUXOY412Q1","Utility"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=(i.property,function(){function t(){}var o;return(o=t).getRangeRandom=function(t,e){return o.getRandomValueDif(t,e,1)[0]},t.getRandomValueDif=function(t,e,o){for(var i=new Array,c=o?e-t<o?e-t:o:1,n=t,l=0;n<=e;n++,l++)i[l]=n;var a=[];i.sort(function(){return.5-Math.random()});for(var s=0;s<c;s++){var r=Math.floor(Math.random()*i.length);a.push(i[r]);var h=i[r];i[r]=i[i.length-1],i[i.length-1]=h,i.pop()}return a},t.addChild=function(t,e,o,i){if(void 0===o&&(o=cc.Vec2.ZERO),void 0===i&&(i=!0),null!=t&&null!=e){cc.Vec2.ZERO;null!=o&&o;null!=i&&i;var c=cc.instantiate(e);return c.parent=t,c.position=o,c.active=i,c}cc.error("--------------------\x3e>>>>>>>>>>>>>>parent or child is undefined!!!")},t.saveLocalData=function(t,e){cc.sys.localStorage.setItem(t,e)},t.loadLocalData=function(t){return cc.sys.localStorage.getItem(t)},t.saveLocalJsonData=function(t,e){cc.sys.localStorage.setItem(t,JSON.stringify(e))},t.loadLocalJsonData=function(t){return JSON.parse(cc.sys.localStorage.getItem(t))},t.removeLocalData=function(t){cc.sys.localStorage.removeItem(t)},t.getDictionaryCount=function(t){var e=0;for(var o in t)e++;return e},t=o=__decorate([c],t)}());o.default=n,cc._RF.pop()},{}]},{},["BlockCell","BlockConfig","C","FYAudioCtl","FYMessenger","GameMain","GameOverMenu","GuideMenu","HelpMenu","MainMenu","SelectModeMenu","SpriteAnim","StartMenu","TouchItem","UserDataMgr","Utility"]);