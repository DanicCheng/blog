require=function i(s,r,l){function c(t,e){if(!r[t]){if(!s[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var n=r[t]={exports:{}};s[t][0].call(n.exports,function(e){return c(s[t][1][e]||e)},n,n.exports,i,s,r,l)}return r[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({ButtonMgr:[function(e,t,o){"use strict";cc._RF.push(t,"5e3c6Tf6vBGsLzDCnXce6Ql","ButtonMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listButtonNode=[],e}return __extends(e,t),e.prototype.onDisable=function(){for(var e=0;e<this.listButtonNode.length;e++){this.listButtonNode[e].scale=1}},__decorate([i({type:Array(cc.Node),displayName:"所有脚本下的按钮"})],e.prototype,"listButtonNode",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],ClickMask:[function(e,t,o){"use strict";cc._RF.push(t,"f6635CCbQhD7IG/pOXxxEyM","ClickMask"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},t.prototype.onClickMask=function(){},t=__decorate([n],t)}(cc.Component));o.default=i,cc._RF.pop()},{}],CubeContainer:[function(e,t,o){"use strict";cc._RF.push(t,"ec6bf21fcxGwbKBiYePO6KB","CubeContainer"),Object.defineProperty(o,"__esModule",{value:!0});var v=e("./GridItem"),_=e("../Tools/FYMessenger"),I=e("../Common/FYUserDataMgr"),E=e("../Common/E"),T=e("../Common/FYUserDataMgr"),a=cc._decorator,n=a.ccclass,i=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dictGrid={0:null},e._nRow=0,e._nColumn=0,e._bModeAdvance=!1,e}return __extends(e,t),e.prototype.createGrid=function(e,t,o,a,n,i){void 0===a&&(a=[]),void 0===n&&(n=E.E.GridState.CanPut),void 0===i&&(i=!1),this._nRow=e,this._nColumn=t,this._bModeAdvance=i;for(var s=this.node.width+130,r=this.node.height+140,l=s/(t+1),c=r/(e+1),d=0;d<this._nRow;d++)for(var u=0;u<this._nColumn;u++){var p=null;(p=0<T.default.Instance.gridPool.size()?T.default.Instance.gridPool.get():cc.instantiate(o)).setPosition((u+1)*l-s/2,(d+1)*c-r/2),p.parent=this.node,p.active=!0;var h=p.getComponent(v.default);if(i){var f=h.mSpriteBg.node.getContentSize().width;h.mSpriteBg.node.setContentSize(.8*f,.8*f)}for(var y=u+d*this._nRow,m=!0,g=0;g<a.length;g++)if(a[g]==y){m=!1;break}h.showPoint(m),h.setState(n),n!=E.E.GridState.GetPanel&&h.setState(m?E.E.GridState.CanPut:E.E.GridState.NotCanPut),n==E.E.GridState.ViewPanel&&h.setState(E.E.GridState.ViewPanel),(this._dictGrid[u+d*this._nRow]=h).setWorldPos(p.convertToWorldSpace(p.getPosition())),h.setPostion(p.getPosition()),h.setWidth(l),h.setHeight(c),h.setIndex(y)}n==E.E.GridState.CanPut&&(I.default.Instance.setPutContainCenter(this.getBorderCenter()),I.default.Instance.setPutContainSize(this.getBorderSize()))},e.prototype.getTotalGrid=function(){return this._dictGrid},e.prototype.convertPosToIndex=function(e){var t=this.node.width+130,o=this.node.height+140,a=this.node.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),n=t/(this._nColumn+1),i=o/(this._nRow+1);return Math.floor(Math.abs((a.x+t/2-n/2)/n))+Math.floor(Math.abs((a.y+o/2-i/2)/i))*this._nColumn},e.prototype.isInContainer=function(e){var t=I.default.Instance.getPutContainSize(),o=I.default.Instance.getPutContainCenter(),a=e.node.convertToWorldSpaceAR(new cc.Vec2(0,0));return a.x>=o.x-.5*t.x&&a.x<=o.x+.5*t.x&&a.y>=o.y-.5*t.y&&a.y<=o.y+.5*t.y},e.prototype.putCube=function(e){var t=!1;if(e instanceof v.default)if(this.isInContainer(e)){var o=this.convertPosToIndex(e);if(o<=this._nRow*this._nColumn-1){e.getIndex();var a=!1;if(this._dictGrid[o].node.active&&(a=this._dictGrid[o].putGrid(o,e)),e.setIndex(o),e.resetPos(),a){if(e.removeAllCube(),1!=this.checkOneGridSame())this.checkThreeGridSameExt(o);t=!0}}else e.resetPos()}else e.resetPos();else cc.error("cubeItem is not CubeItem type");return t},e.prototype.putCubeWithNoClean=function(e){var t=!1;if(e instanceof v.default){var o=this.isInContainer(e);if(o){var a=this.convertPosToIndex(e);if(cc.log("@@@@@@@@@@@@@@index：",a,o),a<=this._nRow*this._nColumn-1){e.getIndex();var n=this._dictGrid[a].putGrid(a,e);e.resetPos(),n&&(e.removeAllCube(),t=!0)}else e.resetPos()}else e.resetPos()}else cc.error("cubeItem is not CubeItem type");return t},e.prototype.putCubeByIndex=function(e,t){return e<=this._nRow*this._nColumn-1&&this._dictGrid[e].putCube(e,t)},e.prototype.checkRemainCube=function(){for(var e=this._nRow*this._nColumn,t=0;t<e;t++)for(var o=0;o<E.E.CubeItemSize.Length;o++)if(null!=this._dictGrid[t].getCubeItem(o))return cc.log("==========================="+t+" "+o),!0;return!1},e.prototype.getCubeByIndex=function(e,t){return null!=this._dictGrid[e]?this._dictGrid[e].getCubeItem(t):null},e.prototype.removeCube=function(e,t){this._dictGrid[e].removeCube(t)},e.prototype.destroyCube=function(e,t){return null!=this._dictGrid[e]&&(this._dictGrid[e].destroyCube(t),!0)},e.prototype.getCubeNum=function(){for(var e=this._nRow*this._nColumn,t=0,o=0;o<e;o++)t+=this._dictGrid[o].getCubeNum();return t},e.prototype.getGridTotalLength=function(){return this._nRow*this._nColumn},e.prototype.getGridHaveCubeSize=function(){for(var e=this._nRow*this._nColumn,t=[],o=0;o<e;o++){for(var a="",n=0;n<E.E.CubeItemSize.Length;n++)null==this._dictGrid[o].getCubeItem(n)?a+="0":a+="1";t.push(a)}return t},e.prototype.getGridByIndex=function(e){if(null!=this._dictGrid[e])return this._dictGrid[e];cc.error("-------------\x3e>>>>>>>>>index is wrong!!!")},e.prototype.getGridCanPutCubeSize=function(){for(var e=this._nRow*this._nColumn,t=[],o=0;o<e;o++){for(var a="",n=0;n<E.E.CubeItemSize.Length;n++)null==this._dictGrid[o].getCubeItem(n)?this._dictGrid[o].getState()==E.E.GridState.NotCanPut?a+="0":a+="1":a+="0";t.push(a)}return t},e.prototype.getGridCanPutCubeSizeGroup=function(e){for(var t=this._nRow*this._nColumn,o=[],a={},n=0;n<t;n++){for(var i=0,s=0;s<e;s++)null==this._dictGrid[n].getCubeItem(s)&&this._dictGrid[n].getState()==E.E.GridState.CanPut&&(s==E.E.CubeItemSize.Small?i+=1:s==E.E.CubeItemSize.Normal?i+=3:i+=5);0!=i&&null==a[i.toString()]&&(a[i.toString()]=!0)}for(var r in a)o.push(r);return o},e.prototype.checkOneGridSame=function(){for(var e=this._nRow*this._nColumn,t=0;t<e;t++){var o=this._dictGrid[t].checkSame();if(3==o.length){for(var a=o[0].getCubeItemType(),n=0;n<o.length;n++)this.destroyCube(t,o[n].getCubeItemSize());var i=this._dictGrid[t].node.convertToWorldSpaceAR(new cc.Vec2(0,0));return _.default.Instance.send(E.E.MsgType.ShowGetPointEffect,i,!0),_.default.Instance.send(E.E.MsgType.GetPoint,o.length,1),_.default.Instance.send(E.E.MsgType.CubeEliminateOne,t,a),_.default.Instance.send(E.E.MsgType.CubeDownCanGetPoint,!0,1),!0}}return!1},e.prototype.checkThreeGridSameExt=function(e){var t=this._bModeAdvance?3:2,o=[],a=Math.floor(e/this._nColumn)+1,n=e%this._nColumn+1;cc.log(this._nColumn,this._nRow,a,n);for(var i=[],s=0;s<E.E.CubeItemSize.Length;s++){for(var r=this._dictGrid[e].getCubeItem(s),l=!1,c=0;c<i.length;c++)null!=r&&r.getCubeItemType()==i[c]&&(l=!0);null!=r&&0==l&&i.push(r.getCubeItemType())}var d=0;for(c=0;c<i.length;c++){for(var u=i[c],p=[],h=e;h-1>=a*this._nColumn-this._nColumn&&null!=this._dictGrid[h-1]&&0<this._dictGrid[h-1].getCubeItemByType(u).length;)p.push(h-1),h-=1;for(h=e;h+1<=a*this._nColumn-1&&null!=this._dictGrid[h+1]&&0<this._dictGrid[h+1].getCubeItemByType(u).length;)p.push(h+1),h+=1;if(p.length>=t){p.push(e),d++;for(s=0;s<p.length;s++)for(var f=this._dictGrid[p[s]].getCubeItemByType(u),y=0;y<f.length;y++)o.push(f[y]);_.default.Instance.send(E.E.MsgType.ShowEffectLine,p,[u])}for(h=e,p=[];0<=h-this._nColumn&&null!=this._dictGrid[h-this._nColumn]&&0<this._dictGrid[h-this._nColumn].getCubeItemByType(u).length;)p.push(h-this._nColumn),h-=this._nColumn;for(h=e;h+this._nColumn<=this._nColumn*this._nRow&&null!=this._dictGrid[h+this._nColumn]&&0<this._dictGrid[h+this._nColumn].getCubeItemByType(u).length;)p.push(h+this._nColumn),h+=this._nColumn;if(p.length>=t){p.push(e),d++;for(s=0;s<p.length;s++){f=this._dictGrid[p[s]].getCubeItemByType(u);for(var m=0;m<f.length;m++)o.push(f[m])}_.default.Instance.send(E.E.MsgType.ShowEffectLine,p,[u])}p=[],h=e;for(var g=1;g<=n-1;g++){var v=h-this._nColumn-1;if(null==this._dictGrid[v])break;if(!(0<=v&&0<this._dictGrid[v].getCubeItemByType(u).length))break;p.push(v),h=v}h=e;for(var I=1;I<=this._nColumn-n;I++){v=h+this._nColumn+1;if(null==this._dictGrid[v])break;if(!(v<=this._nColumn*this._nRow&&0<this._dictGrid[v].getCubeItemByType(u).length))break;p.push(v),h=v}if(p.length>=t){p.push(e),d++;for(s=0;s<p.length;s++){f=this._dictGrid[p[s]].getCubeItemByType(u);for(var T=0;T<f.length;T++)o.push(f[T])}_.default.Instance.send(E.E.MsgType.ShowEffectLine,p,[u])}p=[],h=e;for(g=1;g<=n-1;g++){v=h+this._nColumn-1;if(null==this._dictGrid[v])break;if(!(v<this._nColumn*this._nRow&&0<this._dictGrid[v].getCubeItemByType(u).length))break;p.push(v),h=v}h=e;for(I=1;I<=this._nColumn-n;I++){v=h-this._nColumn+1;if(null==this._dictGrid[v])break;if(!(0<v&&0<this._dictGrid[v].getCubeItemByType(u).length))break;p.push(v),h=v}if(p.length>=t){p.push(e),d++;for(s=0;s<p.length;s++){f=this._dictGrid[p[s]].getCubeItemByType(u);for(var S=0;S<f.length;S++)o.push(f[S])}_.default.Instance.send(E.E.MsgType.ShowEffectLine,p,[u])}}for(s=0;s<o.length;s++){var C=o[s].node.convertToWorldSpaceAR(new cc.Vec2(0,0));this.destroyCube(o[s].getIndex(),o[s].getCubeItemSize()),_.default.Instance.send(E.E.MsgType.ShowGetPointEffect,C,s==o.length-1),_.default.Instance.send(E.E.MsgType.CubeEliminateThree)}return 0<o.length&&_.default.Instance.send(E.E.MsgType.GetPoint,o.length,d),this.isFull()&&0==o.length&&_.default.Instance.send(E.E.MsgType.ShowGameOver),_.default.Instance.send(E.E.MsgType.CubeDownCanGetPoint,0<o.length,d),0<o.length},e.prototype.isFull=function(){for(var e=this._nRow*this._nColumn,t=!0,o=0;o<e;o++)t=t&&this._dictGrid[o].isFull();return t},e.prototype.clear=function(){for(var e=this._nRow*this._nColumn,t=0;t<e;t++)for(var o=0;o<E.E.CubeItemSize.Length;o++)this.destroyCube(t,o)},e.prototype.clearGrid=function(){this._bModeAdvance=!1;for(var e=0;e<this._nRow;e++)for(var t=0;t<this._nColumn;t++){var o=this._dictGrid[t+e*this._nRow];T.default.Instance.gridPool.put(o.node)}},e.prototype.getBorderCenter=function(){return this.node.convertToWorldSpaceAR(new cc.Vec2(0,0))},e.prototype.getBorderSize=function(){var e=this._dictGrid[0].node.getPosition(),t=this._dictGrid[this._nColumn*this._nRow-1].node.getPosition();return new cc.Vec2(t.x-e.x+this._dictGrid[0].getWidth(),t.y-e.y+this._dictGrid[0].getHeight())},e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{"../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Tools/FYMessenger":"FYMessenger","./GridItem":"GridItem"}],CubeItem:[function(e,t,o){"use strict";cc._RF.push(t,"d6e0biIyGdG7I0gMJ6UD2Th","CubeItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Common/E"),n=cc._decorator,i=n.ccclass,s=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas=null,e.mCubeItemType=a.E.CubeItemType.A,e.mCubeItemSize=a.E.CubeItemSize.Small,e._bEnableMove=!0,e._v2Pos=new cc.Vec2(0,0),e._nIndex=-1,e}return __extends(e,t),e.prototype.init=function(e,t,o){this.node.stopAllActions(),this.mCubeItemType=e,this.mCubeItemSize=t,this.setPos(o),this.refreshUI(),this.node.active=!0},e.prototype.getCubeItemType=function(){return this.mCubeItemType},e.prototype.getCubeItemSize=function(){return this.mCubeItemSize},e.prototype.enableMove=function(e){this._bEnableMove=e},e.prototype.setPos=function(e){this._v2Pos=e,this.node.setPosition(e)},e.prototype.resetPos=function(){this.node.setPosition(this._v2Pos)},e.prototype.setIndex=function(e){this._nIndex=e},e.prototype.getIndex=function(){return this._nIndex},e.prototype.refreshUI=function(){var e=this.node.getComponent(cc.Sprite),t="cube_"+this.mCubeItemType+"_"+this.mCubeItemSize,o=this.atlas.getSpriteFrame(t);e.spriteFrame=o},e.prototype.getColorByType=function(){return this.mCubeItemType==a.E.CubeItemType.A?new cc.Color(26,180,244,255):this.mCubeItemType==a.E.CubeItemType.B?new cc.Color(127,226,39,255):this.mCubeItemType==a.E.CubeItemType.C?new cc.Color(243,229,62,255):this.mCubeItemType==a.E.CubeItemType.D?new cc.Color(245,58,49,255):this.mCubeItemType==a.E.CubeItemType.E?new cc.Color(184,42,238,255):new cc.Color(255,255,255,255)},e.prototype.playUsePropAnimShow=function(){var e=cc.scaleTo(.1,1.2,.72),t=cc.scaleTo(.05,1.05,1.2),o=cc.scaleTo(.05,.9,1.05),a=cc.scaleTo(.05,.95,.9),n=cc.scaleTo(.05,1,.95),i=cc.scaleTo(.05,1,1),s=cc.sequence(e,t,o,a,n,i);this.node.stopAllActions(),this.node.runAction(s)},e.prototype.playUsePropAnimHide=function(){var e=cc.scaleTo(.05,.9,.93),t=cc.scaleTo(.02,1.1,.9),o=cc.scaleTo(.05,1.5,1.3),a=cc.scaleTo(.02,1.525,1.5),n=cc.scaleTo(.1,1.6,1.575),i=cc.scaleTo(.02,1.2,1.6),s=(cc.scaleTo(.1,0,0),cc.sequence(e,t,o,a,n,i));this.node.stopAllActions(),this.node.runAction(s)},e.prototype.addListener=function(){},e.prototype.removeListener=function(){},e.prototype.start=function(){this.addListener()},e.prototype.onEnable=function(){this.addListener()},e.prototype.onDisable=function(){this.removeListener()},__decorate([s(cc.SpriteAtlas)],e.prototype,"atlas",void 0),e=__decorate([i],e)}(cc.Component);o.default=r,cc._RF.pop()},{"../Common/E":"E"}],C:[function(e,t,o){"use strict";var a,n,i,s,r,l,c,d,u,p,h,f,y,m,g,v,I,T,S,C,_,E,P,b,D,M,G;cc._RF.push(t,"3b849ZCPBhHF7IJT9/e/uq7","C"),Object.defineProperty(o,"__esModule",{value:!0}),(a=o.C||(o.C={})).getCurRoleCount=function(){return 5},a.getCurPropCount=function(){return 2},a.getCurVersion=function(){return"1.0.3"},(n=a.wxKey||(a.wxKey={})).ScoreA="wxScoreA",n.ScoreB="wxScoreB",n.ScoreC="wxScoreC",n.ScoreD="wxScoreD",n.ScoreE="wxScoreE",n.AssistTime="AssistTime",n.AssistId="AssistId",n.AssistDoneId="AssistDoneId",n.AssistDoneTime="AssistDoneTime",n.PassDailyTime="PassDailyTime",n.SaveDailyNTime="SaveDailyNTime",n.SaveDailyDTime="SaveDailyDTime",n.DailyNStartTime="DailyNStartTime",n.DailyDStartTime="DailyDStartTime",(i=a.DataKey||(a.DataKey={})).needToClearValue="SquarePatch_needToClearValue0607",i.selectMode="SquarePatch_selectMode",i.soundState="SquarePatch_soundState",i.SoundNum="SquarePatch_SoundNum",i.MusicNum="SquarePatch_MusicNum",i.guidanceState="SquarePatch_guidanceState",i.prizeFreeTimes="SquarePatch_prizeFreeTimes",i.orangeNum="SquarePatch_orangeNum",i.userRoleId="SquarePatch_userRoleId",i.dailyNormalState="SquarePatch_dailyNormalState",i.dailyDiffcultState="SquarePatch_dailyDiffcultState",i.dailyNormalFirstTime="SquarePatch_dailyNormalFirstTime",i.dailyDiffcultFirstTime="SquarePatch_dailyDiffcultFirstTime",i.dailyShareGetNum="SquarePatch_dailyShareGetNum",i.dailyShareLastTime="SquarePatch_dailyShareLastTime",i.DailyModeNTimer="DailyModeNTimer",i.DailyModeDTimer="DailyModeDTimer",i.DailyModeNFirstTime="DailyModeNFirstTime",i.DailyModeDFirstTime="DailyModeDFirstTime",i.DailyModeNFirstSaveTimes="DailyModeNFirstSaveTimes",i.DailyModeDFirstSaveTime="DailyModeDFirstSaveTime",i.DailyModeRefreshTimes="DailyModeRefreshTimes",i.DailyModeNOpenPanelTimes="DailyModeNOpenPanelTimes",i.DailyModeDOpenPanelTimes="DailyModeDOpenPanelTimes",i.WeekRefreshScoreTimes="WeekRefreshScoreTimes",i.PropHammerFirstUse="SquarePatch_PropHammerFirstUse",i.PropSuperStarFirstUse="SquarePatch_PropSuperStarFirstUse",i.GetSignRewardLastTime="SquarePatch_GetSignRewardLastTime",i.GetSignRewardIndex="SquarePatch_GetSignRewardIndex",i.GetFirstWeekSignTime="SquarePatch_GetFirstWeekSignTime",i.DailyAdsViewLastTime="SquarePatch_DailyAdsViewLastTime",i.DailyDiffcultAskHelpSteps="SquarePatch_DailyDiffcultAskHelpSteps",(s=a.JsonDataKey||(a.JsonDataKey={})).maxScoreByType="SquarePatch_maxScoreByType",s.userOwnRole="SquarePatch_userOwnRole",s.userOwnProp="SquarePatch_userOwnProp",s.userRoleExpCard="SquarePatch_userRoleExpCard",s.levelNormalConfig="SquarePatch_levelNormalConfig",s.randomRandomConfig="SquarePatch_randomRandomConfig",s.levelDiffcultConfig="SquarePatch_levelDiffcultConfig",s.randomDiffcultConfig="SquarePatch_randomDiffcultConfig",s.dailyShareGetPropTotal="SquarePatch_dailyShareGetPropTotal",s.gameSceneInfo="SquarePatch_gameSceneInfo",(r=a.SoundType||(a.SoundType={}))[r.Eliminate=0]="Eliminate",r[r.Get=1]="Get",r[r.Put=2]="Put",r[r.ClickBtn=3]="ClickBtn",r[r.ReadyGo=4]="ReadyGo",r[r.GameOverBg=5]="GameOverBg",r[r.RoleSkillUse=6]="RoleSkillUse",r[r.Comb1=7]="Comb1",r[r.Comb2=8]="Comb2",r[r.Comb3=9]="Comb3",r[r.Comb4=10]="Comb4",r[r.Comb5=11]="Comb5",r[r.Length=12]="Length",(l=a.UIPath||(a.UIPath={})).UIGetMenuPanel="UIGetMenuPanel",l.UITipsPanel="UITipsPanel",l.UIReStorePanel="UIReStorePanel",l.UIPropGetPanel="UIPropGetPanel",l.UIBackPackPanel="UIBackPackPanel",l.UIPrizePanel="UIPrizePanel",l.UIShopPanel="UIShopPanel",l.UIHelpPanel="UIHelpPanel",l.UIAdvPanel="UIAdvPanel",l.UIGameOverPanel="UIGameOverPanel",l.UISelectRolePanel="UISelectRolePanel",l.UIDailySharePanel="UIDailySharePanel",l.UISelectDailyPanel="UISelectDailyPanel",l.UISevenDayLoginPanel="UISevenDayLoginPanel",l.UIMainPanel="UIMainPanel",l.UIGamePanel="UIGamePanel",l.UIPausePanel="UIPausePanel",(c=a.EffectName||(a.EffectName={})).fxSkillBullet="fxSkillBullet",c.fxCubeTuoWei="fxCubeTuoWei",c.fxCubeShouJi="fxCubeShouJi",c.fxCubeClean="fxCubeClean",c.fxSkillFillCube="fxSkillFillCube",c.fxSkillFillHitCube="fxSkillFillHitCube",c.fxPropChange="fxPropChange",c.fxCleanLine="fxCleanLine",c.fxCleanSingleColor="fxCleanSingleColor_",c.fxRoleColInWall="fxRoleColInWall",c.fxRolePlayShowEnd="fxRolePlayShowEnd",c.fxRolePlaySkillStart="fxRolePlaySkillStart",c.fxRolePlayGlow="fxRolePlayGlow",c.fxGameOverExplore="fxGameOverExplore",(d=a.AdUnitIdType||(a.AdUnitIdType={})).Revive="adunit-3f9e16fe5e5bea9a",d.MainGetGold="adunit-7ed80c6711a751b5",(u=a.MusicType||(a.MusicType={}))[u.MainBg=0]="MainBg",u[u.Length=1]="Length",u[u.None=2]="None",(p=a.GameModeName||(a.GameModeName={}))[p["经典模式"]=0]="经典模式",p[p["进阶模式"]=1]="进阶模式",p[p["限时挑战"]=2]="限时挑战",p[p["单环挑战"]=3]="单环挑战",p[p["每日挑战"]=4]="每日挑战",(h=a.RoleType||(a.RoleType={})).QQ="1",h.Duck="2",h.Cat="3",h.Octopus="4",h.Bird="5",h.Whale="6",a.getModeNameByType=function(e){var t="";switch(e){case m.A:t="经典模式";break;case m.B:t="进阶模式";break;case m.C:t="限时挑战";break;case m.D:t="单环挑战"}return t},a.getRoleNameByType=function(e){var t="";switch(parseInt(e)){case 1:t="企鹅";break;case 2:t="鸭子";break;case 3:t="紫猫";break;case 4:t="章鱼";break;case 5:t="青鸟"}return t},(f=a.ToChildProgramMsgName||(a.ToChildProgramMsgName={})).ToInitData="ToInitData",f.GameOver="GameOve",f.ShowRank="ShowRank",f.HideRank="HideRank",f.SetPoint="SetPoint",f.ShowGroup="ShowGroup",f.ToDailyAssist="ToDailyAssist",f.CompleteDailyAssist="CompleteDailyAssist",f.ShowAssist="ShowAssist",f.HideAssist="HideAssist",f.PassDailyTime="PassDailyTime",f.DailyPassState="DailyPassState",f.ShowDailyPassTime="ShowDailyPassTime",f.HideDailyPassTime="HideDailyPassTime",f.ShowMainStar="ShowMainStar",f.HideMainStar="HideMainStar",f.DailyNStartTime="DailyNStartTime",f.DailyDStartTime="DailyDStartTime",f.ShowGameOverShare="ShowGameOverShare",f.HideGameOverShare="HideGameOverShare",f.ShowSurpassFriend="ShowSurpassFriend",f.UpdateSurpassFriend="UpdateSurpassFriend",f.HideSurpassFriend="HideSurpassFriend",f.ShowGameOverRank="ShowGameOverRank",f.HideGameOverRank="HideGameOverRank",(y=a.ShareState||(a.ShareState={})).ToSeeGroup="ToSeeGroup",y.SysShare="SysShare",y.DailyShare="DailyShare",y.DailyChallenge="DailyChallenge",y.DailyAssist="DailyAssist",y.InviteFriend="InviteFriend",(g=m=a.GameMode||(a.GameMode={}))[g.A=0]="A",g[g.B=1]="B",g[g.C=2]="C",g[g.D=3]="D",g[g.E=4]="E",g[g.Length=5]="Length",(v=a.DailyShareType||(a.DailyShareType={}))[v.dailyNormalWin=0]="dailyNormalWin",v[v.dailyNormalLose=1]="dailyNormalLose",v[v.dailyDiffcultWin=2]="dailyDiffcultWin",v[v.dailyDiffcutLose=3]="dailyDiffcutLose",v[v.Length=4]="Length",(I=a.GridState||(a.GridState={}))[I.NotCanPut=0]="NotCanPut",I[I.CanPut=1]="CanPut",I[I.GetPanel=2]="GetPanel",I[I.ViewPanel=3]="ViewPanel",I[I.Length=4]="Length",(T=a.CubeItemType||(a.CubeItemType={}))[T.A=0]="A",T[T.B=1]="B",T[T.C=2]="C",T[T.D=3]="D",T[T.E=4]="E",T[T.F=5]="F",T[T.G=6]="G",T[T.H=7]="H",T[T.Length=8]="Length",(S=a.ReportType||(a.ReportType={})).SceneFlow="SceneFlow",S.GuideFlow="GuideFlow",S.SnsFlow="SnsFlow",S.ActionFlow="ActionFlow",(C=a.CubeItemSize||(a.CubeItemSize={}))[C.Small=0]="Small",C[C.Normal=1]="Normal",C[C.Big=2]="Big",C[C.Length=3]="Length",(_=a.MsgType||(a.MsgType={})).SaveShareInfo="SaveShareInfo",_.ShowRankNode="ShowRankNode",_.CubeItemTouchUp="CubeItemTouchUp",_.CubeRemoveFromGetContainer="CubeRemoveFromGetContainer",_.CubeRemoveFromPutContainer="CubeRemoveFromPutContainer",_.GameOver="GameOver",_.ShowGameOver="ShowGameOver",_.CubeEliminateOne="CubeEliminateOne",_.CubeEliminateThree="CubeEliminateThree",_.CubeItemTouchDown="CubeItemTouchDown",_.ShowEffectLine="ShowEffectLine",_.ShowEffectPoint="ShowEffectPoint",_.GetPoint="GetPoint",_.StartGame="StartGame",_.ChangeMode="ChangeMode",_.ShowHelp="ShowHelp",_.ChangeSound="ChangeSound",_.CubeDownCanGetPoint="CubeDownCanGetPoint",_.PlayClickAudio="PlayClickAudio",_.PlayGameOverAudio="PlayGameOverAudio",_.ChangeBgAudio="ChangeBgAudio",_.ShowSkillShake="ShowSkillShake",_.SkillTrigger="SkillTrigger",_.PropHammerTrigger="PropHammerTrigger",_.ActiveGameMenu="ActiveGameMenu",_.ShowGetPointEffect="ShowGetPointEffect",_.ShowSkillBorderEffect="ShowSkillBorderEffect",_.onSetDailyConfigPath="onSetDailyConfigPath",_.RefreshOrange="RefreshOrange",_.RefreshSelectRole="RefreshSelectRole",_.RefreshSignState="RefreshSignState",_.RefreshShareState="RefreshShareState",_.RefreshGameClubBtn="RefreshGameClubBtn",_.GameHideOrShow="GameHideOrShow",_.DailyModeNewTips="DailyModeNewTips",_.GameRemainTimeEnd="GameRemainTimeEnd",_.GuidanceCloseAnim="GuidanceCloseAnim",_.EnableGridMove="EnableGridMove",_.EnableGridPropUse="EnableGridPropUse",_.DailyLevelConfigFinish="DailyLevelConfigFinish",_.RefreshProp="RefreshProp",_.GameShareGetPropAdd="GameShareGetPropAdd",_.GameAdsGetPropAdd="GameAdsGetPropAdd",_.RefreshRoleItems="RefreshRoleItems",_.RefreshMoveCubePos="RefreshMoveCubePos",_.CancelMoveCubePos="CancelMoveCubePos",_.ResumeGame="ResumeGame",_.ReStartGame="ReStartGame",_.Result="Result",(E=a.GetType||(a.GetType={}))[E.kGetOrange=0]="kGetOrange",E[E.kGetRole=1]="kGetRole",E[E.kGetProp=2]="kGetProp",E[E.kGetExpCard=3]="kGetExpCard",E[E.Length=4]="Length",(P=a.GameOverType||(a.GameOverType={}))[P.kTimeLimit=0]="kTimeLimit",P[P.kNoSetCanPut=1]="kNoSetCanPut",P[P.Length=2]="Length",(b=a.LimitModeDir||(a.LimitModeDir={}))[b.kRight=0]="kRight",b[b.kDown=1]="kDown",b[b.kLeft=2]="kLeft",b[b.kUp=3]="kUp",b[b.KNone=4]="KNone",(M=D=a.PropType||(a.PropType={})).kNone="kNone",M.kHammer="kHammer",M.kSuperStar="kSuperStar",a.getPropItemID=function(e){var t="";switch(e){case D.kHammer:t="锤子";break;case D.kSuperStar:t="超能星星"}return t},(G=a.ccaEventType||(a.ccaEventType={})).NewbeeGuideFinish="完成新手引导次数",G.GameModeShare="胜利炫耀次数",G.GameModeRePlay="重玩次数",G.GameModeAdsView="看广告复活次数",G.DailyModeUIEnter="每日挑战界面进入次数",G.DailyNormal="每日挑战普通模式",G.DailyNormalFirstPass="每日挑战普通模式首通",G.DailyNormalBattleFriend="每日挑战普通模式挑战好友次数",G.DailyNormalAskHelpClick="每日挑战普通模式求助次数",G.DailyNormalReplay="每日挑战普通模式重玩次数",G.DailyNormalShare="每日挑战普通模式炫耀次数",G.DailyDiffcult="每日挑战困难模式",G.DailyDiffcultFirstPass="每日挑战困难模式首通",G.DailyDiffcultBattleFriend="每日挑战困难模式挑战好友次数",G.DailyDiffcultAskHelpClick="每日挑战困难模式求助次数",G.DailyDiffcultReplay="每日挑战困难模式重玩次数",G.DailyDiffcultShare="每日挑战困难模式炫耀次数",G.PrizeClickToRotate="转盘成功次数",G.PrizeGetRole="转盘抽取角色次数",G.RoleSelect="角色选择次数",G.RoleGet="角色获得次数",G.RoleBuy="角色购买次数",G.RolePrize="角色抽取次数",G.RoleUseSkill="角色技能使用次数",G.RankUIClick="进入排行界面次数",G.RankShareGroupClick="分享群排行点击次数",G.MoreGameUIClick="更多游戏点击次数",G.HelpUIClick="帮助界面打开次数",G.SoundCloseUIClick="关闭声音点击次数",G.PropShareGetInMode="-分享获得道具-",G.PropAdsGetInMode="-广告获得道具-",G.PropBuyGetInMode="-购买获得道具-",G.PropUseInMode="-使用道具-",G.OnGameShow="激活游戏到前台",G.OnGameHide="隐藏游戏到后台",cc._RF.pop()},{}],DailyInfoMenu:[function(e,t,o){"use strict";cc._RF.push(t,"1a67cTyE7VGV7Y9eAotazsG","DailyInfoMenu"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Tools/FYSDKMgr"),a=e("../Tools/FYMessenger"),n=e("../Tools/FYUtility"),s=e("../Common/E"),r=e("../Tools/FYGlobalVarMgr"),l=e("../Tools/FYUIMgr"),c=cc._decorator,d=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.btnAgain=null,e.btnShare=null,e.nodeTimerGrid=null,e.nodeTimerItem=null,e.nodeFriendBg=null,e._dailyType=null,e._tex=null,e.assistFriend=null,e}return __extends(e,t),e.prototype.initUI=function(e){void 0===e&&(e=null),this._dailyType=e,this.node.active=!0;var t,o,a,n=i.default.Instance.loadLocalData(s.E.DataKey.DailyModeNFirstTime);1==this._dailyType&&(n=i.default.Instance.loadLocalData(s.E.DataKey.DailyModeDFirstTime)),cc.log("_seconds "+n),a=(n=parseInt(n))%60,o=n%3600/60,t=n/3600,this.nodeTimerGrid.removeAllChildren(),0!=t?(this.nodeTimerGrid.setContentSize(600,this.nodeTimerItem.getContentSize().height),this.createTimer("timeHour",t),this.createTimer("timeMinute",o)):0!=o?(this.nodeTimerGrid.setContentSize(400,this.nodeTimerItem.getContentSize().height),this.createTimer("timeMinute",o)):this.nodeTimerGrid.setContentSize(200,this.nodeTimerItem.getContentSize().height),this.createTimer("timeSecond",a)},e.prototype.createTimer=function(e,t){var o=n.default.addChild(this.nodeTimerGrid,this.nodeTimerItem),a=o.getChildByName("MinT").getComponent(cc.Sprite);n.default.changeSpriteFrame(a,"atlas/common/common",e),o.getChildByName("Min").getComponent(cc.Label).string=t},e.prototype.onEnable=function(){this.btnAgain.node.scale=.75,this.btnShare.node.scale=.75,cc.sys.platform==cc.sys.WECHAT_GAME?this.nodeFriendBg.active=!1:this.nodeFriendBg.active=!0,a.default.Instance.send(s.E.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.btnBack.node.scale=1,this.btnAgain.node.scale=.75,this.btnShare.node.scale=.75,a.default.Instance.send(s.E.MsgType.RefreshGameClubBtn,!0)},e.prototype.onClickShare=function(){a.default.Instance.send(s.E.MsgType.PlayClickAudio)},e.prototype.onClickAgain=function(){1==this._dailyType?this.onClickDiffcultMode():this.onClickEasyMode()},e.prototype.onClickEasyMode=function(){a.default.Instance.send(s.E.MsgType.PlayClickAudio),l.default.Instance.show(s.E.UIPath.UIGamePanel,r.default.Instance.NodeBottom,s.E.GameMode.E,!1,0)},e.prototype.onClickDiffcultMode=function(){a.default.Instance.send(s.E.MsgType.PlayClickAudio),l.default.Instance.show(s.E.UIPath.UIGamePanel,r.default.Instance.NodeBottom,s.E.GameMode.E,!1,1)},e.prototype.onClickBack=function(){a.default.Instance.send(s.E.MsgType.PlayClickAudio),this.node.active=!1},e.prototype.start=function(){this._tex=new cc.Texture2D},e.prototype.updaetSubDomainCanvas=function(){this._tex&&cc.sys.platform==cc.sys.WECHAT_GAME&&(this._tex.initWithElement(sharedCanvas),this._tex.handleLoadedTexture(),this.assistFriend.spriteFrame=new cc.SpriteFrame(this._tex))},e.prototype.update=function(){this.updaetSubDomainCanvas()},__decorate([u(cc.Button)],e.prototype,"btnBack",void 0),__decorate([u(cc.Button)],e.prototype,"btnAgain",void 0),__decorate([u(cc.Button)],e.prototype,"btnShare",void 0),__decorate([u(cc.Node)],e.prototype,"nodeTimerGrid",void 0),__decorate([u(cc.Node)],e.prototype,"nodeTimerItem",void 0),__decorate([u(cc.Node)],e.prototype,"nodeFriendBg",void 0),__decorate([u(cc.Sprite)],e.prototype,"assistFriend",void 0),e=__decorate([d],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Common/E":"E","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],DailyLevelConfig:[function(e,t,o){"use strict";cc._RF.push(t,"e5ed83rLJ5AyIWqYYPOlzfJ","DailyLevelConfig"),Object.defineProperty(o,"__esModule",{value:!0});var l=e("../Tools/FYMessenger"),c=e("../Common/E"),a=cc._decorator,n=a.ccclass,i=(a.property,function(){function e(){this._nLoadConfigTotal=6,this.dictNormalLevelInfo={},this.dictNormalRandomInfo={},this.dictNormalAnswerInfo={},this.dictDiffcultLevelInfo={},this.dictDiffcultRandomInfo={},this.dictDiffcultAnswerInfo={}}var t;return(t=e).prototype.initAllConfig=function(){var s=0,r=this;cc.loader.loadRes("DailyLevelConfigNormal",function(e,t){var o=t.split("\n");for(var a in o){var n=JSON.parse(o[a]);for(var i in n)r.dictNormalLevelInfo[i]=n[i]}++s==r._nLoadConfigTotal&&l.default.Instance.send(c.E.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyRandomConfigNormal",function(e,t){var o=t.split("\n");for(var a in o){var n=JSON.parse(o[a]);for(var i in n)r.dictNormalRandomInfo[i]=n[i]}++s==r._nLoadConfigTotal&&l.default.Instance.send(c.E.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyLevelConfigDiffcult",function(e,t){var o=t.split("\n");for(var a in o){var n=JSON.parse(o[a]);for(var i in n)r.dictDiffcultLevelInfo[i]=n[i]}++s==r._nLoadConfigTotal&&l.default.Instance.send(c.E.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyRandomConfigDiffcult",function(e,t){var o=t.split("\n");for(var a in o){var n=JSON.parse(o[a]);for(var i in n)r.dictDiffcultRandomInfo[i]=n[i]}++s==r._nLoadConfigTotal&&l.default.Instance.send(c.E.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyAnswerConfigNormal",function(e,t){var o=t.split("\n");for(var a in o){var n=JSON.parse(o[a]);for(var i in n)r.dictNormalAnswerInfo[i]=n[i]}++s==r._nLoadConfigTotal&&l.default.Instance.send(c.E.MsgType.DailyLevelConfigFinish)}),cc.loader.loadRes("DailyAnswerConfigDiffcult",function(e,t){var o=t.split("\n");for(var a in o){var n=JSON.parse(o[a]);for(var i in n)r.dictDiffcultAnswerInfo[i]=n[i]}++s==r._nLoadConfigTotal&&l.default.Instance.send(c.E.MsgType.DailyLevelConfigFinish)})},e.prototype.getNormalLevelInfoByDays=function(e){return null!=this.dictNormalLevelInfo[e]?this.dictNormalLevelInfo[e]:null},e.prototype.getNormalRandomInfoByDays=function(e){return null!=this.dictNormalRandomInfo[e]?this.dictNormalRandomInfo[e]:null},e.prototype.getNormalAnswerInfoByDays=function(e){return null!=this.dictNormalAnswerInfo[e]?this.dictNormalAnswerInfo[e]:null},e.prototype.getDiffcultLevelInfoByDays=function(e){return null!=this.dictDiffcultLevelInfo[e]?this.dictDiffcultLevelInfo[e]:null},e.prototype.getDiffcultRandomInfoByDays=function(e){return null!=this.dictDiffcultRandomInfo[e]?this.dictDiffcultRandomInfo[e]:null},e.prototype.getDiffcultAnswerInfoByDays=function(e){return null!=this.dictDiffcultAnswerInfo[e]?this.dictDiffcultAnswerInfo[e]:null},e.Instance=new t,e=t=__decorate([n],e)}());o.default=i,cc._RF.pop()},{"../Common/E":"E","../Tools/FYMessenger":"FYMessenger"}],DailyLevelCreator:[function(require,module,exports){"use strict";cc._RF.push(module,"2c128yihOZP8IJd616RuYyF","DailyLevelCreator"),Object.defineProperty(exports,"__esModule",{value:!0});var CubeItem_1=require("./CubeItem"),CubeContainer_1=require("./CubeContainer"),FYMessenger_1=require("../Tools/FYMessenger"),GridItem_1=require("./GridItem"),FYUserDataMgr_1=require("../Common/FYUserDataMgr"),FYSDKMgr_1=require("../Tools/FYSDKMgr"),FYUserDataMgr_2=require("../Common/FYUserDataMgr"),E_1=require("../Common/E"),FYGlobalVarMgr_1=require("../Tools/FYGlobalVarMgr"),_a=cc._decorator,ccclass=_a.ccclass,property=_a.property,DailyLevelCreator=function(_super){function DailyLevelCreator(){var e=null!==_super&&_super.apply(this,arguments)||this;return e.nodeTop=null,e.nodeCenter=null,e.nodeBottom=null,e.sPutContainer=null,e.sGetContainer=null,e.nodeItem=null,e.nodePoint=null,e.nodeLevelGrid=null,e.nodeRandomGrid=null,e.editColor=null,e.editSize=null,e.editLevel=null,e.editRandomNum=null,e.labMode=null,e.labConfigType=null,e._curMode=E_1.E.GameMode.A,e._bStartTimeGame=!1,e._bPauseTimeGame=!1,e._nRow=3,e._nColumn=3,e._nRandomCube=3,e._nRandomCubeTimes=0,e._nGetRow=1,e._nGetColumn=3,e._arrCubeType=[],e._arrCubeType1=[],e._arrayGetGridIndex=[0,1,2],e._arrayDailyRandomConfig={},e._currDailyRandomConfigIdx=-1,e._strLevelConfigPath="",e._strRandomConfigPath="",e._curSelectLevel=0,e._curSelectMode=0,e._curConfigType=0,e}return __extends(DailyLevelCreator,_super),DailyLevelCreator.prototype.createPoint=function(){this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint)},DailyLevelCreator.prototype.createCubeByUser=function(){this._nRandomCubeTimes++,this.sGetContainer.clear(),this.sGetContainer.createGrid(this._nGetRow,this._arrayGetGridIndex.length,this.nodePoint,this._arrayGetGridIndex,E_1.E.GridState.GetPanel);var e=FYGlobalVarMgr_1.default.Instance.WinSize.width/4,t=Number(parseInt(this.editColor.string)-1),o=Number(parseInt(this.editSize.string)-1),a=null;(a=0<FYUserDataMgr_2.default.Instance.cubePool.size()?FYUserDataMgr_2.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sGetContainer.node;var n=a.getComponent(CubeItem_1.default);n.init(t,o,new cc.Vec2(1*e-FYGlobalVarMgr_1.default.Instance.WinSize.width/2,0)),a.active=!0,this.sGetContainer.putCubeByIndex(1,n)||n.node.destroy()},DailyLevelCreator.prototype.createLevelByConfig=function(e){for(var t in e){var o=e[t],a=Math.floor(parseInt(t)/3),n=parseInt(t)%3,i=parseInt(o);cc.log("gridKey:"+a+" cubeKey:"+n+" color:"+i);var s=this.sPutContainer.getGridByIndex(a),r=this.sPutContainer.node.convertToNodeSpaceAR(s.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),l=Number(i),c=Number(n),d=null;(d=0<FYUserDataMgr_2.default.Instance.cubePool.size()?FYUserDataMgr_2.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sPutContainer.node;var u=d.getComponent(CubeItem_1.default);u.init(l,c,new cc.Vec2(r.x,r.y)),d.active=!0,this.sPutContainer.putCube(s);this.sPutContainer.putCubeByIndex(a,u)}},DailyLevelCreator.prototype.addListener=function(){FYMessenger_1.default.Instance.add(E_1.E.MsgType.CubeItemTouchUp,this.onCubeItemTouchUp,this),FYMessenger_1.default.Instance.add(E_1.E.MsgType.onSetDailyConfigPath,this.onSetDailyConfigPath,this)},DailyLevelCreator.prototype.removeListener=function(){FYMessenger_1.default.Instance.remove(E_1.E.MsgType.CubeItemTouchUp,this.onCubeItemTouchUp,this),FYMessenger_1.default.Instance.remove(E_1.E.MsgType.onSetDailyConfigPath,this.onSetDailyConfigPath,this)},DailyLevelCreator.prototype.isCanPut=function(){for(var e=this._nGetRow*this._nGetColumn,t=this._nRow*this._nColumn,o=this.sGetContainer.getGridHaveCubeSize(),a=this.sPutContainer.getGridCanPutCubeSize(),n=0;n<e;n++)for(var i=0;i<t;i++){var s=!0;if("000"==o[n])s=!1;else for(var r=0;r<E_1.E.CubeItemSize.Length;r++)"1"==o[n][r]&&("1"==a[i][r]||(s=!1));if(s)return!0}return!1},DailyLevelCreator.prototype.checkRandomList=function(){var e={},t=this.sPutContainer.getTotalGrid();for(var o in t){var a=parseInt(o),n=t[o].getAllCubeItem();for(var i in n){parseInt(i);var s=n[i];if(null!=s)e[(3*a+s.getCubeItemSize()).toString()]=s.getCubeItemType()}}var r=this._currDailyRandomConfigIdx.toString();this._arrayDailyRandomConfig[r]=e},DailyLevelCreator.prototype.onCubeItemTouchUp=function(e,t){if(0!=this._curSelectLevel){if(t instanceof GridItem_1.default&&0<t.getCubeNum()){this.sPutContainer.putCubeWithNoClean(t);2==this._curMode&&this.checkRandomList(),this.createCubeByUser()}}else t.resetPos()},DailyLevelCreator.prototype.onSetDailyConfigPath=function(e,t,o){this._strLevelConfigPath=t,this._strRandomConfigPath=o},DailyLevelCreator.prototype.onChangeSelectMode=function(){0!=this._curSelectLevel&&(this._curSelectMode=0==this._curSelectMode?1:0,0==this._curSelectMode?this.labMode.string="模式:普通":this.labMode.string="模式:困难",this.onStartByMode(1,!0))},DailyLevelCreator.prototype.onChangeConfigType=function(){if(0!=this._curSelectLevel)if(this._curConfigType=0==this._curConfigType?1:0,0==this._curConfigType){this.labConfigType.string="关卡配置",this.onStartByMode(1,!0);var e=0==this._curSelectMode?E_1.E.JsonDataKey.levelNormalConfig:E_1.E.JsonDataKey.levelDiffcultConfig,t="level"+this._curSelectLevel;null!=(a=FYSDKMgr_1.default.Instance.loadLocalJsonData(e))&&a[t]&&0==this._curConfigType&&(cc.log(a[t]),this.createLevelByConfig(a[t]))}else{this.labConfigType.string="随机配置",this.onStartByMode(2,!0);var o=0==this._curSelectMode?E_1.E.JsonDataKey.randomRandomConfig:E_1.E.JsonDataKey.randomDiffcultConfig,a=(t="random"+this._curSelectLevel,FYSDKMgr_1.default.Instance.loadLocalJsonData(o));if(cc.log(a),null!=a&&a[t]){for(var n in cc.log(a[t]),a[t]){var i=parseInt(n);1==i&&(this._currDailyRandomConfigIdx=i,this._arrayDailyRandomConfig=a[t])}this.createLevelByConfig(this._arrayDailyRandomConfig[1])}}},DailyLevelCreator.prototype.onEditSelectLevel=function(){if(null!=this.editLevel.string){var e=parseInt(this.editLevel.string);if(this._curSelectLevel!=e){this._curSelectLevel=e,this._curConfigType=1,this.onChangeConfigType(),this.onStartByMode(1,!0),cc.log("_curSelectLevel:"+this._curSelectLevel);var t=0==this._curSelectMode?E_1.E.JsonDataKey.levelNormalConfig:E_1.E.JsonDataKey.levelDiffcultConfig,o="level"+this._curSelectLevel,a=FYSDKMgr_1.default.Instance.loadLocalJsonData(t);null!=a&&a[o]&&0==this._curConfigType&&(cc.log(a[o]),this.createLevelByConfig(a[o]))}}},DailyLevelCreator.prototype.onEditRandomNum=function(){if(0!=this._curSelectLevel&&null!=this.editRandomNum.string){var e=0,t=this._arrayDailyRandomConfig[this._currDailyRandomConfigIdx.toString()];for(var o in t)null!=t[o]&&e++;if(e<3&&parseInt(this.editRandomNum.string)>this._currDailyRandomConfigIdx)return cc.log(this._arrayDailyRandomConfig),void cc.log("没有放置完全部的物体！");var a=parseInt(this.editRandomNum.string);if(this._currDailyRandomConfigIdx!=a){this._currDailyRandomConfigIdx=a,this.onStartByMode(2,!0);var n=this._currDailyRandomConfigIdx.toString();cc.log(this._arrayDailyRandomConfig),null!=this._arrayDailyRandomConfig[n]&&this.createLevelByConfig(this._arrayDailyRandomConfig[n])}}},DailyLevelCreator.prototype.onEditEnd=function(){if(0==this._curConfigType){if(null==this.editColor.string||null==this.editSize.string||null==this.editLevel.string)return;if((e=parseInt(this.editColor.string)-1)>=E_1.E.CubeItemType.Length||e<E_1.E.CubeItemType.A)return void console.log("color not Fit");if((t=parseInt(this.editSize.string)-1)>=E_1.E.CubeItemSize.Length||t<E_1.E.CubeItemSize.Small)return void console.log("size not Fit");this.createCubeByUser()}if(1==this._curConfigType){if(null==this.editColor.string||null==this.editSize.string||null==this.editLevel.string||null==this.editRandomNum.string)return;var e,t;if((e=parseInt(this.editColor.string)-1)>=E_1.E.CubeItemType.Length||e<E_1.E.CubeItemType.A)return void console.log("color not Fit");if((t=parseInt(this.editSize.string)-1)>=E_1.E.CubeItemSize.Length||t<E_1.E.CubeItemSize.Small)return void console.log("size not Fit");if(parseInt(this.editRandomNum.string)<=0)return void console.log("randomNum not Fit");this.createCubeByUser()}},DailyLevelCreator.prototype.onClearConfig=function(){0==this._curConfigType?this.onStartByMode(1,!0):this.onStartByMode(2,!0)},DailyLevelCreator.prototype.onSaveConfig=function(){if(0!=this._curSelectLevel){var e={},t=this.sPutContainer.getTotalGrid();for(var o in t){var a=parseInt(o),n=t[o].getAllCubeItem();for(var i in n){parseInt(i);var s=n[i];if(null!=s)e[(3*a+s.getCubeItemSize()).toString()]=s.getCubeItemType()}}1==this._curMode?this.saveConfig(e):this.saveConfig(this._arrayDailyRandomConfig)}else cc.log("this._curSelectLevel = null")},DailyLevelCreator.prototype.saveConfig=function(e){cc.log("saveInfo:"+e);var t=0==this._curSelectMode?E_1.E.JsonDataKey.levelNormalConfig:E_1.E.JsonDataKey.levelDiffcultConfig,o=0==this._curSelectMode?E_1.E.JsonDataKey.randomRandomConfig:E_1.E.JsonDataKey.randomDiffcultConfig;if(1==this._curMode){var a="level"+this._curSelectLevel,n=FYSDKMgr_1.default.Instance.loadLocalJsonData(t);null==n&&(n={});var i=JSON.stringify(e);n[a]=e,FYSDKMgr_1.default.Instance.saveLocalJsonData(t,n),console.log("关卡保存数据",'{"'+a+'":'+i+"}")}else{var s="random"+this._curSelectLevel,r=FYSDKMgr_1.default.Instance.loadLocalJsonData(o);null==r&&(r={});var l=JSON.stringify(e);r[s]=e,FYSDKMgr_1.default.Instance.saveLocalJsonData(o,r);FYSDKMgr_1.default.Instance.loadLocalJsonData(o);console.log("随机保存数据",'{"'+s+'":'+l+"}")}},DailyLevelCreator.prototype.onStartByMode=function(mode,bReset){if(this._bPauseTimeGame=!1,this._curMode=mode,this._nRandomCubeTimes=0,bReset){if(this.sPutContainer.clear(),this.sGetContainer.clear(),this.sPutContainer.clearGrid(),this.sGetContainer.clearGrid(),this._arrayGetGridIndex=[0,1,2],this._arrCubeType=this._arrCubeType1,this.nodeLevelGrid.active=!1,this.nodeRandomGrid.active=!1,this.editRandomNum.node.parent.active=!1,1==mode)this.sPutContainer.node.setContentSize(704,682),this.nodeLevelGrid.active=!0,this.nodeRandomGrid.active=!1,this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this._currDailyRandomConfigIdx=1,this.editRandomNum.string="1",this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);else if(2==mode)this.sPutContainer.node.setContentSize(704,227),this.nodeLevelGrid.active=!1,this.nodeRandomGrid.active=!0,this.editRandomNum.node.parent.active=!0,-1==this._currDailyRandomConfigIdx&&(this._currDailyRandomConfigIdx=1,this.editRandomNum.string="1"),this.nodeLevelGrid.active=!0,this._nRow=1,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);else if(mode==E_1.E.GameMode.E){this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);var txtLevelPath=this._strLevelConfigPath;return void cc.loader.loadRes(txtLevelPath,function(errLevel,resLevel){var txtRandomPath=this._strRandomConfigPath;cc.loader.loadRes(txtRandomPath,function(errRandom,resRandom){var objLevel=JSON.parse(resLevel),levelInfo=objLevel.level1,objRandom=JSON.parse(resRandom);this._arrayDailyRandomConfig=objRandom,this._currDailyRandomConfigIdx=1;var randomInfo=objRandom[1];this.createLevelByConfig(eval(levelInfo)),this.createCubeByConfig(eval(randomInfo))}.bind(this))}.bind(this))}this.createCubeByUser()}},DailyLevelCreator.prototype.onLoad=function(){},DailyLevelCreator.prototype.start=function(){cc.log(FYUserDataMgr_1.default.Instance.value);for(var e=0;e<E_1.E.CubeItemType.Length;e++){E_1.E.CubeItemType[e];for(var t=0;t<3;t++){var o=(e+"_"+t).toString();this._arrCubeType1.push(o)}}this.onStartByMode(1,!0)},DailyLevelCreator.prototype.onEnable=function(){this.addListener()},DailyLevelCreator.prototype.onDisable=function(){this.removeListener()},DailyLevelCreator.prototype.update=function(e){},__decorate([property({type:cc.Node,displayName:"顶容器",tooltip:"顶部容器，主要放菜单"})],DailyLevelCreator.prototype,"nodeTop",void 0),__decorate([property({type:cc.Node,displayName:"中容器",tooltip:"中间容器，主要放游戏操作的对象"})],DailyLevelCreator.prototype,"nodeCenter",void 0),__decorate([property({type:cc.Node,displayName:"底容器",tooltip:"底部容器，主要放广告"})],DailyLevelCreator.prototype,"nodeBottom",void 0),__decorate([property({type:CubeContainer_1.default,displayName:"放容器",tooltip:"放方块的容器"})],DailyLevelCreator.prototype,"sPutContainer",void 0),__decorate([property({type:CubeContainer_1.default,displayName:"拿容器",tooltip:"拿方块的容器"})],DailyLevelCreator.prototype,"sGetContainer",void 0),__decorate([property({type:cc.Node,displayName:"方块",tooltip:"方块的样板，包括大中小"})],DailyLevelCreator.prototype,"nodeItem",void 0),__decorate([property({type:cc.Node,displayName:"位置点",tooltip:"显示放置的位置的点"})],DailyLevelCreator.prototype,"nodePoint",void 0),__decorate([property(cc.Node)],DailyLevelCreator.prototype,"nodeLevelGrid",void 0),__decorate([property(cc.Node)],DailyLevelCreator.prototype,"nodeRandomGrid",void 0),__decorate([property(cc.EditBox)],DailyLevelCreator.prototype,"editColor",void 0),__decorate([property(cc.EditBox)],DailyLevelCreator.prototype,"editSize",void 0),__decorate([property(cc.EditBox)],DailyLevelCreator.prototype,"editLevel",void 0),__decorate([property(cc.EditBox)],DailyLevelCreator.prototype,"editRandomNum",void 0),__decorate([property(cc.Label)],DailyLevelCreator.prototype,"labMode",void 0),__decorate([property(cc.Label)],DailyLevelCreator.prototype,"labConfigType",void 0),DailyLevelCreator=__decorate([ccclass],DailyLevelCreator),DailyLevelCreator}(cc.Component);exports.default=DailyLevelCreator,cc._RF.pop()},{"../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","./CubeContainer":"CubeContainer","./CubeItem":"CubeItem","./GridItem":"GridItem"}],DailyViewMgr:[function(e,t,o){"use strict";cc._RF.push(t,"1098eG7budDF6C0NqEZjhd4","DailyViewMgr"),Object.defineProperty(o,"__esModule",{value:!0});var f=e("./CubeItem"),y=e("../Tools/FYUtility"),m=e("../Tools/FYGlobalVarMgr"),a=cc._decorator,n=a.ccclass,i=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBgItems=[],e.nodeItem=null,e._arrayDailyRandomConfig={},e}return __extends(e,t),e.prototype.refreshCubeSet=function(e){var t=m.default.Instance.WinSize.width/16;for(var o in this._arrayDailyRandomConfig=e,this._arrayDailyRandomConfig){var a=this._arrayDailyRandomConfig[o],n=this.nodeBgItems[parseInt(o)-1];if(null!=n)for(var i in a){var s=y.default.addChild(n,this.nodeItem.node),r=a[i],l=Math.floor(parseInt(i)/3),c=parseInt(i)%3,d=parseInt(r),u=Number(d),p=Number(c),h=s.getComponent(f.default);h.init(u,p,new cc.Vec2((l+1)*t-this.nodeBgItems[0].width/2,0)),h.node.active=!0}}},__decorate([i({type:Array(cc.Node),displayName:"所有背景的list",tooltip:"所有背景的list"})],e.prototype,"nodeBgItems",void 0),__decorate([i(f.default)],e.prototype,"nodeItem",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYUtility":"FYUtility","./CubeItem":"CubeItem"}],EffectMgr:[function(e,t,o){"use strict";cc._RF.push(t,"5ffaepeQphAz7u8hV32XtKd","EffectMgr"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./FYResMgr"),n=e("./FYEffectItem"),i=e("./FYScheduleCtl"),l=e("../Common/E"),a=cc._decorator,c=a.ccclass,s=(a.property,function(){function e(){this._effectContainer=null,this._dictEffectPool={}}var s;return(s=e).prototype.init=function(e){this._effectContainer=e},e.prototype.preLoad=function(){for(var e=0;e<16;e++){var t=cc.instantiate(r.default.Instance.loadEffect(l.E.EffectName.fxCubeTuoWei)),o=cc.instantiate(r.default.Instance.loadEffect(l.E.EffectName.fxCubeClean)),a=cc.instantiate(r.default.Instance.loadEffect(l.E.EffectName.fxCleanLine)),n=cc.instantiate(r.default.Instance.loadEffect(l.E.EffectName.fxSkillFillCube)),i=cc.instantiate(r.default.Instance.loadEffect(l.E.EffectName.fxSkillFillHitCube));t.parent=this._effectContainer,o.parent=this._effectContainer,a.parent=this._effectContainer,n.parent=this._effectContainer,i.parent=this._effectContainer,t.position=cc.Vec2.ZERO,o.position=cc.Vec2.ZERO,a.position=cc.Vec2.ZERO,n.position=cc.Vec2.ZERO,i.position=cc.Vec2.ZERO,t.active=!1,o.active=!1,a.active=!1,n.active=!1,i.active=!1,s.Instance.remove(t),s.Instance.remove(o),s.Instance.remove(a),s.Instance.remove(n),s.Instance.remove(i)}},e.prototype.playEffect=function(e,t,o,a){void 0===a&&(a=this._effectContainer);var n=this.add(e,t);return n.parent=a,-1!=o&&i.default.Instance.setScheduleOnce(function(){s.Instance.remove(n)},o),n},e.prototype.add=function(e,t,o){void 0===o&&(o=this._effectContainer);var a=this.poolGet(e);return null==a&&(a=cc.instantiate(r.default.Instance.loadEffect(e))),a.active=!0,a.parent=o,a.setPosition(t),a.getComponent(n.default).play(),a},e.prototype.remove=function(e){this.poolPut(e)},e.prototype.poolPut=function(e){this._dictEffectPool.hasOwnProperty(e.name)||(this._dictEffectPool[e.name]=new cc.NodePool),this._dictEffectPool[e.name].put(e)},e.prototype.poolGet=function(e){return this._dictEffectPool.hasOwnProperty(e)&&0<this._dictEffectPool[e].size()?this._dictEffectPool[e].get():null},e.Instance=new s,e=s=__decorate([c],e)}());o.default=s,cc._RF.pop()},{"../Common/E":"E","./FYEffectItem":"FYEffectItem","./FYResMgr":"FYResMgr","./FYScheduleCtl":"FYScheduleCtl"}],E:[function(e,t,o){"use strict";var a,n,i,s,r,l,c,d,u,p,h,f,y,m,g,v,I,T,S,C,_,E,P,b,D,M,G,R,N,F;cc._RF.push(t,"9e85eyE221Cmbo8mC0lD144","E"),Object.defineProperty(o,"__esModule",{value:!0}),(a=o.E||(o.E={})).getCurRoleCount=function(){return 5},a.getCurPropCount=function(){return 3},a.getCurVersion=function(){return"1.0.3"},(n=a.wxKey||(a.wxKey={})).ScoreA="wxScoreA",n.ScoreB="wxScoreB",n.ScoreC="wxScoreC",n.ScoreD="wxScoreD",n.ScoreE="wxScoreE",n.AssistTime="AssistTime",n.AssistId="AssistId",n.AssistDoneId="AssistDoneId",n.AssistDoneTime="AssistDoneTime",n.PassDailyTime="PassDailyTime",n.SaveDailyNTime="SaveDailyNTime",n.SaveDailyDTime="SaveDailyDTime",n.DailyNStartTime="DailyNStartTime",n.DailyDStartTime="DailyDStartTime",(i=a.DataKey||(a.DataKey={})).needToClearValue="SquarePatch_needToClearValue0607",i.selectMode="SquarePatch_selectMode",i.soundState="SquarePatch_soundState",i.SoundNum="SquarePatch_SoundNum",i.MusicNum="SquarePatch_MusicNum",i.guidanceState="SquarePatch_guidanceState",i.prizeFreeTimes="SquarePatch_prizeFreeTimes",i.orangeNum="SquarePatch_orangeNum",i.userRoleId="SquarePatch_userRoleId",i.dailyNormalState="SquarePatch_dailyNormalState",i.dailyDiffcultState="SquarePatch_dailyDiffcultState",i.dailyNormalFirstTime="SquarePatch_dailyNormalFirstTime",i.dailyDiffcultFirstTime="SquarePatch_dailyDiffcultFirstTime",i.dailyShareGetNum="SquarePatch_dailyShareGetNum",i.dailyShareLastTime="SquarePatch_dailyShareLastTime",i.DailyModeNTimer="DailyModeNTimer",i.DailyModeDTimer="DailyModeDTimer",i.DailyModeNFirstTime="DailyModeNFirstTime",i.DailyModeDFirstTime="DailyModeDFirstTime",i.DailyModeNFirstSaveTimes="DailyModeNFirstSaveTimes",i.DailyModeDFirstSaveTime="DailyModeDFirstSaveTime",i.DailyModeRefreshTimes="DailyModeRefreshTimes",i.DailyModeNOpenPanelTimes="DailyModeNOpenPanelTimes",i.DailyModeDOpenPanelTimes="DailyModeDOpenPanelTimes",i.WeekRefreshScoreTimes="WeekRefreshScoreTimes",i.PropHammerFirstUse="SquarePatch_PropHammerFirstUse",i.PropSuperStarFirstUse="SquarePatch_PropSuperStarFirstUse",i.PropUnDoOperateFirstUse="SquarePatch_PropUnDoOperateFirstUse",i.GetSignRewardLastTime="SquarePatch_GetSignRewardLastTime",i.GetSignRewardIndex="SquarePatch_GetSignRewardIndex",i.GetFirstWeekSignTime="SquarePatch_GetFirstWeekSignTime",i.DailyAdsViewLastTime="SquarePatch_DailyAdsViewLastTime",i.DailyDiffcultAskHelpSteps="SquarePatch_DailyDiffcultAskHelpSteps",i.FlowBackPanelShowTimes="SquarePatch_FlowBackPanelShowTimes",(s=a.JsonDataKey||(a.JsonDataKey={})).maxScoreByType="SquarePatch_maxScoreByType",s.userOwnRole="SquarePatch_userOwnRole",s.userOwnProp="SquarePatch_userOwnProp",s.userRoleExpCard="SquarePatch_userRoleExpCard",s.levelNormalConfig="SquarePatch_levelNormalConfig",s.randomRandomConfig="SquarePatch_randomRandomConfig",s.levelDiffcultConfig="SquarePatch_levelDiffcultConfig",s.randomDiffcultConfig="SquarePatch_randomDiffcultConfig",s.dailyShareGetPropTotal="SquarePatch_dailyShareGetPropTotal",s.gameSceneInfo="SquarePatch_gameSceneInfo",(r=a.SoundType||(a.SoundType={}))[r.GameOverBg=0]="GameOverBg",r[r.buttonClick=1]="buttonClick",r[r.eliminate=2]="eliminate",r[r.get=3]="get",r[r.good=4]="good",r[r.great=5]="great",r[r.incredible=6]="incredible",r[r.perfect=7]="perfect",r[r.put=8]="put",r[r.readyGo=9]="readyGo",r[r.roleSkillUse=10]="roleSkillUse",r[r.unbelievable=11]="unbelievable",r[r.Length=12]="Length",(l=a.UIPath||(a.UIPath={})).UIGetMenuPanel="UIGetMenuPanel",l.UITipsPanel="UITipsPanel",l.UIReStorePanel="UIReStorePanel",l.UIPropGetPanel="UIPropGetPanel",l.UIBackPackPanel="UIBackPackPanel",l.UIPrizePanel="UIPrizePanel",l.UIShopPanel="UIShopPanel",l.UIHelpPanel="UIHelpPanel",l.UIAdvPanel="UIAdvPanel",l.UIGameOverPanel="UIGameOverPanel",l.UISelectRolePanel="UISelectRolePanel",l.UIDailySharePanel="UIDailySharePanel",l.UISelectDailyPanel="UISelectDailyPanel",l.UISevenDayLoginPanel="UISevenDayLoginPanel",l.UIMainPanel="UIMainPanel",l.UIGamePanel="UIGamePanel",l.UIPausePanel="UIPausePanel",l.UIDailyTipsPanel="UIDailyTipsPanel",l.UIFlowBackTipsPanel="UIFlowBackTipsPanel",(c=a.EffectName||(a.EffectName={})).fxSkillBullet="fxSkillBullet",c.fxCubeTuoWei="fxCubeTuoWei",c.fxCubeShouJi="fxCubeShouJi",c.fxCubeClean="fxCubeClean",c.fxSkillFillCube="fxSkillFillCube",c.fxSkillFillHitCube="fxSkillFillHitCube",c.fxPropChange="fxPropChange",c.fxCleanLine="fxCleanLine",c.fxCleanSingleColor="fxCleanSingleColor_",c.fxRoleColInWall="fxRoleColInWall",c.fxRolePlayShowEnd="fxRolePlayShowEnd",c.fxRolePlaySkillStart="fxRolePlaySkillStart",c.fxRolePlayGlow="fxRolePlayGlow",c.fxGameOverExplore="fxGameOverExplore",(d=a.AdUnitIdType||(a.AdUnitIdType={})).Revive="adunit-3f9e16fe5e5bea9a",d.MainGetGold="adunit-7ed80c6711a751b5",(u=a.MusicType||(a.MusicType={}))[u.MainBg=0]="MainBg",u[u.Length=1]="Length",u[u.None=2]="None",(p=a.GameModeName||(a.GameModeName={}))[p["经典模式"]=0]="经典模式",p[p["进阶模式"]=1]="进阶模式",p[p["限时挑战"]=2]="限时挑战",p[p["单环挑战"]=3]="单环挑战",p[p["每日挑战"]=4]="每日挑战",(h=a.RoleType||(a.RoleType={})).QQ="1",h.Duck="2",h.Cat="3",h.Octopus="4",h.Bird="5",h.Whale="6",a.getModeNameByType=function(e){var t="";switch(e){case m.A:t="经典模式";break;case m.B:t="进阶模式";break;case m.C:t="限时挑战";break;case m.D:t="单环挑战"}return t},a.getModeNumByType=function(e){var t=0;switch(e){case m.A:t=1;break;case m.C:t=2;break;case m.E:t=3}return t},a.getRoleNameByType=function(e){var t="";switch(parseInt(e)){case 1:t="企鹅";break;case 2:t="鸭子";break;case 3:t="紫猫";break;case 4:t="章鱼";break;case 5:t="青鸟"}return t},(f=a.ToChildProgramMsgName||(a.ToChildProgramMsgName={})).ToInitData="ToInitData",f.GameOver="GameOve",f.ShowRank="ShowRank",f.HideRank="HideRank",f.SetPoint="SetPoint",f.ShowGroup="ShowGroup",f.ToDailyAssist="ToDailyAssist",f.CompleteDailyAssist="CompleteDailyAssist",f.ShowAssist="ShowAssist",f.HideAssist="HideAssist",f.PassDailyTime="PassDailyTime",f.DailyPassState="DailyPassState",f.ShowDailyPassTime="ShowDailyPassTime",f.HideDailyPassTime="HideDailyPassTime",f.ShowMainStar="ShowMainStar",f.HideMainStar="HideMainStar",f.DailyNStartTime="DailyNStartTime",f.DailyDStartTime="DailyDStartTime",f.ShowGameOverShare="ShowGameOverShare",f.HideGameOverShare="HideGameOverShare",f.ShowSurpassFriend="ShowSurpassFriend",f.UpdateSurpassFriend="UpdateSurpassFriend",f.HideSurpassFriend="HideSurpassFriend",f.ShowGameOverRank="ShowGameOverRank",f.HideGameOverRank="HideGameOverRank",(y=a.ShareState||(a.ShareState={})).ToSeeGroup="ToSeeGroup",y.SysShare="SysShare",y.DailyShare="DailyShare",y.DailyChallenge="DailyChallenge",y.DailyAssist="DailyAssist",y.InviteFriend="InviteFriend",y.GetPropShare="GetPropShare",(g=m=a.GameMode||(a.GameMode={}))[g.A=0]="A",g[g.B=1]="B",g[g.C=2]="C",g[g.D=3]="D",g[g.E=4]="E",g[g.Length=5]="Length",(v=a.DailyShareType||(a.DailyShareType={}))[v.dailyNormalWin=0]="dailyNormalWin",v[v.dailyNormalLose=1]="dailyNormalLose",v[v.dailyDiffcultWin=2]="dailyDiffcultWin",v[v.dailyDiffcutLose=3]="dailyDiffcutLose",v[v.Length=4]="Length",(I=a.GridState||(a.GridState={}))[I.NotCanPut=0]="NotCanPut",I[I.CanPut=1]="CanPut",I[I.GetPanel=2]="GetPanel",I[I.ViewPanel=3]="ViewPanel",I[I.Length=4]="Length",(T=a.CubeItemType||(a.CubeItemType={}))[T.A=0]="A",T[T.B=1]="B",T[T.C=2]="C",T[T.D=3]="D",T[T.E=4]="E",T[T.F=5]="F",T[T.G=6]="G",T[T.H=7]="H",T[T.Length=8]="Length",(S=a.ReportType||(a.ReportType={})).SceneFlow="SceneFlow",S.GuideFlow="GuideFlow",S.SnsFlow="SnsFlow",S.ActionFlow="ActionFlow",(C=a.CubeItemSize||(a.CubeItemSize={}))[C.Small=0]="Small",C[C.Normal=1]="Normal",C[C.Big=2]="Big",C[C.Length=3]="Length",(_=a.MsgType||(a.MsgType={})).SaveShareInfo="SaveShareInfo",_.ShowRankNode="ShowRankNode",_.CubeItemTouchUp="CubeItemTouchUp",_.CubeRemoveFromGetContainer="CubeRemoveFromGetContainer",_.CubeRemoveFromPutContainer="CubeRemoveFromPutContainer",_.GameOver="GameOver",_.ShowGameOver="ShowGameOver",_.CubeEliminateOne="CubeEliminateOne",_.CubeEliminateThree="CubeEliminateThree",_.CubeItemTouchDown="CubeItemTouchDown",_.ShowEffectLine="ShowEffectLine",_.ShowEffectPoint="ShowEffectPoint",_.GetPoint="GetPoint",_.StartGame="StartGame",_.ChangeMode="ChangeMode",_.ShowHelp="ShowHelp",_.ChangeSound="ChangeSound",_.CubeDownCanGetPoint="CubeDownCanGetPoint",_.PlayClickAudio="PlayClickAudio",_.PlayGameOverAudio="PlayGameOverAudio",_.ChangeBgAudio="ChangeBgAudio",_.ShowSkillShake="ShowSkillShake",_.SkillTrigger="SkillTrigger",_.PropHammerTrigger="PropHammerTrigger",_.ActiveGameMenu="ActiveGameMenu",_.ShowGetPointEffect="ShowGetPointEffect",_.ShowSkillBorderEffect="ShowSkillBorderEffect",_.onSetDailyConfigPath="onSetDailyConfigPath",_.RefreshOrange="RefreshOrange",_.RefreshSelectRole="RefreshSelectRole",_.RefreshSignState="RefreshSignState",_.RefreshShareState="RefreshShareState",_.RefreshGameClubBtn="RefreshGameClubBtn",_.GameHideOrShow="GameHideOrShow",_.DailyModeNewTips="DailyModeNewTips",_.GameRemainTimeEnd="GameRemainTimeEnd",_.GuidanceCloseAnim="GuidanceCloseAnim",_.EnableGridMove="EnableGridMove",_.EnableGridPropUse="EnableGridPropUse",_.DailyLevelConfigFinish="DailyLevelConfigFinish",_.RefreshProp="RefreshProp",_.GameShareGetPropAdd="GameShareGetPropAdd",_.GameAdsGetPropAdd="GameAdsGetPropAdd",_.RefreshRoleItems="RefreshRoleItems",_.RefreshMoveCubePos="RefreshMoveCubePos",_.CancelMoveCubePos="CancelMoveCubePos",_.ResumeGame="ResumeGame",_.ReStartGame="ReStartGame",_.Result="Result",_.SaveGameInfo="SaveGameInfo",_.OnAndroidSDKCallback="OnAndroidSDKCallback",_.OnAndroidShareSDKCallback="OnAndroidShareSDKCallback",(E=a.GetType||(a.GetType={}))[E.kGetOrange=0]="kGetOrange",E[E.kGetRole=1]="kGetRole",E[E.kGetProp=2]="kGetProp",E[E.kGetExpCard=3]="kGetExpCard",E[E.Length=4]="Length",(P=a.GameOverType||(a.GameOverType={}))[P.kTimeLimit=0]="kTimeLimit",P[P.kNoSetCanPut=1]="kNoSetCanPut",P[P.Length=2]="Length",(b=a.LimitModeDir||(a.LimitModeDir={}))[b.kRight=0]="kRight",b[b.kDown=1]="kDown",b[b.kLeft=2]="kLeft",b[b.kUp=3]="kUp",b[b.KNone=4]="KNone",(M=D=a.PropType||(a.PropType={})).kNone="kNone",M.kHammer="kHammer",M.kSuperStar="kSuperStar",M.kUndoOperate="kUndoOperate",a.getPropItemID=function(e){var t="";switch(e){case D.kHammer:t="锤子";break;case D.kSuperStar:t="超能星星"}return t},(G=a.ccaEventType||(a.ccaEventType={})).NewbeeGuideFinish="完成新手引导次数",G.GameModeShare="胜利炫耀次数",G.GameModeRePlay="重玩次数",G.GameModeAdsView="看广告复活次数",G.DailyModeUIEnter="每日挑战界面进入次数",G.DailyNormal="每日挑战普通模式",G.DailyNormalFirstPass="每日挑战普通模式首通",G.DailyNormalBattleFriend="每日挑战普通模式挑战好友次数",G.DailyNormalAskHelpClick="每日挑战普通模式求助次数",G.DailyNormalReplay="每日挑战普通模式重玩次数",G.DailyNormalShare="每日挑战普通模式炫耀次数",G.DailyDiffcult="每日挑战困难模式",G.DailyDiffcultFirstPass="每日挑战困难模式首通",G.DailyDiffcultBattleFriend="每日挑战困难模式挑战好友次数",G.DailyDiffcultAskHelpClick="每日挑战困难模式求助次数",G.DailyDiffcultReplay="每日挑战困难模式重玩次数",G.DailyDiffcultShare="每日挑战困难模式炫耀次数",G.PrizeClickToRotate="转盘成功次数",G.PrizeGetRole="转盘抽取角色次数",G.RoleSelect="角色选择次数",G.RoleGet="角色获得次数",G.RoleBuy="角色购买次数",G.RolePrize="角色抽取次数",G.RoleUseSkill="角色技能使用次数",G.RankUIClick="进入排行界面次数",G.RankShareGroupClick="分享群排行点击次数",G.MoreGameUIClick="更多游戏点击次数",G.HelpUIClick="帮助界面打开次数",G.SoundCloseUIClick="关闭声音点击次数",G.PropShareGetInMode="-分享获得道具-",G.PropAdsGetInMode="-广告获得道具-",G.PropBuyGetInMode="-购买获得道具-",G.PropUseInMode="-使用道具-",G.OnGameShow="激活游戏到前台",G.OnGameHide="隐藏游戏到后台",(R=a.ttAdType||(a.ttAdType={})).InterstitialAd="1",R.BannerAd="2",R.MainPanelRewardVideoAd="3",R.LoginReawardPanelRewardVideoAd="4",R.GoldTipsPanelRewardVideoAd="5",R.AdRevivePanelRewardVideoAd="6",R.GameOverPanelRewardVideoAd="7",R.GameExitAd="8",(N=a.ttEventName||(a.ttEventName={})).startgame="startgame",N.finishguide="finishguide",N.shareaction="shareaction",N.overlevel="overlevel",N.startlevel="startlevel",N.onitemuse="onitemuse",N.pet="pet",N.petlevel="petlevel",N.dealcoins="dealcoins",N.rewardscoins="rewardscoins",N.advertising="advertising",(F=a.ttSDKShareType||(a.ttSDKShareType={})).dailyShare="1",F.propGet="2",F.gameOverXuanYao="3",F.gameOverAssist="4",cc._RF.pop()},{}],FYAudioCtl:[function(e,t,o){"use strict";cc._RF.push(t,"1c11fMZ5+NGqJjKmWa5by6S","FYAudioCtl"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FYSDKMgr"),r=e("./FYResMgr"),a=cc._decorator,n=a.ccclass,i=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arraySound=[],e.arrayMusic=[],e._bOpenSound=!0,e._bOpenMusic=!0,e._nPlayingMusic=-1,e._soundPlaySet=["GameOverBg","buttonClick","eliminate","get","good","great","incredible","perfect","put","readyGo","roleSkillUse","unbelievable"],e.bPauseSound=!1,e.bPauseMusic=!1,e}var o;return __extends(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o._instance},enumerable:!0,configurable:!0}),e.prototype.playSound=function(e){if(!this.bPauseSound)if(s.default.Instance.ttIsTt()){var t=tt.createInnerAudioContext(),o="res/raw-assets/resources/audioClip/"+this._soundPlaySet[e]+".mp3",a=s.default.Instance.Md5Pipe(o);t.src=a,t.autoplay=!1,t.loop=!1,t.play()}else{var n=r.default.Instance.loadAudio(e);console.log(e,n);var i=new cc.AudioSource;i.clip=n,i.play()}},e.prototype.playMusic=function(e){this.bPauseMusic||(this.arrayMusic[e]&&this.arrayMusic[e].play(),this._nPlayingMusic=e)},e.prototype.pauseSound=function(){this.bPauseSound=!0;for(var e=0;e<this.arraySound.length;e++)this.arraySound[e]&&this.arraySound[e].pause()},e.prototype.pauseMusic=function(){this.bPauseMusic=!0;for(var e=0;e<this.arrayMusic.length;e++)this.arrayMusic[e]&&this.arrayMusic[e].pause()},e.prototype.rewindSound=function(){this.bPauseSound=!1},e.prototype.rewindMusic=function(){this.bPauseMusic=!1;for(var e=0;e<this.arrayMusic.length;e++)this.arrayMusic[e]&&this.arrayMusic[e].resume()},e.prototype.onLoad=function(){o._instance=this},e._instance=null,__decorate([i({type:Array(cc.AudioSource),displayName:"音效数组"})],e.prototype,"arraySound",void 0),__decorate([i({type:Array(cc.AudioSource),displayName:"音乐数组"})],e.prototype,"arrayMusic",void 0),e=o=__decorate([n],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./FYResMgr":"FYResMgr","./FYSDKMgr":"FYSDKMgr"}],FYBaseNode:[function(e,t,o){"use strict";cc._RF.push(t,"3e5b1ALxXhAGJHLj6QrQX2M","FYBaseNode"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addListener=function(){},t.prototype.removeListener=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener()},t=__decorate([n],t)}(cc.Component));o.default=i,cc._RF.pop()},{}],FYBaseUIPanel:[function(e,t,o){"use strict";cc._RF.push(t,"490dcBJXE5E16zU6g11Td3j","FYBaseUIPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./FYBaseNode"),n=e("./FYMessenger"),i=cc._decorator,s=i.ccclass,r=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Widget=null,e}return __extends(e,t),e.prototype.setActive=function(e){this.Widget&&(this.Widget.active=e)},e.prototype.getActive=function(){return this.Widget.active},e.prototype.addListener=function(){t.prototype.addListener.call(this),n.default.Instance.add(this.node.name,this.onShow,this)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this),n.default.Instance.remove(this.node.name,this.onShow,this)},e.prototype.onShow=function(e,t){cc.log("msgType = "+e+" param = "+t)},__decorate([r({type:cc.Node,displayName:"Widget节点"})],e.prototype,"Widget",void 0),e=__decorate([s],e)}(a.default);o.default=l,cc._RF.pop()},{"./FYBaseNode":"FYBaseNode","./FYMessenger":"FYMessenger"}],FYEffectControl:[function(e,t,o){"use strict";cc._RF.push(t,"7243cZGHglChod3JhCE9Gok","FYEffectControl"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.partical=null,e}return __extends(e,t),e.prototype.playPartical=function(){this.partical.node.active=!0,this.partical.resetSystem()},e.prototype.stopPartical=function(){this.partical.node.active=!1,this.partical.stopSystem()},e.prototype.start=function(){},__decorate([i({type:cc.ParticleSystem})],e.prototype,"partical",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],FYEffectItem:[function(e,t,o){"use strict";cc._RF.push(t,"0c656atI3BPwJrhEzYDcD7/","FYEffectItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listAnimation=[],e.listParticleSystem=[],e}return __extends(e,t),e.prototype.play=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!0,this.listAnimation[e].play();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!0,this.listParticleSystem[e].resetSystem()},e.prototype.stop=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!1,this.listAnimation[e].stop();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!1,this.listParticleSystem[e].stopSystem()},e.prototype.start=function(){},__decorate([i({type:Array(cc.Animation),displayName:"动作列表"})],e.prototype,"listAnimation",void 0),__decorate([i({type:Array(cc.ParticleSystem),displayName:"特效列表"})],e.prototype,"listParticleSystem",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],FYGlobalVarMgr:[function(e,t,o){"use strict";cc._RF.push(t,"71d0eOTwslMTpy8XiWviIZx","FYGlobalVarMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,function(){function e(){this._nodeCanvas=null,this._canvas=null,this._nodeBottom=null,this._nodeCenter=null,this._nodeTop=null,this._nodeSub=null,this._nDesignSize=cc.Size.ZERO}var t;return(t=e).prototype.reset=function(){this._nodeCanvas=null,this._canvas=null,this._nodeTop=null,this._nodeBottom=null,this._nodeCenter=null},Object.defineProperty(e.prototype,"NodeCanvas",{get:function(){return this._nodeCanvas||(this._nodeCanvas=this._nodeCanvas=cc.director.getScene().getChildByName("Canvas")),this._nodeCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Canvas",{get:function(){return this._canvas||(this._canvas=this.NodeCanvas.getComponent(cc.Canvas)),this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeBottom",{get:function(){return this._nodeBottom||(this._nodeBottom=this.NodeCanvas.getChildByName("Bottom")),this._nodeBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeCenter",{get:function(){return this._nodeCenter||(this._nodeCenter=this.NodeCanvas.getChildByName("Center")),this._nodeCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeTop",{get:function(){return this._nodeTop||(this._nodeTop=this.NodeCanvas.getChildByName("Top")),this._nodeTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeSub",{get:function(){return this._nodeSub||(this._nodeSub=this.NodeCanvas.getChildByName("Sub")),this._nodeSub},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DesignSize",{get:function(){return 0==this._nDesignSize.width&&0==this._nDesignSize.height&&(this._nDesignSize=this.NodeCanvas.getComponent(cc.Canvas).designResolution),this._nDesignSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WinSize",{get:function(){return cc.director.getWinSize()},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=__decorate([n],e)}());o.default=i,cc._RF.pop()},{}],FYMessenger:[function(e,t,o){"use strict";cc._RF.push(t,"61a7eOT0OZAXK4lApqz4hd1","FYMessenger"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){this.listeners={}}return e.prototype.add=function(e,t,o){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(new n(t,o))},e.prototype.remove=function(e,t,o){var a=this.listeners[e];if(a){for(var n=a.length,i=0;i<n;i++){if(a[i].compar(o)){a.splice(i,1);break}}0==a.length&&delete this.listeners[e]}},e.prototype.send=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var a=this.listeners[e];if(a)for(var n=a.length,i=0;i<n;i++){var s=a[i];s.notify.apply(s,[e].concat(t))}},e.Instance=new e,e}();o.default=a;var n=function(){function e(e,t){this.callback=null,this.context=null;this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.callback).call.apply(e,[this.context].concat(t))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],FYResMgr:[function(e,t,o){"use strict";cc._RF.push(t,"69c02vGOERDzbO8IDtkhlci","FYResMgr"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FYMessenger"),a=cc._decorator,n=a.ccclass,i=(a.property,function(){function e(){this.dictAtlas={},this.dictEffect={},this.dictSequenceFrame={},this.dictOther={},this.dictAudio={}}var i;return(i=e).prototype.preLoadAltlas=function(){var n=this;cc.loader.loadResDir("atlas",cc.SpriteAtlas,function(e,t,o){s.default.Instance.send(i.MsgPreLoadAtlasProgress,e,t)},function(e,t){for(var o=0;o<t.length;o++)for(var a in t[o]._spriteFrames)n.dictAtlas[t[o]._spriteFrames[a]._name]=t[o]._spriteFrames[a];s.default.Instance.send(i.MsgPreLoadAtlasComplete)})},e.prototype.preLoadAudio=function(a){console.log("preLoadAudio");var n=this;cc.loader.loadResDir("audioClip",function(e,t){for(var o=0;o<t.length;o++)n.dictAudio[o]=t[o];null!=a&&a()})},e.prototype.preLoadEffect=function(){var a=this;cc.loader.loadResDir("prefabs/Effect",cc.Prefab,function(e,t,o){s.default.Instance.send(i.MsgPreLoadEffectProgress,e,t)},function(e,t){for(var o=0;o<t.length;o++)a.dictEffect[t[o]._name]=t[o].data;s.default.Instance.send(i.MsgPreLoadEffectComplete)})},e.prototype.preLoadSequenceFrame=function(){var a=this;cc.loader.loadResDir("prefabs/SequenceFrame",cc.Prefab,function(e,t,o){s.default.Instance.send(i.MsgPreLoadSequenceFrameProgress,e,t)},function(e,t){for(var o=0;o<t.length;o++)a.dictSequenceFrame[t[o]._name]=t[o].data;s.default.Instance.send(i.MsgPreLoadSequenceFrameComplete)})},e.prototype.preLoadOther=function(){var a=this;cc.loader.loadResDir("prefabs/Other",cc.Prefab,function(e,t,o){s.default.Instance.send(i.MsgPreLoadOtherProgress,e,t)},function(e,t){for(var o=0;o<t.length;o++)a.dictOther[t[o]._name]=t[o].data;s.default.Instance.send(i.MsgPreLoadOtherComplete)})},e.prototype.loadSpriteFrame=function(e){return e in this.dictAtlas?this.dictAtlas[e]:null},e.prototype.loadAudio=function(e){return this.dictAudio[e]?this.dictAudio[e]:null},e.prototype.loadEffect=function(e){return e in this.dictEffect?this.dictEffect[e]:null},e.prototype.loadSequenceFrame=function(e){return e in this.dictSequenceFrame?this.dictSequenceFrame[e]:null},e.prototype.loadOther=function(e){if(e in this.dictOther)return this.dictOther[e]},e.Instance=new i,e.MsgPreLoadAtlasProgress="PreLoadAtlasProgress",e.MsgPreLoadEffectProgress="MsgPreLoadEffectProgress",e.MsgPreLoadSequenceFrameProgress="MsgPreLoadSequenceFrameProgress",e.MsgPreLoadOtherProgress="MsgPreLoadOtherProgress",e.MsgPreLoadAtlasComplete="PreLoadAtlasComplete",e.MsgPreLoadEffectComplete="PreLoadEffectComplete",e.MsgPreLoadSequenceFrameComplete="MsgPreLoadSequenceFrameComplete",e.MsgPreLoadOtherComplete="MsgPreLoadOtherComplete",e.MsgPreLoadComplete="PreLoadComplete",e=i=__decorate([n],e)}());o.default=i,cc._RF.pop()},{"./FYMessenger":"FYMessenger"}],FYSDKMgr:[function(e,t,o){"use strict";cc._RF.push(t,"a4d77hfjeRLi69n5V71ufRy","FYSDKMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("../Common/E")),s=e("./FYScheduleCtl"),r=e("./FYMessenger"),l=e("./FYUtility"),c=function(){function e(){this.test={},this.test2={}}var a;return(a=e).prototype.Md5Pipe=function(e){var t=e;return cc.loader.md5Pipe&&(t=cc.loader.md5Pipe.transformURL(t)),t},e.prototype.saveLocalData=function(e,t){cc.sys.localStorage.setItem(e,t)},e.prototype.loadLocalData=function(e,t){return void 0===t&&(t="0"),cc.sys.localStorage.getItem(e)||t},e.prototype.saveLocalJsonData=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.prototype.loadLocalJsonData=function(e){return JSON.parse(cc.sys.localStorage.getItem(e)||JSON.stringify({}))},e.prototype.removeLocalData=function(e){cc.sys.localStorage.removeItem(e)},e.prototype.removeAllLocalData=function(){cc.sys.localStorage.clear()},e.prototype.ttIsTt=function(){return cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&(cc.sys.platform!=cc.sys.ANDROID&&cc.sys.platform!=cc.sys.IPHONE&&(null!=tt||void 0))},e.prototype.ttSaveImageToPhotosAlbum=function(e){this.ttIsTt()&&tt.saveImageToPhotosAlbum({filePath:e,success:function(e){console.log("success",e),tt.showToast({title:"已保存到相册！",icon:"success"})},fail:function(e){console.log(e),tt.showToast({title:"保存到相册失败！",icon:"loading"})}})},e.prototype.ttOnShareAppMessage=function(){if(this.ttIsTt()){tt.showShareMenu({withShareTicket:!0}),tt.onShareAppMessage(function(e){return{title:"这么多小姐姐在玩的游戏，你不要加入吗？",imageUrl:"https://sf1-ttcdn-tos.pstatp.com/obj/developer/app/tt0d347b89921eb5a5/shareicon10ca2c0",query:""}})}},e.prototype.ttOffShareAppMesage=function(){this.ttIsTt()&&(tt.hideShareMenu(),tt.offShareAppMessage(function(e){}))},e.prototype.ttShareAppMessage=function(e,t,o,a){this.ttIsTt()&&tt.shareAppMessage({title:e,imageUrl:t,query:o,success:function(e){console.log("--------success-----------:",e),null!=a&&a()},fail:function(e){console.log("---------fail-------------:",e)}})},e.prototype.ttCreateBannerAd=function(e){if(this.ttIsTt()){var t=tt.getSystemInfoSync().screenHeight,o=tt.getSystemInfoSync().screenWidth;console.log(t,o);var a=tt.createBannerAd({adUnitId:e,style:{left:0,top:0,width:o}});a.onLoad(function(e){console.log("========banner加载完毕===========",e)}),a.onError(function(e){console.log("========banner加载失败===========",e)}),a.show().then(function(){console.log("广告显示成功")}).catch(function(e){console.log("广告组件出现问题",e)}),a.onResize(function(e){a.style.top=0})}},e.prototype.ttCreateRewardedVideoAd=function(e,t){if(this.ttIsTt()){var o=tt.createRewardedVideoAd({adUnitId:e});if(o){console.log("------ttCreateRewardedVideoAd-------",o);try{o.load().then(function(){o.show()})}catch(e){console.log("===广告加载error===",e),o.load().then(function(){})}var a=function(e){console.log("------fysdk----播放回调-------",e),e&&e.isEnded||null==e?t&&t(!0):t&&t(!1),o.offClose(a)};o.onClose(a),o.onLoad(function(e){console.log("========广告加载完毕===========",e)}),o.onError(function(e){console.log("========广告加载失败===========",e),t&&t(!1),o.offClose(a)})}}},e.prototype.androidShowAd=function(e){if(cc.sys.platform==cc.sys.ANDROID)jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onSDKShowAd","(Ljava/lang/String;)V",e.toString()),s.default.Instance.setSchedule(a.Instance.onAndroidSDKCallback,.1,cc.macro.REPEAT_FOREVER);else if(cc.sys.platform==cc.sys.IPHONE){if(e==i.E.ttAdType.InterstitialAd||e==i.E.ttAdType.GameExitAd)return;jsb.reflection.callStaticMethod("AppAdMgr","showAd:",e.toString());s.default.Instance.setSchedule(a.Instance.onAndroidSDKCallback,.1,cc.macro.REPEAT_FOREVER)}},e.prototype.androidSendEvent=function(e,t){if(cc.sys.platform==cc.sys.ANDROID){var o="";0!=l.default.getDictionaryCount(t)&&(o=JSON.stringify(t)),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onSendEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,o)}else if(cc.sys.platform==cc.sys.IPHONE){o="";if(0!=l.default.getDictionaryCount(t)){if(7==t.position)return;o=JSON.stringify(t)}jsb.reflection.callStaticMethod("AppAdMgr","sendBDTrackerEvent:parmas:",e,o)}},e.prototype.androidShare=function(e){if(cc.sys.platform==cc.sys.ANDROID)jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onSDKShare","(Ljava/lang/String;)V",e);else if(cc.sys.platform==cc.sys.IPHONE){jsb.reflection.callStaticMethod("AppController","ShareLinkToChatScene:Title:Description:Stype:","","","",e)}s.default.Instance.setSchedule(a.Instance.onAndroidSDKCallback,.1,cc.macro.REPEAT_FOREVER)},e.prototype.onAndroidSDKCallback=function(){if(cc.sys.platform==cc.sys.ANDROID){if(null!=window.SDKBridge.callParams){var e=window.SDKBridge.callParams,t=1==parseInt(e.split("_")[0]),o=e.split("_")[1];r.default.Instance.send(i.E.MsgType.OnAndroidSDKCallback,t,o),s.default.Instance.cancelSchedule(a.Instance.onAndroidSDKCallback),window.SDKBridge.callParams=null}if(null!=window.SDKBridge.callWeChats){e=window.SDKBridge.callWeChats,t=1==parseInt(e.split("_")[0]),o=e.split("_")[1];r.default.Instance.send(i.E.MsgType.OnAndroidShareSDKCallback,t,o),s.default.Instance.cancelSchedule(a.Instance.onAndroidSDKCallback),window.SDKBridge.callWeChats=null}}else if(cc.sys.platform==cc.sys.IPHONE){if(null!=window.SDKBridge.callParams){e=window.SDKBridge.callParams,t=1==parseInt(e.split("_")[0]),o=e.split("_")[1];r.default.Instance.send(i.E.MsgType.OnAndroidSDKCallback,t,o),s.default.Instance.cancelSchedule(a.Instance.onAndroidSDKCallback),window.SDKBridge.callParams=null}if(null!=window.SDKBridge.callWeChats){e=window.SDKBridge.callWeChats,t=1==parseInt(e.split("_")[0]),o=e.split("_")[1];r.default.Instance.send(i.E.MsgType.OnAndroidShareSDKCallback,t,o),s.default.Instance.cancelSchedule(a.Instance.onAndroidSDKCallback),window.SDKBridge.callWeChats=null}}},e.Instance=new a,e=a=__decorate([n],e)}();o.default=c,cc._RF.pop()},{"../Common/E":"E","./FYMessenger":"FYMessenger","./FYScheduleCtl":"FYScheduleCtl","./FYUtility":"FYUtility"}],FYScheduleCtl:[function(e,t,o){"use strict";cc._RF.push(t,"ad93830nspIwZhX4wuibyuF","FYScheduleCtl"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,Object.defineProperty(t,"Instance",{get:function(){return o._instance},enumerable:!0,configurable:!0}),t.prototype.setSchedule=function(e,t,o,a){this.schedule(e,t,o,a)},t.prototype.setScheduleOnce=function(e,t){this.scheduleOnce(e,t)},t.prototype.cancelSchedule=function(e){this.unschedule(e)},t.prototype.onLoad=function(){o._instance=this},t._instance=null,t=o=__decorate([n],t)}(cc.Component));o.default=i,cc._RF.pop()},{}],FYSequenceFrameControl:[function(e,t,o){"use strict";cc._RF.push(t,"8b9a2RgcEFFtrfWmPqLXEPv","FYSequenceFrameControl"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arraySprite=[],e.interval=.1,e.delay=.1,e.playCount=-1,e.isAutoDestroy=!1,e._curIndex=0,e._curPlayCount=0,e._callback=null,e}return __extends(e,t),e.prototype.updateSprite=function(){if(this._curIndex++,this._curIndex>=this.arraySprite.length&&(this._curIndex=0)<this.playCount&&(this._curPlayCount++,this._curPlayCount==this.playCount))return this._callback&&this._callback(),this.stop(),void(this.isAutoDestroy&&(this.node.destroy(),this.destroy()));this._curIndex=this._curIndex%this.arraySprite.length;var e=(this._curIndex-1+this.arraySprite.length)%this.arraySprite.length;this.arraySprite[e].active=!1,this.arraySprite[this._curIndex%this.arraySprite.length].active=!0},e.prototype.stop=function(){this.unschedule(this.updateSprite)},e.prototype.getCurIndex=function(){return this._curIndex},e.prototype.setCurIndex=function(e){this._curIndex=e,this._curIndex=this._curIndex%this.arraySprite.length},e.prototype.start=function(){this.schedule(this.updateSprite,this.interval,cc.macro.REPEAT_FOREVER,this.delay)},__decorate([i({type:Array(cc.Node),displayName:"图片数组"})],e.prototype,"arraySprite",void 0),__decorate([i({type:cc.Float,displayName:"间隔时间"})],e.prototype,"interval",void 0),__decorate([i({type:cc.Float,displayName:"延迟时间"})],e.prototype,"delay",void 0),__decorate([i({type:cc.Integer,displayName:"播放次数"})],e.prototype,"playCount",void 0),__decorate([i({displayName:"是否自动删除"})],e.prototype,"isAutoDestroy",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],FYTweenMgr:[function(e,t,o){"use strict";cc._RF.push(t,"c5f894cQTtNrIw9965abunw","FYTweenMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,function(){function e(){}return e.moveTo=function(e,t,o,a,n,i){if(void 0===n&&(n=0),e instanceof cc.Node){var s=cc.moveTo(t,o,a),r=cc.callFunc(function(e){i&&i()},this,0),l=cc.sequence(cc.delayTime(n),s,r);return e.runAction(l),l}return null},e.moveBy=function(e,t,o,a,n,i){if(void 0===n&&(n=0),e instanceof cc.Node){var s=cc.moveBy(t,o,a),r=cc.callFunc(function(e){i&&i()},this,0),l=cc.sequence(cc.delayTime(n),s,r);return e.runAction(l),l}return null},e.rotateBy=function(e,t,o,a,n){if(void 0===a&&(a=0),e instanceof cc.Node){var i=cc.rotateBy(t,o),s=cc.callFunc(function(e){n&&n()},this,0),r=cc.sequence(cc.delayTime(a),i,s);return e.runAction(r),r}return null},e.scaleTo=function(e,t,o,a,n,i){if(void 0===n&&(n=0),e instanceof cc.Node){var s=cc.scaleTo(t,o,a),r=cc.callFunc(function(e){i&&i()},this,0),l=cc.sequence(cc.delayTime(n),s,r);return e.runAction(l),l}return null},e.scaleBigAndSmall=function(e,t,o,a,n){if(void 0===o&&(o=0),void 0===a&&(a=!1),e instanceof cc.Node){var i=cc.scaleTo(t/2,1.1,1.1),s=cc.scaleTo(t/2,.9,.9),r=cc.callFunc(function(e){n&&n()},this,0),l=cc.sequence(cc.delayTime(o),i,s,r);return a&&l.repeatForever(),e.runAction(l),l}return null},e.waitBy=function(e,t,o){if(e instanceof cc.Node){var a=cc.fadeTo(t,e.opacity),n=cc.callFunc(function(e){o&&o()},this,0),i=cc.sequence(a,n);return e.runAction(i),i}return null},e.stopAllActions=function(e){e instanceof cc.Node&&e.stopAllActions()},e.stopAction=function(e,t){e instanceof cc.Node&&e.stopAction(t)},e=__decorate([n],e)}());o.default=i,cc._RF.pop()},{}],FYUIMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2604aqnyTdJkYCkKucAU3P5","FYUIMgr"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./FYMessenger"),s=e("./FYGlobalVarMgr"),r=e("./FYUtility"),l=e("./FYBaseUIPanel"),a=e("../Common/E"),n=cc._decorator,c=n.ccclass,d=(n.property,function(){function e(){this._dictUIPrefab={},this._dictUIPanel={},this._panelDepth=0}var n;return(n=e).prototype.preLoad=function(){var a=this;cc.loader.loadResDir("prefabs/UI",cc.Prefab,function(e,t,o){i.default.Instance.send(n.MsgPreLoadUIProgress,e,t)},function(e,t){for(var o=0;o<t.length;o++)a._dictUIPrefab[t[o]._name]=t[o].data;i.default.Instance.send(n.MsgPreLoadUIComplete)})},e.prototype.getActiveState=function(e){if(this._dictUIPanel[e])return this._dictUIPanel[e].getActive()},e.prototype.preInstantiate=function(){this._dictUIPanel[a.E.UIPath.UIMainPanel]=cc.instantiate(this._dictUIPrefab[a.E.UIPath.UIMainPanel]).getComponent(l.default),this._dictUIPanel[a.E.UIPath.UIMainPanel].setActive(!1),this._dictUIPanel[a.E.UIPath.UISevenDayLoginPanel]=cc.instantiate(this._dictUIPrefab[a.E.UIPath.UISevenDayLoginPanel]).getComponent(l.default),this._dictUIPanel[a.E.UIPath.UISevenDayLoginPanel].setActive(!1),this._dictUIPanel[a.E.UIPath.UIReStorePanel]=cc.instantiate(this._dictUIPrefab[a.E.UIPath.UIReStorePanel]).getComponent(l.default),this._dictUIPanel[a.E.UIPath.UIReStorePanel].setActive(!1)},e.prototype.show=function(e,t){void 0===t&&(t=s.default.Instance.NodeCenter);for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];t||(t=s.default.Instance.NodeCenter),this._dictUIPrefab[e]?(this._dictUIPanel[e]?(null==this._dictUIPanel[e].node.parent&&(this._dictUIPanel[e].node.parent=t,this._dictUIPanel[e].node.position=cc.Vec2.ZERO),this._dictUIPanel[e].setActive(!0)):this._dictUIPanel[e]=r.default.addChild(t,this._dictUIPrefab[e]).getComponent(l.default),this._panelDepth++,this._dictUIPanel[e].node.setSiblingIndex(this._panelDepth),cc.log(e),i.default.Instance.send(e,o)):cc.error(e+" is not prelaod")},e.prototype.hide=function(e){this._dictUIPanel[e]&&(this._dictUIPanel[e].setActive(!1),this._panelDepth--)},e.prototype.hideAll=function(){for(var e in this._dictUIPanel)this._dictUIPanel[e].setActive(!1);this._panelDepth=0},e.prototype.close=function(e){this._dictUIPanel[e]&&(this._dictUIPanel[e].node.destroy(),delete this._dictUIPanel[e],this._panelDepth--)},e.Instance=new n,e.MsgPreLoadUIProgress="PreLoadUIProgress",e.MsgPreLoadUIComplete="PreLoadUIComplete",e=n=__decorate([c],e)}());o.default=d,cc._RF.pop()},{"../Common/E":"E","./FYBaseUIPanel":"FYBaseUIPanel","./FYGlobalVarMgr":"FYGlobalVarMgr","./FYMessenger":"FYMessenger","./FYUtility":"FYUtility"}],FYUserDataMgr:[function(e,t,o){"use strict";cc._RF.push(t,"220fdYAxbdNZKmT51aoGhhl","FYUserDataMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./E"),n=e("../Tools/FYSDKMgr"),i=cc._decorator,s=i.ccclass,r=(i.property,function(){function e(){this._gameMode=a.E.GameMode.A,this._putContainSize=new cc.Vec2(870,900),this._putContainCenter=cc.Vec2.ZERO,this.cubePool=new cc.NodePool,this.gridPool=new cc.NodePool,this.value=0,this._nCurPropRewardTimes=0,this._nMaxPropRewardTimes=3,this._nCurGameOverTimes=0,this._nMaxGameOverTimes=3,this.isRankUpdating=!1,this.bShowAdvMenu=!1,this.bSurviveInGame=!1,this.nUsePropInGame=0}var t;return(t=e).prototype.setGameMode=function(e){this._gameMode=e},e.prototype.getGameMode=function(){return this._gameMode},e.prototype.setPutContainCenter=function(e){this._putContainCenter=e},e.prototype.getPutContainCenter=function(){return this._putContainCenter},e.prototype.setPutContainSize=function(e){this._putContainSize=e},e.prototype.getPutContainSize=function(){return this._putContainSize},e.prototype.addPropRewardTimes=function(e){this._nCurPropRewardTimes+=e,this._nCurPropRewardTimes>=this._nMaxPropRewardTimes&&(n.default.Instance.androidShowAd(a.E.ttAdType.InterstitialAd),n.default.Instance.androidSendEvent(a.E.ttEventName.advertising,{position:7}),this._nCurPropRewardTimes-=this._nMaxPropRewardTimes)},e.prototype.addGameOverTimes=function(){this._nCurGameOverTimes+=1,this._nCurGameOverTimes>=this._nMaxGameOverTimes&&(n.default.Instance.androidShowAd(a.E.ttAdType.InterstitialAd),n.default.Instance.androidSendEvent(a.E.ttEventName.advertising,{position:7}),this._nCurGameOverTimes=0)},e.Instance=new t,e=t=__decorate([s],e)}());o.default=r,cc._RF.pop()},{"../Tools/FYSDKMgr":"FYSDKMgr","./E":"E"}],FYUtility:[function(e,t,o){"use strict";cc._RF.push(t,"89d0b1gEwNHGL/lAt6LxF7n","FYUtility"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=(a.property,function(){function e(){}var n;return(n=e).changeSpriteFrame=function(a,e,n){cc.loader.loadRes(e,cc.SpriteAtlas,function(e,t){if(t instanceof cc.SpriteAtlas){var o=t.getSpriteFrame(n);a.spriteFrame=o}})},e.getWXPos=function(e){var t=cc.winSize,o=cc.view.getFrameSize(),a=o.width/t.width,n=o.height/t.height;return new cc.Vec2(e.x*a,(t.height-e.y)*n)},e.getRandomValueDif=function(e,t,o){for(var a=new Array,n=o?t-e+1<o?t-e+1:o:1,i=e,s=0;i<=t;i++,s++)a[s]=i;var r=[];a.sort(function(){return.5-Math.random()});for(var l=0;l<n;l++){var c=Math.floor(Math.random()*a.length);r.push(a[c]);var d=a[c];a[c]=a[a.length-1],a[a.length-1]=d,a.pop()}return r},e.getRangeRandom=function(e,t){return n.getRandomValueDif(e,t,1)[0]},e.addChild=function(e,t,o,a){if(void 0===o&&(o=cc.Vec2.ZERO),void 0===a&&(a=!0),null==e||null==t)return cc.error("----------\x3e>>>>>>>>parent is undefined",null==e),void cc.error("----------\x3e>>>>>>>>child is undefined",null==t);cc.Vec2.ZERO;var n=cc.instantiate(t);return e.addChild(n),n.position=o,n.active=a,n},e.getCanvasWidth=function(){return cc.Canvas.instance.node.width},e.getCanvasHeight=function(){return cc.Canvas.instance.node.height},e.loadScene=function(e){cc.director.loadScene(e)},e.enablePhysicsSystem=function(e){cc.director.getPhysicsManager().enabled=e},e.enableCollisionSystem=function(e){cc.director.getCollisionManager().enabled=e},e.convertDateFromString=function(e){if(e){var t=e.split(" ")[0].split("/");return new Date(t[0],t[1]-1,t[2])}},e.getMonTimeByNowTime=function(){var e=new Date,t=e.getDay();return 0==t&&(t=7),e.setHours(0,0,0,0),new Date(e.getTime()-24*(t-1)*60*60*1e3).getTime()},e.isSameDay=function(e,t){void 0===t&&(t=Date.now());var o=Number(e),a=Number(t);if(o&&a){var n=new Date(o),i=new Date(a);return n.setHours(0,0,0,0)==i.setHours(0,0,0,0)}return!1},e.getDictionaryCount=function(e){var t=0;for(var o in e)t++;return t},e.formatTime=function(e){var t,o,a;e=parseInt(e);return a=parseInt(e%60),o=parseInt(e%3600/60),(t=parseInt(e/3600))?n.PadZero(t)+":"+n.PadZero(o)+":"+n.PadZero(a):n.PadZero(o)+":"+n.PadZero(a)},e.formatTime2=function(e){var t,o;e=parseInt(e);return o=parseInt(Math.floor((e-1e3*Math.floor(e/1e3))/10)),t=parseInt(e/1e3%60),parseInt(e/1e3%3600/60),parseInt(e/1e3/3600),n.PadZero(t)+":"+n.PadZero(o)},e.PadZero=function(e){return new RegExp(/^\d$/g).test(e)?"0"+e:e},e.getMonthWeek=function(){var e=new Date,t=(e.getFullYear(),e.getDay(),e.getDate(),e.getDay()),o=e.getDate();return Math.ceil((o+6-t)/7)},e=n=__decorate([i],e)}());o.default=n,cc._RF.pop()},{}],GetInfo:[function(e,t,o){"use strict";cc._RF.push(t,"34da1MaUsRPhrhdAHk65dBK","GetInfo"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Common/E"),n=cc._decorator,i=(n.ccclass,n.property,function(){this.getType=null,this.getNum=0,this.roleId=0,this.roleScore=0,this.propType=a.E.PropType.kHammer});o.default=i,cc._RF.pop()},{"../Common/E":"E"}],GridItem:[function(e,t,o){"use strict";cc._RF.push(t,"5dca43mnntK55HSx9+BKrjp","GridItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./CubeItem"),i=e("../Common/E"),a=e("../Tools/FYMessenger"),s=e("../Common/FYUserDataMgr"),r=cc._decorator,l=r.ccclass,c=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mSpritePoint=null,e.mSpriteBg=null,e._dictCube={0:null},e._bEnableMove=!0,e._bEnableUseProp=!1,e._nIndex=-1,e}return __extends(e,t),e.prototype.putCube=function(e,t){if(!this.canPutCube(t))return!1;var o=t.getCubeItemSize();return(this._dictCube[o]=t).node.parent=this.node,t.setPos(new cc.Vec2(0,0)),t.setIndex(e),!0},e.prototype.canPutCube=function(e){if(!(e instanceof n.default))return cc.error("cubeItem is not CubeItem type"),!1;var t=e.getCubeItemSize();return this._nState!=i.E.GridState.NotCanPut&&!(this._dictCube[t]instanceof n.default)},e.prototype.canPutGrid=function(e){for(var t=!0,o=0;o<i.E.CubeItemSize.Length;o++){var a=e.getCubeItem(o);a instanceof n.default&&(t=t&&this.canPutCube(a))}return t},e.prototype.putGrid=function(e,t){if(this.canPutGrid(t)){for(var o=0;o<i.E.CubeItemSize.Length;o++){var a=t.getCubeItem(o);a instanceof n.default&&this.putCube(e,a)}return!0}return!1},e.prototype.setIndex=function(e){this._nIndex=e},e.prototype.getIndex=function(){return this._nIndex},e.prototype.removeCube=function(e){null!=this._dictCube[e]&&(s.default.Instance.gridPool.put(this._dictCube[e].node),this._dictCube[e]=null)},e.prototype.removeAllCube=function(){s.default.Instance.gridPool.put(this.node);for(var e=0;e<i.E.CubeItemSize.Length;e++)this._dictCube[e]=null},e.prototype.destroyCube=function(e){this._dictCube[e]&&(s.default.Instance.cubePool.put(this._dictCube[e].node),this._dictCube[e]=null)},e.prototype.destroyAllCube=function(){for(var e=0;e<i.E.CubeItemSize.Length;e++)this._dictCube[e]&&s.default.Instance.cubePool.put(this._dictCube[e].node),this._dictCube[e]=null},e.prototype.checkSame=function(){var e=[];return null!=this._dictCube[i.E.CubeItemSize.Small]&&null!=this._dictCube[i.E.CubeItemSize.Normal]&&null!=this._dictCube[i.E.CubeItemSize.Big]&&this._dictCube[i.E.CubeItemSize.Small].getCubeItemType()==this._dictCube[i.E.CubeItemSize.Normal].getCubeItemType()&&this._dictCube[i.E.CubeItemSize.Normal].getCubeItemType()==this._dictCube[i.E.CubeItemSize.Big].getCubeItemType()&&(e.push(this._dictCube[i.E.CubeItemSize.Small]),e.push(this._dictCube[i.E.CubeItemSize.Normal]),e.push(this._dictCube[i.E.CubeItemSize.Big])),e},e.prototype.getAllCubeItem=function(){return this._dictCube},e.prototype.getEmptyCubeItem=function(){for(var e=[],t=0;t<i.E.CubeItemSize.Length;t++)this._dictCube[t]||e.push(t);return e},e.prototype.getCubeItem=function(e){return this._dictCube[e]},e.prototype.getCubeItemByType=function(e){for(var t=[],o=0;o<i.E.CubeItemSize.Length;o++)null!=this._dictCube[o]&&this._dictCube[o].getCubeItemType()==e&&t.push(this._dictCube[o]);return t},e.prototype.isFull=function(){for(var e=!0,t=0;t<i.E.CubeItemSize.Length;t++)e=e&&null!=this._dictCube[t];return e},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<i.E.CubeItemSize.Length;t++)e=e&&null==this._dictCube[t];return e},e.prototype.getCubeNum=function(){var e=0;return this._dictCube[i.E.CubeItemSize.Small]instanceof n.default&&e++,this._dictCube[i.E.CubeItemSize.Normal]instanceof n.default&&e++,this._dictCube[i.E.CubeItemSize.Big]instanceof n.default&&e++,e},e.prototype.setPostion=function(e){this._v2Position=e},e.prototype.setWorldPos=function(e){this._v2WorldPosition=e},e.prototype.getPosition=function(){return this._v2Position},e.prototype.getWorldPos=function(){return this._v2WorldPosition},e.prototype.resetPos=function(){this.node.setPosition(this._v2Position)},e.prototype.setWidth=function(e){this._nWidth=e},e.prototype.getWidth=function(){return this._nWidth},e.prototype.setHeight=function(e){this._nHeight=e},e.prototype.getHeight=function(){return this._nHeight},e.prototype.setState=function(e){this._nState=e,this._bEnableMove=this._nState==i.E.GridState.GetPanel,this.mSpriteBg.node.active=!(this._nState==i.E.GridState.GetPanel||this._nState==i.E.GridState.ViewPanel)},e.prototype.getState=function(){return this._nState},e.prototype.showPoint=function(e){this.mSpritePoint.enabled=e},e.prototype.addListener=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchUpCallback,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchDown,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancelCallback,this),a.default.Instance.add(i.E.MsgType.GameHideOrShow,this.onGameHideOrShow,this),a.default.Instance.add(i.E.MsgType.EnableGridMove,this.enabledGridMove,this),a.default.Instance.add(i.E.MsgType.GameRemainTimeEnd,this.onGameTimeEndEvent,this),a.default.Instance.add(i.E.MsgType.EnableGridPropUse,this.enabledGridPropUse,this)},e.prototype.removeListener=function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveCallback,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchUpCallback,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchDown,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancelCallback,this),a.default.Instance.remove(i.E.MsgType.GameHideOrShow,this.onGameHideOrShow,this),a.default.Instance.remove(i.E.MsgType.EnableGridMove,this.enabledGridMove,this),a.default.Instance.remove(i.E.MsgType.GameRemainTimeEnd,this.onGameTimeEndEvent,this),a.default.Instance.remove(i.E.MsgType.EnableGridPropUse,this.enabledGridPropUse,this)},e.prototype.touchMoveCallback=function(e){if(this._nState==i.E.GridState.GetPanel&&this._bEnableMove){this.node.opacity=255;var t=e.touch.getDelta();this.node.x+=t.x,this.node.y+=t.y,a.default.Instance.send(i.E.MsgType.RefreshMoveCubePos,this)}},e.prototype.touchUpCallback=function(e){this._bEnableUseProp?a.default.Instance.send(i.E.MsgType.PropHammerTrigger,this):this._nState==i.E.GridState.GetPanel&&(a.default.Instance.send(i.E.MsgType.CubeItemTouchUp,this),a.default.Instance.send(i.E.MsgType.CancelMoveCubePos,this))},e.prototype.touchCancelCallback=function(e){this.resetPos()},e.prototype.onTouchDown=function(e){this._nState==i.E.GridState.GetPanel&&a.default.Instance.send(i.E.MsgType.CubeItemTouchDown,this)},e.prototype.onGameHideOrShow=function(e,t){t||this._bEnableMove&&(this.node.x=0,this.node.y=0,a.default.Instance.send(i.E.MsgType.CubeItemTouchUp,this,!1))},e.prototype.onGameTimeEndEvent=function(e){this._bEnableMove&&(this.resetPos(),this._bEnableMove=!1)},e.prototype.enabledGridMove=function(e,t){this._nState==i.E.GridState.GetPanel&&(this._bEnableMove=t)},e.prototype.enabledGridPropUse=function(e,t){this._bEnableUseProp=t},e.prototype.start=function(){},e.prototype.onEnable=function(){this.addListener()},e.prototype.onDisable=function(){this.removeListener()},__decorate([c(cc.Sprite)],e.prototype,"mSpritePoint",void 0),__decorate([c(cc.Sprite)],e.prototype,"mSpriteBg",void 0),e=__decorate([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Tools/FYMessenger":"FYMessenger","./CubeItem":"CubeItem"}],GuidanceMgr:[function(e,t,o){"use strict";cc._RF.push(t,"66ffdyxyppA445ISmn7NaYj","GuidanceMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animGuidance=null,e.goGuidaceNodeAnim2=null,e.actionAnimEnd=null,e}return __extends(e,t),e.prototype.PlayBegin=function(){this.goGuidaceNodeAnim2.active=!0,this.animGuidance.stop(),this.animGuidance.play("Beginner1")},e.prototype.PlayEnd=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=null),e?this.animGuidance.play("Beginner2"):this.animGuidance.play("Beginner3"),this.actionAnimEnd=t},e.prototype.onAnimBeginEnd=function(){this.animGuidance.play("BeginnerIdle")},e.prototype.onAnimBackEnd=function(){this.goGuidaceNodeAnim2.active=!1,null!=this.actionAnimEnd&&(this.actionAnimEnd(),this.actionAnimEnd=null)},__decorate([i(cc.Animation)],e.prototype,"animGuidance",void 0),__decorate([i(cc.Node)],e.prototype,"goGuidaceNodeAnim2",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"bc10focc2ZNKJ171yVz9ryx","Main"),Object.defineProperty(o,"__esModule",{value:!0});var u=e("./Tools/FYSDKMgr"),p=e("./Common/E"),h=e("./Tools/FYUtility"),f=e("./Tools/FYMessenger"),r=e("./Tools/FYAudioCtl"),l=e("./Tools/FYGlobalVarMgr"),c=e("./Tools/FYUIMgr"),d=e("./Common/FYUserDataMgr"),y=e("./Tools/FYResMgr"),m=e("./Game/TipsMgr"),a=cc._decorator,n=a.ccclass,i=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bPreLoadComplete=!1,e._bInitTtComplete=!1,e._isAssist=!1,e}return __extends(e,t),e.prototype.onLoad=function(){u.default.Instance.androidSendEvent(p.E.ttEventName.startgame)},e.prototype.onEnable=function(){m.default.Instance.init(l.default.Instance.NodeSub),f.default.Instance.add(y.default.MsgPreLoadComplete,this.onPreLoadComplete,this),u.default.Instance.ttOnShareAppMessage();var n=this;if(u.default.Instance.ttIsTt()){var e=tt.getLaunchOptionsSync();if(console.log("-------------------",e),console.log("----Launch------Launch---scene-",e.scene),console.log("----------Launch---query-",e.query),console.log("----------Launch---shareTicket-",e.shareTicket),e.query.form&&e.query.form==p.E.ShareState.DailyAssist){n._isAssist=!0,u.default.Instance.saveLocalData(p.E.DataKey.guidanceState,1),u.default.Instance.androidSendEvent(p.E.ttEventName.finishguide);var t=e.query.mode,o=(e.query.id,e.query.time);h.default.isSameDay(o)?c.default.Instance.show(p.E.UIPath.UIGamePanel,l.default.Instance.NodeBottom,p.E.GameMode.E,!1,!1,parseInt(t)):c.default.Instance.show(p.E.UIPath.UIMainPanel)}else{var a=u.default.Instance.loadLocalData(p.E.JsonDataKey.gameSceneInfo);if(null!=a&&0!=parseInt(a)){var i=JSON.parse(a);if(0<h.default.getDictionaryCount(i)){var s=i.time;h.default.isSameDay(s)&&!d.default.Instance.bShowAdvMenu?c.default.Instance.show(p.E.UIPath.UIReStorePanel,l.default.Instance.NodeTop,1):u.default.Instance.removeLocalData(p.E.JsonDataKey.gameSceneInfo)}}}if(wx.onShow(function(e){if(console.log("-------------------",e),console.log("----main------onshow---scene-",e.scene),console.log("----------onshow---query-",e.query),console.log("----------onshow---shareTicket-",e.shareTicket),e.query.form&&e.query.form==p.E.ShareState.DailyAssist){console.log("--------res--------",e),u.default.Instance.saveLocalData(p.E.DataKey.guidanceState,1),u.default.Instance.androidSendEvent(p.E.ttEventName.finishguide),n._isAssist=!0;var t=e.query.mode,o=(e.query.id,e.query.time),a=h.default.isSameDay(o);a?c.default.Instance.show(p.E.UIPath.UIGamePanel,l.default.Instance.NodeBottom,p.E.GameMode.E,!1,!1,parseInt(t)):c.default.Instance.show(p.E.UIPath.UIMainPanel)}}),wx.onHide(function(e){f.default.Instance.send(p.E.MsgType.SaveGameInfo)}),this._bInitTtComplete=!0,this._bPreLoadComplete)if(this._isAssist)u.default.Instance.saveLocalData(p.E.DataKey.guidanceState,1),u.default.Instance.androidSendEvent(p.E.ttEventName.finishguide);else 1==u.default.Instance.loadLocalData(p.E.DataKey.guidanceState)?(r.default.Instance.playMusic(p.E.MusicType.MainBg),c.default.Instance.show(p.E.UIPath.UIMainPanel,l.default.Instance.NodeCenter)):(r.default.Instance.playMusic(p.E.MusicType.MainBg),this.scheduleOnce(function(){c.default.Instance.show(p.E.UIPath.UIGamePanel,l.default.Instance.NodeBottom,p.E.GameMode.A,!0,!0)},.3))}else r.default.Instance.playMusic(p.E.MusicType.MainBg);f.default.Instance.add(p.E.MsgType.PlayClickAudio,this.onPlayClick,this),f.default.Instance.add(p.E.MsgType.PlayGameOverAudio,this.onPlayGameOverClick,this),cc.sys.os==cc.sys.OS_ANDROID&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onAndroidKeyUp,this)},e.prototype.onDisable=function(){f.default.Instance.remove(y.default.MsgPreLoadComplete,this.onPreLoadComplete,this),f.default.Instance.remove(p.E.MsgType.PlayClickAudio,this.onPlayClick,this),f.default.Instance.remove(p.E.MsgType.PlayGameOverAudio,this.onPlayGameOverClick,this),cc.sys.os==cc.sys.OS_ANDROID&&cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onAndroidKeyUp,this)},e.prototype.onAndroidKeyUp=function(e){e.keyCode==cc.KEY.back&&u.default.Instance.androidShowAd(p.E.ttAdType.GameExitAd)},e.prototype.onPreLoadComplete=function(){if(u.default.Instance.ttIsTt()){if(this._bPreLoadComplete=!0,this._bInitTtComplete)if(this._isAssist)u.default.Instance.saveLocalData(p.E.DataKey.guidanceState,1),u.default.Instance.androidSendEvent(p.E.ttEventName.finishguide);else 1==u.default.Instance.loadLocalData(p.E.DataKey.guidanceState)?(r.default.Instance.playMusic(p.E.MusicType.MainBg),c.default.Instance.show(p.E.UIPath.UIMainPanel,l.default.Instance.NodeCenter)):(r.default.Instance.playMusic(p.E.MusicType.MainBg),this.scheduleOnce(function(){c.default.Instance.show(p.E.UIPath.UIGamePanel,l.default.Instance.NodeBottom,p.E.GameMode.A,!0,!0)},.3))}else{var e=this;y.default.Instance.preLoadAudio(function(){r.default.Instance.playMusic(p.E.MusicType.MainBg),1==u.default.Instance.loadLocalData(p.E.DataKey.guidanceState)?(r.default.Instance.playMusic(p.E.MusicType.MainBg),c.default.Instance.show(p.E.UIPath.UIMainPanel,l.default.Instance.NodeCenter)):(r.default.Instance.playMusic(p.E.MusicType.MainBg),e.scheduleOnce(function(){c.default.Instance.show(p.E.UIPath.UIGamePanel,l.default.Instance.NodeBottom,p.E.GameMode.A,!0,!0)},.3))})}},e.prototype.start=function(){var e=u.default.Instance.loadLocalJsonData(p.E.JsonDataKey.dailyShareGetPropTotal);if(null==e||0==h.default.getDictionaryCount(e)){e={};for(var t=0;t<p.E.DailyShareType.Length;t++)e[t]=0;u.default.Instance.saveLocalJsonData(p.E.DataKey.DailyDiffcultAskHelpSteps,"0")}u.default.Instance.saveLocalJsonData(p.E.JsonDataKey.dailyShareGetPropTotal,e);var o=u.default.Instance.loadLocalJsonData(p.E.JsonDataKey.userOwnRole);if(null==o||0==h.default.getDictionaryCount(o)){(o={})[1..toString()]=1,u.default.Instance.saveLocalJsonData(p.E.JsonDataKey.userOwnRole,o),0==u.default.Instance.loadLocalData(p.E.DataKey.userRoleId)&&u.default.Instance.saveLocalData(p.E.DataKey.userRoleId,1..toString())}var a=u.default.Instance.loadLocalJsonData(p.E.JsonDataKey.userOwnProp);null!=a&&0!=h.default.getDictionaryCount(a)||((a={})[p.E.PropType.kHammer]=3,a[p.E.PropType.kSuperStar]=3,a[p.E.PropType.kUndoOperate]=3,u.default.Instance.saveLocalJsonData(p.E.JsonDataKey.userOwnProp,a));var n=u.default.Instance.loadLocalData(p.E.DataKey.prizeFreeTimes);0==n?f.default.Instance.send(p.E.MsgType.DailyModeNewTips,!0,!0):h.default.isSameDay(n)||f.default.Instance.send(p.E.MsgType.DailyModeNewTips,!0,!0);var i=u.default.Instance.loadLocalData(p.E.DataKey.DailyModeRefreshTimes);if(0==parseInt(i)||0!=parseInt(i)&&!h.default.isSameDay(i)){var s=new Date,r=(s.getHours(),s.getMinutes(),u.default.Instance.loadLocalData(p.E.DataKey.DailyModeNTimer)),l=u.default.Instance.loadLocalData(p.E.DataKey.DailyModeDTimer),c=!1;if(0!=parseInt(r)&&(h.default.isSameDay(r)||(console.log("on open and reset normal daily in other day!"),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeNFirstTime),u.default.Instance.removeLocalData(p.E.DataKey.dailyNormalState),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeNTimer),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeNFirstSaveTimes),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeNOpenPanelTimes),u.default.Instance.saveLocalData(p.E.DataKey.DailyModeRefreshTimes,s.getTime()),f.default.Instance.send(p.E.MsgType.DailyModeNewTips,!0),c=!0)),0!=parseInt(l)&&(h.default.isSameDay(l)||(console.log("on open and reset diffcult daily in other day!"),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeDFirstTime),u.default.Instance.removeLocalData(p.E.DataKey.dailyDiffcultState),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeDTimer),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeDFirstSaveTime),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeDOpenPanelTimes),u.default.Instance.saveLocalData(p.E.DataKey.DailyModeRefreshTimes,s.getTime()),f.default.Instance.send(p.E.MsgType.DailyModeNewTips,!0),c=!0)),c){var d={};for(t=0;t<p.E.DailyShareType.Length;t++)d[t]=0;u.default.Instance.saveLocalJsonData(p.E.JsonDataKey.dailyShareGetPropTotal,d),u.default.Instance.saveLocalJsonData(p.E.DataKey.DailyDiffcultAskHelpSteps,"0")}0==parseInt(r)&&0==parseInt(l)&&f.default.Instance.send(p.E.MsgType.DailyModeNewTips,!0),this.schedule(function(){var e=new Date,t=e.getHours(),o=e.getMinutes();if(0==t&&0==o){cc.log("on Reset DailyModeNFirstTime And DailyModeDFirstTime"),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeNFirstTime),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeDFirstTime),u.default.Instance.removeLocalData(p.E.DataKey.dailyNormalState),u.default.Instance.removeLocalData(p.E.DataKey.dailyDiffcultState),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeNTimer),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeDTimer),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeNFirstSaveTimes),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeDFirstSaveTime),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeNOpenPanelTimes),u.default.Instance.removeLocalData(p.E.DataKey.DailyModeDOpenPanelTimes);for(var a={},n=0;n<p.E.DailyShareType.Length;n++)a[n]=0;u.default.Instance.saveLocalJsonData(p.E.JsonDataKey.dailyShareGetPropTotal,a),u.default.Instance.saveLocalJsonData(p.E.DataKey.DailyDiffcultAskHelpSteps,"0"),u.default.Instance.saveLocalData(p.E.DataKey.DailyModeRefreshTimes,e.getTime()),f.default.Instance.send(p.E.MsgType.DailyModeNewTips,!0)}}.bind(this),60,cc.macro.REPEAT_FOREVER)}cc.sys.platform==cc.sys.ANDROID&&this.schedule(function(){u.default.Instance.androidShowAd(p.E.ttAdType.InterstitialAd),u.default.Instance.androidSendEvent(p.E.ttEventName.advertising,{position:7})}.bind(this),600,cc.macro.REPEAT_FOREVER)},e.prototype.onPlayClick=function(){r.default.Instance.playSound(p.E.SoundType.buttonClick)},e.prototype.onPlayGameOverClick=function(){r.default.Instance.playSound(p.E.SoundType.GameOverBg)},e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{"./Common/E":"E","./Common/FYUserDataMgr":"FYUserDataMgr","./Game/TipsMgr":"TipsMgr","./Tools/FYAudioCtl":"FYAudioCtl","./Tools/FYGlobalVarMgr":"FYGlobalVarMgr","./Tools/FYMessenger":"FYMessenger","./Tools/FYResMgr":"FYResMgr","./Tools/FYSDKMgr":"FYSDKMgr","./Tools/FYUIMgr":"FYUIMgr","./Tools/FYUtility":"FYUtility"}],PropMgr:[function(e,t,o){"use strict";cc._RF.push(t,"1f81cteNQ5Ft4UQYnOGbzJP","PropMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Common/E"),n=cc._decorator,i=n.ccclass,s=(n.property,function(){function e(){}var t;return(t=e).prototype.getPropInfoByPropType=function(e){var t={limit:5};switch(e){case a.E.PropType.kHammer:t.limit=5,t.desc="txtPropTips7",t.icon="prop_1",t.shareLimit=3,t.cost=10;break;case a.E.PropType.kSuperStar:t.limit=3,t.desc="txtPropTips8",t.icon="prop_2",t.shareLimit=2,t.cost=12}return t},e.Instance=new t,e=t=__decorate([i],e)}());o.default=s,cc._RF.pop()},{"../Common/E":"E"}],RoleAnim:[function(e,t,o){"use strict";cc._RF.push(t,"99ad5fep7xIqJSIwbiq4424","RoleAnim"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYMessenger"),n=e("../Tools/EffectMgr"),i=e("../Tools/FYSDKMgr"),s=e("../Common/E"),r=cc._decorator,l=r.ccclass,c=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.bEffectInWall=!1,e.bEffectInShowEnd=!1,e.effectParent=null,e.roleId="",e.starPos=null,e.nIdx=0,e.nCurrUpType=0,e.onPlayAnimCall=null,e._bEffectSwitch=!0,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.SetEffectParent=function(e,t){this.roleId=e,this.effectParent=t},e.prototype.cleanEffect=function(){0!=this.effectParent.childrenCount&&this.effectParent.removeAllChildren(),this.nIdx=0},e.prototype.resetAnim=function(){cc.log("===========resetAnim=========="),this.nCurrUpType=0,this.anim.stop();var e=i.default.Instance.loadLocalData(s.E.DataKey.userRoleId);if(e==s.E.RoleType.Duck){var t,o=this.node.getChildByName("effectRole2_Show1");null!=o&&(o.active=!1),null!=(t=this.node.getChildByName("effectRole2_Show2"))&&(t.active=!1)}e==s.E.RoleType.Cat&&(null!=(t=this.node.getChildByName("ShowEnd"))&&(t.active=!1))},e.prototype.resetInIdle=function(){cc.log("===========resetInIdle=========="),this.nCurrUpType=0},e.prototype.playShow=function(){cc.log("===========roleShow==========",this.roleId.toString()),this.anim.play("role"+this.roleId.toString()+"_Idle")},e.prototype.playAnim=function(e,t){if(void 0===t&&(t=null),cc.log("===========playAnim=========="+e),this.onPlayAnimCall=t,this.nCurrUpType!=e)if(this.nCurrUpType=e,this.anim.stop(),1==e){if(this.anim.play("role"+this.roleId+"_Attack"),this._bEffectSwitch){var o=new cc.Vec2(-0,-0);n.default.Instance.playEffect(s.E.EffectName.fxRolePlayGlow,o,2,this.node)}}else if(2==e){if(this.anim.play("role"+this.roleId+"_Attack"),this._bEffectSwitch){o=new cc.Vec2(-0,-0);n.default.Instance.playEffect(s.E.EffectName.fxRolePlayGlow,o,2,this.node)}}else 3==e&&(this.anim.play("role"+this.roleId+"_Attack"),this._bEffectSwitch&&a.default.Instance.send(s.E.MsgType.ShowSkillBorderEffect))},e.prototype.onUpAnimEnd=function(){this.anim.stop(),cc.log("===========onUpAnimEnd=========="+this.nCurrUpType),0==this.nCurrUpType&&null!=this.anim&&this.anim.play("role"+this.roleId+"_Idle"),1==this.nCurrUpType&&null!=this.anim&&this.anim.play("role"+this.roleId+"_Idle"),2==this.nCurrUpType&&null!=this.anim&&this.anim.play("role"+this.roleId+"_Idle"),3==this.nCurrUpType&&(this.nCurrUpType=0,null!=this.anim&&this.anim.play("role"+this.roleId+"_Idle")),null!=this.onPlayAnimCall&&this.onPlayAnimCall()},e.prototype.onRoleColliderWall=function(e){if(this.bEffectInWall){this.nIdx++;e.split(",");var t=null;1==this.nIdx?t=new cc.Vec2(206,115):2==this.nIdx?t=new cc.Vec2(-268,117):3==this.nIdx?t=new cc.Vec2(199,117):4==this.nIdx?t=new cc.Vec2(-149,85):5==this.nIdx&&(t=new cc.Vec2(350,-130)),this._bEffectSwitch&&n.default.Instance.playEffect(s.E.EffectName.fxRoleColInWall,t,10,this.effectParent)}},e.prototype.onRolePlayFightShake=function(){if(3==this.nCurrUpType){this._bEffectSwitch&&n.default.Instance.playEffect(s.E.EffectName.fxRoleColInWall,new cc.Vec2(-127,-160),10,this.effectParent);var e=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0));console.log("-------------------------------------------start Play Skill!!!!!!!!!!!!!!!"),a.default.Instance.send(s.E.MsgType.SkillTrigger,e),a.default.Instance.send(s.E.MsgType.ShowSkillShake)}},e.prototype.onRolePlayShowEnd=function(){if(this.bEffectInShowEnd){var e=i.default.Instance.loadLocalData(s.E.DataKey.userRoleId);if(e==s.E.RoleType.Duck){this.node.getChildByName("effectRole2_Show1").active=!1;var t=this.node.getChildByName("effectRole2_Show2");t.active=!0,this.scheduleOnce(function(){t.active=!1},2)}else if(e==s.E.RoleType.Cat){var o=this.node.getChildByName("ShowEnd").getComponent(cc.ParticleSystem);o.node.active=!0,o.resetSystem(),this.scheduleOnce(function(){o.node.active=!1},2)}else if(this._bEffectSwitch){var a=new cc.Vec2(-124,-135);n.default.Instance.playEffect(s.E.EffectName.fxRolePlayShowEnd,a,1,this.effectParent)}}},e.prototype.onRolePlayShowStart=function(){i.default.Instance.loadLocalData(s.E.DataKey.userRoleId)==s.E.RoleType.Duck&&(this.node.getChildByName("effectRole2_Show1").active=!0)},__decorate([c(cc.Animation)],e.prototype,"anim",void 0),__decorate([c(Boolean)],e.prototype,"bEffectInWall",void 0),__decorate([c(Boolean)],e.prototype,"bEffectInShowEnd",void 0),e=__decorate([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Common/E":"E","../Tools/EffectMgr":"EffectMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr"}],RoleConfig:[function(e,t,o){"use strict";cc._RF.push(t,"09060PifCBD+oi5zN57bXaq","RoleConfig"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Common/E"),n=cc._decorator,i=n.ccclass,s=(n.property,function(){function e(){}var t;return(t=e).prototype.getRoleInfoByRoleId=function(e){var t={point:2,star:1};switch(parseInt(e)){case 1:t.point=1,t.star=1,t.gold=10,t.skill=0,t.buyType=0,t.buyNum=0,t.desc="清除一条线上的方糖";break;case 2:t.point=2,t.star=2,t.gold=20,t.skill=0,t.buyType=1,t.buyNum=2e4,t.desc="清除十字范围内的方糖";break;case 3:t.point=3,t.star=3,t.gold=30,t.skill=3,t.buyType=1,t.buyNum=3e4,t.desc="清除3X3范围内的方糖";break;case 4:t.point=2,t.star=2,t.gold=20,t.skill=0,t.buyType=1,t.buyNum=2e4,t.desc="清除X字范围内的方糖";break;case 5:t.point=2,t.star=2,t.gold=20,t.skill=2,t.buyType=1,t.buyNum=16e3,t.desc="清除2X2范围内的方糖"}return t},e.prototype.getPropInfoByPropId=function(e){var t={limit:5};switch(e){case a.E.PropType.kHammer:t.limit=5,t.desc="txtPropTips7",t.desc2="txtBackPack3",t.icon="prop_1",t.shareLimit=3,t.cost=200;break;case a.E.PropType.kSuperStar:t.limit=3,t.desc="txtPropTips8",t.desc2="txtBackPack2",t.icon="prop_2",t.shareLimit=2,t.cost=200;break;case a.E.PropType.kUndoOperate:t.limit=-1,t.desc="txtPropTips9",t.desc2="txtBackPack1",t.icon="prop_3",t.shareLimit=1,t.cost=200}return t},e.prototype.getRolePointByLevel=function(e,t){var o=parseInt(e),a=this.getRoleInfoByRoleId(e),n=0;switch(o){case 1:n=a.point+1*(t-1);break;case 2:case 4:case 5:n=a.point+1.5*(t-1);break;case 3:n=a.point+2*(t-1)}return console.log("points",n),n},e.prototype.getRoleGoldByLevel=function(e,t){var o=parseInt(e),a=this.getRoleInfoByRoleId(e),n=0;switch(o){case 1:n=a.gold+5*(t-1);break;case 2:case 4:case 5:n=a.gold+8*(t-1);break;case 3:n=a.gold+10*(t-1)}return n},e.prototype.getRoleUpgradeByLevel=function(e,t){var o=parseInt(e),a=(this.getRoleInfoByRoleId(e),0);switch(o){case 1:a=1e3+1e3*(t-1);break;case 2:case 4:case 5:a=2e3+2e3*(t-1);break;case 3:a=4e3+4e3*(t-1)}return a},e.Instance=new t,e=t=__decorate([i],e)}());o.default=s,cc._RF.pop()},{"../Common/E":"E"}],RoleItem:[function(e,t,o){"use strict";cc._RF.push(t,"5f804poO4RGJpq26RDIJQvc","RoleItem"),Object.defineProperty(o,"__esModule",{value:!0});var T=e("../Tools/FYSDKMgr"),S=e("../Tools/FYUtility"),C=e("../Game/RoleConfig"),a=e("../Tools/FYMessenger"),_=e("../Common/E"),E=e("../Tools/FYResMgr"),n=e("../Game/RoleMgr"),i=cc._decorator,s=i.ccclass,r=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprItemBg=null,e.sprIconBg=null,e.sprName=null,e.nodeLoad=null,e.nodeGrid=null,e.nodeStar=null,e.labScoreAdd=null,e.labGoldAdd=null,e.labSkillDesc=null,e.btnChoose=null,e.btnChoose2=null,e.btnGoldBuy=null,e.btnLevelUp=null,e.labLevelUp=null,e.labBtnGold=null,e.labLevel=null,e.selectRoleMenu=null,e.bDeveloping=!1,e.limitRemainSec=0,e}return __extends(e,t),e.prototype.getRoleId=function(){return this.roleId},e.prototype.setItem=function(e,t,o){if(this.roleId=e,this.selectRoleMenu=o,this.bDeveloping){var a=this.node.getChildByName("RoleQ").getComponent(cc.Sprite),n=E.default.Instance.loadSpriteFrame("roleCut"+(parseInt(this.roleId)-3));a.spriteFrame=n}else{var i=S.default.addChild(this.nodeLoad,t);this.goRole=i;for(var s=C.default.Instance.getRoleInfoByRoleId(this.roleId).star,r=0;r<s;r++)S.default.addChild(this.nodeGrid,this.nodeStar);var l=E.default.Instance.loadSpriteFrame("labRoleName"+this.roleId);this.sprName.spriteFrame=l;var c=C.default.Instance.getRoleInfoByRoleId(this.roleId);this.labScoreAdd.string="分数："+c.point.toString()+"%",this.labGoldAdd.string="金币："+c.gold.toString()+"%",this.labBtnGold.string=c.buyNum;var d=C.default.Instance.getRoleInfoByRoleId(this.roleId).desc;this.labSkillDesc.string=d;var u=T.default.Instance.loadLocalData(_.E.DataKey.userRoleId);if(0!=u&&u==this.roleId){var p=E.default.Instance.loadSpriteFrame("selectRoleBg2");this.sprItemBg.spriteFrame=p;var h=E.default.Instance.loadSpriteFrame("selectRoleBg3");this.sprIconBg.spriteFrame=h}else{var f=E.default.Instance.loadSpriteFrame("selectRoleBg1");this.sprItemBg.spriteFrame=f;var y=E.default.Instance.loadSpriteFrame("selectRoleBg4");this.sprIconBg.spriteFrame=y}this.labLevel.node.active=!1;var m=T.default.Instance.loadLocalJsonData(_.E.JsonDataKey.userOwnRole);if(null==m||null==m[this.roleId]){this.btnChoose.node.active=!1,this.btnChoose2.active=!1,this.btnLevelUp.node.active=!1;var g=0!=parseInt(c.buyType);this.btnGoldBuy.node.active=g}else{this.labLevel.node.active=!0,this.labLevel.string="Lv."+m[this.roleId],this.labLevelUp.string=C.default.Instance.getRoleUpgradeByLevel(this.roleId,m[this.roleId]).toString();var v=T.default.Instance.loadLocalData(_.E.DataKey.userRoleId);this.labScoreAdd.string="分数："+Math.floor(C.default.Instance.getRolePointByLevel(this.roleId,m[this.roleId])).toString()+"%",this.labGoldAdd.string="金币："+C.default.Instance.getRoleGoldByLevel(this.roleId,m[this.roleId]).toString()+"%",this.btnLevelUp.node.active=m[this.roleId]<10,this.btnGoldBuy.node.active=!1;var I=this.roleId==v;this.btnChoose.node.active=!I,this.btnChoose2.active=I}}},e.prototype.refreshButton=function(){var e=C.default.Instance.getRoleInfoByRoleId(this.roleId),t=T.default.Instance.loadLocalJsonData(_.E.JsonDataKey.userOwnRole),o=T.default.Instance.loadLocalData(_.E.DataKey.userRoleId);if(cc.log(t+" "+this.roleId),cc.log(t+" "+this.roleId),null==t||null==t[this.roleId]){this.btnChoose.node.active=!1,this.btnChoose2.active=!1,this.btnLevelUp.node.active=!1;var a=0!=parseInt(e.buyType);this.btnGoldBuy.node.active=a}else{this.labLevel.node.active=!0,this.labLevel.string="Lv."+t[this.roleId],this.labLevelUp.string=C.default.Instance.getRoleUpgradeByLevel(this.roleId,t[this.roleId]).toString(),this.btnLevelUp.node.active=t[this.roleId]<10,this.labScoreAdd.string="分数："+Math.floor(C.default.Instance.getRolePointByLevel(this.roleId,t[this.roleId])).toString()+"%",this.labGoldAdd.string="金币："+C.default.Instance.getRoleGoldByLevel(this.roleId,t[this.roleId]).toString()+"%";var n=T.default.Instance.loadLocalData(_.E.DataKey.userRoleId);this.btnGoldBuy.node.active=!1;var i=this.roleId==n;this.btnChoose.node.active=!i,this.btnChoose2.active=i}if(0!=o&&o==this.roleId){var s=E.default.Instance.loadSpriteFrame("selectRoleBg2");this.sprItemBg.spriteFrame=s;var r=E.default.Instance.loadSpriteFrame("selectRoleBg3");this.sprIconBg.spriteFrame=r}else{var l=E.default.Instance.loadSpriteFrame("selectRoleBg1");this.sprItemBg.spriteFrame=l;var c=E.default.Instance.loadSpriteFrame("selectRoleBg4");this.sprIconBg.spriteFrame=c}},e.prototype.onEnable=function(){a.default.Instance.add(_.E.MsgType.RefreshRoleItems,this.refreshButton,this)},e.prototype.onDisable=function(){n.default.Instance.putRoleInView(this.roleId.toString(),this.goRole),this.goRole=null,a.default.Instance.remove(_.E.MsgType.RefreshRoleItems,this.refreshButton,this),this.node.scale=1},e.prototype.onClickChoose=function(){this.selectRoleMenu.onClickChooseCall(this)},e.prototype.onClickGoldBuy=function(){this.selectRoleMenu.onClickGoldBuyCall(this)},e.prototype.onClickUpgrade=function(){this.selectRoleMenu.onClickUpgradeCall(this)},__decorate([r(cc.Sprite)],e.prototype,"sprItemBg",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprIconBg",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprName",void 0),__decorate([r(cc.Node)],e.prototype,"nodeLoad",void 0),__decorate([r(cc.Node)],e.prototype,"nodeGrid",void 0),__decorate([r(cc.Node)],e.prototype,"nodeStar",void 0),__decorate([r(cc.Label)],e.prototype,"labScoreAdd",void 0),__decorate([r(cc.Label)],e.prototype,"labGoldAdd",void 0),__decorate([r(cc.Label)],e.prototype,"labSkillDesc",void 0),__decorate([r(cc.Button)],e.prototype,"btnChoose",void 0),__decorate([r(cc.Node)],e.prototype,"btnChoose2",void 0),__decorate([r(cc.Button)],e.prototype,"btnGoldBuy",void 0),__decorate([r(cc.Button)],e.prototype,"btnLevelUp",void 0),__decorate([r(cc.Label)],e.prototype,"labLevelUp",void 0),__decorate([r(cc.Label)],e.prototype,"labBtnGold",void 0),__decorate([r(cc.Label)],e.prototype,"labLevel",void 0),__decorate([r(Boolean)],e.prototype,"bDeveloping",void 0),e=__decorate([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Common/E":"E","../Game/RoleConfig":"RoleConfig","../Game/RoleMgr":"RoleMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUtility":"FYUtility"}],RoleMgr:[function(e,t,o){"use strict";cc._RF.push(t,"62b47qTTMBOSqlDQJXDkyqF","RoleMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Common/E"),n=e("../Tools/FYResMgr"),i=cc._decorator,s=i.ccclass,r=(i.property,function(){function e(){}var t;return(t=e).prototype.getRoleKey=function(e){return"role"+e},e.prototype.getRoleKeyInView=function(e){return"role"+e},e.prototype.getRole=function(e){var t=this.getRoleKey(e);return null==this._dictRole&&(this._dictRole={}),this._dictRole.hasOwnProperty(t)&&0<this._dictRole[t].size()?this._dictRole[t].get():(this._dictRole.hasOwnProperty(t)||(this._dictRole[t]=new cc.NodePool),n.default.Instance.loadOther(t))},e.prototype.putRole=function(e,t){var o=this.getRoleKey(e);this._dictRole.hasOwnProperty(o)||(this._dictRole[o]=new cc.NodePool),this._dictRole[o].put(t)},e.prototype.getRoleInView=function(e){var t=this.getRoleKeyInView(e);return null==this._dictRoleInView&&(this._dictRoleInView={}),this._dictRoleInView.hasOwnProperty(t)&&0<this._dictRoleInView[t].size()?this._dictRoleInView[t].get():(this._dictRoleInView.hasOwnProperty(t)||(this._dictRoleInView[t]=new cc.NodePool),n.default.Instance.loadOther(t))},e.prototype.putRoleInView=function(e,t){var o=this.getRoleKeyInView(e);this._dictRoleInView.hasOwnProperty(o)||(this._dictRoleInView[o]=new cc.NodePool),this._dictRoleInView[o].put(t)},e.prototype.getRoleInfoByRoleType=function(e){var t={point:2,star:1};switch(e){case a.E.RoleType.QQ:t.point=2,t.star=1,t.skill=0,t.buyType=0,t.buyNum=0;break;case a.E.RoleType.Duck:t.point=6,t.star=2,t.skill=0,t.buyType=1,t.buyNum=2e3;break;case a.E.RoleType.Cat:t.point=4,t.star=2,t.skill=3,t.buyType=1,t.buyNum=2e3;break;case a.E.RoleType.Octopus:t.point=6,t.star=2,t.skill=0,t.buyType=1,t.buyNum=1600;break;case a.E.RoleType.Bird:t.point=6,t.star=2,t.skill=2,t.buyType=1,t.buyNum=1600;break;case a.E.RoleType.Whale:t.point=4,t.star=2,t.skill=4,t.buyType=1,t.buyNum=2e3}return t},e.Instance=new t,e=t=__decorate([s],e)}());o.default=r,cc._RF.pop()},{"../Common/E":"E","../Tools/FYResMgr":"FYResMgr"}],SDKBridge:[function(e,t,o){"use strict";cc._RF.push(t,"b0cefYJnHBCfJvGDtbVlqlK","SDKBridge"),window.SDKBridge={callParams:null,callWeChats:null,AndroidCall:function(e){console.log("-------android------ js code------",e),window.SDKBridge.callParams=e},AndroidWeChatCall:function(e){console.log("-------AndroidWeChatCall------ js code------",e),window.SDKBridge.callWeChats=e}},window.IosCall=function(e){console.log("==========iso=====call====   js   code",e),window.SDKBridge.callParams=e},window.IosWeChatCall=function(e){console.log("==========IosWeChatCall=====call====   js   code",e),window.SDKBridge.callWeChats=e},cc._RF.pop()},{}],SpriteAnim:[function(e,t,o){"use strict";cc._RF.push(t,"5409df77AtErqReLxhwJbC4","SpriteAnim"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas=null,e.nAnimLength=0,e.nTimes=.05,e.bLimit=!1,e.sFramePrefix="",e.targetNode=null,e.targetSprite=null,e.targetMask=null,e.nFrameIdx=0,e}return __extends(e,t),e.prototype.onEnable=function(){this.targetSprite=this.targetNode.getComponent(cc.Sprite),this.targetMask=this.targetNode.getComponent(cc.Mask),this.playAnim()},e.prototype.onDisable=function(){},e.prototype.playAnim=function(){this.nFrameIdx=0,null==this.targetSprite||this.bLimit||(cc.log("sprite anim limit"),this.schedule(this.onSpriteFrame,this.nTimes,this.nAnimLength)),null!=this.targetMask&&(cc.log("mask anim not limit"),this.schedule(this.onSpriteFrame,.1,cc.macro.REPEAT_FOREVER)),null!=this.targetSprite&&this.bLimit&&(cc.log("sprite anim not limit"),this.schedule(this.onSpriteFrame,this.nTimes,cc.macro.REPEAT_FOREVER))},e.prototype.padding=function(e,t){for(var o=(e+"").length;o<t;o=e.length)e="0"+e;return e},e.prototype.onSpriteFrame=function(){if(null!=this.atlas){if(this.nFrameIdx=this.nFrameIdx+1,null!=this.targetSprite)if(this.nFrameIdx==this.nAnimLength){if(this.bLimit){this.nFrameIdx=1;var e=this.atlas.getSpriteFrame(this.sFramePrefix+this.nFrameIdx);this.targetSprite.spriteFrame=e}}else{e=this.atlas.getSpriteFrame(this.sFramePrefix+this.nFrameIdx);this.targetSprite.spriteFrame=e}if(null!=this.targetMask)if(this.nFrameIdx==this.nAnimLength+1){this.nFrameIdx=1;e=this.atlas.getSpriteFrame(this.sFramePrefix+this.padding(this.nFrameIdx,2));this.targetMask.spriteFrame=e}else{e=this.atlas.getSpriteFrame(this.sFramePrefix+this.padding(this.nFrameIdx,2));this.targetMask.spriteFrame=e}}},__decorate([i(cc.SpriteAtlas)],e.prototype,"atlas",void 0),__decorate([i({type:cc.Integer})],e.prototype,"nAnimLength",void 0),__decorate([i({type:cc.Float})],e.prototype,"nTimes",void 0),__decorate([i(cc.Boolean)],e.prototype,"bLimit",void 0),__decorate([i(cc.String)],e.prototype,"sFramePrefix",void 0),__decorate([i(cc.Node)],e.prototype,"targetNode",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],TestBoLang:[function(e,t,o){"use strict";cc._RF.push(t,"ccb94MB/zpKLbLlRnkwUYfn","TestBoLang"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMask=null,e}return __extends(e,t),e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},__decorate([i(cc.Node)],e.prototype,"nodeMask",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],TipsMgr:[function(e,t,o){"use strict";cc._RF.push(t,"3a136A5rIdGubnHO8zww1dY","TipsMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYResMgr"),n=e("./Tips"),i=function(){function e(){this._nodeContainer=null,this._pool=new cc.NodePool}return e.prototype.init=function(e){this._nodeContainer=e},e.prototype.getTips=function(){return 0<this._pool.size()?this._pool.get():cc.instantiate(a.default.Instance.loadOther("Tips"))},e.prototype.putTips=function(e){e?this._pool.put(e):cc.error("nodeTips is null")},e.prototype.showTips=function(e){this.addTips().setTips(e)},e.prototype.addTips=function(e){void 0===e&&(e=this._nodeContainer);var t=this.getTips();return t.parent=e,t.scale=1,t.opacity=255,t.getComponent(n.default)},e.prototype.removeTips=function(e){this.putTips(e.node)},e.Instance=new e,e}();o.default=i,cc._RF.pop()},{"../Tools/FYResMgr":"FYResMgr","./Tips":"Tips"}],Tips:[function(e,t,o){"use strict";cc._RF.push(t,"24f27L1dFZP1rSKs9OliarM","Tips"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYBaseNode"),r=e("./TipsMgr"),n=cc._decorator,i=n.ccclass,s=n.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTips=null,e}return __extends(e,t),e.prototype.setTips=function(e){this.labTips.string=e,this.playTween()},e.prototype.playTween=function(){this.node.setPosition(0,0);var e=this;this.node.opacity=0;var t=cc.fadeTo(.15,255),o=cc.fadeTo(.15,0),a=cc.moveBy(.7,0,80),n=cc.callFunc(function(){r.default.Instance.removeTips(e)}),i=cc.sequence(t,cc.delayTime(.4),o,n),s=cc.spawn(a,i);this.node.runAction(s)},__decorate([s(cc.Label)],e.prototype,"labTips",void 0),e=__decorate([i],e)}(a.default);o.default=l,cc._RF.pop()},{"../Tools/FYBaseNode":"FYBaseNode","./TipsMgr":"TipsMgr"}],UIAdvPanel:[function(e,t,o){"use strict";cc._RF.push(t,"965241VW8ZLdZ1kXO8fO0Jp","UIAdvPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Common/E"),a=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYUIMgr"),s=e("../Tools/FYSDKMgr"),r=e("../Tools/FYGlobalVarMgr"),l=e("../Tools/FYMessenger"),c=cc._decorator,d=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeAdvPanel=null,e.nodeGoldPanel=null,e.btnView=null,e.btnPass=null,e.btnGoldRevive=null,e.labRemainGold=null,e.reviveCall=null,e.closeCall=null,e._nPriceOnceCost=1e3,e.bModeA=!1,e.bIsClick=!1,e}return __extends(e,t),e.prototype.onShow=function(e,t){var o=t[0],a=t[1],n=t[2];this.initUI(o,a,n)},e.prototype.initUI=function(e,t,o){this.bModeA=e,this.node.active=!0,this.reviveCall=t,this.closeCall=o,this.nodeAdvPanel.active=!e,this.nodeGoldPanel.active=e,this.labRemainGold.string=s.default.Instance.loadLocalData(n.E.DataKey.orangeNum)},e.prototype.onClickView=function(){if(s.default.Instance.ttIsTt()){var t=this;s.default.Instance.ttCreateRewardedVideoAd("adunit-1e1ek4hfhge1g0k7c1",function(e){e?null!=t.reviveCall&&(t.reviveCall(),t.reviveCall=null,i.default.Instance.hide(n.E.UIPath.UIAdvPanel)):t.onClickPass(),t.bIsClick=!1})}else{if(this.bIsClick)return;this.bIsClick=!0,s.default.Instance.androidShowAd(n.E.ttAdType.AdRevivePanelRewardVideoAd),s.default.Instance.androidSendEvent(n.E.ttEventName.advertising,{position:this.bModeA?4:5})}},e.prototype.onAndroidSDKCall=function(e,t,o){var a=this;o==n.E.ttAdType.AdRevivePanelRewardVideoAd&&(t?(console.log("======AdRevivePanelRewardVideoAd success!!!!!!!!"),null!=a.reviveCall&&(a.reviveCall(),a.reviveCall=null,i.default.Instance.hide(n.E.UIPath.UIAdvPanel))):a.onClickPass(),a.bIsClick=!1)},e.prototype.onClickPass=function(){null!=this.closeCall&&(this.closeCall(),this.closeCall=null,i.default.Instance.hide(n.E.UIPath.UIAdvPanel))},e.prototype.onClickGoldRevive=function(){var e=s.default.Instance.loadLocalData(n.E.DataKey.orangeNum);if(null!=e&&0!=e)if(e<this._nPriceOnceCost)i.default.Instance.show(n.E.UIPath.UITipsPanel,r.default.Instance.NodeTop,function(){i.default.Instance.hide(n.E.UIPath.UITipsPanel)}.bind(this));else{var t=parseInt(e)-this._nPriceOnceCost;s.default.Instance.androidSendEvent(n.E.ttEventName.dealcoins,{dealid:4}),s.default.Instance.saveLocalData(n.E.DataKey.orangeNum,t.toString()),l.default.Instance.send(n.E.MsgType.RefreshOrange),null!=this.reviveCall&&(this.reviveCall(),this.reviveCall=null,i.default.Instance.hide(n.E.UIPath.UIAdvPanel))}else i.default.Instance.show(n.E.UIPath.UITipsPanel,r.default.Instance.NodeTop,function(){i.default.Instance.hide(n.E.UIPath.UITipsPanel)}.bind(this))},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),l.default.Instance.add(n.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnView.node.scale=1,this.btnPass.node.scale=1,this.btnGoldRevive.node.scale=1,l.default.Instance.remove(n.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this)},__decorate([u(cc.Node)],e.prototype,"nodeAdvPanel",void 0),__decorate([u(cc.Node)],e.prototype,"nodeGoldPanel",void 0),__decorate([u(cc.Button)],e.prototype,"btnView",void 0),__decorate([u(cc.Button)],e.prototype,"btnPass",void 0),__decorate([u(cc.Button)],e.prototype,"btnGoldRevive",void 0),__decorate([u(cc.Label)],e.prototype,"labRemainGold",void 0),e=__decorate([d],e)}(a.default);o.default=p,cc._RF.pop()},{"../Common/E":"E","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr"}],UIBackPackPanel:[function(e,t,o){"use strict";cc._RF.push(t,"1b2d2Kjw8BJuLo4weaONwGl","UIBackPackPanel"),Object.defineProperty(o,"__esModule",{value:!0});var l=e("../Tools/FYUtility"),a=e("../Tools/FYMessenger"),c=e("../Tools/FYSDKMgr"),d=e("../Game/RoleConfig"),u=e("../Common/E"),n=e("../Tools/FYBaseUIPanel"),i=e("../Tools/FYUIMgr"),s=cc._decorator,r=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.btnBack=null,e}return __extends(e,t),e.prototype.onEnable=function(){a.default.Instance.send(u.E.MsgType.RefreshGameClubBtn,!1),this.initUI()},e.prototype.onDisable=function(){a.default.Instance.send(u.E.MsgType.RefreshGameClubBtn,!0),this.btnBack.scale=1},e.prototype.onClickBack=function(){a.default.Instance.send(u.E.MsgType.PlayClickAudio),i.default.Instance.hide(u.E.UIPath.UIBackPackPanel)},e.prototype.getPropTypeByIdx=function(e){var t=null;switch(e){case 0:t=u.E.PropType.kHammer;break;case 1:t=u.E.PropType.kSuperStar;break;case 2:t=u.E.PropType.kUndoOperate}return t},e.prototype.initUI=function(){this.content.removeAllChildren();for(var e=c.default.Instance.loadLocalJsonData(u.E.JsonDataKey.userOwnProp),t=0;t<u.E.getCurPropCount();t++){var o=l.default.addChild(this.content,this.item),a=o.getChildByName("PropIcon").getComponent(cc.Sprite),n="prop_"+(t+1).toString();l.default.changeSpriteFrame(a,"atlas/common/common",n);var i=o.getChildByName("labNum").getComponent(cc.Label);i.string=null!=e?e[this.getPropTypeByIdx(t)]:"0";var s=o.getChildByName("Title").getComponent(cc.Sprite),r=d.default.Instance.getPropInfoByPropId(this.getPropTypeByIdx(t));l.default.changeSpriteFrame(s,"atlas/common/common",r.desc2)}},__decorate([p(cc.Node)],e.prototype,"content",void 0),__decorate([p(cc.Node)],e.prototype,"item",void 0),__decorate([p(cc.Node)],e.prototype,"btnBack",void 0),e=__decorate([r],e)}(n.default);o.default=h,cc._RF.pop()},{"../Common/E":"E","../Game/RoleConfig":"RoleConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIDailySharePanel:[function(e,t,o){"use strict";cc._RF.push(t,"32b78ytRf9I4aT7x0F6HCLh","UIDailySharePanel"),Object.defineProperty(o,"__esModule",{value:!0});var h=e("../Tools/FYSDKMgr"),n=e("../Tools/FYUtility"),f=e("../Tools/FYMessenger"),y=e("../Game/GetInfo"),m=e("../Common/E"),a=e("../Tools/FYBaseUIPanel"),g=e("../Tools/FYGlobalVarMgr"),v=e("../Tools/FYUIMgr"),i=e("../Common/C"),I=e("../Common/FYUserDataMgr"),s=cc._decorator,r=s.ccclass,l=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rewardList=[[{type:m.E.GetType.kGetOrange,ID:m.E.PropType.kNone,value:100}],[{type:m.E.GetType.kGetProp,ID:m.E.PropType.kUndoOperate,value:1}],[{type:m.E.GetType.kGetProp,ID:m.E.PropType.kSuperStar,value:1}],[{type:m.E.GetType.kGetProp,ID:m.E.PropType.kHammer,value:1}],[{type:m.E.GetType.kGetProp,ID:m.E.PropType.kUndoOperate,value:1},{type:m.E.GetType.kGetProp,ID:m.E.PropType.kHammer,value:1},{type:m.E.GetType.kGetProp,ID:m.E.PropType.kSuperStar,value:1}]],e._shareNum=0,e.listItem=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"rewardList",{get:function(){return this._rewardList},set:function(e){this._rewardList=e},enumerable:!0,configurable:!0}),e.prototype.clickClose=function(){f.default.Instance.send(m.E.MsgType.PlayClickAudio),v.default.Instance.hide(m.E.UIPath.UIDailySharePanel)},e.prototype.getReward=function(){var e=Number(this._shareNum),t=this.rewardList[e];for(var o in console.log("------reward----rewardlist---",t,this.rewardList),t){var a=t[o];if(a){var n=a.type;if(n==m.E.GetType.kGetOrange){var i=h.default.Instance.loadLocalData(m.E.DataKey.orangeNum,"0");h.default.Instance.saveLocalData(m.E.DataKey.orangeNum,Number(i)+a.value),f.default.Instance.send(m.E.MsgType.RefreshOrange)}else if(n==m.E.GetType.kGetProp){var s=h.default.Instance.loadLocalJsonData(m.E.JsonDataKey.userOwnProp),r=s[a.ID]||0,l=Number(r)+a.value;s[a.ID]=l,I.default.Instance.addPropRewardTimes(a.value),h.default.Instance.saveLocalJsonData(m.E.JsonDataKey.userOwnProp,s),f.default.Instance.send(m.E.MsgType.RefreshProp)}else if(n==m.E.GetType.kGetRole){var c=h.default.Instance.loadLocalJsonData(m.E.JsonDataKey.userOwnRole)||{},d=a.ID;c[d+""]=1,h.default.Instance.saveLocalJsonData(m.E.JsonDataKey.userOwnRole,c);var u=h.default.Instance.loadLocalJsonData(m.E.JsonDataKey.userRoleExpCard)||{};u[d+""]=null,h.default.Instance.saveLocalJsonData(m.E.JsonDataKey.userRoleExpCard,u)}}}var p=new y.default;p.getType=t[0].type,p.propType=t[0].ID,p.roleId=Number(t[0].ID),p.getNum=t[0].value,v.default.Instance.show(m.E.UIPath.UIGetMenuPanel,g.default.Instance.NodeTop,p,function(){if(t[1]){var e=new y.default;e.getType=t[1].type,e.roleId=Number(t[0].ID),e.propType=t[1].ID,e.getNum=t[1].value,v.default.Instance.show(m.E.UIPath.UIGetMenuPanel,g.default.Instance.NodeTop,e,function(){if(t[2]){var e=new y.default;e.getType=t[2].type,e.roleId=Number(t[0].ID),e.propType=t[2].ID,e.getNum=t[2].value,v.default.Instance.show(m.E.UIPath.UIGetMenuPanel,g.default.Instance.NodeTop,e)}})}}),p.getType==m.E.GetType.kGetOrange&&h.default.Instance.androidSendEvent(m.E.ttEventName.rewardscoins,{rewardid:4})},e.prototype.clickSaveImage=function(){if(h.default.Instance.ttIsTt()){var e=h.default.Instance.Md5Pipe("res/raw-assets/resources/share/share1.jpg");h.default.Instance.ttSaveImageToPhotosAlbum(e)}},e.prototype.clickShare=function(){if(f.default.Instance.send(m.E.MsgType.PlayClickAudio),h.default.Instance.ttIsTt()){var e=this;h.default.Instance.ttShareAppMessage("美味方糖，今天你吃了吗？","https://sf1-ttcdn-tos.pstatp.com/obj/developer/app/tt0d347b89921eb5a5/shareicon10ca2c0","form="+i.C.ShareState.InviteFriend+"&time="+Date.now(),function(e){console.log("-----------每日分享成功",e)}),this.scheduleOnce(function(){e.shareRefreshUI()},3)}else cc.sys.platform==cc.sys.ANDROID?h.default.Instance.androidShare(m.E.ttSDKShareType.dailyShare):cc.sys.platform==cc.sys.IPHONE?h.default.Instance.androidShare(m.E.ttSDKShareType.dailyShare):this.shareRefreshUI()},e.prototype.onAndroidSDKCall=function(e,t,o){o==m.E.ttSDKShareType.dailyShare&&t&&(this.shareRefreshUI(),h.default.Instance.androidSendEvent(m.E.ttEventName.shareaction))},e.prototype.shareRefreshUI=function(){this._shareNum=Number(this._shareNum),this._shareNum<4&&(this._shareNum+=1,this.getReward(),h.default.Instance.saveLocalData(m.E.DataKey.dailyShareGetNum,""+this._shareNum),h.default.Instance.saveLocalData(m.E.DataKey.dailyShareLastTime,Date.now())),this.refreshUI(),f.default.Instance.send(m.E.MsgType.RefreshShareState)},e.prototype.refreshUI=function(){var e=h.default.Instance.loadLocalData(m.E.DataKey.dailyShareLastTime,"0"),t=Date.now();for(var o in!n.default.isSameDay(e)&&0<t-e&&(this._shareNum=-1),this.listItem){var a=this.listItem[o];Number(o)<=Number(this._shareNum)?a.getChildByName("hadSign").active=!0:a.getChildByName("hadSign").active=!1}},e.prototype.onEnable=function(){var e=h.default.Instance.loadLocalData(m.E.DataKey.dailyShareLastTime,"0"),t=Date.now();!n.default.isSameDay(e)&&0<=t-e?this._shareNum=-1:this._shareNum=Number(h.default.Instance.loadLocalData(m.E.DataKey.dailyShareGetNum,"-1")),f.default.Instance.send(m.E.MsgType.RefreshGameClubBtn,!1),this.refreshUI(),f.default.Instance.add(m.E.MsgType.OnAndroidShareSDKCallback,this.onAndroidSDKCall,this)},e.prototype.onDisable=function(){f.default.Instance.send(m.E.MsgType.RefreshGameClubBtn,!0),f.default.Instance.remove(m.E.MsgType.OnAndroidShareSDKCallback,this.onAndroidSDKCall,this)},__decorate([l(Array(cc.Node))],e.prototype,"listItem",void 0),e=__decorate([r],e)}(a.default);o.default=c,cc._RF.pop()},{"../Common/C":"C","../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Game/GetInfo":"GetInfo","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIDailyTipsPanel:[function(e,t,o){"use strict";cc._RF.push(t,"8485dBqzFdGSoL0nXFSWIav","UIDailyTipsPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYMessenger"),n=e("../Common/E"),i=e("../Tools/FYBaseUIPanel"),s=e("../Tools/FYUIMgr"),r=cc._decorator,l=r.ccclass,c=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMask=null,e.btnBack=null,e.btnSure=null,e.anim=null,e.delegateClose=null,e}return __extends(e,t),e.prototype.onClickBack=function(){a.default.Instance.send(n.E.MsgType.PlayClickAudio),s.default.Instance.hide(n.E.UIPath.UIDailyTipsPanel)},e.prototype.onClickMask=function(){},e.prototype.onEnable=function(){this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},e.prototype.onDisable=function(){this.btnBack.node.scale=1,this.btnSure.node.scale=1,this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},e.prototype.onShow=function(e,t){var o=t[0];this.initUI(o)},e.prototype.initUI=function(e){void 0===e&&(e=null),this.delegateClose=e,this.anim.play()},__decorate([c(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([c(cc.Button)],e.prototype,"btnBack",void 0),__decorate([c(cc.Button)],e.prototype,"btnSure",void 0),__decorate([c(cc.Animation)],e.prototype,"anim",void 0),e=__decorate([l],e)}(i.default);o.default=d,cc._RF.pop()},{"../Common/E":"E","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYUIMgr":"FYUIMgr"}],UIFlowBackTipsPanel:[function(e,t,o){"use strict";cc._RF.push(t,"c9d5dDCKD1ItImZZoY+RdFE","UIFlowBackTipsPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYBaseUIPanel"),n=e("../Tools/FYMessenger"),i=e("../Common/E"),s=e("../Tools/FYUIMgr"),r=cc._decorator,l=r.ccclass,c=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.btnSure=null,e}return __extends(e,t),e.prototype.onClickBack=function(){n.default.Instance.send(i.E.MsgType.PlayClickAudio),s.default.Instance.hide(i.E.UIPath.UIFlowBackTipsPanel)},__decorate([c(cc.Button)],e.prototype,"btnBack",void 0),__decorate([c(cc.Button)],e.prototype,"btnSure",void 0),e=__decorate([l],e)}(a.default);o.default=d,cc._RF.pop()},{"../Common/E":"E","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYUIMgr":"FYUIMgr"}],UIGameOverPanel:[function(e,t,o){"use strict";cc._RF.push(t,"4a891zqVb9EfIK/KONhCi4Z","UIGameOverPanel"),Object.defineProperty(o,"__esModule",{value:!0});var z=e("../Tools/FYUtility"),W=e("../Tools/FYMessenger"),q=e("../Tools/FYSDKMgr"),j=e("../Tools/FYUtility"),h=e("../Game/GetInfo"),X=e("../Common/E"),Z=e("../Game/RoleMgr"),a=e("../Tools/FYBaseUIPanel"),Q=e("../Tools/FYUIMgr"),$=e("../Tools/FYGlobalVarMgr"),ee=e("../Tools/EffectMgr"),te=e("../Game/RoleConfig"),oe=e("../Common/FYUserDataMgr"),n=e("../Game/TipsMgr"),i=cc._decorator,s=i.ccclass,r=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score2=null,e.maxScore=null,e.labGold=null,e.showHigh=null,e.fxBlink=null,e.fxEffectParent=null,e.nodeTipsNormal=null,e.nodeTipsLimit=null,e.btnRestart=null,e.btnShare=null,e.btnEnd=null,e.btnAssist=null,e.btnDailyBack=null,e.sprBtnDailyNext=null,e.sprDailyNext=null,e.bg=null,e.nodeMask=null,e.nodeTimerGrid=null,e.nodeTimerItem=null,e.scorePanel=null,e.dailyPanel=null,e.sprSuccessBgWin=null,e.sprSuccessBgLose=null,e.nodeStarReward=null,e.nodeGameOverShareTips=null,e.nodeGameOverShareTips2=null,e.nodeRoleLoad=null,e.labRolePoint=null,e.labRoleGold=null,e.labRemainGold=null,e.labDailyWinGold=null,e.btnAdsGetTips=null,e.btnShareGetTips=null,e.btnGoldGetTips=null,e._dailyType=null,e._bUpdateSubDomainCanvas=!1,e.bClickShare=!1,e}return __extends(e,t),e.prototype.onShow=function(e,t){console.log("open game over panel!");var o=t[0],a=t[1],n=t[2],i=t[3],s=t[4],r=t[5],l=t[6];this.initUI(o,a,n,i,s,r,l)},e.prototype.initUI=function(e,t,o,a,n,i,s){void 0===i&&(i=null),void 0===s&&(s=null),this._dailyType=i,this._curGameMode=e,this.bClickShare=!1;var r=q.default.Instance.loadLocalData(X.E.DataKey.userRoleId),l=Z.default.Instance.getRoleInfoByRoleType(r).point;null==l&&(l=0);var c=Math.floor(t*l/100);console.log("this._curGameMode"+this._curGameMode,t,c);var d=t+c;this.btnEnd.node.active=!0,this.nodeGameOverShareTips.active=!1,this.nodeGameOverShareTips2.active=!1,null!=o&&(o+=c,this.maxScore.string=o.toString()),this.score2.string=t.toString();var u=this,p=0,h=Math.ceil(c/20),f=function(){c<=(p+=h)&&(p=c,u.unschedule(f)),u.score2.string=(p+t).toString()};this.unschedule(f),this.schedule(f,.05,20);var y=q.default.Instance.loadLocalJsonData(X.E.JsonDataKey.userOwnRole),m=te.default.Instance.getRoleGoldByLevel(r,y[r]);null==m&&(m=0);var g=0,v=0,I=Math.floor(d);I<300?(g=0*(1+m/100),v=0):I<600?(g=Math.floor(10*(1+m/100)),v=10):(g=Math.floor(d/10*(1+m/100)),v=Math.floor(d/10)),this.labRoleGold.string=(g-v).toString();var T=q.default.Instance.loadLocalData(X.E.DataKey.orangeNum),S=parseInt(T)+g;if(q.default.Instance.saveLocalData(X.E.DataKey.orangeNum,S.toString()),e==X.E.GameMode.A&&q.default.Instance.androidSendEvent(X.E.ttEventName.rewardscoins,{rewardid:6}),e==X.E.GameMode.C&&q.default.Instance.androidSendEvent(X.E.ttEventName.rewardscoins,{rewardid:7}),W.default.Instance.send(X.E.MsgType.RefreshOrange),this.labGold.string="X"+g.toString(),this.showHigh.active=a){this.fxBlink.active=!0;for(var C=0;C<3;C++){var _=C;0==_&&this.scheduleOnce(function(){var e=new cc.Vec2(-76,287);ee.default.Instance.playEffect(X.E.EffectName.fxGameOverExplore,e,1,this.fxEffectParent)},0),1==_&&this.scheduleOnce(function(){var e=new cc.Vec2(-182,-17);ee.default.Instance.playEffect(X.E.EffectName.fxGameOverExplore,e,1,this.fxEffectParent)},.4),2==_&&this.scheduleOnce(function(){var e=new cc.Vec2(260,175);ee.default.Instance.playEffect(X.E.EffectName.fxGameOverExplore,e,1,this.fxEffectParent)},1.12)}}this.bg.active=!0;cc.rotateBy(8,360).repeatForever();if(this._curGameMode==X.E.GameMode.C&&n==X.E.GameOverType.kTimeLimit?(this.nodeTipsNormal.active=!1,this.nodeTipsLimit.active=!0):(this.nodeTipsNormal.active=!0,this.nodeTipsLimit.active=!1),this._curGameMode!=X.E.GameMode.E){this.scorePanel.active=!0,this.dailyPanel.active=!1,W.default.Instance.send(X.E.MsgType.PlayGameOverAudio),this.btnAssist.node.active=!1,this.btnShare.node.active=!0,this.btnDailyBack.node.active=!1,this.sprBtnDailyNext.node.active=!1,this.nodeRoleLoad.removeAllChildren();var E=Z.default.Instance.getRoleInView(r.toString()),P=(j.default.addChild(this.nodeRoleLoad,E),0);this.labRolePoint.string="0";var b=Math.ceil(c/20),D=function(){c<=(P+=b)&&(P=c,u.unschedule(D)),u.labRolePoint.string=P.toString()};this.unschedule(D),this.schedule(D,.05,20)}else{if(this.scorePanel.active=!1,this.dailyPanel.active=!0,this.btnDailyBack.node.active=a,this.sprBtnDailyNext.node.active=a,this.sprSuccessBgWin.active=a,this.sprSuccessBgLose.active=!a,this.btnAssist.node.active=!a,this.btnShare.node.active=a){0==i?(q.default.Instance.saveLocalData(X.E.DataKey.dailyNormalState,1),console.log("dailyNormalState:"+q.default.Instance.loadLocalData(X.E.DataKey.dailyNormalState))):(q.default.Instance.saveLocalData(X.E.DataKey.dailyDiffcultState,1),console.log("dailyDiffcultState:"+q.default.Instance.loadLocalData(X.E.DataKey.dailyDiffcultState))),W.default.Instance.send(X.E.MsgType.PlayGameOverAudio),this.btnEnd.node.active=!1;var M=0==this._dailyType?X.E.DataKey.dailyDiffcultState:X.E.DataKey.dailyNormalState,G=1==parseInt(q.default.Instance.loadLocalData(M)),R=G?"btnDailyNext2":"btnDailyNext";z.default.changeSpriteFrame(this.sprDailyNext,"atlas/common/common",R);var N=G?"btnGray":"btnBlue";z.default.changeSpriteFrame(this.sprBtnDailyNext,"atlas/common/common",N);var F=q.default.Instance.loadLocalData(X.E.DataKey.orangeNum),w=0;if(0==i?(this.labDailyWinGold.string="X 400",w=parseInt(F)+400):(this.labDailyWinGold.string="X 800",w=parseInt(F)+800),q.default.Instance.saveLocalData(X.E.DataKey.orangeNum,w.toString()),e==X.E.GameMode.E&&q.default.Instance.androidSendEvent(X.E.ttEventName.rewardscoins,{rewardid:8}),G)this.sprBtnDailyNext.node.getComponent(cc.Button).enabled=!1}else this.labRemainGold.string=q.default.Instance.loadLocalData(X.E.DataKey.orangeNum);if(this.nodeStarReward.active=null!=s,this.nodeTimerGrid.removeAllChildren(),null!=s){var A=s;cc.log("_seconds "+A);var k,L,U;U=Math.floor(A%60),L=Math.floor(A%3600/60),k=Math.floor(A/3600),this.nodeTimerGrid.removeAllChildren(),0!=k?(this.nodeTimerGrid.setContentSize(600,this.nodeTimerItem.getContentSize().height),this.createTimer("timeHour",k),this.createTimer("timeMinute",L)):0!=L?(this.nodeTimerGrid.setContentSize(400,this.nodeTimerItem.getContentSize().height),this.createTimer("timeMinute",L)):this.nodeTimerGrid.setContentSize(200,this.nodeTimerItem.getContentSize().height),this.createTimer("timeSecond",U)}var B=q.default.Instance.loadLocalJsonData(X.E.JsonDataKey.dailyShareGetPropTotal);if(a){var O=0==this._dailyType?B[X.E.DailyShareType.dailyNormalWin]:B[X.E.DailyShareType.dailyDiffcultWin];null!=O&&0==O&&(this.nodeGameOverShareTips2.active=!0)}else{var x=0==this._dailyType?q.default.Instance.loadLocalData(X.E.DataKey.DailyModeNFirstTime):q.default.Instance.loadLocalData(X.E.DataKey.DailyModeDFirstTime);if(0==parseInt(x))if(0==this._dailyType){null!=(Y=B[X.E.DailyShareType.dailyNormalLose])&&0==Y&&(this.nodeGameOverShareTips.active=!0)}else{var Y,K=parseInt(q.default.Instance.loadLocalJsonData(X.E.DataKey.DailyDiffcultAskHelpSteps));(null!=(Y=B[X.E.DailyShareType.dailyDiffcutLose])&&0==Y||K<2)&&(this.nodeGameOverShareTips.active=!0)}if(0==this._dailyType)if(1==q.default.Instance.loadLocalJsonData(X.E.DataKey.dailyNormalState))this.setButtonsInteratable(!1);else{K=parseInt(q.default.Instance.loadLocalJsonData(X.E.DataKey.DailyDiffcultAskHelpSteps));var H=0!=B[X.E.DailyShareType.dailyNormalLose];this.setButtonsInteratable(!H)}else if(1==q.default.Instance.loadLocalJsonData(X.E.DataKey.dailyDiffcultState))this.setButtonsInteratable(!1);else{K=parseInt(q.default.Instance.loadLocalJsonData(X.E.DataKey.DailyDiffcultAskHelpSteps)),H=0!=B[X.E.DailyShareType.dailyDiffcutLose]&&-1==K;this.setButtonsInteratable(!H)}}}q.default.Instance.ttIsTt()?q.default.Instance.ttCreateBannerAd("adunit-1daka3f0dlo54p8f3l"):q.default.Instance.androidShowAd(X.E.ttAdType.BannerAd),q.default.Instance.androidSendEvent(X.E.ttEventName.advertising,{position:8}),oe.default.Instance.addGameOverTimes();var V=q.default.Instance.loadLocalData(X.E.DataKey.FlowBackPanelShowTimes,"0");if(parseInt(V)<2){Q.default.Instance.show(X.E.UIPath.UIFlowBackTipsPanel,$.default.Instance.NodeSub);var J=parseInt(V)+1;q.default.Instance.saveLocalData(X.E.DataKey.FlowBackPanelShowTimes,J)}},e.prototype.createTimer=function(e,t){var o=j.default.addChild(this.nodeTimerGrid,this.nodeTimerItem),a=o.getChildByName("MinT").getComponent(cc.Sprite);j.default.changeSpriteFrame(a,"atlas/common/common",e),o.getChildByName("Min").getComponent(cc.Label).string=t},e.prototype.onClickRestart=function(){W.default.Instance.send(X.E.MsgType.PlayClickAudio),this._curGameMode==X.E.GameMode.E?Q.default.Instance.show(X.E.UIPath.UIGamePanel,$.default.Instance.NodeBottom,X.E.GameMode.E,!1,!1,this._dailyType):W.default.Instance.send(X.E.MsgType.StartGame,this._curGameMode,!0),Q.default.Instance.hide(X.E.UIPath.UIGameOverPanel)},e.prototype.onClickEnd=function(){console.log("onClickEnd"),W.default.Instance.send(X.E.MsgType.ActiveGameMenu,!1),Q.default.Instance.show(X.E.UIPath.UIMainPanel),Q.default.Instance.hide(X.E.UIPath.UIGameOverPanel),W.default.Instance.send(X.E.MsgType.PlayClickAudio),this._curGameMode==X.E.GameMode.C&&W.default.Instance.send(X.E.MsgType.ChangeBgAudio,"GameBg")},e.prototype.setButtonsInteratable=function(e){this.btnAdsGetTips.interactable=e,this.btnShareGetTips.interactable=e,this.btnGoldGetTips.interactable=e},e.prototype.onClickShare=function(){if(W.default.Instance.send(X.E.MsgType.PlayClickAudio),cc.sys.platform!=cc.sys.ANDROID){if(!this.bClickShare){this.bClickShare=!0;var c=this,e=["超有趣的方糖消除游戏，看看你能拿多少分？","一直被追赶，从未被超越!","手速大比拼，看看你能排第几？","来挑战我吧，超过我算我输！","我的智力已经超群，不信大可一试！"][this._curGameMode]||"",t="https://sf1-ttcdn-tos.pstatp.com/obj/developer/app/tt0d347b89921eb5a5/shareicon10ca2c0";console.log("-----------分享路径：  ",t),q.default.Instance.ttIsTt()?(q.default.Instance.ttShareAppMessage(e,t,"form="+X.E.ShareState.DailyShare+"&time="+Date.now(),function(e){console.log("-----------每日分享成功",e)}),this.scheduleOnce(function(){(function(){if(c._curGameMode!=X.E.GameMode.E);else{var e,t=!1,o=q.default.Instance.loadLocalJsonData(X.E.JsonDataKey.dailyShareGetPropTotal);if(0==c._dailyType?null!=(e=o[X.E.DailyShareType.dailyNormalWin])&&0==e&&(o[X.E.DailyShareType.dailyNormalWin]=1,t=!0):null!=(e=o[X.E.DailyShareType.dailyDiffcultWin])&&0==e&&(o[X.E.DailyShareType.dailyDiffcultWin]=1,t=!0),q.default.Instance.saveLocalJsonData(X.E.JsonDataKey.dailyShareGetPropTotal,o),console.log("-----------每日挑战分享成功,可以获得道具：",t),t){c.nodeGameOverShareTips2.active=!1;var a=new h.default,n=q.default.Instance.loadLocalJsonData(X.E.JsonDataKey.userOwnProp);a.getType=X.E.GetType.kGetProp,a.getNum=1;var i=j.default.getRangeRandom(1,X.E.getCurPropCount()),s=c.getPropTypeByIdx(i),r=n[a.propType=s],l=parseInt(r)+a.getNum;n[s]=l,oe.default.Instance.addPropRewardTimes(a.getNum),q.default.Instance.saveLocalJsonData(X.E.JsonDataKey.userOwnProp,n),Q.default.Instance.show(X.E.UIPath.UIGetMenuPanel,$.default.Instance.NodeTop,a)}}})(),c.bClickShare=!1},3)):cc.sys.platform==cc.sys.ANDROID?q.default.Instance.androidShare(X.E.ttSDKShareType.gameOverXuanYao):cc.sys.platform==cc.sys.IPHONE&&q.default.Instance.androidShare(X.E.ttSDKShareType.gameOverXuanYao)}}else n.default.Instance.showTips("活动暂未开启！")},e.prototype.onAndroidShareSDKCall=function(e,t,o){var a=this;if(o==X.E.ttSDKShareType.gameOverXuanYao){if(t){if(a._curGameMode!=X.E.GameMode.E);else{var n,i=!1,s=q.default.Instance.loadLocalJsonData(X.E.JsonDataKey.dailyShareGetPropTotal);if(0==a._dailyType)null!=(n=s[X.E.DailyShareType.dailyNormalWin])&&0==n&&(s[X.E.DailyShareType.dailyNormalWin]=1,i=!0);else null!=(n=s[X.E.DailyShareType.dailyDiffcultWin])&&0==n&&(s[X.E.DailyShareType.dailyDiffcultWin]=1,i=!0);if(q.default.Instance.saveLocalJsonData(X.E.JsonDataKey.dailyShareGetPropTotal,s),console.log("-----------每日挑战分享成功,可以获得道具：",i),i){a.nodeGameOverShareTips2.active=!1;var r=new h.default,l=q.default.Instance.loadLocalJsonData(X.E.JsonDataKey.userOwnProp);r.getType=X.E.GetType.kGetProp,r.getNum=1;var c=j.default.getRangeRandom(1,X.E.getCurPropCount()),d=a.getPropTypeByIdx(c),u=l[r.propType=d],p=parseInt(u)+r.getNum;l[d]=p,oe.default.Instance.addPropRewardTimes(r.getNum),q.default.Instance.saveLocalJsonData(X.E.JsonDataKey.userOwnProp,l),Q.default.Instance.show(X.E.UIPath.UIGetMenuPanel,$.default.Instance.NodeTop,r)}}q.default.Instance.androidSendEvent(X.E.ttEventName.shareaction)}a.bClickShare=!1}o==X.E.ttSDKShareType.gameOverAssist&&t&&(a.onGetDailyTips(),q.default.Instance.androidSendEvent(X.E.ttEventName.shareaction))},e.prototype.onClickAssistTips=function(){if(W.default.Instance.send(X.E.MsgType.PlayClickAudio),cc.sys.platform!=cc.sys.ANDROID){var e=this;if(cc.sys.platform==cc.sys.WECHAT_GAME){var t=q.default.Instance.Md5Pipe("res/raw-assets/resources/share/share1.png");console.log("-----------分享路径：  ",t),q.default.Instance.ttShareAppMessage("这一关实在是太难了，求大神破解之法",t,"form="+X.E.ShareState.DailyAssist+"&time="+Date.now(),function(e){console.log("-----------每日分享成功",e)}),this.scheduleOnce(function(){e.onGetDailyTips()},3)}else cc.sys.platform==cc.sys.ANDROID?q.default.Instance.androidShare(X.E.ttSDKShareType.gameOverAssist):cc.sys.platform==cc.sys.IPHONE&&q.default.Instance.androidShare(X.E.ttSDKShareType.gameOverAssist)}else n.default.Instance.showTips("活动暂未开启！")},e.prototype.onClickAdsTips=function(){if(W.default.Instance.send(X.E.MsgType.PlayClickAudio),q.default.Instance.ttIsTt()){var t=this;q.default.Instance.ttCreateRewardedVideoAd("adunit-1953ilk8a8lnc10b8l",function(e){t.btnAdsGetTips.interactable=!0,e&&(console.log("======GameOverPanelRewardVideoAd success!!!!!!!!"),t.onGetDailyTips())})}else{if(!this.btnAdsGetTips.interactable)return;this.btnAdsGetTips.interactable=!1,q.default.Instance.androidShowAd(X.E.ttAdType.GameOverPanelRewardVideoAd),q.default.Instance.androidSendEvent(X.E.ttEventName.advertising,{position:6})}},e.prototype.onAndroidSDKCall=function(e,t,o){o==X.E.ttAdType.GameOverPanelRewardVideoAd&&(this.btnAdsGetTips.interactable=!0,t&&(console.log("======GameOverPanelRewardVideoAd success!!!!!!!!"),this.onGetDailyTips()))},e.prototype.onClickGoldTips=function(){var e=q.default.Instance.loadLocalData(X.E.DataKey.orangeNum);if(null!=e&&0!=e)if(e<200)Q.default.Instance.show(X.E.UIPath.UITipsPanel,$.default.Instance.NodeTop,function(){Q.default.Instance.hide(X.E.UIPath.UITipsPanel)}.bind(this));else{var t=parseInt(e)-200;q.default.Instance.saveLocalData(X.E.DataKey.orangeNum,t.toString()),q.default.Instance.androidSendEvent(X.E.ttEventName.dealcoins,{dealid:6}),W.default.Instance.send(X.E.MsgType.RefreshOrange),this.onGetDailyTips(),this.labRemainGold.string=q.default.Instance.loadLocalData(X.E.DataKey.orangeNum)}else Q.default.Instance.show(X.E.UIPath.UITipsPanel,$.default.Instance.NodeTop,function(){Q.default.Instance.hide(X.E.UIPath.UITipsPanel)}.bind(this))},e.prototype.onGetDailyTips=function(){var e=!1,t=q.default.Instance.loadLocalJsonData(X.E.JsonDataKey.dailyShareGetPropTotal);if(0==this._dailyType){null!=(o=t[X.E.DailyShareType.dailyNormalLose])&&0==o&&(t[X.E.DailyShareType.dailyNormalLose]=1,e=!0,q.default.Instance.saveLocalJsonData(X.E.JsonDataKey.dailyShareGetPropTotal,t))}else{var o;null!=(o=t[X.E.DailyShareType.dailyDiffcutLose])&&0==o&&(t[X.E.DailyShareType.dailyDiffcutLose]=1,e=!0,q.default.Instance.saveLocalJsonData(X.E.JsonDataKey.dailyShareGetPropTotal,t));var a=parseInt(q.default.Instance.loadLocalJsonData(X.E.DataKey.DailyDiffcultAskHelpSteps));2<=++a&&(a=-1),q.default.Instance.saveLocalJsonData(X.E.DataKey.DailyDiffcultAskHelpSteps,a.toString())}console.log("-----------每日挑战求助成功,可以获得提示：",e),Q.default.Instance.show(X.E.UIPath.UIDailyTipsPanel,$.default.Instance.NodeTop),this.setButtonsInteratable(!1)},e.prototype.getPropTypeByIdx=function(e){var t=null;switch(e){case 1:t=X.E.PropType.kHammer;break;case 2:t=X.E.PropType.kSuperStar}return t},e.prototype.onClickMask=function(){},e.prototype.onClickBackToDailyMenu=function(){W.default.Instance.send(X.E.MsgType.ActiveGameMenu,!1),Q.default.Instance.show(X.E.UIPath.UIMainPanel),Q.default.Instance.hide(X.E.UIPath.UIGameOverPanel),Q.default.Instance.show(X.E.UIPath.UISelectDailyPanel,$.default.Instance.NodeTop,this._dailyType),W.default.Instance.send(X.E.MsgType.PlayClickAudio)},e.prototype.onClickNextToGameE=function(){Q.default.Instance.hide(X.E.UIPath.UIGameOverPanel);var e=0==this._dailyType?1:0;Q.default.Instance.show(X.E.UIPath.UIGamePanel,$.default.Instance.NodeBottom,X.E.GameMode.E,!1,!1,e),W.default.Instance.send(X.E.MsgType.PlayClickAudio)},e.prototype.addListener=function(){t.prototype.addListener.call(this),this.btnShare.node.on(cc.Node.EventType.TOUCH_END,this.onClickShare,this),this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this),this.nodeMask.on(cc.Node.EventType.MOUSE_MOVE,this.onClickMask,this),W.default.Instance.add(X.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this),W.default.Instance.add(X.E.MsgType.OnAndroidShareSDKCallback,this.onAndroidShareSDKCall,this)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this),this.btnShare.node.off(cc.Node.EventType.TOUCH_END,this.onClickShare,this),this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this),this.nodeMask.off(cc.Node.EventType.MOUSE_MOVE,this.onClickMask,this),W.default.Instance.remove(X.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this),W.default.Instance.remove(X.E.MsgType.OnAndroidShareSDKCallback,this.onAndroidShareSDKCall,this)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),W.default.Instance.send(X.E.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnRestart.node.scale=1,this.btnAssist.node.scale=1,this.btnShare.node.scale=1,this.btnEnd.node.scale=1,this.btnDailyBack.node.scale=1,this.btnAdsGetTips.node.scale=1,this.sprBtnDailyNext.node.scale=1,this.fxBlink.active=!1,this.fxEffectParent.removeAllChildren(),W.default.Instance.send(X.E.MsgType.RefreshGameClubBtn,!0),cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onCloseBanner","(Ljava/lang/String;)V","0"):cc.sys.platform==cc.sys.IPHONE&&jsb.reflection.callStaticMethod("AppAdMgr","closeBanner")},e.prototype.start=function(){},__decorate([r(cc.Label)],e.prototype,"score2",void 0),__decorate([r(cc.Label)],e.prototype,"maxScore",void 0),__decorate([r(cc.Label)],e.prototype,"labGold",void 0),__decorate([r(cc.Node)],e.prototype,"showHigh",void 0),__decorate([r(cc.Node)],e.prototype,"fxBlink",void 0),__decorate([r(cc.Node)],e.prototype,"fxEffectParent",void 0),__decorate([r(cc.Node)],e.prototype,"nodeTipsNormal",void 0),__decorate([r(cc.Node)],e.prototype,"nodeTipsLimit",void 0),__decorate([r(cc.Button)],e.prototype,"btnRestart",void 0),__decorate([r(cc.Button)],e.prototype,"btnShare",void 0),__decorate([r(cc.Button)],e.prototype,"btnEnd",void 0),__decorate([r(cc.Button)],e.prototype,"btnAssist",void 0),__decorate([r(cc.Button)],e.prototype,"btnDailyBack",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprBtnDailyNext",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprDailyNext",void 0),__decorate([r(cc.Node)],e.prototype,"bg",void 0),__decorate([r(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([r(cc.Node)],e.prototype,"nodeTimerGrid",void 0),__decorate([r(cc.Node)],e.prototype,"nodeTimerItem",void 0),__decorate([r(cc.Node)],e.prototype,"scorePanel",void 0),__decorate([r(cc.Node)],e.prototype,"dailyPanel",void 0),__decorate([r(cc.Node)],e.prototype,"sprSuccessBgWin",void 0),__decorate([r(cc.Node)],e.prototype,"sprSuccessBgLose",void 0),__decorate([r(cc.Node)],e.prototype,"nodeStarReward",void 0),__decorate([r(cc.Node)],e.prototype,"nodeGameOverShareTips",void 0),__decorate([r(cc.Node)],e.prototype,"nodeGameOverShareTips2",void 0),__decorate([r(cc.Node)],e.prototype,"nodeRoleLoad",void 0),__decorate([r(cc.Label)],e.prototype,"labRolePoint",void 0),__decorate([r(cc.Label)],e.prototype,"labRoleGold",void 0),__decorate([r(cc.Label)],e.prototype,"labRemainGold",void 0),__decorate([r(cc.Label)],e.prototype,"labDailyWinGold",void 0),__decorate([r(cc.Button)],e.prototype,"btnAdsGetTips",void 0),__decorate([r(cc.Button)],e.prototype,"btnShareGetTips",void 0),__decorate([r(cc.Button)],e.prototype,"btnGoldGetTips",void 0),e=__decorate([s],e)}(a.default);o.default=l,cc._RF.pop()},{"../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Game/GetInfo":"GetInfo","../Game/RoleConfig":"RoleConfig","../Game/RoleMgr":"RoleMgr","../Game/TipsMgr":"TipsMgr","../Tools/EffectMgr":"EffectMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIGamePanel:[function(e,t,o){"use strict";cc._RF.push(t,"af292iZkvxImb8g29+oybeG","UIGamePanel"),Object.defineProperty(o,"__esModule",{value:!0});var I=e("../Game/CubeItem"),a=e("../Game/CubeContainer"),T=e("../Tools/FYMessenger"),q=e("../Tools/FYUtility"),f=e("../Game/GridItem"),j=e("../Game/RoleAnim"),n=e("../Game/GuidanceMgr"),X=e("../Tools/FYSDKMgr"),g=e("../Game/RoleConfig"),Z=e("../Common/FYUserDataMgr"),Q=e("../Tools/FYAudioCtl"),S=e("../Tools/FYGlobalVarMgr"),$=e("../Game/DailyLevelConfig"),i=e("../Game/DailyViewMgr"),ee=e("../Common/E"),v=e("../Tools/FYUIMgr"),te=e("../Tools/FYResMgr"),C=e("../Tools/EffectMgr"),oe=e("../Game/RoleMgr"),s=e("../Tools/FYBaseUIPanel"),r=e("../Game/TipsMgr"),l=cc._decorator,c=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animShakeAnim=null,e.nodeTop=null,e.nodeCenter=null,e.nodeBottom=null,e.sPutContainer=null,e.sEffectContainer=null,e.sGetContainer=null,e.nodeItem=null,e.nodePoint=null,e.sprSurpassFriend=null,e.nodeLoadRole=null,e.nodeRoleEffectPoint=null,e.FX_SkillCanSkillIdle=null,e.FX_RoleCanSkillFire=null,e.FX_RoleCanSkillFire2=null,e.FX_curLeftBorderEffect=null,e.FX_curRightBorderEffect=null,e.FX_nodeRoleFireRotateItem=null,e.btnAdsGetTips=null,e.nodeDailyContainer=null,e.nodeDailyView=null,e.nodeDailyViewMask=null,e.btnDailyViewLeft=null,e.btnDailyViewRight=null,e.nodeDailyStepRemain=null,e.nodeDailyAnswer=null,e.nodeDailyShareTips=null,e.arrayAnswerPoint={},e.arrayAnswerPos=[],e.dictAnswerPos={},e.btnBack=null,e.score=null,e.combo=null,e.maxScore=null,e.nodeRoleSkillCol=null,e.comboAni=null,e.sprComboAni=null,e.pointAni=null,e.animReadyGo=null,e.timeBg=null,e.timeLimitFiveSecond=null,e.sprEnergy=null,e.propContainer=null,e.goGuidaceNode=null,e.animGuidance=null,e.sprGuidance=null,e.nodeFinger=null,e.nodePropGuide=null,e.bInGuidance=!1,e.bInGuidanceExtra=!1,e.nExtraGuideStep=0,e._currGuidaceIdx=-1,e.nodeMaskBg=null,e.goTimerNode=null,e.goAddTimeLizi=null,e.sprFxAddTimeNode=null,e.sprFxAddTimeNode2=null,e.sprFxBlinkTimeNode=null,e.labTimer=null,e.goTimerNode2=null,e.sprTimeNode2_Fg=null,e.nodeTime2_Effect=null,e.nodeTimeEffectOffset=10,e.dictPropUseInGames={},e.dictPropShareInGames={},e.maskUseProp=null,e.bUsingProp=!1,e.btnPropHammer=null,e.btnPropSuperStar=null,e.btnPropUndoOperate=null,e.labHammerNum=null,e.labSuperStarNum=null,e.labUndoOperateNum=null,e.nodeHammerAdd=null,e.nodeSuperStarAdd=null,e.nodeUndoOperateAdd=null,e.actionFirstUseSuperStar=null,e.animPropHammer=null,e.bShowCanUseProp=!1,e.nodePropUseTips=null,e.nodeDangerTips=null,e.nodeNewColorTips=null,e.nodeLongTimeTips=null,e.sprNewColor=null,e.labLevelTopTips=null,e.labTargetTopTips=null,e._nCurLevelTarget=0,e.animLevelArrive=null,e.labLevelArriveTips=null,e.labTargetArriveTips=null,e.animGameOver=null,e.sprOverResult=null,e.roleAnim=null,e._curMode=ee.E.GameMode.A,e._bStartTimeGame=!1,e._bPauseTimeGame=!1,e._addTime=30,e._remainTime=30,e.bBlinkInFiveSecond=!1,e._totalTime=30,e._combos=1,e._nowPoint=0,e._nowPointInRole=0,e._nRow=3,e._nColumn=3,e._nRandomCube=3,e._nRandomCubeTimes=0,e._nGetRow=1,e._nGetColumn=3,e._nStartEnergy=137,e._nGetPointRatio=10,e._nEveryLevelTarget=800,e._nCurrLastPoints=0,e._nCurrTotalPoints=0,e._nCurrEachPoints=0,e._nAddPoint=0,e._arrCubeType=[],e._arrCubeType1=[],e._arrCubeType2=["0_0","0_1","1_0","1_1","2_0","2_1","3_0","3_1","4_0","4_1","5_0","5_1","6_0","6_1","7_0","7_1"],e._arrayGetGridIndex=[0,1,2],e._arrayDailyRandomConfig={},e._currDailyRandomConfigIdx=-1,e._maxDailyRandomConfigIdx=-1,e._arrayDailyAnswerConfig={},e._currDailyViewConfigIdx=-1,e._dailyType=null,e._dailyNChallengeTime=-1,e._dailyDChallengeTime=-1,e._gameCurStepsInfo={},e._gameLastStepsInfo={},e.shareMode=null,e.shareId=null,e.playingBgName="",e._StartGaming=!1,e._EndDailyTimer=!1,e._bPlayingRoleShow=!1,e._bEffectSwitch=!0,e._bSurviveLimit=!1,e._bTestRestore=!1,e._bStarUpdateSub=!1,e.nodeBg=null,e.nodeScoreBg=null,e.btnRecordVideo=null,e.bIsRecordingVideo=!1,e.bIsBackGround=!1,e.curVideoPath="",e._nCurrFillCount=0,e._listCleanCubes=[],e._listRestoreCleanCubes=[],e.bPlayingHammer=!1,e}return __extends(e,t),e.prototype.createPoint=function(){this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint)},e.prototype.getRandomTypeByRandomTimes=function(e){var t=0;if(1<=e&&e<=2){if(t=this._arrCubeType.length-19,2==e){this.nodeNewColorTips.active=!0;var o=te.default.Instance.loadSpriteFrame("cube_2_0");this.sprNewColor.spriteFrame=o}}else if(e<=5)if(t=this._arrCubeType.length-16,5==e){this.nodeNewColorTips.active=!0;o=te.default.Instance.loadSpriteFrame("cube_3_0");this.sprNewColor.spriteFrame=o}else 3==e&&(this.nodeNewColorTips.active=!1);else if(e<=10)if(t=this._arrCubeType.length-13,10==e){this.nodeNewColorTips.active=!0;o=te.default.Instance.loadSpriteFrame("cube_4_0");this.sprNewColor.spriteFrame=o}else 6==e&&(this.nodeNewColorTips.active=!1);else if(e<=17)if(t=this._arrCubeType.length-10,17==e){this.nodeNewColorTips.active=!0;o=te.default.Instance.loadSpriteFrame("cube_5_0");this.sprNewColor.spriteFrame=o}else 11==e&&(this.nodeNewColorTips.active=!1);else if(e<=26)if(t=this._arrCubeType.length-7,26==e){this.nodeNewColorTips.active=!0;o=te.default.Instance.loadSpriteFrame("cube_6_0");this.sprNewColor.spriteFrame=o}else 18==e&&(this.nodeNewColorTips.active=!1);else if(e<=35)if(t=this._arrCubeType.length-4,35==e){this.nodeNewColorTips.active=!0;o=te.default.Instance.loadSpriteFrame("cube_7_0");this.sprNewColor.spriteFrame=o}else 27==e&&(this.nodeNewColorTips.active=!1);else t=this._arrCubeType.length-1,36==e&&(this.nodeNewColorTips.active=!1);return t},e.prototype.getRandomTypeByRandomTimesInModeAdvance=function(e){return 1<=e&&e<=5?this._arrCubeType.length-19:e<=10?this._arrCubeType.length-16:e<=20?this._arrCubeType.length-13:e<=30?this._arrCubeType.length-10:e<=45?this._arrCubeType.length-7:this._arrCubeType.length-4},e.prototype.getRandomTypeByRandomTimesInModeSingle=function(e){return 1<=e&&e<=9?this._arrCubeType.length-19:e<=18?this._arrCubeType.length-16:e<=45?this._arrCubeType.length-13:e<=72?this._arrCubeType.length-10:e<=105?this._arrCubeType.length-7:e<=150?this._arrCubeType.length-4:this._arrCubeType.length-1},e.prototype.randomCube=function(h){if(void 0===h&&(h=!1),0==this.sGetContainer.getCubeNum()){this._nRandomCubeTimes++;var f=3==this._arrayGetGridIndex.length?this.getRandomTypeByRandomTimes(this._nRandomCubeTimes):this.getRandomTypeByRandomTimesInModeSingle(this._nRandomCubeTimes);this._curMode==ee.E.GameMode.B&&(f=this.getRandomTypeByRandomTimesInModeAdvance(this._nRandomCubeTimes));var y=this.sPutContainer.getGridCanPutCubeSizeGroup(ee.E.CubeItemSize.Length);cc.log("----------------dictCanPutCubeSizeGroup----------------:"+y);var e=q.default.getRandomValueDif(0,f,3==this._arrayGetGridIndex.length?3:1);this.sGetContainer.createGrid(this._nGetRow,this._arrayGetGridIndex.length,this.nodePoint,this._arrayGetGridIndex,ee.E.GridState.GetPanel),this.nodeRoleSkillCol.active&&T.default.Instance.send(ee.E.MsgType.EnableGridMove,!1);for(var m=S.default.Instance.WinSize.width/4,g=0,t=function(e){var t=q.default.getRangeRandom(0,y.length-1),o=parseInt(y[t]);if(1==o||3==o||5==o){var a=q.default.getRangeRandom(0,f),n=1==o?ee.E.CubeItemSize.Small:3==o?ee.E.CubeItemSize.Normal:ee.E.CubeItemSize.Big;v.createNodeItem(e,a,n,h)}else if(9==o){cc.log("===================all=======================");var i=q.default.getRangeRandom(0,f),s=v._arrCubeType[i].split("_");a=Number(s[0]),n=Number(s[1]);g>v._arrayGetGridIndex.length-1&&(g-=v._arrayGetGridIndex.length);var r=null;(r=0<Z.default.Instance.cubePool.size()?Z.default.Instance.cubePool.get():cc.instantiate(v.nodeItem)).parent=v.sGetContainer.node;var l=r.getComponent(I.default);v._curMode==ee.E.GameMode.B?l.node.scale=.8:l.node.scale=1,l.init(a,n,new cc.Vec2((g+1)*m-S.default.Instance.WinSize.width/2,0)),r.active=!0,h&&(l.playUsePropAnimShow(),v.scheduleOnce(function(){var e=this.sEffectContainer.node.convertToNodeSpaceAR(r.convertToWorldSpaceAR(new cc.Vec2(0,0)));C.default.Instance.playEffect(ee.E.EffectName.fxPropChange,e,5)},.06)),v.sGetContainer.putCubeByIndex(g,l)||Z.default.Instance.cubePool.put(l.node)}else if(4==o){var c=q.default.getRangeRandom(0,f),d=ee.E.CubeItemSize.Small;v.createNodeItem(e,c,d,h);var u=q.default.getRangeRandom(0,f),p=ee.E.CubeItemSize.Normal;v.createNodeItem(e,u,p,h)}else if(6==o){c=q.default.getRangeRandom(0,f),d=ee.E.CubeItemSize.Small;v.createNodeItem(e,c,d,h);u=q.default.getRangeRandom(0,f),p=ee.E.CubeItemSize.Big;v.createNodeItem(e,u,p,h)}else if(8==o){c=q.default.getRangeRandom(0,f),d=ee.E.CubeItemSize.Normal;v.createNodeItem(e,c,d,h);u=q.default.getRangeRandom(0,f),p=ee.E.CubeItemSize.Big;v.createNodeItem(e,u,p,h)}},v=this,o=0;o<e.length;o++,g++)t(o)}},e.prototype.createNodeItem=function(e,t,o,a){void 0===a&&(a=!1);var n=this._arrCubeType[t].split("_"),i=Number(n[0]),s=S.default.Instance.WinSize.width/4,r=null;(r=0<Z.default.Instance.cubePool.size()?Z.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sGetContainer.node;var l=r.getComponent(I.default);this._curMode==ee.E.GameMode.B?l.node.scale=.8:l.node.scale=1,l.init(i,o,new cc.Vec2((e+1)*s-S.default.Instance.WinSize.width/2,0)),r.active=!0,a&&(l.playUsePropAnimShow(),this.scheduleOnce(function(){var e=this.sEffectContainer.node.convertToNodeSpaceAR(r.convertToWorldSpaceAR(new cc.Vec2(0,0)));C.default.Instance.playEffect(ee.E.EffectName.fxPropChange,e,5)},.06)),this.sGetContainer.putCubeByIndex(e,l)||Z.default.Instance.cubePool.put(l.node)},e.prototype.createLevelByConfig=function(e){for(var t in e){var o=e[t],a=Math.floor(parseInt(t)/3),n=parseInt(t)%3,i=parseInt(o);cc.log("gridKey:"+a+" cubeKey:"+n+" color:"+i);var s=this.sPutContainer.getGridByIndex(a),r=this.sPutContainer.node.convertToNodeSpaceAR(s.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),l=Number(i),c=Number(n),d=null;(d=0<Z.default.Instance.cubePool.size()?Z.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sPutContainer.node;var u=d.getComponent(I.default);this._curMode==ee.E.GameMode.B?u.node.scale=.8:u.node.scale=1,u.init(l,c,new cc.Vec2(r.x,r.y)),d.active=!0;this.sPutContainer.putCubeByIndex(a,u)}},e.prototype.createCubeByConfig=function(e){this.sGetContainer.createGrid(this._nGetRow,this._arrayGetGridIndex.length,this.nodePoint,this._arrayGetGridIndex,ee.E.GridState.GetPanel);var t=S.default.Instance.WinSize.width/4,o=0;for(var a in e){o++;var n=e[a],i=Math.floor(parseInt(a)/3),s=parseInt(a)%3,r=parseInt(n),l=Number(r),c=Number(s);o>this._arrayGetGridIndex.length-1&&(o-=this._arrayGetGridIndex.length);var d=null;(d=0<Z.default.Instance.cubePool.size()?Z.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sGetContainer.node;var u=d.getComponent(I.default);this._curMode==ee.E.GameMode.B?u.node.scale=.8:u.node.scale=1,u.init(l,c,new cc.Vec2((i+1)*t-S.default.Instance.WinSize.width/2,0)),d.active=!0,this.sGetContainer.putCubeByIndex(i,u)||Z.default.Instance.cubePool.put(u.node)}},e.prototype.createAnswerByConfig=function(e){this.nodeDailyAnswer.active=!0;var t=this.nodeDailyAnswer.getChildByName("point");for(var o in e){0;var a=e[o].split("_"),n="lab"+(parseInt(o)+1).toString();this.nodeDailyAnswer.getChildByName(n).getComponent(cc.Label).string=a[0].toString();var i=parseInt(o),s=this.sGetContainer.getGridByIndex(i),r=this.sEffectContainer.node.convertToNodeSpaceAR(s.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),l=parseInt(a[1]),c=this.sPutContainer.getGridByIndex(l),d=this.sEffectContainer.node.convertToNodeSpaceAR(c.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.arrayAnswerPos[parseInt(a[0])-1]=i+"_"+l,this.dictAnswerPos[i]=i+"_"+l,this.arrayAnswerPoint[i]=[];for(var u=0;u<=10;u++){var p=r.x+(d.x-r.x)/10*u,h=r.y+(d.y-r.y)/10*u,f=q.default.addChild(this.sEffectContainer.node,t);f.position=new cc.Vec2(p,h),this.arrayAnswerPoint[i].push(f)}}},e.prototype.onHideGame=function(e){this.bIsBackGround||(this.bIsBackGround=!0,cc.log("切换后台",e),T.default.Instance.send(ee.E.MsgType.GameHideOrShow,!1))},e.prototype.onShowGame=function(e){this.bIsBackGround&&(this.bIsBackGround=!1,cc.log("切换前台",e),T.default.Instance.send(ee.E.MsgType.GameHideOrShow,!0))},e.prototype.onClickMask=function(){if(cc.log("--------------------------Click Mask Full !!!!!!!!!!!!!!!!!!!!"),this.bInGuidance&&T.default.Instance.send(ee.E.MsgType.GuidanceCloseAnim),this.bInGuidanceExtra)if(1==this.nExtraGuideStep){this.nodePropGuide.active=!0;var e=this.node.convertToNodeSpaceAR(this.btnPropSuperStar.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.nodePropGuide.position=e;var t=cc.scaleTo(.5,1.2),o=cc.scaleTo(.5,.8),a=cc.sequence(t,o).repeatForever();(n=this.nodePropGuide.getChildByName("sprFinger")).stopAllActions(),n.runAction(a),this.nodePropGuide.getChildByName("sprBg1").getComponent(cc.Sprite).spriteFrame=te.default.Instance.loadSpriteFrame("guidance_prop2"),this.nExtraGuideStep=2,this.nodeMaskBg.active=!0}else if(2==this.nExtraGuideStep){this.nodePropGuide.active=!0;e=this.node.convertToNodeSpaceAR(this.btnPropUndoOperate.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.nodePropGuide.position=e;var n;t=cc.scaleTo(.5,1.2),o=cc.scaleTo(.5,.8),a=cc.sequence(t,o).repeatForever();(n=this.nodePropGuide.getChildByName("sprFinger")).stopAllActions(),n.runAction(a),this.nodePropGuide.getChildByName("sprBg1").getComponent(cc.Sprite).spriteFrame=te.default.Instance.loadSpriteFrame("guidance_prop3"),this.nExtraGuideStep=3,this.nodeMaskBg.active=!0}else this.bInGuidanceExtra=!1,this.nodePropGuide.active=!1,this.nodeMaskBg.active=!1},e.prototype.onClickAdsTips=function(){if(T.default.Instance.send(ee.E.MsgType.PlayClickAudio),X.default.Instance.ttIsTt())r.default.Instance.showTips("广告暂未开启！");else{if(!this.btnAdsGetTips.interactable)return;this.btnAdsGetTips.interactable=!1,X.default.Instance.androidShowAd(ee.E.ttAdType.GameOverPanelRewardVideoAd),X.default.Instance.androidSendEvent(ee.E.ttEventName.advertising,{position:6})}},e.prototype.onAndroidSDKCall=function(e,t,o){o==ee.E.ttAdType.GameOverPanelRewardVideoAd&&(this.btnAdsGetTips.interactable=!0,t&&(console.log("======GameOverPanelRewardVideoAd success!!!!!!!!"),this.onGetDailyTips()))},e.prototype.onGetDailyTips=function(){var e=!1,t=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.dailyShareGetPropTotal);if(0==this._dailyType){null!=(o=t[ee.E.DailyShareType.dailyNormalLose])&&0==o&&(t[ee.E.DailyShareType.dailyNormalLose]=1,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.dailyShareGetPropTotal,t),e=!0)}else{var o;null!=(o=t[ee.E.DailyShareType.dailyDiffcutLose])&&0==o&&(t[ee.E.DailyShareType.dailyDiffcutLose]=1,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.dailyShareGetPropTotal,t),e=!0);var a=parseInt(X.default.Instance.loadLocalJsonData(ee.E.DataKey.DailyDiffcultAskHelpSteps));2<=++a?a=-1:e=!0,X.default.Instance.saveLocalJsonData(ee.E.DataKey.DailyDiffcultAskHelpSteps,a.toString())}if(console.log("-----------每日挑战求助成功,可以获得提示：",e),e){q.default.getMonthWeek();var n=new Date,i=n.getMonth()+1,s=n.getDate();i.toString(),s.toString();v.default.Instance.show(ee.E.UIPath.UIGamePanel,S.default.Instance.NodeBottom,ee.E.GameMode.E,!1,!1,this._dailyType)}this.btnAdsGetTips.interactable=!1},e.prototype.onClickMaskDailyView=function(){this.sGetContainer.node.active=!0},e.prototype.onClickMaskUseProp=function(){console.log("================onClickMaskUseProp======================"),this.bInGuidance||(this.bUsingProp&&(this.maskUseProp.active=!1),this.bUsingProp=!1,this._bPauseTimeGame=!1,T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0),T.default.Instance.send(ee.E.MsgType.EnableGridPropUse,!1))},e.prototype.onClickRecordVideo=function(){var t=this,o=this,a=this.btnRecordVideo.node.getChildByName("Icon").getComponent(cc.Sprite),n=this.btnRecordVideo.node.getChildByName("txtRecord").getComponent(cc.Sprite);if(this.bIsRecordingVideo)""!=this.curVideoPath?tt.shareVideo({videoPath:this.curVideoPath,success:function(){a.spriteFrame=te.default.Instance.loadSpriteFrame("record1"),n.spriteFrame=te.default.Instance.loadSpriteFrame("recordtxt1"),o.bIsRecordingVideo=!1,console.log("分享视频成功！")},fail:function(e){a.spriteFrame=te.default.Instance.loadSpriteFrame("record1"),n.spriteFrame=te.default.Instance.loadSpriteFrame("recordtxt1"),o.bIsRecordingVideo=!1,console.log("分享视频失败！",e),r.default.Instance.showTips("分享的视频不能小于3秒！")}}):(console.log("onClickRecordVideo stop"),(e=tt.getGameRecorderManager()).onStop(function(e){console.log("res.videoPath:",e),t.curVideoPath=e.videoPath,tt.shareVideo({videoPath:e.videoPath,success:function(){a.spriteFrame=te.default.Instance.loadSpriteFrame("record1"),n.spriteFrame=te.default.Instance.loadSpriteFrame("recordtxt1"),o.bIsRecordingVideo=!1,console.log("分享视频成功！")},fail:function(e){a.spriteFrame=te.default.Instance.loadSpriteFrame("record1"),n.spriteFrame=te.default.Instance.loadSpriteFrame("recordtxt1"),o.bIsRecordingVideo=!1,console.log("分享视频失败！",e),r.default.Instance.showTips("分享的视频不能小于3秒！")}})}),e.stop());else if(a.spriteFrame=te.default.Instance.loadSpriteFrame("record2"),n.spriteFrame=te.default.Instance.loadSpriteFrame("recordtxt2"),X.default.Instance.ttIsTt()){this.curVideoPath="",this.bIsRecordingVideo=!0;var e=tt.getGameRecorderManager();console.log("onClickRecordVideo start"),e.onStop(function(e){console.log("res.videoPath:",e),t.curVideoPath=e.videoPath}),e.start({microphoneEnabled:!0})}},e.prototype.onClickBack=function(){(!this.bUsingProp&&!this.nodeRoleSkillCol.active||this._bTestRestore)&&(this._bPauseTimeGame=!0,v.default.Instance.show(ee.E.UIPath.UIPausePanel),this._bTestRestore&&this.saveGameSceneInfo(!0))},e.prototype.onMsgResumeGame=function(){this._bPauseTimeGame=!1,T.default.Instance.send(ee.E.MsgType.PlayClickAudio)},e.prototype.onMsgReStartGame=function(){if(null!=this.roleAnim){var e=X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId,"1");oe.default.Instance.putRole(e.toString(),this.roleAnim.node),this.roleAnim=null}this._curMode==ee.E.GameMode.E?v.default.Instance.show(ee.E.UIPath.UIGamePanel,S.default.Instance.NodeBottom,ee.E.GameMode.E,!1,!1,this._dailyType):T.default.Instance.send(ee.E.MsgType.StartGame,this._curMode,!0),T.default.Instance.send(ee.E.MsgType.PlayClickAudio)},e.prototype.onMsgkResult=function(){this._StartGaming=!1,T.default.Instance.send(ee.E.MsgType.ActiveGameMenu,!1),v.default.Instance.show(ee.E.UIPath.UIMainPanel),v.default.Instance.hide(ee.E.UIPath.UIGameOverPanel),T.default.Instance.send(ee.E.MsgType.PlayClickAudio)},e.prototype.onClickUseHammer=function(){if(this._bPlayingRoleShow)console.log("================PlayingRoleShow======================");else if(this.bUsingProp)console.log("================onUsingProp======================");else if(this._bPauseTimeGame)console.log("================_bPauseTimeGame======================");else{console.log("================onClickUseHammer======================");var e=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnProp),t=this.dictPropUseInGames[ee.E.PropType.kHammer],o=this.dictPropShareInGames[ee.E.PropType.kHammer];if(null==e||null==e[ee.E.PropType.kHammer]||0==parseInt(e[ee.E.PropType.kHammer])){var a=this;a._bPauseTimeGame=!0,v.default.Instance.show(ee.E.UIPath.UIPropGetPanel,S.default.Instance.NodeCenter,this._curMode,ee.E.PropType.kHammer,t,o,function(){a._bPauseTimeGame=!1}.bind(this))}else{if(t<g.default.Instance.getPropInfoByPropId(ee.E.PropType.kHammer).limit)this.onUseProp(ee.E.PropType.kHammer);else{this.bInGuidance=!0,this.goGuidaceNode.active=!0,this.animGuidance.PlayBegin();q.default.changeSpriteFrame(this.sprGuidance,"atlas/common/common","guidance_propLimit"),this.nodeMaskBg.active=!0}}}},e.prototype.onClickUseSuperStar=function(){if(this._bPlayingRoleShow)console.log("================PlayingRoleShow======================");else if(this.bUsingProp)console.log("================onUsingProp======================");else if(this._bPauseTimeGame)console.log("================_bPauseTimeGame======================");else{console.log("================onClickUseSuperStar======================");var e=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnProp),t=this.dictPropUseInGames[ee.E.PropType.kSuperStar],o=this.dictPropShareInGames[ee.E.PropType.kSuperStar];if(null==e||null==e[ee.E.PropType.kSuperStar]||0==parseInt(e[ee.E.PropType.kSuperStar])){var a=this;a._bPauseTimeGame=!0,v.default.Instance.show(ee.E.UIPath.UIPropGetPanel,S.default.Instance.NodeCenter,this._curMode,ee.E.PropType.kSuperStar,t,o,function(){a._bPauseTimeGame=!1}.bind(this))}else{if(t<g.default.Instance.getPropInfoByPropId(ee.E.PropType.kSuperStar).limit)this.onUseProp(ee.E.PropType.kSuperStar);else{this.bInGuidance=!0,this.goGuidaceNode.active=!0,this.animGuidance.PlayBegin();q.default.changeSpriteFrame(this.sprGuidance,"atlas/common/common","guidance_propLimit"),this.nodeMaskBg.active=!0}}}},e.prototype.onClickUseUndoOpetare=function(){if(this._bPlayingRoleShow)console.log("================PlayingRoleShow======================");else if(this.bUsingProp)console.log("================onUsingProp======================");else if(this._bPauseTimeGame)console.log("================_bPauseTimeGame======================");else{console.log("================onClickUseUndoOpetare======================");var e=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnProp),t=this.dictPropUseInGames[ee.E.PropType.kUndoOperate],o=this.dictPropShareInGames[ee.E.PropType.kUndoOperate];if(null==e||null==e[ee.E.PropType.kUndoOperate]||0==parseInt(e[ee.E.PropType.kUndoOperate])){var a=this;a._bPauseTimeGame=!0,v.default.Instance.show(ee.E.UIPath.UIPropGetPanel,S.default.Instance.NodeCenter,this._curMode,ee.E.PropType.kUndoOperate,t,o,function(){a._bPauseTimeGame=!1}.bind(this))}else this.onUseProp(ee.E.PropType.kUndoOperate)}},e.prototype.onClickUseSkill=function(){this.bUsingProp||this.scheduleOnce(function(){console.log("======================roleFight========================="),T.default.Instance.send(ee.E.MsgType.EnableGridMove,!1),null!=this.roleAnim&&this.roleAnim.playAnim(3),this._bEffectSwitch&&(this.FX_SkillCanSkillIdle.active=!1,this.FX_RoleCanSkillFire.active=!1,this.FX_RoleCanSkillFire2.node.active=!1,this.FX_nodeRoleFireRotateItem.stopAllActions()),this._bPauseTimeGame=!0,Q.default.Instance.playSound(ee.E.SoundType.roleSkillUse);X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId)},.5)},e.prototype.onGePoint=function(e,t,o,a){void 0===a&&(a=!1),1<o&&(t=t-o+Math.floor(o/2));var n=Math.floor((.3*t*t+10*t-2)*(o+this._combos-1));if(a&&(n=Math.floor(4*t+60)),0==t&&(n=0),this._nCurrLastPoints=this._nowPoint,this._nowPoint=this._nowPoint+n,this._nowPointInRole+=n,this._curMode!=ee.E.GameMode.E){var i=1==this._nCurLevelTarget||2==this._nCurLevelTarget?this._nEveryLevelTarget-200:this._nEveryLevelTarget;if(250<=this._nowPointInRole&&this._nowPointInRole<500)null!=this.roleAnim&&this.roleAnim.playAnim(1);else if(500<=this._nowPointInRole&&this._nowPointInRole<i)cc.log("======================roleUp2========================="),null!=this.roleAnim&&this.roleAnim.playAnim(2);else if(this._nowPointInRole>=i){if(this._nowPointInRole=this._nowPointInRole-i,this.nodeRoleSkillCol.active=!0,this._bEffectSwitch){this.FX_SkillCanSkillIdle.active=!0,this.FX_RoleCanSkillFire.active=!0,this.FX_RoleCanSkillFire2.node.active=!0,this.FX_RoleCanSkillFire2.play();var s=cc.rotateBy(2,360).repeatForever();this.FX_nodeRoleFireRotateItem.runAction(s)}this.onSkillFillGrids()}}cc.log("---------------------\x3ethis.score.string :"+this._nowPoint),0<n&&(this._nCurrTotalPoints=0,this._nAddPoint=n,this._nCurrEachPoints=Math.ceil(n/20),this.unschedule(this.onCountDownPoints),this.schedule(this.onCountDownPoints,.05,20))},e.prototype.onCountDownPoints=function(){this._nCurrTotalPoints+=this._nCurrEachPoints,this._nCurrTotalPoints>=this._nAddPoint&&(this._nCurrTotalPoints=this._nAddPoint,this.score.string=this._nowPoint.toString(),this.unschedule(this.onCountDownPoints)),this.score.string=(this._nCurrTotalPoints+this._nCurrLastPoints).toString()},e.prototype.reduceRemainTime=function(){if(this._remainTime=this._remainTime+this._addTime,this._remainTime>this._totalTime&&(this._remainTime=this._totalTime),this._curMode==ee.E.GameMode.C&&null!=this.sprFxAddTimeNode&&null!=this.sprFxAddTimeNode2){this.sprFxAddTimeNode.node.removeAllChildren(),this.sprFxAddTimeNode.node.stopAllActions(),this.sprFxAddTimeNode.node.active=!0,this.sprFxAddTimeNode.node.color=new cc.Color(255,255,255,0);q.default.addChild(this.sprFxAddTimeNode.node,this.goAddTimeLizi);var e=cc.fadeTo(.3,255),t=cc.fadeTo(.2,255),o=cc.fadeTo(.5,0),a=cc.sequence(e,t,o);this.sprFxAddTimeNode.node.runAction(a),this.sprFxAddTimeNode2.node.removeAllChildren(),this.sprFxAddTimeNode2.node.stopAllActions(),this.sprFxAddTimeNode2.node.active=!0,this.sprFxAddTimeNode2.node.color=new cc.Color(121,210,252,0);var n=cc.fadeTo(.3,187),i=cc.fadeTo(.2,187),s=cc.fadeTo(.5,0),r=cc.sequence(n,i,s);this.sprFxAddTimeNode2.node.runAction(r)}this.sprTimeNode2_Fg.node.width=this._remainTime/this._totalTime*490,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-245+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y);this._totalTime,this._remainTime;5<this._remainTime&&this.bBlinkInFiveSecond&&(this.bBlinkInFiveSecond=!1,this.timeLimitFiveSecond.active=!1,this.timeLimitFiveSecond.stopAllActions(),this.sprFxBlinkTimeNode.active=!1,this.sprFxBlinkTimeNode.stopAllActions())},e.prototype.ChangeCombSpriteByCombTimes=function(e){if(1==e)this.comboAni.node.active=!1,this.comboAni.stop("combo");else if(e<=5){var t="comb"+(e-1).toString(),o=te.default.Instance.loadSpriteFrame(t);this.sprComboAni.spriteFrame=o,4==e?Q.default.Instance.playSound(ee.E.SoundType.perfect):5==e?Q.default.Instance.playSound(ee.E.SoundType.incredible):Q.default.Instance.playSound(ee.E.SoundType.good+e-2)}else{o=te.default.Instance.loadSpriteFrame("comb5");this.sprComboAni.spriteFrame=o,Q.default.Instance.playSound(ee.E.SoundType.unbelievable)}},e.prototype.onCanGetPoint=function(e,t,o){t?(this._combos=this._combos+o,this.combo.string=this._combos.toString(),this.combo.node.active=!0,this.ChangeCombSpriteByCombTimes(this._combos),this.comboAni.node.active=!0,this.comboAni.play("combo")):(this._combos=1,this.combo.string=this._combos.toString(),this.combo.node.active=!1,this.comboAni.node.active=!1,this.comboAni.stop("combo"))},e.prototype.onShowSkillShake=function(e){cc.log("======================roleFightShake========================="),this.animShakeAnim.play("roleFightshake")},e.prototype.addListener=function(){t.prototype.addListener.call(this),this.nodeMaskBg.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this),this.maskUseProp.on(cc.Node.EventType.TOUCH_END,this.onClickMaskUseProp,this),this.nodeDailyViewMask.on(cc.Node.EventType.TOUCH_END,this.onClickMaskDailyView,this),this.btnBack.node.on(cc.Node.EventType.TOUCH_END,this.onClickBack,this),this.btnRecordVideo.node.on(cc.Node.EventType.TOUCH_END,this.onClickRecordVideo,this),this.btnPropHammer.node.on(cc.Node.EventType.TOUCH_END,this.onClickUseHammer,this),this.btnPropSuperStar.node.on(cc.Node.EventType.TOUCH_END,this.onClickUseSuperStar,this),T.default.Instance.add(ee.E.MsgType.SaveShareInfo,this.onSaveShareInfo,this),T.default.Instance.add(ee.E.MsgType.SaveGameInfo,this.onSaveGameInfo,this),T.default.Instance.add(ee.E.MsgType.CubeItemTouchUp,this.onCubeItemTouchUp,this),T.default.Instance.add(ee.E.MsgType.RefreshMoveCubePos,this.RefreshMoveCubePos,this),T.default.Instance.add(ee.E.MsgType.CancelMoveCubePos,this.RefreshMoveCubePos,this),T.default.Instance.add(ee.E.MsgType.GameOver,this.onGameOver,this),T.default.Instance.add(ee.E.MsgType.ShowGameOver,this.onShowGameOver,this),T.default.Instance.add(ee.E.MsgType.CubeEliminateOne,this.onCubeEliminateOne,this),T.default.Instance.add(ee.E.MsgType.CubeEliminateThree,this.onCubeEliminateThree,this),T.default.Instance.add(ee.E.MsgType.CubeItemTouchDown,this.onCubeItemTouchDown,this),T.default.Instance.add(ee.E.MsgType.ShowEffectLine,this.onShowEffectLine,this),T.default.Instance.add(ee.E.MsgType.GetPoint,this.onGePoint,this),T.default.Instance.add(ee.E.MsgType.StartGame,this.onStartByMode,this),T.default.Instance.add(ee.E.MsgType.CubeDownCanGetPoint,this.onCanGetPoint,this),T.default.Instance.add(ee.E.MsgType.ShowSkillShake,this.onShowSkillShake,this),T.default.Instance.add(ee.E.MsgType.ActiveGameMenu,this.onActiveGameMenu,this),T.default.Instance.add(ee.E.MsgType.ShowGetPointEffect,this.onShowEnergyEffect,this),T.default.Instance.add(ee.E.MsgType.ShowSkillBorderEffect,this.onShowBorderEffect,this),T.default.Instance.add(ee.E.MsgType.GuidanceCloseAnim,this.onCloseGuidanceAnim,this),T.default.Instance.add(ee.E.MsgType.PropHammerTrigger,this.onPropHammerTrigger,this),T.default.Instance.add(ee.E.MsgType.RefreshProp,this.updatePropNum,this),T.default.Instance.add(ee.E.MsgType.GameShareGetPropAdd,this.addGamePropShareGet,this),T.default.Instance.add(ee.E.MsgType.ResumeGame,this.onMsgResumeGame,this),T.default.Instance.add(ee.E.MsgType.ReStartGame,this.onMsgReStartGame,this),T.default.Instance.add(ee.E.MsgType.Result,this.onMsgkResult,this),T.default.Instance.add(ee.E.MsgType.SkillTrigger,this.onUseSkill,this),T.default.Instance.add(ee.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this),cc.game.on(cc.game.EVENT_HIDE,this.onHideGame),cc.game.on(cc.game.EVENT_SHOW,this.onShowGame)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this),this.nodeMaskBg.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this),this.maskUseProp.off(cc.Node.EventType.TOUCH_END,this.onClickMaskUseProp,this),this.nodeDailyViewMask.off(cc.Node.EventType.TOUCH_END,this.onClickMaskDailyView,this),this.btnBack.node.off(cc.Node.EventType.TOUCH_END,this.onClickBack,this),this.btnRecordVideo.node.off(cc.Node.EventType.TOUCH_END,this.onClickRecordVideo,this),this.btnPropHammer.node.off(cc.Node.EventType.TOUCH_END,this.onClickUseHammer,this),this.btnPropSuperStar.node.off(cc.Node.EventType.TOUCH_END,this.onClickUseSuperStar,this),T.default.Instance.remove(ee.E.MsgType.SaveShareInfo,this.onSaveShareInfo,this),T.default.Instance.remove(ee.E.MsgType.SaveGameInfo,this.onSaveGameInfo,this),T.default.Instance.remove(ee.E.MsgType.CubeItemTouchUp,this.onCubeItemTouchUp,this),T.default.Instance.remove(ee.E.MsgType.RefreshMoveCubePos,this.RefreshMoveCubePos,this),T.default.Instance.remove(ee.E.MsgType.CancelMoveCubePos,this.RefreshMoveCubePos,this),T.default.Instance.remove(ee.E.MsgType.GameOver,this.onGameOver,this),T.default.Instance.remove(ee.E.MsgType.ShowGameOver,this.onShowGameOver,this),T.default.Instance.remove(ee.E.MsgType.CubeEliminateOne,this.onCubeEliminateOne,this),T.default.Instance.remove(ee.E.MsgType.CubeEliminateThree,this.onCubeEliminateThree,this),T.default.Instance.remove(ee.E.MsgType.CubeItemTouchDown,this.onCubeItemTouchDown,this),T.default.Instance.remove(ee.E.MsgType.ShowEffectLine,this.onShowEffectLine,this),T.default.Instance.remove(ee.E.MsgType.GetPoint,this.onGePoint,this),T.default.Instance.remove(ee.E.MsgType.StartGame,this.onStartByMode,this),T.default.Instance.remove(ee.E.MsgType.CubeDownCanGetPoint,this.onCanGetPoint,this),T.default.Instance.remove(ee.E.MsgType.ShowSkillShake,this.onShowSkillShake,this),T.default.Instance.remove(ee.E.MsgType.ActiveGameMenu,this.onActiveGameMenu,this),T.default.Instance.remove(ee.E.MsgType.ShowGetPointEffect,this.onShowEnergyEffect,this),T.default.Instance.remove(ee.E.MsgType.ShowSkillBorderEffect,this.onShowBorderEffect,this),T.default.Instance.remove(ee.E.MsgType.ResumeGame,this.onMsgResumeGame,this),T.default.Instance.remove(ee.E.MsgType.ReStartGame,this.onMsgReStartGame,this),T.default.Instance.remove(ee.E.MsgType.Result,this.onMsgkResult,this),T.default.Instance.remove(ee.E.MsgType.SkillTrigger,this.onUseSkill,this),T.default.Instance.remove(ee.E.MsgType.GuidanceCloseAnim,this.onCloseGuidanceAnim,this),T.default.Instance.remove(ee.E.MsgType.PropHammerTrigger,this.onPropHammerTrigger,this),T.default.Instance.remove(ee.E.MsgType.RefreshProp,this.updatePropNum,this),T.default.Instance.remove(ee.E.MsgType.GameShareGetPropAdd,this.addGamePropShareGet,this),T.default.Instance.remove(ee.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this),cc.game.off(cc.game.EVENT_HIDE,this.onHideGame),cc.game.off(cc.game.EVENT_SHOW,this.onShowGame)},e.prototype.isCanPut=function(){for(var e=this._nGetRow*this._nGetColumn,t=this._nRow*this._nColumn,o=this.sGetContainer.getGridHaveCubeSize(),a=this.sPutContainer.getGridCanPutCubeSize(),n=0;n<e;n++)for(var i=0;i<t;i++){var s=!0;if("000"==o[n])s=!1;else for(var r=0;r<ee.E.CubeItemSize.Length;r++)"1"==o[n][r]&&("1"==a[i][r]||(s=!1));if(s)return!0}return!1},e.prototype.shakeScreen=function(){this.animShakeAnim.play(),this._curMode!=ee.E.GameMode.B?this.scheduleOnce(function(){for(var e=0;e<9;e++){this.sPutContainer.getGridByIndex(e).node.getChildByName("ItemBg").getComponent(cc.Animation).play()}}.bind(this),.3):this.scheduleOnce(function(){for(var e in this.bgGridMode2.childrens){this.bgGridMode2.childrens[e].getComponent(cc.Animation).play()}},.3)},e.prototype.onCubeItemTouchUp=function(e,t,o){if(void 0===o&&(o=!0),!(this._curMode==ee.E.GameMode.C&&this._remainTime<=0)&&this._StartGaming&&t instanceof f.default){if(0<t.getCubeNum()){var a=t.getIndex(),n=this.sPutContainer.putCube(t);if(this._curMode==ee.E.GameMode.E){if(n&&(this._maxDailyRandomConfigIdx--,this.nodeDailyStepRemain.string="剩余："+this._maxDailyRandomConfigIdx.toString()+"步",this.nodeDailyAnswer.active)){var i=t.getIndex(),s=this.arrayAnswerPos.length-this._maxDailyRandomConfigIdx%3-1,r=this.arrayAnswerPos[s].split("_");if(parseInt(r[1])!=i||parseInt(r[0])!=a){for(var l in this.nodeDailyAnswer.active=!1,this.arrayAnswerPoint){var c=this.arrayAnswerPoint[l];for(var d in c){c[d].destroy()}}this.arrayAnswerPoint={}}else{var u=this.arrayAnswerPoint[a];for(var d in u){u[d].destroy()}}}if(0==this.sGetContainer.getCubeNum()){this._currDailyRandomConfigIdx++;var p=this._arrayDailyRandomConfig[this._currDailyRandomConfigIdx.toString()];if(null!=p){if(this.createCubeByConfig(p),this.nodeDailyAnswer.active){for(var l in this.arrayAnswerPoint){c=this.arrayAnswerPoint[l];for(var d in c){c[d].destroy()}}var h=parseInt(X.default.Instance.loadLocalJsonData(ee.E.DataKey.DailyDiffcultAskHelpSteps));h>=this._currDailyRandomConfigIdx||-1==h?(this.arrayAnswerPoint={},this.createAnswerByConfig(this._arrayDailyAnswerConfig[this._currDailyRandomConfigIdx.toString()])):this.nodeDailyAnswer.active=!1}}else{if(0!=this.sPutContainer.getCubeNum())return void this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverDailyFail");this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverDailySuccess")}}else this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverNoSet"),Q.default.Instance.playSound(ee.E.SoundType.put)}else this.bInGuidance?0==this.sGetContainer.getCubeNum()&&(console.log("=================onbInGuidanceNextStep=================="),this.onNextStep()):(this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverNoSet"),Q.default.Instance.playSound(ee.E.SoundType.put))}o&&this.saveGameSceneInfo(),this.onCheckDangerTips(),this.onCloseLongTimeTips(),this.onCheckShowPropTips()}},e.prototype.onCubeItemTouchDown=function(e,t){t instanceof f.default&&(Q.default.Instance.playSound(ee.E.SoundType.put),T.default.Instance.send(ee.E.MsgType.GuidanceCloseAnim))},e.prototype.RefreshMoveCubePos=function(e,t){if(this.nodeDailyAnswer.active){var o=t.getIndex();if(null!=this.dictAnswerPos[o])for(var a=this.dictAnswerPos[o].split("_"),n=(parseInt(a[1]),this.sGetContainer.getGridByIndex(o)),i=this.sEffectContainer.node.convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),s=parseInt(a[1]),r=this.sPutContainer.getGridByIndex(s),l=this.sEffectContainer.node.convertToNodeSpaceAR(r.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),c=this.arrayAnswerPoint[o],d=0;d<=10;d++){var u=i.x+(l.x-i.x)/10*d,p=i.y+(l.y-i.y)/10*d;c[d].position=new cc.Vec2(u,p)}}},e.prototype.onCheckShowPropTips=function(){if(this._curMode!=ee.E.GameMode.E){for(var e=this._curMode==ee.E.GameMode.B?32:18,t=this.sPutContainer.getGridTotalLength(),o=0,a=0;a<t;a++){var n=this.sPutContainer.getTotalGrid()[a].getCubeNum();if(0==n)return this.bShowCanUseProp=!1,void(this.nodePropUseTips.active=!1);o+=n}if(e<=o){var i=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnProp);if(null!=i){var s=parseInt(i[ee.E.PropType.kHammer]),r=parseInt(i[ee.E.PropType.kSuperStar]);0!=s||0!=r?(this.bShowCanUseProp=!0,this.nodePropUseTips.active=!0):(this.bShowCanUseProp=!1,this.nodePropUseTips.active=!1)}}else this.bShowCanUseProp=!1,this.nodePropUseTips.active=!1}},e.prototype.onCheckLongTimeTips=function(){this._nCurLevelTarget<=2&&!this.bInGuidance&&(this.nodeLongTimeTips.active=!0)},e.prototype.onCloseLongTimeTips=function(){1==this.nodeLongTimeTips.active&&(this.nodeLongTimeTips.active=!1,this.unschedule(this.onCheckLongTimeTips),this.schedule(this.onCheckLongTimeTips,3,cc.macro.REPEAT_FOREVER))},e.prototype.onCheckDangerTips=function(){if(1!=this.nodeDangerTips.active){for(var e=this.sPutContainer.getGridTotalLength(),t=0,o=0;o<e;o++){t+=this.sPutContainer.getTotalGrid()[o].getCubeNum()}27-t<=6&&(this.nodePropUseTips.active=!0,this.scheduleOnce(function(){this.nodePropUseTips.active=!1},3))}},e.prototype.onCheckGameOver=function(){var e=!1;return this.nodeRoleSkillCol.active&&(this.onClickUseSkill(),e=!0),e},e.prototype.onShowGameOver=function(e,t){if(void 0===t&&(t=null),cc.log("strSpriteFrame:"+t),1!=this.onCheckGameOver()){if(this._StartGaming&&!this._bPauseTimeGame){if(this.nodeDailyAnswer.active){for(var o in this.nodeDailyAnswer.active=!1,this.arrayAnswerPoint){var a=this.arrayAnswerPoint[o];for(var n in a){a[n].destroy()}}this.arrayAnswerPoint={}}t=null==t?"txtGameOverNoSet":t,this._StartGaming=!1,this.nodeMaskBg.active=!0,this.animGameOver.node.active=!0;var i=te.default.Instance.loadSpriteFrame(t);this.sprOverResult.spriteFrame=i,this.animGameOver.stop(),this.animGameOver.play(),this.scheduleOnce(function(){T.default.Instance.send(ee.E.MsgType.GameOver)},2)}}else cc.log("onCheckGameOver == true")},e.prototype.onGameOver=function(e){if(this._curMode!=ee.E.GameMode.E){if(this._bSurviveLimit)return this._StartGaming=!0,this.nodePropUseTips.active=!1,this.nodeMaskBg.active=!1,this.sPutContainer.clear(),this.sGetContainer.clear(),void(this._curMode==ee.E.GameMode.A||this._curMode==ee.E.GameMode.B||this._curMode==ee.E.GameMode.D?this.randomCube():this._curMode==ee.E.GameMode.C&&(this.randomCube(),this._remainTime+=20,this.sprTimeNode2_Fg.node.width=this._remainTime/this._totalTime*490,this.nodeTime2_Effect.active=!0,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-245+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y)));if(Z.default.Instance.bShowAdvMenu)this.onResult();else{Z.default.Instance.bShowAdvMenu=!0;var t=this;X.default.Instance.removeLocalData(ee.E.JsonDataKey.gameSceneInfo),t._bPauseTimeGame=!0,v.default.Instance.show(ee.E.UIPath.UIAdvPanel,S.default.Instance.NodeCenter,!1,function(){Z.default.Instance.bSurviveInGame=!0,t._StartGaming=!0,t._bPauseTimeGame=!1,t.nodePropUseTips.active=!1,t.nodeMaskBg.active=!1,t.sPutContainer.clear(),t.sGetContainer.clear(),t._curMode==ee.E.GameMode.A||t._curMode==ee.E.GameMode.B||t._curMode==ee.E.GameMode.D?t.randomCube():t._curMode==ee.E.GameMode.C&&(t.randomCube(),t._remainTime+=20,t.sprTimeNode2_Fg.node.width=t._remainTime/t._totalTime*490,t.nodeTime2_Effect.active=!0,t.nodeTime2_Effect.setPosition(t.sprTimeNode2_Fg.node.width-245+t.nodeTimeEffectOffset,t.nodeTime2_Effect.getPosition().y))},function(){t.onResult()})}}else this.onResult()},e.prototype.onResult=function(){this.nodeMaskBg.active=!1,this.nodePropUseTips.active=!1;var e=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.maxScoreByType),t=e[this._curMode];this._curMode==ee.E.GameMode.C&&(this._bStartTimeGame=!1,this._bPauseTimeGame=!1,this.bBlinkInFiveSecond=!1,this.timeLimitFiveSecond.active=!1,this.timeLimitFiveSecond.stopAllActions(),this.sprFxBlinkTimeNode.active=!1,this.sprFxBlinkTimeNode.stopAllActions(),this.labTimer.string=q.default.formatTime2(0),0<this._remainTime&&(this.labTimer.string=q.default.formatTime2(1e3*this._remainTime)));var o=this._nowPoint;if(this.animGameOver.node.active=!1,this.nodeRoleSkillCol.active=!1,this.FX_SkillCanSkillIdle.active=!1,this.FX_RoleCanSkillFire.active=!1,this.FX_RoleCanSkillFire2.node.active=!1,this.FX_nodeRoleFireRotateItem.stopAllActions(),X.default.Instance.removeLocalData(ee.E.JsonDataKey.gameSceneInfo),null!=this.roleAnim){var a=X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId,"1");oe.default.Instance.putRole(a.toString(),this.roleAnim.node),this.roleAnim=null}if(this._curMode==ee.E.GameMode.E){if(0==this.sPutContainer.getCubeNum()){if(cc.log("====================ModeE onGameOver Success===================="),0==this._dailyType){var n=X.default.Instance.loadLocalData(ee.E.DataKey.DailyModeNFirstTime);if(0==parseInt(n)){var i=this._dailyNChallengeTime;v.default.Instance.show(ee.E.UIPath.UIGameOverPanel,S.default.Instance.NodeCenter,this._curMode,o,o,!0,ee.E.GameOverType.kNoSetCanPut,this._dailyType,i),X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeNFirstTime,i);var s=new Date;X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeNFirstSaveTimes,s.getTime()),this._EndDailyTimer=!0}else v.default.Instance.show(ee.E.UIPath.UIGameOverPanel,S.default.Instance.NodeCenter,this._curMode,o,o,!0,ee.E.GameOverType.kNoSetCanPut,this._dailyType);var r=new Date;X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeNTimer,r.getTime()),null!=(d=(c=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.dailyShareGetPropTotal))[ee.E.DailyShareType.dailyNormalLose])&&1==d&&(c[ee.E.DailyShareType.dailyNormalLose]=2,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.dailyShareGetPropTotal,c))}else{var l=X.default.Instance.loadLocalData(ee.E.DataKey.DailyModeDFirstTime);if(cc.log("####################################firstDiffcult:"+l),0==parseInt(l)){i=this._dailyDChallengeTime;v.default.Instance.show(ee.E.UIPath.UIGameOverPanel,S.default.Instance.NodeCenter,this._curMode,o,o,!0,ee.E.GameOverType.kNoSetCanPut,this._dailyType,i),X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeDFirstTime,i);s=new Date;cc.log("####################################DailyModeDFirstSaveTime:"+s.getTime()),X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeDFirstSaveTime,s.getTime()),this._EndDailyTimer=!0}else v.default.Instance.show(ee.E.UIPath.UIGameOverPanel,S.default.Instance.NodeCenter,this._curMode,o,o,!0,ee.E.GameOverType.kNoSetCanPut,this._dailyType);var c,d;r=new Date;X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeDTimer,r.getTime()),null!=(d=(c=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.dailyShareGetPropTotal))[ee.E.DailyShareType.dailyDiffcutLose])&&1==d&&(c[ee.E.DailyShareType.dailyDiffcutLose]=2,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.dailyShareGetPropTotal,c))}var u=[ee.E.DataKey.dailyNormalFirstTime,ee.E.DataKey.dailyDiffcultFirstTime];X.default.Instance.loadLocalData(u[this._dailyType],"0");return console.log("------胜利了--------",this.shareId,this.shareMode),void X.default.Instance.androidSendEvent(ee.E.ttEventName.overlevel,{level:0,relive:Z.default.Instance.bSurviveInGame?1:0,score:o,itemcount:Z.default.Instance.nUsePropInGame,mode:ee.E.getModeNumByType(this._curMode),result:1,ishard:this._dailyType})}}else{var p=X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId),h=g.default.Instance.getRoleInfoByRoleId(p).point;null==h&&(h=0);var f=Math.floor(o*h/100),y=o+f;if(console.log("==point====nPointAdding======roleAddingPoint====curPoint=====curMaxScore",o,h,f,y,t),t<y)return e[this._curMode]=y,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.maxScoreByType,e),v.default.Instance.show(ee.E.UIPath.UIGameOverPanel,S.default.Instance.NodeCenter,this._curMode,o,o,!0,ee.E.GameOverType.kNoSetCanPut),this._nowPoint=0,void X.default.Instance.androidSendEvent(ee.E.ttEventName.overlevel,{level:this._curMode==ee.E.GameMode.A?this._nCurLevelTarget:0,relive:Z.default.Instance.bSurviveInGame?1:0,score:o,itemcount:Z.default.Instance.nUsePropInGame,mode:ee.E.getModeNumByType(this._curMode),result:0,ishard:0})}console.log("====================onGameOver===================="),this._nowPoint=0,this._nowPointInRole=0,this.sprEnergy.width=0;var m=this._remainTime<=0?ee.E.GameOverType.kTimeLimit:ee.E.GameOverType.kNoSetCanPut;v.default.Instance.show(ee.E.UIPath.UIGameOverPanel,S.default.Instance.NodeCenter,this._curMode,o,e[this._curMode],!1,m,this._dailyType),X.default.Instance.androidSendEvent(ee.E.ttEventName.overlevel,{level:this._curMode==ee.E.GameMode.A?this._nCurLevelTarget:0,relive:Z.default.Instance.bSurviveInGame?1:0,score:o,itemcount:Z.default.Instance.nUsePropInGame,mode:ee.E.getModeNumByType(this._curMode),result:0,ishard:this._dailyType})},e.prototype.onCubeEliminateOne=function(e,t,o){this.shakeScreen(),this.onShowEffectOne(ee.E.MsgType.ShowEffectPoint,t,o),Q.default.Instance.playSound(ee.E.SoundType.eliminate)},e.prototype.onShowEffectOne=function(e,t,o){var a=this.sPutContainer.getGridByIndex(t),n=this.sEffectContainer.node.convertToNodeSpaceAR(a.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));C.default.Instance.playEffect(ee.E.EffectName.fxCleanSingleColor+o.toString(),n,1).zIndex=10},e.prototype.onCubeEliminateThree=function(e){this.shakeScreen(),Q.default.Instance.playSound(ee.E.SoundType.eliminate)},e.prototype.onShowEffectLine=function(e,t,o){if(this._bEffectSwitch){var a=t.sort(),n=this.sPutContainer.getGridByIndex(a[a.length-1]),i=this.sPutContainer.getGridByIndex(a[0]),s=i.getWorldPos().x-n.getWorldPos().x,r=i.getWorldPos().y-n.getWorldPos().y,l=180*Math.atan2(s,r)/Math.PI,c=i.node.convertToNodeSpace(i.getWorldPos()),d=n.node.convertToNodeSpace(n.getWorldPos()),u=new cc.Vec2((d.x+c.x)/2,(d.y+c.y)/2),p=C.default.Instance.playEffect(ee.E.EffectName.fxCleanLine,u,1);p.rotation=l;for(var h=0;h<p.childrenCount;h++){var f=p.getChildByName("p"+h);o[0]==h?f.active=!0:f.active=!1}for(var y=0;y<t.length;y++)for(var m=0;m<o.length;m++){var g=this.sPutContainer.getGridByIndex(t[y]),v=this.sEffectContainer.node.convertToNodeSpaceAR(g.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));C.default.Instance.playEffect(ee.E.EffectName.fxCleanSingleColor+o[m].toString(),v,1).zIndex=10}}},e.prototype.onActiveGameMenu=function(e,t){this.animShakeAnim.node.active=t},e.prototype.onShowEnergyEffect=function(e,t,o){if(this._curMode!=ee.E.GameMode.E)if(this._bEffectSwitch){var a=this.sEffectContainer.node.convertToNodeSpaceAR(t),n=C.default.Instance.playEffect(ee.E.EffectName.fxCubeTuoWei,a,1),i=this.sEffectContainer.node.convertToNodeSpaceAR(this.sprEnergy.parent.convertToWorldSpaceAR(new cc.Vec2(-30,-10))),s=q.default.getRangeRandom(1,3),r=[cc.v2(200,0),cc.v2(300,250),i];2==s&&(r=[cc.v2(-200,0),cc.v2(-300,250),i]),3==s&&(r=[cc.v2(0,100),cc.v2(0,100),i]);var l=cc.bezierTo(.8,r),c=this,d=cc.sequence(l,cc.callFunc(function(){this.scheduleOnce(function(){if(o){C.default.Instance.playEffect(ee.E.EffectName.fxCubeShouJi,i,1);var e=1==this._nCurLevelTarget||2==this._nCurLevelTarget?this._nEveryLevelTarget-200:this._nEveryLevelTarget;c.sprEnergy.width=c._nowPointInRole/e*this._nStartEnergy,c.sprEnergy.width>=this._nStartEnergy&&(c.sprEnergy.width=this._nStartEnergy)}},.1)}.bind(this),this));n.runAction(d)}else o&&(this.sprEnergy.width=this._nowPointInRole/800,this.sprEnergy.width>=this._nStartEnergy&&(this.sprEnergy.width=this._nStartEnergy))},e.prototype.onShowBorderEffect=function(e){if(null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect){this.FX_curLeftBorderEffect.node.active=!0,this.FX_curLeftBorderEffect.node.stopAllActions();var t=this.FX_curLeftBorderEffect.node.getChildByName("shouji_lizi").getComponent(cc.ParticleSystem);this.FX_curLeftBorderEffect.play(),t.resetSystem(),this.FX_curRightBorderEffect.node.active=!0,this.FX_curRightBorderEffect.node.stopAllActions();var o=this.FX_curRightBorderEffect.node.getChildByName("shouji_lizi").getComponent(cc.ParticleSystem);this.FX_curRightBorderEffect.play(),o.resetSystem()}},e.prototype.onSetDailyConfigPath=function(e,t,o,a){this._dictDailyLevelInfo=o,this._listDailyRandomInfo=a},e.prototype.getDictionaryCount=function(e){var t=0;for(var o in e)t++;return t},e.prototype.checkRoleExpCard=function(){var e=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userRoleExpCard);if(null!=e&&0!=q.default.getDictionaryCount(e)){X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId,"1");for(var t=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnRole),o=new Date,a=0;a<ee.E.getCurRoleCount();a++){var n=(a+1).toString();if(null!=e[n]){var i=e[n].duration,s=e[n].lastTime;i<=o.getTime()-s&&(console.log("体验卡角色:",n,"已经过期!!!!"),delete e[n],delete t[n.toString()],X.default.Instance.saveLocalData(ee.E.DataKey.userRoleId,"1"))}}X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.userOwnRole,t),X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.userRoleExpCard,e)}},e.prototype.onStartByMode=function(e,t,o,a,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=0),console.log("---!!!!!!!------=-=------",e,t,o,a,n),this.shareId=null,this.shareMode=null,this._bPauseTimeGame=!1,this._curMode=t,this.comboAni.node.setScale(0,0),this.animShakeAnim.node.active=!0,this._nRandomCubeTimes=0,this._nowPointInRole=0,Z.default.Instance.bShowAdvMenu=!1,Z.default.Instance.bSurviveInGame=!1,n||(Z.default.Instance.nUsePropInGame=0),this.bShowCanUseProp=!1,X.default.Instance.ttIsTt()){this.btnRecordVideo.node.parent.active=!0;var s=this.btnRecordVideo.node.getChildByName("Icon").getComponent(cc.Sprite),r=this.btnRecordVideo.node.getChildByName("txtRecord").getComponent(cc.Sprite);s.spriteFrame=te.default.Instance.loadSpriteFrame("record1"),r.spriteFrame=te.default.Instance.loadSpriteFrame("recordtxt1")}else this.btnRecordVideo.node.parent.active=!1;var l=X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId,"1"),c=oe.default.Instance.getRole(l.toString()),d=q.default.addChild(this.nodeCenter,c);d.position=d.convertToNodeSpaceAR(this.nodeLoadRole.convertToWorldSpaceAR(new cc.Vec2(0,0)));var u=this.nodeLoadRole.getSiblingIndex();if(d.setSiblingIndex(u),this.roleAnim=d.getComponent(j.default),this.roleAnim.SetEffectParent(l.toString(),this.nodeRoleEffectPoint),this.roleAnim.resetAnim(),this.roleAnim.cleanEffect(),!n||a){for(var p in ee.E.PropType)this.dictPropUseInGames[ee.E.PropType[p]]=0;for(var p in ee.E.PropType)this.dictPropShareInGames[ee.E.PropType[p]]=0}if(this.btnPropHammer.node.active=this._curMode!=ee.E.GameMode.E,this.btnPropSuperStar.node.active=this._curMode!=ee.E.GameMode.E,this.btnPropUndoOperate.node.active=this._curMode!=ee.E.GameMode.E,this.btnPropUndoOperate.interactable=!1,this.updatePropNum(),this.timeLimitFiveSecond.active=!1,this.timeLimitFiveSecond.stopAllActions(),this.sprFxBlinkTimeNode.active=!1,this.sprFxBlinkTimeNode.stopAllActions(),this.sprEnergy.parent.active=!0,this.sprEnergy.width=0,this.nodePropGuide.active=!1,null!=this.roleAnim&&(this.roleAnim.node.active=!0),n||X.default.Instance.androidSendEvent(ee.E.ttEventName.startlevel,{mode:ee.E.getModeNumByType(this._curMode),ishard:i}),o){for(var p in null!=a||t==ee.E.GameMode.E||n?null!=this.roleAnim&&(this.roleAnim.resetInIdle(),this.roleAnim.anim.play("role"+l+"_Idle")):null!=this.roleAnim&&this.roleAnim.playShow(),this._StartGaming=!0,this.nodeRoleSkillCol.active=!1,this.FX_SkillCanSkillIdle.active=!1,this.FX_RoleCanSkillFire.active=!1,this.FX_RoleCanSkillFire2.node.active=!1,this.FX_nodeRoleFireRotateItem.stopAllActions(),this.animGameOver.node.active=!1,this.sPutContainer.clear(),this.sGetContainer.clear(),this.sPutContainer.clearGrid(),this.sGetContainer.clearGrid(),this._arrayGetGridIndex=[0,1,2],this._nowPoint=0,this._combos=1,this.combo.node.active=!1,this.pointAni.stop(),this.pointAni.node.scale=0,this.comboAni.stop(),this.comboAni.node.scale=0,this.animReadyGo.node.active=!1,this._arrCubeType=this._arrCubeType1,this._bStartTimeGame=!1,this._bPauseTimeGame=!1,this.goGuidaceNode.active=!1,this.nodeDailyContainer.active=!1,this.nodeScoreBg.getChildByName("type1").active=!0,this.nodeScoreBg.getChildByName("type2").active=!1,this.nodeScoreBg.getChildByName("scorebg").position=new cc.Vec2(30,105),this._currGuidaceIdx=-1,this.goTimerNode.active=!1,this.goTimerNode2.active=!1,this.nodePropUseTips.active=!1,this.nodeNewColorTips.active=!1,this.nodeDangerTips.active=!1,this.nodeDailyView.node.active=!1,this.nodeDailyShareTips.active=!1,this.nodeDailyAnswer.active=!1,this.arrayAnswerPoint){var h=this.arrayAnswerPoint[p];for(var f in h){h[f].destroy()}}if(this.arrayAnswerPoint={},this.labLevelTopTips.node.parent.active=!1,null!=a&&a){this.btnPropHammer.node.active=!1,this.btnPropSuperStar.node.active=!1,this.btnPropUndoOperate.node.active=!1,X.default.Instance.ttIsTt()&&(this.btnRecordVideo.node.parent.active=!1,this.maskUseProp.active=!0);var y=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.maxScoreByType);if(null==y||0==q.default.getDictionaryCount(y)){y={};for(var m=0;m<ee.E.GameMode.Length;m++)y[m]=0}X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.maxScoreByType,y);var g=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnRole);if(null==g||0==q.default.getDictionaryCount(g)){(g={})[1..toString()]=1,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.userOwnRole,g),0==X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId)&&X.default.Instance.saveLocalData(ee.E.DataKey.userRoleId,1..toString())}this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);var v=this.sPutContainer.getTotalGrid();for(var p in v){var I=v[p];3!=parseInt(p)&&4!=parseInt(p)&&5!=parseInt(p)&&(I.node.active=!1)}this.btnBack.node.active=!1,this.bInGuidance=!0,this.score.string="0";var T=(this._nCurLevelTarget=1)==this._nCurLevelTarget||2==this._nCurLevelTarget?this._nEveryLevelTarget-200:this._nEveryLevelTarget;return this.labLevelTopTips.node.parent.active=!0,this.labLevelTopTips.string="关卡："+this._nCurLevelTarget.toString(),this.labTargetTopTips.string="目标："+(this._nCurLevelTarget*T).toString(),this.animLevelArrive.node.active=!0,this.animLevelArrive.stop(),this.animLevelArrive.play(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=(this._nCurLevelTarget*T).toString(),void this.scheduleOnce(function(){this.animLevelArrive.node.active=!1,this.goGuidaceNode.active=!0,this.onNextStep()},1.5)}var S=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.maxScoreByType);if(null!=S&&null!=S[t]){S[t];this.score.string=this._nowPoint.toString()}else this.score.string="0";if(console.log("-----------------on Mode Select Deal--------------------------"),t==ee.E.GameMode.A){if(this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint),!n){var C=(this._nCurLevelTarget=1)==this._nCurLevelTarget||2==this._nCurLevelTarget?this._nEveryLevelTarget-200:this._nEveryLevelTarget;this.labLevelTopTips.node.parent.active=!0,this.labLevelTopTips.string="关卡："+this._nCurLevelTarget.toString(),this.labTargetTopTips.string="目标："+(this._nCurLevelTarget*C).toString(),this.animLevelArrive.node.active=!0,this.animLevelArrive.stop(),this.animLevelArrive.play(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=(this._nCurLevelTarget*C).toString(),this.scheduleOnce(function(){this.animLevelArrive.node.active=!1},1.5),this.schedule(this.onCheckLongTimeTips,3,cc.macro.REPEAT_FOREVER)}}else if(t==ee.E.GameMode.B)this._nRow=4,this._nColumn=4,this._nGetRow=1,this._nGetColumn=3,this._arrCubeType=this._arrCubeType1,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint,[],ee.E.GridState.CanPut,!0);else if(t==ee.E.GameMode.C)this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint),this.sprFxAddTimeNode.node.removeAllChildren(),this.sprFxAddTimeNode.node.stopAllActions(),this.sprFxAddTimeNode2.node.removeAllChildren(),this.sprFxAddTimeNode2.node.stopAllActions(),this._bStartTimeGame=!1,this.bBlinkInFiveSecond=!1,this.goTimerNode2.active=!0,this._totalTime=60,this._bPauseTimeGame=!1,this.nodeTime2_Effect.active=!0,n||(this._remainTime=60,this.labTimer.string=q.default.formatTime2(1e3*this._remainTime),this.sprTimeNode2_Fg.node.width=490,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-245+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y),this.animReadyGo.node.active=!0,this.animReadyGo.play(),this.scheduleOnce(function(){this._bStartTimeGame=!0,this.animReadyGo.node.active=!1},1.5));else{if(t==ee.E.GameMode.E){if(0==(this._dailyType=i)){q.default.getMonthWeek();var _=(H=new Date).getMonth()+1,E=H.getDate(),P=_.toString()+E.toString();1==_&&(P="0"+_.toString()+E.toString());var b=$.default.Instance.getNormalLevelInfoByDays(P),D=$.default.Instance.getNormalRandomInfoByDays(P);this.onSetDailyConfigPath(null,0,b,D)}else{q.default.getMonthWeek(),_=(H=new Date).getMonth()+1,E=H.getDate(),P=_.toString()+E.toString();1==_&&(P="0"+_.toString()+E.toString());b=$.default.Instance.getDiffcultLevelInfoByDays(P),D=$.default.Instance.getDiffcultRandomInfoByDays(P);this.onSetDailyConfigPath(null,1,b,D)}if(this.sprEnergy.parent.active=!1,null!=this.roleAnim&&(this.roleAnim.node.active=!1),this.nodeDailyContainer.active=!0,this.nodeScoreBg.getChildByName("type1").active=!1,this.nodeScoreBg.getChildByName("type2").active=!0,this.nodeScoreBg.getChildByName("scorebg").position=new cc.Vec2(10,94),this.goTimerNode.active=!0,this.nodeDailyView.node.active=0!=this._dailyType,console.log("!!!!!!!!!!!!!!!!!!!每日挑战: ",this._dailyType),this._EndDailyTimer=!1,0==this._dailyType){var M=X.default.Instance.loadLocalData(ee.E.DataKey.DailyModeNFirstTime);0!=parseInt(M)&&(this._EndDailyTimer=!0,cc.log("dailyNormalFirstPass:"+M),this.goTimerNode.active=!1);var G=X.default.Instance.loadLocalData(ee.E.DataKey.DailyModeNTimer);if(cc.log("easeModeTimer:"+G),0==parseInt(G)){this._dailyNChallengeTime=0;var R=new Date;cc.log(R.getTime()),X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeNTimer,R.getTime())}else{var N=(k=(H=new Date).getTime())-G;if(0!=(L=Math.floor(N/864e5)))cc.log("deltaNormalTimer:"+N/1e3),X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeNTimer,H.getTime()),this._dailyNChallengeTime=N/1e3;else{var F=k-G;this._dailyNChallengeTime=F/1e3}}this.labTimer.string=q.default.formatTime(this._dailyNChallengeTime)}else{var w=X.default.Instance.loadLocalData(ee.E.DataKey.DailyModeDFirstTime);0!=parseInt(w)&&(this._EndDailyTimer=!0,cc.log("dailyDiffcultFirstPass:"+w),this.goTimerNode.active=!1);var A=X.default.Instance.loadLocalData(ee.E.DataKey.DailyModeDTimer);if(cc.log("hardModeTimer:"+A),0==parseInt(A)){this._dailyDChallengeTime=0;R=new Date;cc.log(R.getTime()),X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeDTimer,R.getTime())}else{N=(k=(H=new Date).getTime())-A;var k,L=Math.floor(N/864e5);if(cc.log("deltaDays:"+L+" deltaTimer:"+N),0!=L)X.default.Instance.saveLocalData(ee.E.DataKey.DailyModeDTimer,H.getTime()),this._dailyDChallengeTime=N/1e3;else{var U=k-A;this._dailyDChallengeTime=U/1e3}}this.labTimer.string=q.default.formatTime(this._dailyDChallengeTime)}this.score.string="0",this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=3,this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint);var B=this._dictDailyLevelInfo,O=this._listDailyRandomInfo;this._arrayDailyRandomConfig=O,this._currDailyRandomConfigIdx=1,this._maxDailyRandomConfigIdx=3*this.getDictionaryCount(O),this.nodeDailyStepRemain.string="剩余："+this._maxDailyRandomConfigIdx.toString()+"步";var x=O[1];this.createLevelByConfig(B),this.createCubeByConfig(x),0!=this._dailyType&&this.nodeDailyView.refreshCubeSet(this._arrayDailyRandomConfig);var Y=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.dailyShareGetPropTotal),K=0==this._dailyType?X.default.Instance.loadLocalData(ee.E.DataKey.DailyModeNFirstTime):X.default.Instance.loadLocalData(ee.E.DataKey.DailyModeDFirstTime);if(0==parseInt(K)){var H;q.default.getMonthWeek(),_=(H=new Date).getMonth()+1,E=H.getDate(),P=_.toString()+E.toString();if(1==_&&(P="0"+_.toString()+E.toString()),0==this._dailyType){var V=Y[ee.E.DailyShareType.dailyNormalLose];null!=V&&0==V&&(this.nodeDailyShareTips.active=!0),null!=V&&1==V&&(this._arrayDailyAnswerConfig=$.default.Instance.getNormalAnswerInfoByDays(P),this.createAnswerByConfig(this._arrayDailyAnswerConfig[this._currDailyRandomConfigIdx.toString()]))}else{var J=parseInt(X.default.Instance.loadLocalJsonData(ee.E.DataKey.DailyDiffcultAskHelpSteps)),z=Y[ee.E.DailyShareType.dailyDiffcutLose];null!=z&&0==z&&(this.nodeDailyShareTips.active=!0),null!=z&&1==z&&(this._arrayDailyAnswerConfig=$.default.Instance.getDiffcultAnswerInfoByDays(P),this.createAnswerByConfig(this._arrayDailyAnswerConfig[this._currDailyRandomConfigIdx.toString()]))}}if(0==this._dailyType)if(1==X.default.Instance.loadLocalJsonData(ee.E.DataKey.dailyNormalState))this.btnAdsGetTips.interactable=!1;else{J=parseInt(X.default.Instance.loadLocalJsonData(ee.E.DataKey.DailyDiffcultAskHelpSteps));var W=0!=Y[ee.E.DailyShareType.dailyNormalLose];this.btnAdsGetTips.interactable=!W}else if(1==X.default.Instance.loadLocalJsonData(ee.E.DataKey.dailyDiffcultState))this.btnAdsGetTips.interactable=!1;else{J=parseInt(X.default.Instance.loadLocalJsonData(ee.E.DataKey.DailyDiffcultAskHelpSteps)),W=0!=Y[ee.E.DailyShareType.dailyDiffcutLose]&&-1==J;this.btnAdsGetTips.interactable=!W}return}this._nRow=3,this._nColumn=3,this._nGetRow=1,this._nGetColumn=1,this._arrayGetGridIndex=[0],this.sPutContainer.createGrid(this._nRow,this._nColumn,this.nodePoint)}this.randomCube(),t==ee.E.GameMode.C&&Q.default.Instance.playSound(ee.E.SoundType.readyGo),n||(this.saveGameSceneInfo(),this.btnPropUndoOperate.interactable=!1)}},e.prototype.saveGameSceneInfo=function(e){void 0===e&&(e=!1);var t={},o=new Date;if(t.time=o.getTime(),t.mode=this._curMode,t.score=this._nowPoint,t.level=this._nCurLevelTarget,t.cubeRandom=this._nRandomCubeTimes,t.comb=this._combos,t.roleScore=this._nowPointInRole,t.remain=this._remainTime,t.propUse=this.dictPropUseInGames,t.propShare=this.dictPropShareInGames,t.showAds=Z.default.Instance.bShowAdvMenu?1:0,t.revive=Z.default.Instance.bSurviveInGame?1:0,this.nodeRoleSkillCol.active&&0!=this._listRestoreCleanCubes.length){var a=[];for(var n in this._listRestoreCleanCubes){var i=this._listRestoreCleanCubes[n];a.push(i.getIndex())}t.skillInfo=a}var s={},r=this.sPutContainer.getTotalGrid();if(0!=q.default.getDictionaryCount(r))for(var n in r)if(null!=r[n]){var l=parseInt(n),c=r[n].getAllCubeItem();for(var d in c){parseInt(d);if(null!=(h=c[d]))s[(3*l+h.getCubeItemSize()).toString()]=h.getCubeItemType()}}t.levelInfo=s;var u={},p=this.sGetContainer.getTotalGrid();for(var n in p)if(null!=p[n]){l=parseInt(n),c=p[n].getAllCubeItem();for(var d in c){var h;parseInt(d);if(null!=(h=c[d]))u[(3*l+h.getCubeItemSize()).toString()]=h.getCubeItemType()}}if(t.randomInfo=u,e){var f=JSON.stringify(t);X.default.Instance.saveLocalData(ee.E.JsonDataKey.gameSceneInfo,f)}else null!=this._gameCurStepsInfo&&q.default.getDictionaryCount(this._gameCurStepsInfo)&&(this._gameLastStepsInfo=this._gameCurStepsInfo,this.btnPropUndoOperate.interactable=!0),this._gameCurStepsInfo=t,console.log("_gameCurStepsInfo:",this._gameCurStepsInfo),console.log("_gameLastStepsInfo:",this._gameLastStepsInfo)},e.prototype.reStoreGameScene=function(e){void 0===e&&(e=!1);var t=null;if(e){var o=X.default.Instance.loadLocalData(ee.E.JsonDataKey.gameSceneInfo);null!=o&&0!=parseInt(o)&&(t=JSON.parse(o))}else t=null!=this._gameLastStepsInfo?this._gameLastStepsInfo:{};if(console.log("dictSceneInfo:",t),0<q.default.getDictionaryCount(t)){var a=t.mode;a!=ee.E.GameMode.E&&T.default.Instance.send(ee.E.MsgType.StartGame,a,!0,!1,!0),this._nowPoint=t.score,this._nCurLevelTarget=t.level,this._nRandomCubeTimes=t.cubeRandom,this._combos=t.comb,this._nowPointInRole=t.roleScore,this._remainTime=t.remain;var n=t.levelInfo,i=t.randomInfo;this.dictPropUseInGames=t.propUse,this.dictPropShareInGames=t.propShare,Z.default.Instance.bShowAdvMenu=1==parseInt(t.showAds),Z.default.Instance.bSurviveInGame=1==parseInt(t.revive),this.sGetContainer.clear(),this.sGetContainer.clearGrid(),this.score.string=this._nowPoint.toString(),T.default.Instance.send(ee.E.MsgType.GetPoint,0,1,!1);var s=1==this._nCurLevelTarget||2==this._nCurLevelTarget?this._nEveryLevelTarget-200:this._nEveryLevelTarget;if(this.sprEnergy.width=this._nowPointInRole/s*this._nStartEnergy,this.sprEnergy.width>=this._nStartEnergy&&(this.sprEnergy.width=this._nStartEnergy),null!=this.roleAnim&&(250<=this._nowPointInRole&&this._nowPointInRole<500?this.roleAnim.playAnim(1):500<=this._nowPointInRole&&this._nowPointInRole<s&&this.roleAnim.playAnim(2)),a==ee.E.GameMode.A&&(this.labLevelTopTips.node.parent.active=!0,1==this._nCurLevelTarget||2==this._nCurLevelTarget?(this.labLevelTopTips.string="关卡："+this._nCurLevelTarget.toString(),this.labTargetTopTips.string="目标："+(this._nCurLevelTarget*(this._nEveryLevelTarget-200)).toString()):(this.labLevelTopTips.string="关卡："+this._nCurLevelTarget.toString(),this.labTargetTopTips.string="目标："+((this._nCurLevelTarget-2)*this._nEveryLevelTarget+2*(this._nEveryLevelTarget-200)).toString())),a==ee.E.GameMode.C&&(this.labTimer.string=q.default.formatTime2(1e3*this._remainTime),this.sprTimeNode2_Fg.node.width=this._remainTime/this._totalTime*490,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-245+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y),this._bStartTimeGame=!0),this.createLevelByConfig(n),this.createCubeByConfig(i),null!=t.skillInfo){var r=t.skillInfo;for(var l in r){var c=r[l];this.sPutContainer.getGridByIndex(c).destroyAllCube()}var d=3*r.length;if(T.default.Instance.send(ee.E.MsgType.GetPoint,d,1,!0),this._nCurLevelTarget=Math.floor(this._nowPoint/s)+1,1==this._nCurLevelTarget||2==this._nCurLevelTarget)this.labLevelTopTips.string="关卡："+this._nCurLevelTarget.toString(),this.labTargetTopTips.string="目标："+(this._nCurLevelTarget*(this._nEveryLevelTarget-200)).toString(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=(this._nCurLevelTarget*(this._nEveryLevelTarget-200)).toString();else{var u=(this._nCurLevelTarget-2)*this._nEveryLevelTarget+2*(this._nEveryLevelTarget-200);this.labLevelTopTips.string="关卡："+this._nCurLevelTarget.toString(),this.labTargetTopTips.string="目标："+u.toString(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=u.toString()}a==ee.E.GameMode.C&&this.reduceRemainTime()}}else e||T.default.Instance.send(ee.E.MsgType.StartGame,this._curMode,!0,!1,!0)},e.prototype.onNextStep=function(){if(-1==this._currGuidaceIdx&&(this._currGuidaceIdx=0),4<=this._currGuidaceIdx)this.goGuidaceNode.active=!1;else{this._currGuidaceIdx++,this.animGuidance.PlayBegin();var e=this.sPutContainer.getTotalGrid(),t={},o={};switch(this._currGuidaceIdx){case 1:t={3:3},this.createCubeByConfig(t),o={9:3,15:3},this.createLevelByConfig(o),this.playGuidanceFinger(1,4);break;case 2:for(var a in e){var n=e[a];4!=parseInt(a)&&(n.node.active=!1)}t={4:3},this.createCubeByConfig(t),o={12:3,14:3},this.createLevelByConfig(o),this.playGuidanceFinger(1,4);break;case 3:for(var a in e){n=e[a];1!=parseInt(a)&&3!=parseInt(a)&&4!=parseInt(a)&&5!=parseInt(a)&&7!=parseInt(a)?n.node.active=!1:n.node.active=!0}t={4:3},this.createCubeByConfig(t),o={4:3,10:3,16:3,22:3},this.createLevelByConfig(o),this.playGuidanceFinger(1,4);break;case 4:for(var a in e){(n=e[a]).node.active=!0}t={4:0,5:3},this.createCubeByConfig(t),o={2:1,5:3,7:0,10:3,16:3,20:0,22:3,26:1},this.createLevelByConfig(o),this.playGuidanceFinger(1,4)}var i="guidance_"+this._currGuidaceIdx;q.default.changeSpriteFrame(this.sprGuidance,"atlas/common/common",i)}},e.prototype.playGuidanceFinger=function(e,t){var o=this.sGetContainer.getGridByIndex(e),a=this.goGuidaceNode.convertToNodeSpaceAR(o.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),n=this.sPutContainer.getGridByIndex(t),i=this.goGuidaceNode.convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.nodeFinger.active=!0,this.nodeFinger.stopAllActions(),this.nodeFinger.position=a;var s=cc.moveTo(2,i),r=cc.sequence(s,cc.callFunc(function(){this.nodeFinger.position=a}.bind(this),this)).repeatForever();this.nodeFinger.runAction(r)},e.prototype.onCloseGuidanceAnim=function(){this.bInGuidance&&(console.log("===============onCloseGuidanceAnim================="),this.animGuidance.PlayEnd(4==this._currGuidaceIdx,this.actionFirstUseSuperStar),this.nodeFinger.active=!1,this.nodeFinger.stopAllActions(),this.nodeMaskBg.active&&(this.nodeMaskBg.active=!1,this.bInGuidance=!1))},e.prototype.doSkillAsCleanByNum=function(e,t,o){void 0===o&&(o=null);var u=t,a=this.sPutContainer.getTotalGrid(),p=[];for(var n in a)if(!a[n].isEmpty()){var i=a[n].getAllCubeItem();for(var s in i)if(i[s]){var r=i[s];if(null==o){var l=parseInt(s),c=3*parseInt(n)+l;p.push(c)}else if(o==r.getCubeItemSize()){l=parseInt(s),c=3*parseInt(n)+l;p.push(c)}}}if(0==p.length)return this._bPauseTimeGame=!1,T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0),void(null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect&&(this.FX_curLeftBorderEffect.node.active=!1,this.FX_curRightBorderEffect.node.active=!1,this.FX_curLeftBorderEffect.node.stopAllActions(),this.FX_curRightBorderEffect.node.stopAllActions()));var h=p.length>=e?e:p.length;console.log("listGridId:==================="+p+" ==============nCleanCount:"+h);var f=q.default.getRandomValueDif(0,p.length-1,h);console.log("arrClear:==================="+f);for(var d=function(l){var c=l;if(0!=l){var e=.01*q.default.getRangeRandom(0,50);y.scheduleOnce(function(){var e=this.sEffectContainer.node.convertToNodeSpaceAR(u),t=C.default.Instance.playEffect(ee.E.EffectName.fxSkillBullet,e,.5),o=Math.floor(p[f[l]]/3),a=p[f[l]]%3;console.log("destory ==  "+p[f[l]]+" "+o+" "+a);var n=this.sPutContainer.getGridByIndex(o).node,i=this.sEffectContainer.node.convertToNodeSpaceAR(n.convertToWorldSpaceAR(new cc.Vec2(0,0))),s=cc.moveTo(.4,i),r=cc.sequence(s,cc.callFunc(function(){this.sPutContainer.destroyCube(o,a),this.skillCleanCubes(i,c==f.length-1,!1,!0)}.bind(this),this));t.runAction(r)},e)}else{var t=y.sEffectContainer.node.convertToNodeSpaceAR(u),o=C.default.Instance.playEffect(ee.E.EffectName.fxSkillBullet,t,.5),a=Math.floor(p[f[l]]/3),n=p[f[l]]%3;console.log("destory == "+a);var i=y.sPutContainer.getGridByIndex(a).node,s=y.sEffectContainer.node.convertToNodeSpaceAR(i.convertToWorldSpaceAR(new cc.Vec2(0,0))),r=cc.moveTo(.4,s),d=cc.sequence(r,cc.callFunc(function(){this.sPutContainer.destroyCube(a,n),1==h?this.skillCleanCubes(s,c==f.length-1,!1,!0):this.skillCleanCubes(s,c==f.length-1,!0,!1)}.bind(y),y));o.runAction(d)}},y=this,m=0;m<f.length;m++)d(m)},e.prototype.doSkillRefreshRandomCube=function(){new cc.Vec2(0,0);if(null!=this.roleAnim)this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0));for(var e=this.sGetContainer.getGridTotalLength(),i=0,t=0;t<e;t++){0!=this.sGetContainer.getGridByIndex(t).getCubeNum()&&0}var o=function(e){for(var a=e,n=s.sGetContainer.getGridByIndex(a),t=function(e){var t=e;if(0!=n.getCubeNum()){i++;var o=s.sGetContainer.getCubeByIndex(a,t);if(null==o)return"continue";o.playUsePropAnimHide(),s.scheduleOnce(function(){if(this.sGetContainer.destroyCube(a,t)){var e=0==this.sGetContainer.getCubeNum();this.onCheckShowPropTips(),e&&(this._bPauseTimeGame=!1,console.log("----------------EnabledGridMove!!--------------------"),T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0),this.randomCube(!0),0==this.isCanPut()&&this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverNoSet"),this.scheduleOnce(function(){this.bUsingProp=!1},2))}},.2)}},o=0;o<ee.E.CubeItemSize.Length;o++)t(o)},s=this;for(t=0;t<e;t++)o(t);0==i&&(this.bUsingProp=!1,this._bPauseTimeGame=!1,T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0),null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect&&(this.FX_curLeftBorderEffect.node.active=!1,this.FX_curRightBorderEffect.node.active=!1,this.FX_curLeftBorderEffect.node.stopAllActions(),this.FX_curRightBorderEffect.node.stopAllActions()),this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverNoSet"))},e.prototype.doSkillInRandomCleanLine=function(){var o=new cc.Vec2(0,0);null!=this.roleAnim&&(o=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var a=this.sPutContainer.getTotalGrid();function e(e,t){var o=0;if(0==t)o=a[e].getCubeNum()+a[e+1].getCubeNum()+a[e+2].getCubeNum();else if(1==t){o=a[e].getCubeNum()+a[e+3].getCubeNum()+a[e+6].getCubeNum()}else if(3==t){o=a[0].getCubeNum()+a[4].getCubeNum()+a[8].getCubeNum()}else if(4==t){o=a[2].getCubeNum()+a[4].getCubeNum()+a[6].getCubeNum()}return o}var t=[];t.push({start:"0_0",count:e(0,0)}),t.push({start:"3_0",count:e(3,0)}),t.push({start:"6_0",count:e(6,0)}),t.push({start:"0_1",count:e(0,1)}),t.push({start:"1_1",count:e(1,1)}),t.push({start:"2_1",count:e(2,1)}),t.push({start:"0_3",count:e(0,3)}),t.push({start:"0_4",count:e(0,4)}),t.sort(function(e,t){return t.count-e.count}),console.log(t,t[0]);var n=[],i=parseInt(t[0].start.split("_")[0]),s=parseInt(t[0].start.split("_")[1]);if(0==s){var r=q.default.getRandomValueDif(i,3+i-1,3);for(var l in r){var c=parseInt(r[l]),d=a[c];n.push(d)}}else if(1==s){r=[i,i+3,i+6];for(var l in r.sort(function(){return.5-Math.random()}),console.log(r),r){c=r[l],d=a[c];n.push(d)}}else if(3==s){r=[0,4,8];for(var l in r.sort(function(){return.5-Math.random()}),r){c=r[l],d=a[c];n.push(d)}}else if(4==s){r=[2,4,6];for(var l in r.sort(function(){return.5-Math.random()}),r){c=r[l],d=a[c];n.push(d)}}this._listRestoreCleanCubes=n,this.scheduleOnce(function(){for(var e in n){var t=n[e];this.flyEffectToAddCubes(o,t,3)}},1)},e.prototype.doSkillInRandomCleanCross=function(){var o=new cc.Vec2(0,0);null!=this.roleAnim&&(o=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));for(var e=this.sPutContainer.getTotalGrid(),t=0,a=null,n=null,i=0;i<this.sPutContainer.getGridTotalLength();i++){var s=e[i],r=s.getCubeNum(),l=[];l.push(s),null!=e[i-1]&&this.checkNodeInSameRow(i,i-1)&&(r+=e[i-1].getCubeNum(),l.push(e[i-1])),null!=e[i-2]&&this.checkNodeInSameRow(i,i-2)&&(r+=e[i-2].getCubeNum(),l.push(e[i-2])),null!=e[i+1]&&this.checkNodeInSameRow(i,i+1)&&(r+=e[i+1].getCubeNum(),l.push(e[i+1])),null!=e[i+2]&&this.checkNodeInSameRow(i,i+2)&&(r+=e[i+2].getCubeNum(),l.push(e[i+2])),null!=e[i-3]&&(r+=e[i-3].getCubeNum(),l.push(e[i-3])),null!=e[i-6]&&(r+=e[i-6].getCubeNum(),l.push(e[i-6])),null!=e[i+3]&&(r+=e[i+3].getCubeNum(),l.push(e[i+3])),null!=e[i+6]&&(r+=e[i+6].getCubeNum(),l.push(e[i+6])),t<r&&(t=r,a=s,n=l)}console.log(t,a.getIndex(),n),this._listRestoreCleanCubes=n;this.scheduleOnce(function(){for(var e in n){var t=n[e];this.flyEffectToAddCubes(o,t,5)}},1)},e.prototype.doSkillInRandomCleanX=function(){var o=new cc.Vec2(0,0);null!=this.roleAnim&&(o=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var e=this.sPutContainer.getTotalGrid(),a=[];a.push(e[0]),a.push(e[2]),a.push(e[4]),a.push(e[6]),a.push(e[8]),console.log(a),this._listRestoreCleanCubes=a;this.scheduleOnce(function(){for(var e in a){var t=a[e];this.flyEffectToAddCubes(o,t,5)}},1)},e.prototype.doSkillInRandomCleanSquare=function(e){var o=new cc.Vec2(0,0);null!=this.roleAnim&&(o=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var t=[],a=this.sPutContainer.getTotalGrid();function n(e){return a[e].getCubeNum()+a[e+1].getCubeNum()+a[e+3].getCubeNum()+a[e+4].getCubeNum()}t.push({start:0,count:n(0)}),t.push({start:1,count:n(1)}),t.push({start:3,count:n(3)}),t.push({start:4,count:n(4)}),t.sort(function(e,t){return t.count-e.count}),console.log(t,t[0]);var i=[],s=t[0].start,r=e*e;i.push(a[s]),i.push(a[s+1]),i.push(a[s+3]),i.push(a[s+4]),this._listRestoreCleanCubes=i,this.scheduleOnce(function(){for(var e in i){var t=i[e];this.flyEffectToAddCubes(o,t,r)}},1)},e.prototype.doSkillInCleanAllCubes=function(){var o=new cc.Vec2(0,0);null!=this.roleAnim&&(o=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)),console.log(o,this.roleAnim));var e=this.sPutContainer.getTotalGrid(),a=[],t=q.default.getRandomValueDif(0,this.sPutContainer.getGridTotalLength()-1,9);for(var n in console.log("arrRandomIdx   ",t),t){var i=e[parseInt(t[n])];a.push(i)}this._listRestoreCleanCubes=a,this.scheduleOnce(function(){for(var e in a){var t=a[e];this.flyEffectToAddCubes(o,t,this.sPutContainer.getGridTotalLength())}},1)},e.prototype.onSkillFillGrids=function(){this._nCurrFillCount=0,this._listCleanCubes=[],this._bPauseTimeGame=!0,T.default.Instance.send(ee.E.MsgType.EnableGridMove,!1);var e=X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId),t=parseInt(e);switch(console.log("nCurrRoleIdx:"+t),t){case 1:this.doSkillInRandomCleanLine();break;case 2:this.doSkillInRandomCleanCross();break;case 3:this.doSkillInCleanAllCubes();break;case 4:this.doSkillInRandomCleanX();break;case 5:this.doSkillInRandomCleanSquare(2)}},e.prototype.onUseSkill=function(e,t){if(this.bUsingProp)this.scheduleOnce(function(){this.bUsingProp=!1},2);else{var o=X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId),l=(parseInt(o),0),c=new cc.Vec2(0,0);null!=this.roleAnim&&(c=this.roleAnim.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var d=[],a=function(e){l++;var t=u._listCleanCubes[e],o=(t.getIndex(),q.default.getRangeRandom(0,50),u.sEffectContainer.node.convertToNodeSpaceAR(c)),a=C.default.Instance.playEffect(ee.E.EffectName.fxSkillBullet,o,-1);a.position=o;var n=u.sEffectContainer.node.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),i=t.node.convertToWorldSpaceAR(new cc.Vec2(0,0));d.push(i);var s=cc.moveTo(.4,n),r=cc.sequence(s,cc.callFunc(function(){C.default.Instance.remove(a),t.destroyAllCube();var e=this.node.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.skillCleanCubes(e,l==this._listCleanCubes.length,!1,!1)}.bind(u),u));a.runAction(r)},u=this;for(var n in this._listCleanCubes)a(n);this.scheduleOnce(function(){if(this._curMode==ee.E.GameMode.A)if(1==this._nCurLevelTarget)this._nowPoint>=this._nCurLevelTarget*(this._nEveryLevelTarget-200)&&(console.log("===============showLevelTarget=================:"+this._nCurLevelTarget),this._nCurLevelTarget+=1,this.labLevelTopTips.string="关卡："+this._nCurLevelTarget.toString(),this.labTargetTopTips.string="目标："+(this._nCurLevelTarget*(this._nEveryLevelTarget-200)).toString(),this.animLevelArrive.node.active=!0,this.animLevelArrive.stop(),this.animLevelArrive.play(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=(this._nCurLevelTarget*(this._nEveryLevelTarget-200)).toString(),this.scheduleOnce(function(){this.animLevelArrive.node.active=!1},1.5));else{var e=(this._nCurLevelTarget-1)*this._nEveryLevelTarget+2*(this._nEveryLevelTarget-200);console.log("===============showLevelTarget=================:"+this._nCurLevelTarget),this._nCurLevelTarget+=1,this.labLevelTopTips.string="关卡："+this._nCurLevelTarget.toString(),this.labTargetTopTips.string="目标："+e.toString(),this.animLevelArrive.node.active=!0,this.animLevelArrive.stop(),this.animLevelArrive.play(),this.labLevelArriveTips.string=this._nCurLevelTarget.toString(),this.labTargetArriveTips.string=e.toString(),this.scheduleOnce(function(){this.animLevelArrive.node.active=!1},1.5)}for(var t in this._curMode==ee.E.GameMode.C&&this.reduceRemainTime(),T.default.Instance.send(ee.E.MsgType.GetPoint,3*this._listCleanCubes.length,1,!0),d){var o=d[t];T.default.Instance.send(ee.E.MsgType.ShowGetPointEffect,o,!0)}if(this.bInGuidance&&(this.bInGuidance=!1,this.goGuidaceNode.active=!1,this.bInGuidanceExtra=!0,X.default.Instance.saveLocalData(ee.E.DataKey.guidanceState,1),X.default.Instance.androidSendEvent(ee.E.ttEventName.finishguide),this.btnBack.node.active=!0,this.btnPropHammer.node.active=this._curMode!=ee.E.GameMode.E,this.btnPropSuperStar.node.active=this._curMode!=ee.E.GameMode.E,this.btnPropUndoOperate.node.active=this._curMode!=ee.E.GameMode.E,X.default.Instance.ttIsTt()&&(this.btnRecordVideo.node.parent.active=!0,this.maskUseProp.active=!1),this.updatePropNum(),this._curMode=ee.E.GameMode.A,this.randomCube(),this.bInGuidanceExtra)){this.nodePropGuide.active=!0;var a=this.node.convertToNodeSpaceAR(this.btnPropHammer.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.nodePropGuide.position=a;var n=cc.scaleTo(.5,1.2),i=cc.scaleTo(.5,.8),s=cc.sequence(n,i).repeatForever(),r=this.nodePropGuide.getChildByName("sprFinger");r.stopAllActions(),r.runAction(s),this.nExtraGuideStep=1,this.nodeMaskBg.active=!0}this.nodeRoleSkillCol.active=!1},1),this.sprEnergy.width=0}},e.prototype.checkNodeInSameRow=function(e,t){return Math.floor(e/Math.sqrt(this.sPutContainer.getGridTotalLength()))==Math.floor(t/Math.sqrt(this.sPutContainer.getGridTotalLength()))},e.prototype.flyEffectToAddCubes=function(c,d,u){var p=d.getIndex(),h=3-d.getCubeNum();if(0!=h&&this._bEffectSwitch)for(var f=0,e=function(l){if(d.getCubeItem(l)instanceof I.default);else{t._nCurrFillCount++;var e=10<t._nCurrFillCount?.05*t._nCurrFillCount:.2*t._nCurrFillCount;t.scheduleOnce(function(){var e=this.sEffectContainer.node.convertToNodeSpaceAR(c),n=C.default.Instance.playEffect(ee.E.EffectName.fxSkillFillCube,e,-1),t=n.getChildByName("tex");t.scale=0;var i=this.sEffectContainer.node.convertToNodeSpaceAR(d.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),o=180*cc.Vec2.UP.signAngle(new cc.Vec2(i.x-e.x,i.y-e.y))/Math.PI;n.rotation=o;var a=cc.moveTo(.4,i),s=cc.scaleTo(.2,1),r=cc.sequence(a,cc.callFunc(function(){C.default.Instance.remove(n),C.default.Instance.playEffect(ee.E.EffectName.fxSkillFillHitCube,i,2),f++;var e=null;(e=0<Z.default.Instance.cubePool.size()?Z.default.Instance.cubePool.get():cc.instantiate(this.nodeItem)).parent=this.sPutContainer.node;var t=e.getComponent(I.default),o=this.sPutContainer.node.convertToNodeSpaceAR(d.node.convertToWorldSpaceAR(new cc.Vec2(0,0))),a=q.default.getRangeRandom(0,ee.E.CubeItemType.Length-1);t.init(a,l,new cc.Vec2(o.x,o.y)),t.node.scale=1,e.active=!0;this.sPutContainer.putCubeByIndex(p,t);f==h&&(this._listCleanCubes.push(d),this._listCleanCubes.length==u&&this.onClickUseSkill())}.bind(this),this));n.runAction(r),t.runAction(s)},e)}},t=this,o=0;o<ee.E.CubeItemSize.Length;o++)e(o);else{cc.log("========================cubeNum full"+p);var a=10<this._nCurrFillCount?.05*this._nCurrFillCount:.2*this._nCurrFillCount;this.scheduleOnce(function(){this._listCleanCubes.push(d),this._listCleanCubes.length==u&&this.onClickUseSkill()},a)}},e.prototype.skillCleanCubes=function(e,o,a,n){(void 0===n&&(n=!1),this._bEffectSwitch)&&(Q.default.Instance.playSound(ee.E.SoundType.eliminate),C.default.Instance.playEffect(ee.E.EffectName.fxCubeClean,e,1.5).getComponent(cc.Animation).play());this.scheduleOnce(function(){if(a||(this._bPauseTimeGame=a,console.log("----------------EnabledGridMove!!--------------------"),T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0)),o&&null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect){this.FX_curLeftBorderEffect.stop();var e=cc.fadeTo(1,0);this.FX_curLeftBorderEffect.node.runAction(e),this.FX_curRightBorderEffect.stop();var t=cc.fadeTo(1,0);this.FX_curRightBorderEffect.node.runAction(t),this.scheduleOnce(function(){null!=this.FX_curLeftBorderEffect&&null!=this.FX_curRightBorderEffect&&(this.FX_curLeftBorderEffect.node.active=!1,this.FX_curRightBorderEffect.node.active=!1,this.FX_curLeftBorderEffect.node.stopAllActions(),this.FX_curRightBorderEffect.node.stopAllActions())},1.3)}this.onCheckShowPropTips(),n&&(this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverNoSet"))},1.3)},e.prototype.addGamePropShareGet=function(e,t){this.dictPropShareInGames[t]++},e.prototype.updatePropNum=function(){var e=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnProp);null!=e&&(null!=e[ee.E.PropType.kHammer]&&(this.labHammerNum.string=e[ee.E.PropType.kHammer]),null!=e[ee.E.PropType.kSuperStar]&&(this.labSuperStarNum.string=e[ee.E.PropType.kSuperStar]),null!=e[ee.E.PropType.kUndoOperate]&&(this.labUndoOperateNum.string=e[ee.E.PropType.kUndoOperate]),this.nodeHammerAdd.active=0==parseInt(e[ee.E.PropType.kHammer]),this.nodeSuperStarAdd.active=0==parseInt(e[ee.E.PropType.kSuperStar]),this.nodeUndoOperateAdd.active=0==parseInt(e[ee.E.PropType.kUndoOperate]))},e.prototype.onUseProp=function(e){console.log("onUseProp:",e),T.default.Instance.send(ee.E.MsgType.EnableGridMove,!1),this.bUsingProp=!0;var t=e==ee.E.PropType.kHammer?ee.E.DataKey.PropHammerFirstUse:ee.E.DataKey.PropSuperStarFirstUse;e==ee.E.PropType.kUndoOperate&&(t=ee.E.DataKey.PropUnDoOperateFirstUse);var o=X.default.Instance.loadLocalData(t);if(0==parseInt(o)){this.bInGuidance=!0,this.goGuidaceNode.active=!0,this.animGuidance.PlayBegin(),X.default.Instance.saveLocalData(t,1);var a=e==ee.E.PropType.kHammer?"guidance_prop1":"guidance_prop2";if(e==ee.E.PropType.kUndoOperate&&(a="guidance_prop3"),q.default.changeSpriteFrame(this.sprGuidance,"atlas/common/common",a),this.nodeMaskBg.active=!0,e==ee.E.PropType.kSuperStar){var n=this;this.actionFirstUseSuperStar=function(){n.onPropSuperStarTrigger()}}else null!=this.actionFirstUseSuperStar&&(this.actionFirstUseSuperStar=null)}else null!=this.actionFirstUseSuperStar&&(this.actionFirstUseSuperStar=null);if(e==ee.E.PropType.kHammer)T.default.Instance.send(ee.E.MsgType.EnableGridPropUse,!0),this._bPauseTimeGame=!0,this.maskUseProp.active=!0;else if(e==ee.E.PropType.kSuperStar)1==parseInt(o)&&this.onPropSuperStarTrigger();else{if(null!=this.roleAnim){var i=X.default.Instance.loadLocalData(ee.E.DataKey.userRoleId,"1");oe.default.Instance.putRole(i.toString(),this.roleAnim.node),this.roleAnim=null}this.reStoreGameScene(),this.saveGameSceneInfo(),this.btnPropUndoOperate.interactable=!1,this.maskUseProp.active=!1,this.bUsingProp=!1,this._bPauseTimeGame=!1,T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0),T.default.Instance.send(ee.E.MsgType.EnableGridPropUse,!1),this.dictPropUseInGames[ee.E.PropType.kUndoOperate]++;var s=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnProp),r=parseInt(s[ee.E.PropType.kUndoOperate]);r--,Z.default.Instance.nUsePropInGame++,s[ee.E.PropType.kUndoOperate]=r,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.userOwnProp,s),X.default.Instance.androidSendEvent(ee.E.ttEventName.onitemuse,{itemid:3}),this.updatePropNum(),this.onCheckShowPropTips(),this.onClickMaskUseProp()}},e.prototype.onPropHammerTrigger=function(e,t){if(!this.bPlayingHammer)if(t instanceof f.default)if(0<t.getCubeNum()){var o=this.node.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));this.animPropHammer.node.position=new cc.Vec2(o.x+20,o.y+40),this.animPropHammer.node.active=!0,this.animPropHammer.stop(),this.animPropHammer.play(),this.bPlayingHammer=!0,this.scheduleOnce(function(){this.animPropHammer.node.active=!1,Q.default.Instance.playSound(ee.E.SoundType.eliminate),C.default.Instance.playEffect(ee.E.EffectName.fxCubeClean,new cc.Vec2(o.x,o.y),1.5).getComponent(cc.Animation).play(),t.destroyAllCube(),this.scheduleOnce(function(){T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0),T.default.Instance.send(ee.E.MsgType.EnableGridPropUse,!1),this.dictPropUseInGames[ee.E.PropType.kHammer]++;var e=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnProp),t=parseInt(e[ee.E.PropType.kHammer]);t--,Z.default.Instance.nUsePropInGame++,e[ee.E.PropType.kHammer]=t,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.userOwnProp,e),X.default.Instance.androidSendEvent(ee.E.ttEventName.onitemuse,{itemid:1}),this.updatePropNum(),this.onCheckShowPropTips(),this.onClickMaskUseProp(),this.bPlayingHammer=!1,this.bUsingProp=!1,this._bPauseTimeGame=!1,0==this.sGetContainer.getCubeNum()&&(this.randomCube(),0==this.isCanPut()&&this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverNoSet")),this.saveGameSceneInfo()}.bind(this),1)}.bind(this),.5)}else this.maskUseProp.active=!1,this.bUsingProp=!1,this._bPauseTimeGame=!1,T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0),T.default.Instance.send(ee.E.MsgType.EnableGridPropUse,!1);else this.maskUseProp.active=!1,this.bUsingProp=!1,this._bPauseTimeGame=!1,T.default.Instance.send(ee.E.MsgType.EnableGridMove,!0),T.default.Instance.send(ee.E.MsgType.EnableGridPropUse,!1)},e.prototype.onPropSuperStarTrigger=function(){this.dictPropUseInGames[ee.E.PropType.kSuperStar]++;var e=X.default.Instance.loadLocalJsonData(ee.E.JsonDataKey.userOwnProp),t=parseInt(e[ee.E.PropType.kSuperStar]);t--,Z.default.Instance.nUsePropInGame++,e[ee.E.PropType.kSuperStar]=t,X.default.Instance.saveLocalJsonData(ee.E.JsonDataKey.userOwnProp,e),X.default.Instance.androidSendEvent(ee.E.ttEventName.onitemuse,{itemid:2}),this.updatePropNum(),this.doSkillRefreshRandomCube(),console.log("---------------onPropSuperStarTrigger---------------",this.nodeRoleSkillCol.active,this.roleAnim),this.saveGameSceneInfo()},e.prototype.onShow=function(e,t){cc.log("msgType = "+e+" param = "+t),this.onStartByMode(ee.E.MsgType.ChangeMode,t[0],!0,t[1],t[2],t[3])},e.prototype.onSaveShareInfo=function(e,t,o){console.log("-------onSaveShareInfo---------------------",e,t,o),this.shareMode=t,this.shareId=o},e.prototype.onSaveGameInfo=function(e){this._StartGaming&&this._curMode!=ee.E.GameMode.E&&this.saveGameSceneInfo(!0)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnBack.node.scale=1,this.btnRecordVideo.node.scale=1},e.prototype.onLoad=function(){cc.log("=================onLoad=================="),S.default.Instance.WinSize.width<750&&(S.default.Instance.Canvas.fitWidth=!0,S.default.Instance.Canvas.fitHeight=!1,this.nodeBg.height=cc.director.getWinSize().height,console.log("this.nodeScoreBg.height = "+this.nodeScoreBg.height),this.nodeScoreBg.height+=(cc.director.getWinSize().height-1334)/2,console.log("after this.nodeScoreBg.height = "+this.nodeScoreBg.height));for(var e=0;e<ee.E.CubeItemType.Length;e++){ee.E.CubeItemType[e];for(var t=0;t<3;t++){var o=(e+"_"+t).toString();this._arrCubeType1.push(o)}}C.default.Instance.init(this.sEffectContainer.node)},e.prototype.start=function(){},e.prototype.update=function(e){if(this._curMode!=ee.E.GameMode.E||this._EndDailyTimer||(0==this._dailyType?(this._dailyNChallengeTime=this._dailyNChallengeTime+e,this.labTimer.string=q.default.formatTime(this._dailyNChallengeTime)):(this._dailyDChallengeTime=this._dailyDChallengeTime+e,this.labTimer.string=q.default.formatTime(this._dailyDChallengeTime))),this._curMode==ee.E.GameMode.C&&this._bStartTimeGame&&!this._bPauseTimeGame){if(this._remainTime<=0)return this.nodeTime2_Effect.active=!1,T.default.Instance.send(ee.E.MsgType.GameRemainTimeEnd,!1),void this.onShowGameOver(ee.E.MsgType.ShowGameOver,"txtGameOverTimeEnd");if(this._remainTime<=10&&!this.bBlinkInFiveSecond){this.bBlinkInFiveSecond=!0,this.timeLimitFiveSecond.active=!0,this.sprFxBlinkTimeNode.active=!0;var t=cc.fadeTo(1,0),o=cc.fadeTo(1,255),a=cc.sequence(t,o).repeatForever();this.timeLimitFiveSecond.runAction(a);var n=cc.fadeTo(1,0),i=cc.fadeTo(1,255),s=cc.sequence(n,i).repeatForever();this.sprFxBlinkTimeNode.runAction(s)}this._remainTime=this._remainTime-e,this.labTimer.string=q.default.formatTime2(1e3*this._remainTime),this.sprTimeNode2_Fg.node.width=this._remainTime/this._totalTime*490,this.nodeTime2_Effect.setPosition(this.sprTimeNode2_Fg.node.width-245+this.nodeTimeEffectOffset,this.nodeTime2_Effect.getPosition().y)}},__decorate([d({type:cc.Animation,displayName:"抖屏动画",tooltip:"抖屏动画"})],e.prototype,"animShakeAnim",void 0),__decorate([d({type:cc.Node,displayName:"顶容器",tooltip:"顶部容器，主要放菜单"})],e.prototype,"nodeTop",void 0),__decorate([d({type:cc.Node,displayName:"中容器",tooltip:"中间容器，主要放游戏操作的对象"})],e.prototype,"nodeCenter",void 0),__decorate([d({type:cc.Node,displayName:"底容器",tooltip:"底部容器，主要放广告"})],e.prototype,"nodeBottom",void 0),__decorate([d({type:a.default,displayName:"放容器",tooltip:"放方块的容器"})],e.prototype,"sPutContainer",void 0),__decorate([d({type:a.default,displayName:"放容器",tooltip:"放特效的容器"})],e.prototype,"sEffectContainer",void 0),__decorate([d({type:a.default,displayName:"拿容器",tooltip:"拿方块的容器"})],e.prototype,"sGetContainer",void 0),__decorate([d({type:cc.Node,displayName:"方块",tooltip:"方块的样板，包括大中小"})],e.prototype,"nodeItem",void 0),__decorate([d({type:cc.Node,displayName:"位置点",tooltip:"显示放置的位置的点"})],e.prototype,"nodePoint",void 0),__decorate([d({type:cc.Sprite,displayName:"超越好友显示图片"})],e.prototype,"sprSurpassFriend",void 0),__decorate([d({type:cc.Node,displayName:"加载角色",tooltip:"加载角色父节点"})],e.prototype,"nodeLoadRole",void 0),__decorate([d({type:cc.Node,displayName:"角色特效节点",tooltip:"角色特效节点"})],e.prototype,"nodeRoleEffectPoint",void 0),__decorate([d(cc.Node)],e.prototype,"FX_SkillCanSkillIdle",void 0),__decorate([d(cc.Node)],e.prototype,"FX_RoleCanSkillFire",void 0),__decorate([d(cc.Animation)],e.prototype,"FX_RoleCanSkillFire2",void 0),__decorate([d(cc.Animation)],e.prototype,"FX_curLeftBorderEffect",void 0),__decorate([d(cc.Animation)],e.prototype,"FX_curRightBorderEffect",void 0),__decorate([d(cc.Node)],e.prototype,"FX_nodeRoleFireRotateItem",void 0),__decorate([d(cc.Button)],e.prototype,"btnAdsGetTips",void 0),__decorate([d(cc.Node)],e.prototype,"nodeDailyContainer",void 0),__decorate([d(i.default)],e.prototype,"nodeDailyView",void 0),__decorate([d(cc.Node)],e.prototype,"nodeDailyViewMask",void 0),__decorate([d(cc.Node)],e.prototype,"btnDailyViewLeft",void 0),__decorate([d(cc.Node)],e.prototype,"btnDailyViewRight",void 0),__decorate([d(cc.Label)],e.prototype,"nodeDailyStepRemain",void 0),__decorate([d(cc.Node)],e.prototype,"nodeDailyAnswer",void 0),__decorate([d(cc.Node)],e.prototype,"nodeDailyShareTips",void 0),__decorate([d({type:cc.Button,displayName:"返回按钮"})],e.prototype,"btnBack",void 0),__decorate([d({type:cc.Label,displayName:"得分"})],e.prototype,"score",void 0),__decorate([d({type:cc.Label,displayName:"连击"})],e.prototype,"combo",void 0),__decorate([d({type:cc.Label,displayName:"最高得分"})],e.prototype,"maxScore",void 0),__decorate([d({type:cc.Node,displayName:"角色技能碰撞"})],e.prototype,"nodeRoleSkillCol",void 0),__decorate([d({type:cc.Animation,displayName:"combo动画"})],e.prototype,"comboAni",void 0),__decorate([d({type:cc.Sprite,displayName:"combo动画图片"})],e.prototype,"sprComboAni",void 0),__decorate([d({type:cc.Animation,displayName:"得分动画"})],e.prototype,"pointAni",void 0),__decorate([d({type:cc.Animation,displayName:"限时模式动画"})],e.prototype,"animReadyGo",void 0),__decorate([d({type:cc.Sprite,displayName:"限时模式背景"})],e.prototype,"timeBg",void 0),__decorate([d({type:cc.Node,displayName:"限时模式倒数5秒图片"})],e.prototype,"timeLimitFiveSecond",void 0),__decorate([d({type:cc.Node,displayName:"能量进度"})],e.prototype,"sprEnergy",void 0),__decorate([d({type:cc.Node,displayName:"道具节点"})],e.prototype,"propContainer",void 0),__decorate([d(cc.Node)],e.prototype,"goGuidaceNode",void 0),__decorate([d(n.default)],e.prototype,"animGuidance",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprGuidance",void 0),__decorate([d(cc.Node)],e.prototype,"nodeFinger",void 0),__decorate([d(cc.Node)],e.prototype,"nodePropGuide",void 0),__decorate([d(cc.Node)],e.prototype,"nodeMaskBg",void 0),__decorate([d(cc.Node)],e.prototype,"goTimerNode",void 0),__decorate([d(cc.Node)],e.prototype,"goAddTimeLizi",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprFxAddTimeNode",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprFxAddTimeNode2",void 0),__decorate([d(cc.Node)],e.prototype,"sprFxBlinkTimeNode",void 0),__decorate([d(cc.Label)],e.prototype,"labTimer",void 0),__decorate([d(cc.Node)],e.prototype,"goTimerNode2",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprTimeNode2_Fg",void 0),__decorate([d(cc.Node)],e.prototype,"nodeTime2_Effect",void 0),__decorate([d(cc.Node)],e.prototype,"maskUseProp",void 0),__decorate([d({type:cc.Button,displayName:"锤子道具按钮"})],e.prototype,"btnPropHammer",void 0),__decorate([d({type:cc.Button,displayName:"超能星星道具按钮"})],e.prototype,"btnPropSuperStar",void 0),__decorate([d({type:cc.Button,displayName:"撤销道具按钮"})],e.prototype,"btnPropUndoOperate",void 0),__decorate([d(cc.Label)],e.prototype,"labHammerNum",void 0),__decorate([d(cc.Label)],e.prototype,"labSuperStarNum",void 0),__decorate([d(cc.Label)],e.prototype,"labUndoOperateNum",void 0),__decorate([d(cc.Node)],e.prototype,"nodeHammerAdd",void 0),__decorate([d(cc.Node)],e.prototype,"nodeSuperStarAdd",void 0),__decorate([d(cc.Node)],e.prototype,"nodeUndoOperateAdd",void 0),__decorate([d(cc.Animation)],e.prototype,"animPropHammer",void 0),__decorate([d(cc.Node)],e.prototype,"nodePropUseTips",void 0),__decorate([d(cc.Node)],e.prototype,"nodeDangerTips",void 0),__decorate([d(cc.Node)],e.prototype,"nodeNewColorTips",void 0),__decorate([d(cc.Node)],e.prototype,"nodeLongTimeTips",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprNewColor",void 0),__decorate([d(cc.Label)],e.prototype,"labLevelTopTips",void 0),__decorate([d(cc.Label)],e.prototype,"labTargetTopTips",void 0),__decorate([d(cc.Animation)],e.prototype,"animLevelArrive",void 0),__decorate([d(cc.Label)],e.prototype,"labLevelArriveTips",void 0),__decorate([d(cc.Label)],e.prototype,"labTargetArriveTips",void 0),__decorate([d(cc.Animation)],e.prototype,"animGameOver",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprOverResult",void 0),__decorate([d({type:cc.Node,displayName:"背景"})],e.prototype,"nodeBg",void 0),__decorate([d({type:cc.Node,displayName:"分数背景"})],e.prototype,"nodeScoreBg",void 0),__decorate([d({type:cc.Button,displayName:"录屏按钮"})],e.prototype,"btnRecordVideo",void 0),e=__decorate([c],e)}(s.default);o.default=u,cc._RF.pop()},{"../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Game/CubeContainer":"CubeContainer","../Game/CubeItem":"CubeItem","../Game/DailyLevelConfig":"DailyLevelConfig","../Game/DailyViewMgr":"DailyViewMgr","../Game/GridItem":"GridItem","../Game/GuidanceMgr":"GuidanceMgr","../Game/RoleAnim":"RoleAnim","../Game/RoleConfig":"RoleConfig","../Game/RoleMgr":"RoleMgr","../Game/TipsMgr":"TipsMgr","../Tools/EffectMgr":"EffectMgr","../Tools/FYAudioCtl":"FYAudioCtl","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIGetMenuPanel:[function(e,t,o){"use strict";cc._RF.push(t,"53e58qi8aNEHqJhJEGNCIIF","UIGetMenuPanel"),Object.defineProperty(o,"__esModule",{value:!0});var p=e("../Tools/FYUtility"),h=e("../Game/RoleConfig"),i=e("../Tools/FYMessenger"),f=e("../Common/E"),a=e("../Tools/FYBaseUIPanel"),y=e("../Game/RoleMgr"),m=e("../Tools/FYResMgr"),s=e("../Tools/FYUIMgr"),n=cc._decorator,r=n.ccclass,l=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.btnSure=null,e.nodeMask=null,e.nodeRole=null,e.labSkillDesc1=null,e.labSkillDesc2=null,e.nodeProp=null,e.nodeGold=null,e.nodeLoad=null,e.nodeTipsRole=null,e.nodeTipsGold=null,e.labNum2=null,e.nodeGrid=null,e.nodeStar=null,e.sprPropIcon=null,e.getInfo=null,e.delegateClose=null,e.nodeGetAnimGoldSet=null,e.nodeGetAnimGoldNum=null,e.labGetGoldNum=null,e.nodeGetAnimPropSet=null,e.nodeGetAnimGoldItem=null,e.nodeGetAnimPropItem=null,e.nodeWidget=null,e.bClickSureState=!1,e}return __extends(e,t),e.prototype.getRoleSkillDescIdx=function(e){var t=0;switch(e){case f.E.RoleType.QQ:t=1;break;case f.E.RoleType.Duck:t=2;break;case f.E.RoleType.Cat:t=3;break;case f.E.RoleType.Octopus:t=4;break;case f.E.RoleType.Bird:t=3}return t},e.prototype.onShow=function(e,t){var o=t[0],a=t[1],n=t[2];console.log(o,a,n),this.initUI(o,a,n)},e.prototype.initUI=function(e,t,o){if(void 0===t&&(t=null),void 0===o&&(o=-1),this.delegateClose=t,this.anim.play(),this.btnSure.getComponent(cc.Sprite).node.color=this.btnSure.normalColor,this.getInfo=e,this.nodeRole.active=!1,this.nodeGold.active=!1,this.nodeProp.active=!1,this.labNum2.node.active=!1,this.nodeTipsRole.active=!1,this.nodeTipsGold.active=!1,this.getInfo.getType==f.E.GetType.kGetOrange){if(0==o){var a=m.default.Instance.loadSpriteFrame("getAllRoles");this.sprPropIcon.spriteFrame=a,this.nodeTipsGold.active=!0}if(1==o){var n=m.default.Instance.loadSpriteFrame("unlockRoleInGetMenu");console.log("=====================================",n),this.nodeTipsGold.getComponent(cc.Sprite).spriteFrame=n,this.nodeTipsGold.active=!0}this.nodeGold.active=!0,this.labNum2.node.active=!0}else if(this.getInfo.getType==f.E.GetType.kGetProp){this.nodeProp.active=!0,this.labNum2.node.active=!0;var i=h.default.Instance.getPropInfoByPropId(e.propType).icon,s=m.default.Instance.loadSpriteFrame(i);this.sprPropIcon.spriteFrame=s}else if(this.getInfo.getType==f.E.GetType.kGetRole||this.getInfo.getType==f.E.GetType.kGetExpCard){2==o&&(this.nodeTipsRole.active=!0),this.nodeRole.active=!0,this.nodeLoad.removeAllChildren();var r=y.default.Instance.getRoleInView(this.getInfo.roleId.toString()),l=(p.default.addChild(this.nodeLoad,r),h.default.Instance.getRoleInfoByRoleId(this.getInfo.roleId.toString()));this.labSkillDesc1.string="分数："+l.point.toString()+"%",this.labSkillDesc2.string="技能："+l.desc.toString();var c="prizeSkillDesc"+this.getRoleSkillDescIdx(this.getInfo.roleId.toString()),d=(m.default.Instance.loadSpriteFrame(c),l.star);this.nodeGrid.removeAllChildren();for(var u=0;u<d;u++)p.default.addChild(this.nodeGrid,this.nodeStar)}null!=this.labNum2&&(this.labNum2.string="X"+this.getInfo.getNum.toString())},e.prototype.onClickBtnSure=function(){if(!this.bClickSureState)if(i.default.Instance.send(f.E.MsgType.PlayClickAudio),this.getInfo.getType==f.E.GetType.kGetProp){this.bClickSureState=!0,this.nodeWidget.active=!1,this.nodeGetAnimPropSet.node.active=!0,this.nodeTipsRole.active=!1,this.nodeTipsGold.active=!1,this.labNum2.node.active=!1,this.btnSure.node.active=!1,this.nodeGetAnimPropSet.play();var o=[],e=this.getInfo.getNum;this.nodeGetAnimPropItem.node.active=!1;var t=0;t=4<e?.15:.05*e+.2;for(var a=0;a<e;a++)this.scheduleOnce(function(){var e=p.default.addChild(this.nodeGetAnimPropItem.node.parent,this.nodeGetAnimPropItem.node),t=e.getComponent(cc.Animation);o.push(e),t.play()},t*a);this.scheduleOnce(function(){for(var e in o){o[e].destroy()}this.bClickSureState=!1,this.nodeWidget.active=!0,this.btnSure.node.active=!0,this.nodeGetAnimPropItem.node.active=!0,this.nodeGetAnimPropSet.node.active=!1,s.default.Instance.hide(f.E.UIPath.UIGetMenuPanel),null!=this.delegateClose&&this.delegateClose()},.6)}else if(this.getInfo.getType==f.E.GetType.kGetOrange){this.bClickSureState=!0,this.nodeWidget.active=!1,this.labNum2.node.active=!1,this.btnSure.node.active=!1,this.nodeTipsRole.active=!1,this.nodeTipsGold.active=!1,this.nodeGetAnimGoldSet.node.parent.active=!0,this.labGetGoldNum.string="X"+this.getInfo.getNum.toString(),this.nodeGetAnimGoldSet.play(),this.nodeGetAnimGoldNum.play();var n=[];this.nodeGetAnimGoldItem.node.active=!1;for(a=0;a<6;a++)this.scheduleOnce(function(){var e=p.default.addChild(this.nodeGetAnimGoldItem.node.parent,this.nodeGetAnimGoldItem.node);e.position=new cc.Vec2(0,42.8);var t=e.getComponent(cc.Animation);n.push(e),t.play()},.15*a);this.scheduleOnce(function(){for(var e in n){n[e].destroy()}this.bClickSureState=!1,this.nodeWidget.active=!0,this.btnSure.node.active=!0,this.nodeGetAnimGoldSet.node.parent.active=!1,this.nodeGetAnimGoldItem.node.active=!0,s.default.Instance.hide(f.E.UIPath.UIGetMenuPanel),null!=this.delegateClose&&this.delegateClose()},1)}else s.default.Instance.hide(f.E.UIPath.UIGetMenuPanel),null!=this.delegateClose&&this.delegateClose()},e.prototype.onClickMask=function(){this.onClickBtnSure()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnSure.node.scale=1,this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this)},__decorate([l(cc.Animation)],e.prototype,"anim",void 0),__decorate([l(cc.Button)],e.prototype,"btnSure",void 0),__decorate([l(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([l(cc.Node)],e.prototype,"nodeRole",void 0),__decorate([l(cc.Label)],e.prototype,"labSkillDesc1",void 0),__decorate([l(cc.Label)],e.prototype,"labSkillDesc2",void 0),__decorate([l(cc.Node)],e.prototype,"nodeProp",void 0),__decorate([l(cc.Node)],e.prototype,"nodeGold",void 0),__decorate([l(cc.Node)],e.prototype,"nodeLoad",void 0),__decorate([l(cc.Node)],e.prototype,"nodeTipsRole",void 0),__decorate([l(cc.Node)],e.prototype,"nodeTipsGold",void 0),__decorate([l(cc.Label)],e.prototype,"labNum2",void 0),__decorate([l(cc.Node)],e.prototype,"nodeGrid",void 0),__decorate([l(cc.Node)],e.prototype,"nodeStar",void 0),__decorate([l(cc.Sprite)],e.prototype,"sprPropIcon",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimGoldSet",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimGoldNum",void 0),__decorate([l(cc.Label)],e.prototype,"labGetGoldNum",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimPropSet",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimGoldItem",void 0),__decorate([l(cc.Animation)],e.prototype,"nodeGetAnimPropItem",void 0),__decorate([l(cc.Node)],e.prototype,"nodeWidget",void 0),e=__decorate([r],e)}(a.default);o.default=c,cc._RF.pop()},{"../Common/E":"E","../Game/RoleConfig":"RoleConfig","../Game/RoleMgr":"RoleMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIHelpPanel:[function(e,t,o){"use strict";cc._RF.push(t,"79c74jx/PtMuIOBfz9x8Pnj","UIHelpPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYMessenger"),n=e("../Common/E"),i=e("../Tools/FYBaseUIPanel"),s=e("../Tools/FYUIMgr"),r=cc._decorator,l=r.ccclass,c=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.btnNext=null,e.btnPrev=null,e.nodeBg=null,e.nodeHelp1=null,e.nodeHelp2=null,e._bMoveStart=!1,e}return __extends(e,t),e.prototype.onBack=function(){s.default.Instance.hide(n.E.UIPath.UIHelpPanel),a.default.Instance.send(n.E.MsgType.PlayClickAudio)},e.prototype.onNext=function(){this.nodeHelp1.active=!1,this.nodeHelp2.active=!0,this.btnNext.getComponent(cc.Sprite).node.color=this.btnNext.normalColor,this.btnPrev.getComponent(cc.Sprite).node.color=this.btnPrev.normalColor},e.prototype.onPrev=function(){this.nodeHelp1.active=!0,this.nodeHelp2.active=!1,this.btnNext.getComponent(cc.Sprite).node.color=this.btnNext.normalColor,this.btnPrev.getComponent(cc.Sprite).node.color=this.btnPrev.normalColor},e.prototype.touchStartCallback=function(e){this._bMoveStart=!0;var t=this.nodeBg.convertTouchToNodeSpace(e);this._startPos=t},e.prototype.touchEndCallback=function(e){this.nodeBg.convertTouchToNodeSpace(e).x-this._startPos.x<0?this.nodeHelp1.active&&this.onNext():this.nodeHelp2.active&&this.onPrev()},e.prototype.onEnable=function(){this.btnNext.node.on(cc.Node.EventType.TOUCH_END,this.onNext,this),this.btnPrev.node.on(cc.Node.EventType.TOUCH_END,this.onPrev,this),this.nodeBg.on(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.nodeBg.on(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.nodeBg.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),a.default.Instance.send(n.E.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.btnBack.node.scale=1,this.btnNext.node.off(cc.Node.EventType.TOUCH_END,this.onNext,this),this.btnPrev.node.off(cc.Node.EventType.TOUCH_END,this.onPrev,this),this.nodeBg.off(cc.Node.EventType.TOUCH_START,this.touchStartCallback,this),this.nodeBg.off(cc.Node.EventType.TOUCH_END,this.touchEndCallback,this),this.nodeBg.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndCallback,this),a.default.Instance.send(n.E.MsgType.RefreshGameClubBtn,!0)},e.prototype.start=function(){a.default.Instance.send(n.E.MsgType.DailyModeNewTips,!1,!1,!0)},__decorate([c(cc.Button)],e.prototype,"btnBack",void 0),__decorate([c(cc.Button)],e.prototype,"btnNext",void 0),__decorate([c(cc.Button)],e.prototype,"btnPrev",void 0),__decorate([c(cc.Node)],e.prototype,"nodeBg",void 0),__decorate([c(cc.Node)],e.prototype,"nodeHelp1",void 0),__decorate([c(cc.Node)],e.prototype,"nodeHelp2",void 0),e=__decorate([l],e)}(i.default);o.default=d,cc._RF.pop()},{"../Common/E":"E","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYUIMgr":"FYUIMgr"}],UILoadingPanel:[function(e,t,o){"use strict";cc._RF.push(t,"af7822xy61DbaydUVoGu33f","UILoadingPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYMessenger"),n=e("../Game/DailyLevelConfig"),i=e("../Common/E"),s=e("../Tools/FYUIMgr"),r=e("../Tools/FYResMgr"),l=e("../Tools/FYGlobalVarMgr"),c=e("../Tools/EffectMgr"),d=e("../Tools/FYBaseUIPanel"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goBg=null,e.goTips=null,e._preNum=5,e._curPreNum=0,e}return __extends(e,t),e.prototype.preInstantiate=function(){s.default.Instance.preInstantiate(),c.default.Instance.preLoad()},e.prototype.addListener=function(){t.prototype.addListener.call(this),a.default.Instance.add(s.default.MsgPreLoadUIComplete,this.onPreLoadComplete,this),a.default.Instance.add(i.E.MsgType.DailyLevelConfigFinish,this.onPreLoadComplete,this),a.default.Instance.add(r.default.MsgPreLoadAtlasComplete,this.onPreLoadComplete,this),a.default.Instance.add(r.default.MsgPreLoadEffectComplete,this.onPreLoadComplete,this),a.default.Instance.add(r.default.MsgPreLoadOtherComplete,this.onPreLoadComplete,this)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this),a.default.Instance.remove(s.default.MsgPreLoadUIComplete,this.onPreLoadComplete,this),a.default.Instance.remove(i.E.MsgType.DailyLevelConfigFinish,this.onPreLoadComplete,this),a.default.Instance.remove(r.default.MsgPreLoadAtlasComplete,this.onPreLoadComplete,this),a.default.Instance.remove(r.default.MsgPreLoadEffectComplete,this.onPreLoadComplete,this),a.default.Instance.remove(r.default.MsgPreLoadOtherComplete,this.onPreLoadComplete,this)},e.prototype.onPreLoadComplete=function(){this._curPreNum++,this._curPreNum==this._preNum?(this.preInstantiate(),a.default.Instance.send(r.default.MsgPreLoadComplete),cc.log("=================加载完毕=================="),this.setActive(!1)):this.setActive(!0)},e.prototype.onLoad=function(){this.setActive(!0),cc.log("=================onLoad=================="),l.default.Instance.WinSize.width<750&&(l.default.Instance.Canvas.fitWidth=!0,l.default.Instance.Canvas.fitHeight=!1,this.goBg.height=cc.director.getWinSize().height)},e.prototype.start=function(){var e=cc.fadeTo(1,0),t=cc.fadeTo(1,255),o=cc.sequence(e,t).repeatForever();this.goTips.runAction(o),n.default.Instance.initAllConfig(),s.default.Instance.preLoad(),r.default.Instance.preLoadAltlas(),r.default.Instance.preLoadEffect(),r.default.Instance.preLoadOther()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this)},e.prototype.onDestroy=function(){cc.log("loading Scene onDestroy!")},__decorate([h(cc.Node)],e.prototype,"goBg",void 0),__decorate([h(cc.Node)],e.prototype,"goTips",void 0),e=__decorate([p],e)}(d.default);o.default=f,cc._RF.pop()},{"../Common/E":"E","../Game/DailyLevelConfig":"DailyLevelConfig","../Tools/EffectMgr":"EffectMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYResMgr":"FYResMgr","../Tools/FYUIMgr":"FYUIMgr"}],UIMainPanel:[function(e,t,o){"use strict";cc._RF.push(t,"4f9d9G6KwZHS5M5oawmIXou","UIMainPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYUtility"),s=e("../Tools/FYMessenger"),r=e("../Tools/FYSDKMgr"),n=e("../Tools/FYAudioCtl"),l=e("../Common/E"),c=e("../Tools/FYUIMgr"),i=e("../Tools/FYBaseUIPanel"),d=e("../Tools/FYGlobalVarMgr"),u=e("../Game/GetInfo"),p=e("../Game/TipsMgr"),h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameMain=null,e.btnHelp=null,e.btnSound=null,e.sprSound=null,e.btnSkin=null,e.btnSetting=null,e.btnModeA=null,e.btnModeC=null,e.btnModeE=null,e.btnBuy=null,e.orangeNum=null,e.btnPrize=null,e.SettingTipsNode=null,e.scoreToSubDomainCanvas=null,e.btnAds=null,e.nodeSevenDayLoginBtn=null,e.nodeSevenDayLoginRedPoint=null,e.nodeDailyNewTips=null,e.nodePrizeNewTips=null,e.nodeSettingNewTips=null,e.nodeHelpNewTips=null,e.nodeDailyShareBtn=null,e.nodeDailyShareRedPoint=null,e.nodeBackPackBtn=null,e.labModeA=null,e.labModeC=null,e.GameClubButton=null,e._tex=null,e._bOpenSound=!0,e._nLastMode=null,e._restart=!1,e._isFirstLogin=!0,e.imageCache={},e}return __extends(e,t),e.prototype.initScore=function(){var e=r.default.Instance.loadLocalJsonData(l.E.JsonDataKey.maxScoreByType);if(null==e||0==a.default.getDictionaryCount(e)){e={};for(var t=0;t<l.E.GameMode.Length;t++)e[t]=0}r.default.Instance.saveLocalJsonData(l.E.JsonDataKey.maxScoreByType,e),this.labModeA.string=e[l.E.GameMode.A],this.labModeC.string=e[l.E.GameMode.C]},e.prototype.addListener=function(){t.prototype.addListener.call(this),s.default.Instance.add(l.E.MsgType.ChangeMode,this.onChangeMode,this),s.default.Instance.add(l.E.MsgType.RefreshOrange,this.onRefreshOrange,this),s.default.Instance.add(l.E.MsgType.RefreshSignState,this.onRefreshSignState,this),s.default.Instance.add(l.E.MsgType.RefreshGameClubBtn,this.onRefreshGameClubBtn,this),s.default.Instance.add(l.E.MsgType.RefreshShareState,this.onRefreshShareNumState,this),s.default.Instance.add(l.E.MsgType.DailyModeNewTips,this.onShowNewTips,this),this.btnModeA.node.on(cc.Node.EventType.TOUCH_END,this.onCliskModeA,this),this.btnModeC.node.on(cc.Node.EventType.TOUCH_END,this.onCliskModeC,this),this.btnModeE.node.on(cc.Node.EventType.TOUCH_END,this.onCliskModeE,this),this.btnPrize.node.on(cc.Node.EventType.TOUCH_END,this.onClickPrize,this),this.nodeDailyShareBtn.on(cc.Node.EventType.TOUCH_END,this.onClickShare,this),this.nodeSevenDayLoginBtn.on(cc.Node.EventType.TOUCH_END,this.onClickShowSevenMenu,this),this.btnSound.node.on(cc.Node.EventType.TOUCH_END,this.onClickSound,this),this.btnHelp.node.on(cc.Node.EventType.TOUCH_END,this.onClickHelp,this),this.btnSetting.node.on(cc.Node.EventType.TOUCH_END,this.onClickSetting,this),this.btnSkin.node.on(cc.Node.EventType.TOUCH_END,this.onClickRole,this),this.nodeBackPackBtn.on(cc.Node.EventType.TOUCH_END,this.onClickBackPack,this),s.default.Instance.add(l.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this),s.default.Instance.remove(l.E.MsgType.ChangeMode,this.onChangeMode,this),s.default.Instance.remove(l.E.MsgType.RefreshOrange,this.onRefreshOrange,this),s.default.Instance.remove(l.E.MsgType.RefreshGameClubBtn,this.onRefreshGameClubBtn,this),s.default.Instance.remove(l.E.MsgType.RefreshSignState,this.onRefreshSignState,this),s.default.Instance.remove(l.E.MsgType.RefreshShareState,this.onRefreshShareNumState,this),s.default.Instance.remove(l.E.MsgType.DailyModeNewTips,this.onShowNewTips,this),this.btnModeA.node.off(cc.Node.EventType.TOUCH_END,this.onCliskModeA,this),this.btnModeC.node.off(cc.Node.EventType.TOUCH_END,this.onCliskModeC,this),this.btnModeE.node.off(cc.Node.EventType.TOUCH_END,this.onCliskModeE,this),this.btnPrize.node.off(cc.Node.EventType.TOUCH_END,this.onClickPrize,this),this.nodeDailyShareBtn.off(cc.Node.EventType.TOUCH_END,this.onClickShare,this),this.nodeSevenDayLoginBtn.off(cc.Node.EventType.TOUCH_END,this.onClickShowSevenMenu,this),this.btnSound.node.off(cc.Node.EventType.TOUCH_END,this.onClickSound,this),this.btnHelp.node.off(cc.Node.EventType.TOUCH_END,this.onClickHelp,this),this.btnSetting.node.off(cc.Node.EventType.TOUCH_END,this.onClickSetting,this),this.btnSkin.node.off(cc.Node.EventType.TOUCH_END,this.onClickRole,this),this.nodeBackPackBtn.off(cc.Node.EventType.TOUCH_END,this.onClickBackPack,this),s.default.Instance.remove(l.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this)},e.prototype.onRefreshNewTips=function(){var e=r.default.Instance.loadLocalData(l.E.DataKey.prizeFreeTimes);0==e?this.nodePrizeNewTips.active=!0:a.default.isSameDay(e)||(this.nodePrizeNewTips.active=!0);var t=r.default.Instance.loadLocalData(l.E.DataKey.DailyModeNTimer),o=r.default.Instance.loadLocalData(l.E.DataKey.DailyModeDTimer);0!=parseInt(t)&&0!=parseInt(o)||(this.nodeDailyNewTips.active=!0),this.nodeSettingNewTips.active=!0,this.nodeHelpNewTips.active=!0},e.prototype.onShowNewTips=function(e,t,o,a){void 0===o&&(o=!1),void 0===a&&(a=!1),o?this.nodePrizeNewTips.active=t:this.nodeDailyNewTips.active=t,a&&(this.nodeSettingNewTips.active=t,this.nodeHelpNewTips.active=t)},e.prototype.onRefreshGameClubBtn=function(e,t){console.log("----onRefreshGameClubBtn----state----------",t,this.GameClubButton),t?this.GameClubButton&&this.GameClubButton.show():this.GameClubButton&&this.GameClubButton.hide()},e.prototype.onClickShowSevenMenu=function(){c.default.Instance.show(l.E.UIPath.UISevenDayLoginPanel)},e.prototype.onRefreshSignState=function(){var e=r.default.Instance.loadLocalData(l.E.DataKey.GetSignRewardLastTime,"0"),t=Date.now();0==Number(e)?this.nodeSevenDayLoginRedPoint.active=!0:!a.default.isSameDay(e)&&0<=t-e?this.nodeSevenDayLoginRedPoint.active=!0:this.nodeSevenDayLoginRedPoint.active=!1},e.prototype.onRefreshShareNumState=function(){var e=r.default.Instance.loadLocalData(l.E.DataKey.dailyShareGetNum,"-1"),t=r.default.Instance.loadLocalData(l.E.DataKey.dailyShareLastTime,"0"),o=Date.now();Number(e)<4||!a.default.isSameDay(t)&&0<t-o?this.nodeDailyShareRedPoint.active=!0:this.nodeDailyShareRedPoint.active=!1},e.prototype.onCliskModeA=function(){c.default.Instance.show(l.E.UIPath.UIGamePanel,d.default.Instance.NodeBottom,l.E.GameMode.A),this._nLastMode=l.E.GameMode.A,c.default.Instance.hide(l.E.UIPath.UIMainPanel),s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onCliskModeB=function(){c.default.Instance.show(l.E.UIPath.UIGamePanel,d.default.Instance.NodeBottom,l.E.GameMode.B),this._nLastMode=l.E.GameMode.B,c.default.Instance.hide(l.E.UIPath.UIMainPanel),s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onCliskModeC=function(){c.default.Instance.show(l.E.UIPath.UIGamePanel,d.default.Instance.NodeBottom,l.E.GameMode.C),this._nLastMode=l.E.GameMode.C,c.default.Instance.hide(l.E.UIPath.UIMainPanel),s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onCliskModeD=function(){c.default.Instance.show(l.E.UIPath.UIGamePanel,d.default.Instance.NodeBottom,l.E.GameMode.D),this._nLastMode=l.E.GameMode.D,c.default.Instance.hide(l.E.UIPath.UIMainPanel),s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onCliskModeE=function(){s.default.Instance.send(l.E.MsgType.DailyModeNewTips,!1),c.default.Instance.show(l.E.UIPath.UISelectDailyPanel),this._nLastMode=l.E.GameMode.E,s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onCliskStart=function(){var e=r.default.Instance.loadLocalData(l.E.DataKey.selectMode);e!=this._nLastMode?s.default.Instance.send(l.E.MsgType.StartGame,e,e!=this._nLastMode):(s.default.Instance.send(l.E.MsgType.StartGame,e,this._restart),this._restart=!1),this._nLastMode=e,c.default.Instance.hide(l.E.UIPath.UIMainPanel),s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onClickPrize=function(){s.default.Instance.send(l.E.MsgType.PlayClickAudio),c.default.Instance.show(l.E.UIPath.UIPrizePanel)},e.prototype.onClickShop=function(){s.default.Instance.send(l.E.MsgType.PlayClickAudio),c.default.Instance.hide(l.E.UIPath.UIMainPanel),c.default.Instance.show(l.E.UIPath.UIShopPanel)},e.prototype.onClickAdsFree=function(){if(s.default.Instance.send(l.E.MsgType.PlayClickAudio),r.default.Instance.ttIsTt())r.default.Instance.ttCreateRewardedVideoAd("adunit-74515tu7gr5gm3eo8g",function(e){if(e){var t=new u.default;t.getType=l.E.GetType.kGetOrange,t.getNum=100;var o=r.default.Instance.loadLocalData(l.E.DataKey.orangeNum),a=parseInt(o)+t.getNum;r.default.Instance.saveLocalData(l.E.DataKey.orangeNum,a.toString()),s.default.Instance.send(l.E.MsgType.RefreshOrange),c.default.Instance.show(l.E.UIPath.UIGetMenuPanel,d.default.Instance.NodeTop,t)}});else{if(!this.btnAds.interactable)return;this.btnAds.interactable=!1,r.default.Instance.androidShowAd(l.E.ttAdType.MainPanelRewardVideoAd),r.default.Instance.androidSendEvent(l.E.ttEventName.advertising,{position:2})}},e.prototype.onAndroidSDKCall=function(e,t,o){if(o==l.E.ttAdType.MainPanelRewardVideoAd){if(t){console.log("======MainPanelRewardVideoAd success!!!!!!!!");var a=new u.default;a.getType=l.E.GetType.kGetOrange,a.getNum=200;var n=r.default.Instance.loadLocalData(l.E.DataKey.orangeNum),i=parseInt(n)+a.getNum;r.default.Instance.saveLocalData(l.E.DataKey.orangeNum,i.toString()),r.default.Instance.androidSendEvent(l.E.ttEventName.rewardscoins,{rewardid:1}),s.default.Instance.send(l.E.MsgType.RefreshOrange),c.default.Instance.show(l.E.UIPath.UIGetMenuPanel,d.default.Instance.NodeTop,a)}this.btnAds.interactable=!0}},e.prototype.onSetState=function(e){this._restart=!0,this._nLastMode=null},e.prototype.onSetMode=function(e){this._nLastMode=null},e.prototype.onChangeMode=function(e){this.initScore()},e.prototype.onRefreshOrange=function(e){var t=r.default.Instance.loadLocalData(l.E.DataKey.orangeNum);this.orangeNum.string=t},e.prototype.onClickShare=function(){s.default.Instance.send(l.E.MsgType.PlayClickAudio),cc.sys.platform==cc.sys.ANDROID?p.default.Instance.showTips("活动暂未开启！"):c.default.Instance.show(l.E.UIPath.UIDailySharePanel)},e.prototype.onClickHelp=function(e){s.default.Instance.send(l.E.MsgType.PlayClickAudio),c.default.Instance.show(l.E.UIPath.UIHelpPanel)},e.prototype.onClickBackPack=function(e){s.default.Instance.send(l.E.MsgType.PlayClickAudio),c.default.Instance.show(l.E.UIPath.UIBackPackPanel)},e.prototype.onClickStar=function(e){s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onClickRole=function(){c.default.Instance.show(l.E.UIPath.UISelectRolePanel),s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onClickSetting=function(){this.SettingTipsNode.active=!0,s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onClickSettingClose=function(){this.SettingTipsNode.active=!1},e.prototype.onClickShowFriendGame=function(){},e.prototype.onClickMode=function(e){s.default.Instance.send(l.E.MsgType.PlayClickAudio),c.default.Instance.hide(l.E.UIPath.UIMainPanel)},e.prototype.onClickSound=function(e){this._bOpenSound=!this._bOpenSound;var t=this._bOpenSound?"true":"false";r.default.Instance.saveLocalData(l.E.DataKey.soundState,t),s.default.Instance.send(l.E.MsgType.ChangeSound,!this._bOpenSound);var o=this._bOpenSound?"sound":"sound2";a.default.changeSpriteFrame(this.sprSound,"atlas/common/common",o),this._bOpenSound?(n.default.Instance.rewindMusic(),n.default.Instance.rewindSound()):(n.default.Instance.pauseMusic(),n.default.Instance.pauseSound()),s.default.Instance.send(l.E.MsgType.PlayClickAudio)},e.prototype.onShow=function(e,t){this.onRefreshSignState();var o=r.default.Instance.loadLocalData(l.E.DataKey.GetSignRewardLastTime,"0");this._isFirstLogin&&!a.default.isSameDay(o)&&(this._isFirstLogin=!1,c.default.Instance.show(l.E.UIPath.UISevenDayLoginPanel),this.GameClubButton&&this.GameClubButton.hide()),this.onRefreshShareNumState()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this);var e=r.default.Instance.loadLocalData(l.E.DataKey.orangeNum);this.orangeNum.string=e,this.initScore();this.GameClubButton&&this.GameClubButton.show()},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnModeA.node.scale=1,this.btnModeC.node.scale=1,this.btnModeE.node.scale=1,this.btnPrize.node.scale=1,this.btnSound.node.scale=.75,this.btnHelp.node.scale=.75,this.btnSkin.node.scale=1,this.btnSetting.node.scale=1,this.btnBuy.node.scale=1,this.btnAds.node.scale=1,this.GameClubButton&&this.GameClubButton.hide()},e.prototype.start=function(){var e=r.default.Instance.loadLocalData(l.E.DataKey.soundState,"true");this._bOpenSound="true"==e;var t=this._bOpenSound?"sound":"sound2";a.default.changeSpriteFrame(this.sprSound,"atlas/common/common",t),this._bOpenSound||(n.default.Instance.pauseMusic(),n.default.Instance.pauseSound()),this.onRefreshNewTips()},__decorate([y(cc.Button)],e.prototype,"btnHelp",void 0),__decorate([y(cc.Button)],e.prototype,"btnSound",void 0),__decorate([y(cc.Sprite)],e.prototype,"sprSound",void 0),__decorate([y(cc.Button)],e.prototype,"btnSkin",void 0),__decorate([y(cc.Button)],e.prototype,"btnSetting",void 0),__decorate([y(cc.Button)],e.prototype,"btnModeA",void 0),__decorate([y(cc.Button)],e.prototype,"btnModeC",void 0),__decorate([y(cc.Button)],e.prototype,"btnModeE",void 0),__decorate([y(cc.Button)],e.prototype,"btnBuy",void 0),__decorate([y(cc.Label)],e.prototype,"orangeNum",void 0),__decorate([y(cc.Button)],e.prototype,"btnPrize",void 0),__decorate([y(cc.Node)],e.prototype,"SettingTipsNode",void 0),__decorate([y(cc.Sprite)],e.prototype,"scoreToSubDomainCanvas",void 0),__decorate([y(cc.Button)],e.prototype,"btnAds",void 0),__decorate([y({type:cc.Node,displayName:"每日登录按钮"})],e.prototype,"nodeSevenDayLoginBtn",void 0),__decorate([y({type:cc.Node,displayName:"每日登录红点"})],e.prototype,"nodeSevenDayLoginRedPoint",void 0),__decorate([y(cc.Node)],e.prototype,"nodeDailyNewTips",void 0),__decorate([y(cc.Node)],e.prototype,"nodePrizeNewTips",void 0),__decorate([y(cc.Node)],e.prototype,"nodeSettingNewTips",void 0),__decorate([y(cc.Node)],e.prototype,"nodeHelpNewTips",void 0),__decorate([y({type:cc.Node,displayName:"每日分享按钮"})],e.prototype,"nodeDailyShareBtn",void 0),__decorate([y({type:cc.Node,displayName:"每日分享红点"})],e.prototype,"nodeDailyShareRedPoint",void 0),__decorate([y(cc.Node)],e.prototype,"nodeBackPackBtn",void 0),__decorate([y(cc.Label)],e.prototype,"labModeA",void 0),__decorate([y(cc.Label)],e.prototype,"labModeC",void 0),e=__decorate([f],e)}(i.default);o.default=m,cc._RF.pop()},{"../Common/E":"E","../Game/GetInfo":"GetInfo","../Game/TipsMgr":"TipsMgr","../Tools/FYAudioCtl":"FYAudioCtl","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIPausePanel:[function(e,t,o){"use strict";cc._RF.push(t,"9c609oIOklHia7nYjr5yaF0","UIPausePanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYBaseUIPanel"),n=e("../Tools/FYMessenger"),i=e("../Common/E"),s=e("../Tools/FYUIMgr"),r=e("../Tools/FYSDKMgr"),l=cc._decorator,c=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnResumeGame=null,e.btnRestartGame=null,e.btnReslut=null,e}return __extends(e,t),e.prototype.addListener=function(){t.prototype.addListener.call(this),this.btnResumeGame.on(cc.Node.EventType.TOUCH_END,this.onClickResumeGame,this),this.btnRestartGame.on(cc.Node.EventType.TOUCH_END,this.onClickReStartGame,this),this.btnReslut.on(cc.Node.EventType.TOUCH_END,this.onClickResult,this)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this),this.btnResumeGame.off(cc.Node.EventType.TOUCH_END,this.onClickResumeGame,this),this.btnRestartGame.off(cc.Node.EventType.TOUCH_END,this.onClickReStartGame,this),this.btnReslut.off(cc.Node.EventType.TOUCH_END,this.onClickResult,this)},e.prototype.onClickResumeGame=function(){n.default.Instance.send(i.E.MsgType.ResumeGame),s.default.Instance.hide(i.E.UIPath.UIPausePanel)},e.prototype.onClickReStartGame=function(){n.default.Instance.send(i.E.MsgType.ReStartGame),s.default.Instance.hide(i.E.UIPath.UIPausePanel)},e.prototype.onClickResult=function(){n.default.Instance.send(i.E.MsgType.Result),s.default.Instance.hide(i.E.UIPath.UIPausePanel)},e.prototype.start=function(){},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),r.default.Instance.androidShowAd(i.E.ttAdType.InterstitialAd),r.default.Instance.androidSendEvent(i.E.ttEventName.advertising,{position:7})},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnReslut.scale=1,this.btnRestartGame.scale=1,this.btnResumeGame.scale=1},__decorate([d(cc.Node)],e.prototype,"btnResumeGame",void 0),__decorate([d(cc.Node)],e.prototype,"btnRestartGame",void 0),__decorate([d(cc.Node)],e.prototype,"btnReslut",void 0),e=__decorate([c],e)}(a.default);o.default=u,cc._RF.pop()},{"../Common/E":"E","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr"}],UIPrizePanel:[function(e,t,o){"use strict";cc._RF.push(t,"2391fOIjX9GqLNP2H7rMxKV","UIPrizePanel"),Object.defineProperty(o,"__esModule",{value:!0});var S=e("../Tools/FYUtility"),C=e("../Tools/FYSDKMgr"),_=e("../Game/GetInfo"),s=e("../Tools/FYUtility"),E=e("../Tools/FYMessenger"),P=e("../Game/RoleConfig"),b=e("../Common/E"),D=e("../Tools/FYUIMgr"),M=e("../Tools/FYGlobalVarMgr"),a=e("../Tools/FYBaseUIPanel"),G=e("../Common/FYUserDataMgr"),n=cc._decorator,i=n.ccclass,r=n.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circle=null,e.btnStart=null,e.btnBack=null,e.nodeMask=null,e.nodeCost=null,e.nodeFree=null,e.animLight=null,e.endAngle=100,e.isMoving=!1,e.speed=0,e.maxSpeed=10,e.minSpeed=.8,e.moveState=0,e.keepTime=2,e.bEnding=!1,e.rewards=["1等奖","2等奖","3等奖","4等奖","5等奖","6等奖"],e._nPriceOnceCost=200,e.nFreeTimes=0,e._index=0,e}return __extends(e,t),e.prototype.addListener=function(){t.prototype.addListener.call(this)},e.prototype.removeListener=function(){t.prototype.removeListener.call(this)},e.prototype.setFreeToPrize=function(e,t){this.nFreeTimes=e,this.callbackFinish=t},e.prototype.getAngle=function(){return this.calAngle(this.targetDir,this.calculateDir(this.circle.rotation%360))},e.prototype.calAngle=function(e,t){return t.angle(e)*(180/Math.PI)},e.prototype.calculateDir=function(e){var t=Math.cos(Math.PI*(e+90)/180),o=Math.sin(Math.PI*(e+90)/180);return new cc.Vec2(t,o)},e.prototype.endMove=function(){this.bEnding||(this.bEnding=!0,cc.log("===============endMove!!!!!!!!!!!!!!================"),this.speed=0,this.moveState=0,null!=this.animLight&&(this.animLight.node.active=!1,this.animLight.stop()),0!=this.nFreeTimes?(this.nodeFree.active=!0,this.nodeCost.active=!1,this.btnBack.node.active=!1):(this.btnBack.node.active=!0,this.CanFreePrize()?(cc.log("CanFreePrize!"),this.nodeFree.active=!0,this.nodeCost.active=!1):(this.nodeFree.active=!1,this.nodeCost.active=!0)),this.isMoving=!1,this.bEnding=!1,this.openGetMenu(),0==this.nFreeTimes&&null!=this.callbackFinish&&(D.default.Instance.hide(b.E.UIPath.UITipsPanel),this.callbackFinish(),this.callbackFinish=null))},e.prototype.StartMove=function(){if(!this.isMoving){null!=this.animLight&&(this.animLight.node.active=!0,this.animLight.play());var e=S.default.getRangeRandom(1,100),t=C.default.Instance.loadLocalJsonData(b.E.JsonDataKey.userOwnRole);b.E.getCurRoleCount()<=s.default.getDictionaryCount(t)&&(e=S.default.getRangeRandom(2,100)),1==e?this._index=0:2<=e&&e<=13?this._index=1:14<=e&&e<=25?this._index=2:26<=e&&e<=37?this._index=3:38<=e&&e<=50?this._index=4:51<=e&&e<=100&&(this._index=5),cc.log("恭喜你获得"+this.rewards[this._index]),this.isMoving=!0;var o=this.circle.rotation%360,a=-360/this.rewards.length*this._index-o,n=cc.rotateBy(8,360*this.rewards.length+a),i=(n.easing(cc.easeCubicActionOut()),cc.sequence(n,cc.callFunc(function(){this.endMove()}.bind(this))));this.circle.runAction(i)}},e.prototype.openGetMenu=function(){cc.log("openGetMenu");var e=new _.default,t=this._index+1,o=(C.default.Instance.loadLocalData(b.E.DataKey.orangeNum),C.default.Instance.loadLocalJsonData(b.E.JsonDataKey.userOwnProp));switch(t){case 2:e.getType=b.E.GetType.kGetProp,e.getNum=5,e.propType=b.E.PropType.kUndoOperate;var a=o[b.E.PropType.kUndoOperate],n=parseInt(a)+e.getNum;o[b.E.PropType.kUndoOperate]=n,G.default.Instance.addPropRewardTimes(e.getNum),C.default.Instance.saveLocalJsonData(b.E.JsonDataKey.userOwnProp,o);break;case 3:e.getType=b.E.GetType.kGetProp,e.getNum=5,e.propType=b.E.PropType.kHammer;var i=o[b.E.PropType.kHammer],s=parseInt(i)+e.getNum;o[b.E.PropType.kHammer]=s,G.default.Instance.addPropRewardTimes(e.getNum),C.default.Instance.saveLocalJsonData(b.E.JsonDataKey.userOwnProp,o);break;case 4:e.getType=b.E.GetType.kGetProp,e.getNum=5,e.propType=b.E.PropType.kSuperStar;var r=o[b.E.PropType.kSuperStar],l=parseInt(r)+e.getNum;o[b.E.PropType.kSuperStar]=l,G.default.Instance.addPropRewardTimes(e.getNum),C.default.Instance.saveLocalJsonData(b.E.JsonDataKey.userOwnProp,o);break;case 5:e.getType=b.E.GetType.kGetOrange,e.getNum=1e3;var c=C.default.Instance.loadLocalData(b.E.DataKey.orangeNum),d=parseInt(c)+e.getNum;C.default.Instance.saveLocalData(b.E.DataKey.orangeNum,d.toString()),E.default.Instance.send(b.E.MsgType.RefreshOrange);break;case 6:return;case 1:var u=C.default.Instance.loadLocalJsonData(b.E.JsonDataKey.userOwnRole),p=b.E.getCurRoleCount(),h=80<=S.default.getRangeRandom(1,100)?3:2;console.log(u,h);for(var f=[],y=0;y<p;y++){var m=y+1,g=P.default.Instance.getRoleInfoByRoleId(m+"").star;null!=u&&1!=u[m.toString()]&&g==h&&f.push(m)}if(0==f.length){h=3==h?2:3;for(y=0;y<p;y++){m=y+1,g=P.default.Instance.getRoleInfoByRoleId(m+"").star;null!=u&&1!=u[m.toString()]&&g==h&&f.push(m)}}var v=S.default.getRangeRandom(0,f.length-1);console.log("nRoleIdRandomList:",f," roleId:",f[v]," nRoleRandom:",v);var I=f[v];e.getType=b.E.GetType.kGetRole,e.getNum=1,e.roleId=I;var T=P.default.Instance.getRoleInfoByRoleId(I);e.roleScore=T.point,null==u?(u={})[e.roleId.toString()]=1:u[e.roleId.toString()]=1,C.default.Instance.saveLocalJsonData(b.E.JsonDataKey.userOwnRole,u)}e.getType==b.E.GetType.kGetOrange&&C.default.Instance.androidSendEvent(b.E.ttEventName.rewardscoins,{rewardid:3}),D.default.Instance.show(b.E.UIPath.UIGetMenuPanel,M.default.Instance.NodeTop,e)},e.prototype.onClickRestart=function(){if(!this.isMoving)if(0!=this.nFreeTimes)this.nFreeTimes--,console.log("nFreeTimes"+this.nFreeTimes),this.StartMove();else if(this.CanFreePrize()){console.log("Start To Free Prize");var e=new Date;C.default.Instance.saveLocalData(b.E.DataKey.prizeFreeTimes,e.getTime()),E.default.Instance.send(b.E.MsgType.DailyModeNewTips,!1,!0),this.StartMove()}else{var t=C.default.Instance.loadLocalData(b.E.DataKey.orangeNum);if(null==t||0==t)return void D.default.Instance.show(b.E.UIPath.UITipsPanel,M.default.Instance.NodeTop,function(){D.default.Instance.hide(b.E.UIPath.UITipsPanel)}.bind(this));if(t<this._nPriceOnceCost)return void D.default.Instance.show(b.E.UIPath.UITipsPanel,M.default.Instance.NodeTop,function(){D.default.Instance.hide(b.E.UIPath.UITipsPanel)}.bind(this));var o=parseInt(t)-this._nPriceOnceCost;C.default.Instance.saveLocalData(b.E.DataKey.orangeNum,o.toString()),E.default.Instance.send(b.E.MsgType.RefreshOrange),C.default.Instance.androidSendEvent(b.E.ttEventName.dealcoins,{dealid:3}),this.StartMove()}E.default.Instance.send(b.E.MsgType.PlayClickAudio)},e.prototype.onClickMask=function(){},e.prototype.onClickBack=function(){this.isMoving||(E.default.Instance.send(b.E.MsgType.PlayClickAudio),D.default.Instance.hide(b.E.UIPath.UIPrizePanel))},e.prototype.CanFreePrize=function(){new Date;var e=C.default.Instance.loadLocalData(b.E.DataKey.prizeFreeTimes);return 0==e||(console.log("prizeFreeTimes"+e),!s.default.isSameDay(e))},e.prototype.start=function(){this.targetDir=new cc.Vec2(0,1)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),cc.log(this.nFreeTimes),0!=this.nFreeTimes?(this.nodeFree.active=!0,this.nodeCost.active=!1,this.btnBack.node.active=!1):(this.CanFreePrize()?(cc.log("CanFreePrize!"),this.nodeFree.active=!0,this.nodeCost.active=!1):(this.nodeFree.active=!1,this.nodeCost.active=!0),this.btnBack.node.active=!0),this.btnStart.node.on(cc.Node.EventType.TOUCH_END,this.onClickRestart,this),this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this),E.default.Instance.send(b.E.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.unscheduleAllCallbacks(),this.btnBack.node.scale=1,this.btnStart.node.scale=1,this.btnStart.node.off(cc.Node.EventType.TOUCH_END,this.onClickRestart,this),this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this),E.default.Instance.send(b.E.MsgType.RefreshGameClubBtn,!0)},__decorate([r(cc.Node)],e.prototype,"circle",void 0),__decorate([r(cc.Button)],e.prototype,"btnStart",void 0),__decorate([r(cc.Button)],e.prototype,"btnBack",void 0),__decorate([r(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([r(cc.Node)],e.prototype,"nodeCost",void 0),__decorate([r(cc.Node)],e.prototype,"nodeFree",void 0),__decorate([r(cc.Animation)],e.prototype,"animLight",void 0),e=__decorate([i],e)}(a.default);o.default=l,cc._RF.pop()},{"../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Game/GetInfo":"GetInfo","../Game/RoleConfig":"RoleConfig","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIPropGetPanel:[function(e,t,o){"use strict";cc._RF.push(t,"f6eedYLihpG+Y0g0FQ2vpdO","UIPropGetPanel"),Object.defineProperty(o,"__esModule",{value:!0});var y=e("../Tools/FYUtility"),d=e("../Tools/FYMessenger"),m=e("../Game/RoleConfig"),g=e("../Tools/FYSDKMgr"),u=e("../Game/GetInfo"),v=e("../Common/E"),a=e("../Tools/FYBaseUIPanel"),p=e("../Tools/FYGlobalVarMgr"),h=e("../Tools/FYUIMgr"),f=e("../Common/FYUserDataMgr"),c=e("../Game/TipsMgr"),n=cc._decorator,i=n.ccclass,s=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actionEnd=null,e.curPropType=null,e.sprPropDesc=null,e.sprPropIcon=null,e.btnClose=null,e.labPropLimit2=null,e.labPropLimit=null,e.labPropCurUse=null,e.labAssistLimit=null,e.labAssistCur=null,e.btnAssist=null,e.btnBuy=null,e.labCost=null,e.labGoldRemain=null,e.nodeGoldFit=null,e.curShareTimes=0,e.curGameMode=null,e.bClickState=!1,e}return __extends(e,t),e.prototype.onShow=function(e,t){var o=t[0],a=t[1],n=t[2],i=t[3],s=t[4];this.initMenu(o,a,n,i,s)},e.prototype.initMenu=function(e,t,o,a,n){void 0===n&&(n=null),this.actionEnd=n,this.curGameMode=e,console.log("curGameMode"+this.curGameMode),this.curPropType=t,this.curShareTimes=a;var i=m.default.Instance.getPropInfoByPropId(t),s=i.desc;y.default.changeSpriteFrame(this.sprPropDesc,"atlas/common/common",s);var r=i.icon;y.default.changeSpriteFrame(this.sprPropIcon,"atlas/common/common",r);var l=i.limit;cc.log("limit"+l),-1==l?(this.labPropLimit.node.parent.active=!1,this.labPropLimit2.active=!0):(this.labPropLimit.node.parent.active=!0,this.labPropLimit2.active=!1,this.labPropLimit.string=l.toString());var c=i.cost;this.labCost.string=c.toString();var d=o.toString()+"/"+l.toString();this.labPropCurUse.string=d;var u=i.shareLimit;this.labAssistLimit.string=u.toString();var p=a+"/"+u.toString();this.labAssistCur.string=p;var h=g.default.Instance.loadLocalData(v.E.DataKey.orangeNum);this.labGoldRemain.string=h;var f=this.labGoldRemain.node.getContentSize().width;console.log("goldRemainWidth:"+f)},e.prototype.onClickBack=function(){d.default.Instance.send(v.E.MsgType.PlayClickAudio),null!=this.actionEnd&&this.actionEnd(),h.default.Instance.hide(v.E.UIPath.UIPropGetPanel)},e.prototype.onClickAssist=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){var s=this,t=function(){var e=m.default.Instance.getPropInfoByPropId(s.curPropType).shareLimit;if(s.curShareTimes++,s.curShareTimes<=e){var t=g.default.Instance.loadLocalJsonData(v.E.JsonDataKey.userOwnProp),o=new u.default;o.getType=v.E.GetType.kGetProp,o.getNum=1,o.propType=s.curPropType;var a=t[s.curPropType],n=parseInt(a)+o.getNum;t[s.curPropType]=n,f.default.Instance.addPropRewardTimes(o.getNum),g.default.Instance.saveLocalJsonData(v.E.JsonDataKey.userOwnProp,t),d.default.Instance.send(v.E.MsgType.RefreshProp),s.node.active=!1,h.default.Instance.show(v.E.UIPath.UIGetMenuPanel,p.default.Instance.NodeTop,o),d.default.Instance.send(v.E.MsgType.GameShareGetPropAdd,s.curPropType);var i=s.curShareTimes+"/"+e.toString();s.labAssistCur.string=i}else s.node.active=!1;null!=s.actionEnd&&s.actionEnd()};g.default.Instance.ttShareAppMessage("美味方糖，今天你吃了吗？","https://sf1-ttcdn-tos.pstatp.com/obj/developer/app/tt0d347b89921eb5a5/shareicon10ca2c0","form="+v.E.ShareState.GetPropShare+"&time="+Date.now(),function(e){t(),console.log("-----------每日分享成功",e)}),this.scheduleOnce(function(){t()},3)}else{if(cc.sys.platform==cc.sys.ANDROID)return void c.default.Instance.showTips("活动暂未开启！");if(cc.sys.platform==cc.sys.IPHONE)g.default.Instance.androidShare(v.E.ttSDKShareType.propGet);else{var e=this,o=m.default.Instance.getPropInfoByPropId(e.curPropType).shareLimit;if(e.curShareTimes++,e.curShareTimes<=o){var a=g.default.Instance.loadLocalJsonData(v.E.JsonDataKey.userOwnProp),n=new u.default;n.getType=v.E.GetType.kGetProp,n.getNum=1,n.propType=e.curPropType;var i=a[e.curPropType],r=parseInt(i)+n.getNum;a[e.curPropType]=r,f.default.Instance.addPropRewardTimes(n.getNum),g.default.Instance.saveLocalJsonData(v.E.JsonDataKey.userOwnProp,a),d.default.Instance.send(v.E.MsgType.RefreshProp),e.node.active=!1,h.default.Instance.show(v.E.UIPath.UIGetMenuPanel,p.default.Instance.NodeTop,n),d.default.Instance.send(v.E.MsgType.GameShareGetPropAdd,e.curPropType);var l=e.curShareTimes+"/"+o.toString();e.labAssistCur.string=l}else e.node.active=!1;null!=e.actionEnd&&e.actionEnd()}}},e.prototype.onAndroidSDKCall=function(e,t,o){var a=this;if(o==v.E.ttSDKShareType.propGet&&t){var n=m.default.Instance.getPropInfoByPropId(a.curPropType).shareLimit;if(a.curShareTimes++,a.curShareTimes<=n){var i=g.default.Instance.loadLocalJsonData(v.E.JsonDataKey.userOwnProp),s=new u.default;s.getType=v.E.GetType.kGetProp,s.getNum=1,s.propType=a.curPropType;var r=i[a.curPropType],l=parseInt(r)+s.getNum;i[a.curPropType]=l,f.default.Instance.addPropRewardTimes(s.getNum),g.default.Instance.saveLocalJsonData(v.E.JsonDataKey.userOwnProp,i),d.default.Instance.send(v.E.MsgType.RefreshProp),a.node.active=!1,h.default.Instance.show(v.E.UIPath.UIGetMenuPanel,p.default.Instance.NodeTop,s),d.default.Instance.send(v.E.MsgType.GameShareGetPropAdd,a.curPropType);var c=a.curShareTimes+"/"+n.toString();a.labAssistCur.string=c}else a.node.active=!1;null!=a.actionEnd&&a.actionEnd(),g.default.Instance.androidSendEvent(v.E.ttEventName.shareaction)}},e.prototype.onClickAds=function(){if(!this.bClickState){this.bClickState=!0}},e.prototype.onClickBuy=function(){var e=m.default.Instance.getPropInfoByPropId(this.curPropType).cost,t=g.default.Instance.loadLocalData(v.E.DataKey.orangeNum);if(null!=t&&0!=t)if(t<e)h.default.Instance.show(v.E.UIPath.UITipsPanel,p.default.Instance.NodeTop,function(){h.default.Instance.hide(v.E.UIPath.UIPropGetPanel)}.bind(this));else{var o=parseInt(t)-e;g.default.Instance.saveLocalData(v.E.DataKey.orangeNum,o.toString()),g.default.Instance.androidSendEvent(v.E.ttEventName.dealcoins,{dealid:5}),this.labGoldRemain.string=o.toString(),d.default.Instance.send(v.E.MsgType.RefreshOrange);var a=g.default.Instance.loadLocalJsonData(v.E.JsonDataKey.userOwnProp),n=new u.default;n.getType=v.E.GetType.kGetProp,n.getNum=1,n.propType=this.curPropType;var i=a[this.curPropType],s=parseInt(i)+n.getNum;a[this.curPropType]=s,f.default.Instance.addPropRewardTimes(n.getNum),g.default.Instance.saveLocalJsonData(v.E.JsonDataKey.userOwnProp,a),d.default.Instance.send(v.E.MsgType.RefreshProp),h.default.Instance.show(v.E.UIPath.UIGetMenuPanel,p.default.Instance.NodeTop,n),null!=this.actionEnd&&this.actionEnd(),d.default.Instance.send(v.E.MsgType.PlayClickAudio)}else h.default.Instance.show(v.E.UIPath.UITipsPanel,p.default.Instance.NodeTop,function(){h.default.Instance.hide(v.E.UIPath.UIPropGetPanel)}.bind(this))},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),d.default.Instance.add(v.E.MsgType.OnAndroidShareSDKCallback,this.onAndroidSDKCall,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnClose.scale=1,this.btnAssist.scale=1,this.btnBuy.scale=1,d.default.Instance.remove(v.E.MsgType.OnAndroidShareSDKCallback,this.onAndroidSDKCall,this)},__decorate([s(cc.Sprite)],e.prototype,"sprPropDesc",void 0),__decorate([s(cc.Sprite)],e.prototype,"sprPropIcon",void 0),__decorate([s(cc.Node)],e.prototype,"btnClose",void 0),__decorate([s(cc.Node)],e.prototype,"labPropLimit2",void 0),__decorate([s(cc.Label)],e.prototype,"labPropLimit",void 0),__decorate([s(cc.Label)],e.prototype,"labPropCurUse",void 0),__decorate([s(cc.Label)],e.prototype,"labAssistLimit",void 0),__decorate([s(cc.Label)],e.prototype,"labAssistCur",void 0),__decorate([s(cc.Node)],e.prototype,"btnAssist",void 0),__decorate([s(cc.Node)],e.prototype,"btnBuy",void 0),__decorate([s(cc.Label)],e.prototype,"labCost",void 0),__decorate([s(cc.Label)],e.prototype,"labGoldRemain",void 0),__decorate([s(cc.Node)],e.prototype,"nodeGoldFit",void 0),e=__decorate([i],e)}(a.default);o.default=r,cc._RF.pop()},{"../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Game/GetInfo":"GetInfo","../Game/RoleConfig":"RoleConfig","../Game/TipsMgr":"TipsMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIReStorePanel:[function(e,t,o){"use strict";cc._RF.push(t,"2fc7eXh21hNrr2R22quXqUH","UIReStorePanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYUtility"),n=e("../Tools/FYMessenger"),i=e("../Tools/FYSDKMgr"),s=e("./UIGamePanel"),r=e("../Common/E"),l=e("../Tools/FYBaseUIPanel"),c=e("../Tools/FYUIMgr"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node1=null,e.node2=null,e.btnBack=null,e.btnSure1=null,e.btnCancel1=null,e.btnSure2=null,e}return __extends(e,t),e.prototype.onShow=function(e,t){var o=t[0];this.initUI(o)},e.prototype.initUI=function(e){console.log(e),this.node1.active=1==e,this.node2.active=2==e},e.prototype.onClickBack=function(){i.default.Instance.removeLocalData(r.E.JsonDataKey.gameSceneInfo),n.default.Instance.send(r.E.MsgType.PlayClickAudio),c.default.Instance.hide(r.E.UIPath.UIReStorePanel)},e.prototype.onClickRestore=function(){n.default.Instance.send(r.E.MsgType.PlayClickAudio);var e=i.default.Instance.loadLocalData(r.E.JsonDataKey.gameSceneInfo),t=JSON.parse(e);null!=t&&0!=t&&0<a.default.getDictionaryCount(t)?null==t.mode||null==t.score||null==t.level||null==t.cubeRandom||null==t.comb||null==t.roleScore||null==t.remain||null==t.levelInfo||null==t.randomInfo?(this.node1.active=!1,this.node2.active=!0):(c.default.Instance.hide(r.E.UIPath.UIReStorePanel),cc.director.getScene().getChildByName("Canvas").getComponent(s.default).reStoreGameScene()):(this.node1.active=!1,this.node2.active=!0)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnBack.scale=1,this.btnSure1.scale=1,this.btnCancel1.scale=1,this.btnSure2.scale=1},__decorate([p(cc.Node)],e.prototype,"node1",void 0),__decorate([p(cc.Node)],e.prototype,"node2",void 0),__decorate([p(cc.Node)],e.prototype,"btnBack",void 0),__decorate([p(cc.Node)],e.prototype,"btnSure1",void 0),__decorate([p(cc.Node)],e.prototype,"btnCancel1",void 0),__decorate([p(cc.Node)],e.prototype,"btnSure2",void 0),e=__decorate([u],e)}(l.default);o.default=h,cc._RF.pop()},{"../Common/E":"E","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility","./UIGamePanel":"UIGamePanel"}],UISelectDailyPanel:[function(e,t,o){"use strict";cc._RF.push(t,"c1065FTUjVN37TwjpjpTolv","UISelectDailyPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Tools/FYMessenger"),n=e("../Common/E"),i=e("../Tools/FYBaseUIPanel"),s=e("../Tools/FYUIMgr"),r=e("../Tools/FYGlobalVarMgr"),l=e("../Tools/FYSDKMgr"),c=cc._decorator,d=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.nodeEasyItem=null,e.nodeDiffcultItem=null,e.nodeBg=null,e.nodeStar1=null,e.nodeStar2=null,e.btnNormalStart=null,e.btnDiffcultStart=null,e.nodeDiffcultPass=null,e.nodeNormalPass=null,e._bMoveStart=!1,e._dailyType=0,e._tex=null,e.passTimeRank=null,e}return __extends(e,t),e.prototype.onShow=function(e,t){var o=t[0];this.setCurDailyType(o)},e.prototype.setCurDailyType=function(e){void 0===e&&(e=0),this.initDiffcult(),this.initNormal()},e.prototype.initFriend=function(){},e.prototype.initNormal=function(){this.nodeStar2.active=!1;var e=1==parseInt(l.default.Instance.loadLocalData(n.E.DataKey.dailyNormalState));this.nodeNormalPass.active=e},e.prototype.initDiffcult=function(){this.nodeStar2.active=!0;var e=1==parseInt(l.default.Instance.loadLocalData(n.E.DataKey.dailyDiffcultState));this.nodeDiffcultPass.active=e},e.prototype.onNext=function(){this.nodeEasyItem.active&&(this.nodeEasyItem.active=!0,this.nodeDiffcultItem.active=!0,this.initDiffcult(),this.btnNormalStart.scale=1,this.btnDiffcultStart.scale=1)},e.prototype.onPrev=function(){this.nodeDiffcultItem.active&&(this.nodeEasyItem.active=!0,this.nodeDiffcultItem.active=!0,this.initNormal(),this.btnNormalStart.scale=1,this.btnDiffcultStart.scale=1)},e.prototype.onBack=function(){s.default.Instance.hide(n.E.UIPath.UISelectDailyPanel),a.default.Instance.send(n.E.MsgType.PlayClickAudio)},e.prototype.touchStartCallback=function(e){this._bMoveStart=!0;var t=this.nodeBg.convertTouchToNodeSpace(e);this._startPos=t},e.prototype.touchEndCallback=function(e){this.nodeBg.convertTouchToNodeSpace(e).x-this._startPos.x<0?this.onNext():this.onPrev()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),a.default.Instance.send(n.E.MsgType.RefreshGameClubBtn,!1)},e.prototype.start=function(){this._tex=new cc.Texture2D},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.btnBack.node.scale=1,this.nodeEasyItem.scale=1,this.nodeDiffcultItem.scale=1,this.btnNormalStart.scale=1,this.btnDiffcultStart.scale=1,a.default.Instance.send(n.E.MsgType.RefreshGameClubBtn,!0)},e.prototype.onClickEasyMode=function(){s.default.Instance.hide(n.E.UIPath.UIMainPanel),s.default.Instance.show(n.E.UIPath.UIGamePanel,r.default.Instance.NodeBottom,n.E.GameMode.E,!1,!1,0),a.default.Instance.send(n.E.MsgType.PlayClickAudio),s.default.Instance.hide(n.E.UIPath.UIReStorePanel),s.default.Instance.hide(n.E.UIPath.UISelectDailyPanel)},e.prototype.onClickDiffcultMode=function(){s.default.Instance.hide(n.E.UIPath.UIMainPanel),s.default.Instance.show(n.E.UIPath.UIGamePanel,r.default.Instance.NodeBottom,n.E.GameMode.E,!1,!1,1),a.default.Instance.send(n.E.MsgType.PlayClickAudio),s.default.Instance.hide(n.E.UIPath.UIReStorePanel),s.default.Instance.hide(n.E.UIPath.UISelectDailyPanel)},e.prototype.onClickEasyDetail=function(){a.default.Instance.send(n.E.MsgType.PlayClickAudio)},e.prototype.onClickDiffcultDetail=function(){a.default.Instance.send(n.E.MsgType.PlayClickAudio)},e.prototype.onClickShare=function(){a.default.Instance.send(n.E.MsgType.PlayClickAudio)},e.prototype.updaetSubDomainCanvas=function(){this._tex&&cc.sys.platform==cc.sys.WECHAT_GAME&&(this._tex.initWithElement(sharedCanvas),this._tex.handleLoadedTexture(),this.passTimeRank.spriteFrame=new cc.SpriteFrame(this._tex))},e.prototype.update=function(){},__decorate([u(cc.Button)],e.prototype,"btnBack",void 0),__decorate([u(cc.Node)],e.prototype,"nodeEasyItem",void 0),__decorate([u(cc.Node)],e.prototype,"nodeDiffcultItem",void 0),__decorate([u(cc.Node)],e.prototype,"nodeBg",void 0),__decorate([u(cc.Node)],e.prototype,"nodeStar1",void 0),__decorate([u(cc.Node)],e.prototype,"nodeStar2",void 0),__decorate([u(cc.Node)],e.prototype,"btnNormalStart",void 0),__decorate([u(cc.Node)],e.prototype,"btnDiffcultStart",void 0),__decorate([u(cc.Node)],e.prototype,"nodeDiffcultPass",void 0),__decorate([u(cc.Node)],e.prototype,"nodeNormalPass",void 0),__decorate([u(cc.Sprite)],e.prototype,"passTimeRank",void 0),e=__decorate([d],e)}(i.default);o.default=p,cc._RF.pop()},{"../Common/E":"E","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr"}],UISelectRolePanel:[function(e,t,o){"use strict";cc._RF.push(t,"25d50zs+7BFA7WTcQyCRyx0","UISelectRolePanel"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Tools/FYUtility"),s=e("../Game/RoleItem"),c=e("../Tools/FYMessenger"),d=e("../Tools/FYSDKMgr"),u=e("../Game/GetInfo"),p=e("../Game/RoleConfig"),h=e("../Common/E"),a=e("../Tools/FYBaseUIPanel"),f=e("../Tools/FYUIMgr"),y=e("../Tools/FYGlobalVarMgr"),r=e("../Game/RoleMgr"),n=cc._decorator,l=n.ccclass,m=n.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.btnBack=null,e.nRoleCount=5,e.curRoleItem=null,e}return __extends(e,t),e.prototype.onEnable=function(){this.initUI(),c.default.Instance.add(h.E.MsgType.RefreshSelectRole,this.initUI,this),c.default.Instance.send(h.E.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.btnBack.scale=1,c.default.Instance.remove(h.E.MsgType.RefreshSelectRole,this.initUI,this),c.default.Instance.send(h.E.MsgType.RefreshGameClubBtn,!0)},e.prototype.onClickBack=function(){c.default.Instance.send(h.E.MsgType.PlayClickAudio),f.default.Instance.hide(h.E.UIPath.UISelectRolePanel)},e.prototype.initUI=function(){this.content.removeAllChildren();var e=this.content.getComponent(cc.Layout).spacingY;this.content.setContentSize(this.content.getContentSize().width,this.nRoleCount*this.item.getContentSize().height+e*(this.nRoleCount-1)),console.log("=========================="+this.content.getContentSize().height);for(var t=0;t<this.nRoleCount;t++)if(t<h.E.getCurRoleCount()){var o=i.default.addChild(this.content,this.item).getComponent(s.default),a=t+1,n=r.default.Instance.getRoleInView(a.toString());o.setItem(a.toString(),n,this)}else{a=t+1;(o=i.default.addChild(this.content,this.item).getComponent(s.default)).setItem(a.toString(),null,this)}},e.prototype.onClickChooseCall=function(e){var t=e.getRoleId();(null==this.curRoleItem||null!=this.curRoleItem&&this.curRoleItem.getRoleId()!=t)&&(d.default.Instance.saveLocalData(h.E.DataKey.userRoleId,t),this.curRoleItem=e,c.default.Instance.send(h.E.MsgType.RefreshRoleItems),c.default.Instance.send(h.E.MsgType.PlayClickAudio))},e.prototype.onClickGoldBuyCall=function(e){var t=e.getRoleId(),o=p.default.Instance.getRoleInfoByRoleId(t),a=parseInt(o.buyNum),n=d.default.Instance.loadLocalData(h.E.DataKey.orangeNum);if(null!=n&&0!=n)if(n<a)f.default.Instance.show(h.E.UIPath.UITipsPanel);else{var i=parseInt(n)-a;d.default.Instance.saveLocalData(h.E.DataKey.orangeNum,i.toString()),c.default.Instance.send(h.E.MsgType.RefreshOrange);var s=new u.default;s.getType=h.E.GetType.kGetRole,s.getNum=1,s.roleId=parseInt(t),s.roleScore=o.point;var r=d.default.Instance.loadLocalJsonData(h.E.JsonDataKey.userOwnRole);null==r?(r={})[s.roleId.toString()]=1:r[s.roleId.toString()]=1,d.default.Instance.saveLocalJsonData(h.E.JsonDataKey.userOwnRole,r),d.default.Instance.androidSendEvent(h.E.ttEventName.pet,{petid:s.roleId}),d.default.Instance.androidSendEvent(h.E.ttEventName.dealcoins,{dealid:1}),f.default.Instance.show(h.E.UIPath.UIGetMenuPanel,y.default.Instance.NodeTop,s),d.default.Instance.saveLocalData(h.E.DataKey.userRoleId,t);var l=d.default.Instance.loadLocalJsonData(h.E.JsonDataKey.userRoleExpCard);null!=l&&null!=l[t]&&(delete l[t],d.default.Instance.saveLocalJsonData(h.E.JsonDataKey.userRoleExpCard,l)),this.curRoleItem=e,c.default.Instance.send(h.E.MsgType.RefreshRoleItems),c.default.Instance.send(h.E.MsgType.PlayClickAudio)}else f.default.Instance.show(h.E.UIPath.UITipsPanel)},e.prototype.onClickUpgradeCall=function(e){var t=e.getRoleId(),o=(p.default.Instance.getRoleInfoByRoleId(t),d.default.Instance.loadLocalJsonData(h.E.JsonDataKey.userOwnRole)),a=p.default.Instance.getRoleUpgradeByLevel(t,o[t]),n=d.default.Instance.loadLocalData(h.E.DataKey.orangeNum);if(null!=n&&0!=n)if(n<a)f.default.Instance.show(h.E.UIPath.UITipsPanel);else{var i=parseInt(n)-a;d.default.Instance.saveLocalData(h.E.DataKey.orangeNum,i.toString()),c.default.Instance.send(h.E.MsgType.RefreshOrange),o[t.toString()]=o[t.toString()]+1,d.default.Instance.saveLocalJsonData(h.E.JsonDataKey.userOwnRole,o),d.default.Instance.androidSendEvent(h.E.ttEventName.petlevel,{petid:parseInt(t),petgrade:o[t.toString()]}),d.default.Instance.androidSendEvent(h.E.ttEventName.dealcoins,{dealid:2}),this.curRoleItem=e,c.default.Instance.send(h.E.MsgType.RefreshRoleItems),c.default.Instance.send(h.E.MsgType.PlayClickAudio)}else f.default.Instance.show(h.E.UIPath.UITipsPanel)},__decorate([m(cc.Node)],e.prototype,"content",void 0),__decorate([m(cc.Node)],e.prototype,"item",void 0),__decorate([m(cc.Node)],e.prototype,"btnBack",void 0),e=__decorate([l],e)}(a.default);o.default=g,cc._RF.pop()},{"../Common/E":"E","../Game/GetInfo":"GetInfo","../Game/RoleConfig":"RoleConfig","../Game/RoleItem":"RoleItem","../Game/RoleMgr":"RoleMgr","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UISevenDayLoginPanel:[function(e,t,o){"use strict";cc._RF.push(t,"4067bpZAupH27/nm2DmfBzn","UISevenDayLoginPanel"),Object.defineProperty(o,"__esModule",{value:!0});var T=e("../Tools/FYSDKMgr"),S=e("../Game/GetInfo"),C=e("../Tools/FYMessenger"),_=e("../Tools/FYUtility"),E=e("../Common/E"),a=e("../Tools/FYBaseUIPanel"),P=e("../Tools/FYUIMgr"),b=e("../Tools/FYGlobalVarMgr"),D=e("../Common/FYUserDataMgr"),n=cc._decorator,i=n.ccclass,s=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardList=[[{type:E.E.GetType.kGetOrange,ID:E.E.PropType.kNone,value:200}],[{type:E.E.GetType.kGetProp,ID:E.E.PropType.kUndoOperate,value:5}],[{type:E.E.GetType.kGetOrange,ID:E.E.PropType.kNone,value:400}],[{type:E.E.GetType.kGetProp,ID:E.E.PropType.kSuperStar,value:5}],[{type:E.E.GetType.kGetOrange,ID:E.E.PropType.kNone,value:600}],[{type:E.E.GetType.kGetProp,ID:E.E.PropType.kHammer,value:5}],[{type:E.E.GetType.kGetProp,ID:E.E.PropType.kUndoOperate,value:5},{type:E.E.GetType.kGetProp,ID:E.E.PropType.kHammer,value:5},{type:E.E.GetType.kGetProp,ID:E.E.PropType.kSuperStar,value:5}]],e.nodeHadSign=null,e.nodeNoSign=null,e.btnSign=null,e.btnDoubleSign=null,e.nodeItemFirstWeek=null,e.nodeTalk1=null,e.nodeTalk2=null,e.nodeListReward=[],e}return __extends(e,t),e.prototype.sign=function(e){void 0===e&&(e=!1);var t=e?2:1,o=T.default.Instance.loadLocalData(E.E.DataKey.GetSignRewardIndex,"-1"),a=Number(o)+1;a=(a+7)%7;var n=this.rewardList[a],i=!1,s=!1,r=T.default.Instance.loadLocalData(E.E.DataKey.GetFirstWeekSignTime,"0");if(6==Number(a)&&0==Number(r)){var l=T.default.Instance.loadLocalJsonData(E.E.JsonDataKey.userOwnRole);if(n=[{type:E.E.GetType.kGetRole,ID:"2",value:1}],l&&l[2])null!=(c=T.default.Instance.loadLocalJsonData(E.E.JsonDataKey.userRoleExpCard))&&0!=_.default.getDictionaryCount(c)?null==c[2]&&(n=[{type:E.E.GetType.kGetOrange,ID:E.E.PropType.kNone,value:888}],s=!0):(n=[{type:E.E.GetType.kGetOrange,ID:E.E.PropType.kNone,value:888}],s=!0)}if(1==Number(a)&&0==Number(r)){var c;l=T.default.Instance.loadLocalJsonData(E.E.JsonDataKey.userOwnRole);if(n=[{type:E.E.GetType.kGetRole,ID:"5",value:1}],l&&l[5])null!=(c=T.default.Instance.loadLocalJsonData(E.E.JsonDataKey.userRoleExpCard))&&0!=_.default.getDictionaryCount(c)?null==c[5]&&(n=[{type:E.E.GetType.kGetOrange,ID:E.E.PropType.kNone,value:888}]):n=[{type:E.E.GetType.kGetOrange,ID:E.E.PropType.kNone,value:888}]}for(var d in n){var u=n[d];if(u&&u.type==E.E.GetType.kGetExpCard)i=!0;else if(u){var p=u.type;if(p==E.E.GetType.kGetOrange){var h=T.default.Instance.loadLocalData(E.E.DataKey.orangeNum,"0");T.default.Instance.saveLocalData(E.E.DataKey.orangeNum,Number(h)+u.value*t),C.default.Instance.send(E.E.MsgType.RefreshOrange)}else if(p==E.E.GetType.kGetProp){var f=T.default.Instance.loadLocalJsonData(E.E.JsonDataKey.userOwnProp),y=f[u.ID]||0,m=Number(y)+u.value*t;f[u.ID]=m,D.default.Instance.addPropRewardTimes(u.value*t),T.default.Instance.saveLocalJsonData(E.E.JsonDataKey.userOwnProp,f),C.default.Instance.send(E.E.MsgType.RefreshProp)}else if(p==E.E.GetType.kGetRole){l=T.default.Instance.loadLocalJsonData(E.E.JsonDataKey.userOwnRole)||{};var g=u.ID;l[g+""]=1,T.default.Instance.saveLocalJsonData(E.E.JsonDataKey.userOwnRole,l);var v=T.default.Instance.loadLocalJsonData(E.E.JsonDataKey.userRoleExpCard)||{};delete v[g+""],T.default.Instance.saveLocalJsonData(E.E.JsonDataKey.userRoleExpCard,v),T.default.Instance.saveLocalData(E.E.DataKey.userRoleId,g.toString())}}}if(!i){var I=new S.default;I.getType=n[0].type,I.getType==E.E.GetType.kGetRole?(I.propType=E.E.PropType.kNone,I.roleId=Number(n[0].ID)):(I.propType=n[0].ID,I.roleId=0),I.getNum=n[0].value*t,s?P.default.Instance.show(E.E.UIPath.UIGetMenuPanel,b.default.Instance.NodeTop,I,null,1):P.default.Instance.show(E.E.UIPath.UIGetMenuPanel,b.default.Instance.NodeTop,I,function(){if(n[1]){var e=new S.default;e.getType=n[1].type,e.getType==E.E.GetType.kGetRole?(e.roleId=Number(n[0].ID),e.propType=E.E.PropType.kNone):(e.roleId=0,e.propType=n[1].ID),e.getNum=n[1].value*t,P.default.Instance.show(E.E.UIPath.UIGetMenuPanel,b.default.Instance.NodeTop,e,function(){if(n[2]){var e=new S.default;e.getType=n[2].type,e.getType==E.E.GetType.kGetRole?(e.roleId=Number(n[0].ID),e.propType=E.E.PropType.kNone):(e.roleId=0,e.propType=n[2].ID),e.getNum=n[2].value*t,P.default.Instance.show(E.E.UIPath.UIGetMenuPanel,b.default.Instance.NodeTop,e)}})}}),I.getType==E.E.GetType.kGetOrange&&T.default.Instance.androidSendEvent(E.E.ttEventName.rewardscoins,{rewardid:5})}6==Number(a)&&0==Number(r)&&T.default.Instance.saveLocalData(E.E.DataKey.GetFirstWeekSignTime,Date.now()),T.default.Instance.saveLocalData(E.E.DataKey.GetSignRewardLastTime,Date.now()),T.default.Instance.saveLocalData(E.E.DataKey.GetSignRewardIndex,""+a),console.log("--------sign succed--------------",a),C.default.Instance.send(E.E.MsgType.RefreshSignState)},e.prototype.clickSign=function(){var e=T.default.Instance.loadLocalData(E.E.DataKey.GetSignRewardLastTime,"0"),t=Date.now();(0==Number(e)||!_.default.isSameDay(e)&&e<t)&&(this.sign(),this.refreshUI())},e.prototype.clickDoubleSign=function(){if(C.default.Instance.send(E.E.MsgType.PlayClickAudio),T.default.Instance.ttIsTt()){var a=this;T.default.Instance.ttCreateRewardedVideoAd("adunit-8381dj1d7cbf3hsm9r",function(e){if(e){var t=T.default.Instance.loadLocalData(E.E.DataKey.GetSignRewardLastTime,"0"),o=Date.now();(0==Number(t)||!_.default.isSameDay(t)&&t<o)&&(a.sign(!0),a.refreshUI())}})}else{if(!this.btnDoubleSign.interactable)return;this.btnDoubleSign.interactable=!1,T.default.Instance.androidShowAd(E.E.ttAdType.LoginReawardPanelRewardVideoAd),T.default.Instance.androidSendEvent(E.E.ttEventName.advertising,{position:3})}},e.prototype.onAndroidSDKCall=function(e,t,o){if(o==E.E.ttAdType.LoginReawardPanelRewardVideoAd){if(t){console.log("======LoginReawardPanelRewardVideoAd success!!!!!!!!");var a=T.default.Instance.loadLocalData(E.E.DataKey.GetSignRewardLastTime,"0"),n=Date.now();(0==Number(a)||!_.default.isSameDay(a)&&a<n)&&(this.sign(!0),this.refreshUI())}this.btnDoubleSign.interactable=!0}},e.prototype.clickClose=function(){P.default.Instance.hide(E.E.UIPath.UISevenDayLoginPanel)},e.prototype.setItem=function(e,t){var o=Number(e),a=this.nodeListReward[o],n=T.default.Instance.loadLocalData(E.E.DataKey.GetSignRewardIndex,"-1"),i=T.default.Instance.loadLocalData(E.E.DataKey.GetSignRewardLastTime,"0"),s=Date.now();if(6==(n=Number(n))&&!_.default.isSameDay(i)&&0<s-i&&(n=-1),console.log("-----signIndex------",n,t),o<=n?(a.getChildByName("bgSign").active=!0,a.getChildByName("bgCantSign").active=!1,a.getChildByName("hadSign").active=!0):(console.log("-------lastSignDay-------now---index-signIndex-",i,s,o,n),!_.default.isSameDay(i)&&0<s-i&&o==n+1?(a.getChildByName("bgSign").active=!0,a.getChildByName("bgCantSign").active=!1):(a.getChildByName("bgSign").active=!1,a.getChildByName("bgCantSign").active=!0),a.getChildByName("hadSign").active=!1),1==o){var r=T.default.Instance.loadLocalData(E.E.DataKey.GetFirstWeekSignTime,"0");0==Number(r)?(a.getChildByName("iconProp").active=!1,a.getChildByName("role5").active=!0,a.getChildByName("num").getComponent(cc.Label).string="X 1"):(a.getChildByName("iconProp").active=!0,a.getChildByName("role5").active=!1,a.getChildByName("num").getComponent(cc.Label).string="X 5")}if(6==o){a.active=!0;r=T.default.Instance.loadLocalData(E.E.DataKey.GetFirstWeekSignTime,"0");var l=this.nodeItemFirstWeek;0==Number(r)?(l.active=!0,a.active=!1,n+1!=6||_.default.isSameDay(i)?(l.getChildByName("bgSign").active=!1,l.getChildByName("bgCantSign").active=!0):(l.getChildByName("bgSign").active=!0,l.getChildByName("bgCantSign").active=!1),l.getChildByName("hadSign").active=!1):_.default.isSameDay(r)?(l.getChildByName("bgSign").active=!0,l.getChildByName("bgCantSign").active=!1,l.getChildByName("hadSign").active=!0):(l.active=!1,a.active=!0)}},e.prototype.refreshUI=function(){var e=T.default.Instance.loadLocalData(E.E.DataKey.GetSignRewardLastTime,"0"),t=Date.now();0==Number(e)?(this.nodeHadSign.active=!1,this.nodeNoSign.active=!0,console.log("-----lastSignDay-===00000-----",e)):!_.default.isSameDay(e)&&0<t-e?(this.nodeHadSign.active=!1,this.nodeNoSign.active=!0,console.log("-----可以签到-===-----")):(this.nodeHadSign.active=!0,this.nodeNoSign.active=!1,console.log("-----已经签到-===-----"));var o=T.default.Instance.loadLocalData(E.E.DataKey.GetSignRewardIndex,"-1");for(var a in 6==Number(o)&&(o=-1),this.nodeListReward)this.setItem(a,o);var n=T.default.Instance.loadLocalData(E.E.DataKey.GetFirstWeekSignTime,"0");0==Number(n)?(this.nodeTalk1.active=!1,this.nodeTalk2.active=!0):_.default.isSameDay(n)?(this.nodeTalk1.active=!1,this.nodeTalk2.active=!0):(this.nodeTalk2.active=!1,this.nodeTalk1.active=!0)},e.prototype.onEnable=function(){this.refreshUI(),C.default.Instance.send(E.E.MsgType.RefreshGameClubBtn,!1),C.default.Instance.add(E.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this)},e.prototype.onDisable=function(){C.default.Instance.send(E.E.MsgType.RefreshGameClubBtn,!0),C.default.Instance.remove(E.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this)},__decorate([s({type:cc.Node,displayName:"已签到按钮面板",tooltip:"已签到按钮面板"})],e.prototype,"nodeHadSign",void 0),__decorate([s({type:cc.Node,displayName:"待签到按钮面板",tooltip:"待签到按钮面板"})],e.prototype,"nodeNoSign",void 0),__decorate([s({type:cc.Node,displayName:"签到按钮",tooltip:"签到按钮"})],e.prototype,"btnSign",void 0),__decorate([s({type:cc.Button,displayName:"双倍签到按钮",tooltip:"双倍签到按钮"})],e.prototype,"btnDoubleSign",void 0),__decorate([s({type:cc.Node,displayName:"首周登录的第七天的item",tooltip:"首周登录的第七天的item"})],e.prototype,"nodeItemFirstWeek",void 0),__decorate([s({type:cc.Node,displayName:"对话1",tooltip:"对话1"})],e.prototype,"nodeTalk1",void 0),__decorate([s({type:cc.Node,displayName:"对话2",tooltip:"对话2"})],e.prototype,"nodeTalk2",void 0),__decorate([s({type:Array(cc.Node),displayName:"奖励item列表",tooltip:"奖励item列表"})],e.prototype,"nodeListReward",void 0),e=__decorate([i],e)}(a.default);o.default=r,cc._RF.pop()},{"../Common/E":"E","../Common/FYUserDataMgr":"FYUserDataMgr","../Game/GetInfo":"GetInfo","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr","../Tools/FYUtility":"FYUtility"}],UIShopPanel:[function(e,t,o){"use strict";cc._RF.push(t,"99a9ayebKVNwqnO1Rx3tKKe","UIShopPanel"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("../Tools/FYSDKMgr"),r=e("../Tools/FYMessenger"),l=e("../Game/GetInfo"),c=e("../Common/E"),a=e("../Tools/FYBaseUIPanel"),d=e("../Tools/FYUIMgr"),u=e("../Tools/FYGlobalVarMgr"),n=cc._decorator,i=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeGrid=null,e.btnBack=null,e.btnShop1=null,e.btnShop2=null,e.btnShop3=null,e.btnShop4=null,e.btnShop5=null,e}return __extends(e,t),e.prototype.onEnable=function(){r.default.Instance.send(c.E.MsgType.RefreshGameClubBtn,!1)},e.prototype.onDisable=function(){this.btnBack.scale=1,this.btnShop1.scale=1,this.btnShop2.scale=1,this.btnShop3.scale=1,this.btnShop4.scale=1,this.btnShop5.scale=1,r.default.Instance.send(c.E.MsgType.RefreshGameClubBtn,!0)},e.prototype.onClickBack=function(){r.default.Instance.send(c.E.MsgType.PlayClickAudio),d.default.Instance.hide(c.E.UIPath.UIShopPanel),d.default.Instance.show(c.E.UIPath.UIMainPanel)},e.prototype.onClickShopBuy=function(e){var t=e.target.parent.getChildByName("score").getComponent(cc.Label).string.replace("X",""),o=parseInt(t),a=s.default.Instance.loadLocalData(c.E.DataKey.orangeNum),n=parseInt(a)+o;s.default.Instance.saveLocalData(c.E.DataKey.orangeNum,n.toString()),r.default.Instance.send(c.E.MsgType.RefreshOrange);var i=new l.default;i.getType=c.E.GetType.kGetOrange,i.getNum=o;parseInt(a),i.getNum;d.default.Instance.show(c.E.UIPath.UIGetMenuPanel,u.default.Instance.NodeTop,i,function(){d.default.Instance.hide(c.E.UIPath.UIMainPanel),d.default.Instance.show(c.E.UIPath.UIShopPanel)}.bind(this)),r.default.Instance.send(c.E.MsgType.PlayClickAudio)},__decorate([p(cc.Node)],e.prototype,"nodeGrid",void 0),__decorate([p(cc.Node)],e.prototype,"btnBack",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop1",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop2",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop3",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop4",void 0),__decorate([p(cc.Node)],e.prototype,"btnShop5",void 0),e=__decorate([i],e)}(a.default);o.default=h,cc._RF.pop()},{"../Common/E":"E","../Game/GetInfo":"GetInfo","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr"}],UITipsPanel:[function(e,t,o){"use strict";cc._RF.push(t,"5fbd7Y6To1P4Itxz7ScDDOJ","UITipsPanel"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("../Tools/FYMessenger"),r=e("../Common/E"),a=e("../Tools/FYBaseUIPanel"),l=e("../Tools/FYUIMgr"),c=e("../Game/GetInfo"),d=e("../Tools/FYSDKMgr"),u=e("../Tools/FYGlobalVarMgr"),n=cc._decorator,i=n.ccclass,p=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMask=null,e.btnBack=null,e.btnShop=null,e.btnAds=null,e.anim=null,e.delegateClose=null,e}return __extends(e,t),e.prototype.onClickBack=function(){s.default.Instance.send(r.E.MsgType.PlayClickAudio),l.default.Instance.hide(r.E.UIPath.UITipsPanel)},e.prototype.onClickShop=function(){s.default.Instance.send(r.E.MsgType.PlayClickAudio),l.default.Instance.hide(r.E.UIPath.UITipsPanel),l.default.Instance.show(r.E.UIPath.UIShopPanel),null!=this.delegateClose&&this.delegateClose()},e.prototype.onClickAdsGold=function(){if(s.default.Instance.send(r.E.MsgType.PlayClickAudio),d.default.Instance.ttIsTt()){d.default.Instance.ttCreateRewardedVideoAd("adunit-cfhj2ciefhd378f16c",function(e){if(e){l.default.Instance.hide(r.E.UIPath.UITipsPanel);var t=new c.default;t.getType=r.E.GetType.kGetOrange,t.getNum=200;var o=d.default.Instance.loadLocalData(r.E.DataKey.orangeNum),a=parseInt(o)+t.getNum;d.default.Instance.saveLocalData(r.E.DataKey.orangeNum,a.toString()),s.default.Instance.send(r.E.MsgType.RefreshOrange),l.default.Instance.show(r.E.UIPath.UIGetMenuPanel,u.default.Instance.NodeTop,t)}})}else{if(!this.btnAds.interactable)return;this.btnAds.interactable=!1,d.default.Instance.androidShowAd(r.E.ttAdType.GoldTipsPanelRewardVideoAd),d.default.Instance.androidSendEvent(r.E.ttEventName.advertising,{position:1})}},e.prototype.onAndroidSDKCall=function(e,t,o){if(o==r.E.ttAdType.GoldTipsPanelRewardVideoAd){if(t){console.log("======GoldTipsPanelRewardVideoAd success!!!!!!!!"),l.default.Instance.hide(r.E.UIPath.UITipsPanel);var a=new c.default;a.getType=r.E.GetType.kGetOrange,a.getNum=200;var n=d.default.Instance.loadLocalData(r.E.DataKey.orangeNum),i=parseInt(n)+a.getNum;d.default.Instance.saveLocalData(r.E.DataKey.orangeNum,i.toString()),d.default.Instance.androidSendEvent(r.E.ttEventName.rewardscoins,{rewardid:2}),s.default.Instance.send(r.E.MsgType.RefreshOrange),l.default.Instance.show(r.E.UIPath.UIGetMenuPanel,u.default.Instance.NodeTop,a)}else l.default.Instance.hide(r.E.UIPath.UITipsPanel);this.btnAds.interactable=!0}},e.prototype.onClickMask=function(){},e.prototype.onEnable=function(){this.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onClickMask,this),s.default.Instance.add(r.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this)},e.prototype.onDisable=function(){this.btnBack.node.scale=1,this.btnShop.node.scale=1,this.btnAds.node.scale=1,this.nodeMask.off(cc.Node.EventType.TOUCH_END,this.onClickMask,this),s.default.Instance.remove(r.E.MsgType.OnAndroidSDKCallback,this.onAndroidSDKCall,this)},e.prototype.onShow=function(e,t){var o=t[0];this.initUI(o)},e.prototype.initUI=function(e){void 0===e&&(e=null),this.delegateClose=e,this.anim.play()},__decorate([p(cc.Node)],e.prototype,"nodeMask",void 0),__decorate([p(cc.Button)],e.prototype,"btnBack",void 0),__decorate([p(cc.Button)],e.prototype,"btnShop",void 0),__decorate([p(cc.Button)],e.prototype,"btnAds",void 0),__decorate([p(cc.Animation)],e.prototype,"anim",void 0),e=__decorate([i],e)}(a.default);o.default=h,cc._RF.pop()},{"../Common/E":"E","../Game/GetInfo":"GetInfo","../Tools/FYBaseUIPanel":"FYBaseUIPanel","../Tools/FYGlobalVarMgr":"FYGlobalVarMgr","../Tools/FYMessenger":"FYMessenger","../Tools/FYSDKMgr":"FYSDKMgr","../Tools/FYUIMgr":"FYUIMgr"}]},{},["TestBoLang","C","E","FYUserDataMgr","ButtonMgr","ClickMask","CubeContainer","CubeItem","DailyInfoMenu","DailyLevelConfig","DailyLevelCreator","DailyViewMgr","GetInfo","GridItem","GuidanceMgr","PropMgr","RoleAnim","RoleConfig","RoleItem","RoleMgr","SpriteAnim","Tips","TipsMgr","Main","EffectMgr","FYAudioCtl","FYBaseNode","FYBaseUIPanel","FYEffectControl","FYEffectItem","FYGlobalVarMgr","FYMessenger","FYResMgr","FYSDKMgr","FYScheduleCtl","FYSequenceFrameControl","FYTweenMgr","FYUIMgr","FYUtility","SDKBridge","UIAdvPanel","UIBackPackPanel","UIDailySharePanel","UIDailyTipsPanel","UIFlowBackTipsPanel","UIGameOverPanel","UIGamePanel","UIGetMenuPanel","UIHelpPanel","UILoadingPanel","UIMainPanel","UIPausePanel","UIPrizePanel","UIPropGetPanel","UIReStorePanel","UISelectDailyPanel","UISelectRolePanel","UISevenDayLoginPanel","UIShopPanel","UITipsPanel"]);