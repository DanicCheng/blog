window.__require=function e(t,n,o){function a(i,r){if(!n[i]){if(!t[i]){var l=i.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+i+"'")}}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){return a(t[i][1][e]||e)},u,u.exports,e,t,n,o)}return n[i].exports}for(var s="function"==typeof __require&&__require,i=0;i<o.length;i++)a(o[i]);return a}({Demo:[function(e,t,n){"use strict";cc._RF.push(t,"61540wCDqlP3ZWgO+YaGwWq","Demo"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,s=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openid="",t}return __extends(t,e),t.prototype.start=function(){CatcherSDK.init({url:"ws://127.0.0.1:8081/ws/game",gameVersion:"0.0.1",gameId:"123123"}),CatcherSDK.instance().on("CONNECT",function(e){console.log("`````````````````````````onConnect",e)}).on("PROGRESS",function(e){console.log("`````````````````````````PROGRESS",e)}).on("READY",function(e){console.log("`````````````````````````READY",e)}).on("KICK",function(){console.log("`````````````````````````KICK")}).on("GAMEOVER",function(e){console.log("`````````````````````````GAMEOVER",e)}).on("BREAK",function(){console.log("`````````````````````````BREAK")}).on("CONTINUE",function(){console.log("`````````````````````````CONTINUE")}).on("ERROR",function(){console.log("`````````````````````````ERROR")}).on("MESSAGE",function(e){e.data instanceof ArrayBuffer?console.log("`````````````````````````msg.data.byteLength = ",e.data.byteLength):(console.log("`````````````````````````JSON.stringify(msg.data) = ",JSON.stringify(e.data)),console.log(e.data.rand))}).start();var e=0;CatcherSDK.instance().updateProgress(CatcherSDK.ProgressState.PROGRESSING,0),this.schedule(function(){e>100||(console.log("=================CatcherSDK.ProgressState.PROGRESSING = ",e),CatcherSDK.instance().updateProgress(CatcherSDK.ProgressState.PROGRESSING,e)),e+=25},.5,5,.5)},t.prototype.onDisable=function(){CatcherSDK.instance().end()},t.prototype.onDestroy=function(){CatcherSDK.instance().end()},t=__decorate([a],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],PetHero_AIMgr:[function(e,t,n){"use strict";cc._RF.push(t,"24d80LvIZhFQa2mtaRlsVUb","PetHero_AIMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYMessenger"),a=e("../Common/PetHero_C"),s=e("../Common/PetHero_UserDataMgr"),i=e("../Tools/PetHero_FYUtility"),r=e("../Common/PetHero_CustomMgr"),l=cc._decorator,c=l.ccclass,u=(l.property,function(){function e(){this.callback=null,this.cbUseProp=null,this._nUsePropType=a.C.CubeType.T_4,this._nWhatTimeUse=0}var t;return t=e,e.prototype.start=function(e){console.log("=\u5f00\u542fai="),this.callback&&e.unschedule(this.callback),this.cbUseProp&&e.unschedule(this.cbUseProp),this._nWhatTimeUse=i.default.getRangeRandom(11,20);var t=i.default.getRangeRandom(1,100);this._nUsePropType=t<=25?a.C.CubeType.T_10:t<=50?a.C.CubeType.T_9:0;var n=s.default.Instance.OneRoundTime-1;this.callback=function(){s.default.Instance.FightMode==a.C.FightMode.TwoVsOnlineAI?o.default.Instance.send(a.C.MsgType.AttackEnemy,16):s.default.Instance.FightMode==a.C.FightMode.OneVsOnlineAI?o.default.Instance.send(a.C.MsgType.AttackEnemy,16):o.default.Instance.send(a.C.MsgType.Attacked,a.C.RoleType.Enemy1,16)},e.schedule(this.callback,5,n,0),this.startUseProp(e)},e.prototype.startUseProp=function(e){this.cbUseProp=function(){},e.schedule(this.cbUseProp,1,s.default.Instance.OneRoundTime,0)},e.prototype.stop=function(e){e.unschedule(this.callback),e.unschedule(this.cbUseProp)},e.prototype.userProp=function(){if(s.default.Instance.RemainTime==this._nWhatTimeUse){i.default.getRangeRandom(1,100);this._nUsePropType==a.C.CubeType.T_5?s.default.Instance.FightMode==a.C.FightMode.OneVsOnlineAI||s.default.Instance.FightMode==a.C.FightMode.TwoVsOnlineAI?(cc.log("------------ \u7535\u8111\u4f7f\u7528\u98de\u789f"),r.default.Instance.qqPostGameData({postType:a.C.QQPostDataType.UFO})):o.default.Instance.send(a.C.MsgType.SetUFO,a.C.RoleType.Me):this._nUsePropType==a.C.CubeType.T_4&&(s.default.Instance.FightMode==a.C.FightMode.OneVsOnlineAI||s.default.Instance.FightMode==a.C.FightMode.TwoVsOnlineAI?(cc.log("------------ \u7535\u8111\u4f7f\u7528\u58a8\u6c41"),r.default.Instance.qqPostGameData({postType:a.C.QQPostDataType.Ink})):o.default.Instance.send(a.C.MsgType.SetCubeInk,a.C.RoleType.Me))}},e.Instance=new t,e=t=__decorate([c],e)}());n.default=u,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/PetHero_CustomMgr":"PetHero_CustomMgr","../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_AttackMgr:[function(e,t,n){"use strict";cc._RF.push(t,"d94a8kr8ppPVbuR7o1/Mjgs","PetHero_AttackMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Common/PetHero_UserDataMgr"),a=e("../Common/PetHero_C"),s=cc._decorator,i=s.ccclass,r=(s.property,function(){function e(){this._nMaxBlood=300}var t;return t=e,Object.defineProperty(e.prototype,"maxBlood",{get:function(){return o.default.Instance.FightMode==a.C.FightMode.OneVsAI||o.default.Instance.FightMode==a.C.FightMode.OneVsOne||o.default.Instance.FightMode==a.C.FightMode.OneVsOnlineAI?99999999:600},enumerable:!0,configurable:!0}),e.prototype.calcDamage=function(e){return console.log("-----\u8ba1\u7b97\u4f24\u5bb3---",3*(e-2)),3*(e-2)},e.prototype.calcComboDamage=function(e){return console.log("-----\u8ba1\u7b97\u8fde\u51fb\u989d\u5916\u4f24\u5bb3---",e-1<0?0:e-1),e-1<0?0:e-1},e.Instance=new t,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr"}],PetHero_CellItem:[function(e,t,n){"use strict";cc._RF.push(t,"2423d9eHONIeafnlnH1SnfC","PetHero_CellItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYBaseNode"),a=cc._decorator,s=a.ccclass,i=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setSize=function(e){this.node.setContentSize(e)},t.prototype.setPosition=function(e){this.node.setPosition(e)},t.prototype.start=function(){},t=__decorate([s],t)}(o.default));n.default=i,cc._RF.pop()},{"../Tools/PetHero_FYBaseNode":"PetHero_FYBaseNode"}],PetHero_CubeInfo:[function(e,t,n){"use strict";cc._RF.push(t,"14ac89Ig5RHDI6aN2MKWpD9","PetHero_CubeInfo"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./../Common/PetHero_C"),a=cc._decorator,s=a.ccclass,i=(a.property,function(){function e(){this.cubeType=o.C.CubeType.A,this.cubeIndexPos=new cc.Vec2(0,0)}return e=__decorate([s],e)}());n.default=i,cc._RF.pop()},{"./../Common/PetHero_C":"PetHero_C"}],PetHero_CubeItem:[function(e,t,n){"use strict";cc._RF.push(t,"1e62d7QYORE3ZlSmIic/8w1","PetHero_CubeItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./../Common/PetHero_C"),a=e("./PetHero_CubeMgr"),s=e("../Tools/PetHero_FYTweenMgr"),i=e("../Tools/PetHero_FYBaseNode"),r=e("../Tools/PetHero_FYResMgr"),l=e("../Tools/PetHero_FYMessenger"),c=e("../Common/PetHero_UserDataMgr"),u=e("./PetHero_EffectMgr"),d=e("../Common/PetHero_CustomMgr"),p=e("../Tools/PetHero_FYScheduleCtl"),h=e("../Tools/PetHero_FYUtility"),f=cc._decorator,y=f.ccclass,C=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteCube=null,t.spriteCubeFace=null,t.spriteCubeFaceAnim=null,t.animSelect=null,t.spriteWater=null,t._oCubeInfo=null,t._selectedAction=null,t._state=o.C.CubeState.Normal,t._checked=!1,t._checkedProp=!1,t._nCubeIndex=0,t._bPlayScaleBigAndSmallTween=!1,t._actionPlayScaleBigAndSmallTween=null,t._cbUpdateSprite=null,t._bPlaySuggestionTween=!1,t._actionPlaySuggestionTween=null,t._efSuggestion=null,t}return __extends(t,e),t.prototype.setCubeInfo=function(e){this._oCubeInfo=e;var t="cube_";c.default.Instance.InkSwitch&&this._oCubeInfo.cubeType<c.default.Instance.cubeNum&&c.default.Instance.Ink&&(t="cube_ink_"),this.spriteCube.spriteFrame=r.default.Instance.loadSpriteFrame(t+this._oCubeInfo.cubeType),c.default.Instance.InkSwitch||(this.spriteCubeFace.spriteFrame=r.default.Instance.loadSpriteFrame(t+this._oCubeInfo.cubeType+"_face_"+o.C.CubeFaceType.F_1),this.spriteCubeFaceAnim.spriteFrame=r.default.Instance.loadSpriteFrame(t+this._oCubeInfo.cubeType+"_face_"+o.C.CubeFaceType.F_1)),this._oCubeInfo.cubeType!=o.C.CubeType.T_1&&this._oCubeInfo.cubeType!=o.C.CubeType.T_9||this.startCubeSpriteSequenceFrame(),this._oCubeInfo.cubeType>=o.C.CubeType.T_2&&s.default.scaleBigAndSmall(this.node,1,0,!0)},t.prototype.addListener=function(){e.prototype.addListener.call(this),this.node.on(cc.Node.EventType.TOUCH_START,this.onClickNode,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.node.off(cc.Node.EventType.TOUCH_START,this.onClickNode,this)},t.prototype.setCheckedProp=function(e){this._checkedProp=e},t.prototype.getCheckedProp=function(){return this._checkedProp},t.prototype.setChecked=function(e){this._checked=e},t.prototype.getChecked=function(){return this._checked},t.prototype.setSize=function(e){this.node.setScale(1),this.node.setContentSize(e)},t.prototype.getPosition=function(){return this.node.getPosition()},t.prototype.setPosition=function(e){this.node.setPosition(e)},t.prototype.getCubeInfo=function(){return this._oCubeInfo},t.prototype.setCubeState=function(e){this._state=e},t.prototype.getCubeState=function(){return this._state},t.prototype.getLeft=function(e,t,n){void 0===n&&(n=!1);for(var s=new Array,i=e.x-1;i>=0;i--){var r=a.default.Instance.getCubeItem(i,e.y);if(i==this._oCubeInfo.cubeIndexPos.x||null==r||r.getCubeInfo().cubeType!=this._oCubeInfo.cubeType)return s;n?s.push(r):r.getCubeInfo().cubeType<o.C.CubeType.Length&&s.push(r)}return s},t.prototype.getRight=function(e,t,n){void 0===n&&(n=!1);for(var s=new Array,i=e.x+1;i<a.default.Instance.indexSize.height;i++){var r=a.default.Instance.getCubeItem(i,e.y);if(i==this._oCubeInfo.cubeIndexPos.x||null==r||r.getCubeInfo().cubeType!=this._oCubeInfo.cubeType)return s;n?s.push(r):r.getCubeInfo().cubeType<o.C.CubeType.Length&&s.push(r)}return s},t.prototype.getTop=function(e,t,n){void 0===n&&(n=!1);for(var s=new Array,i=e.y+1;i<a.default.Instance.indexSize.height;i++){var r=a.default.Instance.getCubeItem(e.x,i);if(i==this._oCubeInfo.cubeIndexPos.y||null==r||r.getCubeInfo().cubeType!=this._oCubeInfo.cubeType)return s;n?s.push(r):r.getCubeInfo().cubeType<o.C.CubeType.Length&&s.push(r)}return s},t.prototype.getBottom=function(e,t,n){void 0===n&&(n=!1);for(var s=new Array,i=e.y-1;i>=0;i--){var r=a.default.Instance.getCubeItem(e.x,i);if(i==this._oCubeInfo.cubeIndexPos.y||null==r||r.getCubeInfo().cubeType!=this._oCubeInfo.cubeType)return s;n?s.push(r):r.getCubeInfo().cubeType<o.C.CubeType.Length&&s.push(r)}return s},t.prototype.getRow=function(e,t,n){var o=this.getLeft(e,t),s=this.getRight(e,t);return o.length+s.length>1?a.default.Instance.arrayPlus(o,s,n):new Array},t.prototype.getCollumn=function(e,t,n){var o=this.getTop(e,t),s=this.getBottom(e,t);return o.length+s.length>1?a.default.Instance.arrayPlus(o,s,n):new Array},t.prototype.getArrayCount=function(){return a.default.Instance.arrayPlus(this.getRow(this._oCubeInfo.cubeIndexPos,this._oCubeInfo.cubeType,null),this.getCollumn(this._oCubeInfo.cubeIndexPos,this._oCubeInfo.cubeType,null),this).length},t.prototype.getArray=function(){return a.default.Instance.arrayPlus(this.getRow(this._oCubeInfo.cubeIndexPos,this._oCubeInfo.cubeType,null),this.getCollumn(this._oCubeInfo.cubeIndexPos,this._oCubeInfo.cubeType,null),this)},t.prototype.playBackTween=function(){var e=this.indexToPos(this._oCubeInfo.cubeIndexPos),t=this;this._state=o.C.CubeState.Tween,s.default.moveTo(this.node,a.default.Instance.swapTweenTime,e.x,e.y,0,function(){}),p.default.Instance.setScheduleOnce(function(){t._state=o.C.CubeState.Normal},a.default.Instance.swapTweenTime)},t.prototype.playSelectedTween=function(){if(this._oCubeInfo&&this._oCubeInfo.cubeType<o.C.CubeType.Length){this._oCubeInfo.cubeType<o.C.CubeType.Length&&c.default.Instance.Ink&&"cube_ink_",this.animSelect.play("cubeFace")}},t.prototype.showFace=function(e){e&&this._oCubeInfo.cubeType>=c.default.Instance.cubeNum||(this.spriteCubeFace.node.active=e,this.spriteCube.node.active=!e)},t.prototype.showWaterCube=function(){this.spriteWater.node.active=!0,this.spriteWater.node.opacity=0;var e=cc.fadeIn(.5);this.spriteWater.node.runAction(e),cc.log("---------------showWaterCube")},t.prototype.hideWaterCube=function(){this.spriteWater.node.opacity=255;var e=this,t=cc.fadeOut(.5),n=cc.callFunc(function(){e.spriteWater.node.active=!1}),o=cc.sequence(t,n);this.spriteWater.node.runAction(o)},t.prototype.stopSelectedTween=function(){this._oCubeInfo&&this._oCubeInfo.cubeType<o.C.CubeType.Length&&this.animSelect.play("cubeIdle")},t.prototype.indexToPos=function(e){var t=e.x*a.default.Instance.cubeSize.width-c.default.Instance.MaxLength/2+a.default.Instance.cubeSize.width/2,n=e.y*a.default.Instance.cubeSize.height-c.default.Instance.MaxLength/2+a.default.Instance.cubeSize.width/2;return new cc.Vec2(t,n)},t.prototype.destroyCube=function(){a.default.Instance.setCubeItem(this._oCubeInfo.cubeIndexPos.x,this._oCubeInfo.cubeIndexPos.y,null),a.default.Instance.setCubeNode(this._oCubeInfo.cubeIndexPos.x,this._oCubeInfo.cubeIndexPos.y,null),this.reset(),a.default.Instance.putCube(this.node)},t.prototype.reset=function(){s.default.stopAllActions(this.node),this._oCubeInfo.cubeType!=o.C.CubeType.T_1&&this._oCubeInfo.cubeType!=o.C.CubeType.T_9||this.stopCubeSpriteSequenceFrame(),this.spriteWater.node.opacity=255,this.spriteWater.node.active=!1,this.node.scale=1,this.setCheckedProp(!1)},t.prototype.updateSprite=function(){this._nCubeIndex++,this._nCubeIndex=this._nCubeIndex%c.default.Instance.cubeNum,this.spriteCube.spriteFrame=r.default.Instance.loadSpriteFrame("cube_"+this._nCubeIndex)},t.prototype.startCubeSpriteSequenceFrame=function(){var e=this;this._cbUpdateSprite=function(){e.updateSprite()},this.schedule(this._cbUpdateSprite,.1,cc.macro.REPEAT_FOREVER,.1)},t.prototype.stopCubeSpriteSequenceFrame=function(){this.unschedule(this._cbUpdateSprite)},t.prototype.playScaleBigAndSmallTween=function(){this._bPlayScaleBigAndSmallTween&&(this.unschedule(this.stopScaleBigAndSmallTween),this.stopScaleBigAndSmallTween()),this._actionPlayScaleBigAndSmallTween=s.default.scaleBigAndSmall(this.node,1,0,!0),this._bPlayScaleBigAndSmallTween=!0,this.schedule(this.stopScaleBigAndSmallTween,0,0,a.default.Instance.telescopeTime)},t.prototype.stopScaleBigAndSmallTween=function(){this._actionPlayScaleBigAndSmallTween&&this.node&&(s.default.stopAction(this.node,this._actionPlayScaleBigAndSmallTween),this._bPlayScaleBigAndSmallTween=!1,this.node.scale=1,this._actionPlayScaleBigAndSmallTween=null)},t.prototype.playSuggestionTween=function(){this._bPlaySuggestionTween&&this.stopSuggestionTween(),this._bPlaySuggestionTween=!0,this._efSuggestion=u.default.Instance.add(o.C.EffectName.Tips,this.node.getPosition())},t.prototype.stopSuggestionTween=function(){this._efSuggestion&&this.node&&(this._bPlaySuggestionTween=!1,this.node.scale=1,u.default.Instance.remove(this._efSuggestion))},t.prototype.onClickNode=function(){if(c.default.Instance.TouchSwitch)if(this.stopSuggestionTween(),this.setCheckedProp(!0),this._oCubeInfo.cubeType==o.C.CubeType.T_1)this.stopCubeSpriteSequenceFrame(),c.default.Instance.WaitForT1=!0,this.schedule(function(){l.default.Instance.send(o.C.MsgType.DestroySameColorCube,this._nCubeIndex,this._oCubeInfo.cubeIndexPos),c.default.Instance.WaitForT1=!1},0,0,.5);else if(this._oCubeInfo.cubeType==o.C.CubeType.T_2)l.default.Instance.send(o.C.MsgType.GetTelescope,this._oCubeInfo.cubeIndexPos);else if(this._oCubeInfo.cubeType==o.C.CubeType.T_3)l.default.Instance.send(o.C.MsgType.GetRedHeart,this._oCubeInfo.cubeIndexPos),cc.log("------------ \u4f7f\u7528\u7ea2\u5fc3"),d.default.Instance.qqPostGameData({postType:o.C.QQPostDataType.HpUp});else if(this._oCubeInfo.cubeType==o.C.CubeType.T_4){var e=this._oCubeInfo.cubeIndexPos;a.default.Instance.destroyOneCube(a.default.Instance.getCubeItem(e.x,e.y)),cc.log("------------ \u4f7f\u7528\u58a8\u6c41"),d.default.Instance.qqPostGameData({postType:o.C.QQPostDataType.Ink}),l.default.Instance.send(o.C.MsgType.PlayInkAnim)}else if(this._oCubeInfo.cubeType==o.C.CubeType.T_5){e=this._oCubeInfo.cubeIndexPos;a.default.Instance.destroyOneCube(a.default.Instance.getCubeItem(e.x,e.y)),cc.log("----------- \u4f7f\u7528\u98de\u789f"),d.default.Instance.qqPostGameData({postType:o.C.QQPostDataType.UFO}),l.default.Instance.send(o.C.MsgType.PlayUFOAnim)}else if(this._oCubeInfo.cubeType==o.C.CubeType.T_6)l.default.Instance.send(o.C.MsgType.UseLightningLine,this._oCubeInfo.cubeIndexPos);else if(this._oCubeInfo.cubeType==o.C.CubeType.T_7)l.default.Instance.send(o.C.MsgType.UseLightningRow,this._oCubeInfo.cubeIndexPos);else if(this._oCubeInfo.cubeType==o.C.CubeType.T_8)l.default.Instance.send(o.C.MsgType.UseBomb,this._oCubeInfo.cubeIndexPos);else if(this._oCubeInfo.cubeType==o.C.CubeType.T_9){var t=h.default.getRandomValueDif(0,4,1);l.default.Instance.send(o.C.MsgType.DestroySameColorCube,t,this._oCubeInfo.cubeIndexPos)}else this._oCubeInfo.cubeType==o.C.CubeType.T_10&&l.default.Instance.send(o.C.MsgType.UseStarCube,this._oCubeInfo.cubeIndexPos)},t.prototype.start=function(){},__decorate([C({type:cc.Sprite,displayName:"\u65b9\u5757\u56fe\u7247"})],t.prototype,"spriteCube",void 0),__decorate([C({type:cc.Sprite,displayName:"\u65b9\u5757\u8868\u60c5"})],t.prototype,"spriteCubeFace",void 0),__decorate([C({type:cc.Sprite,displayName:"\u65b9\u5757\u8868\u60c5\u52a8\u753b"})],t.prototype,"spriteCubeFaceAnim",void 0),__decorate([C({type:cc.Animation,displayName:"\u9009\u4e2d\u52a8\u753b"})],t.prototype,"animSelect",void 0),__decorate([C({type:cc.Sprite,displayName:"\u6c34"})],t.prototype,"spriteWater",void 0),t=__decorate([y],t)}(i.default);n.default=m,cc._RF.pop()},{"../Common/PetHero_CustomMgr":"PetHero_CustomMgr","../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr","../Tools/PetHero_FYBaseNode":"PetHero_FYBaseNode","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYScheduleCtl":"PetHero_FYScheduleCtl","../Tools/PetHero_FYTweenMgr":"PetHero_FYTweenMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility","./../Common/PetHero_C":"PetHero_C","./PetHero_CubeMgr":"PetHero_CubeMgr","./PetHero_EffectMgr":"PetHero_EffectMgr"}],PetHero_CubeMgr:[function(e,t,n){"use strict";cc._RF.push(t,"afbf0CjvnlEo6NzNIJesKUK","PetHero_CubeMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PetHero_CubeItem"),a=e("../Tools/PetHero_FYUtility"),s=e("../Common/PetHero_C"),i=e("../Tools/PetHero_FYTweenMgr"),r=e("./PetHero_AttackMgr"),l=e("../Tools/PetHero_FYMessenger"),c=e("../Common/PetHero_UserDataMgr"),u=e("../Tools/PetHero_FYResMgr"),d=e("./PetHero_EffectMgr"),p=e("../Tools/PetHero_FYScheduleCtl"),h=e("../Tools/PetHero_FYAudioCtl"),f=e("./PetHero_TextMgr"),y=e("./PetHero_CubeInfo"),C=e("./PetHero_RoleMgr"),m=cc._decorator,_=m.ccclass,g=(m.property,function(){function e(){this.redHeartRestoreBlood=80,this.inkTime=15,this.telescopeTime=5,this.indexSize=cc.Size.ZERO,this.cubeSize=cc.Size.ZERO,this.dropTweenTime=.1,this.swapTweenTime=.2,this._cubePool=null,this._arrayCubeItem=[[]],this._arrayCubeNode=[[]],this._nodeCubeCtl=null,this._nodeCube=null,this._nodeCrushTailPoint=null,this._nodeCrushTailContainer=null,this._tipsCubeItem1=null,this._tipsCubeItem2=null,this._bIsNoMove=!1,this._nSwapNum=0,this._nTotalDamage=0,this._bMoveCrush=!1,this._nLianji=0,this._bPlayWin=!1}var t;return t=e,e.prototype.reset=function(){for(var e in this._cubePool.clear(),this._arrayCubeItem=[],this._arrayCubeNode)if(this._arrayCubeNode[e])for(var t in this._arrayCubeNode[e])if(this._arrayCubeNode[e][t]){var n=cc.loader.getDependsRecursively(this._arrayCubeNode[e][t]);cc.loader.release(n),this._arrayCubeNode[e][t].destroy()}this._arrayCubeNode=[],this._nodeCubeCtl=null,this._nodeCube=null,this._nodeCrushTailPoint=null,this._nodeCrushTailContainer=null,this._tipsCubeItem1=null,this._tipsCubeItem2=null},e.prototype.clearData=function(){this.reset()},e.prototype.init=function(e,t,n,o,a){this._nodeCrushTailPoint=e,this._nodeCrushTailContainer=t,this._nodeCubeCtl=n,this._nodeCube=o,this.indexSize=a},e.prototype.preLoad=function(){if(this._cubePool=new cc.NodePool,console.log("===============\u521b\u5efa\u5bf9\u8c61\u6c60"),0==this._cubePool.size())for(var e=0;e<this.indexSize.width;e++)for(var t=0;t<this.indexSize.height;t++){var n=a.default.addChild(this._nodeCubeCtl,this._nodeCube),s=new y.default;s.cubeIndexPos=new cc.Vec2(e,t),s.cubeType=this.generateCubeType(),n.getComponent(o.default).setCubeInfo(s),this.putCube(n)}},e.prototype.generateCubeType=function(){if(a.default.getRangeRandom(1,100)<=0){var e=a.default.getRangeRandom(1,5);return e in c.default.Instance.lietCanUseProp?e+s.C.CubeType.Length+1:a.default.getRangeRandom(0,c.default.Instance.cubeNum-1)}return a.default.getRangeRandom(0,c.default.Instance.cubeNum-1)},e.prototype.putCube=function(e){this._cubePool.put(e)},e.prototype.getCube=function(){if(this._cubePool){var e=this._cubePool.get();return e.getComponent(o.default).reset(),e}},e.prototype.create=function(){cc.director.getWinSize();this.cubeSize=new cc.Size(c.default.Instance.MaxLength/this.indexSize.width,c.default.Instance.MaxLength/this.indexSize.height);for(var e=[this.indexSize.width*this.indexSize.height,0,Date.now()],n=0;n<this.indexSize.width;n++)for(var a=function(a){r._arrayCubeItem[n]||(r._arrayCubeItem[n]=[],r._arrayCubeNode[n]=[]);var l=r.getCube();l.parent=r._nodeCubeCtl;var u=l.getComponent(o.default);u.setSize(r.cubeSize);var d=new cc.Vec2(n*r.cubeSize.width-c.default.Instance.MaxLength/2+r.cubeSize.width/2,a*r.cubeSize.height+c.default.Instance.MaxLength/2+r.cubeSize.height/2+60);u.setPosition(d);var h=new y.default;h.cubeIndexPos=new cc.Vec2(n,a),h.cubeType=r.generateCubeType(),u.setCubeInfo(h),r._arrayCubeItem[n].push(u),r._arrayCubeNode[n].push(l),u.setCubeState(s.C.CubeState.Tween),i.default.moveBy(l,t.Instance.dropTweenTime/2*r.indexSize.height,0,-c.default.Instance.MaxLength-60,.5,function(){}),p.default.Instance.setScheduleOnce(function(){u.setCubeState(s.C.CubeState.Normal),t.Instance.ruleCheckerOneEx(u.node,e,function(){t.Instance.crushFinish()})},t.Instance.dropTweenTime/2*r.indexSize.height+.7)},r=this,l=0;l<this.indexSize.height;l++)a(l);this.isNoMove()&&this.reCreate(),c.default.Instance.PlayerInfos[0]&&c.default.Instance.PlayerInfos[0].battleTimes&&c.default.Instance.PlayerInfos[0].battleTimes<=3&&this.playSuggestionTween()},e.prototype.reCreate=function(){for(var e=0;e<this.indexSize.width;e++)for(var n=0;n<this.indexSize.height;n++)this._arrayCubeItem[e][n]&&this._arrayCubeItem[e][n].destroyCube();for(e=0;e<this.indexSize.width;e++)for(n=0;n<this.indexSize.height;n++)this._arrayCubeItem[e][n]=null,this._arrayCubeNode[e][n]=null;var a=[this.indexSize.width*this.indexSize.height,0,Date.now()];for(e=0;e<this.indexSize.width;e++){var r=function(n){l._arrayCubeItem[e]||(l._arrayCubeItem[e]=[],l._arrayCubeNode[e]=[]);var r=l.getCube();r.parent=l._nodeCubeCtl;var u=r.getComponent(o.default);u.setSize(l.cubeSize);var d=new cc.Vec2(e*l.cubeSize.width-c.default.Instance.MaxLength/2+l.cubeSize.width/2,n*l.cubeSize.height+c.default.Instance.MaxLength/2+l.cubeSize.height/2);u.setPosition(d);var h=new y.default;h.cubeIndexPos=new cc.Vec2(e,n),h.cubeType=l.generateCubeType(),u.setCubeInfo(h),l.setCubeItem(e,n,u),l.setCubeNode(e,n,r),u.setCubeState(s.C.CubeState.Tween),u.showFace(!1),i.default.moveBy(r,t.Instance.dropTweenTime/2*l.indexSize.height,0,-c.default.Instance.MaxLength,.5,function(){}),p.default.Instance.setScheduleOnce(function(){u.setCubeState(s.C.CubeState.Normal),t.Instance.ruleCheckerOneEx(u.node,a,function(){t.Instance.crushFinish()})},t.Instance.dropTweenTime/2*l.indexSize.height+.7)},l=this;for(n=0;n<this.indexSize.height;n++)r(n)}},e.prototype.createOneCube=function(e){var t=this.getCube();t.parent=this._nodeCubeCtl,t.active=!0;var n=t.getComponent(o.default);n.setSize(this.cubeSize),n.setPosition(new cc.Vec2(e.x*this.cubeSize.width-c.default.Instance.MaxLength/2+this.cubeSize.width/2,e.y*this.cubeSize.height-c.default.Instance.MaxLength/2+this.cubeSize.height/2));var a=new y.default;a.cubeIndexPos=e,a.cubeType=this.generateCubeType(),n.setCubeInfo(a),n.showFace(!1),this._arrayCubeItem[e.x][e.y]=n,this._arrayCubeNode[e.x][e.y]=t},e.prototype.playAllCubeDownTween=function(e){for(var n=0;n<this._arrayCubeItem.length;n++)for(var o=0;o<this._arrayCubeItem[n].length;o++){var a=this._arrayCubeItem[n][o];null!=a&&(a.showFace(!0),a.setCubeState(s.C.CubeState.Tween))}var r=function(n){for(var o=function(o){var a=l._arrayCubeItem[n][o];if(null==a)return"continue";var r=a.node;i.default.moveBy(r,t.Instance.dropTweenTime/2*l.indexSize.height,0,-c.default.Instance.MaxLength-60,.5,function(){}),p.default.Instance.setScheduleOnce(function(){a.setCubeState(s.C.CubeState.Normal),0==n&&0==o&&e&&e()},t.Instance.dropTweenTime/2*l.indexSize.height+c.default.Instance.CrushCheckDelay)},a=0;a<l._arrayCubeItem[n].length;a++)o(a)},l=this;for(n=0;n<this._arrayCubeItem.length;n++)r(n)},e.prototype.checkAnyCubeIsTween=function(){for(var e in this._arrayCubeItem)for(var t in this._arrayCubeItem[e]){var n=this._arrayCubeItem[e][t];if(n&&n.getCubeState()==s.C.CubeState.Tween)return!0}return!1},e.prototype.getCubeItem=function(e,t){return this._arrayCubeItem[e]?this._arrayCubeItem[e][t]:null},e.prototype.setCubeItem=function(e,t,n){this._arrayCubeItem[e]&&(this._arrayCubeItem[e][t]=n)},e.prototype.getCubeNode=function(e,t){return this._arrayCubeNode[e]?this._arrayCubeNode[e][t]:null},e.prototype.setCubeNode=function(e,t,n){this._arrayCubeNode[e]&&(this._arrayCubeNode[e][t]=n)},e.prototype.arrayPlus=function(e,t,n){var o=new Array;n&&o.push(n);for(var a=0;a<e.length;a++)o.push(e[a]);for(a=0;a<t.length;a++)o.push(t[a]);return o},e.prototype.swapCubePos=function(e,n){var a=e.getComponent(o.default),s=n.getComponent(o.default),i=(a.getCubeInfo().cubeIndexPos,s.getCubeInfo().cubeIndexPos,a.getCubeInfo().cubeIndexPos);a.getCubeInfo().cubeIndexPos=s.getCubeInfo().cubeIndexPos,s.getCubeInfo().cubeIndexPos=i;var r=a.getCubeInfo().cubeIndexPos,l=s.getCubeInfo().cubeIndexPos,c=e;t.Instance.setCubeNode(l.x,l.y,n),t.Instance.setCubeNode(r.x,r.y,c);var u=a;t.Instance.setCubeItem(l.x,l.y,s),t.Instance.setCubeItem(r.x,r.y,u)},e.prototype.distanceChecker=function(e,t){var n=e.getCubeInfo().cubeIndexPos,o=t.getCubeInfo().cubeIndexPos;return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))<=1},e.prototype.ruleChecker=function(e,n,a){void 0===a&&(a=null);var s=e.getComponent(o.default),i=n.getComponent(o.default),r=t.Instance.arrayPlus(s.getCollumn(i.getCubeInfo().cubeIndexPos,s.getCubeInfo().cubeType,null),s.getRow(i.getCubeInfo().cubeIndexPos,s.getCubeInfo().cubeType,null),s),l=t.Instance.arrayPlus(i.getCollumn(s.getCubeInfo().cubeIndexPos,i.getCubeInfo().cubeType,null),i.getRow(s.getCubeInfo().cubeIndexPos,i.getCubeInfo().cubeType,null),i);r.length>=3||l.length>=3?(t.Instance.swapCubePos(e,n),this.cubeProcess(r,l,e,n,a)):(s.playBackTween(),i.playBackTween())},e.prototype.ruleCheckerOneEx=function(e,t,n){void 0===n&&(n=null);var a=e.getComponent(o.default),s=a.getArray();if(s.length>=3){this.arrayProcess(s,function(){t[1]++,t[1]==t[0]&&n&&n()}),a.setChecked(!0)}else t[1]++,t[1]==t[0]&&n&&n()},e.prototype.arrayProcess=function(e,n){void 0===n&&(n=null);for(var o=0,a=0,s=0;s<e.length;s++){var i=0;a<(i=e[s].getChecked()?e.length:e[s].getArrayCount())&&(a=i,o=s)}t.Instance.cubeProcessOne(e[o].getArray(),e[o].node,n)},e.prototype.cubeProcess=function(e,t,n,a,s){void 0===s&&(s=null),this._bMoveCrush=!0;var i=e.length,r=t.length;i>2&&(0==this._nSwapNum&&i>=4&&f.default.Instance.playEvaluateAnimByCount(i),this.cubeArrayProcess(e,a,n,n.getComponent(o.default).getCubeInfo().cubeType,s)),r>2&&(0==this._nSwapNum&&r>=4&&f.default.Instance.playEvaluateAnimByCount(r),this.cubeArrayProcess(t,n,a,a.getComponent(o.default).getCubeInfo().cubeType,s))},e.prototype.cubeProcessOne=function(e,t,n){void 0===n&&(n=null),e.length>2?this.cubeArrayProcess(e,t,null,t.getComponent(o.default).getCubeInfo().cubeType,n):n&&n()},e.prototype.checkCubeType=function(e){if(e&&e.isValid){var t=e.getCubeInfo(),n=t.cubeType,o=t.cubeIndexPos,i=[];if(n==s.C.CubeType.T_8)for(var r=o.x-1;r<=o.x+1;r++)for(var l=o.y-1;l<=o.y+1;l++)this._arrayCubeItem[r]&&this._arrayCubeItem[r][l]&&i.push(this._arrayCubeItem[r][l]);else if(n==s.C.CubeType.T_10){for(r=-2;r<=2;r++)for(l=-2;l<=2;l++)if(Math.abs(r)+Math.abs(l)<=2){var c=t.cubeIndexPos.x+r,u=t.cubeIndexPos.y+l;this._arrayCubeItem[c]&&this._arrayCubeItem[c][u]&&i.push(this._arrayCubeItem[c][u])}}else if(n==s.C.CubeType.T_9)for(var d=a.default.getRangeRandom(0,3),p=0;p<this._arrayCubeItem.length;p++)for(var h=0;h<this._arrayCubeItem[p].length;h++)this._arrayCubeItem[p][h]&&this._arrayCubeItem[p][h].getCubeInfo().cubeType==d&&i.push(this._arrayCubeItem[p][h]);else if(n==s.C.CubeType.T_7){for(p=0;p<this.indexSize.height;p++)if(this._arrayCubeItem[t.cubeIndexPos.x]&&this._arrayCubeItem[t.cubeIndexPos.x][p]){var f=this._arrayCubeItem[t.cubeIndexPos.x][p];i.push(f)}}else if(n==s.C.CubeType.T_6){for(p=0;p<this.indexSize.width;p++)if(this._arrayCubeItem[p]&&this._arrayCubeItem[p][t.cubeIndexPos.y]){f=this._arrayCubeItem[p][t.cubeIndexPos.y];i.push(f)}}else if(n==s.C.CubeType.T_1)for(d=e._nCubeIndex,p=0;p<this._arrayCubeItem.length;p++)for(h=0;h<this._arrayCubeItem[p].length;h++)this._arrayCubeItem[p][h]&&this._arrayCubeItem[p][h].getCubeInfo().cubeType==d&&i.push(this._arrayCubeItem[p][h]);return i}},e.prototype.achievePropCube=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);for(var n=0;n<e.length;n++){for(var o=e[n],a=!1,s=0;s<t.length;s++)if(o==t[s]){a=!0;break}if(!a){var i=this.checkCubeType(o);e=e.concat(i),t.push(o)}}return e},e.prototype.destroyNinePlaceCube=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),e&&e.isValid){for(var o=e.getCubeInfo().cubeIndexPos,a=[],s=o.x-1;s<=o.x+1;s++)for(var i=o.y-1;i<=o.y+1;i++)this._arrayCubeItem[s]&&this._arrayCubeItem[s][i]&&a.push(this._arrayCubeItem[s][i]);a=this.achievePropCube(a,[e]),this.cubeArrayProcess(a,null,null,null,t,n)}},e.prototype.destroyStarCube=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),e&&e.isValid){for(var o=e.getCubeInfo(),a=[],s=-2;s<=2;s++)for(var i=-2;i<=2;i++)if(Math.abs(s)+Math.abs(i)<=2){var r=o.cubeIndexPos.x+s,l=o.cubeIndexPos.y+i;this._arrayCubeItem[r]&&this._arrayCubeItem[r][l]&&a.push(this._arrayCubeItem[r][l])}a=this.achievePropCube(a,[e]),this.cubeArrayProcess(a,null,null,null,t,n)}},e.prototype.destroyOneRowCube=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),e&&e.isValid){for(var o=e.getCubeInfo(),a=[],s=0;s<this.indexSize.height;s++)if(this._arrayCubeItem[o.cubeIndexPos.x]&&this._arrayCubeItem[o.cubeIndexPos.x][s]){var i=this._arrayCubeItem[o.cubeIndexPos.x][s];a.push(i)}a=this.achievePropCube(a,[e]),this.cubeArrayProcess(a,null,null,null,t,n)}},e.prototype.destroyOneLineCube=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),e&&e.isValid){for(var o=e.getCubeInfo(),a=[],s=0;s<this.indexSize.width;s++)if(this._arrayCubeItem[s]&&this._arrayCubeItem[s][o.cubeIndexPos.y]){var i=this._arrayCubeItem[s][o.cubeIndexPos.y];a.push(i)}a=this.achievePropCube(a,[e]),this.cubeArrayProcess(a,null,null,null,t,n)}},e.prototype.destroySameColorCube=function(e,t,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!0),t&&t.isValid){for(var a=[],s=0;s<this._arrayCubeItem.length;s++)for(var i=0;i<this._arrayCubeItem[s].length;i++)this._arrayCubeItem[s][i]&&this._arrayCubeItem[s][i].getCubeInfo().cubeType==e&&a.push(this._arrayCubeItem[s][i]);a=this.achievePropCube(a,[t]),this.cubeArrayProcess(a,null,null,e,n,o),this.destroyOneCube(t)}},e.prototype.destroyOneCube=function(e,n){void 0===n&&(n=null),null==n&&(n=function(){t.Instance.crushFinish()}),e&&e.isValid&&this.cubeArrayProcess([e],null,null,e.getCubeInfo().cubeType,n)},e.prototype.checkArrayItemProp=function(e){for(var t=[],n={},o=0;o<e.length;o++){n[(a=e[o].getCubeInfo()).cubeIndexPos.x+","+a.cubeIndexPos.y]=1}for(o=0;o<e.length;o++){for(var a,i=0,r=0,l=0,c=0,u=(a=e[o].getCubeInfo()).cubeIndexPos.x-1;u>=0;u--)n[u+","+a.cubeIndexPos.y]&&(i+=1);for(u=a.cubeIndexPos.x+1;u<this.indexSize.width;u++)n[u+","+a.cubeIndexPos.y]&&(r+=1);for(var d=a.cubeIndexPos.y-1;d>=0;d--)n[a.cubeIndexPos.x+","+d]&&(c+=1);for(d=a.cubeIndexPos.y+1;d<this.indexSize.height;d++)n[a.cubeIndexPos.x+","+d]&&(l+=1);if((i*r*c!=0||i*r*l!=0||r*c*l!=0||i*c*l!=0)&&(i+r>2||i+c>2||i+l>2||r+c>2||r+l>2)){t.push([s.C.CubeType.T_10,a.cubeIndexPos]);break}i*c==0&&i*l==0&&r*c==0&&r*l==0||(i+c>2||i+l>2||r+c>2||r+l>2)&&t.push([s.C.CubeType.T_8,a.cubeIndexPos]),(i+r>=4||c+l>=4)&&t.push([s.C.CubeType.T_1,a.cubeIndexPos]),i+r>=3&&t.push([s.C.CubeType.T_6,a.cubeIndexPos]),c+l>=3&&t.push([s.C.CubeType.T_7,a.cubeIndexPos])}return t},e.prototype.creatPropCube=function(e){for(var n=t.Instance.checkArrayItemProp(e),o=[],a=0;a<n.length;a++)0==o.length&&o.push(n[a]),n[a][0]>o[0]&&(o=n[a]);if(0!=o.length){t.Instance.createOneCube(o[0][1]);var s=t.Instance.getCubeItem(o[0][1].x,o[0][1].y);s.getCubeInfo().cubeType=o[0][0],s.setCubeInfo(s.getCubeInfo())}},e.prototype.cubeArrayProcess=function(e,n,o,a,l,u){void 0===l&&(l=null),void 0===u&&(u=!1),this.stopSuggestionTween();for(var y=[],m=e.length-1;m>=0;m--){e[m];for(var _=0;_<y.length;_++)if(e[m]==y[_]){e.splice(m,1);break}y.push(e[m])}var g=!1,I=!1,T=null;for(_=0;_<e.length;_++)if(e[_]){T=e[_];break}if(T){if(u){T.getCubeInfo().cubeType>=s.C.CubeType.Length&&(I=!0),this._nLianji++;var b=e.length;if(this._nTotalDamage+=b,c.default.Instance.GameMode==s.C.GameMode.OneRoundInstantMode){var S=s.C.EvaluateType.Nice;2==this._nLianji?S=s.C.EvaluateType.Nice:3==this._nLianji?S=s.C.EvaluateType.Cool:4==this._nLianji?S=s.C.EvaluateType.Perfect:this._nLianji>4&&(S=s.C.EvaluateType.Wonderful),this._nLianji>1&&(f.default.Instance.playEvaluateAnim(S),this._bPlayWin||(this._bPlayWin=!0,C.default.Instance.play(s.C.RoleType.Me,s.C.RoleAnimType.Win)));var P=(b-(F=b%e.length))/e.length;for(m=0;m<e.length;m++){var M=0==m?P+F:P;f.default.Instance.playGetScore(M,e[m].getPosition())}}}else if(T.getCubeInfo().cubeType<s.C.CubeType.Length){this._nLianji++;b=r.default.Instance.calcDamage(e.length)+r.default.Instance.calcComboDamage(this._nLianji);if(c.default.Instance.DoubleAttackSwitch&&T.getCubeInfo().cubeType==c.default.Instance.DoubleAttackCubeType&&(g=!0),this._nTotalDamage+=b,c.default.Instance.GameMode==s.C.GameMode.OneRoundInstantMode){var v=s.C.EvaluateType.Nice;2==this._nLianji?v=s.C.EvaluateType.Nice:3==this._nLianji?v=s.C.EvaluateType.Cool:4==this._nLianji?v=s.C.EvaluateType.Perfect:this._nLianji>4&&(v=s.C.EvaluateType.Wonderful),this._nLianji>1&&(f.default.Instance.playEvaluateAnim(v),this._bPlayWin||(this._bPlayWin=!0,C.default.Instance.play(s.C.RoleType.Me,s.C.RoleAnimType.Win)));var F;for(P=(b-(F=b%e.length))/e.length,m=0;m<e.length;m++){M=0==m?P+F:P;f.default.Instance.playGetScore(M,e[m].getPosition())}}}else I=!0;for(_=0;_<e.length;_++){var R=e[_];R&&(i.default.stopAllActions(R.node),this._tipsCubeItem1&&this._tipsCubeItem1.getCubeInfo().cubeIndexPos==R.getCubeInfo().cubeIndexPos&&(this._tipsCubeItem1=null),this._tipsCubeItem2&&this._tipsCubeItem2.getCubeInfo().cubeIndexPos==R.getCubeInfo().cubeIndexPos&&(this._tipsCubeItem2=null),I||this.playCrushTailEffect(R.node.convertToWorldSpaceAR(new cc.Vec2(-cc.winSize.width/2,-cc.winSize.height/2))),g?d.default.Instance.playEffect(s.C.EffectName.fxClean03,R.node.position,1):this._bMoveCrush||I?d.default.Instance.playEffect(s.C.EffectName.fxClean,R.node.position,1):d.default.Instance.playEffect(s.C.EffectName.fxClean02,R.node.position,1),R.destroyCube())}e.length>0&&h.default.Instance.playSound(s.C.SoundType.Crush),this._bMoveCrush&&(this._bMoveCrush=!1),u||this.creatPropCube(e),c.default.Instance.WaitForEffect=!0;var A=[2,0,Date.now()];p.default.Instance.setScheduleOnce(function(){t.Instance.drop(A,l),t.Instance.spawn(A,l),c.default.Instance.WaitForEffect=!1},c.default.Instance.DropWaitTime)}else l&&l()},e.prototype.drop=function(e,n){void 0===e&&(e=[0,0]),void 0===n&&(n=null);for(var o=[],a=[this.indexSize.width*this.indexSize.height,0,Date.now()],r=function(){e[0]>0&&e[1]++,e[1]==e[0]&&n&&n()},l=0;l<this.indexSize.width;l++)for(var u=function(e){if(null!=t.Instance.getCubeItem(e,l)){for(var n=t.Instance.getCubeItem(e,l),u=n.getCubeInfo().cubeIndexPos.y,d=n.getCubeInfo().cubeIndexPos.x,h=n.getCubeInfo().cubeIndexPos.y,f=u-1;f>=0&&null==t.Instance.getCubeNode(d,f);f--)u=f;if(h!=u){o.push(n),t.Instance.setCubeItem(d,h,null),t.Instance.setCubeNode(d,h,null),n.getCubeInfo().cubeIndexPos=new cc.Vec2(d,u),t.Instance.setCubeItem(d,u,n),t.Instance.setCubeNode(d,u,n.node),n.setCubeState(s.C.CubeState.Tween);var y=n,C=n.indexToPos(new cc.Vec2(d,u));n.getCubeInfo().cubeType<=s.C.CubeType.T_0&&i.default.stopAllActions(n.node),n.node.setPosition(n.indexToPos(new cc.Vec2(d,h))),i.default.moveTo(n.node,(h-u)*t.Instance.dropTweenTime,C.x,C.y,0,function(){n.node.position.y!=C.y&&n.node.setPosition(C),c.default.Instance.GameMode==s.C.GameMode.OneRoundInstantMode&&(y.animSelect.play("cubeIdle"),y.animSelect.play("cubeDrop"),p.default.Instance.setScheduleOnce(function(){y.animSelect.play("cubeIdle")},.43))}),p.default.Instance.setScheduleOnce(function(){y.setCubeState(s.C.CubeState.Normal),t.Instance.ruleCheckerOneEx(y.node,a,r)},(h-u)*t.Instance.dropTweenTime+c.default.Instance.CrushCheckDelay)}else a[1]++,a[1]==a[0]&&r&&r()}else a[1]++,a[1]==a[0]&&r&&r()},d=0;d<this.indexSize.height;d++)u(d)},e.prototype.spawn=function(e,n){void 0===e&&(e=[0,0]),void 0===n&&(n=null),this._nSwapNum++;for(var a=[],r=0;r<this.indexSize.width;r++)a[r]=0;var l=[[]],u=[[]];for(r=0;r<this.indexSize.width;r++)for(var d=0;d<this.indexSize.height;d++)if(null==t.Instance.getCubeNode(r,d)){t.Instance.createOneCube(new cc.Vec2(r,d));var h=t.Instance.getCubeNode(r,d),f=h.y,y=h.x;h.setPosition(h.x,c.default.Instance.MaxLength/2+t.Instance.cubeSize.height/2+a[r]*t.Instance.cubeSize.height),l[r]||(l[r]=[]),l[r].push(h),u[r]||(u[r]=[]),u[r].push(new cc.Vec2(y,f)),a[r]++}var C=[0,0,Date.now()],m=function(){e[0]>0&&e[1]++,e[1]==e[0]&&n&&n()};for(r=0;r<this.indexSize.width;r++){var _=function(e){C[0]++;var n=l[r][e].getComponent(o.default);n.setCubeState(s.C.CubeState.Tween);var d=g;i.default.moveTo(l[r][e],a[r]*g.dropTweenTime,u[r][e].x,u[r][e].y,0,function(){c.default.Instance.GameMode==s.C.GameMode.OneRoundInstantMode&&(n.animSelect.play("cubeIdle"),n.animSelect.play("cubeDrop"),p.default.Instance.setScheduleOnce(function(){n.animSelect.play("cubeIdle")},.43))}),p.default.Instance.setScheduleOnce(function(){n.setCubeState(s.C.CubeState.Normal),t.Instance.ruleCheckerOneEx(n.node,C,m),d.isNoMove()&&d.reCreate()},a[r]*g.dropTweenTime+c.default.Instance.CrushCheckDelay)},g=this;for(d=0;l[r]&&d<l[r].length;d++)_(d)}0==C[0]&&m()},e.prototype.crushFinish=function(){this._nSwapNum,l.default.Instance.send(s.C.MsgType.AttackEnemy,this._nTotalDamage),this._nLianji=0,this._nSwapNum=0,this._nTotalDamage=0,this._bPlayWin&&(C.default.Instance.play(s.C.RoleType.Me,s.C.RoleAnimType.Idle),this._bPlayWin=!1),this.stopSuggestionTween()},e.prototype.isNoMove=function(){this.stopSuggestionTween();for(var e=0;e<this.indexSize.width;e++)for(var t=0;t<this.indexSize.height;t++)if(null!=this._arrayCubeItem[e][t]){var n=this._arrayCubeItem[e][t];if(n.getCubeInfo().cubeType>s.C.CubeType.Length)return this._bIsNoMove=!1,!1;var o=this.moveChecker(e,t,n);if(null!=o)return this._tipsCubeItem1=n,this._tipsCubeItem2=o,this._bIsNoMove=!1,!1}return this._bIsNoMove=!0,!0},e.prototype.moveChecker=function(e,t,n){for(var o=this.getArrayIndexPos(e,t),a=0;a<o.length;a++){var s=o[a];if(this.arrayPlus(n.getCollumn(s,n.getCubeInfo().cubeType,null),n.getRow(s,n.getCubeInfo().cubeType,null),n).length>=3)return this._arrayCubeItem[s.x][s.y]}return null},e.prototype.getArrayIndexPos=function(e,t){var n=[];return t+1<this.indexSize.height&&null!=this._arrayCubeNode[e][t+1]&&n.push(new cc.Vec2(e,t+1)),t-1>=0&&null!=this._arrayCubeNode[e][t-1]&&n.push(new cc.Vec2(e,t-1)),e+1<this.indexSize.width&&null!=this._arrayCubeNode[e+1][t]&&n.push(new cc.Vec2(e+1,t)),e-1>=0&&null!=this._arrayCubeNode[e-1][t]&&n.push(new cc.Vec2(e-1,t)),n},e.prototype.randomCubeAddWater=function(){for(var e=a.default.getRandomValueDif(0,63,21),t=0;t<e.length;t++){var n=e[t],o=Math.floor(n%c.default.Instance.col),s=Math.floor(n/c.default.Instance.col);this._arrayCubeItem[s][o]&&this._arrayCubeItem[s][o].showWaterCube()}},e.prototype.changeAllCubeToInkColor=function(){for(var e=0;e<this._arrayCubeItem.length;e++)for(var t=0;t<this._arrayCubeItem[e].length;t++)this._arrayCubeItem[e][t]&&(c.default.Instance.InkSwitch?this._arrayCubeItem[e][t].spriteCube.spriteFrame=u.default.Instance.loadSpriteFrame("cube_ink_"+this._arrayCubeItem[e][t].getCubeInfo().cubeType):this._arrayCubeItem[e][t].showWaterCube())},e.prototype.changeAllCubeToTypeColor=function(){for(var e=0;e<this._arrayCubeItem.length;e++)for(var t=0;t<this._arrayCubeItem[e].length;t++)this._arrayCubeItem[e][t]&&(c.default.Instance.InkSwitch?this._arrayCubeItem[e][t].spriteCube.spriteFrame=u.default.Instance.loadSpriteFrame("cube_"+this._arrayCubeItem[e][t].getCubeInfo().cubeType):this._arrayCubeItem[e][t].hideWaterCube())},e.prototype.getAllCanProcessCube=function(){for(var e=[],t={},n=0;n<this._arrayCubeItem.length;n++)for(var o=0;o<this._arrayCubeItem[n].length;o++){var a=this._arrayCubeItem[n][o];if(null!=a)for(var s=this.getArrayIndexPos(a.getCubeInfo().cubeIndexPos.x,a.getCubeInfo().cubeIndexPos.y),i=0;i<s.length;i++){var r=s[i],l=this.arrayPlus(a.getCollumn(r,a.getCubeInfo().cubeType,null),a.getRow(r,a.getCubeInfo().cubeType,null),a);if(l.length>=3)for(var c=0;c<l.length;c++){var u=l[c].getCubeInfo().cubeIndexPos.x.toString()+l[c].getCubeInfo().cubeIndexPos.y.toString();t[u]||(t[u]=l[c],e.push(l[c]))}}}return e},e.prototype.changeToUFO=function(e,n){if(this._arrayCubeItem[e][n]){var o=this._arrayCubeItem[e][n].getCubeInfo();o.cubeType==s.C.CubeType.T_1&&this._arrayCubeItem[e][n].stopCubeSpriteSequenceFrame(),o.cubeType=s.C.CubeType.T_0,this._arrayCubeItem[e][n].setCubeInfo(o),t.Instance.ruleCheckerOneEx(this._arrayCubeItem[e][n].node,[0,0,0])}},e.prototype.playSuggestionTween=function(){if(this._tipsCubeItem1&&this._tipsCubeItem2){var e=this._tipsCubeItem1.getComponent(o.default),t=this._tipsCubeItem2.getComponent(o.default);e.playSuggestionTween(),t.playSuggestionTween(),c.default.Instance.NodeFinger.active=!0;var n=e.node.getPosition();n.x+=e.node.width/2,n.y-=e.node.height/2,c.default.Instance.NodeFinger.setPosition(n);var a=cc.callFunc(function(){c.default.Instance.NodeFinger.setPosition(n),c.default.Instance.NodeFinger.opacity=0;var e=cc.fadeTo(.5,255);c.default.Instance.NodeFinger.runAction(e)}),s=cc.delayTime(.5),i=t.node.getPosition();i.x+=t.node.width/2,i.y-=t.node.height/2;var r=cc.moveTo(.5,i.x,i.y),l=cc.callFunc(function(){c.default.Instance.NodeFinger.opacity=255;var e=cc.fadeTo(.5,0);c.default.Instance.NodeFinger.runAction(e)}),u=cc.sequence(a,s,r,l,s);u.repeatForever(),c.default.Instance.NodeFinger.runAction(u)}},e.prototype.stopSuggestionTween=function(){if(this._tipsCubeItem1&&this._tipsCubeItem2){var e=this._tipsCubeItem1.getComponent(o.default),t=this._tipsCubeItem2.getComponent(o.default);e.stopSuggestionTween(),t.stopSuggestionTween(),i.default.stopAllActions(c.default.Instance.NodeFinger),c.default.Instance.NodeFinger.active=!1}},e.prototype.clearSuggestion=function(){if(this._tipsCubeItem1&&this._tipsCubeItem2){var e=this._tipsCubeItem1.getComponent(o.default),t=this._tipsCubeItem2.getComponent(o.default);e.stopSuggestionTween(),t.stopSuggestionTween(),this._tipsCubeItem1=null,this._tipsCubeItem2=null}},e.prototype.playCrushTailEffect=function(e){var t=this._nodeCrushTailPoint.position,n=(cc.Vec2.UP.signAngle(new cc.Vec2(t.x-e.x,t.y-e.y)),Math.PI,Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))/700),o=d.default.Instance.playEffect(s.C.EffectName.fxCubeTuoWei,e,n+.4,this._nodeCrushTailContainer),a=o.getChildByName("ef_crush_tail");a.active=!0;var i=cc.bezierTo(n,[new cc.Vec2(e.x+50,e.y+50),new cc.Vec2(e.x,e.y+100),t]),r=cc.callFunc(function(){a.getComponent(cc.ParticleSystem);a.active=!1}),l=cc.sequence(i,r);o.runAction(l)},e.Instance=new t,e=t=__decorate([_],e)}());n.default=g,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr","../Tools/PetHero_FYAudioCtl":"PetHero_FYAudioCtl","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYScheduleCtl":"PetHero_FYScheduleCtl","../Tools/PetHero_FYTweenMgr":"PetHero_FYTweenMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility","./PetHero_AttackMgr":"PetHero_AttackMgr","./PetHero_CubeInfo":"PetHero_CubeInfo","./PetHero_CubeItem":"PetHero_CubeItem","./PetHero_EffectMgr":"PetHero_EffectMgr","./PetHero_RoleMgr":"PetHero_RoleMgr","./PetHero_TextMgr":"PetHero_TextMgr"}],PetHero_C:[function(e,t,n){"use strict";cc._RF.push(t,"3b849ZCPBhHF7IJT9/e/uq7","PetHero_C"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){(function(e){e.Score="wxScore"})(e.wxKey||(e.wxKey={})),function(e){e.selectMode="PetHero_selectMode",e.soundState="PetHero_soundState",e.SoundNum="PetHero_SoundNum",e.MusicNum="PetHero_MusicNum",e.GameMode="PetHero_GameMode"}(e.DataKey||(e.DataKey={})),function(e){e.maxScoreByType="maxScoreByType"}(e.JsonDataKey||(e.JsonDataKey={})),function(e){e[e.Attack=0]="Attack",e[e.Crush=1]="Crush",e[e.Go=2]="Go",e[e.Ready=3]="Ready",e[e.Skill=4]="Skill",e[e.Telescope=5]="Telescope",e[e.UFO=6]="UFO",e[e.Water=7]="Water",e[e.BattleToCrush=8]="BattleToCrush",e[e.CrushToBattle=9]="CrushToBattle",e[e.CountDown=10]="CountDown",e[e.Fail=11]="Fail",e[e.Win=12]="Win",e[e.Length=13]="Length"}(e.SoundType||(e.SoundType={})),function(e){e[e.MainBg=0]="MainBg",e[e.BattleBg=1]="BattleBg",e[e.Length=2]="Length"}(e.MusicType||(e.MusicType={})),function(e){e[e.OneRoundInstantMode=0]="OneRoundInstantMode",e[e.ThreeRoundRoundMode=1]="ThreeRoundRoundMode",e[e.Length=2]="Length"}(e.GameMode||(e.GameMode={})),function(e){e[e.OneVsAI=0]="OneVsAI",e[e.OneVsOne=1]="OneVsOne",e[e.TwoVsTwo=2]="TwoVsTwo",e[e.OneVsOnlineAI=3]="OneVsOnlineAI",e[e.TwoVsOnlineAI=4]="TwoVsOnlineAI"}(e.FightMode||(e.FightMode={})),function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=6]="G",e[e.Length=7]="Length",e[e.T_0=8]="T_0",e[e.T_1=9]="T_1",e[e.T_2=10]="T_2",e[e.T_3=11]="T_3",e[e.T_4=12]="T_4",e[e.T_5=13]="T_5",e[e.T_6=14]="T_6",e[e.T_7=15]="T_7",e[e.T_8=16]="T_8",e[e.T_9=17]="T_9",e[e.T_10=18]="T_10"}(e.CubeType||(e.CubeType={})),function(e){e.Damage="Damage",e.Ink="Ink",e.UFO="UFO",e.HpUp="HpUp",e.Telescope="Telescope",e.isRobot="isRobot",e.isNotRobot="isNotRobot",e.Statistics="Statistics",e.RoleType="RoleType",e.SeatInfo="RoleType",e.SyncResult="SyncResult",e.syncBlood="syncBlood",e.ColorType="ColorType",e.CanStartGame="CanStartGame",e.SetStartTime="SetStartTime"}(e.QQPostDataType||(e.QQPostDataType={})),function(e){e.InitCube="InitCube",e.CanStartGame="CanStartGame",e.TransferQQGameData="TransferQQGameData",e.ResetGame="ResetGame",e.Restart="Restart",e.AttackEnemy="AttackEnemy",e.Attacked="Attacked",e.SetDoubleAttackCube="SetDoubleAttackCube",e.DestroySameColorCube="DestroySameColorCube",e.GetRedHeart="GetRedHeart",e.SetEnemyHp="SetEnemyHp",e.SetCubeInk="SetCubeInk",e.GetTelescope="GetTelescope",e.UseLightningLine="UseLightningLine",e.UseLightningRow="UseLightningRow",e.UseBomb="UseBomb",e.UseSameCube="UseSameCube",e.UseStarCube="UseStarCube",e.SetUFO="SetUFO",e.PlayUFOAnim="PlayUFOAnim",e.PlayTelescopeAnim="PlayWTelescopeAnim",e.PlayRedHeartAnim="PlayRedHeartAnim",e.PlayInkAnim="PlayInkAnim",e.SetPlayerInfo="SetPlayerInfo",e.QQGame_Voice="qqgame_voice",e.Statistics="Statistics",e.SyncMyHp="SyncMyHp",e.SyncEnemyHp="SyncEnemyHp",e.SyncMyDamage="SyncMyDamage",e.SyncEnemyDamage="SyncEnemyDamage",e.SyncHP="SyncHP",e.SyncDamage="SyncDamage",e.SyncRound="SyncRound",e.ColorType="ColorType",e.RefreshGameUI="RefreshGameUI",e.SyncResult="SyncResult",e.LeaveToResult="LeaveToResult",e.SkipFight="SkipFight",e.GameOver="GameOver"}(e.MsgType||(e.MsgType={})),function(e){e.UIMessageBoxPanel="UIMessageBoxPanel",e.UITipPanel="UITipPanel",e.UIRandomDoubleCubePanel="UIRandomDoubleCubePanel",e.UIGamePanel="UIGamePanel",e.UILoadingPanel="UILoadingPanel"}(e.UIName||(e.UIName={})),function(e){e.fxClean="fxClean",e.fxClean02="fxClean03",e.fxClean03="fxClean03",e.feidie="feidie",e.hongxin="hongxin",e.skill_fire="skill_fire",e.Tips="Tips",e.SkillOff="skilloff",e.fxCubeTuoWei="fxCubeTuoWei"}(e.EffectName||(e.EffectName={})),function(e){e.SFAttack="SFAttack02",e.SFInk="SFInk",e.SFAttacked="SFAttacked02",e.SFSkill="SFSkill",e.SFWater="SFWater",e.SFSkillIdle="SFSkillIdle",e.SFSkillOff="SFSkillOff",e.SFWaterCube="SFWaterCube"}(e.SequenceFrameName||(e.SequenceFrameName={})),function(e){e.AtlasCube="cube"}(e.ResType||(e.ResType={})),function(e){e.Cube="Cube",e.Role_1="Role_1",e.Finger="Finger",e.Cell="Cell",e.ReadyGo="ReadyGo",e.Comb="Comb",e.Evaluate="Evaluate",e.PiaoZi="Piaozi"}(e.OtherName||(e.OtherName={})),function(e){e[e.Tween=0]="Tween",e[e.Normal=1]="Normal"}(e.CubeState||(e.CubeState={})),function(e){e[e.Win=0]="Win",e[e.Lose=1]="Lose",e[e.DogFall=2]="DogFall",e[e.TimeOut=3]="TimeOut",e[e.Statistics=4]="Statistics",e[e.Fight=5]="Fight",e[e.Round=6]="Round",e[e.Start=7]="Start"}(e.TipType||(e.TipType={})),function(e){e[e.F_1=0]="F_1"}(e.CubeFaceType||(e.CubeFaceType={})),function(e){e.Idle="roleIdle",e.Attack="roleAttack",e.Hurt="roleHurt",e.Die="roledie",e.Hurt2Before="roleHurt2-1",e.Hurt2="roleHurt2-2",e.Hurt2After="roleHurt2-3",e.SkillBefore="roleSkill-1",e.Skill="roleSkill-2",e.SkillAfter="roleSkill-3",e.UseTelescope="roleTelescope",e.UseUFO="roleUFO",e.UseWater="roleWater",e.Idle2="roleIdle2",e.Win="roleWin",e.Attack2="roleAttack2"}(e.RoleAnimType||(e.RoleAnimType={})),function(e){e[e.Me=0]="Me",e[e.Friend=1]="Friend",e[e.Enemy1=2]="Enemy1",e[e.Enemy2=3]="Enemy2",e[e.Length=4]="Length"}(e.RoleType||(e.RoleType={})),function(e){e[e.Attack1=0]="Attack1",e[e.Attack2=1]="Attack2"}(e.AttackType||(e.AttackType={})),function(e){e.Play="play",e.Stop="stop",e.Pause="pause",e.Resume="resume",e.LastFrame="lastframe",e.Finished="finished"}(e.AnimationEventType||(e.AnimationEventType={})),function(e){e.Nice="text_nice",e.Cool="text_cool",e.Wonderful="text_wonderful",e.Perfect="text_perfect"}(e.EvaluateType||(e.EvaluateType={})),function(e){e.HeadBgBlue="HeadSelfBg",e.NameBgBlue="CountDownBgSelf",e.HeadBgRed="HeadEnemyBg",e.NameBgRed="CountDownBgEnemy",e.NameBgBlue2v2="2v2NameBgSelf",e.NameBgRed2v2="2v2NameBgEnemy",e.LinkBlue="2v2BindSelf",e.LinkRed="2v2BindEnemy",e.ScoreBlue="2v2scoreBlue",e.ScoreRed="2v2scoreRed"}(e.TextureName||(e.TextureName={})),function(e){e.Blue="Blue",e.Red="Red"}(e.ColorType||(e.ColorType={}))}(n.C||(n.C={})),cc._RF.pop()},{}],PetHero_CustomMgr:[function(e,t,n){"use strict";cc._RF.push(t,"19a4cJUfVFMrprJCVyy4ku/","PetHero_CustomMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYSDKMgr"),a=e("./PetHero_UserDataMgr"),s=e("../Tools/PetHero_FYUIMgr"),i=e("./PetHero_C"),r=cc._decorator,l=r.ccclass,c=(r.property,function(){function e(){}var t;return t=e,e.prototype.qqPostGameData=function(e){e.sendTime=Date.now(),e.remainTime=a.default.Instance.RemainTime,e.round=a.default.Instance.Round,e.senderSeat=a.default.Instance.Seat,o.default.Instance.AliPostGameData(e)},e.prototype.qqGameResult=function(e){s.default.Instance.close(i.C.UIName.UITipPanel),o.default.Instance.qqGameResult(e)},e.Instance=new t,e=t=__decorate([l],e)}());n.default=c,cc._RF.pop()},{"../Tools/PetHero_FYSDKMgr":"PetHero_FYSDKMgr","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr","./PetHero_C":"PetHero_C","./PetHero_UserDataMgr":"PetHero_UserDataMgr"}],PetHero_EffectMgr:[function(e,t,n){"use strict";cc._RF.push(t,"267d74cjMNCpo/JWHa8exGW","PetHero_EffectMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYResMgr"),a=e("../Tools/PetHero_FYEffectItem"),s=e("../Tools/PetHero_FYScheduleCtl"),i=e("../Common/PetHero_C"),r=cc._decorator,l=r.ccclass,c=(r.property,function(){function e(){this._effectContainer=null,this._dictEffectPool={}}var t;return t=e,e.prototype.init=function(e){this._effectContainer=e},e.prototype.reset=function(){for(var e in this._effectContainer=null,this._dictEffectPool)this._dictEffectPool[e]&&this._dictEffectPool[e].clear()},e.prototype.clearData=function(){this.reset()},e.prototype.preLoad=function(){for(var e=0;e<32;e++){var n=cc.instantiate(o.default.Instance.loadEffect(i.C.EffectName.fxCubeTuoWei)),a=cc.instantiate(o.default.Instance.loadEffect(i.C.EffectName.fxClean)),s=cc.instantiate(o.default.Instance.loadEffect(i.C.EffectName.fxClean03));n.parent=this._effectContainer,a.parent=this._effectContainer,s.parent=this._effectContainer,n.position=cc.Vec2.ZERO,a.position=cc.Vec2.ZERO,s.position=cc.Vec2.ZERO,n.active=!1,a.active=!1,s.active=!1,t.Instance.remove(n),t.Instance.remove(a),t.Instance.remove(s)}},e.prototype.playEffect=function(e,n,o,a){void 0===a&&(a=this._effectContainer);var i=this.add(e,n);if(i)return i.parent=a,s.default.Instance.setScheduleOnce(function(){t.Instance.remove(i)},o),i},e.prototype.add=function(e,t,n){void 0===n&&(n=this._effectContainer);var s=this.poolGet(e);if(null==s&&(s=cc.instantiate(o.default.Instance.loadEffect(e))),s)return s.active=!0,s.parent=n,s.setPosition(t),s.getComponent(a.default).play(),s},e.prototype.remove=function(e){this.poolPut(e)},e.prototype.poolPut=function(e){this._dictEffectPool.hasOwnProperty(e.name)?this._dictEffectPool[e.name].put(e):(this._dictEffectPool[e.name]=new cc.NodePool,this._dictEffectPool[e.name].put(e))},e.prototype.poolGet=function(e){return this._dictEffectPool.hasOwnProperty(e)&&this._dictEffectPool[e].size()>0?this._dictEffectPool[e].get():null},e.Instance=new t,e=t=__decorate([l],e)}());n.default=c,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Tools/PetHero_FYEffectItem":"PetHero_FYEffectItem","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYScheduleCtl":"PetHero_FYScheduleCtl"}],PetHero_FYAudioCtl:[function(e,t,n){"use strict";cc._RF.push(t,"1c11fMZ5+NGqJjKmWa5by6S","PetHero_FYAudioCtl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PetHero_FYUtility"),a=cc._decorator,s=a.ccclass,i=a.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arraySound=[],t.arrayMusic=[],t._bOpenSound=!0,t._bOpenMusic=!0,t._nPlayingMusic=-1,t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance},enumerable:!0,configurable:!0}),t.prototype.playSound=function(e){this.arraySound[e]&&this._bOpenSound&&(o.default.log("-----------playSound------",e),this.arraySound[e].setCurrentTime(0),this.arraySound[e].play())},t.prototype.playMusic=function(e){this._nPlayingMusic!=e&&(this.arrayMusic[this._nPlayingMusic]&&this.arrayMusic[this._nPlayingMusic].stop(),this.arrayMusic[e]&&this.arrayMusic[e].play(),this._nPlayingMusic=e)},t.prototype.rewindMusic=function(){this.arrayMusic[this._nPlayingMusic]&&this.arrayMusic[this._nPlayingMusic].resume()},t.prototype.pauseSound=function(e){this.arraySound[e]&&this.arraySound[e].pause()},t.prototype.pauseMusic=function(e){this.arrayMusic[e]&&this.arrayMusic[e].pause()},t.prototype.stopSound=function(e){this.arraySound[e]&&this.arraySound[e].stop()},t.prototype.stopMusic=function(e){this.arrayMusic[e]&&(this.arrayMusic[e].stop(),e==this._nPlayingMusic&&(this._nPlayingMusic=-1))},t.prototype.changeSoundVolume=function(e){for(var t=0;t<this.arraySound.length;t++)this.arraySound[t]&&(this.arraySound[t].volume=e)},t.prototype.changeMusicVolume=function(e){for(var t=0;t<this.arrayMusic.length;t++)this.arrayMusic[t]&&(this.arrayMusic[t].volume=e)},t.prototype.onLoad=function(){n._instance=this},t._instance=null,__decorate([i({type:Array(cc.AudioSource),displayName:"\u97f3\u6548\u6570\u7ec4"})],t.prototype,"arraySound",void 0),__decorate([i({type:Array(cc.AudioSource),displayName:"\u97f3\u4e50\u6570\u7ec4"})],t.prototype,"arrayMusic",void 0),t=n=__decorate([s],t)}(cc.Component);n.default=r,cc._RF.pop()},{"./PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_FYBaseNode:[function(e,t,n){"use strict";cc._RF.push(t,"3e5b1ALxXhAGJHLj6QrQX2M","PetHero_FYBaseNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,s=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addListener=function(){},t.prototype.removeListener=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener()},t=__decorate([a],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],PetHero_FYBaseUIPanel:[function(e,t,n){"use strict";cc._RF.push(t,"490dcBJXE5E16zU6g11Td3j","PetHero_FYBaseUIPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PetHero_FYBaseNode"),a=e("./PetHero_FYMessenger"),s=cc._decorator,i=s.ccclass,r=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeWidget=null,t}return __extends(t,e),t.prototype.setActive=function(e){this.nodeWidget&&(this.nodeWidget.active=e)},t.prototype.addListener=function(){e.prototype.addListener.call(this),a.default.Instance.add(this.node.name,this.onShow,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),a.default.Instance.remove(this.node.name,this.onShow,this)},t.prototype.onShow=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},__decorate([r({type:cc.Node,displayName:"Widget\u8282\u70b9"})],t.prototype,"nodeWidget",void 0),t=__decorate([i],t)}(o.default);n.default=l,cc._RF.pop()},{"./PetHero_FYBaseNode":"PetHero_FYBaseNode","./PetHero_FYMessenger":"PetHero_FYMessenger"}],PetHero_FYEffectControl:[function(e,t,n){"use strict";cc._RF.push(t,"7243cZGHglChod3JhCE9Gok","PetHero_FYEffectControl"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,s=o.property,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.partical=null,t}return __extends(t,e),t.prototype.playPartical=function(){this.partical.node.active=!0,this.partical.resetSystem()},t.prototype.stopPartical=function(){this.partical.node.active=!1,this.partical.stopSystem()},t.prototype.start=function(){},__decorate([s({type:cc.ParticleSystem})],t.prototype,"partical",void 0),t=__decorate([a],t)}(cc.Component);n.default=i,cc._RF.pop()},{}],PetHero_FYEffectItem:[function(e,t,n){"use strict";cc._RF.push(t,"0c656atI3BPwJrhEzYDcD7/","PetHero_FYEffectItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,s=o.property,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listAnimation=[],t.listParticleSystem=[],t}return __extends(t,e),t.prototype.play=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!0,this.listAnimation[e].play();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!0,this.listParticleSystem[e].resetSystem()},t.prototype.stop=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!1,this.listAnimation[e].stop();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!1,this.listParticleSystem[e].stopSystem()},t.prototype.start=function(){},__decorate([s({type:Array(cc.Animation),displayName:"\u52a8\u4f5c\u5217\u8868"})],t.prototype,"listAnimation",void 0),__decorate([s({type:Array(cc.ParticleSystem),displayName:"\u7279\u6548\u5217\u8868"})],t.prototype,"listParticleSystem",void 0),t=__decorate([a],t)}(cc.Component);n.default=i,cc._RF.pop()},{}],PetHero_FYGlobalVarMgr:[function(e,t,n){"use strict";cc._RF.push(t,"71d0eOTwslMTpy8XiWviIZx","PetHero_FYGlobalVarMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,s=(o.property,function(){function e(){this._nodeCanvas=null,this._nodeBottom=null,this._nodeCenter=null,this._nodeTop=null}var t;return t=e,e.prototype.clearData=function(){this._nodeBottom=null,this._nodeCanvas=null,this._nodeCenter=null,this._nodeTop=null},Object.defineProperty(e.prototype,"nodeCanvas",{get:function(){return this._nodeCanvas||(this._nodeCanvas=this._nodeCanvas=cc.director.getScene().getChildByName("Canvas")),this._nodeCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeBottom",{get:function(){return this._nodeBottom||(this._nodeBottom=this.nodeCanvas.getChildByName("Bottom")),this._nodeBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeCenter",{get:function(){return this._nodeCenter||(this._nodeCenter=this.nodeCanvas.getChildByName("Center")),this._nodeCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeTop",{get:function(){return this._nodeTop||(this._nodeTop=this.nodeCanvas.getChildByName("Top")),this._nodeTop},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=__decorate([a],e)}());n.default=s,cc._RF.pop()},{}],PetHero_FYMessenger:[function(e,t,n){"use strict";cc._RF.push(t,"61a7eOT0OZAXK4lApqz4hd1","PetHero_FYMessenger"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.listeners={}}return e.prototype.clearData=function(){this.listeners={}},e.prototype.add=function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(new a(t,n))},e.prototype.remove=function(e,t,n){var o=this.listeners[e];if(o){for(var a=o.length,s=0;s<a;s++){if(o[s].compar(n)){o.splice(s,1);break}}0==o.length&&delete this.listeners[e]}},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.listeners[e];if(o)for(var a=o.length,s=0;s<a;s++){var i=o[s];i.notify.apply(i,[e].concat(t))}},e.Instance=new e,e}();n.default=o;var a=function(){function e(e,t){this.callback=null,this.context=null;this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.callback).call.apply(e,[this.context].concat(t))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],PetHero_FYResMgr:[function(e,t,n){"use strict";cc._RF.push(t,"69c02vGOERDzbO8IDtkhlci","PetHero_FYResMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PetHero_FYMessenger"),a=cc._decorator,s=a.ccclass,i=(a.property,function(){function e(){this.dictAtlas={},this.dictEffect={},this.dictSequenceFrame={},this.dictOther={}}var t;return t=e,e.prototype.reset=function(){this.dictAtlas={},this.dictEffect={},this.dictOther={},this.dictSequenceFrame={},cc.loader.releaseResDir("PetHero/atlas"),cc.loader.releaseResDir("PetHero/prefabs/Effect"),cc.loader.releaseResDir("PetHero/prefabs/SequenceFrame"),cc.loader.releaseResDir("PetHero/prefabs/Other")},e.prototype.clearData=function(){this.reset()},e.prototype.preLoadAltlas=function(){var e=this;cc.loader.loadResDir("PetHero/atlas",cc.SpriteAtlas,function(e,n,a){o.default.Instance.send(t.MsgPreLoadAtlasProgress,e,n)},function(n,a){for(var s=0;s<a.length;s++)for(var i in a[s]._spriteFrames)e.dictAtlas[a[s]._spriteFrames[i]._name]=a[s]._spriteFrames[i];o.default.Instance.send(t.MsgPreLoadAtlasComplete)})},e.prototype.preLoadEffect=function(){var e=this;cc.loader.loadResDir("PetHero/prefabs/Effect",cc.Prefab,function(e,n,a){o.default.Instance.send(t.MsgPreLoadEffectProgress,e,n)},function(n,a){for(var s=0;s<a.length;s++)e.dictEffect[a[s]._name]=a[s].data;o.default.Instance.send(t.MsgPreLoadEffectComplete)})},e.prototype.preLoadSequenceFrame=function(){var e=this;cc.loader.loadResDir("PetHero/prefabs/SequenceFrame",cc.Prefab,function(e,n,a){o.default.Instance.send(t.MsgPreLoadSequenceFrameProgress,e,n)},function(n,a){for(var s=0;s<a.length;s++)e.dictSequenceFrame[a[s]._name]=a[s].data;o.default.Instance.send(t.MsgPreLoadSequenceFrameComplete)})},e.prototype.preLoadOther=function(){var e=this;cc.loader.loadResDir("PetHero/prefabs/Other",cc.Prefab,function(e,n,a){o.default.Instance.send(t.MsgPreLoadOtherProgress,e,n)},function(n,a){for(var s=0;s<a.length;s++)e.dictOther[a[s]._name]=a[s].data;o.default.Instance.send(t.MsgPreLoadOtherComplete)})},e.prototype.loadSpriteFrame=function(e){return e in this.dictAtlas?this.dictAtlas[e]:null},e.prototype.loadEffect=function(e){return e in this.dictEffect?this.dictEffect[e]:null},e.prototype.loadSequenceFrame=function(e){return e in this.dictSequenceFrame?this.dictSequenceFrame[e]:null},e.prototype.loadOther=function(e){if(e in this.dictOther)return this.dictOther[e]},e.Instance=new t,e.MsgPreLoadAtlasProgress="PreLoadAtlasProgress",e.MsgPreLoadEffectProgress="MsgPreLoadEffectProgress",e.MsgPreLoadSequenceFrameProgress="MsgPreLoadSequenceFrameProgress",e.MsgPreLoadOtherProgress="MsgPreLoadOtherProgress",e.MsgPreLoadTextureProgress="MsgPreLoadTextureProgress",e.MsgPreLoadAtlasComplete="PreLoadAtlasComplete",e.MsgPreLoadEffectComplete="PreLoadEffectComplete",e.MsgPreLoadSequenceFrameComplete="MsgPreLoadSequenceFrameComplete",e.MsgPreLoadOtherComplete="MsgPreLoadOtherComplete",e.MsgPreLoadTextureComplete="MsgPreLoadTextureComplete",e.MsgPreLoadComplete="PreLoadComplete",e=t=__decorate([s],e)}());n.default=i,cc._RF.pop()},{"./PetHero_FYMessenger":"PetHero_FYMessenger"}],PetHero_FYSDKMgr:[function(e,t,n){"use strict";cc._RF.push(t,"a4d77hfjeRLi69n5V71ufRy","PetHero_FYSDKMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Common/PetHero_UserDataMgr"),a=cc._decorator,s=a.ccclass,i=(a.property,function(){function e(){this.test={},this.test2={}}var t;return t=e,e.prototype.saveLocalData=function(e,t){cc.sys.localStorage.setItem(e,t)},e.prototype.loadLocalData=function(e,t){return void 0===t&&(t="0"),cc.sys.localStorage.getItem(e)||t},e.prototype.saveLocalJsonData=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.prototype.loadLocalJsonData=function(e){return JSON.parse(cc.sys.localStorage.getItem(e)||JSON.stringify({}))},e.prototype.removeLocalData=function(e){cc.sys.localStorage.removeItem(e)},e.prototype.removeAllLocalData=function(){cc.sys.localStorage.clear()},e.prototype.isAliGame=function(){return!1},e.prototype.AliGameInit=function(e){this.isAliGame()&&(CatcherSDK.init({url:"ws://47.107.149.93:12345/ws/game",gameVersion:"0.0.2",gameId:"172"}),CatcherSDK.instance().start())},e.prototype.AliPostGameData=function(e){this.isAliGame()&&(e.msgType=1,e.openIds=[o.default.Instance.PlayerInfos[1].openId],CatcherSDK.instance().sendData(e),console.log("===========AliPostGameData============",e))},e.prototype.qqGameReady=function(){this.isAliGame()},e.prototype.qqGameResult=function(e){if(this.isAliGame()){console.log("========qqGameResult=======",e),e.msgType=3;var t=0,n=0;"win"==e.params.war_result?(t=1,n=-1):"lose"==e.params.war_result?(t=-1,n=1):"draw"==e.params.war_result&&(t=0,n=0),e.groupResult=[{groupId:o.default.Instance.GroupId,result:t},{groupId:o.default.Instance.PlayerInfos[1].groupId,result:n}],e.srcId=o.default.Instance.GroupId,e.openIds=[o.default.Instance.PlayerInfos[1].openId],CatcherSDK.instance().sendData(e)}},e.prototype.qqGameResultType=function(e,t){if(void 0===t&&(t=1),1==t){if(1==e)return 1;if(0==e)return 0;if(-1==e)return-1;if(-2==e)return-1}else{if(1==e)return qqgame.RESULT_WIN;if(0==e)return qqgame.RESULT_DRAW;if(-1==e)return qqgame.RESULT_LOSE;if(-2==e)return qqgame.RESULT_LEAVE}},e.prototype.qqIsIOS=function(){if(this.isAliGame())return cc.sys.os==cc.sys.OS_IOS},e.prototype.qqIsAndroid=function(){if(this.isAliGame())return cc.sys.os==cc.sys.OS_ANDROID},e.prototype.qqGetLog=function(){if(this.isAliGame())return qqgame.getLogText()},e.prototype.qqGameIsRobot=function(){if(this.isAliGame())return!1},e.Instance=new t,e=t=__decorate([s],e)}());n.default=i,cc._RF.pop()},{"../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr"}],PetHero_FYScheduleCtl:[function(e,t,n){"use strict";cc._RF.push(t,"ad93830nspIwZhX4wuibyuF","PetHero_FYScheduleCtl"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,s=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance},enumerable:!0,configurable:!0}),t.prototype.setSchedule=function(e,t,n,o){this.schedule(e,t,n,o)},t.prototype.setScheduleOnce=function(e,t){this.scheduleOnce(e,t)},t.prototype.toUnschedule=function(e){this.unschedule(e)},t.prototype.onLoad=function(){n._instance=this},t._instance=null,t=n=__decorate([a],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],PetHero_FYSequenceFrameControl:[function(e,t,n){"use strict";cc._RF.push(t,"8b9a2RgcEFFtrfWmPqLXEPv","PetHero_FYSequenceFrameControl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PetHero_FYUtility"),a=cc._decorator,s=a.ccclass,i=a.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arraySprite=[],t.interval=.1,t.delay=.1,t.playCount=-1,t.isAutoDestroy=!1,t.isRandomStartIndex=!1,t._curIndex=0,t._curPlayCount=0,t._callback=null,t}return __extends(t,e),t.prototype.updateSprite=function(){if(this._curIndex++,this._curIndex>=this.arraySprite.length&&(this._curIndex=0,this.playCount>0&&(this._curPlayCount++,this._curPlayCount==this.playCount)))return this._callback&&this._callback(),this.stop(),void(this.isAutoDestroy&&(this.node.destroy(),this.destroy()));this._curIndex=this._curIndex%this.arraySprite.length;var e=(this._curIndex-1+this.arraySprite.length)%this.arraySprite.length;this.arraySprite[e].active=!1,this.arraySprite[this._curIndex%this.arraySprite.length].active=!0},t.prototype.stop=function(){this.unschedule(this.updateSprite)},t.prototype.getCurIndex=function(){return this._curIndex},t.prototype.setCurIndex=function(e){this._curIndex=e,this._curIndex=this._curIndex%this.arraySprite.length},t.prototype.start=function(){this.isRandomStartIndex&&(this.arraySprite[0].active=!1,this._curIndex=o.default.getRangeRandom(0,this.arraySprite.length-1)),this.schedule(this.updateSprite,this.interval,cc.macro.REPEAT_FOREVER,this.delay)},__decorate([i({type:Array(cc.Node),displayName:"\u56fe\u7247\u6570\u7ec4"})],t.prototype,"arraySprite",void 0),__decorate([i({type:cc.Float,displayName:"\u95f4\u9694\u65f6\u95f4"})],t.prototype,"interval",void 0),__decorate([i({type:cc.Float,displayName:"\u5ef6\u8fdf\u65f6\u95f4"})],t.prototype,"delay",void 0),__decorate([i({type:cc.Integer,displayName:"\u64ad\u653e\u6b21\u6570"})],t.prototype,"playCount",void 0),__decorate([i({type:Boolean,displayName:"\u662f\u5426\u81ea\u52a8\u5220\u9664"})],t.prototype,"isAutoDestroy",void 0),__decorate([i({type:Boolean,displayName:"\u662f\u5426\u968f\u673a\u5f00\u59cb\u7d22\u5f15"})],t.prototype,"isRandomStartIndex",void 0),t=__decorate([s],t)}(cc.Component);n.default=r,cc._RF.pop()},{"./PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_FYTweenMgr:[function(e,t,n){"use strict";cc._RF.push(t,"c5f894cQTtNrIw9965abunw","PetHero_FYTweenMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,s=(o.property,function(){function e(){}return e.moveTo=function(e,t,n,o,a,s){if(void 0===a&&(a=0),e instanceof cc.Node){var i=cc.moveTo(t,n,o),r=cc.callFunc(function(e){s&&s()},this,0),l=cc.sequence(cc.delayTime(a),i,r);return e.runAction(l),l}return null},e.moveBy=function(e,t,n,o,a,s){if(void 0===a&&(a=0),e instanceof cc.Node){var i=cc.moveBy(t,n,o),r=cc.callFunc(function(e){s&&s()},this,0),l=cc.sequence(cc.delayTime(a),i,r);return e.runAction(l),l}return null},e.rotateBy=function(e,t,n,o,a){if(void 0===o&&(o=0),e instanceof cc.Node){var s=cc.rotateBy(t,n),i=cc.callFunc(function(e){a&&a()},this,0),r=cc.sequence(cc.delayTime(o),s,i);return e.runAction(r),r}return null},e.scaleTo=function(e,t,n,o,a,s){if(void 0===a&&(a=0),e instanceof cc.Node){var i=cc.scaleTo(t,n,o),r=cc.callFunc(function(e){s&&s()},this,0),l=cc.sequence(cc.delayTime(a),i,r);return e.runAction(l),l}return null},e.scaleBigAndSmall=function(e,t,n,o,a){if(void 0===n&&(n=0),void 0===o&&(o=!1),e instanceof cc.Node){var s=cc.scaleTo(t/2,1.1,1.1),i=cc.scaleTo(t/2,.9,.9),r=cc.callFunc(function(e){a&&a()},this,0),l=cc.sequence(cc.delayTime(n),s,i,r);return o&&l.repeatForever(),e.runAction(l),l}return null},e.scaleBigAndNormal=function(e,t,n,o,a,s,i){if(void 0===a&&(a=0),void 0===s&&(s=!1),e instanceof cc.Node){var r=cc.scaleTo(t/2,n,o),l=cc.scaleTo(t/2,1,1),c=cc.callFunc(function(e){i&&i()},this,0),u=cc.sequence(cc.delayTime(a),r,l,c);return s&&u.repeatForever(),e.runAction(u),u}return null},e.waitBy=function(e,t,n){if(e instanceof cc.Node){var o=cc.fadeTo(t,e.opacity),a=cc.callFunc(function(e){n&&n()},this,0),s=cc.sequence(o,a);return e.runAction(s),s}return null},e.stopAllActions=function(e){e instanceof cc.Node&&e.stopAllActions()},e.stopAction=function(e,t){e instanceof cc.Node&&e.stopAction(t)},e=__decorate([a],e)}());n.default=s,cc._RF.pop()},{}],PetHero_FYUIMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2604aqnyTdJkYCkKucAU3P5","PetHero_FYUIMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PetHero_FYMessenger"),a=e("./PetHero_FYGlobalVarMgr"),s=e("./PetHero_FYUtility"),i=e("./PetHero_FYBaseNode"),r=cc._decorator,l=r.ccclass,c=(r.property,function(){function e(){this._dictUIPrefab={},this._dictUIPanel={}}var t;return t=e,e.prototype.reset=function(){for(var e in this._dictUIPanel)if(this._dictUIPanel[e]){var t=cc.loader.getDependsRecursively(this._dictUIPanel[e].node);cc.loader.release(t),this._dictUIPanel[e].node.destroy()}this._dictUIPanel={},this._dictUIPrefab={},cc.loader.releaseResDir("PetHero/prefabs/UI")},e.prototype.clearData=function(){this.reset()},e.prototype.preLoad=function(){var e=this;cc.loader.loadResDir("PetHero/prefabs/UI",cc.Prefab,function(e,n,a){o.default.Instance.send(t.MsgPreLoadUIProgress,e,n)},function(n,a){for(var s=0;s<a.length;s++)e._dictUIPrefab[a[s]._name]=a[s].data;o.default.Instance.send(t.MsgPreLoadUIComplete)})},e.prototype.show=function(e,t){void 0===t&&(t=a.default.Instance.nodeTop);for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t||(t=a.default.Instance.nodeTop),this._dictUIPrefab[e]?(this._dictUIPanel[e]?this._dictUIPanel[e].setActive(!0):this._dictUIPanel[e]=s.default.addChild(t,this._dictUIPrefab[e]).getComponent(i.default),o.default.Instance.send(e,n)):cc.error(e+" is not prelaod")},e.prototype.hide=function(e){this._dictUIPanel[e]&&this._dictUIPanel[e].setActive(!1)},e.prototype.close=function(e){this._dictUIPanel[e]&&(this._dictUIPanel[e].node.destroy(),delete this._dictUIPanel[e])},e.Instance=new t,e.MsgPreLoadUIProgress="PreLoadUIProgress",e.MsgPreLoadUIComplete="PreLoadUIComplete",e=t=__decorate([l],e)}());n.default=c,cc._RF.pop()},{"./PetHero_FYBaseNode":"PetHero_FYBaseNode","./PetHero_FYGlobalVarMgr":"PetHero_FYGlobalVarMgr","./PetHero_FYMessenger":"PetHero_FYMessenger","./PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_FYUtility:[function(e,t,n){"use strict";cc._RF.push(t,"89d0b1gEwNHGL/lAt6LxF7n","PetHero_FYUtility"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,s=(o.property,function(){function e(){}var t;return t=e,e.changeSpriteFrame=function(e,t,n){cc.loader.loadRes(t,cc.SpriteAtlas,function(t,o){if(o instanceof cc.SpriteAtlas){var a=o.getSpriteFrame(n);e.spriteFrame=a}})},e.getRandomValueDif=function(e,t,n){for(var o=new Array,a=n?n>t-e+1?t-e+1:n:1,s=e,i=0;s<=t;s++,i++)o[i]=s;var r=[];o.sort(function(){return.5-Math.random()});for(var l=0;l<a;l++){var c=Math.floor(Math.random()*o.length);r.push(o[c]);var u=o[c];o[c]=o[o.length-1],o[o.length-1]=u,o.pop()}return r},e.getRangeRandom=function(e,n){return t.getRandomValueDif(e,n,1)[0]},e.addChild=function(e,t,n,o){if(void 0===n&&(n=cc.Vec2.ZERO),void 0===o&&(o=!0),void 0==e||void 0==t)return cc.error("----------\x3e>>>>>>>>parent is undefined",void 0==e),void cc.error("----------\x3e>>>>>>>>child is undefined",void 0==t);cc.Vec2.ZERO;var a=cc.instantiate(t);return a.parent=e,a.position=n,a.active=o,a},e.getCanvasWidth=function(){return cc.Canvas.instance.node.width},e.getCanvasHeight=function(){return cc.Canvas.instance.node.height},e.loadScene=function(e){cc.director.loadScene(e)},e.enablePhysicsSystem=function(e){cc.director.getPhysicsManager().enabled=e},e.enableCollisionSystem=function(e){cc.director.getCollisionManager().enabled=e},e.convertDateFromString=function(e){if(e){var t=e.split(" ")[0].split("/");return new Date(t[0],t[1]-1,t[2])}},e.getMonTimeByNowTime=function(){var e=new Date,t=e.getDay();return 0==t&&(t=7),e.setHours(0,0,0,0),new Date(e.getTime()-24*(t-1)*60*60*1e3).getTime()},e.isSameDay=function(e,t){void 0===t&&(t=Date.now());var n=Number(e),o=Number(t);if(n&&o){var a=new Date(n),s=new Date(o);return a.setHours(0,0,0,0)==s.setHours(0,0,0,0)}return!1},e.getDictionaryCount=function(e){var t=0;for(var n in e)t++;return t},e.formatTime=function(e){var n,o,a;e=parseInt(e);return a=Number(e%60),o=Number(e%3600/60),(n=Number(e/3600))?t.PadZero(n)+":"+t.PadZero(o)+":"+t.PadZero(a):t.PadZero(o)+":"+t.PadZero(a)},e.formatTime2=function(e){var n,o;e=parseInt(e);return o=Number(Math.floor((e-1e3*Math.floor(e/1e3))/10)),n=Number(e/1e3%60),Number(e/1e3%3600/60),Number(e/1e3/3600),t.PadZero(n)+":"+t.PadZero(o)},e.PadZero=function(e){return new RegExp(/^\d$/g).test(e)?"0"+e:e},e.getMonthWeek=function(){var e=new Date,t=(e.getFullYear(),e.getDay(),e.getDate(),e.getDay()),n=e.getDate();return Math.ceil((n+6-t)/7)},e.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e=t=__decorate([a],e)}());n.default=s,cc._RF.pop()},{}],PetHero_GridMgr:[function(e,t,n){"use strict";cc._RF.push(t,"6b870RcAOtGhbCrZ5XN/w+O","PetHero_GridMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYUtility"),a=e("./PetHero_CellItem"),s=e("../Common/PetHero_UserDataMgr"),i=cc._decorator,r=i.ccclass,l=(i.property,function(){function e(){this._indexSize=cc.Size.ZERO,this._arrayCell=[[]],this._gapSize=new cc.Vec2(2,2)}var t;return t=e,e.prototype.clearData=function(){t.Instance=new t},e.prototype.create=function(e,t,n){this._indexSize=n;for(var i=cc.size(s.default.Instance.MaxLength/this._indexSize.width,s.default.Instance.MaxLength/this._indexSize.height),r=cc.size(i.width-this._gapSize.x/2,i.height-this._gapSize.y/2),l=0;l<this._indexSize.width;l++)for(var c=0;c<this._indexSize.height;c++){this._arrayCell[l]||(this._arrayCell[l]=[]);var u=o.default.addChild(e,t).getComponent(a.default);u.setSize(r),u.setPosition(new cc.Vec2(l*i.width-s.default.Instance.MaxLength/2+i.width/2,c*i.height-s.default.Instance.MaxLength/2+i.height/2)),this._arrayCell[l].push(u),u.node.active=l%2==0?c%2==0:c%2==1}},e.Instance=new t,e=t=__decorate([r],e)}());n.default=l,cc._RF.pop()},{"../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility","./PetHero_CellItem":"PetHero_CellItem"}],PetHero_Main:[function(e,t,n){"use strict";cc._RF.push(t,"d2fe55trfxJqKt1oFUxEq9L","PetHero_Main"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Tools/PetHero_FYUtility"),a=e("./Tools/PetHero_FYUIMgr"),s=e("./Tools/PetHero_FYMessenger"),i=e("./Common/PetHero_C"),r=e("./Tools/PetHero_FYResMgr"),l=e("./Tools/PetHero_FYSDKMgr"),c=e("./Common/PetHero_UserDataMgr"),u=e("./Game/PetHero_RoleMgr"),d=e("./Common/PetHero_CustomMgr"),p=e("./Tools/PetHero_FYAudioCtl"),h=cc._decorator,f=h.ccclass,y=h.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nDropWaitTime=1,t._nodeGameScene=null,t._nNeedGetDataNum=2,t._nCurGetDataNum=0,t.playerInfo=null,t.isChannelCreated=!1,t.isLoadSucced=!1,t.channelCreatedSucced=!1,t.canSync=!1,t.loadWaitData=[],t.tempSeat=[],t.isStart=!1,t}return __extends(t,e),t.prototype.addListener=function(){s.default.Instance.add(i.C.MsgType.TransferQQGameData,this.onGetQQGameData,this),s.default.Instance.add(r.default.MsgPreLoadComplete,this.onPreLoadComplete,this),s.default.Instance.add(i.C.MsgType.InitCube,this.onInitCube,this),s.default.Instance.add(i.C.MsgType.CanStartGame,this.onStartGame,this)},t.prototype.removeListener=function(){s.default.Instance.remove(i.C.MsgType.TransferQQGameData,this.onGetQQGameData,this),s.default.Instance.remove(r.default.MsgPreLoadComplete,this.onPreLoadComplete,this),s.default.Instance.remove(i.C.MsgType.InitCube,this.onInitCube,this),s.default.Instance.remove(i.C.MsgType.CanStartGame,this.onStartGame,this)},t.prototype.onInitCube=function(){this._nCurGetDataNum,this._nNeedGetDataNum},t.prototype.onPreLoadUIProgress=function(e,t,n){},t.prototype.onGetQQGameData=function(e,t){var n,o=t.postType;if(o==i.C.QQPostDataType.Damage){var a=t.damage;if(this.isFightMode(2)){if(p=t.senderSeat)for(var r=0;r<this.tempSeat.length;r++)this.tempSeat[r]==p&&s.default.Instance.send(i.C.MsgType.Attacked,r,a)}else s.default.Instance.send(i.C.MsgType.Attacked,i.C.RoleType.Enemy1,a)}else{if(o==i.C.QQPostDataType.SyncResult){var l=t.result;return void s.default.Instance.send(i.C.MsgType.SyncResult,l)}if(o==i.C.QQPostDataType.syncBlood){if(this.canSync)t.senderBlood,t.receiverBlood,t.senderDamage,t.senderFriendDamage,t.receiverDamage,t.receiverFriendDamage}else if(o==i.C.QQPostDataType.Ink){if(this.isFightMode(2)){if(p=t.senderSeat)for(r=0;r<this.tempSeat.length;r++)this.tempSeat[r]==p&&s.default.Instance.send(i.C.MsgType.SetCubeInk,(r+2)%4)}else s.default.Instance.send(i.C.MsgType.SetCubeInk,i.C.RoleType.Me)}else if(o==i.C.QQPostDataType.UFO){if(this.isFightMode(2)){if(p=t.senderSeat)for(r=0;r<this.tempSeat.length;r++)this.tempSeat[r]==p&&s.default.Instance.send(i.C.MsgType.SetUFO,(r+2)%4)}else s.default.Instance.send(i.C.MsgType.SetUFO,i.C.RoleType.Me)}else if(o==i.C.QQPostDataType.HpUp){if(this.isFightMode(2)){if(p=t.senderSeat)for(r=0;r<this.tempSeat.length;r++)this.tempSeat[r]==p&&s.default.Instance.send(i.C.MsgType.SetEnemyHp,r)}else s.default.Instance.send(i.C.MsgType.SetEnemyHp,i.C.RoleType.Enemy1)}else if(o==i.C.QQPostDataType.Telescope){var p;if(this.isFightMode(2)){if(p=t.senderSeat)for(r=0;r<this.tempSeat.length;r++)this.tempSeat[r]==p&&s.default.Instance.send(i.C.MsgType.PlayTelescopeAnim,r)}else s.default.Instance.send(i.C.MsgType.PlayTelescopeAnim,i.C.RoleType.Enemy1)}else if(o==i.C.QQPostDataType.isRobot);else if(o==i.C.QQPostDataType.isNotRobot);else if(o==i.C.QQPostDataType.RoleType){var h=t.listRoleType,f=[],y=t.listSeat,C=[];if(this.isFightMode(2)){var m=c.default.Instance.PlayerInfos,_=m[0].seat,g=m[1].seat;for(r=0;r<y.length;r++)Number(_)==y[r]?(C[0]=y[r],C[2]=y[(r+2)%4],f[0]=h[r],f[2]=h[(r+2)%4]):Number(g)==y[r]&&(C[1]=y[r],C[3]=y[(r+2)%4],f[1]=h[r],f[3]=h[(r+2)%4]);this.tempSeat=C,u.default.Instance.createRole2V2(f)}else this.isFightMode(1)&&u.default.Instance.createRole(h[1],h[0]);this._nCurGetDataNum++,console.log("=====@@@==getRole=====",this._nCurGetDataNum),this._nCurGetDataNum>=this._nNeedGetDataNum&&s.default.Instance.send(i.C.MsgType.CanStartGame)}else if(o==i.C.QQPostDataType.ColorType){var I=t.listColor;if(this.isFightMode(2)&&t.senderGroupId&&t.senderGroupId==c.default.Instance.GroupId){var T=[];T[0]=I[1],T[1]=I[0],I=T}s.default.Instance.send(i.C.MsgType.ColorType,I)}else o==i.C.QQPostDataType.Statistics&&s.default.Instance.send(i.C.MsgType.Statistics)}var b=t.sendTime,S=t.remainTime,P=t.round;if(this.canSync&&b&&S&&P){var M=Date.now()-b;(S-=Math.floor(M/1e3))<=0&&(S=0);var v=1;this.isFightMode(2)&&(v=3),c.default.Instance.Round>P||c.default.Instance.Round==P&&S-c.default.Instance.RemainTime>=v?d.default.Instance.qqPostGameData(((n={}).postType=i.C.QQPostDataType.syncBlood,n.senderBlood=c.default.Instance.MyBlood,n.receiverBlood=c.default.Instance.EnemyBlood,n.senderDamage=c.default.Instance.ListDamage[i.C.RoleType.Me],n.senderFriendDamage=c.default.Instance.ListDamage[i.C.RoleType.Friend],n.receiverDamage=c.default.Instance.ListDamage[i.C.RoleType.Enemy1],n.receiverFriendDamage=c.default.Instance.ListDamage[i.C.RoleType.Enemy2],n)):(c.default.Instance.Round<P||c.default.Instance.Round==P&&c.default.Instance.RemainTime-S>=1)&&(c.default.Instance.IsStatistics||(c.default.Instance.RemainTime=S,c.default.Instance.Round=P,s.default.Instance.send(i.C.MsgType.SyncRound,c.default.Instance.Round)))}},t.prototype.isFightMode=function(e){return 1==e?c.default.Instance.FightMode==i.C.FightMode.OneVsOne||c.default.Instance.FightMode==i.C.FightMode.OneVsOnlineAI||c.default.Instance.FightMode==i.C.FightMode.OneVsAI:2==e?c.default.Instance.FightMode==i.C.FightMode.TwoVsOnlineAI||c.default.Instance.FightMode==i.C.FightMode.TwoVsTwo:void 0},t.prototype.onLoad=function(){this.onMessage();var e=this.getComponent(cc.Canvas),t=cc.director.getWinSize().width;cc.director.getWinSize().height;t<720&&(e.fitWidth=!0,e.fitHeight=!1,c.default.Instance.bNeedSetSelfAdaption=!0),c.default.Instance.DropWaitTime=this.nDropWaitTime,a.default.Instance.preLoad(),r.default.Instance.preLoadOther(),r.default.Instance.preLoadAltlas(),r.default.Instance.preLoadEffect(),r.default.Instance.preLoadSequenceFrame()},t.prototype.channelCreated=function(){this.channelCreatedSucced=!0;var e=this.playerInfo;c.default.Instance.PlayerInfos=e.playerInfos,c.default.Instance.IsMainSeat=2==e.playerInfos[0].groupId,c.default.Instance.Seat=c.default.Instance.PlayerInfos[0].seat,c.default.Instance.GameId=c.default.Instance.PlayerInfos[0].qqgameid,c.default.Instance.GroupId=c.default.Instance.PlayerInfos[0].groupId||""+c.default.Instance.GameId,s.default.Instance.send(i.C.MsgType.SetPlayerInfo,e.playerInfos),CatcherSDK.instance().updateProgress(CatcherSDK.ProgressState.COMPLETED,100)},t.prototype.onPreLoadComplete=function(){if(l.default.Instance.isAliGame()){if(this.isLoadSucced=!0,console.log("---------\u300b\u300b\u300b\u300b\u300b\u5df2\u7ecf\u52a0\u8f7d\u5b8c\u6210onPreLoadComplete",this.isChannelCreated),this.isChannelCreated&&this.channelCreated(),this.loadWaitData.length>0)for(var e=0;e<this.loadWaitData.length;e++)console.log("\u672a\u52a0\u8f7d\u5b8c\u5c31\u63a5\u53d7\u7684\u4fe1\u606f\uff1a",this.loadWaitData[e].postType),s.default.Instance.send(i.C.MsgType.TransferQQGameData,this.loadWaitData[e]);this.loadWaitData=[]}else c.default.Instance.GameMode=i.C.GameMode.OneRoundInstantMode},t.prototype.onMessage=function(){l.default.Instance.AliGameInit();var e=this;l.default.Instance.isAliGame()&&(CatcherSDK.instance().on("CONNECT",function(t){console.log("==============CONNECT",t);var n={playerInfos:[]};n.playerInfos[0]=t.userInfo;for(var o=0;o<t.playerList.length;o++)t.playerList[o].openId!=n.playerInfos[0].openId&&(n.playerInfos[1]=t.playerList[o]);e.canSync=!1,e.playerInfo=n,e.isChannelCreated=!0,c.default.Instance.GameMode=i.C.GameMode.OneRoundInstantMode,e.isLoadSucced&&e.channelCreated()}),CatcherSDK.instance().on("READY",function(){if(console.log("=============@@@==ready====",c.default.Instance.PlayerInfos),e.schedule(e.sendToSync,1),e.isLoadSucced=!1,c.default.Instance.PlayerInfos[0].groupId>c.default.Instance.PlayerInfos[1].groupId){var t=u.default.Instance.createRole();d.default.Instance.qqPostGameData({postType:i.C.QQPostDataType.RoleType,listRoleType:t});var n=1==(l=o.default.getRangeRandom(0,1))?i.C.ColorType.Blue:i.C.ColorType.Red,a=0==l?i.C.ColorType.Blue:i.C.ColorType.Red;s.default.Instance.send(i.C.MsgType.ColorType,[a,n]),d.default.Instance.qqPostGameData({postType:i.C.QQPostDataType.ColorType,listColor:[n,a]}),e._nCurGetDataNum++,console.log("==========@@@@@======setRole=",e._nCurGetDataNum)}var r=!0;if(c.default.Instance.PlayerInfos&&c.default.Instance.PlayerInfos[1]?(console.log("=============UserDataMgr.Instance.PlayerInfos[1].isRobot==============",c.default.Instance.PlayerInfos[1].isRobot),r=void 0!=c.default.Instance.PlayerInfos[1].isRobot&&0!=c.default.Instance.PlayerInfos[1].isRobot):r=!0,r){if(c.default.Instance.PlayerInfos[0].groupId<=c.default.Instance.PlayerInfos[1].groupId){t=u.default.Instance.createRole();d.default.Instance.qqPostGameData({postType:i.C.QQPostDataType.RoleType,listRoleType:t});var l;n=1==(l=o.default.getRangeRandom(0,1))?i.C.ColorType.Blue:i.C.ColorType.Red,a=0==l?i.C.ColorType.Blue:i.C.ColorType.Red;s.default.Instance.send(i.C.MsgType.ColorType,[a,n]),d.default.Instance.qqPostGameData({postType:i.C.QQPostDataType.ColorType,listColor:[n,a]}),e._nCurGetDataNum++}e.isFightMode(1)?(c.default.Instance.FightMode=i.C.FightMode.OneVsAI,console.log("=========\u5207\u6362ai\u6a21\u5f0f===========")):e.isFightMode(2)&&(c.default.Instance.FightMode=i.C.FightMode.TwoVsOnlineAI),e._nCurGetDataNum++,console.log("=====@@@==isRobot=====",e._nCurGetDataNum),e._nCurGetDataNum>=e._nNeedGetDataNum&&s.default.Instance.send(i.C.MsgType.CanStartGame)}else e.isFightMode(1)?(c.default.Instance.FightMode=i.C.FightMode.OneVsOne,console.log("=========\u5207\u6362\u5bf9\u6218\u6a21\u5f0f===========")):e.isFightMode(2)&&(c.default.Instance.FightMode=i.C.FightMode.TwoVsTwo),e._nCurGetDataNum++,console.log("=====@@@==notIsRobot=====",e._nCurGetDataNum),e._nCurGetDataNum>=e._nNeedGetDataNum&&s.default.Instance.send(i.C.MsgType.CanStartGame)}),CatcherSDK.instance().on("MESSAGE",function(t){console.log("==@@@@@====MESSAGE======",t),e.onGetQQGameData(null,t.data)}),CatcherSDK.instance().on("MIC_CHANGE",function(e){s.default.Instance.send(i.C.MsgType.QQGame_Voice,e)}),CatcherSDK.instance().on("AUDIO_CHANGE",function(e){console.log("=========@@@@====",e);var t=e.audioStatus?1:0;p.default.Instance.changeMusicVolume(t),p.default.Instance.changeSoundVolume(t)}),CatcherSDK.instance().on("APP_STATE_CHANGE",function(e){if(console.log("===\u5207\u6362\u524d\u540e\u53f0===========APP_STATE_CHANGE=========",e),e.state){if(cc.game.resume(),console.log("=======\u8fdb\u5165\u524d\u53f0\u65f6\u5269\u4f59\u65f6\u95f4=========="+c.default.Instance.RemainTime),console.log("=======\u8fdb\u5165\u524d\u53f0\u65f6\u95f4\u6233=========="+Date.now()),console.log("=======\u5f00\u59cb\u6e38\u620f\u65f6\u95f4\u6233=========="+c.default.Instance.StartTime),0!=c.default.Instance.StartTime){var t=Date.now(),n=Math.floor((t-c.default.Instance.StartTime)/1e3);console.log("=======\u5df2\u7ecf\u8fc7\u53bb\u7684\u65f6\u95f4=========="+n),n>0&&(n>c.default.Instance.OneRoundTime?c.default.Instance.RemainTime=1:c.default.Instance.RemainTime=c.default.Instance.OneRoundTime-n)}}else console.log("=======\u8fdb\u5165\u540e\u53f0\u65f6\u5269\u4f59\u65f6\u95f4=========="+c.default.Instance.RemainTime),console.log("=======\u8fdb\u5165\u540e\u53f0\u65f6\u95f4\u6233=========="+Date.now()),console.log("=======\u5f00\u59cb\u6e38\u620f\u65f6\u95f4\u6233=========="+c.default.Instance.StartTime),cc.game.pause()}),CatcherSDK.instance().on("PROGRESS",function(e){console.log("==============!!!!!!====",e)}),CatcherSDK.instance().on("GAMEOVER",function(t){s.default.Instance.send(i.C.MsgType.GameOver,t),console.log("========GAMEOVER======!!!!!!====",t),e.isStart=!1,e.unschedule(e.sendToSync)}))},t.prototype.onStartGame=function(){this.isStart=!0,a.default.Instance.hide(i.C.UIName.UILoadingPanel)},t.prototype.sendToSync=function(){this.isStart&&d.default.Instance.qqPostGameData({postType:"sync"})},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener(),this.unschedule(this.sendToSync)},__decorate([y({type:cc.Float,displayName:"\u4e0b\u843d\u7b49\u5f85\u65f6\u95f4"})],t.prototype,"nDropWaitTime",void 0),t=__decorate([f],t)}(cc.Component);n.default=C,cc._RF.pop()},{"./Common/PetHero_C":"PetHero_C","./Common/PetHero_CustomMgr":"PetHero_CustomMgr","./Common/PetHero_UserDataMgr":"PetHero_UserDataMgr","./Game/PetHero_RoleMgr":"PetHero_RoleMgr","./Tools/PetHero_FYAudioCtl":"PetHero_FYAudioCtl","./Tools/PetHero_FYMessenger":"PetHero_FYMessenger","./Tools/PetHero_FYResMgr":"PetHero_FYResMgr","./Tools/PetHero_FYSDKMgr":"PetHero_FYSDKMgr","./Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr","./Tools/PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_RoleMgr:[function(e,t,n){"use strict";cc._RF.push(t,"5b848NokJBJaos8BfjuZKmG","PetHero_RoleMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYUtility"),a=e("../Common/PetHero_C"),s=cc._decorator,i=s.ccclass,r=(s.property,function(){function e(){this._nodeRoleAnimContainer=null,this._nodeRoleAnim2v2Container=null,this._nodeRoleAnimBehindContainer=null,this._nodeMyRole=null,this._nodeEnemyRole=null,this._animMyRole=null,this._animEnemyRole=null,this._sfAttack=null,this._sfAttackTween=null,this._sfAttackEnemy=null,this._sfAttackEnemyTween=null,this._sfAttack2=null,this._sfAttackTween2=null,this._sfAttackEnemy2=null,this._sfAttackEnemyTween2=null,this._sfAttackIdle=null,this._sfAttackEnemyIdle=null,this._nAttackDuation=.3,this._listRole=[null,null,null,null],this._listAnimRole=[null,null,null,null],this._listSFAttack=[null,null,null,null],this._listSFAttackTween=[null,null,null,null],this._listSFSkill=[null,null,null,null],this._listSFSkillTween=[null,null,null,null],this._listSFSkillIdle=[null,null,null,null],this._listDefaultIdleAnim=[a.C.RoleAnimType.Idle,a.C.RoleAnimType.Idle,a.C.RoleAnimType.Idle,a.C.RoleAnimType.Idle]}var t;return t=e,e.prototype.reset=function(){for(var e=0;e<this._listRole.length;e++){var t=cc.loader.getDependsRecursively(this._listRole[e]);cc.loader.release(t)}for(e=0;e<this._listAnimRole.length;e++){t=cc.loader.getDependsRecursively(this._listAnimRole[e]);cc.loader.release(t)}for(e=0;e<this._listSFAttack.length;e++){t=cc.loader.getDependsRecursively(this._listSFAttack[e]);cc.loader.release(t)}for(e=0;e<this._listSFSkill.length;e++){t=cc.loader.getDependsRecursively(this._listSFSkill[e]);cc.loader.release(t)}for(e=0;e<this._listSFSkillIdle.length;e++){t=cc.loader.getDependsRecursively(this._listSFSkillIdle[e]);cc.loader.release(t)}},e.prototype.clearData=function(){this.reset(),this._listRole=[null,null,null,null],this._listAnimRole=[null,null,null,null],this._listSFAttack=[null,null,null,null],this._listSFAttackTween=[null,null,null,null],this._listSFSkill=[null,null,null,null],this._listSFSkillTween=[null,null,null,null],this._listSFSkillIdle=[null,null,null,null]},e.prototype.init=function(e,t,n,o){this._listRole[a.C.RoleType.Me]=e,this._listRole[a.C.RoleType.Enemy1]=t,this._nodeRoleAnimContainer=n,this._nodeRoleAnimBehindContainer=o},e.prototype.init2V2=function(e,t,n,o){this._listRole=e,this._nodeRoleAnimContainer=t,this._nodeRoleAnimBehindContainer=n,this._nodeRoleAnim2v2Container=o},e.prototype.createRole=function(e,t){return void 0===e&&(e=-1),void 0===t&&(t=-1),e<0&&(e=o.default.getRangeRandom(0,7)),t<0&&(t=o.default.getRangeRandom(0,7)),7==e&&(e=8),7==t&&(t=8),[e,t]},e.prototype.createRole2V2=function(e){void 0===e&&(e=[-1,-1,-1,-1]);for(var t=0;t<a.C.RoleType.Length;t++){this._listAnimRole[t]&&(this._listAnimRole[t].node.destroy(),this._listAnimRole[t]=null),e[t]<0&&(e[t]=o.default.getRangeRandom(0,7)),7==e[t]&&(e[t]=8)}return e},e.prototype.playMySeatTipAnim=function(){},e.prototype.play=function(e,t){},e.prototype.playATKAnim=function(e,t){void 0===t&&(t=a.C.AttackType.Attack1)},e.prototype.playATKOff=function(e){},e.prototype.stopATKAnim=function(e,t){void 0===t&&(t=a.C.AttackType.Attack1)},e.prototype.onMyRoleAnimationEvent=function(e){},e.prototype.onEnemyRoleAnimationEvent=function(e){},e.Instance=new t,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Tools/PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_TextMgr:[function(e,t,n){"use strict";cc._RF.push(t,"850c4gfMDRCGIitqKnN93BU","PetHero_TextMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYResMgr"),a=e("../Common/PetHero_C"),s=e("../Tools/PetHero_FYUtility"),i=e("../Common/PetHero_UserDataMgr"),r=cc._decorator,l=r.ccclass,c=(r.property,function(){function e(){this._nodeContainer=null,this._animComb=null,this.labCombNum=null,this._animEvaluate=null,this._sprEvaluate=null,this._listLabScoreFinish=[]}var t;return t=e,e.prototype.init=function(e){this._nodeContainer=e},e.prototype.clearData=function(){for(var e in this._animComb=null,this._animEvaluate=null,this._listLabScoreFinish)if(this._listLabScoreFinish[e]){var t=cc.loader.getDependsRecursively(this._listLabScoreFinish[e]);cc.loader.release(t),this._listLabScoreFinish[e].destroy()}this._listLabScoreFinish=[]},e.prototype.playGetScore=function(e,t){if(this._listLabScoreFinish.length>0){var n=this._listLabScoreFinish.shift();n.node.setPosition(t),n.node.active=!0,n.string=e+"";var i=cc.moveBy(.5,cc.v2(0,20)),r=cc.fadeOut(.3),l=this,c=cc.sequence(i,r,cc.callFunc(function(){n.node.active=!1,n.node.opacity=255,l._listLabScoreFinish.push(n)}));n.node.runAction(c)}else{var u=s.default.addChild(this._nodeContainer,o.default.Instance.loadOther(a.C.OtherName.PiaoZi));if(u){var d=u.getComponent(cc.Label);d.string=e+"",u.scale=2,u.setPosition(t);i=cc.moveBy(.5,cc.v2(0,20)),r=cc.fadeOut(.3);var p=this;c=cc.sequence(i,r,cc.callFunc(function(){u.active=!1,u.opacity=255,p._listLabScoreFinish.push(d)}));u.runAction(c)}}},e.prototype.playCombAnim=function(e){null==this._animComb&&(this._animComb=s.default.addChild(this._nodeContainer,o.default.Instance.loadOther(a.C.OtherName.Comb)).getComponent(cc.Animation),this._animComb.node.x=-30,this.labCombNum=this._animComb.node.getChildByName("labCombNum").getComponent(cc.Label)),this.labCombNum.string=e.toString(),this._animComb.play()},e.prototype.playEvaluateAnim=function(e){if(null==this._animEvaluate){var t=s.default.addChild(this._nodeContainer,o.default.Instance.loadOther(a.C.OtherName.Evaluate));t&&(this._animEvaluate=t.getComponent(cc.Animation),this._sprEvaluate=this._animEvaluate.node.getComponent(cc.Sprite))}this._sprEvaluate&&(this._sprEvaluate.spriteFrame=o.default.Instance.loadSpriteFrame(e)),this._animEvaluate&&this._animEvaluate.play()},e.prototype.playEvaluateAnimByCount=function(e){var n=a.C.EvaluateType.Nice;4==e?n=a.C.EvaluateType.Nice:5==e?n=a.C.EvaluateType.Cool:6==e?n=a.C.EvaluateType.Wonderful:e>=7&&(n=a.C.EvaluateType.Perfect),i.default.Instance.GameMode!=a.C.GameMode.OneRoundInstantMode&&t.Instance.playEvaluateAnim(n)},e.Instance=new t,e=t=__decorate([l],e)}());n.default=c,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_UIGamePanel:[function(e,t,n){"use strict";cc._RF.push(t,"ea912tUz0lBcqWj4kMMKGdV","PetHero_UIGamePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PetHero_CubeItem"),a=e("./PetHero_CubeMgr"),s=e("../Tools/PetHero_FYTweenMgr"),i=e("../Tools/PetHero_FYBaseUIPanel"),r=e("../Tools/PetHero_FYUIMgr"),l=e("../Tools/PetHero_FYGlobalVarMgr"),c=e("../Common/PetHero_C"),u=e("./PetHero_GridMgr"),d=e("../Tools/PetHero_FYMessenger"),p=e("./PetHero_AttackMgr"),h=e("./PetHero_AIMgr"),f=e("../Tools/PetHero_FYResMgr"),y=e("../Common/PetHero_UserDataMgr"),C=e("../Tools/PetHero_FYUtility"),m=e("../Tools/PetHero_FYSDKMgr"),_=e("./PetHero_EffectMgr"),g=e("../Tools/PetHero_FYScheduleCtl"),I=e("./PetHero_RoleMgr"),T=e("../Tools/PetHero_FYAudioCtl"),b=e("../Common/PetHero_CustomMgr"),S=e("./PetHero_TextMgr"),P=cc._decorator,M=P.ccclass,v=P.property,F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeEffectContainer=null,t.nodeGrid=null,t.nodeCubeCtl=null,t.btnBack=null,t.nodeHeadContainer1v1=null,t.nodeHeadContainer2v2=null,t.sprTopBg=null,t.sprBottomBg=null,t.labTime=null,t.spriteMyBlood=null,t.spriteEnemyBlood=null,t.listLabATK=[],t.nodeDoubleAttackCube=null,t.listNodeRole=[],t.nodeTopControlContainer=null,t.simpleIcon=null,t.nodeTopControl2v2Container=null,t.labMyNickName=null,t.sprMyHead=null,t.sprMySpoken=null,t.sprMyUnSpoken=null,t.labEnemyNickName=null,t.sprEnemyHead=null,t.sprEnemySpoken=null,t.sprEnemyUnSpoken=null,t.labRound=null,t.sprMyHeadBg=null,t.sprMyNameBg=null,t.sprEnemyHeadBg=null,t.sprEnemyNameBg=null,t.sp2v2MyLink=null,t.sp2v2EnemyLink=null,t.sp2v2MyMiddleBg=null,t.sp2v2EnemyMiddleBg=null,t.sp2v2MyHeadBg=null,t.sp2v2MyFriendHeadBg=null,t.sp2v2Enemy1HeadBg=null,t.sp2v2Enemy2HeadBg=null,t.arrayNode2v2Head=[],t.lab2v2Round=null,t.lab2v2Time=null,t.array2v2HeadUI=[],t.nodeTopBehindControlContainer=null,t.nodeTextContainer=null,t.nodeCrushTailPoint=null,t.node2v2CrushTailPoint=null,t.nodeCrushTailContainer=null,t.nodeScoreDamage=null,t.spScoreDamageL=null,t.spScoreDamageR=null,t.spScoreFillL=null,t.spScoreFillR=null,t.labMyTeam=null,t.labEnemyTeam=null,t.nodeFriendAttack=null,t.nodeMyAttack=null,t.btnHelp=null,t.helpInfo=null,t.btnCloseHelp=null,t._bCreateCube=!1,t._bCreateGrid=!1,t._nMyBlood=p.default.Instance.maxBlood,t._nEnemyBlood=p.default.Instance.maxBlood,t._nodeFirstSelectCube=null,t._nodeSecondSelectCube=null,t._timerCallback=null,t._nRound=1,t._myAniBlood=0,t._enemyAniBlood=0,t._listATKTotalCount=[0,0,0,0],t._listATKCount=[0,0,0,0],t._bBloodTween=!1,t._bCanPlaySkill=!1,t._b2V2CanPlaySkill=!1,t._bEnemyBloodTweenComplete=!1,t._listIsBloodTweenComplete=[!1,!1,!1,!1],t._cbBloodTweenComplete=null,t._nBloodTweenSpeed=14,t._nInitBloodSizeX=235,t._nTimeStay=0,t._nTimeSuggestion=5,t._bSuggestion=!1,t._animReadyGo=null,t.postResultData=null,t.getResultData=null,t.statisticsNum=null,t.startStatisticsTime=0,t.hadResult=!1,t}return __extends(t,e),t.prototype.showHelp=function(){this.helpInfo.active=!0},t.prototype.hideHelp=function(){this.helpInfo.active=!1},t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnBack.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnBack,this),this.nodeCubeCtl.on(cc.Node.EventType.TOUCH_START,this.onCubeCtlTouchStart,this),this.nodeCubeCtl.on(cc.Node.EventType.TOUCH_MOVE,this.onCubeCtlTouchMove,this),this.nodeCubeCtl.on(cc.Node.EventType.TOUCH_END,this.onCubeCtlTouchEnd,this),this.nodeCubeCtl.on(cc.Node.EventType.TOUCH_CANCEL,this.onCubeCtlTouchCancel,this),this.btnHelp.on(cc.Node.EventType.TOUCH_END,this.showHelp,this),this.btnCloseHelp.on(cc.Node.EventType.TOUCH_END,this.hideHelp,this),d.default.Instance.add(f.default.MsgPreLoadComplete,this.onPreLoadComplete,this),d.default.Instance.add(c.C.MsgType.Restart,this.onRestart,this),d.default.Instance.add(c.C.MsgType.AttackEnemy,this.onATKEnemy,this),d.default.Instance.add(c.C.MsgType.Attacked,this.onATKed,this),d.default.Instance.add(c.C.MsgType.SetDoubleAttackCube,this.onSetDoubleAttackCube,this),d.default.Instance.add(c.C.MsgType.DestroySameColorCube,this.onDestroySameColorCube,this),d.default.Instance.add(c.C.MsgType.UseLightningLine,this.onUseLightningLine,this),d.default.Instance.add(c.C.MsgType.UseLightningRow,this.onUseLightningRow,this),d.default.Instance.add(c.C.MsgType.UseStarCube,this.onUseStarCube,this),d.default.Instance.add(c.C.MsgType.UseBomb,this.onUseBombCube,this),d.default.Instance.add(c.C.MsgType.GetRedHeart,this.onGetRedHeart,this),d.default.Instance.add(c.C.MsgType.SetEnemyHp,this.onSetEnemyRedHeart,this),d.default.Instance.add(c.C.MsgType.SetCubeInk,this.onSetCubeInk,this),d.default.Instance.add(c.C.MsgType.GetTelescope,this.onGetTelescope,this),d.default.Instance.add(c.C.MsgType.SetUFO,this.onSetUFO,this),d.default.Instance.add(c.C.MsgType.PlayInkAnim,this.onPlayInkAnim,this),d.default.Instance.add(c.C.MsgType.PlayRedHeartAnim,this.onPlayRedHeartAnim,this),d.default.Instance.add(c.C.MsgType.PlayUFOAnim,this.onPlayUFOAnim,this),d.default.Instance.add(c.C.MsgType.PlayTelescopeAnim,this.onPlayTelescopeAnim,this),d.default.Instance.add(c.C.MsgType.SyncHP,this.setBlood,this),d.default.Instance.add(c.C.MsgType.SyncDamage,this.setATKCount,this),d.default.Instance.add(c.C.MsgType.SyncRound,this.onSyncRound,this),d.default.Instance.add(c.C.MsgType.CanStartGame,this.startGame,this),d.default.Instance.add(c.C.MsgType.ResetGame,this.reset,this),d.default.Instance.add(c.C.MsgType.SetPlayerInfo,this.setPlayerInfo,this),d.default.Instance.add(c.C.MsgType.QQGame_Voice,this.onQQGameVoice,this),d.default.Instance.add(c.C.MsgType.ColorType,this.onSetColor,this),d.default.Instance.add(c.C.MsgType.RefreshGameUI,this.onRefreshUI,this),d.default.Instance.add(c.C.MsgType.SyncResult,this.onSyncResult,this),d.default.Instance.add(c.C.MsgType.LeaveToResult,this.onLeaveToResult,this),d.default.Instance.add(c.C.MsgType.Statistics,this.onGetStatics,this),d.default.Instance.add(c.C.MsgType.GameOver,this.onGameOver,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnHelp.off(cc.Node.EventType.TOUCH_END,this.showHelp,this),this.btnCloseHelp.off(cc.Node.EventType.TOUCH_END,this.hideHelp,this),this.btnBack.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnBack,this),this.nodeCubeCtl.off(cc.Node.EventType.TOUCH_START,this.onCubeCtlTouchStart,this),this.nodeCubeCtl.off(cc.Node.EventType.TOUCH_MOVE,this.onCubeCtlTouchMove,this),this.nodeCubeCtl.off(cc.Node.EventType.TOUCH_END,this.onCubeCtlTouchEnd,this),this.nodeCubeCtl.off(cc.Node.EventType.TOUCH_CANCEL,this.onCubeCtlTouchCancel,this),d.default.Instance.remove(c.C.MsgType.UseLightningRow,this.onUseLightningRow,this),d.default.Instance.remove(c.C.MsgType.UseLightningLine,this.onUseLightningLine,this),d.default.Instance.remove(c.C.MsgType.UseBomb,this.onUseBombCube,this),d.default.Instance.remove(c.C.MsgType.UseStarCube,this.onUseStarCube,this),d.default.Instance.remove(f.default.MsgPreLoadComplete,this.onPreLoadComplete,this),d.default.Instance.remove(c.C.MsgType.Restart,this.onRestart,this),d.default.Instance.remove(c.C.MsgType.AttackEnemy,this.onATKEnemy,this),d.default.Instance.remove(c.C.MsgType.Attacked,this.onATKed,this),d.default.Instance.remove(c.C.MsgType.SetDoubleAttackCube,this.onSetDoubleAttackCube,this),d.default.Instance.remove(c.C.MsgType.DestroySameColorCube,this.onDestroySameColorCube,this),d.default.Instance.remove(c.C.MsgType.GetRedHeart,this.onGetRedHeart,this),d.default.Instance.remove(c.C.MsgType.SetEnemyHp,this.onSetEnemyRedHeart,this),d.default.Instance.remove(c.C.MsgType.SetCubeInk,this.onSetCubeInk,this),d.default.Instance.remove(c.C.MsgType.GetTelescope,this.onGetTelescope,this),d.default.Instance.remove(c.C.MsgType.SetUFO,this.onSetUFO,this),d.default.Instance.remove(c.C.MsgType.PlayInkAnim,this.onPlayInkAnim,this),d.default.Instance.remove(c.C.MsgType.PlayRedHeartAnim,this.onPlayRedHeartAnim,this),d.default.Instance.remove(c.C.MsgType.PlayUFOAnim,this.onPlayUFOAnim,this),d.default.Instance.remove(c.C.MsgType.PlayTelescopeAnim,this.onPlayTelescopeAnim,this),d.default.Instance.remove(c.C.MsgType.CanStartGame,this.startGame,this),d.default.Instance.remove(c.C.MsgType.ResetGame,this.reset,this),d.default.Instance.remove(c.C.MsgType.SetPlayerInfo,this.setPlayerInfo,this),d.default.Instance.remove(c.C.MsgType.QQGame_Voice,this.onQQGameVoice,this),d.default.Instance.remove(c.C.MsgType.SyncHP,this.setBlood,this),d.default.Instance.remove(c.C.MsgType.SyncDamage,this.setATKCount,this),d.default.Instance.remove(c.C.MsgType.SyncRound,this.onSyncRound,this),d.default.Instance.remove(c.C.MsgType.ColorType,this.onSetColor,this),d.default.Instance.remove(c.C.MsgType.RefreshGameUI,this.onRefreshUI,this),d.default.Instance.remove(c.C.MsgType.LeaveToResult,this.onLeaveToResult,this),d.default.Instance.remove(c.C.MsgType.SyncResult,this.onSyncResult,this),d.default.Instance.remove(c.C.MsgType.Statistics,this.onGetStatics,this),d.default.Instance.remove(c.C.MsgType.GameOver,this.onGameOver,this)},t.prototype.onGetStatics=function(){this.statisticsNum+=1;if(this.statisticsNum>=y.default.Instance.PlayerInfos.length){this.unschedule(this.toFight);var e=Date.now(),t=Math.ceil((e-this.startStatisticsTime)/1e3);t<3?this.scheduleOnce(this.toFight,3-t):this.toFight()}},t.prototype.onSyncResult=function(e,t){var n=t;if(this.getResultData=n,null!=this.postResultData){var o=this.postResultData.endTime,a=this.getResultData.endTime,s=this.getResultData.params,i=this.postResultData.params;if(o>a){var r=s;r.accountname=i.accountname,r.accountId=i.accountId,"win"==r.war_result?r.war_result="lose":"lose"==r.war_result?r.war_result="win":r.war_result="draw",this.postResultData.params=r}console.log("=============onSyncResult================="),this.unschedule(this.sureResult),this.sureResult()}},t.prototype.onLeaveToResult=function(e,t){var n=t;this.postResultData=n,m.default.Instance.AliPostGameData({postType:c.C.QQPostDataType.SyncResult,result:n}),null!=this.getResultData&&this.onSyncResult(null,this.getResultData),console.log("==========onLeaveToResult=============="),this.scheduleOnce(this.sureResult,.01)},t.prototype.initData=function(){this.postResultData=null,this.getResultData=null,this._nRound=1,y.default.Instance.Round=this._nRound,y.default.Instance.RemainTime=y.default.Instance.OneRoundTime,this._nMyBlood=p.default.Instance.maxBlood,y.default.Instance.MyBlood=this._nMyBlood,this._nEnemyBlood=p.default.Instance.maxBlood,y.default.Instance.EnemyBlood=this._nEnemyBlood;for(var e=0;e<c.C.RoleType.Length;e++)this.setATKCount(null,e,0),this._listATKTotalCount[e]=0;this.spriteMyBlood.fillRange=1,this.spriteEnemyBlood.fillRange=1},t.prototype.createGrid=function(){this._bCreateGrid||(this._bCreateGrid=!0,u.default.Instance.create(this.nodeGrid,f.default.Instance.loadOther(c.C.OtherName.Cell),new cc.Size(y.default.Instance.row,y.default.Instance.col)))},t.prototype.createCube=function(){console.log("=========\u521b\u5efa\u65b9\u5757============"),this._bCreateCube?a.default.Instance.reCreate():(this._bCreateCube=!0,a.default.Instance.create())},t.prototype.startGame=function(){b.default.Instance.qqPostGameData({postType:c.C.QQPostDataType.SetStartTime}),y.default.Instance.GameMode==c.C.GameMode.OneRoundInstantMode?(this.nodeFriendAttack.active=!1,a.default.Instance.init(this.nodeCrushTailPoint,this.nodeCrushTailContainer,this.nodeCubeCtl,f.default.Instance.loadOther(c.C.OtherName.Cube),new cc.Size(y.default.Instance.row,y.default.Instance.col))):(this.nodeMyAttack.active=!0,a.default.Instance.init(this.nodeCrushTailPoint,this.nodeCrushTailContainer,this.nodeCubeCtl,f.default.Instance.loadOther(c.C.OtherName.Cube),new cc.Size(y.default.Instance.row,y.default.Instance.col))),T.default.Instance.playMusic(c.C.MusicType.MainBg),this.initData(),this.refreshUI();var e=this;y.default.Instance.TouchSwitch=!1,m.default.Instance.isAliGame()||(y.default.Instance.FightMode=c.C.FightMode.OneVsAI,I.default.Instance.createRole()),I.default.Instance.playMySeatTipAnim(),this.isFightMode(2)?(I.default.Instance.play(c.C.RoleType.Me,c.C.RoleAnimType.Idle),I.default.Instance.play(c.C.RoleType.Friend,c.C.RoleAnimType.Idle),I.default.Instance.play(c.C.RoleType.Enemy1,c.C.RoleAnimType.Idle),I.default.Instance.play(c.C.RoleType.Enemy2,c.C.RoleAnimType.Idle)):(I.default.Instance.play(c.C.RoleType.Me,c.C.RoleAnimType.Idle),I.default.Instance.play(c.C.RoleType.Enemy1,c.C.RoleAnimType.Idle)),m.default.Instance.isAliGame()&&(y.default.Instance.PlayerInfos[0].battleTimes||(y.default.Instance.PlayerInfos[0].battleTimes=0)),this.scheduleOnce(function(){e.showRound(function(){e.startTimer(),y.default.Instance.FightMode!=c.C.FightMode.OneVsAI&&y.default.Instance.FightMode!=c.C.FightMode.OneVsOnlineAI&&y.default.Instance.FightMode!=c.C.FightMode.TwoVsOnlineAI||h.default.Instance.start(e),y.default.Instance.TouchSwitch=!0,e._bCreateCube=!1,e.createCube(),e.hideHelp()})},.8),this.createGrid(),this.labRound.spriteFrame=f.default.Instance.loadSpriteFrame("Round"+this._nRound.toString()),this.lab2v2Round.spriteFrame=f.default.Instance.loadSpriteFrame("Round"+this._nRound.toString())},t.prototype.reset=function(){m.default.Instance.AliGameInit()},t.prototype.setPlayerInfo=function(e,t){if(this.hadResult=!1,m.default.Instance.isAliGame()){this.initData();var n=this;if(this.nodeHeadContainer1v1.active=t.length<4,this.nodeHeadContainer2v2.active=t.length>=4,this.nodeFriendAttack.active=t.length>=4,this.nodeScoreDamage.active=t.length>=4,this.spriteEnemyBlood.node.parent.active=!1,this.spriteMyBlood.node.parent.active=!1,t.length>=4){var o=function(e){var n=t[e];0==Number(e)&&(y.default.Instance.IsMainSeat=1==n.seat);var o=n.nickName;o.length>7&&(o=o.slice(0,6)+"...");var s=a.arrayNode2v2Head[e];s.getChildByName("LabName").getComponent(cc.Label).string=o;var i=s.getChildByName("Sex").getComponent(cc.Sprite),r="1"==n.gender?"boy":"gril";C.default.changeSpriteFrame(i,"atlas/common/common",r);var l=s.getChildByName("Mask").getChildByName("Head").getComponent(cc.Sprite),c=n.avatarUrl;if(""!=c)try{cc.loader.load({url:c,type:"jpg"},function(e,t){var n=new cc.SpriteFrame(t);l.spriteFrame=n})}catch(e){console.log("---------------error: "+e)}else l.spriteFrame=a.simpleIcon.spriteFrame},a=this;for(var s in t)o(s)}else for(var s in t){var i=t[s];if(0==Number(s)){(u=i.nickName).length>7&&(u=u.slice(0,6)+"..."),this.labMyNickName.string=u;var r=this.labMyNickName.node.parent.getChildByName("Sex1"),l=this.labMyNickName.node.parent.getChildByName("Sex2");r.active="1"==i.gender,l.active="2"==i.gender;var c=i.avatarUrl;if(""!=c)try{cc.loader.load({url:c,type:"jpg"},function(e,t){var o=new cc.SpriteFrame(t);n.sprMyHead.spriteFrame=o})}catch(e){console.log("---------------error: "+e)}else n.sprMyHead.spriteFrame=n.simpleIcon.spriteFrame;y.default.Instance.IsMainSeat=1==i.seat}else{var u;(u=i.nickName).length>7&&(u=u.slice(0,6)+"..."),this.labEnemyNickName.string=u;var d=this.labEnemyNickName.node.parent.getChildByName("Sex1"),p=this.labEnemyNickName.node.parent.getChildByName("Sex2");d.active="1"==i.gender,p.active="2"==i.gender;var h=i.avatarUrl;if(""!=h)try{cc.loader.load({url:h,type:"jpg"},function(e,t){var o=new cc.SpriteFrame(t);n.sprEnemyHead.spriteFrame=o})}catch(e){console.log("---------------error: "+e)}else n.sprEnemyHead.spriteFrame=n.simpleIcon.spriteFrame;y.default.Instance.IsMainSeat=1==i.seat}}}},t.prototype.restart=function(){a.default.Instance.reCreate(),this.initData(),this.refreshUI(),this._nMyBlood=p.default.Instance.maxBlood,this._nEnemyBlood=p.default.Instance.maxBlood,this.refreshUI(),y.default.Instance.FightMode==c.C.FightMode.OneVsAI&&h.default.Instance.start(this),y.default.Instance.TouchSwitch=!0,this.startTimer()},t.prototype.check=function(e,t){var n=t.node.getPosition(),o=e.node.getPosition();e.getCubeState()!=c.C.CubeState.Tween&&t.getCubeState()!=c.C.CubeState.Tween?a.default.Instance.distanceChecker(e,t)?(cc.log("\u76f8\u90bb"),e.setCubeState(c.C.CubeState.Tween),t.setCubeState(c.C.CubeState.Tween),this.enableSelectorTween(this._nodeFirstSelectCube,!1),s.default.moveTo(e.node,a.default.Instance.swapTweenTime,n.x,n.y,0,function(){}),g.default.Instance.setScheduleOnce(function(){e.setCubeState(c.C.CubeState.Normal),e.stopSelectedTween()},a.default.Instance.swapTweenTime),s.default.moveTo(t.node,a.default.Instance.swapTweenTime,o.x,o.y,0,function(){}),g.default.Instance.setScheduleOnce(function(){t.setCubeState(c.C.CubeState.Normal),a.default.Instance.ruleChecker(e.node,t.node,function(){a.default.Instance.crushFinish()})},a.default.Instance.swapTweenTime)):(cc.log("\u4e0d\u662f\u76f8\u90bb\u7684\u4e24\u4e2a\u65b9\u5757"),this.enableSelectorTween(this._nodeFirstSelectCube,!1),this._nodeFirstSelectCube=this._nodeSecondSelectCube,this._nodeSecondSelectCube=null,this.enableSelectorTween(this._nodeFirstSelectCube,!0)):cc.log("\u6709\u4eba\u5728\u8fd0\u52a8")},t.prototype.enableSelectorTween=function(e,t){var n=e.getComponent(o.default);t?n.playSelectedTween():n.stopSelectedTween()},t.prototype.posToIndex=function(e){var t=this.nodeCubeCtl.convertToNodeSpaceAR(e);t.x=t.x+y.default.Instance.MaxLength/2,t.y=t.y+y.default.Instance.MaxLength/2;var n=Math.floor(t.x/a.default.Instance.cubeSize.width),o=Math.floor(t.y/a.default.Instance.cubeSize.height);return new cc.Vec2(n,o)},t.prototype.getUIDictBySeat=function(e){var t=e-1;if(0==this.array2v2HeadUI.length)for(var n in this.arrayNode2v2Head){var o=this.arrayNode2v2Head[n],a={Head:o.getChildByName("Head").getComponent(cc.Sprite),Sex:o.getChildByName("Sex").getComponent(cc.Sprite),LabName:o.getChildByName("LabName").getComponent(cc.Label),Spoken:o.getChildByName("Spoken").getComponent(cc.Sprite)};this.array2v2HeadUI.push(a)}return this.array2v2HeadUI[t]},t.prototype.refreshUI=function(){this.spriteMyBlood.fillRange=this._nMyBlood/p.default.Instance.maxBlood,this.spriteEnemyBlood.fillRange=this._nEnemyBlood/p.default.Instance.maxBlood,this.labTime.string=y.default.Instance.RemainTime.toString(),this.lab2v2Time.string=y.default.Instance.RemainTime.toString()},t.prototype.playResultTween=function(){if(this._nMyBlood>this._nEnemyBlood){this._nEnemyBlood,this._nEnemyBlood;I.default.Instance.play(c.C.RoleType.Enemy1,c.C.RoleAnimType.Die),I.default.Instance.play(c.C.RoleType.Me,c.C.RoleAnimType.Win),T.default.Instance.playSound(c.C.SoundType.Win),y.default.Instance.FightMode!=c.C.FightMode.TwoVsTwo&&y.default.Instance.FightMode!=c.C.FightMode.TwoVsOnlineAI||(I.default.Instance.play(c.C.RoleType.Enemy2,c.C.RoleAnimType.Die),I.default.Instance.play(c.C.RoleType.Friend,c.C.RoleAnimType.Win))}else if(this._nMyBlood<this._nEnemyBlood){this._nMyBlood,this._nMyBlood;T.default.Instance.playSound(c.C.SoundType.Fail),I.default.Instance.play(c.C.RoleType.Me,c.C.RoleAnimType.Die),I.default.Instance.play(c.C.RoleType.Enemy1,c.C.RoleAnimType.Win),y.default.Instance.FightMode!=c.C.FightMode.TwoVsTwo&&y.default.Instance.FightMode!=c.C.FightMode.TwoVsOnlineAI||(I.default.Instance.play(c.C.RoleType.Friend,c.C.RoleAnimType.Die),I.default.Instance.play(c.C.RoleType.Enemy2,c.C.RoleAnimType.Win))}},t.prototype.checkResultNew=function(){if(y.default.Instance.RemainTime<=0){var e=this;y.default.Instance.TouchSwitch=!1,a.default.Instance.clearSuggestion(),g.default.Instance.setScheduleOnce(function(){if(e.getOurAttackTotalCount()>e.getEnemyAttackTotalCount())if(m.default.Instance.isAliGame()){if(m.default.Instance.qqIsIOS()?2000008:m.default.Instance.qqIsAndroid()&&1000008,y.default.Instance.FightMode==c.C.FightMode.OneVsOne||y.default.Instance.FightMode==c.C.FightMode.OneVsOnlineAI||y.default.Instance.FightMode==c.C.FightMode.OneVsAI)(t={appId:"cwxcz"}).event="game."+t.appId,t.endTime=Date.now(),(n={}).accountname=y.default.Instance.PlayerInfos[0].nickName,n.accountId=y.default.Instance.PlayerInfos[0].openId,n.war_id=""+y.default.Instance.PlayerInfos[0].openId+y.default.Instance.PlayerInfos[1].openId+Date.now(),n.war_result="win",n.duration=Math.floor(Date.now()/1e3)-Math.floor(y.default.Instance.StartTime/1e3)+"",t.params=n,m.default.Instance.AliPostGameData({postType:c.C.QQPostDataType.SyncResult,result:t}),e.postResultData=t,null!=e.getResultData&&e.onSyncResult(null,e.getResultData),e.scheduleOnce(e.sureResult,.01),console.log("==============checkresult============",e.postResultData)}else r.default.Instance.show(c.C.UIName.UITipPanel,l.default.Instance.nodeTop,c.C.TipType.Win);else if(e.getOurAttackTotalCount()<e.getEnemyAttackTotalCount())if(m.default.Instance.isAliGame()){if(m.default.Instance.qqIsIOS()?2000008:m.default.Instance.qqIsAndroid()&&1000008,y.default.Instance.FightMode==c.C.FightMode.OneVsOne||y.default.Instance.FightMode==c.C.FightMode.OneVsOnlineAI||y.default.Instance.FightMode==c.C.FightMode.OneVsAI)(t={appId:"cwxcz"}).event="game."+t.appId,t.endTime=Date.now(),(n={}).accountname=y.default.Instance.PlayerInfos[0].nickName,n.accountId=y.default.Instance.PlayerInfos[0].openId,n.war_id=""+y.default.Instance.PlayerInfos[0].openId+y.default.Instance.PlayerInfos[1].openId+Date.now(),n.war_result="lose",n.duration=Math.floor(Date.now()/1e3)-Math.floor(y.default.Instance.StartTime/1e3)+"",t.params=n,m.default.Instance.AliPostGameData({postType:c.C.QQPostDataType.SyncResult,result:t}),e.postResultData=t,null!=e.getResultData&&e.onSyncResult(null,e.getResultData),e.scheduleOnce(e.sureResult,.01),console.log("==============checkresult============",e.postResultData)}else r.default.Instance.show(c.C.UIName.UITipPanel,l.default.Instance.nodeTop,c.C.TipType.Lose);else if(m.default.Instance.isAliGame()){var t,n;if(m.default.Instance.qqIsIOS()?2000008:m.default.Instance.qqIsAndroid()&&1000008,y.default.Instance.FightMode==c.C.FightMode.OneVsOne||y.default.Instance.FightMode==c.C.FightMode.OneVsOnlineAI||y.default.Instance.FightMode==c.C.FightMode.OneVsAI)(t={appId:"cwxcz"}).event="game."+t.appId,t.endTime=Date.now(),(n={}).accountname=y.default.Instance.PlayerInfos[0].nickName,n.accountId=y.default.Instance.PlayerInfos[0].openId,n.war_id=""+y.default.Instance.PlayerInfos[0].openId+y.default.Instance.PlayerInfos[1].openId+Date.now(),n.war_result="draw",n.duration=Math.floor(Date.now()/1e3)-Math.floor(y.default.Instance.StartTime/1e3)+"",t.params=n,m.default.Instance.AliPostGameData({postType:c.C.QQPostDataType.SyncResult,result:t}),e.postResultData=t,null!=e.getResultData&&e.onSyncResult(null,e.getResultData),e.scheduleOnce(e.sureResult,.01),console.log("==============checkresult============",e.postResultData)}else r.default.Instance.show(c.C.UIName.UITipPanel,l.default.Instance.nodeTop,c.C.TipType.DogFall)},.01),y.default.Instance.FightMode!=c.C.FightMode.OneVsAI&&y.default.Instance.FightMode!=c.C.FightMode.OneVsOnlineAI||h.default.Instance.stop(this),this.stopTimer()}},t.prototype.sureResult=function(){if(!this.hadResult){this.hadResult=!0,this.unscheduleAllCallbacks(),this.unschedule(this.sureResult),y.default.Instance.FightMode!=c.C.FightMode.OneVsAI&&y.default.Instance.FightMode!=c.C.FightMode.OneVsOnlineAI||h.default.Instance.stop(this),this.stopTimer(),y.default.Instance.IsBloodTween=!1,T.default.Instance.stopMusic(c.C.MusicType.MainBg),this.unschedule(this.toFight);var e=JSON.parse(JSON.stringify(this.postResultData));console.log("==========sureResult===========",Date.now()),b.default.Instance.qqGameResult(e)}},t.prototype.onGameOver=function(){this.unscheduleAllCallbacks(),this.unschedule(this.sureResult),y.default.Instance.FightMode!=c.C.FightMode.OneVsAI&&y.default.Instance.FightMode!=c.C.FightMode.OneVsOnlineAI||h.default.Instance.stop(this),this.stopTimer(),y.default.Instance.IsBloodTween=!1,T.default.Instance.stopMusic(c.C.MusicType.MainBg),T.default.Instance.stopMusic(c.C.MusicType.BattleBg),this.unschedule(this.toFight)},t.prototype.checkOneRound=function(){y.default.Instance.GameMode==c.C.GameMode.OneRoundInstantMode?this.checkResultNew():y.default.Instance.GameMode==c.C.GameMode.ThreeRoundRoundMode&&(this._nRound>=3?this.checkResultNew():(this._nRound++,y.default.Instance.Round=this._nRound,this._nEnemyBlood<=0||this._nMyBlood<=0?this.checkResultNew():this.nextRound())),y.default.Instance.IsBloodTween=!1},t.prototype.startTimer=function(){var e=this,t=y.default.Instance.OneRoundTime+600;this._timerCallback=function(){y.default.Instance.RemainTime--,e.labTime.string=y.default.Instance.RemainTime.toString(),e.lab2v2Time.string=y.default.Instance.RemainTime.toString(),y.default.Instance.RemainTime<=4&&T.default.Instance.playSound(c.C.SoundType.CountDown),y.default.Instance.RemainTime<=0&&e.onTimeOut()},y.default.Instance.StartTime=Date.now(),this.schedule(this._timerCallback,1,t,0)},t.prototype.stopTimer=function(){this._timerCallback&&this.unschedule(this._timerCallback)},t.prototype.nextRound=function(){cc.log("\u56de\u5408"+this._nRound),a.default.Instance.clearSuggestion();var e=this;this.showRound(function(){y.default.Instance.Ink&&(e.unschedule(e.changeAllCubeToTypeColor),e.changeAllCubeToTypeColor()),a.default.Instance.reCreate(),e.getResultData&&e._nRound<=3?y.default.Instance.RemainTime=1:y.default.Instance.RemainTime=y.default.Instance.OneRoundTime;for(var t=0;t<c.C.RoleType.Length;t++)e.setATKCount(null,t,0);e.refreshUI(),y.default.Instance.FightMode!=c.C.FightMode.OneVsAI&&y.default.Instance.FightMode!=c.C.FightMode.OneVsOnlineAI&&y.default.Instance.FightMode!=c.C.FightMode.TwoVsOnlineAI||h.default.Instance.start(e),y.default.Instance.TouchSwitch=!0,e.startTimer()})},t.prototype.showRound=function(e){if(1==this._nRound)return null==this._animReadyGo?(this._animReadyGo=cc.instantiate(f.default.Instance.loadOther(c.C.OtherName.ReadyGo)).getComponent(cc.Animation),this._animReadyGo.node.parent=this.node):this._animReadyGo.play(),T.default.Instance.playSound(c.C.SoundType.Ready),void g.default.Instance.setScheduleOnce(function(){T.default.Instance.playSound(c.C.SoundType.Go),e&&e()},1.2);this.labRound.spriteFrame=f.default.Instance.loadSpriteFrame("Round"+this._nRound.toString()),this.lab2v2Round.spriteFrame=f.default.Instance.loadSpriteFrame("Round"+this._nRound.toString()),r.default.Instance.show(c.C.UIName.UITipPanel,l.default.Instance.nodeTop,c.C.TipType.Round,this._nRound);var t=this;g.default.Instance.setScheduleOnce(function(){r.default.Instance.show(c.C.UIName.UITipPanel,l.default.Instance.nodeTop,c.C.TipType.Start),g.default.Instance.setScheduleOnce(function(){r.default.Instance.close(c.C.UIName.UITipPanel)},1),e&&e(),cc.log(t.nodeDoubleAttackCube.getComponent(cc.Sprite).spriteFrame.name)},1)},t.prototype.statistics=function(e){r.default.Instance.show(c.C.UIName.UITipPanel,l.default.Instance.nodeTop,c.C.TipType.Statistics);y.default.Instance.IsStatistics=!0,b.default.Instance.qqPostGameData({postType:c.C.QQPostDataType.Statistics}),this.statisticsNum+=1,this.startStatisticsTime=Date.now(),this.statisticsNum>=y.default.Instance.PlayerInfos.length?(y.default.Instance.IsStatistics=!1,this.scheduleOnce(e,2)):(this.unschedule(e),this.scheduleOnce(e,4))},t.prototype.fight=function(e){this._myAniBlood=this._nMyBlood,this._enemyAniBlood=this._nEnemyBlood,this._nMyBlood=this._nMyBlood-this._listATKCount[c.C.RoleType.Enemy1]-this._listATKCount[c.C.RoleType.Enemy2],this._nEnemyBlood=this._nEnemyBlood-this._listATKCount[c.C.RoleType.Me]-this._listATKCount[c.C.RoleType.Friend],T.default.Instance.playSound(c.C.SoundType.CrushToBattle),T.default.Instance.playMusic(c.C.MusicType.BattleBg),this._cbBloodTweenComplete=e,this._bBloodTween=!0,y.default.Instance.IsAttackStage=!0,y.default.Instance.IsBloodTween=!0,r.default.Instance.show(c.C.UIName.UITipPanel,l.default.Instance.nodeTop,c.C.TipType.Fight)},t.prototype.isFightMode=function(e){return 1==e?y.default.Instance.FightMode==c.C.FightMode.OneVsOne||y.default.Instance.FightMode==c.C.FightMode.OneVsOnlineAI:2==e?y.default.Instance.FightMode==c.C.FightMode.TwoVsOnlineAI||y.default.Instance.FightMode==c.C.FightMode.TwoVsTwo:void 0},t.prototype.setATKCount=function(e,t,n){if(this._listATKCount[t]<n&&(y.default.Instance.GameMode==c.C.GameMode.OneRoundInstantMode?t!=c.C.RoleType.Friend&&t!=c.C.RoleType.Me||s.default.scaleBigAndNormal(this.labMyTeam.node,.5,2,2):s.default.scaleBigAndNormal(this.listLabATK[t].node,.5,2,2)),this._listATKCount[t]=n,y.default.Instance.ListDamage[t]=n,this.listLabATK[t].string=Math.floor(this._listATKCount[t]).toString(),y.default.Instance.GameMode==c.C.GameMode.OneRoundInstantMode){this.labEnemyTeam.string=this.getEnemyAttackTotalCount()+"",this.labMyTeam.string=this.getOurAttackTotalCount()+"";var o=this.getOurAttackTotalCount();this._nEnemyBlood=p.default.Instance.maxBlood-o,y.default.Instance.EnemyBlood=this._nEnemyBlood;var a=(p.default.Instance.maxBlood-o)/p.default.Instance.maxBlood,i=this.getEnemyAttackTotalCount(),r=(p.default.Instance.maxBlood-i)/p.default.Instance.maxBlood;this._nMyBlood=p.default.Instance.maxBlood-i,y.default.Instance.MyBlood=this._nMyBlood,this.spScoreFillL.fillRange=a>1?1:a,this.spScoreFillR.fillRange=r>1?1:r}},t.prototype.getOurAttackTotalCount=function(){return this._listATKTotalCount[c.C.RoleType.Me]+this._listATKTotalCount[c.C.RoleType.Friend]},t.prototype.getEnemyAttackTotalCount=function(){return this._listATKTotalCount[c.C.RoleType.Enemy1]+this._listATKTotalCount[c.C.RoleType.Enemy2]},t.prototype.setBlood=function(e,t,n){!(y.default.Instance.FightMode!=c.C.FightMode.OneVsOne&&y.default.Instance.FightMode!=c.C.FightMode.OneVsOnlineAI||0!=this._nMyBlood&&0!=this._nEnemyBlood||1!=this._nRound)&&y.default.Instance.RemainTime>y.default.Instance.OneRoundTime-1||(t==c.C.RoleType.Me||t==c.C.RoleType.Friend?(this._nMyBlood=n,this._nMyBlood>p.default.Instance.maxBlood&&(this._nMyBlood=p.default.Instance.maxBlood),y.default.Instance.MyBlood=this._nMyBlood,this.spriteMyBlood.fillRange=this._nMyBlood/p.default.Instance.maxBlood):t!=c.C.RoleType.Enemy1&&t!=c.C.RoleType.Enemy2||(this._nEnemyBlood=n,this._nEnemyBlood>p.default.Instance.maxBlood&&(this._nEnemyBlood=p.default.Instance.maxBlood),y.default.Instance.EnemyBlood=this._nEnemyBlood,this.spriteEnemyBlood.fillRange=this._nEnemyBlood/p.default.Instance.maxBlood))},t.prototype.changeAllCubeToTypeColor=function(){y.default.Instance.Ink&&(a.default.Instance.changeAllCubeToTypeColor(),y.default.Instance.Ink=!1)},t.prototype.stopSuggestion=function(){this._bSuggestion&&a.default.Instance.stopSuggestionTween(),this._bSuggestion=!1,this._nTimeStay=0},t.prototype.playInkAnim=function(e){var t=this;g.default.Instance.setScheduleOnce(function(){var n=cc.instantiate(f.default.Instance.loadSequenceFrame(c.C.SequenceFrameName.SFWater));n.scale=1.5,n.parent=t.nodeTopControlContainer,n.setPosition(e.x,e.y+45)},.3)},t.prototype.playUFOAnim=function(e){_.default.Instance.playEffect(c.C.EffectName.feidie,new cc.Vec2(e.x,e.y+40),1,this.nodeTopControlContainer)},t.prototype.playRedHeartAnim=function(e){_.default.Instance.playEffect(c.C.EffectName.hongxin,e,1,this.nodeTopControlContainer)},t.prototype.directCompleteBloodTween=function(e){void 0===e&&(e=c.C.RoleType.Length);for(var t=0;t<c.C.RoleType.Length;t++)this._listATKCount[t]=0,y.default.Instance.ListDamage[t]=0,this._listIsBloodTweenComplete[t]=!0;if(this._bCanPlaySkill=!1,this._b2V2CanPlaySkill=!1,e<c.C.RoleType.Length)for(t=0;t<c.C.RoleType.Length;t++)I.default.Instance.stopATKAnim(t),I.default.Instance.stopATKAnim(t,c.C.AttackType.Attack2);this._nRound<3&&e==c.C.RoleType.Length&&(this._nMyBlood>this._nEnemyBlood?(I.default.Instance.play(c.C.RoleType.Me,c.C.RoleAnimType.Idle),I.default.Instance.play(c.C.RoleType.Enemy1,c.C.RoleAnimType.Idle2),y.default.Instance.FightMode!=c.C.FightMode.TwoVsTwo&&y.default.Instance.FightMode!=c.C.FightMode.TwoVsOnlineAI||(I.default.Instance.play(c.C.RoleType.Enemy2,c.C.RoleAnimType.Idle2),I.default.Instance.play(c.C.RoleType.Friend,c.C.RoleAnimType.Idle))):this._nMyBlood<this._nEnemyBlood&&(I.default.Instance.play(c.C.RoleType.Me,c.C.RoleAnimType.Idle2),I.default.Instance.play(c.C.RoleType.Enemy1,c.C.RoleAnimType.Idle),y.default.Instance.FightMode!=c.C.FightMode.TwoVsTwo&&y.default.Instance.FightMode!=c.C.FightMode.TwoVsOnlineAI||(I.default.Instance.play(c.C.RoleType.Enemy2,c.C.RoleAnimType.Idle),I.default.Instance.play(c.C.RoleType.Friend,c.C.RoleAnimType.Idle2))))},t.prototype.setColor=function(e,t){e==c.C.RoleType.Me?t==c.C.ColorType.Blue?(this.sprMyHeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgBlue),this.sprMyNameBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.NameBgBlue),this.sprMyHeadBg.node.scaleX=1,this.sp2v2MyLink.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.LinkBlue),this.sp2v2MyHeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgBlue),this.sp2v2MyFriendHeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgBlue),this.sp2v2MyMiddleBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.NameBgBlue2v2),this.spScoreDamageL.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.ScoreBlue),this.spScoreDamageL.node.scaleX=1,this.spScoreDamageR.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.ScoreRed),this.spScoreDamageL.node.scaleX=1):(this.sprMyHeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgRed),this.sprMyNameBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.NameBgRed),this.sprMyHeadBg.node.scaleX=-1,this.sp2v2MyLink.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.LinkRed),this.sp2v2MyHeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgRed),this.sp2v2MyFriendHeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgRed),this.sp2v2MyMiddleBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.NameBgRed2v2),this.spScoreDamageL.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.ScoreRed),this.spScoreDamageL.node.scaleX=-1,this.spScoreDamageR.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.ScoreBlue),this.spScoreDamageR.node.scaleX=-1):t==c.C.ColorType.Blue?(this.sprEnemyHeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgBlue),this.sprEnemyNameBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.NameBgBlue),this.sp2v2EnemyLink.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.LinkBlue),this.sprEnemyHeadBg.node.scaleX=-1,this.sp2v2Enemy1HeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgBlue),this.sp2v2Enemy2HeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgBlue),this.sp2v2EnemyMiddleBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.NameBgBlue2v2),this.spScoreDamageL.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.ScoreRed),this.spScoreDamageL.node.scaleX=-1,this.spScoreDamageR.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.ScoreBlue),this.spScoreDamageR.node.scaleX=-1):(this.sprEnemyHeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgRed),this.sprEnemyNameBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.NameBgRed),this.sp2v2EnemyLink.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.LinkRed),this.sprEnemyHeadBg.node.scaleX=1,this.sp2v2Enemy1HeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgRed),this.sp2v2Enemy2HeadBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.HeadBgRed),this.sp2v2EnemyMiddleBg.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.NameBgRed2v2),this.spScoreDamageL.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.ScoreBlue),this.spScoreDamageL.node.scaleX=1,this.spScoreDamageR.spriteFrame=f.default.Instance.loadSpriteFrame(c.C.TextureName.ScoreRed),this.spScoreDamageR.node.scaleX=1)},t.prototype.SetSelfAdaption=function(e){var t=this.sprTopBg.node.getContentSize(),n=this.sprBottomBg.node.getContentSize();this.sprBottomBg.node.setContentSize(n.width,n.height+e/2),this.sprTopBg.node.setContentSize(t.width,t.height+e/2)},t.prototype.onQQGameVoice=function(e,t){if(t&&t.statusList&&y.default.Instance.PlayerInfos[0])for(var n=0;n<2;n++){var o=t.statusList[n];o.openId==y.default.Instance.PlayerInfos[0].openId?(this.sprMyUnSpoken.node.active=!o.micStatus,this.sprMySpoken.node.active=o.micStatus):(this.sprEnemyUnSpoken.node.active=!o.micStatus,this.sprEnemySpoken.node.active=o.micStatus)}},t.prototype.onSetColor=function(e,t){this.setColor(c.C.RoleType.Me,t[1]),this.setColor(c.C.RoleType.Enemy1,t[0])},t.prototype.onRefreshUI=function(){y.default.Instance.FightMode==c.C.FightMode.OneVsOne||y.default.Instance.FightMode==c.C.FightMode.OneVsAI||y.default.Instance.FightMode==c.C.FightMode.OneVsOnlineAI?(this.nodeHeadContainer1v1.active=!0,this.nodeHeadContainer2v2.active=!1,this.listLabATK[c.C.RoleType.Friend].node.parent.active=!1):y.default.Instance.FightMode!=c.C.FightMode.TwoVsTwo&&y.default.Instance.FightMode!=c.C.FightMode.TwoVsOnlineAI||(this.nodeHeadContainer1v1.active=!1,this.nodeHeadContainer2v2.active=!0,this.listLabATK[c.C.RoleType.Friend].node.parent.active=!0)},t.prototype.onClickBtnBack=function(){r.default.Instance.show(c.C.UIName.UIMessageBoxPanel,l.default.Instance.nodeTop,"Hello World"),a.default.Instance.reCreate()},t.prototype.onCubeCtlTouchStart=function(e){if(y.default.Instance.TouchSwitch){this.stopSuggestion();var t=e.touch.getLocation(),n=this.posToIndex(t),s=a.default.Instance.getCubeNode(n.x,n.y);if(null!=s)if(s.getComponent(o.default).getCubeState()!=c.C.CubeState.Tween)if(this._nodeFirstSelectCube){if(!this._nodeSecondSelectCube){var i=s;this._nodeFirstSelectCube==i?(this._nodeSecondSelectCube=null,cc.log("onCubeCtlTouchStart-------------------\u70b9\u51fb\u4e24\u4e2a\u76f8\u540c\u7684")):(cc.log("onCubeCtlTouchStart-------------------\u8bbe\u7f6e\u7b2c\u4e8c\u4e2a\u65b9\u5757"),this._nodeSecondSelectCube=s,this.check(this._nodeFirstSelectCube.getComponent(o.default),this._nodeSecondSelectCube.getComponent(o.default)))}}else cc.log("onCubeCtlTouchStart-------------------\u8bbe\u7f6e\u7b2c\u4e00\u4e2a\u65b9\u5757"),this._nodeFirstSelectCube=s,this.enableSelectorTween(this._nodeFirstSelectCube,!0)}},t.prototype.onCubeCtlTouchMove=function(e){if(cc.log("onCubeCtlTouchMove==========================="),y.default.Instance.TouchSwitch&&(this.stopSuggestion(),this._nodeFirstSelectCube&&!this._nodeSecondSelectCube)){cc.log("---------------");var t=e.touch.getLocation(),n=this.posToIndex(t),s=a.default.Instance.getCubeNode(n.x,n.y);if(s){if(s.getComponent(o.default).getCubeState()==c.C.CubeState.Tween)return void cc.log("\u6b63\u5728\u52a8\u753b---------------");cc.log("\u6ca1\u6709\u64ad\u52a8\u753b================"),this._nodeFirstSelectCube!=s&&(this._nodeSecondSelectCube=s,cc.log(this._nodeFirstSelectCube.getComponent(o.default).getCubeInfo().cubeIndexPos),cc.log(s.getComponent(o.default).getCubeInfo().cubeIndexPos),cc.log("onCubeCtlTouchMove===========================\u8bbe\u7f6e\u7b2c\u4e8c\u4e2a\u65b9\u5757"),this.check(this._nodeFirstSelectCube.getComponent(o.default),this._nodeSecondSelectCube.getComponent(o.default)),cc.log("check after --- ",this._nodeFirstSelectCube.getComponent(o.default).getCubeInfo().cubeIndexPos))}}},t.prototype.onCubeCtlTouchEnd=function(e){cc.log("onCubeCtlTouchEnd++++++++++++++++++++++++++"),y.default.Instance.TouchSwitch&&(this.stopSuggestion(),this._nodeFirstSelectCube&&this._nodeSecondSelectCube&&(""!=this._nodeFirstSelectCube.name&&this.enableSelectorTween(this._nodeFirstSelectCube,!1),""!=this._nodeSecondSelectCube.name&&this.enableSelectorTween(this._nodeSecondSelectCube,!1),cc.log("\u6e05\u7a7a"),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null))},t.prototype.onCubeCtlTouchCancel=function(e){cc.log("onCubeCtlTouchCancel~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),y.default.Instance.TouchSwitch&&(this.stopSuggestion(),this._nodeFirstSelectCube&&this._nodeSecondSelectCube&&(this.enableSelectorTween(this._nodeFirstSelectCube,!1),this.enableSelectorTween(this._nodeSecondSelectCube,!1),cc.log("\u6e05\u7a7a"),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null))},t.prototype.onPreLoadComplete=function(){console.log("!!!!!!!!!!!!!!!!onPreLoadComplete"),a.default.Instance.init(this.nodeCrushTailPoint,this.nodeCrushTailContainer,this.nodeCubeCtl,f.default.Instance.loadOther(c.C.OtherName.Cube),new cc.Size(y.default.Instance.row,y.default.Instance.col)),a.default.Instance.preLoad(),_.default.Instance.preLoad(),d.default.Instance.send(c.C.MsgType.InitCube),m.default.Instance.isAliGame()||this.startGame()},t.prototype.onRestart=function(){this.restart()},t.prototype.onTimeOut=function(){y.default.Instance.TouchSwitch=!1,y.default.Instance.FightMode!=c.C.FightMode.OneVsAI&&y.default.Instance.FightMode!=c.C.FightMode.OneVsOnlineAI||h.default.Instance.stop(this),this.stopTimer(),this.nodeDoubleAttackCube.active=!1,r.default.Instance.show(c.C.UIName.UITipPanel,l.default.Instance.nodeTop,c.C.TipType.TimeOut);var e=this;if(a.default.Instance.checkAnyCubeIsTween()||y.default.Instance.WaitForEffect||y.default.Instance.WaitForT1)g.default.Instance.setScheduleOnce(function(){e.onTimeOut()},1);else{r.default.Instance.hide(c.C.UIName.UITipPanel),a.default.Instance.playAllCubeDownTween(function(){}),e.checkResultNew()}},t.prototype.toFight=function(){var e=this;y.default.Instance.IsStatistics=!1,this.fight(function(){T.default.Instance.playMusic(c.C.MusicType.MainBg),e.statisticsNum=0,e._nRound<3?(T.default.Instance.playSound(c.C.SoundType.BattleToCrush),e.scheduleOnce(e.checkOneRound,.1)):e.checkOneRound()})},t.prototype.onATKEnemy=function(e,t){if(b.default.Instance.qqPostGameData({postType:c.C.QQPostDataType.Damage,damage:t}),y.default.Instance.GameMode==c.C.GameMode.OneRoundInstantMode){this._nEnemyBlood-=t,y.default.Instance.EnemyBlood=this._nEnemyBlood;this._nInitBloodSizeX,this._nEnemyBlood,p.default.Instance.maxBlood;this.spriteEnemyBlood.fillRange=this._nEnemyBlood/p.default.Instance.maxBlood,this._listATKTotalCount[c.C.RoleType.Me]+=t,this.setATKCount(null,c.C.RoleType.Me,this._listATKCount[c.C.RoleType.Me]+t),this._nEnemyBlood}else this._listATKTotalCount[c.C.RoleType.Me]+=t,this.setATKCount(null,c.C.RoleType.Me,this._listATKCount[c.C.RoleType.Me]+t)},t.prototype.onATKed=function(e,t,n){y.default.Instance.GameMode==c.C.GameMode.OneRoundInstantMode?(t!=c.C.RoleType.Friend&&t!=c.C.RoleType.Me&&(this._nMyBlood-=n,y.default.Instance.MyBlood=this._nMyBlood,this.spriteMyBlood.fillRange=this._nMyBlood/p.default.Instance.maxBlood),this._listATKTotalCount[t]+=n,this.setATKCount(null,t,this._listATKCount[t]+n),this._nMyBlood<=0||this._nEnemyBlood):(this._listATKTotalCount[t]+=n,this.setATKCount(null,t,this._listATKCount[t]+n))},t.prototype.onSetDoubleAttackCube=function(e,t){y.default.Instance.DoubleAttackCubeType=t,this.nodeDoubleAttackCube.active=!0,this.nodeDoubleAttackCube.getComponent(cc.Sprite).spriteFrame=f.default.Instance.loadSpriteFrame("cube_"+y.default.Instance.DoubleAttackCubeType)},t.prototype.onUseStarCube=function(e,t){a.default.Instance.destroyStarCube(a.default.Instance.getCubeItem(t.x,t.y),function(){a.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onUseBombCube=function(e,t){a.default.Instance.destroyNinePlaceCube(a.default.Instance.getCubeItem(t.x,t.y),function(){a.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onUseLightningRow=function(e,t){a.default.Instance.destroyOneRowCube(a.default.Instance.getCubeItem(t.x,t.y),function(){a.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onUseLightningLine=function(e,t){a.default.Instance.destroyOneLineCube(a.default.Instance.getCubeItem(t.x,t.y),function(){a.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onDestroySameColorCube=function(e,t,n){a.default.Instance.destroySameColorCube(t,a.default.Instance.getCubeItem(n.x,n.y),function(){a.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onGetRedHeart=function(e,t){this.setBlood(null,c.C.RoleType.Me,this._nMyBlood+a.default.Instance.redHeartRestoreBlood),a.default.Instance.destroyOneCube(a.default.Instance.getCubeItem(t.x,t.y)),this.playRedHeartAnim(this.listNodeRole[c.C.RoleType.Me].getPosition())},t.prototype.onSetEnemyRedHeart=function(e,t){this.setBlood(null,t,this._nMyBlood+a.default.Instance.redHeartRestoreBlood),this.playRedHeartAnim(this.listNodeRole[c.C.RoleType.Enemy1].getPosition())},t.prototype.onSetCubeInk=function(e,t){t==c.C.RoleType.Me&&(y.default.Instance.Ink&&(this.unschedule(this.changeAllCubeToTypeColor),this.changeAllCubeToTypeColor()),y.default.Instance.InkSwitch?a.default.Instance.changeAllCubeToInkColor():a.default.Instance.randomCubeAddWater(),y.default.Instance.Ink=!0,this.schedule(this.changeAllCubeToTypeColor,0,0,a.default.Instance.inkTime),this.playInkAnim(this.listNodeRole[c.C.RoleType.Me].getPosition()),T.default.Instance.playSound(c.C.SoundType.Water)),I.default.Instance.play(t,c.C.RoleAnimType.UseWater)},t.prototype.onGetTelescope=function(e,t){a.default.Instance.destroyOneCube(a.default.Instance.getCubeItem(t.x,t.y));for(var n=a.default.Instance.getAllCanProcessCube(),o=0;o<n.length;o++)n[o].playScaleBigAndSmallTween();I.default.Instance.play(c.C.RoleType.Me,c.C.RoleAnimType.UseTelescope),b.default.Instance.qqPostGameData({postType:c.C.QQPostDataType.Telescope}),T.default.Instance.playSound(c.C.SoundType.Telescope)},t.prototype.onSetUFO=function(e,t){if(t==c.C.RoleType.Me){for(var n=C.default.getRandomValueDif(0,63,9),o=0;o<n.length;o++){var s=Math.floor(n[o]/a.default.Instance.indexSize.width),i=n[o]%a.default.Instance.indexSize.width;a.default.Instance.changeToUFO(s,i)}var r=this;g.default.Instance.setScheduleOnce(function(){var e=r.listNodeRole[t].getPosition();r.playUFOAnim(new cc.Vec2(e.x-20,e.y))},.4),T.default.Instance.playSound(c.C.SoundType.UFO)}I.default.Instance.play(t,c.C.RoleAnimType.UseUFO)},t.prototype.onPlayUFOAnim=function(){var e=this;g.default.Instance.setScheduleOnce(function(){var t=e.listNodeRole[c.C.RoleType.Enemy1].getPosition();e.playUFOAnim(new cc.Vec2(t.x+20,t.y))},.4),I.default.Instance.play(c.C.RoleType.Enemy1,c.C.RoleAnimType.UseUFO),T.default.Instance.playSound(c.C.SoundType.UFO)},t.prototype.onPlayTelescopeAnim=function(e,t){I.default.Instance.play(t,c.C.RoleAnimType.UseTelescope),T.default.Instance.playSound(c.C.SoundType.Telescope)},t.prototype.onPlayRedHeartAnim=function(){},t.prototype.onPlayInkAnim=function(){this.playInkAnim(this.listNodeRole[c.C.RoleType.Enemy1].getPosition()),I.default.Instance.play(c.C.RoleType.Enemy1,c.C.RoleAnimType.UseWater),T.default.Instance.playSound(c.C.SoundType.Water)},t.prototype.onSyncRound=function(e,t){this._nRound=t,this.labRound.spriteFrame=f.default.Instance.loadSpriteFrame("Round"+this._nRound.toString()),this.lab2v2Round.spriteFrame=f.default.Instance.loadSpriteFrame("Round"+this._nRound.toString())},t.prototype.onLoad=function(){this.SetSelfAdaption(cc.director.getWinSize().height-1280),y.default.Instance.nodeEffectContainer=this.nodeEffectContainer,_.default.Instance.init(this.nodeEffectContainer),I.default.Instance.init2V2(this.listNodeRole,this.nodeTopControlContainer,this.nodeTopBehindControlContainer,this.nodeTopControl2v2Container),S.default.Instance.init(this.nodeTextContainer)},t.prototype.start=function(){this.refreshUI()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this)},t.prototype.update=function(e){if(this._bBloodTween){if(this._listATKCount[c.C.RoleType.Me]>0?(this._listIsBloodTweenComplete[c.C.RoleType.Me]?this._listATKCount[c.C.RoleType.Me]-=e*this._nBloodTweenSpeed*2:this._listATKCount[c.C.RoleType.Me]-=e*this._nBloodTweenSpeed,this._listATKCount[c.C.RoleType.Me]<0&&(this._listATKCount[c.C.RoleType.Me]=0),this.setATKCount(null,c.C.RoleType.Me,this._listATKCount[c.C.RoleType.Me]),this._listIsBloodTweenComplete[c.C.RoleType.Me]?this._enemyAniBlood-=e*this._nBloodTweenSpeed*2:this._enemyAniBlood-=e*this._nBloodTweenSpeed,y.default.Instance.EnemyBlood=this._nEnemyBlood,y.default.Instance.ListDamage[c.C.RoleType.Me]=this._listATKCount[c.C.RoleType.Me],this._listIsBloodTweenComplete[c.C.RoleType.Me]&&this._bCanPlaySkill?I.default.Instance.playATKAnim(c.C.RoleType.Me,c.C.AttackType.Attack2):I.default.Instance.playATKAnim(c.C.RoleType.Me),this._enemyAniBlood<0&&(this._enemyAniBlood=0,this.directCompleteBloodTween(c.C.RoleType.Enemy1))):(this._listIsBloodTweenComplete[c.C.RoleType.Enemy1]=!0,this._listATKCount[c.C.RoleType.Enemy1]>50&&(this._bCanPlaySkill=!0),this._listIsBloodTweenComplete[c.C.RoleType.Me]?I.default.Instance.stopATKAnim(c.C.RoleType.Me,c.C.AttackType.Attack2):I.default.Instance.stopATKAnim(c.C.RoleType.Me)),this._listATKCount[c.C.RoleType.Enemy1]>0?(this._listIsBloodTweenComplete[c.C.RoleType.Enemy1]?this._listATKCount[c.C.RoleType.Enemy1]-=e*this._nBloodTweenSpeed*2:this._listATKCount[c.C.RoleType.Enemy1]-=e*this._nBloodTweenSpeed,this._listATKCount[c.C.RoleType.Enemy1]<0&&(this._listATKCount[c.C.RoleType.Enemy1]=0),this.setATKCount(null,c.C.RoleType.Enemy1,this._listATKCount[c.C.RoleType.Enemy1]),this._listIsBloodTweenComplete[c.C.RoleType.Enemy1]?this._myAniBlood-=e*this._nBloodTweenSpeed*2:this._myAniBlood-=e*this._nBloodTweenSpeed,y.default.Instance.MyBlood=this._nMyBlood,y.default.Instance.ListDamage[c.C.RoleType.Enemy1]=this._listATKCount[c.C.RoleType.Enemy1],this._listIsBloodTweenComplete[c.C.RoleType.Enemy1]&&this._bCanPlaySkill?I.default.Instance.playATKAnim(c.C.RoleType.Enemy1,c.C.AttackType.Attack2):I.default.Instance.playATKAnim(c.C.RoleType.Enemy1),this._myAniBlood<0&&(this._myAniBlood=0,this.directCompleteBloodTween(c.C.RoleType.Me))):(this._listIsBloodTweenComplete[c.C.RoleType.Me]=!0,this._listATKCount[c.C.RoleType.Me]>50&&(this._bCanPlaySkill=!0),this._listIsBloodTweenComplete[c.C.RoleType.Enemy1]?I.default.Instance.stopATKAnim(c.C.RoleType.Enemy1,c.C.AttackType.Attack2):I.default.Instance.stopATKAnim(c.C.RoleType.Enemy1)),y.default.Instance.FightMode!=c.C.FightMode.TwoVsOnlineAI&&y.default.Instance.FightMode!=c.C.FightMode.TwoVsTwo||(this._listATKCount[c.C.RoleType.Friend]>0?(this._listIsBloodTweenComplete[c.C.RoleType.Friend]?this._listATKCount[c.C.RoleType.Friend]-=e*this._nBloodTweenSpeed*2:this._listATKCount[c.C.RoleType.Friend]-=e*this._nBloodTweenSpeed,this._listATKCount[c.C.RoleType.Friend]<0&&(this._listATKCount[c.C.RoleType.Friend]=0),this.setATKCount(null,c.C.RoleType.Friend,this._listATKCount[c.C.RoleType.Friend]),this._listIsBloodTweenComplete[c.C.RoleType.Friend]?this._enemyAniBlood-=e*this._nBloodTweenSpeed*2:this._enemyAniBlood-=e*this._nBloodTweenSpeed,y.default.Instance.EnemyBlood=this._nEnemyBlood,y.default.Instance.ListDamage[c.C.RoleType.Friend]=this._listATKCount[c.C.RoleType.Friend],this._listIsBloodTweenComplete[c.C.RoleType.Friend]&&this._b2V2CanPlaySkill?I.default.Instance.playATKAnim(c.C.RoleType.Friend,c.C.AttackType.Attack2):I.default.Instance.playATKAnim(c.C.RoleType.Friend),this._enemyAniBlood<0&&(this._enemyAniBlood=0,this.directCompleteBloodTween(c.C.RoleType.Enemy2))):(this._listIsBloodTweenComplete[c.C.RoleType.Enemy2]=!0,this._listATKCount[c.C.RoleType.Enemy2]>50&&(this._b2V2CanPlaySkill=!0),this._listIsBloodTweenComplete[c.C.RoleType.Friend]?I.default.Instance.stopATKAnim(c.C.RoleType.Friend,c.C.AttackType.Attack2):I.default.Instance.stopATKAnim(c.C.RoleType.Friend)),this._listATKCount[c.C.RoleType.Enemy2]>0?(this._listIsBloodTweenComplete[c.C.RoleType.Enemy2]?this._listATKCount[c.C.RoleType.Enemy2]-=e*this._nBloodTweenSpeed*2:this._listATKCount[c.C.RoleType.Enemy2]-=e*this._nBloodTweenSpeed,this._listATKCount[c.C.RoleType.Enemy2]<0&&(this._listATKCount[c.C.RoleType.Enemy2]=0),this.setATKCount(null,c.C.RoleType.Enemy2,this._listATKCount[c.C.RoleType.Enemy2]),this._listIsBloodTweenComplete[c.C.RoleType.Enemy2]?this._myAniBlood-=e*this._nBloodTweenSpeed*2:this._myAniBlood-=e*this._nBloodTweenSpeed,y.default.Instance.MyBlood=this._nMyBlood,y.default.Instance.ListDamage[c.C.RoleType.Enemy2]=this._listATKCount[c.C.RoleType.Enemy2],this._listIsBloodTweenComplete[c.C.RoleType.Enemy2]&&this._b2V2CanPlaySkill?I.default.Instance.playATKAnim(c.C.RoleType.Enemy2,c.C.AttackType.Attack2):I.default.Instance.playATKAnim(c.C.RoleType.Enemy2),this._myAniBlood<0&&(this._myAniBlood=0,this.directCompleteBloodTween(c.C.RoleType.Friend))):(this._listIsBloodTweenComplete[c.C.RoleType.Friend]=!0,this._listATKCount[c.C.RoleType.Friend]>50&&(this._b2V2CanPlaySkill=!0),this._listIsBloodTweenComplete[c.C.RoleType.Enemy2]?I.default.Instance.stopATKAnim(c.C.RoleType.Enemy2,c.C.AttackType.Attack2):I.default.Instance.stopATKAnim(c.C.RoleType.Enemy2))),y.default.Instance.FightMode==c.C.FightMode.OneVsAI||y.default.Instance.FightMode==c.C.FightMode.OneVsOne||y.default.Instance.FightMode==c.C.FightMode.OneVsOnlineAI){if(this._listIsBloodTweenComplete[c.C.RoleType.Me]&&this._listIsBloodTweenComplete[c.C.RoleType.Enemy1])return this._bBloodTween=!1,y.default.Instance.IsAttackStage=!1,this.directCompleteBloodTween(),this._listIsBloodTweenComplete[c.C.RoleType.Me]=!1,this._listIsBloodTweenComplete[c.C.RoleType.Enemy1]=!1,void(this._cbBloodTweenComplete&&(this._cbBloodTweenComplete(),this._cbBloodTweenComplete=null))}else if((y.default.Instance.FightMode==c.C.FightMode.TwoVsOnlineAI||y.default.Instance.FightMode==c.C.FightMode.TwoVsTwo)&&this._listIsBloodTweenComplete[c.C.RoleType.Me]&&this._listIsBloodTweenComplete[c.C.RoleType.Enemy1]&&this._listIsBloodTweenComplete[c.C.RoleType.Friend]&&this._listIsBloodTweenComplete[c.C.RoleType.Enemy2]){this._bBloodTween=!1,y.default.Instance.IsAttackStage=!1,this.directCompleteBloodTween();for(var t=0;t<c.C.RoleType.Length;t++)this._listIsBloodTweenComplete[t]=!1;return void(this._cbBloodTweenComplete&&(this._cbBloodTweenComplete(),this._cbBloodTweenComplete=null))}this.spriteMyBlood.fillRange=this._myAniBlood/p.default.Instance.maxBlood,this.spriteEnemyBlood.fillRange=this._enemyAniBlood/p.default.Instance.maxBlood}y.default.Instance.TouchSwitch?this._nTimeStay>=this._nTimeSuggestion&&!this._bSuggestion?(a.default.Instance.playSuggestionTween(),this._bSuggestion=!0):this._nTimeStay<this._nTimeSuggestion&&(this._nTimeStay+=e,this._bSuggestion=!1):(this._nTimeStay=0,this.stopSuggestion())},__decorate([v({type:cc.Node,displayName:"\u7279\u6548\u5bb9\u5668"})],t.prototype,"nodeEffectContainer",void 0),__decorate([v({type:cc.Node,displayName:"\u7f51\u683c\u5bf9\u8c61"})],t.prototype,"nodeGrid",void 0),__decorate([v({type:cc.Node,displayName:"\u65b9\u5757\u5bb9\u5668"})],t.prototype,"nodeCubeCtl",void 0),__decorate([v({type:cc.Button,displayName:"\u8fd4\u56de\u6309\u94ae"})],t.prototype,"btnBack",void 0),__decorate([v({type:cc.Node,displayName:"1v1\u5934\u50cf\u5bb9\u5668"})],t.prototype,"nodeHeadContainer1v1",void 0),__decorate([v({type:cc.Node,displayName:"2v2\u5934\u50cf\u5bb9\u5668"})],t.prototype,"nodeHeadContainer2v2",void 0),__decorate([v({type:cc.Sprite,displayName:"\u9876\u90e8\u80cc\u666f\u56fe"})],t.prototype,"sprTopBg",void 0),__decorate([v({type:cc.Sprite,displayName:"\u5e95\u90e8\u80cc\u666f\u56fe"})],t.prototype,"sprBottomBg",void 0),__decorate([v({type:cc.Label,displayName:"\u65f6\u95f4"})],t.prototype,"labTime",void 0),__decorate([v({type:cc.Sprite,displayName:"\u81ea\u5df1\u8840\u6761"})],t.prototype,"spriteMyBlood",void 0),__decorate([v({type:cc.Sprite,displayName:"\u654c\u4eba\u8840\u6761"})],t.prototype,"spriteEnemyBlood",void 0),__decorate([v({type:Array(cc.Label),displayName:"\u4f24\u5bb3\u91cf\u6587\u672c\u5217\u8868"})],t.prototype,"listLabATK",void 0),__decorate([v({type:cc.Node,displayName:"\u53cc\u500d\u4f24\u5bb3\u65b9\u5757"})],t.prototype,"nodeDoubleAttackCube",void 0),__decorate([v({type:cc.Node,displayName:"\u89d2\u8272\u5bb9\u5668\u5217\u8868"})],t.prototype,"listNodeRole",void 0),__decorate([v({type:cc.Node,displayName:"\u9876\u90e8\u63a7\u5236\u5668\u5bb9\u5668"})],t.prototype,"nodeTopControlContainer",void 0),__decorate([v(cc.Sprite)],t.prototype,"simpleIcon",void 0),__decorate([v({type:cc.Node,displayName:"\u9876\u90e8\u63a7\u5236\u5668\u5bb9\u5668"})],t.prototype,"nodeTopControl2v2Container",void 0),__decorate([v({type:cc.Label,displayName:"\u6211\u7684\u540d\u5b57"})],t.prototype,"labMyNickName",void 0),__decorate([v({type:cc.Sprite,displayName:"\u6211\u7684\u5934\u50cf"})],t.prototype,"sprMyHead",void 0),__decorate([v({type:cc.Sprite,displayName:"\u6211\u7684\u8bed\u97f3\u5f00\u72b6\u6001"})],t.prototype,"sprMySpoken",void 0),__decorate([v({type:cc.Sprite,displayName:"\u6211\u7684\u8bed\u97f3\u5173\u72b6\u6001"})],t.prototype,"sprMyUnSpoken",void 0),__decorate([v({type:cc.Label,displayName:"\u654c\u4eba\u7684\u540d\u5b57"})],t.prototype,"labEnemyNickName",void 0),__decorate([v({type:cc.Sprite,displayName:"\u654c\u4eba\u7684\u5934\u50cf"})],t.prototype,"sprEnemyHead",void 0),__decorate([v({type:cc.Sprite,displayName:"\u654c\u4eba\u7684\u8bed\u97f3\u5f00\u72b6\u6001"})],t.prototype,"sprEnemySpoken",void 0),__decorate([v({type:cc.Sprite,displayName:"\u654c\u4eba\u7684\u8bed\u97f3\u5173\u72b6\u6001"})],t.prototype,"sprEnemyUnSpoken",void 0),__decorate([v({type:cc.Sprite,displayName:"\u7b2c\u51e0\u8f6e"})],t.prototype,"labRound",void 0),__decorate([v({type:cc.Sprite,displayName:"\u6211\u7684\u5934\u50cf\u5e95\u56fe"})],t.prototype,"sprMyHeadBg",void 0),__decorate([v({type:cc.Sprite,displayName:"\u6211\u7684\u540d\u5b57\u5e95\u56fe"})],t.prototype,"sprMyNameBg",void 0),__decorate([v({type:cc.Sprite,displayName:"\u654c\u4eba\u7684\u5934\u50cf\u5e95\u56fe"})],t.prototype,"sprEnemyHeadBg",void 0),__decorate([v({type:cc.Sprite,displayName:"\u654c\u4eba\u7684\u540d\u5b57\u5e95\u56fe"})],t.prototype,"sprEnemyNameBg",void 0),__decorate([v(cc.Sprite)],t.prototype,"sp2v2MyLink",void 0),__decorate([v(cc.Sprite)],t.prototype,"sp2v2EnemyLink",void 0),__decorate([v(cc.Sprite)],t.prototype,"sp2v2MyMiddleBg",void 0),__decorate([v(cc.Sprite)],t.prototype,"sp2v2EnemyMiddleBg",void 0),__decorate([v(cc.Sprite)],t.prototype,"sp2v2MyHeadBg",void 0),__decorate([v(cc.Sprite)],t.prototype,"sp2v2MyFriendHeadBg",void 0),__decorate([v(cc.Sprite)],t.prototype,"sp2v2Enemy1HeadBg",void 0),__decorate([v(cc.Sprite)],t.prototype,"sp2v2Enemy2HeadBg",void 0),__decorate([v({type:Array(cc.Node),displayName:"2v2\u7684\u5934\u50cf\u8282\u70b9\u96c6\u5408"})],t.prototype,"arrayNode2v2Head",void 0),__decorate([v({type:cc.Sprite,displayName:"2v2\u7b2c\u51e0\u8f6e"})],t.prototype,"lab2v2Round",void 0),__decorate([v({type:cc.Label,displayName:"2v2\u65f6\u95f4\u6587\u672c"})],t.prototype,"lab2v2Time",void 0),__decorate([v({type:cc.Node,displayName:"\u89d2\u8272\u540e\u9762\u7684\u5bb9\u5668"})],t.prototype,"nodeTopBehindControlContainer",void 0),__decorate([v({type:cc.Node,displayName:"\u6587\u672c\u5bb9\u5668"})],t.prototype,"nodeTextContainer",void 0),__decorate([v({type:cc.Node,displayName:"\u6d88\u9664\u62d6\u5c3e\u7279\u6548\u7ed3\u675f\u70b9"})],t.prototype,"nodeCrushTailPoint",void 0),__decorate([v({type:cc.Node,displayName:"2v2\u6d88\u9664\u62d6\u5c3e\u7279\u6548\u7ed3\u675f\u70b9"})],t.prototype,"node2v2CrushTailPoint",void 0),__decorate([v({type:cc.Node,displayName:"\u6d88\u9664\u62d6\u5c3e\u7279\u6548\u5bb9\u5668"})],t.prototype,"nodeCrushTailContainer",void 0),__decorate([v(cc.Node)],t.prototype,"nodeScoreDamage",void 0),__decorate([v(cc.Sprite)],t.prototype,"spScoreDamageL",void 0),__decorate([v(cc.Sprite)],t.prototype,"spScoreDamageR",void 0),__decorate([v(cc.Sprite)],t.prototype,"spScoreFillL",void 0),__decorate([v(cc.Sprite)],t.prototype,"spScoreFillR",void 0),__decorate([v(cc.Label)],t.prototype,"labMyTeam",void 0),__decorate([v(cc.Label)],t.prototype,"labEnemyTeam",void 0),__decorate([v(cc.Node)],t.prototype,"nodeFriendAttack",void 0),__decorate([v(cc.Node)],t.prototype,"nodeMyAttack",void 0),__decorate([v(cc.Node)],t.prototype,"btnHelp",void 0),__decorate([v(cc.Node)],t.prototype,"helpInfo",void 0),__decorate([v(cc.Node)],t.prototype,"btnCloseHelp",void 0),t=__decorate([M],t)}(i.default);n.default=F,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/PetHero_CustomMgr":"PetHero_CustomMgr","../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr","../Tools/PetHero_FYAudioCtl":"PetHero_FYAudioCtl","../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYGlobalVarMgr":"PetHero_FYGlobalVarMgr","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYSDKMgr":"PetHero_FYSDKMgr","../Tools/PetHero_FYScheduleCtl":"PetHero_FYScheduleCtl","../Tools/PetHero_FYTweenMgr":"PetHero_FYTweenMgr","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility","./PetHero_AIMgr":"PetHero_AIMgr","./PetHero_AttackMgr":"PetHero_AttackMgr","./PetHero_CubeItem":"PetHero_CubeItem","./PetHero_CubeMgr":"PetHero_CubeMgr","./PetHero_EffectMgr":"PetHero_EffectMgr","./PetHero_GridMgr":"PetHero_GridMgr","./PetHero_RoleMgr":"PetHero_RoleMgr","./PetHero_TextMgr":"PetHero_TextMgr"}],PetHero_UILoadingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"3e4dfMq+4VC2JqcmDHguEi2","PetHero_UILoadingPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYMessenger"),a=e("../Tools/PetHero_FYBaseUIPanel"),s=e("../Tools/PetHero_FYResMgr"),i=e("../Tools/PetHero_FYUIMgr"),r=e("../Tools/PetHero_FYSDKMgr"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labProgress=null,t._preNum=5,t._curPreNum=0,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),o.default.Instance.add(i.default.MsgPreLoadUIComplete,this.onPreLoadComplete,this),o.default.Instance.add(s.default.MsgPreLoadAtlasComplete,this.onPreLoadComplete,this),o.default.Instance.add(s.default.MsgPreLoadEffectComplete,this.onPreLoadComplete,this),o.default.Instance.add(s.default.MsgPreLoadSequenceFrameComplete,this.onPreLoadComplete,this),o.default.Instance.add(s.default.MsgPreLoadOtherComplete,this.onPreLoadComplete,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),o.default.Instance.remove(i.default.MsgPreLoadUIComplete,this.onPreLoadComplete,this),o.default.Instance.remove(s.default.MsgPreLoadAtlasComplete,this.onPreLoadComplete,this),o.default.Instance.remove(s.default.MsgPreLoadEffectComplete,this.onPreLoadComplete,this),o.default.Instance.remove(s.default.MsgPreLoadSequenceFrameComplete,this.onPreLoadComplete,this),o.default.Instance.remove(s.default.MsgPreLoadOtherComplete,this.onPreLoadComplete,this)},t.prototype.onPreLoadComplete=function(){this._curPreNum++,r.default.Instance.isAliGame()&&CatcherSDK.instance().ag&&(CatcherSDK.instance().ag.emit(CatcherSDK.instance().ag.constant.EVENT_LOAD_RES_PROGRESS_CHANGED,{ready:this._curPreNum/this._preNum>=1,progress:this._curPreNum/this._preNum}),console.log("---\x3e ",{ready:this._curPreNum/this._preNum>=1,progress:this._curPreNum/this._preNum})),console.log("\u52a0\u8f7d\u6570\u91cf\uff1a ",this._curPreNum,this._preNum),this._curPreNum>=this._preNum?(this.setActive(!1),this._curPreNum=0,o.default.Instance.send(s.default.MsgPreLoadComplete)):(this.labProgress.string=this._curPreNum+"/"+this._preNum,this.setActive(!0))},t.prototype.start=function(){this.labProgress.string=this._curPreNum+"/"+this._preNum},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this)},__decorate([u({type:cc.Label,displayName:"\u8fdb\u5ea6"})],t.prototype,"labProgress",void 0),t=__decorate([c],t)}(a.default);n.default=d,cc._RF.pop()},{"../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYSDKMgr":"PetHero_FYSDKMgr","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr"}],PetHero_UIMessageBoxPanel:[function(e,t,n){"use strict";cc._RF.push(t,"5b93b3rA69JGIbW600B6p/G","PetHero_UIMessageBoxPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYBaseUIPanel"),a=e("../Tools/PetHero_FYUIMgr"),s=cc._decorator,i=s.ccclass,r=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labContent=null,t.btnOK=null,t.btnCancel=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnOK.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnOK,this),this.btnCancel.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnCancel,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnOK.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnOK,this),this.btnCancel.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnCancel,this)},t.prototype.onShow=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];cc.log("msgType = "+e+" param = "+t),this.labContent.string=t[0]},t.prototype.onClickBtnOK=function(){a.default.Instance.close(this.node.name)},t.prototype.onClickBtnCancel=function(){a.default.Instance.close(this.node.name)},__decorate([r({type:cc.Label,displayName:"\u6587\u672c"})],t.prototype,"labContent",void 0),__decorate([r({type:cc.Button,displayName:"\u786e\u5b9a\u6309\u94ae"})],t.prototype,"btnOK",void 0),__decorate([r({type:cc.Button,displayName:"\u53d6\u6d88\u6309\u94ae"})],t.prototype,"btnCancel",void 0),t=__decorate([i],t)}(o.default);n.default=l,cc._RF.pop()},{"../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr"}],PetHero_UIRandomDoubleCubePanel:[function(e,t,n){"use strict";cc._RF.push(t,"24c73VsLWhA66x/dBAvG0XA","PetHero_UIRandomDoubleCubePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYBaseUIPanel"),a=e("../Tools/PetHero_FYSequenceFrameControl"),s=e("../Tools/PetHero_FYTweenMgr"),i=e("../Tools/PetHero_FYMessenger"),r=e("../Common/PetHero_C"),l=e("../Tools/PetHero_FYUIMgr"),c=e("../Tools/PetHero_FYUtility"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sequenceFrameControl=null,t.nodeDouble=null,t}return __extends(t,e),t.prototype.setStartIndex=function(e){this.sequenceFrameControl.setCurIndex(e)},t.prototype.onTimeOut=function(){this.sequenceFrameControl.stop();var e=this.nodeDouble.getPosition();s.default.moveTo(this.sequenceFrameControl.node,1,e.x,e.y);var t=this.sequenceFrameControl.getCurIndex(),n=this.nodeDouble.getScale();s.default.scaleTo(this.sequenceFrameControl.node,1,n,n,0,function(){i.default.Instance.send(r.C.MsgType.SetDoubleAttackCube,t),l.default.Instance.close(r.C.UIName.UIRandomDoubleCubePanel)})},t.prototype.onLoad=function(){this.setStartIndex(c.default.getRangeRandom(0,r.C.CubeType.Length-1))},t.prototype.start=function(){this.schedule(this.onTimeOut,0,0,2)},__decorate([p({type:a.default,displayName:"\u5e8f\u5217\u5e27\u52a8\u753b\u63a7\u5236\u5668"})],t.prototype,"sequenceFrameControl",void 0),__decorate([p({type:cc.Node,displayName:"\u53cc\u500d\u4f24\u5bb3\u8282\u70b9"})],t.prototype,"nodeDouble",void 0),t=__decorate([d],t)}(o.default);n.default=h,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYSequenceFrameControl":"PetHero_FYSequenceFrameControl","../Tools/PetHero_FYTweenMgr":"PetHero_FYTweenMgr","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_UITipPanel:[function(e,t,n){"use strict";cc._RF.push(t,"90649S5ne1KQagjco3eP+Np","PetHero_UITipPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tools/PetHero_FYBaseUIPanel"),a=e("../Tools/PetHero_FYUIMgr"),s=e("../Common/PetHero_C"),i=e("../Tools/PetHero_FYMessenger"),r=e("../Common/PetHero_UserDataMgr"),l=e("../Tools/PetHero_FYResMgr"),c=e("../Tools/PetHero_FYUtility"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeTimeOut=null,t.nodeGameResult=null,t.nodeStatistics=null,t.nodeFight=null,t.nodeRound=null,t.nodeStart=null,t.labTips=null,t.btnRestart=null,t.labRound=null,t.sprDoubleCube=null,t}return __extends(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnRestart.on(cc.Node.EventType.TOUCH_END,this.onClickBtnRestart,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnRestart.off(cc.Node.EventType.TOUCH_END,this.onClickBtnRestart,this)},t.prototype.start=function(){},t.prototype.onShow=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.nodeGameResult.active=t[0]==s.C.TipType.Win||t[0]==s.C.TipType.Lose||t[0]==s.C.TipType.DogFall,this.nodeTimeOut.active=t[0]==s.C.TipType.TimeOut,this.nodeStatistics.active=t[0]==s.C.TipType.Statistics,this.nodeFight.active=t[0]==s.C.TipType.Fight,this.nodeRound.active=t[0][0]==s.C.TipType.Round,this.nodeStart.active=t[0]==s.C.TipType.Start,t[0]==s.C.TipType.Win)this.labTips.string="\u606d\u559c\u60a8\u83b7\u80dc\uff01";else if(t[0]==s.C.TipType.Lose)this.labTips.string="\u5931\u8d25\u4e43\u5175\u5bb6\u5e38\u4e8b!";else if(t[0]==s.C.TipType.DogFall)this.labTips.string="\u5e73\u5c40\uff0c\u5927\u4fa0\u8bf7\u91cd\u5934\u518d\u6765";else if(t[0][0]==s.C.TipType.Round)if(this.labRound.string=t[0][1],r.default.Instance.DoubleAttackSwitch){var o=c.default.getRangeRandom(0,s.C.CubeType.Length-1);r.default.Instance.DoubleAttackCubeType=o,this.sprDoubleCube.spriteFrame=l.default.Instance.loadSpriteFrame("cube_"+r.default.Instance.DoubleAttackCubeType),i.default.Instance.send(s.C.MsgType.SetDoubleAttackCube,o)}else this.sprDoubleCube.node.active=!1},t.prototype.onClickBtnRestart=function(){i.default.Instance.send(s.C.MsgType.Restart),a.default.Instance.close(this.node.name)},__decorate([p({type:cc.Node,displayName:"\u65f6\u95f4\u5230"})],t.prototype,"nodeTimeOut",void 0),__decorate([p({type:cc.Node,displayName:"\u6e38\u620f\u7ed3\u679c\u5bf9\u8c61"})],t.prototype,"nodeGameResult",void 0),__decorate([p({type:cc.Node,displayName:"\u7edf\u8ba1"})],t.prototype,"nodeStatistics",void 0),__decorate([p({type:cc.Node,displayName:"\u6218\u6597\u754c\u9762"})],t.prototype,"nodeFight",void 0),__decorate([p({type:cc.Node,displayName:"\u7b2c\u51e0\u8f6e"})],t.prototype,"nodeRound",void 0),__decorate([p({type:cc.Node,displayName:"\u5f00\u59cb\u754c\u9762"})],t.prototype,"nodeStart",void 0),__decorate([p({type:cc.Label,displayName:"\u63d0\u793a\u6587\u672c"})],t.prototype,"labTips",void 0),__decorate([p({type:cc.Node,displayName:"\u91cd\u6765\u6309\u94ae"})],t.prototype,"btnRestart",void 0),__decorate([p({type:cc.Label,displayName:"\u7b2c\u51e0\u8f6e"})],t.prototype,"labRound",void 0),__decorate([p({type:cc.Sprite,displayName:"\u53cc\u500d\u4f24\u5bb3\u65b9\u5757"})],t.prototype,"sprDoubleCube",void 0),t=__decorate([d],t)}(o.default);n.default=h,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/PetHero_UserDataMgr":"PetHero_UserDataMgr","../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_UserDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"4bf12223OBLEYRnr8XGQIwX","PetHero_UserDataMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PetHero_C"),a=e("../Tools/PetHero_FYResMgr"),s=cc._decorator,i=s.ccclass,r=(s.property,function(){function e(){this.row=8,this.col=8,this.lietCanUseProp=[o.C.CubeType.T_0,o.C.CubeType.T_1,o.C.CubeType.T_2,,o.C.CubeType.T_4,o.C.CubeType.T_5],this.openFraming=1,this.fpsExpect=5,this._maxLength=620,this._cubeNum=6,this._gameMode=o.C.GameMode.ThreeRoundRoundMode,this._playerInfos=[],this._bIsStatistics=!1,this._bBloodTween=!1,this._startTime=0,this._seat=-1,this._gameId=-1,this._groupId="-1",this._fightMode=o.C.FightMode.OneVsAI,this._nDoubleAttackCubeType=o.C.CubeType.A,this._bInk=!1,this._nRemainTime=120,this._nRound=1,this._myDamage=0,this._friendDamage=0,this._enemyDamage=0,this._enemyFriendDamage=0,this._listDamage=[0,0,0,0],this._myCurBlood=0,this._enemyCurBlood=0,this._bTouchSwitch=!1,this._nDropWaitTime=0,this._bWaitForEffect=!1,this._bWaitForT1=!1,this._bDoubleAttack=!1,this._bInkSwitch=!1,this._nodeEffectContainer=null,this._nodeFinger=null,this._isMainSeat=!1,this._crushCheckedDelay=.1,this._bAttackStage=!1,this.bNeedSetSelfAdaption=!1}var t;return t=e,Object.defineProperty(e.prototype,"MaxLength",{get:function(){return this._maxLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cubeNum",{get:function(){return this.GameMode==o.C.GameMode.OneRoundInstantMode?this._cubeNum=5:this._cubeNum=6,this._cubeNum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GameMode",{get:function(){return this._gameMode},set:function(e){this._gameMode=e},enumerable:!0,configurable:!0}),e.prototype.clearData=function(){this._nodeFinger=null},Object.defineProperty(e.prototype,"PlayerInfos",{get:function(){return this._playerInfos},set:function(e){this._playerInfos=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsStatistics",{get:function(){return this._bIsStatistics},set:function(e){this._bIsStatistics=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OneRoundTime",{get:function(){return this.GameMode,o.C.GameMode.OneRoundInstantMode,60},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsBloodTween",{get:function(){return this._bBloodTween},set:function(e){this._bBloodTween=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StartTime",{get:function(){return this._startTime},set:function(e){this._startTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Seat",{get:function(){return this._seat},set:function(e){this._seat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GameId",{get:function(){return this._gameId},set:function(e){this._gameId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GroupId",{get:function(){return this._groupId},set:function(e){this._groupId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FightMode",{get:function(){return this._fightMode},set:function(e){this._fightMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DoubleAttackCubeType",{get:function(){return this._nDoubleAttackCubeType},set:function(e){this._nDoubleAttackCubeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Ink",{get:function(){return this._bInk},set:function(e){this._bInk=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RemainTime",{get:function(){return this._nRemainTime},set:function(e){this._nRemainTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Round",{get:function(){return this._nRound},set:function(e){this._nRound=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyDamage",{get:function(){return this._myDamage},set:function(e){this._myDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendDamage",{get:function(){return this._friendDamage},set:function(e){this._friendDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnemyDamage",{get:function(){return this._enemyDamage},set:function(e){this._enemyDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnemyFriendDamage",{get:function(){return this._enemyFriendDamage},set:function(e){this._enemyFriendDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ListDamage",{get:function(){return this._listDamage},set:function(e){this._listDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyBlood",{get:function(){return this._myCurBlood},set:function(e){this._myCurBlood=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnemyBlood",{get:function(){return this._enemyCurBlood},set:function(e){this._enemyCurBlood=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TouchSwitch",{get:function(){return this._bTouchSwitch},set:function(e){this._bTouchSwitch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DropWaitTime",{get:function(){return this._nDropWaitTime},set:function(e){this._nDropWaitTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WaitForEffect",{get:function(){return this._bWaitForEffect},set:function(e){this._bWaitForEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WaitForT1",{get:function(){return this._bWaitForT1},set:function(e){this._bWaitForT1=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DoubleAttackSwitch",{get:function(){return this._bDoubleAttack},set:function(e){this._bDoubleAttack=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InkSwitch",{get:function(){return this._bInkSwitch},set:function(e){this._bInkSwitch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeEffectContainer",{get:function(){return this._nodeEffectContainer},set:function(e){this._nodeEffectContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeFinger",{get:function(){return this._nodeFinger||(this._nodeFinger=cc.instantiate(a.default.Instance.loadOther(o.C.OtherName.Finger)),this._nodeFinger.parent=this.nodeEffectContainer),this._nodeFinger},set:function(e){this._nodeFinger=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMainSeat",{get:function(){return this._isMainSeat},set:function(e){this._isMainSeat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CrushCheckDelay",{get:function(){return this._crushCheckedDelay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsAttackStage",{get:function(){return this._bAttackStage},set:function(e){this._bAttackStage=e},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","./PetHero_C":"PetHero_C"}]},{},["PetHero_C","PetHero_CustomMgr","PetHero_UserDataMgr","Demo","PetHero_AIMgr","PetHero_AttackMgr","PetHero_CellItem","PetHero_CubeInfo","PetHero_CubeItem","PetHero_CubeMgr","PetHero_EffectMgr","PetHero_GridMgr","PetHero_RoleMgr","PetHero_TextMgr","PetHero_UIGamePanel","PetHero_Main","PetHero_FYAudioCtl","PetHero_FYBaseNode","PetHero_FYBaseUIPanel","PetHero_FYEffectControl","PetHero_FYEffectItem","PetHero_FYGlobalVarMgr","PetHero_FYMessenger","PetHero_FYResMgr","PetHero_FYSDKMgr","PetHero_FYScheduleCtl","PetHero_FYSequenceFrameControl","PetHero_FYTweenMgr","PetHero_FYUIMgr","PetHero_FYUtility","PetHero_UILoadingPanel","PetHero_UIMessageBoxPanel","PetHero_UIRandomDoubleCubePanel","PetHero_UITipPanel"]);