window.__require=function t(e,n,o){function r(a,s){if(!n[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return r(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({AIController:[function(t,e,n){"use strict";cc._RF.push(e,"a6c29LluQ5EDKDTVuUjkeFK","AIController"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../model/MGameHitBall"),r=function(){function t(){this.Switch=!1,this.listGameHitBall=[]}return t.prototype.Init=function(){this.listGameHitBall=[];for(var t=0;t<100;t++)this.listGameHitBall.push(new o.MGameHitBall({power:.23456*t%1,angle:1.9876*t%360}))},t.prototype.GetGameHitData=function(){return this.listGameHitBall.pop()},t}();n.default=new r,cc._RF.pop()},{"../model/MGameHitBall":"MGameHitBall"}],ActionSheetController:[function(t,e,n){"use strict";cc._RF.push(e,"b3c36zK7chFa67PwOW2hBFX","ActionSheetController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../room/controller/RoomController"),a=t("../../../base/script/frame/ui/UIManager"),s=t("../view/UIActionSheet"),l=t("../../room/controller/JoinMicController"),c=t("../../other/EnumCenter"),u=t("../../userDetail/controller/UserDetailController"),h=t("../../userDetail/view/UIUserDetail"),f=t("../../../base/script/frame/clog/Clog"),p=t("../../common/view/UIToast"),d=t("../../topic/controller/TopicController"),m=t("../../roomSetting/view/UIRoomSetting"),y=t("../../common/controller/qqShare/ShareManager"),g=t("../../roomAdmin/controller/RoomAdminController"),C=t("../../login/model/SessionData"),_=t("../../roomSetting/view/UITheme"),v=t("../../xiyou/controller/XiYouGiftManager"),b=t("../../roomAdmin/view/UIRoomAdmin"),S=t("../../sendGift/view/main/UIGift"),I=t("../../sendGift/model/GiftTargetData"),w=t("../../common/view/UICommDia"),R=t("../../micWait/view/UIMicWaiting"),E=t("../../micWait/controller/MicWaitController"),U=function(){function t(){}return t.OnClickPosition=function(t){return o(this,void 0,void 0,function(){var e,n,u,h,d=this;return r(this,function(m){switch(m.label){case 0:if(f.default.Green(f.ClogKey.UI,"\u70b9\u51fb\u5ea7\u4f4d\u53f7\uff1a"+t+",\u623f\u95f4\u662f\u5426\u5f00\u542f\u63a5\u5f85\uff1a"+i.RoomController.CurRoom.Reception+",\u81ea\u5df1\u89d2\u8272\uff1a"+i.RoomController.Purview),e=0,this.data={Title:null,List:[]},null==(n=i.RoomController.Seats.find(function(e){return e.Position==t})))return[2];if(!n.HasPlayer)return[3,9];if(this.data.Title="\u4f60\u8981\u5bf9"+(n.UId==C.Session.BanBan.UId?"\u81ea\u5df1":n.Name)+"\u505a\u4ec0\u4e48\uff1f",n.UId===C.Session.BanBan.UId)return this.data.List.push({Id:++e,Desc:"\u4e0b\u9ea6\u65c1\u542c",Action:function(){return d.authorityLeaveMic(t)}}),a.UIManager.OpenUI(s.UIActionSheet),[2];switch(i.RoomController.Purview){case c.EnumPurview.Createor:return[3,1];case c.EnumPurview.Admin:return[3,3];case c.EnumPurview.SuperPowerAdmin:return[3,5]}return[3,7];case 1:return n.IsForbidden?this.data.List.push({Id:++e,Desc:"\u5f00\u9ea6",Action:function(){return d.authorityUnforbiddenMic(t)}}):this.data.List.push({Id:++e,Desc:"\u7981\u9ea6",Action:function(){return d.authorityForbiddonMic(t)}}),n.IsLock?this.data.List.push({Id:++e,Desc:"\u89e3\u5c01\u6b64\u9ea6",Action:function(){return d.authorityEnableMic(t)}}):this.data.List.push({Id:++e,Desc:"\u5c01\u95ed\u6b64\u9ea6",Action:function(){return d.authorityDisableMic(t)}}),this.data.List.push({Id:++e,Desc:"\u8ba1\u65f6",Action:function(){return d.authorityTimer(t)}}),this.data.List.push({Id:++e,Desc:"\u6253\u8d4f",Action:function(){return d.sentGift(n.UId)}}),this.data.List.push({Id:++e,Desc:"\u770b\u8d44\u6599",Action:function(){return d.authorityLookDetial(n.UId)}}),this.data.List.push({Id:++e,Desc:"\u8e22\u4e0b\u9ea6",Action:function(){return d.authorityKick(t)}}),this.data.List.push({Id:++e,Desc:"\u8e22\u51fa\u623f\u95f4",Action:function(){return d.authorityKickout(t)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 2:return m.sent(),[2];case 3:return this.data.List.push({Id:++e,Desc:"\u6253\u8d4f",Action:function(){return d.sentGift(n.UId)}}),this.data.List.push({Id:++e,Desc:"\u770b\u8d44\u6599",Action:function(){return d.authorityLookDetial(n.UId)}}),n.IsAdmin||n.IsCreator||this.data.List.push({Id:++e,Desc:"\u8e22\u51fa\u623f\u95f4",Action:function(){return d.authorityKickout(t)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 4:return m.sent(),[2];case 5:return this.data.List.push({Id:++e,Desc:"\u6253\u8d4f",Action:function(){return d.sentGift(n.UId)}}),this.data.List.push({Id:++e,Desc:"\u770b\u8d44\u6599",Action:function(){return d.authorityLookDetial(n.UId)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 6:return m.sent(),[2];case 7:return this.authorityLookDetial(n.UId),[2];case 8:return[3,19];case 9:switch(u=i.RoomController.GetSelfSeat(),h=!!u,i.RoomController.Purview){case c.EnumPurview.Createor:return[3,10];case c.EnumPurview.Admin:case c.EnumPurview.SuperPowerAdmin:return[3,12]}return[3,13];case 10:return f.default.Red(f.ClogKey.UI,"\u623f\u4e3b\u70b9\u4e86\u7a7a\u4f4d\uff1a"+n.Position+"\u53f7\u4f4d\u623f\u4e3b\u662f\u5426\u5728\u9ea6\u4e0a\uff1a"+h+",\u5ea7\u4f4d\u662f\u5426\u88ab\u5c01\uff1a"+n.IsLock),h||this.data.List.push({Id:++e,Desc:"\u81ea\u5df1\u4e0a\u9ea6",Action:function(){return o(d,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),l.JoinMicController.JoinMic(t),[2]}})})}}),n.IsLock?this.data.List.push({Id:++e,Desc:"\u89e3\u5c01\u6b64\u9ea6",Action:function(){return d.authorityEnableMic(t)}}):(this.data.List.push({Id:++e,Desc:"\u5c01\u95ed\u6b64\u9ea6",Action:function(){return d.authorityDisableMic(t)}}),this.data.List.push({Id:++e,Desc:"\u62b1\u4eba\u4e0a\u9ea6",Action:function(){return o(d,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return t.sent(),[4,a.UIManager.OpenUI(b.UIRoomAdmin)];case 2:return t.sent(),[2]}})})}})),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 11:return m.sent(),[2];case 12:return h?(p.UIToast.Show("\u60a8\u5df2\u5728\u9ea6\u4e0a"),[2]):(l.JoinMicController.JoinMic(t),[2]);case 13:return h?(p.UIToast.Show("\u60a8\u5df2\u5728\u9ea6\u4e0a"),[2]):n.IsLock&&i.RoomController.CurRoom.Property!=c.RoomProperty.Private?(p.UIToast.Show("\u8bf7\u6362\u4e2a\u5ea7\u4f4d"),[2]):i.RoomController.CurRoom.Mode!=c.EnumRoomMode.Lock?[3,17]:E.MicWaitController.IsMicWaiting(C.Session.BanBan.UId)?[3,14]:(w.UICommDia.Open("\u662f\u5426\u8981\u7533\u8bf7\u4e0a\u9ea6","\u786e\u5b9a","\u53d6\u6d88",function(){E.MicWaitController.JoinMicWait(t)}),[3,16]);case 14:return[4,E.MicWaitController.micWaitListReq()];case 15:m.sent()&&a.UIManager.OpenUI(R.UIMicWaiting),m.label=16;case 16:return[3,18];case 17:l.JoinMicController.JoinMic(t),m.label=18;case 18:case 19:return[2]}})})},t.authorityLeaveMic=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u4e0b\u9ea6\u65c1\u542c"),l.JoinMicController.LeaveMic(t),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[2]}})})},t.authorityUnforbiddenMic=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5f00\u9ea6"),l.JoinMicController.onMic(t,c.EnumOnMicOp.UnforbiddenMic),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[2]}})})},t.authorityForbiddonMic=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u7981\u9ea6"),l.JoinMicController.onMic(t,c.EnumOnMicOp.ForbiddenMic),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[2]}})})},t.authorityEnableMic=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u89e3\u5c01\u6b64\u9ea6"),l.JoinMicController.onMic(t,c.EnumOnMicOp.UnlockMic),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[2]}})})},t.authorityDisableMic=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5c01\u95ed\u6b64\u9ea6"),l.JoinMicController.onMic(t,c.EnumOnMicOp.LockMic),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[2]}})})},t.authorityTimer=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u8ba1\u65f6"),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[4,this.setCountdown(t)];case 2:return e.sent(),[2]}})})},t.setCountdown=function(t){return o(this,void 0,void 0,function(){var e,n=this;return r(this,function(o){switch(o.label){case 0:return this.data.List=[],e=0,this.data.List.push({Id:++e,Desc:"1\u5206\u949f",Action:function(){return n.timer(t,1)}}),this.data.List.push({Id:++e,Desc:"2\u5206\u949f",Action:function(){return n.timer(t,2)}}),this.data.List.push({Id:++e,Desc:"3\u5206\u949f",Action:function(){return n.timer(t,3)}}),this.data.List.push({Id:++e,Desc:"4\u5206\u949f",Action:function(){return n.timer(t,4)}}),this.data.List.push({Id:++e,Desc:"5\u5206\u949f",Action:function(){return n.timer(t,5)}}),this.data.List.push({Id:++e,Desc:"6\u5206\u949f",Action:function(){return n.timer(t,6)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 1:return o.sent(),[2]}})})},t.timer=function(t,e){f.default.Trace(f.ClogKey.UI,"\u8ba1\u65f6 position="+t+",time="+e),l.JoinMicController.onMic(t,c.EnumOnMicOp.Timer,e),a.UIManager.CloseUI(s.UIActionSheet)},t.authorityLookDetial=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u67e5\u770b\u8d44\u6599"),u.UserDetailController.TargetUserId=t,[4,a.UIManager.OpenUI(h.UIUserDetail)];case 1:return e.sent(),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 2:return e.sent(),[2]}})})},t.authorityKick=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u8e22\u4e0b\u9ea6"),l.JoinMicController.LeaveMic(t),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[2]}})})},t.authorityKickout=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u8e22\u51fa\u623f\u95f4"),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[4,this.setKickout(t)];case 2:return e.sent(),[2]}})})},t.setKickout=function(t){return o(this,void 0,void 0,function(){var e,n,o,l=this;return r(this,function(r){switch(r.label){case 0:return this.data.List=[],e=0,(n=i.RoomController.Seats.find(function(e){return e.Position==t}))?(o=n.UId,this.data.List.push({Id:++e,Desc:"10\u5206\u949f",Action:function(){l.kickout(o,t,600)}}),this.data.List.push({Id:++e,Desc:"1\u5c0f\u65f6",Action:function(){l.kickout(o,t,3600)}}),this.data.List.push({Id:++e,Desc:"1\u5929",Action:function(){l.kickout(o,t,86400)}}),this.data.List.push({Id:++e,Desc:"1\u5468",Action:function(){l.kickout(o,t,604800)}}),this.data.List.push({Id:++e,Desc:"1\u4e2a\u6708",Action:function(){l.kickout(o,t,2592e3)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)]):[2];case 1:return r.sent(),[2]}})})},t.kickout=function(t,e,n){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u8e22\u51fa\u623f\u95f4 position"+e),i.RoomController.Kickout(e,n),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return t.sent(),[2]}})})},t.authorityJoinMic=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u81ea\u5df1\u4e0a\u9ea6"),l.JoinMicController.JoinMic(t),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[2]}})})},t.authorityJoinMicAnyone=function(t,e){return o(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u62b1\u4eba\u4e0a\u9ea6"),l.JoinMicController.JoinMicAuto(t,e),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return n.sent(),[2]}})})},t.SetCloseTopic=function(){return o(this,void 0,void 0,function(){var t,e=this;return r(this,function(n){switch(n.label){case 0:return t=0,this.data={Title:"\u6240\u6709\u8bdd\u9898\u5c06\u88ab\u6e05\u695a\uff0c\u662f\u5426\u5173\u95ed\u8bdd\u9898\u5361\uff1f",List:[]},this.data.List.push({Id:++t,Desc:"\u5173\u95ed",Action:function(){return e.CloseTopic()}}),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 1:return n.sent(),[2]}})})},t.CloseTopic=function(){return o(this,void 0,void 0,function(){return r(this,function(t){return f.default.Trace(f.ClogKey.UI,"\u5173\u95ed\u8bdd\u9898\u5361"),d.TopicController.CloseTopic(),a.UIManager.CloseUI(s.UIActionSheet),[2]})})},t.SetMore=function(){return o(this,void 0,void 0,function(){var t,e,n=this;return r(this,function(o){switch(o.label){case 0:return t=0,this.data={Title:"\u66f4\u591a",List:[]},i.RoomController.Purview==c.EnumPurview.Createor||i.RoomController.Purview==c.EnumPurview.Admin?(this.data.List.push({Id:++t,Desc:"\u4fee\u6539\u8d44\u6599",Action:function(){return n.modifiyRoom()}}),this.data.List.push({Id:++t,Desc:"\u5206\u4eab",Action:function(){return n.share()}}),e=i.RoomController.CurRoom.IsOpenChat?"\u5173\u95ed\u516c\u5c4f":"\u5f00\u542f\u516c\u5c4f",this.data.List.push({Id:++t,Desc:e,Action:function(){return n.UIChatCheck()}})):(i.RoomController.Purview==c.EnumPurview.SuperPowerAdmin&&this.data.List.push({Id:++t,Desc:"\u5173\u95ed\u623f\u95f4",Action:function(){return n.closeRoom()}}),this.data.List.push({Id:++t,Desc:"\u5206\u4eab",Action:function(){return n.share()}})),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 1:return o.sent(),[2]}})})},t.modifiyRoom=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u4fee\u6539\u8d44\u6599"),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return t.sent(),[4,a.UIManager.OpenUI(m.UIRoomSetting)];case 2:return t.sent(),[2]}})})},t.theme=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u4fee\u6539\u4e3b\u9898"),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return t.sent(),[4,a.UIManager.OpenUI(_.UITheme)];case 2:return t.sent(),[2]}})})},t.share=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5206\u4eab"),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return t.sent(),y.ShareManager.Share(),[2]}})})},t.joinMicMode=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5f00\u542f\u8fd8\u662f\u5173\u95ed\u81ea\u7531\u4e0a\u9ea6"),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return t.sent(),[4,l.JoinMicController.joinMicModeReq(i.RoomController.CurRoom.Mode!=c.EnumRoomMode.Auto)];case 2:return t.sent(),[2]}})})},t.UIChatCheck=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5f00\u542f\u8fd8\u662f\u5173\u95ed\u516c\u5c4f"),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return t.sent(),[4,i.RoomController.ChatCheck(!i.RoomController.CurRoom.IsOpenChat)];case 2:return t.sent(),p.UIToast.Show("\u64cd\u4f5c\u6210\u529f"),[2]}})})},t.SetAdmin=function(t){return o(this,void 0,void 0,function(){var e,n,o,l=this;return r(this,function(r){switch(r.label){case 0:return e=0,this.data={Title:"\u4f60\u8981\u5bf9"+t.Name+"\u505a\u4ec0\u4e48\uff1f",List:[]},n=i.RoomController.GetPositionByUserId(t.UId),o=n>=0,this.data.List.push({Id:++e,Desc:"\u8e22\u51fa\u623f\u95f4",Action:function(){return l.authorityKickout(n)}}),o&&this.data.List.push({Id:++e,Desc:"\u6253\u8d4f",Action:function(){return l.sentGift(t.UId)}}),this.data.List.push({Id:++e,Desc:"\u770b\u8d44\u6599",Action:function(){return l.authorityLookDetial(t.UId)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 1:return r.sent(),[2]}})})},t.SetOnline=function(t){return o(this,void 0,void 0,function(){var e,n,o=this;return r(this,function(r){switch(r.label){case 0:return e=0,this.data={Title:"\u4f60\u8981\u5bf9"+t.Name+"\u505a\u4ec0\u4e48\uff1f",List:[]},n=i.RoomController.GetPositionByUserId(t.UId),n>=0&&this.data.List.push({Id:++e,Desc:"\u6253\u8d4f",Action:function(){return o.sentGift(t.UId)}}),t.Role==c.EnumPurview.Normal&&-1===i.RoomController.GetPositionByUserId(t.UId)&&this.data.List.push({Id:++e,Desc:"\u8e22\u51fa\u623f\u95f4",Action:function(){return o.authorityKickout(n)}}),this.data.List.push({Id:++e,Desc:"\u770b\u8d44\u6599",Action:function(){return o.authorityLookDetial(t.UId)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 1:return r.sent(),[2]}})})},t.sentGift=function(t){v.XiYouGiftManager.CurSendGiftTarget=(new I.GiftTargetData).Add(t),a.UIManager.OpenUI(S.UIGift),a.UIManager.CloseUI(h.UIUserDetail),a.UIManager.CloseUI(s.UIActionSheet)},t.SetAsNormalAdmin=function(t){f.default.Trace(f.ClogKey.UI,"\u8bbe\u4e3a\u666e\u901a\u7ba1\u7406:"+t),g.RoomAdminController.SetRoomAdmin(t,c.EnumPurview.Admin),a.UIManager.CloseUI(s.UIActionSheet)},t.cancelNormalAdmin=function(t){f.default.Trace(f.ClogKey.UI,"\u53d6\u6d88\u666e\u901a\u7ba1\u7406:"+t),g.RoomAdminController.CanelRoomAdmin(t,c.EnumPurview.Admin),a.UIManager.CloseUI(s.UIActionSheet)},t.freezeUser=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5c01\u53f7\u4f4d\u7f6e:"+t),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return e.sent(),[4,this.setfreezeUserSheet(t)];case 2:return e.sent(),[2]}})})},t.setfreezeUserSheet=function(t){return o(this,void 0,void 0,function(){var e,n=this;return r(this,function(o){switch(o.label){case 0:return this.data={Title:"\u8bf7\u9009\u62e9\u5c01\u53f7\u65f6\u957f",List:[]},e=0,this.data.List.push({Id:++e,Desc:"1\u5c0f\u65f6 ",Action:function(){n.freezeUserTime(t,3600)}}),this.data.List.push({Id:++e,Desc:"12\u5c0f\u65f6",Action:function(){n.freezeUserTime(t,43200)}}),this.data.List.push({Id:++e,Desc:"24\u5c0f\u65f6",Action:function(){n.freezeUserTime(t,86400)}}),this.data.List.push({Id:++e,Desc:"7\u5929",Action:function(){n.freezeUserTime(t,604800)}}),this.data.List.push({Id:++e,Desc:"30\u5929",Action:function(){n.freezeUserTime(t,2592e3)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)];case 1:return o.sent(),[2]}})})},t.freezeUserTime=function(t,e){return o(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5c01\u53f7\u4f4d\u7f6e:"+t),i.RoomController.freezeUser(t,e),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return n.sent(),[2]}})})},t.closeRoom=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5173\u95ed\u623f\u95f4"),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return t.sent(),[4,this.setCloseRoomSheet()];case 2:return t.sent(),[2]}})})},t.setCloseRoomSheet=function(){return o(this,void 0,void 0,function(){var t,e,n=this;return r(this,function(o){switch(o.label){case 0:return this.data={Title:"\u8bf7\u9009\u62e9\u5173\u95ed\u623f\u95f4\u65f6\u957f",List:[]},t=0,(e=i.RoomController.CurRoom.RoomId)?(this.data.List.push({Id:++t,Desc:"1\u5c0f\u65f6 ",Action:function(){n.closeRoomTime(e,3600)}}),this.data.List.push({Id:++t,Desc:"12\u5c0f\u65f6",Action:function(){n.closeRoomTime(e,43200)}}),this.data.List.push({Id:++t,Desc:"24\u5c0f\u65f6",Action:function(){n.closeRoomTime(e,86400)}}),this.data.List.push({Id:++t,Desc:"7\u5929",Action:function(){n.closeRoomTime(e,604800)}}),this.data.List.push({Id:++t,Desc:"30\u5929",Action:function(){n.closeRoomTime(e,2592e3)}}),[4,a.UIManager.OpenUI(s.UIActionSheet)]):[2];case 1:return o.sent(),[2]}})})},t.closeRoomTime=function(t,e){return o(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return f.default.Trace(f.ClogKey.UI,"\u5173\u95ed\u623f\u95f4 roomId"+t),i.RoomController.closeRoom(t,e),[4,a.UIManager.CloseUI(s.UIActionSheet)];case 1:return n.sent(),[2]}})})},t}();n.ActionSheetController=U,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../common/controller/qqShare/ShareManager":"ShareManager","../../common/view/UICommDia":"UICommDia","../../common/view/UIToast":"UIToast","../../login/model/SessionData":"SessionData","../../micWait/controller/MicWaitController":"MicWaitController","../../micWait/view/UIMicWaiting":"UIMicWaiting","../../other/EnumCenter":"EnumCenter","../../room/controller/JoinMicController":"JoinMicController","../../room/controller/RoomController":"RoomController","../../roomAdmin/controller/RoomAdminController":"RoomAdminController","../../roomAdmin/view/UIRoomAdmin":"UIRoomAdmin","../../roomSetting/view/UIRoomSetting":"UIRoomSetting","../../roomSetting/view/UITheme":"UITheme","../../sendGift/model/GiftTargetData":"GiftTargetData","../../sendGift/view/main/UIGift":"UIGift","../../topic/controller/TopicController":"TopicController","../../userDetail/controller/UserDetailController":"UserDetailController","../../userDetail/view/UIUserDetail":"UIUserDetail","../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager","../view/UIActionSheet":"UIActionSheet"}],ActionSheetData:[function(t,e,n){"use strict";cc._RF.push(e,"403d5m8j+ZBaLKTnUxr4e2X","ActionSheetData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ActionSheetItem:[function(t,e,n){"use strict";cc._RF.push(e,"ef7318dYIRLk4nZ4Azphl3Y","ActionSheetItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/util/UIEventCenter"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.initRoot(),this.initEvent(),this.refreshAll()},e.prototype.initRoot=function(){this._btnThis=cc.find("BtnThis",this.node).getComponent(cc.Button),this._label=cc.find("Label",this.node).getComponent(cc.Label)},e.prototype.initEvent=function(){var t=this;a.UIEventCenter.ButtonEvent(this._btnThis,function(){return t.onThisClick()})},e.prototype.refreshAll=function(){this._label.string=this.data.Desc},e.prototype.onThisClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return null!=this.data.Action&&this.data.Action(),[2]})})},e}(cc.Component);n.ActionSheetItem=s,cc._RF.pop()},{"../../../base/script/util/UIEventCenter":"UIEventCenter"}],AdminInfoItem:[function(t,e,n){"use strict";cc._RF.push(e,"9f96431eQ9NLKVo3czii+KU","AdminInfoItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIUtil"),s=t("../../../base/script/global/SS"),l=t("../../other/EnumCenter"),c=t("../../../base/script/util/StringUtil"),u=t("../../../base/script/util/UIEventCenter"),h=t("../../../base/script/frame/clog/Clog"),f=t("../../actionSheet/controller/ActionSheetController"),p=t("../../../base/script/frame/ui/UIManager"),d=t("./UIRoomAdmin"),m=t("../../login/model/SessionData"),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.node.active=!0,this.initRoot(),this.initEvent(),this.refresh()},e.prototype.initRoot=function(){this._btnThis=cc.find("Button",this.node).getComponent(cc.Button),this._icon=cc.find("Mask/Icon",this.node).getComponent(cc.Sprite),this._nameLabel=cc.find("Name",this.node).getComponent(cc.Label),this._sexAgeBg=cc.find("Layout/TagSexAge/Bg",this.node),this._sexIcon=cc.find("Layout/TagSexAge/Sex",this.node).getComponent(cc.Sprite),this._ageLabel=cc.find("Layout/TagSexAge/Age",this.node).getComponent(cc.Label),this._ageLabel.node.active=!1,this._tagAdmin=cc.find("Layout/TagAdmin",this.node),this._tagAdminLabel=cc.find("Layout/TagAdmin/Label",this.node).getComponent(cc.Label),this._tagOnMic=cc.find("Layout/TagOnMic",this.node),this._tagVip=cc.find("Layout/TagVip",this.node),this._vipBg=cc.find("Layout/TagVip/Bg",this.node),this._tagVipLabel=cc.find("Layout/TagVip/Label",this.node).getComponent(cc.Label)},e.prototype.initEvent=function(){var t=this;u.UIEventCenter.ButtonEvent(this._btnThis,function(){return t.onBtnThisClick()})},e.prototype.onBtnThisClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return h.default.Green(h.ClogKey.UI,"AdminInfoItem onBtnThisClick"),h.default.Green(h.ClogKey.UI,"OnlineInfoItem onBtnThisClick"),m.Session.BanBan.UId==this.data.UId?(h.default.Green(h.ClogKey.UI,"OnlineInfoItem \u70b9\u51fb\u81ea\u5df1"),[2]):[4,p.UIManager.CloseUI(d.UIRoomAdmin)];case 1:return t.sent(),f.ActionSheetController.SetAdmin(this.data),[2]}})})},e.prototype.refresh=function(){this.refreshIcon(),this.refreshSexIcon(),this.refreshTagAdmin(),this.refreshTagOnMic(),this.refreshTagVip(),this.refreshNameLabel()},e.prototype.refreshNameLabel=function(){this._nameLabel.string=c.StringLimit(this.data.Name,16)},e.prototype.refreshIcon=function(){var t=s.SS.ImageUrlProxy+this.data.Icon;a.UIUtil.LoadRemoteImage(t,this._icon)},e.prototype.refreshSexIcon=function(){switch(this.data.Sex){case l.EnumSex.Unknow:return void(this._sexIcon.node.active=!1);case l.EnumSex.Female:return a.UIUtil.ChangeSprite("T_Com_Female",this._sexIcon),void(this._sexAgeBg.color=new cc.Color(255,100,255,255));case l.EnumSex.Male:return a.UIUtil.ChangeSprite("T_Com_Male",this._sexIcon),void(this._sexAgeBg.color=new cc.Color(75,110,255,255))}},e.prototype.refreshTagAdmin=function(){this._tagAdmin.active=!1},e.prototype.refreshTagOnMic=function(){this._tagOnMic.active=!1},e.prototype.refreshTagVip=function(){if(this.data.Vip>0)return this._tagVip.active=!0,void(this._tagVipLabel.string=this.data.Vip.toString());this._tagVip.active=!1},e}(cc.Component);n.AdminInfoItem=y,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/StringUtil":"StringUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../../actionSheet/controller/ActionSheetController":"ActionSheetController","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","./UIRoomAdmin":"UIRoomAdmin"}],AgoraApi:[function(t,e,n){"use strict";cc._RF.push(e,"ca5dc06R35GFqwMOJ2bpg8Y","AgoraApi"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./agora/AgoraWeb"),r=t("./agora/AgoraWechat"),i=t("./agora/AgoraQQ"),a=t("../global/BaseEnum"),s=t("../global/SS"),l=function(){function t(){this._agora=null}return Object.defineProperty(t.prototype,"Agora",{get:function(){if(!this._agora)switch(s.SS.CurAgoraType){case a.EnumAgoraType.WEB:this._agora=new o.AgoraWeb;break;case a.EnumAgoraType.QQ:this._agora=new i.AgoraQQ;break;case a.EnumAgoraType.WECHAT:this._agora=new r.AgoraWechat}return this._agora},enumerable:!0,configurable:!0}),t}();n._AgoraApi=l,n.AgoraApi=new l,cc._RF.pop()},{"../global/BaseEnum":"BaseEnum","../global/SS":"SS","./agora/AgoraQQ":"AgoraQQ","./agora/AgoraWeb":"AgoraWeb","./agora/AgoraWechat":"AgoraWechat"}],AgoraBase:[function(t,e,n){"use strict";cc._RF.push(e,"e1e38TbI/xDcYiwNNiI+Lec","AgoraBase"),Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function t(){}return t.EventVoIPChatSpeakersChanged="EventVoIPChatSpeakersChanged",t.EventVoIPChatInterrupted="EventVoIPChatInterrupted",t.EventVoIPChatMembersChanged="EventVoIPChatMembersChanged",t}();n.EventAgora=r,function(t){t.AUDIENCE="audience",t.HOST="host"}(o=n.EnumAgoraRole||(n.EnumAgoraRole={}));var i=function(){return function(t,e){this.Message="",this.Level=0,this.Message=t,this.Level=e}}();n.AgoraErrorMessage=i,n.AGORA_ERROR={1001:new i("\u52a0\u8f7d\u5a92\u4f53\u5f15\u64ce\u5931\u8d25",2),1002:new i("\u542f\u52a8\u5a92\u4f53\u5f15\u64ce\u5f00\u59cb\u901a\u8bdd\u5931\u8d25",2),1003:new i("\u542f\u52a8\u6444\u50cf\u5934\u5931\u8d25",2),1004:new i("\u542f\u52a8\u89c6\u9891\u6e32\u67d3\u6a21\u5757\u5931\u8d25",2),1005:new i("\u97f3\u9891\u8bbe\u5907\u51fa\u73b0\u4e00\u822c\u6027\u9519\u8bef",2),1006:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u4f7f\u7528java\u8d44\u6e90\u51fa\u73b0\u9519\u8bef",2),1007:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u8bbe\u7f6e\u7684\u91c7\u6837\u9891\u7387\u51fa\u9519",1),1008:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u521d\u59cb\u5316\u64ad\u653e\u8bbe\u5907\u9519\u8bef",1),1009:new i("\u8bf7\u5f00\u542f\u5f55\u97f3\u6743\u9650\uff0c\u542f\u52a8\u64ad\u653e\u8bbe\u5907\u9519\u8bef",1),1010:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u505c\u6b62\u64ad\u653e\u8bbe\u5907\u51fa\u73b0\u9519\u8bef",0),1011:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u521d\u59cb\u5316\u5f55\u97f3\u8bbe\u5907\u9519\u8bef",1),1012:new i("\u8bf7\u5f00\u542f\u5f55\u97f3\u6743\u9650\uff0c\u542f\u52a8\u5f55\u97f3\u8bbe\u5907\u9519\u8bef",1),1027:new i("\u8bf7\u5f00\u542f\u5f55\u97f3\u6743\u9650\uff0c\u542f\u52a8\u5f55\u97f3\u8bbe\u5907\u9519\u8bef",1),1013:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u505c\u6b62\u5f55\u97f3\u8bbe\u5907\u9519\u8bef",0),1015:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u8fd0\u884c\u65f6\u51fa\u73b0\u9519\u8bef",2),1017:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u8fd0\u884c\u65f6\u5f55\u97f3\u9519\u8bef",2),1018:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u5f55\u97f3\u5931\u8d25",2),1022:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u521d\u59cb\u5316loopback\u8bbe\u5907\u9519\u8bef",2),1023:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u542f\u52a8loopback\u8bbe\u5907\u9519\u8bef",2),1108:new i("\u97f3\u9891\u8bbe\u5907\uff0c\u521d\u59cb\u5316\u64ad\u653e\u8bbe\u5907\u9519\u8bef",1),1501:new i("\u89c6\u9891\u8bbe\u5907\uff0c\u6444\u50cf\u5934\u6ca1\u6709\u6743\u9650",2)};var a=function(){function t(){this._uid="",this._token="",this._rid="",this._uids=[],this._role=o.AUDIENCE,this._muteMicrophone=!1,this._muteLoudspeaker=!1,this._speakingUids=[]}return Object.defineProperty(t.prototype,"Uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Token",{get:function(){return this._token},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rid",{get:function(){return this._rid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Uids",{get:function(){return this._uids},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Role",{get:function(){return this._role},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsMuteMicrophone",{get:function(){return this._muteMicrophone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsMuteLoudspeaker",{get:function(){return this._muteLoudspeaker},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SpeakingUids",{get:function(){return this._speakingUids.slice(0)},enumerable:!0,configurable:!0}),t.prototype.Dispose=function(){this._uid="",this._token="",this._rid="",this._uids=[],this._role=o.AUDIENCE,this._muteMicrophone=!1,this._muteLoudspeaker=!1},t}();n.AgoraBase=a,cc._RF.pop()},{}],AgoraQQ:[function(t,e,n){"use strict";cc._RF.push(e,"dbd24YV+GdErIoqfG8n7WOx","AgoraQQ");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./AgoraBase"),s=t("../../util/CryptoJS"),l=t("../../global/SS"),c=function(){function t(){}return t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,t)},t}(),u=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n._appId=e.QQMINIGAME_APPID,n._sessionKey="",n._joined=!1,n}return o(e,t),e.prototype.Init=function(t){return r(this,void 0,Promise,function(){return i(this,function(n){return this._appId=t.appId||e.QQMINIGAME_APPID,this._sessionKey=t.sessionKey||"",[2,Promise.resolve()]})})},e.prototype.JoinChannel=function(t){return r(this,void 0,Promise,function(){var e=this;return i(this,function(n){return t&&(this._uid=t.uid,t.hasOwnProperty("rid")&&(this._rid=l.SS.IsDevMode?"111_"+t.rid:"222_"+t.rid),this._token=t.token||"",this._role=t.role||a.EnumAgoraRole.AUDIENCE,this._muteMicrophone=!!t.muteMicrophone,this._muteLoudspeaker=!!t.muteLoudspeaker,c.log("\u3010Agora\u3011join channel params",JSON.stringify(t))),[2,new Promise(function(t,n){var o={nonceStr:e.createNonceStr(),timeStamp:parseInt(""+(new Date).getTime()/1e3),groupId:e._rid,muteConfig:{muteMicrophone:e._muteMicrophone,muteEarphone:e._muteLoudspeaker},success:function(e){var n=e.openIdList;this._uids=n,this._joined=!0,c.log("[Agora] join channel success","rid: "+this._rid,"uid: "+this._uid,"all: "+n.join(" ")),l.qq.onVoIPChatMembersChanged(this.onVoIPChatMembersChanged.bind(this)),l.qq.onVoIPChatSpeakersChanged(this.onVoIPChatSpeakersChanged.bind(this)),l.qq.onVoIPChatInterrupted(this.onVoIPChatInterrupted.bind(this)),t()}.bind(e),fail:function(t){c.log("[Agora] join channel fail","rid: "+this._rid,"uid: "+this._uid,"errCode: "+t.errCode,"errMsg: "+t.errMsg),-1===t.errCode&&(this._joined=!0),n(t.errMsg)}.bind(e),complete:function(t){c.log("[Agora] join channel complete","rid: "+this._rid,"uid: "+this._uid)}.bind(e)};o.signature=e.signature(e._appId,o.groupId,o.nonceStr,o.timeStamp),l.qq.joinVoIPChat(o)})]})})},e.prototype.LeaveChannel=function(){return r(this,void 0,Promise,function(){var t=this;return i(this,function(e){return[2,new Promise(function(e,n){var o={success:function(){c.log("[Agora] leave channel success","rid: "+this._rid,"uid: "+this._uid),this._joined=!1,this._speakingUids=[],l.SS.EventCenter.emit(a.EventAgora.EventVoIPChatSpeakersChanged),e()}.bind(t),fail:function(){c.log("[Agora] leave channel fail","rid: "+this._rid,"uid: "+this._uid),n()}.bind(t),complete:function(){c.log("[Agora] join channel complete","rid: "+this._rid,"uid: "+this._uid)}.bind(t)};l.qq.exitVoIPChat(o)})]})})},e.prototype.BecomeAudience=function(){return r(this,void 0,Promise,function(){var t=this;return i(this,function(e){return this._role=a.EnumAgoraRole.AUDIENCE,this._muteMicrophone?(c.log("[Agora] become audience success","rid: "+this._rid,"uid: "+this._uid),[2,Promise.resolve()]):[2,new Promise(function(e,n){var o={muteConfig:{muteMicrophone:!0,muteEarphone:t._muteLoudspeaker},success:function(){c.log("[Agora] become audience success","rid: "+this._rid,"uid: "+this._uid),this._muteMicrophone=!0,e()}.bind(t),fail:function(){c.log("[Agora] become audience fail","rid: "+this._rid,"uid: "+this._uid),n()}.bind(t),complete:function(){c.log("[Agora] become audience complete","rid: "+this._rid,"uid: "+this._uid)}.bind(t)};l.qq.updateVoIPChatMuteConfig(o)})]})})},e.prototype.BecomeHost=function(){return r(this,void 0,Promise,function(){var t=this;return i(this,function(e){return this._role=a.EnumAgoraRole.HOST,this._muteMicrophone?[2,new Promise(function(e,n){var o={muteConfig:{muteMicrophone:!1,muteEarphone:t._muteLoudspeaker},success:function(){c.log("[Agora] become host success","rid: "+this._rid,"uid: "+this._uid),this._muteMicrophone=!1,e()}.bind(t),fail:function(){c.log("[Agora] become host fail","rid: "+this._rid,"uid: "+this._uid),n()}.bind(t),complete:function(){c.log("[Agora] become host complete","rid: "+this._rid,"uid: "+this._uid)}.bind(t)};l.qq.updateVoIPChatMuteConfig(o)})]:(c.log("[Agora] become host success","rid: "+this._rid,"uid: "+this._uid),[2,Promise.resolve()])})})},e.prototype.MuteMicrophone=function(t){return r(this,void 0,Promise,function(){var e=this;return i(this,function(n){return this._role===a.EnumAgoraRole.AUDIENCE&&(t=!0),[2,new Promise(function(n,o){var r={muteConfig:{muteMicrophone:t,muteEarphone:e._muteLoudspeaker},success:function(){c.log("[Agora] "+(t?"":"un")+"mute microphone success","rid: "+this._rid,"uid: "+this._uid),this._muteMicrophone=t,n()}.bind(e),fail:function(){c.log("[Agora] "+(t?"":"un")+"mute microphone fail","rid: "+this._rid,"uid: "+this._uid),o()}.bind(e),complete:function(){c.log("[Agora] "+(t?"":"un")+"mute microphone complete","rid: "+this._rid,"uid: "+this._uid)}.bind(e)};l.qq.updateVoIPChatMuteConfig(r)})]})})},e.prototype.MuteLoudSpeaker=function(t){return r(this,void 0,Promise,function(){var e=this;return i(this,function(n){return[2,new Promise(function(n,o){var r={muteConfig:{muteMicrophone:e._muteMicrophone,muteEarphone:t},success:function(){c.log("[Agora] "+(t?"":"un")+"mute loadSpeaker success","rid: "+this._rid,"uid: "+this._uid),this._muteLoudspeaker=t,n()}.bind(e),fail:function(){c.log("[Agora] "+(t?"":"un")+"mute loadSpeaker fail","rid: "+this._rid,"uid: "+this._uid),o()}.bind(e),complete:function(){c.log("[Agora] "+(t?"":"un")+"mute loadSpeaker complete","rid: "+this._rid,"uid: "+this._uid)}.bind(e)};l.qq.updateVoIPChatMuteConfig(r)})]})})},e.prototype.Dispose=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.LeaveChannel()];case 1:return e.sent(),this._joined=!1,t.prototype.Dispose.call(this),[2]}})})},e.prototype.onVoIPChatMembersChanged=function(t){var e=t.openIdList?t.openIdList:[];this._uids=[].concat.apply([],e),c.log("[Agora] onVoIPChatMembersChanged","rid: "+this._rid,"uid: "+this._uid,"all: "+this._uids.join(" ")),l.SS.EventCenter.emit(a.EventAgora.EventVoIPChatMembersChanged)},e.prototype.onVoIPChatSpeakersChanged=function(t){c.log("[Agora] onVoIPChatSpeakersChanged","errCode: "+t.errCode,"errMsg: "+t.errMsg);var e=t.openIdList?t.openIdList:[];this._speakingUids=[].concat.apply([],e),c.log("[-----------------------Agora] _speakingUids","all: "+this._speakingUids.join("\uff0c")),l.SS.EventCenter.emit(a.EventAgora.EventVoIPChatSpeakersChanged)},e.prototype.onVoIPChatInterrupted=function(t){c.log("[Agora] onVoIPChatInterrupted","errCode: "+t.errCode,"errMsg: "+t.errMsg),this._speakingUids=[],l.SS.EventCenter.emit(a.EventAgora.EventVoIPChatSpeakersChanged),l.SS.EventCenter.emit(a.EventAgora.EventVoIPChatInterrupted)},e.prototype.signature=function(t,e,n,o){var r=[t,e,n,o].sort().join(""),i=s.HmacSHA256(r,this._sessionKey);return s.enc.Hex.stringify(i)},e.prototype.createNonceStr=function(){for(var t="1234567890abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ",e="",n=0;n<16;n++)e+=t[Math.trunc(Math.random()*t.length)];return e},e.QQMINIGAME_APPID="1110336983",e}(a.AgoraBase);n.AgoraQQ=u,cc._RF.pop()},{"../../global/SS":"SS","../../util/CryptoJS":"CryptoJS","./AgoraBase":"AgoraBase"}],AgoraWeb:[function(t,e,n){"use strict";cc._RF.push(e,"5912d8mw9BExrOpQK+zR8Je","AgoraWeb");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./AgoraBase"),s=t("../../global/SS"),l=function(){function t(){}return t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,t)},t}(),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._client=null,e._localStream=null,e._remoteStreams=[],e._inited=!1,e._joined=!1,e}return o(e,t),e.prototype.Init=function(t){return void 0===t&&(t={}),r(this,void 0,void 0,function(){var n,o=this;return i(this,function(r){return this._inited?[2]:(n=t.appId||e.AGORA_APPID,this._client=s.AgoraRTC.createClient({mode:e.AGORA_MODE,codec:e.AGORA_CODEC}),this.subscribeEvents(),this._client.setClientRole(this._role),[2,new Promise(function(t,e){o._client.init(n,function(){this._inited=!0,t()}.bind(o),function(t){l.log("[Agora] initAgora :: client join channel failed","rid: "+this._rid,"uid: "+this._uid,t),this._inited=!1,e(t)}.bind(o))})])})})},e.prototype.JoinChannel=function(t){return void 0===t&&(t={}),r(this,void 0,void 0,function(){var e=this;return i(this,function(n){return this._joined?[2]:(t&&(this._uid=t.uid,this._rid=t.rid||"",this._token=t.token||"",this._role=t.role||a.EnumAgoraRole.AUDIENCE,this._muteMicrophone=!!t.muteMicrophone,this._muteLoudspeaker=!!t.muteLoudspeaker),[2,new Promise(function(t,n){var o=function(e){l.log("[Agora] initAgora :: client join channel success","rid: "+this._rid,"uid: "+e),this._joined=!0,this._uid=e,this._localStream=s.AgoraRTC.createStream({streamID:this._uid,audio:!0,video:!1,screen:!1}),this._localStream.init(function(){l.log("[Agora] init local stream success"),this.playStream(this._localStream),this._role===a.EnumAgoraRole.HOST&&this.becomeHost()}.bind(this),function(t){l.log("[Agora] init local stream failed ",JSON.stringify(t))}.bind(this)),t()}.bind(e),r=function(t){l.log("[Agora] initAgora :: client join channel failed","rid: "+this._rid,"uid: "+this._uid,t),this._joined=!1,n(t)}.bind(e);e._client.join(e._token,e._rid,e._uid,o,r)})])})})},e.prototype.playStream=function(t){var e=t.getId();if(!document.getElementById("agoraweb_stream_"+e)){var n=document.createElement("div");n.id="agoraweb_stream_"+e,n.className="video-placeholder",n.style.width="0px",n.style.height="0px",document.body.appendChild(n)}t.play("agoraweb_stream_"+e,{fit:"contain",muted:this._muteLoudspeaker})},e.prototype.stopStream=function(t){var e=t.getId();t.stop("agoraweb_stream_"+e);var n=document.getElementById("agoraweb_stream_"+e);n&&document.body.removeChild(n)},e.prototype.subscribeEvents=function(){this._client&&(this._client.on("stream-added",this.onEventSteamAdded.bind(this)),this._client.on("stream-subscribed",this.onEventStreamSubscribed.bind(this)),this._client.on("stream-removed",this.onEventSteamRemoved.bind(this)),this._client.on("client-role-changed",this.onEventClientRoleChange.bind(this)))},e.prototype.onEventSteamAdded=function(t){var e=t.stream,n=e.getId();l.log("[Agora] stream-added: ",n),n!==this._localStream.getId()&&this._client.subscribe(e,{video:!1,audio:!0},function(t){l.log("[Agora] subscribe failed reason: ",t)})},e.prototype.onEventStreamSubscribed=function(t){var e=t.stream,n=e.getId();l.log("[Agora] new stream subscribed ",n),this._remoteStreams.some(function(t){return t.getId()==n})||(this._remoteStreams.push(e),this.playStream(e))},e.prototype.onEventSteamRemoved=function(t){l.log("[Agora] stream-removed: ",t.stream.getId());var e=t.stream,n=e.getId();this.stopStream(e),this._remoteStreams=this._remoteStreams.filter(function(t){return t.getId()!=n})},e.prototype.onEventClientRoleChange=function(t){l.log("[Agora] client-role-changed: ",t.role),this._role=t.role},e.prototype.unsubscribeEvents=function(){this._client&&(this._client.off("stream-added",this.onEventSteamAdded.bind(this)),this._client.off("stream-subscribed",this.onEventStreamSubscribed.bind(this)),this._client.off("stream-removed",this.onEventSteamRemoved.bind(this)),this._client.off("client-role-changed",this.onEventClientRoleChange.bind(this)))},e.prototype.BecomeHost=function(){return r(this,void 0,void 0,function(){var t=this;return i(this,function(e){return this._localStream?[2,new Promise(function(e,n){var o=function(){l.log("[Agora] publish success"),this._client.off("stream-published",o),e()}.bind(t);t._client.on("stream-published",o),t._client.publish(t._localStream,function(t){l.log("[Agora] publish failed ",t),this._client.off("stream-published",o),n(t)}.bind(t))})]:[2]})})},e.prototype.BecomeAudience=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return this._localStream?(this._client.unpublish(this._localStream,function(t){l.log("[Agora] publish failed ",t)}),[2]):[2]})})},e.prototype.MuteMicrophone=function(t){this._localStream&&(t?(this._localStream.muteAudio(),this._muteMicrophone=!0):(this._localStream.unmuteAudio(),this._muteMicrophone=!1))},e.prototype.MuteLoudSpeaker=function(t){if(t){for(var e=0;e<this._remoteStreams.length;e++)this._remoteStreams[e].muteAudio();this._muteLoudspeaker=!0}else{for(e=0;e<this._remoteStreams.length;e++)this._remoteStreams[e].unmuteAudio();this._muteLoudspeaker=!0}},e.prototype.LeaveChannel=function(){return r(this,void 0,void 0,function(){var t=this;return i(this,function(e){return l.log("[Agora] leave"),[2,new Promise(function(e,n){t._client&&t._client.leave(function(){l.log("[Agora] leaveChannel successful"),e()},function(t){l.log("[Agora] leaveChannel failed: ",t),n(t)})})]})})},e.prototype.Dispose=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this.LeaveChannel()];case 1:for(n.sent(),this.unsubscribeEvents(),this._localStream&&this._localStream.close(),this._localStream=null,e=0;e<this._remoteStreams.length;e++)this._remoteStreams[e].close();return this._remoteStreams=[],this._client=null,this._inited=!1,this._joined=!1,t.prototype.Dispose.call(this),[2]}})})},e.AGORA_APPID="1d274b401d8f4b14b1f1ec7fcf2e3d1d",e.AGORA_MODE="live",e.AGORA_CODEC="h264",e}(a.AgoraBase);n.AgoraWeb=c,cc._RF.pop()},{"../../global/SS":"SS","./AgoraBase":"AgoraBase"}],AgoraWechat:[function(t,e,n){"use strict";cc._RF.push(e,"7d1036Z4BdDqpXg1cfB17W0","AgoraWechat");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.BecomeAudience=function(){return r(this,void 0,Promise,function(){return i(this,function(t){return[2,void 0]})})},e.prototype.BecomeHost=function(){return r(this,void 0,Promise,function(){return i(this,function(t){return[2,void 0]})})},e.prototype.Init=function(t){return r(this,void 0,Promise,function(){return i(this,function(t){return[2,void 0]})})},e.prototype.JoinChannel=function(t){return r(this,void 0,Promise,function(){return i(this,function(t){return[2,void 0]})})},e.prototype.LeaveChannel=function(){return r(this,void 0,Promise,function(){return i(this,function(t){return[2,void 0]})})},e.prototype.MuteLoudSpeaker=function(t){return r(this,void 0,Promise,function(){return i(this,function(t){return[2,void 0]})})},e.prototype.MuteMicrophone=function(t){return r(this,void 0,Promise,function(){return i(this,function(t){return[2,void 0]})})},e}(t("./AgoraBase").AgoraBase);n.AgoraWechat=a,cc._RF.pop()},{"./AgoraBase":"AgoraBase"}],AndroidProcess:[function(t,e,n){"use strict";cc._RF.push(e,"fe65fgK4PFDDpjPtV1/9jRD","AndroidProcess");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../../base/script/frame/clog/Clog"),s=t("../../room/controller/RoomController"),l=t("../../common/controller/createRoom/CreateRoomController"),c=t("../../common/view/UILoading"),u=t("../../../base/script/frame/ui/UIManager"),h=t("../../match/view/UIMatching"),f=t("../../match/controller/MatchController"),p=t("../../../base/script/sdk/thinkingdata/controller/TaContoroller"),d=t("../../xiyou/controller/XiYouController"),m=t("../../login/model/SessionData"),y=t("../../common/controller/websocket/RoomSocket"),g=(t("../../room/controller/JoinMicController"),t("../../Constance")),C=t("../../other/EnumCenter"),_=t("../../game/controller/GameDataController"),v=function(){function t(){}return t.Start=function(){return o(this,void 0,void 0,function(){var t,e,n,o,d,m,y,C;return r(this,function(r){switch(r.label){case 0:return(t=i.qq.getLaunchOptionsSync())&&a.default.Trace(a.ClogKey.Entry,"\u3010case0\u3011\uff0c---[android]---\u6e38\u620f\u542f\u52a8\uff0c\u53c2\u6570\u4e3a:"+JSON.stringify(t)),1037==t.scene&&t&&t.referrerInfo&&t.referrerInfo.appId?(a.default.Trace(a.ClogKey.Entry,"\u3010case1\u3011\uff0c---[android]--- \u901a\u8fc7xiyou\u542f\u52a8\uff0c\u53c2\u6570:"+JSON.stringify(t)),(e=JSON.parse(t.referrerInfo.extraData))?(n=e.type,a.default.Green(a.ClogKey.Entry,"\u897f\u6e38type="+n),"createRoom"!=n?[3,2]:(m=""!=e.data.roomName?e.data.roomName:g.Constance.ROOM_NAME,y=g.Constance.ROOM_TYPE,C=e.data.identify,s.RoomController.OnJoinPassword="-1"===e.data.password?"":e.data.password,a.default.Green(a.ClogKey.Entry,"\u3010case1.1\u3011\uff0c---[android]---\u901a\u8fc7xiyou\u542f\u52a8\u521b\u5efa\u623f\u95f4\uff0c\u53c2\u6570:\u623f\u95f4\u540d\u79f0:"+m+"\u623f\u95f4\u7c7b\u578b:"+y+"xiyou identify:"+C+", password = "+s.RoomController.OnJoinPassword),[4,l.CreateRoomController.CreateRoom(m,y,C,s.RoomController.OnJoinPassword)])):[3,6]):[3,7];case 1:return r.sent(),[3,6];case 2:return"joinRoom"!=n?[3,3]:(s.RoomController.OnJoinRoomId=e.data.roomId,s.RoomController.OnJoinPassword="-1"===e.data.password?"":e.data.password,a.default.Green(a.ClogKey.Entry,"\u3010case1.2\u3011\uff0c---[android]---\u901a\u8fc7xiyou\u542f\u52a8\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4Id:"+s.RoomController.OnJoinRoomId+", password = "+s.RoomController.OnJoinPassword),[3,6]);case 3:return"matchRoom"!=n?[3,6]:(c.UILoading.Close(),f.MatchController.Identify=e.data.identify,[4,u.UIManager.OpenUI(h.default)]);case 4:return r.sent(),this.IsMatchJoin=!0,this.onQQHandler(),[4,f.MatchController.DonePromise()];case 5:r.sent(),s.RoomController.OnJoinPassword="",a.default.Green(a.ClogKey.Entry,"\u3010case1.3\u3011\uff0c---[ios]---\u901a\u8fc7xiyou\u542f\u52a8\u5339\u914d\u8fdb\u623f\uff0c\u623f\u95f4Id:"+s.RoomController.OnJoinRoomId+", password = "+s.RoomController.OnJoinPassword+", identify = "+f.MatchController.Identify),r.label=6;case 6:return[3,10];case 7:return t.query.hasOwnProperty("type")&&"shareJoinRoom"==t.query.type?(a.default.Green(a.ClogKey.Entry,"\u3010case2\u3011\uff0c---[android]---\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u542f\u52a8\uff0c\u6709\u53c2\u6570:"+JSON.stringify(t)),s.RoomController.OnJoinRoomId=t.query.roomId,s.RoomController.OnJoinPassword=t.query.password,o=t.query.uid,d=t.query.xy_uid,p.TaController.OpenShareLinkUrl(o,d),a.default.Green(a.ClogKey.Entry,"\u901a\u8fc7\u5206\u4eab\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4Id"+s.RoomController.OnJoinRoomId+"\u623f\u95f4\u5bc6\u7801 = "+s.RoomController.OnJoinPassword),[3,10]):[3,8];case 8:return a.default.Green(a.ClogKey.Entry,"\u3010case3\u3011\uff0c---[android]---\u5176\u5b83\u542f\u52a8\uff0c\u65e0\u53c2\u6570\uff0c\u9ed8\u8ba4\u521b\u5efa\u623f\u95f4"),m=g.Constance.ROOM_NAME,y=g.Constance.ROOM_TYPE,C=(new Date).valueOf().toString(),s.RoomController.OnJoinPassword="",a.default.Green(a.ClogKey.Entry,"\u4f7f\u7528\u9ed8\u8ba4\u521b\u5efa\u623f\u95f4\u65b9\u6848\uff0c\u623f\u95f4\u540d\u79f0:"+m+"\u623f\u95f4\u7c7b\u578b:"+y+"xiyou identify:"+C+", password = "+s.RoomController.OnJoinPassword),[4,l.CreateRoomController.CreateRoom(m,y,C,s.RoomController.OnJoinPassword)];case 9:r.sent(),r.label=10;case 10:return[4,s.RoomController.JoinRoom()];case 11:return r.sent(),this.onQQHandler(),[2]}})})},t.onQQHandler=function(){var e=this;this.IsMatchJoin||(i.qq.setKeepScreenOn({keepScreenOn:!0}),i.qq.onShow(function(n){t.IsShow||(t.IsShow=!0,e.GameShow(n),i.SS.EventCenter.emit(C.EnumGameMessageType.OnShow))}),i.qq.onHide(function(){t.IsShow=!1,e.GameHide()}),this.resetTimer())},t.GameShow=function(t){return o(this,void 0,void 0,function(){var e,n,o,i,m,y,C,v;return r(this,function(r){switch(r.label){case 0:return a.default.Green(a.ClogKey.Entry,"-------------qq---[android]---\u5207\u5165\u6e38\u620f\u4e8b\u4ef6------------------"),_.GameDataController.ShowTime=Date.now(),s.RoomController&&s.RoomController.CurRoom&&s.RoomController.CurRoom.RoomId&&(this.lastRoomId=s.RoomController.CurRoom.RoomId),null==t?[3,12]:(a.default.Green(a.ClogKey.Entry,"\u3010qqOnShowInfo\u3011:"+JSON.stringify(t)),1037==t.scene&&t&&t.referrerInfo&&t.referrerInfo.appId?(a.default.Green(a.ClogKey.Entry,"\u3010case1\u3011 >>: ---[android]---\u5207\u51fa\u53bb\u7684\u65f6\u5019\uff0c\u901a\u8fc7xiyou\u53c2\u6570\u518d\u6b21\u5207\u5165"),c.UILoading.Open(),s.RoomController.EndBanBanSocket(),d.XiYouController.EndXiYouSocket(),[4,d.XiYouController.ReconectXiyou()]):[3,9]);case 1:return r.sent(),(e=JSON.parse(t.referrerInfo.extraData))?(n=e.type,a.default.Green(a.ClogKey.Entry,"\u897f\u6e38type="+n),"createRoom"!=n?[3,3]:(o=""!=e.data.roomName?e.data.roomName:g.Constance.ROOM_NAME,i=g.Constance.ROOM_TYPE,m=e.data.identify,s.RoomController.OnJoinPassword="-1"===e.data.password?"":e.data.password,a.default.Green(a.ClogKey.Entry,"---[android]---\u901a\u8fc7xiyou\u521b\u5efa\u623f\u95f4\uff0c\u623f\u95f4\u540d\u79f0:"+o+"\u623f\u95f4\u7c7b\u578b:"+i+"xiyou identify:"+m+", password = "+s.RoomController.OnJoinPassword),[4,l.CreateRoomController.CreateRoom(o,i,m,s.RoomController.OnJoinPassword)])):[3,7];case 2:return r.sent(),[3,7];case 3:return"joinRoom"!=n?[3,4]:(s.RoomController.OnJoinRoomId=e.data.roomId,s.RoomController.OnJoinPassword="-1"===e.data.password?"":e.data.password,a.default.Green(a.ClogKey.Entry,"---[android]---\u901a\u8fc7xiyou\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4Id:"+s.RoomController.OnJoinRoomId+", password = "+s.RoomController.OnJoinPassword),[3,7]);case 4:return"matchRoom"!=n?[3,7]:(c.UILoading.Close(),[4,u.UIManager.OpenUI(h.default)]);case 5:return r.sent(),this.IsMatchOnshowJoin=!0,[4,f.MatchController.DonePromise()];case 6:r.sent(),s.RoomController.OnJoinPassword="",a.default.Green(a.ClogKey.Entry,"---[android]---\u901a\u8fc7onshow\u5339\u914d\u8fdb\u623f\uff0c\u623f\u95f4Id:"+s.RoomController.OnJoinRoomId+", password = "+s.RoomController.OnJoinPassword),r.label=7;case 7:return v=!1,this.lastRoomId&&this.lastRoomId==s.RoomController.OnJoinRoomId&&(a.default.Trace(a.ClogKey.Entry,"\u623f\u95f4\u53f7\u76f8\u540c"),v=!0),[4,s.RoomController.httpJoinRoom(v)];case 8:return r.sent(),c.UILoading.Close(),[2];case 9:return t.query.hasOwnProperty("type")&&"shareJoinRoom"==t.query.type?(a.default.Green(a.ClogKey.Entry,"\u3010case2\u3011>>:---[android]--- \u5207\u51fa\u53bb\u7684\u65f6\u5019\uff0c\u70b9\u4e86\u5206\u4eab\u94fe\u63a5\u5207\u5165"),c.UILoading.Open(),s.RoomController.EndBanBanSocket(),d.XiYouController.EndXiYouSocket(),[4,d.XiYouController.ReconectXiyou()]):[3,12];case 10:return r.sent(),s.RoomController.OnJoinRoomId=t.query.roomId,s.RoomController.OnJoinPassword=t.query.password,y=t.query.uid,C=t.query.xy_uid,p.TaController.OpenShareLinkUrl(y,C),v=!1,this.lastRoomId&&this.lastRoomId==s.RoomController.OnJoinRoomId&&(a.default.Trace(a.ClogKey.Entry,"\u623f\u95f4\u53f7\u76f8\u540c"),v=!0),[4,s.RoomController.httpJoinRoom(v)];case 11:return r.sent(),c.UILoading.Close(),[2];case 12:return this.ShowTime=(new Date).valueOf(),this.IsLostRoom?(a.default.Green(a.ClogKey.Entry,"\u3010case3.1\u3011>> \u5207\u51fa\u53bb\u4ec0\u4e48\u90fd\u6ca1\u5e72\uff0c5\u79d2\u624d\u540e\u5207\u56de\u6765"),[4,this.localRelink()]):[3,14];case 13:return r.sent(),[2];case 14:return this.IsDisconnect?(a.default.Green(a.ClogKey.Entry,"\u3010case3.2\u3011>> \u5207\u51fa\u53bb\u4ec0\u4e48\u90fd\u6ca1\u5e72\uff0c5\u79d2\u5185\u5207\u56de\u6765\u4f46\u662f\u65ad\u7f51\u4e86"),[4,this.localRelink()]):[3,16];case 15:return r.sent(),[2];case 16:return a.default.Green(a.ClogKey.Entry,"\u3010case5\u3011>> \u53ea\u8981\u5207\u51fa\u53bb\u90fd\u91cd\u8fde"),[4,this.localRelink()];case 17:return r.sent(),[2]}})})},t.resetTimer=function(){this.ShowTime=null,this.HideTime=null},Object.defineProperty(t,"IsLostRoom",{get:function(){if(null!=this.ShowTime&&null!=this.HideTime){var t=this.ShowTime-this.HideTime>5e3;if(a.default.Trace(a.ClogKey.Entry,"\u3010\u5207\u51fa\u79bb\u5f00\u65f6\u957f\u3011"+(this.ShowTime-this.HideTime)/1e3+"\u79d2"),this.resetTimer(),t)return a.default.Trace(a.ClogKey.Entry,"qq \u3010\u8fd4\u56de\u6e38\u620f\u3011=>\u3010\u79bb\u5f00\u65f6\u95f4\u592a\u957f\u3011"),!0}return a.default.Trace(a.ClogKey.Entry,"qq \u3010\u8fd4\u56de\u6e38\u620f\u3011=>\u30105\u79d2\u5185\u5207\u56de\u6765\u3011"),!1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsDisconnect",{get:function(){return!(!m.Session.BanBan.UId||0!=y.RoomSocket.IsOpen)&&(a.default.Trace(a.ClogKey.Entry,"qq \u3010\u8fd4\u56de\u6e38\u620f\u3011=>\u3010ws\u7f51\u7edc\u65ad\u5f00\u8fde\u63a5\u3011"),!0)},enumerable:!0,configurable:!0}),t.localRelink=function(){return o(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return c.UILoading.Open(),s.RoomController.EndBanBanSocket(),d.XiYouController.EndXiYouSocket(),[4,d.XiYouController.ReconectXiyou()];case 1:return e.sent(),s.RoomController.OnJoinRoomId=s.RoomController.CurRoom.RoomId,s.RoomController.OnJoinPassword=s.RoomController.CurRoom.Password,t=!1,this.lastRoomId&&this.lastRoomId==s.RoomController.OnJoinRoomId&&(a.default.Trace(a.ClogKey.Entry,"\u623f\u95f4\u53f7\u76f8\u540c"),t=!0),[4,s.RoomController.httpJoinRoom(t)];case 2:return e.sent(),c.UILoading.Close(),[2]}})})},t.GameHide=function(){if(a.default.Red(a.ClogKey.Entry,"\u3010\u4ece\u6e38\u620f\u5207\u5230\u540e\u53f0\u3011"),_.GameDataController.HideTime=Date.now(),this.HideTime=(new Date).valueOf(),f.MatchController.IsMatching)return f.MatchController.CloseMatch(!0),this.IsMatchJoin=!1,void(this.IsMatchOnshowJoin=!1)},t.IsMatchJoin=!1,t.IsMatchOnshowJoin=!1,t.HideTime=null,t.ShowTime=null,t.IsShow=!1,t.lastRoomId=null,t}();n.AndroidProcess=v,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../../base/script/sdk/thinkingdata/controller/TaContoroller":"TaContoroller","../../Constance":"Constance","../../common/controller/createRoom/CreateRoomController":"CreateRoomController","../../common/controller/websocket/RoomSocket":"RoomSocket","../../common/view/UILoading":"UILoading","../../game/controller/GameDataController":"GameDataController","../../login/model/SessionData":"SessionData","../../match/controller/MatchController":"MatchController","../../match/view/UIMatching":"UIMatching","../../other/EnumCenter":"EnumCenter","../../room/controller/JoinMicController":"JoinMicController","../../room/controller/RoomController":"RoomController","../../xiyou/controller/XiYouController":"XiYouController"}],AngleComponent:[function(t,e,n){"use strict";cc._RF.push(e,"5d2b5Uv2bpLhbWy8V9zFDWF","AngleComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../util/InfiniteScrollView"),a=t("./BaseComponent"),s=t("../../../base/script/global/SS"),l=t("../../other/EnumCenter"),c=t("../../room/controller/RoomController"),u=cc._decorator,h=u.ccclass,f=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mask=null,e._item=null,e._infiniteScrollView=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.Init=function(){this.initRoot(),this.initAngleScrollView(),this.initEvent(),this.InitComplete()},e.prototype.Reset=function(){},e.prototype.initRoot=function(){this._item=cc.find("Value",this.node),this._infiniteScrollView=cc.find("ScrollView",this.node).addComponent(i.default),this._mask=cc.find("Mask",this._infiniteScrollView.node)},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.initAngleScrollView=function(){this._infiniteScrollView.Init(this._item,this._mask,this.onScrollDelta.bind(this),this.onScrollStart.bind(this),this.onScrollEnd.bind(this))},e.prototype.onScrollStart=function(){c.RoomController.IsMyRound()&&s.SS.EventCenter.emit(l.EnumGameMessageType.AngleChangeStart)},e.prototype.onScrollDelta=function(t){c.RoomController.IsMyRound()&&s.SS.EventCenter.emit(l.EnumGameMessageType.AngleChange,.056*t)},e.prototype.onScrollEnd=function(){c.RoomController.IsMyRound()&&s.SS.EventCenter.emit(l.EnumGameMessageType.AngleChangeEnd)},e=r([h],e)}(a.default));n.default=f,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../../util/InfiniteScrollView":"InfiniteScrollView","./BaseComponent":"BaseComponent"}],ArrayUtil:[function(t,e,n){"use strict";cc._RF.push(e,"2d6cbPjNgZHML91AOyOKVJg","ArrayUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.IsArrayContain=function(t,e){return t.indexOf(e)>=0},n.ArrayRemove=function(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)},n.ArrayCopy=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];e.push(o)}},cc._RF.pop()},{}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"3baa7moMjBJR5ioTLHMkz9b","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../util/StringUtil"),r=t("../res/ResManager"),i=t("../clog/Clog"),a=t("../storage/LocalStorage"),s=t("../../global/SS"),l=function(){function t(){this._soundVolume=null,this._musicVolume=null}return Object.defineProperty(t.prototype,"SoundVolume",{get:function(){if(null==this._soundVolume)if(s.qq)try{var t=s.qq.getStorageSync("SoundVolume");this._soundVolume=t||1}catch(t){i.default.Error("qq-getStorageSync SoundVolume error")}else this._soundVolume=a.LocalStorageUtil.GetNumber("SoundVolume",1);return this._soundVolume},set:function(t){if(this._soundVolume=t,s.qq)try{s.qq.setStorageSync("SoundVolume",t)}catch(t){i.default.Error("qq-setStorageSync error")}else a.LocalStorageUtil.SetNumber("SoundVolume",this._soundVolume);n.AudioManager.SetSoundVolume(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MusicVolume",{get:function(){if(null==this._musicVolume)if(s.qq)try{var t=s.qq.getStorageSync("MusicVolume");this._musicVolume=t||1}catch(t){i.default.Error("qq-getStorageSync MusicVolume error")}else this._musicVolume=a.LocalStorageUtil.GetNumber("MusicVolume",1);return this._musicVolume},set:function(t){if(this._musicVolume=t,s.qq)try{s.qq.setStorageSync("MusicVolume",t)}catch(t){i.default.Error("qq-setStorageSync MusicVolume error")}else a.LocalStorageUtil.SetNumber("MusicVolume",this._musicVolume);n.AudioManager.SetMusicVolume(t)},enumerable:!0,configurable:!0}),t.prototype.Init=function(){this.EffectSoundList=new Map,cc.audioEngine.setMusicVolume(this.MusicVolume),cc.audioEngine.setEffectsVolume(this.SoundVolume)},t.prototype.PlayMusic=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=null),o.IsNullOrEmpty(t)||r.ResManager.LoadRes(t,cc.AudioClip,function(o,r){if(o)i.default.Error("Load Music error! Music name= "+t+",err:"+JSON.stringify(o));else{var a=cc.audioEngine.playMusic(r,e);cc.audioEngine.setFinishCallback(a,function(){n&&n()})}})},t.prototype.StopMusic=function(){cc.audioEngine.stopMusic()},t.prototype.PlaySound=function(t){if(!(o.IsNullOrEmpty(t)||this.SoundVolume<=.01)){var e=this.EffectSoundList.get(t);e||(e=new Array,this.EffectSoundList.set(t,e));var n=(new Date).getTime();if(!(e.length>0&&n-e[0]<150)){for(;e.length>0&&n-e[0]>500;)e.shift();e.length>7||(e.push(n),r.ResManager.LoadRes(t,cc.AudioClip,function(e,n){e?i.default.Error("Load Music error! Music name= "+t+",err:"+JSON.stringify(e)):cc.audioEngine.playEffect(n,!1)}))}}},t.prototype.StopSound=function(t){t<0||cc.audioEngine.stopEffect(t)},t.prototype.StopAllSounds=function(){cc.audioEngine.stopAllEffects()},t.prototype.SetSoundVolume=function(t){cc.audioEngine.setEffectsVolume(t)},t.prototype.SetMusicVolume=function(t){cc.audioEngine.setMusicVolume(t)},t}();n.AudioManager=new l,cc._RF.pop()},{"../../global/SS":"SS","../../util/StringUtil":"StringUtil","../clog/Clog":"Clog","../res/ResManager":"ResManager","../storage/LocalStorage":"LocalStorage"}],Bag:[function(t,e,n){"use strict";cc._RF.push(e,"0c005sMmvdIjqyc02Ycd0Yu","Bag");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(cc.Component);n.Bag=r,cc._RF.pop()},{}],BallComponent:[function(t,e,n){"use strict";cc._RF.push(e,"c7f5fLVvk5DcrCkaaa9GEwK","BallComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/clog/Clog"),i=t("../../../base/script/util/ArrayUtil"),a=t("../../common/controller/http/HttpApi"),s=t("../../Constance"),l=t("../../other/EnumCenter"),c=t("../controller/GameDataController"),u=t("../entity/Ball"),h=t("./BaseComponent"),f=t("../../util/UtilityEx"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ball=null,e._ballWhite=null,e._ballArray=[],e._ballDict={},e.initPosCenter=cc.v2(0,0),e.initPosGap=0,e._bInitComplete=!1,e}return o(e,t),e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.InitComplete()},e.prototype.IsInitComplete=function(){return this._bInitComplete},e.prototype.Reset=function(){this._bInitComplete=!1,this.resetAllBalls()},e.prototype.SetWhiteBallLocalPos=function(t){this._ballWhite.Reset(),this._ballWhite.node.setPosition(t)},e.prototype.GetWhiteBallPos=function(){return this._ballWhite.node.convertToWorldSpaceAR(cc.Vec3.ZERO)},e.prototype.GetWhiteBallLocalPos=function(){return this._ballWhite.node.getPosition()},e.prototype.GetWhiteBall=function(){return this._ballWhite},e.prototype.EnableWhiteBall=function(t){this._ballWhite.node.active=t},e.prototype.HitWhiteBall=function(t,e){this._ballWhite.Hit(t,e)},e.prototype.IsAllBallMoveEnd=function(){for(var t=this._ballWhite.GetBallState()===l.EnumBallState.MoveEnd||this._ballWhite.GetBallState()===l.EnumBallState.Idle||this._ballWhite.GetBallState()===l.EnumBallState.InHole,e=0;e<this._ballArray.length;e++)t=t&&(this._ballArray[e].GetBallState()===l.EnumBallState.MoveEnd||this._ballArray[e].GetBallState()===l.EnumBallState.Idle||this._ballArray[e].GetBallState()===l.EnumBallState.InHole);return t},e.prototype.GetAllBallState=function(){for(var t=[],e=0;e<this._ballArray.length;e++)t.push(this._ballArray[e].GetBallState());return t},e.prototype.GetAllBall=function(){return this._ballArray},e.prototype.GetAllActiveBall=function(){for(var t=[],e=0;e<this._ballArray.length;e++)this._ballArray[e].GetBallState()!=l.EnumBallState.InHole&&t.push(this._ballArray[e]);return t},e.prototype.GetAllActiveBallPos=function(){for(var t=[],e=0;e<this._ballArray.length;e++)this._ballArray[e].GetBallState()!=l.EnumBallState.InHole&&t.push(this._ballArray[e].node.getPosition());return t},e.prototype.GetAllInHoleBall=function(){for(var t=[],e=0;e<this._ballArray.length;e++)this._ballArray[e].GetBallState()===l.EnumBallState.InHole&&t.push(this._ballArray[e]);return t.sort(function(t,e){return t.InHoleTime-e.InHoleTime}),t},e.prototype.SaveLastRoundValue=function(){this._ballWhite.SaveLastRoundValue(),this._ballArray.forEach(function(t){t.SaveLastRoundValue()})},e.prototype.ResetToLastRoundValue=function(){},e.prototype.CreateBallNet=function(){this.createBall(),a.default.Init(this._ballWhite,this._ballArray)},e.prototype.CreateBallWithInfo=function(t){var e=this;if(t.cue_ball){var n=cc.instantiate(this._ball);n.active=!0,this.node.addChild(n),this._ballWhite=n.addComponent(u.default),this._ballWhite.Init(l.EnumBallType.White),this._ballWhite.BallNum=0,this._ballWhite.SetPosition(new cc.Vec2(t.cue_ball.location.x,t.cue_ball.location.y))}t.balls&&t.balls.forEach(function(t){var n=cc.instantiate(e._ball).addComponent(u.default);n.node.active=!0,n.Init(l.EnumBallType.Other),e.node.addChild(n.node),n.BallNum=t.number,n.SetPosition(new cc.Vec2(t.location.x,t.location.y)),e._ballArray.push(n),e._ballDict[n.BallNum]=n},this),t.holed_balls&&t.holed_balls.forEach(function(t){var n=cc.instantiate(e._ball).addComponent(u.default);n.node.active=!1,n.Init(l.EnumBallType.Other),n.BallNum=t.number,e._ballArray.push(n),e._ballDict[n.BallNum]=n,e._ballDict[t.number].RefreshInHode(t.hole)},this),this._bInitComplete=!0,r.default.Trace(r.ClogKey.UI,"this._ballWhite pos = "+this._ballWhite.node.position)},e.prototype.RefreshBall=function(t){var e=this;this.GetAllActiveBall();0!==f.CheckDict(this._ballDict)&&(this._ballArray.forEach(function(t){t.ResetRigiBody()}),t.balls&&t.balls.forEach(function(t){e._ballDict[t.number].SetPosition(new cc.Vec2(t.location.x,t.location.y))},this),t.cue_ball&&this._ballWhite.SetPosition(new cc.Vec2(t.cue_ball.location.x,t.cue_ball.location.y)),t.holed_balls&&t.holed_balls.forEach(function(t){e._ballDict[t.number].RefreshInHode(t.hole)},this))},e.prototype.initRoot=function(){this._ball=cc.find("Ball",this.node.parent)},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.createBall=function(){this._ballDict={};for(var t=0;t<s.Constance.BALL_COUNT;t++)if(0==t){var e=cc.instantiate(this._ball);e.active=!0,this.node.addChild(e),this._ballWhite=e.addComponent(u.default),this._ballWhite.Init(l.EnumBallType.White),this._ballWhite.BallNum=0}else{var n=cc.instantiate(this._ball).addComponent(u.default);n.node.active=!0,n.Init(l.EnumBallType.Other),this.node.addChild(n.node),n.BallNum=t,this._ballArray.push(n)}this.initPosCenter=cc.v2(0,.156*c.GameDataController.TableSize.y),this.initPosGap=36.5,this.resetAllBalls(),this._bInitComplete=!0,r.default.Trace(r.ClogKey.UI,"this._ballWhite pos = "+this._ballWhite.node.position)},e.prototype.TestBallData=function(t,e,n){for(var o=this,r=[],s=1;s<=15;s++)r.push(s);t.forEach(function(t){o._ballDict[t].RefreshInHode(1),i.ArrayRemove(r,t)}),r.forEach(function(t){o._ballDict[t].SetPosition(o._ballDict[t].node.getPosition())}),a.default.ShootResult(this.GetWhiteBall(),this.GetAllActiveBall(),this.GetAllInHoleBall(),e,n)},e.prototype.resetAllBalls=function(){this._ballWhite.SetPosition(new cc.Vec2(0,.25*c.GameDataController.TableSize.y-c.GameDataController.TableSize.y/2)),this._ballWhite.Reset();for(var t=0,e=0,n=[2,3,4,5,6,7],o=[9,10,11,12,13,14,15],r=(n.concat(o),0);r<s.Constance.BALL_COUNT-1;r++){e<=0&&(e=++t);var a=this.initPosCenter.add(cc.v2(-(t-1)/2+(e-1),(t-1)*Math.sin(Math.PI/3)).mulSelf(this.initPosGap)),l=this._ballArray[r];l.SetPosition(a),console.log("ballNum = "+l.BallNum+", "+l.node.position),l.Reset(),e--,4===r?l.BallNum=8:0===r?l.BallNum=1:r%2==0&&n.length>0?(l.BallNum=n[Math.floor(10*Math.random())%n.length],i.ArrayRemove(n,l.BallNum)):(l.BallNum=o[Math.floor(10*Math.random())%o.length],i.ArrayRemove(o,l.BallNum)),this._ballDict[l.BallNum]=l,console.log("ballNum = "+l.BallNum+", "+l.node.position)}},e.prototype.onDestroy=function(){this.removeEvent()},e}(h.default);n.default=p,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/util/ArrayUtil":"ArrayUtil","../../Constance":"Constance","../../common/controller/http/HttpApi":"HttpApi","../../other/EnumCenter":"EnumCenter","../../util/UtilityEx":"UtilityEx","../controller/GameDataController":"GameDataController","../entity/Ball":"Ball","./BaseComponent":"BaseComponent"}],BallTexture:[function(t,e,n){"use strict";cc._RF.push(e,"b8131gJtSRH7IZI/s4hcihA","BallTexture");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ballTextures=[],e._ballSphere=null,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot()},e.prototype.initRoot=function(){this._ballSphere=cc.find("Sphere",this.node).getComponent(cc.MeshRenderer)},e.prototype.SetTexture=function(t){this._ballSphere||(this._ballSphere=cc.find("Sphere",this.node).getComponent(cc.MeshRenderer)),this._ballSphere.getMaterial(0).setProperty("diffuseTexture",this.ballTextures[t])},r([s({type:Array(cc.Texture2D)})],e.prototype,"ballTextures",void 0),e=r([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],Ball:[function(t,e,n){"use strict";cc._RF.push(e,"00fa0kCJQFEFaXMZ/uyYFke","Ball");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../other/EnumCenter"),s=t("../../Constance"),l=t("../../util/UtilityEx"),c=t("./BallTexture"),u=t("../../../base/script/frame/audio/AudioManager"),h=t("../controller/GameDataController"),f=cc._decorator,p=f.ccclass,d=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ballSphere=null,e._rigidBody=null,e._ballTexture=null,e.ballNum=-1,e.ballType=a.EnumBallType.Other,e._ballState=a.EnumBallState.Idle,e._lastRoundBallState=a.EnumBallState.Idle,e._lastRoundBallPosition=cc.Vec2.ZERO,e._inHoleTime=0,e._waitCount=0,e._inHoleNum=0,e._lastWorldPos=new cc.Vec2(0,0),e}var n;return o(e,t),n=e,Object.defineProperty(e.prototype,"InHoleTime",{get:function(){return this._inHoleTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InHoleNum",{get:function(){return this._inHoleNum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ballState",{get:function(){return this._ballState},set:function(t){this._ballState!=t&&(this._ballState=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BallNum",{get:function(){return this.ballNum},set:function(t){this.ballNum!=t&&(this.ballNum=t,this.refreshBallTexture())},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){this.remvoeEvent()},e.prototype.lateUpdate=function(t){h.GameDataController.IsGameStart&&this.ballState!==a.EnumBallState.InHole&&(this.updateBallAngle(),Math.abs(this._rigidBody.linearVelocity.len())<s.Constance.BALL_MIN_SPEED&&(this._rigidBody.linearVelocity=new cc.Vec2(0,0),this._rigidBody.angularVelocity=0))},e.prototype.Init=function(t){this.initRoot(),this.initEvent(),this.ballType=t,this.ballType===a.EnumBallType.White?this._rigidBody.linearDamping=s.Constance.WHITE_BALL_LINEAR_DAMPING:this._rigidBody.linearDamping=s.Constance.COLOR_BALL_LINEAR_DAMPING},e.prototype.Hit=function(t,e){var n=e*Math.PI/180;t*=s.Constance.CUE_BASE_POWER,this._rigidBody.applyForceToCenter(new cc.Vec2(Math.sin(n)*t,-Math.cos(n)*t),!0)},e.prototype.GetBallState=function(){return this.ballState},e.prototype.Reset=function(){this._rigidBody.linearVelocity=cc.Vec2.ZERO,this._rigidBody.angularVelocity=0,this.ballState=a.EnumBallState.Idle,this.node.active=!0,this._ballSphere.node.eulerAngles=cc.Vec3.ZERO,this._inHoleNum=0},e.prototype.ResetRigiBody=function(){this._rigidBody.linearVelocity=cc.Vec2.ZERO,this._rigidBody.angularVelocity=0},e.prototype.GetBallType=function(){return this.ballType},e.prototype.InHole=function(t){this.ballState=a.EnumBallState.InHole,this._rigidBody.linearVelocity=cc.Vec2.ZERO,this._rigidBody.angularVelocity=0,this.node.active=!1,this._inHoleNum=t,this._inHoleTime=Date.now(),i.SS.EventCenter.emit(a.EnumGameMessageType.BallInHole,this.ballNum)},e.prototype.RefreshInHode=function(t){this.ballState=a.EnumBallState.InHole,this._rigidBody.linearVelocity=cc.Vec2.ZERO,this._rigidBody.angularVelocity=0,this.node.active=!1,this._inHoleNum=t},e.prototype.SetPosition=function(t){this.node.active=!1,this._rigidBody.linearVelocity=cc.Vec2.ZERO,this._rigidBody.angularVelocity=0,this.ballState=a.EnumBallState.Idle,this.node.active=!0,this.node.setPosition(t),this._lastWorldPos=this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.updatePos()},e.prototype.SaveLastRoundValue=function(){this._lastRoundBallPosition=this.node.getPosition(),this._lastRoundBallState=this._ballState},e.prototype.ResetToLastRoundValue=function(){this._rigidBody.linearVelocity=cc.Vec2.ZERO,this._rigidBody.angularVelocity=0,this.node.setPosition(this._lastRoundBallPosition),this.ballState=this._lastRoundBallState,this.node.active=this.ballState!=a.EnumBallState.InHole,this._lastWorldPos=this.node.convertToWorldSpaceAR(cc.v2(0,0))},e.prototype.initRoot=function(){this._ballSphere=cc.find("Sphere",this.node).getComponent(cc.MeshRenderer),this._rigidBody=this.node.getComponent(cc.RigidBody),this._ballTexture=this.getComponent(c.default)},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClickBall,this)},e.prototype.remvoeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClickBall,this)},e.prototype.updateBallAngle=function(){if(this.ballState!==a.EnumBallState.InHole){var t=this.node.convertToWorldSpaceAR(cc.v2(0,0)),e=t.sub(this._lastWorldPos);if(0===e.x&&0===e.y&&0===this._rigidBody.linearVelocity.x&&0===this._rigidBody.linearVelocity.y)return this.ballState===a.EnumBallState.Move&&(this.ballState=a.EnumBallState.MoveEnd,i.SS.EventCenter.emit(a.EnumGameMessageType.BallMoveEnd)),void(this.ballState===a.EnumBallState.MoveEnd&&(this.ballState=a.EnumBallState.Idle));this.ballState=a.EnumBallState.Move;var n=this._ballSphere.node.scale/2,o=-e.y/n,r=e.x/n;l.RotateAround(this._ballSphere.node,o,r,0),this._lastWorldPos=t,this.updatePos()}},e.prototype.refreshBallTexture=function(){this._ballTexture.SetTexture(this.ballNum)},e.prototype.updatePos=function(){this.ballType!=a.EnumBallType.White||h.GameDataController.WhiteBallPos.equals(this.node.position)||(h.GameDataController.WhiteBallPos=this.node.position)},e.prototype.onBeginContact=function(t,e,o){if(h.GameDataController.IsGameStart&&e&&o){var r=e.node.getComponent(n),s=o.node.getComponent(n);null!=r&&s&&(r.GetBallType()===a.EnumBallType.White&&i.SS.EventCenter.emit(a.EnumGameMessageType.WhiteBallCollition,s.BallNum),u.AudioManager.PlaySound(a.EnumAudio.BallCollider))}},e.prototype.onClickBall=function(){i.SS.EventCenter.emit(a.EnumGameMessageType.ClickBall,this)},e.prototype.onClickWhiteBall=function(){},e=n=r([p],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../../../base/script/frame/audio/AudioManager":"AudioManager","../../../base/script/global/SS":"SS","../../Constance":"Constance","../../other/EnumCenter":"EnumCenter","../../util/UtilityEx":"UtilityEx","../controller/GameDataController":"GameDataController","./BallTexture":"BallTexture"}],BanBanData:[function(t,e,n){"use strict";cc._RF.push(e,"a7b91T7ei9DDrmZ6zAw17Rl","BanBanData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){void 0===t&&(t=null),null!=t&&(this.UId=t.uid,this.Name=t.name,this.Icon=t.icon,this.Role=t.role,this.Sex=t.Sex,this.VipNew=t.vip_new,this.Title=t.title,this.Position=t.position?t.position:-1,this.Sign=t.sign,this.Token=t.token)}}();n.BanBanData=o,cc._RF.pop()},{}],BaseComponent:[function(t,e,n){"use strict";cc._RF.push(e,"c84a1K7vXxNYbGKMlT/4dFw","BaseComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/global/SS"),i=t("../../other/EnumCenter"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.InitComplete=function(){r.SS.EventCenter.emit(i.EnumGameMessageType.GameInit)},e}(cc.Component);n.default=a,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter"}],BaseEnum:[function(t,e,n){"use strict";cc._RF.push(e,"91dd7U4Hd9Al4pRvx55FXsm","BaseEnum"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.NONE=-1]="NONE",t[t.WEB=0]="WEB",t[t.QQ=1]="QQ",t[t.WECHAT=2]="WECHAT"}(n.EnumPlatform||(n.EnumPlatform={})),function(t){t.NONE="none",t.WEB="web",t.QQ="qq",t.WECHAT="wx"}(n.EnumPlatformStr||(n.EnumPlatformStr={})),function(t){t[t.NONE=-1]="NONE",t[t.WEB=0]="WEB",t[t.QQ=1]="QQ",t[t.WECHAT=2]="WECHAT"}(n.EnumAgoraType||(n.EnumAgoraType={})),function(t){t.NONE="none",t.Chat9="9Chat",t.Billiards="billiards"}(n.EnumAppName||(n.EnumAppName={})),cc._RF.pop()},{}],BasePlatform:[function(t,e,n){"use strict";cc._RF.push(e,"41067/9etZCZKGSiJuWX55I","BasePlatform"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){}}();n.BasePlatform=o,cc._RF.pop()},{}],BaseSDK:[function(t,e,n){"use strict";cc._RF.push(e,"d7a5bzGGP5DOLZvy0qSENMB","BaseSDK"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],CallComponent:[function(t,e,n){"use strict";cc._RF.push(e,"62dcfOkSAxHdo05FsZETarf","CallComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../base/script/global/SS"),i=t("../../../../base/script/util/UIEventCenter"),a=t("../../../match/controller/MatchController"),s=t("../../../other/EnumCenter"),l=t("../../controller/RoomController"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._shadow=null,e._label=null,e._btnArrow=null,e._btnCall=null,e._bStretch=!1,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refreshCallView()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._shadow=cc.find("Shadow",this.node),this._label=cc.find("BtnCall",this.node).getComponent(cc.Label),this._btnArrow=cc.find("BtnArrow",this.node).getComponent(cc.Button),this._btnCall=cc.find("BtnCall",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;i.UIEventCenter.ButtonEvent(this._btnCall,function(){return t.onClickBtnCall()}),i.UIEventCenter.ButtonEvent(this._btnArrow,function(){return t.onClickArrow()}),r.SS.EventCenter.on(s.EnumGameMessageType.GameRoomStateRefresh,this.refreshCallView,this)},e.prototype.removeEvent=function(){r.SS.EventCenter.off(s.EnumGameMessageType.GameRoomStateRefresh,this.refreshCallView,this)},e.prototype.refreshCallView=function(){var t=l.RoomController.GetSelfSeat();if(t&&(t.IsCreator||t.IsHost))if(l.RoomController.CurRoom.BiState==s.EnumGameRoomState.Wait){this._bStretch=!0,this.refreshUI();for(var e=0;e<l.RoomController.Seats.length;e++){if(0===l.RoomController.Seats[e].UId)return void(this.node.active=!0)}this.node.active=!1}else this.node.active=!1;else this.node.active=!1},e.prototype.onClickBtnCall=function(){this._bStretch&&(a.MatchController.IsCalling?a.MatchController.DoMatchStop():a.MatchController.DoMatchCall())},e.prototype.onClickArrow=function(){this._bStretch=!this._bStretch,this.refreshUI()},e.prototype.refreshUI=function(){this._btnArrow.node.scaleX=this._bStretch?-1:1,this.node.width=this._bStretch?a.MatchController.IsCalling?232:132:79,this._btnArrow.node.getComponent(cc.Widget).updateAlignment(),this._label.string=this._bStretch?a.MatchController.IsCalling?"\u5f81\u53ec\u4e2d \xb7 \u505c\u6b62":"\u5f81\u53ec":"",this._label.node.getComponent(cc.Widget).updateAlignment()},e}(cc.Component);n.CallComponent=c,cc._RF.pop()},{"../../../../base/script/global/SS":"SS","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../match/controller/MatchController":"MatchController","../../../other/EnumCenter":"EnumCenter","../../controller/RoomController":"RoomController"}],ChatInputController:[function(t,e,n){"use strict";cc._RF.push(e,"a2a6cdJXFNFaoOXu1T7f1H4","ChatInputController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../../base/script/frame/clog/Clog"),s=t("../../common/controller/checkContent/CheckContentController"),l=t("../../common/view/UIToast"),c=t("../../common/controller/websocket/RoomSocketInput"),u=t("../../other/EventCommond"),h=function(){function t(){}return t.InputEnded=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,s.CheckContentController.CheckContent(t)];case 1:return e.sent()?(c.RoomSocketInput.InputChat(t),[2]):(l.UIToast.Show("\u6587\u5b57\u5185\u5bb9\u4e0d\u5408\u6cd5"),[2])}})})},t.QQInputHandler=function(){return o(this,void 0,Promise,function(){var t;return r(this,function(e){return t=this,[2,new Promise(function(e){var n={defaultValue:"",maxLength:100,multiple:!1,coonfirmHold:!0,confirmType:"done",success:function(n){a.default.Trace(a.ClogKey.Api,"\u8c03\u8d77\u8f93\u5165\u6cd5\u6210\u529f"),i.qq.onKeyboardConfirm(function(e){t.OffKeyboardConfirm(),t.InputEnded(e.value),i.SS.EventCenter.emit(u.EventCommond.CloseQQChatBack)}),e(!0)},fail:function(){a.default.Trace(a.ClogKey.Api,"\u8c03\u8d77\u8f93\u5165\u6cd5\u5931\u8d25"),e(!1)}};i.qq.showKeyboard(n)})]})})},t.OffKeyboardConfirm=function(){i.qq.offKeyboardConfirm(),a.default.Trace(a.ClogKey.Api,"\u79fb\u9664QQ\u8f93\u5165\u6cd5\u5b8c\u6210\u4e8b\u4ef6")},t.QQHideKeyBoard=function(){var t={success:function(){a.default.Trace(a.ClogKey.Api,"\u5173\u95ed\u8f93\u5165\u6cd5\u6210\u529f")},fail:function(){a.default.Trace(a.ClogKey.Api,"\u5173\u95ed\u8f93\u5165\u6cd5\u5931\u8d25")}};i.qq.hideKeyboard(t),this.OffKeyboardConfirm()},t}();n.ChatInputController=h,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../common/controller/checkContent/CheckContentController":"CheckContentController","../../common/controller/websocket/RoomSocketInput":"RoomSocketInput","../../common/view/UIToast":"UIToast","../../other/EventCommond":"EventCommond"}],ChatInput:[function(t,e,n){"use strict";cc._RF.push(e,"6854bcVs+pHUJS2k8bH6C0x","ChatInput");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../base/script/util/UIEventCenter"),i=t("../../controller/ChatInputController"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.resetInput()},e.prototype.initRoot=function(){this._btnClose=cc.find("BtnClose",this.node).getComponent(cc.Button),this._editBox=cc.find("Input/EditBox",this.node).getComponent(cc.EditBox),this._btnSend=cc.find("Input/BtnSend",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;r.UIEventCenter.ButtonEvent(this._btnSend,function(){return t.onBtnSendClick()}),r.UIEventCenter.ButtonEvent(this._btnClose,function(){return t.onBtnCloseClick()})},e.prototype.onBtnSendClick=function(){var t=this._editBox.string;this.node.active=!1,this.resetInput(),i.ChatInputController.InputEnded(t)},e.prototype.onBtnCloseClick=function(){this.node.active=!1},e.prototype.resetInput=function(){this._editBox.string=""},e.prototype.setFocus=function(){this._editBox.focus()},e}(cc.Component);n.ChatInput=a,cc._RF.pop()},{"../../../../base/script/util/UIEventCenter":"UIEventCenter","../../controller/ChatInputController":"ChatInputController"}],Chat:[function(t,e,n){"use strict";cc._RF.push(e,"3bd1fCX8sNHSrTljobENH8j","Chat");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../other/EventCommond"),i=t("./RoomChat"),a=t("../../../../base/script/global/SS"),s=t("../../../../base/script/frame/clog/Clog"),l=t("./RoomDescription"),c=t("./RoomWellcome"),u=t("./RoomEmoji"),h=t("./RoomGiftTip"),f=t("./RoomKick"),p=t("../../controller/RoomController"),d=t("../../../other/EnumCenter"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._chatContentSmall=null,e._chatContent=null,e._bShowContent=!1,e.ContentMaxNum=50,e}return o(e,t),e.prototype.EnableChatContent=function(){p.RoomController.CurRoom.IsOpenChat&&(this._bShowContent=!this._bShowContent,this._chatContent.active=this._bShowContent,this._chatContentSmall.active=!this._bShowContent)},e.prototype.showSmallChatContent=function(t){!this._bShowContent&&p.RoomController.CurRoom.IsOpenChat&&(this._chatContentSmall.childrenCount>0&&(this._chatContentSmall.children[0].stopAllActions(),this._chatContentSmall.destroyAllChildren()),t.setParent(this._chatContentSmall),t.active=!0,t.runAction(cc.sequence(cc.delayTime(3),cc.fadeOut(.5),cc.callFunc(function(){t.destroy()}))))},e.prototype.refreshChatContent=function(){this._chatContent.active=this._bShowContent,this._chatContentSmall.active=!this._bShowContent},e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.onRoomDescription(),this.onRefresh()},e.prototype.initRoot=function(){this._chatContent=cc.find("ChatContent",this.node),this._chatLayout=cc.find("ChatContent/ScrollView/view/content",this.node),this._chatContentSmall=cc.find("ChatContentSmall",this.node),this._chatItem=cc.find("RoomChat",this.node),this._chatItem.active=!1,this._descriptionItem=cc.find("RoomDescription",this.node),this._descriptionItem.active=!1,this._wellcomeItem=cc.find("RoomWellcome",this.node),this._wellcomeItem.active=!1,this._emojiItem=cc.find("RoomEmoji",this.node),this._emojiItem.active=!1,this._giftTipItem=cc.find("RoomGiftTip",this.node),this._giftTipItem.active=!1,this._kickItem=cc.find("RoomKick",this.node),this._kickItem.active=!1},e.prototype.initEvent=function(){a.SS.EventCenter.on(r.EventCommond.UIRoomChat,this.onRoomChat,this),a.SS.EventCenter.on(r.EventCommond.UIRoomWellcome,this.onWellcome,this),a.SS.EventCenter.on(r.EventCommond.UIVistorEmoji,this.onVistorEmoji,this),a.SS.EventCenter.on(r.EventCommond.OnSendGiftWordTip,this.OnSendGift,this),a.SS.EventCenter.on(r.EventCommond.OnRoomKick,this.onRoomKick,this),a.SS.EventCenter.on(r.EventCommond.OnRelink,this.OnRelink,this),a.SS.EventCenter.on(r.EventCommond.UIChatCheck,this.refreshChat,this),a.SS.EventCenter.on(d.EnumGameMessageType.ChatRoomStateChange,this.onChatRoomStateChange,this)},e.prototype.onDestroy=function(){a.SS.EventCenter.off(r.EventCommond.UIRoomChat,this.onRoomChat,this),a.SS.EventCenter.off(r.EventCommond.UIRoomWellcome,this.onWellcome,this),a.SS.EventCenter.off(r.EventCommond.UIVistorEmoji,this.onVistorEmoji,this),a.SS.EventCenter.off(r.EventCommond.OnSendGiftWordTip,this.OnSendGift,this),a.SS.EventCenter.off(r.EventCommond.OnRoomKick,this.onRoomKick,this),a.SS.EventCenter.off(r.EventCommond.OnRelink,this.OnRelink,this),a.SS.EventCenter.off(r.EventCommond.UIChatCheck,this.refreshChat,this),a.SS.EventCenter.off(d.EnumGameMessageType.ChatRoomStateChange,this.onChatRoomStateChange,this)},e.prototype.OnRelink=function(){this._chatLayout.destroyAllChildren(),this.onRoomDescription()},e.prototype.OnSendGift=function(t){if(s.default.Green(s.ClogKey.UI,"OnSendGift, chat:"+JSON.stringify(t)),this._chatLayout.children.length>=this.ContentMaxNum){var e=this._chatLayout.children[0];this._chatLayout.removeChild(e)}var n=cc.instantiate(this._giftTipItem);n.setParent(this._chatLayout),n.active=!0,n.addComponent(h.RoomGiftTip).Init(t);var o=cc.instantiate(this._giftTipItem);o.addComponent(h.RoomGiftTip).Init(t),this.showSmallChatContent(o)},e.prototype.onRoomChat=function(t){if(s.default.Green(s.ClogKey.UI,"on room chat, chat:"+JSON.stringify(t)),this._chatLayout.children.length>=this.ContentMaxNum){var e=this._chatLayout.children[0];this._chatLayout.removeChild(e)}var n=cc.instantiate(this._chatItem);n.setParent(this._chatLayout),n.active=!0,n.addComponent(i.RoomChat).Init(t),s.default.Cyan(s.ClogKey.UI,"this._chatLayout.childrenCount = "+this._chatLayout.childrenCount);var o=cc.instantiate(this._chatItem);o.addComponent(i.RoomChat).Init(t),this.showSmallChatContent(o)},e.prototype.onWellcome=function(t){if(s.default.Green(s.ClogKey.UI,"onWellcome, chat:"+JSON.stringify(t)),this._chatLayout.children.length>=this.ContentMaxNum){var e=this._chatLayout.children[0];this._chatLayout.removeChild(e)}var n=cc.instantiate(this._wellcomeItem);n.setParent(this._chatLayout),n.active=!0,n.addComponent(c.RoomWellcome).Init(t);var o=cc.instantiate(this._wellcomeItem);o.addComponent(c.RoomWellcome).Init(t),this.showSmallChatContent(o)},e.prototype.onVistorEmoji=function(t){if(s.default.Green(s.ClogKey.UI,"onVistorEmoji, chat:"+JSON.stringify(t)),this._chatLayout.children.length>=this.ContentMaxNum){var e=this._chatLayout.children[0];this._chatLayout.removeChild(e)}var n=cc.instantiate(this._emojiItem);n.setParent(this._chatLayout),n.active=!0,n.addComponent(u.RoomEmoji).Init(t);var o=cc.instantiate(this._emojiItem);o.addComponent(u.RoomEmoji).Init(t),this.showSmallChatContent(o)},e.prototype.onRoomDescription=function(){if(this._chatLayout.children.length>=this.ContentMaxNum){var t=this._chatLayout.children[0];this._chatLayout.removeChild(t)}var e=cc.instantiate(this._descriptionItem);e.setParent(this._chatLayout),e.active=!0,e.addComponent(l.RoomDescription).Init();var n=cc.instantiate(this._descriptionItem);n.addComponent(l.RoomDescription).Init(),this.showSmallChatContent(n)},e.prototype.onRoomKick=function(t){if(this._chatLayout.children.length>=this.ContentMaxNum){var e=this._chatLayout.children[0];this._chatLayout.removeChild(e)}var n=cc.instantiate(this._kickItem);n.setParent(this._chatLayout),n.active=!0,n.addComponent(f.RoomKick).Init(t);var o=cc.instantiate(this._kickItem);o.addComponent(f.RoomKick).Init(t),this.showSmallChatContent(o)},e.prototype.onRefresh=function(){this.refreshChat()},e.prototype.refreshChat=function(){p.RoomController.CurRoom.IsOpenChat&&!this._chatContent.active?(this._chatContent.active=!0,this.refreshChatContent()):p.RoomController.CurRoom.IsOpenChat||(this.ClearAllChat(),this._chatContent.active=!1,this._chatContentSmall.active=!1)},e.prototype.ClearAllChat=function(){this._chatLayout.destroyAllChildren()},e.prototype.onChatRoomStateChange=function(t){switch(t){case d.EnumChatRoomState.Ready:case d.EnumChatRoomState.Other:this.node.width=750}},e}(cc.Component);n.Chat=m,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../../base/script/global/SS":"SS","../../../other/EnumCenter":"EnumCenter","../../../other/EventCommond":"EventCommond","../../controller/RoomController":"RoomController","./RoomChat":"RoomChat","./RoomDescription":"RoomDescription","./RoomEmoji":"RoomEmoji","./RoomGiftTip":"RoomGiftTip","./RoomKick":"RoomKick","./RoomWellcome":"RoomWellcome"}],CheckContentController:[function(t,e,n){"use strict";cc._RF.push(e,"157361K2IJPwLW54KgIFiHD","CheckContentController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../base/script/api/http/Xhr"),a=function(){function t(){}return t.CheckContent=function(t){return o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,a;return r(this,function(r){switch(r.label){case 0:return e=new i.XhrUrl("xiyou/checkContentValid").Url,o={content:t},[4,i.default.PostJson(e,o)];case 1:return a=r.sent(),0==a.success?(n(!1),[2]):(n(!0),[2])}})})})]})})},t}();n.CheckContentController=a,cc._RF.pop()},{"../../../../base/script/api/http/Xhr":"Xhr"}],Clog:[function(t,e,n){"use strict";cc._RF.push(e,"690bd5A9iFBiqpPgEYVJaG9","Clog"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../time/Time"),r=function(){function t(){}return t.Res="Res",t.UI="UI",t.LocalStorage="LocalStorage",t.Net="Net",t.Entry="Entry",t.Api="Api",t.Ta="Ta",t.FrameSync="FrameSync",t}();n.ClogKey=r;var i=function(){function t(){}return t.Init=function(){this.OpenTag(r.Res),this.OpenTag(r.UI),this.OpenTag(r.LocalStorage),this.OpenTag(r.Net),this.OpenTag(r.Entry),this.OpenTag(r.Api),this.OpenTag(r.Ta),this.OpenTag(r.FrameSync)},t.OpenTag=function(t){this.Tags.indexOf(t)<0&&this.Tags.push(t)},t.Obj=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.IsOpenLog&&(this.Tags.indexOf(t)<0||(e.unshift("\u3010"+o.Time.Format(new Date)+"\u3011\u3010"+t+"\u3011"),cc.log("%c tag","color:#ff1493;",[].slice.call(e))))},t.Trace=function(t,e){this.print(t,this.GetString(e),"")},t.Red=function(t,e){this.print(t,this.GetString(e),"color:red;")},t.Green=function(t,e){this.print(t,this.GetString(e),"color:green;")},t.Orange=function(t,e){this.print(t,this.GetString(e),"color:#ee7700;")},t.Gray=function(t,e){this.print(t,this.GetString(e),"color:gray;")},t.Blue=function(t,e){this.print(t,this.GetString(e),"color:#3a5fcd;")},t.Purple=function(t,e){this.print(t,this.GetString(e),"color:#b23aee;")},t.DeepPink=function(t,e){this.print(t,this.GetString(e),"color:#ff1493;")},t.SkyBlue=function(t,e){this.print(t,this.GetString(e),"color:#66B3FF;")},t.Cyan=function(t,e){this.print(t,this.GetString(e),"color:#4dffff;")},t.GetString=function(t){return Array.isArray(t)||"object"!=typeof t?t:JSON.stringify(t)},t.print=function(t,e,n){this.IsOpenLog&&(this.Tags.indexOf(t)<0||(console.log||cc.log).call(this,"%c%s:"+cc.js.formatStr.apply(cc,[e]),n,"\u3010"+o.Time.Format(new Date)+"\u3011\u3010"+t+"\u3011"))},t.Warn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e.unshift("\u3010"+o.Time.Format(new Date)+"\u3011\u3010"+t+"\u3011"),cc.warn.apply(null,[].slice.call(e))},t.Error=function(t){cc.error("\u3010"+o.Time.Format(new Date)+"\u3011"+t)},t.Tags=new Array,t.IsOpenLog=!0,t}();n.default=i,cc._RF.pop()},{"../time/Time":"Time"}],CollitionFixForce:[function(t,e,n){"use strict";cc._RF.push(e,"38e17fjGxRJI7rq4taL7fYU","CollitionFixForce");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fixForce=cc.Vec2.ZERO,e}return o(e,t),e.prototype.SetFixForce=function(t){this.fixForce=t},e.prototype.onBeginContact=function(t,e,n){},e.prototype.onPreSolve=function(t,e,n){n&&n.getComponent(cc.RigidBody).applyForceToCenter(this.fixForce,!0)},e.prototype.onPostSolve=function(t,e,n){n&&n.getComponent(cc.RigidBody).applyForceToCenter(this.fixForce,!0)},e.prototype.onEndContact=function(t,e,n){},e=r([a],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],Constance:[function(t,e,n){"use strict";cc._RF.push(e,"be96edJ0bBLcbFjR0sa6ZzW","Constance"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.BALL_COUNT=16,t.BALL_WHITE=0,t.BALL_BLACK=8,t.BALL_MIN_SPEED=6,t.BALL_RADIUS=18,t.CUE_BASE_POWER=144e3,t.END_BALL_RADIUS=20,t.WHITE_BALL_LINEAR_DAMPING=.8,t.COLOR_BALL_LINEAR_DAMPING=1,t.BORDER_FIX_POWER=200,t.ROOM_NAME="\u684c\u74038\u7403",t.ROOM_TYPE="billiard",t}();n.Constance=o,cc._RF.pop()},{}],CountDownComponent:[function(t,e,n){"use strict";cc._RF.push(e,"cbf32bKlkNDDL2sYPQSZwr5","CountDownComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../other/EnumCenter"),s=t("../../util/FYCountDownMgr"),l=t("./BaseComponent"),c=cc._decorator,u=c.ccclass,h=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._labCountDown=null,e._nodeLeft=null,e._nodeRight=null,e._sprCountDown=null,e.countDownKey="CountDown",e.positionType=a.EnumPositionType.Left,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.initData(),this.InitComplete()},e.prototype.Reset=function(){this.StopCountDown()},e.prototype.GetRemainTime=function(){return s.default.Instance.getRemainTime(this.countDownKey)},e.prototype.StartCountDown=function(t,e){var n=this;this.positionType=t;var o=e||30;this._sprCountDown.enabled=!0,this._labCountDown.node.active=!0,this._labCountDown.string=o.toString(),s.default.Instance.remove(this.countDownKey),s.default.Instance.add(this.countDownKey,o,1,function(t,e){n._labCountDown.string=Math.ceil(o-e).toString(),t&&(n._nodeLeft.active=!1,n._nodeRight.active=!1,n._sprCountDown.enabled=!1,n._labCountDown.node.active=!1,i.SS.EventCenter.emit(a.EnumGameMessageType.PlayerCountDownComplete,n.positionType))})},e.prototype.StopCountDown=function(){this._nodeLeft.active=!1,this._nodeRight.active=!1,this._sprCountDown.enabled=!1,this._labCountDown.node.active=!1,s.default.Instance.remove(this.countDownKey)},e.prototype.initRoot=function(){this._nodeLeft=cc.find("Left",this.node),this._nodeRight=cc.find("Right",this.node),this._labCountDown=cc.find("LabCountDown",this.node).getComponent(cc.Label),this._sprCountDown=this.node.getComponent(cc.Sprite)},e.prototype.initData=function(){this._nodeLeft.active=!1,this._nodeRight.active=!1,this._sprCountDown.enabled=!1,this._labCountDown.node.active=!1},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){},e=r([u],e)}(l.default));n.default=h,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","../../util/FYCountDownMgr":"FYCountDownMgr","./BaseComponent":"BaseComponent"}],CreateRoomController:[function(t,e,n){"use strict";cc._RF.push(e,"4163d5M9ylJqKY/ROGiNsiD","CreateRoomController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../base/script/api/http/Xhr"),a=t("../../../other/Md5Util"),s=t("../../../room/controller/RoomController"),l=t("../../../login/model/SessionData"),c=t("../../view/UIToast"),u=function(){function t(){}return t.CreateRoom=function(t,e,n,u){return void 0===n&&(n="e53d1172cdf543bb91c85035143d165d"),void 0===u&&(u=""),o(this,void 0,void 0,function(){var h=this;return r(this,function(f){return[2,new Promise(function(f){return o(h,void 0,void 0,function(){var o,h,p,d,m;return r(this,function(r){switch(r.label){case 0:return o=new i.XhrUrl("xiyou/createRoom").Url,h={subject:t,tag:e,momoId:l.Session.XiYou.MomoId,identify:n,sign:null,password:u},p=a.Md5Util.GenSign(h),h.sign=p,[4,i.default.PostJson(o,h)];case 1:return d=r.sent(),0==d.success?(m=d.msg,c.UIToast.Show(m),f(!1),[2]):(s.RoomController.OnJoinRoomId=d.data,f(!0),[2])}})})})]})})},t}();n.CreateRoomController=u,cc._RF.pop()},{"../../../../base/script/api/http/Xhr":"Xhr","../../../login/model/SessionData":"SessionData","../../../other/Md5Util":"Md5Util","../../../room/controller/RoomController":"RoomController","../../view/UIToast":"UIToast"}],CryptoJS:[function(t,e,n){"use strict";cc._RF.push(e,"af024TjnyhGva0MgvfldBtP","CryptoJS");var o=o||function(t,e){var n={},o=n.lib={},r=o.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.$super.extend(this)}}}(),i=o.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,n=t.words,o=this.sigBytes;t=t.sigBytes;if(this.clamp(),o%4)for(var r=0;r<t;r++)e[o+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(o+r)%4*8;else if(65535<n.length)for(r=0;r<t;r+=4)e[o+r>>>2]=n[r>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],o=0;o<e;o+=4)n.push(4294967296*t.random()|0);return i.create(n,e)}}),a=n.enc={},s=a.Hex={stringify:function(t){for(var e=t.words,n=(t=t.sigBytes,[]),o=0;o<t;o++){var r=e[o>>>2]>>>24-o%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o+=2)n[o>>>3]|=parseInt(t.substr(o,2),16)<<24-o%8*4;return i.create(n,e/2)}},l=a.Latin1={stringify:function(t){for(var e=t.words,n=(t=t.sigBytes,[]),o=0;o<t;o++)n.push(String.fromCharCode(e[o>>>2]>>>24-o%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o++)n[o>>>2]|=(255&t.charCodeAt(o))<<24-o%4*8;return i.create(n,e)}},c=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},u=o.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=i.create(),this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,o=n.words,r=n.sigBytes,a=this.blockSize,s=r/(4*a);e=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,r=t.min(4*e,r);if(e){for(var l=0;l<e;l+=a)this._doProcessBlock(o,l);l=o.splice(0,e),n.sigBytes-=r}return i.create(l,r)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});o.Hasher=u.extend({init:function(){this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize(),this._hash},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:16,_createHelper:function(t){return function(e,n){return t.create(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return h.HMAC.create(t,n).finalize(e)}}});var h=n.algo={};return n}(Math);(function(t){var e=o,n=(r=e.lib).WordArray,r=r.Hasher,i=e.algo,a=[],s=[];(function(){function e(e){for(var n=t.sqrt(e),o=2;o<=n;o++)if(!(e%o))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var o=2,r=0;64>r;)e(o)&&(8>r&&(a[r]=n(t.pow(o,.5))),s[r]=n(t.pow(o,1/3)),r++),o++})();var l=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=n.create(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,o=n[0],r=n[1],i=n[2],a=n[3],c=n[4],u=n[5],h=n[6],f=n[7],p=0;64>p;p++){if(16>p)l[p]=0|t[e+p];else{var d=l[p-15],m=l[p-2];l[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+l[p-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+l[p-16]}d=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&h)+s[p]+l[p],m=((o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22))+(o&r^o&i^r&i),f=h,h=u,u=c,c=a+d|0,a=i,i=r,r=o,o=d+m|0}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+h|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;e[o>>>5]|=128<<24-o%32,e[15+(o+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process()}});e.SHA256=r._createHelper(i),e.HmacSHA256=r._createHmacHelper(i)})(Math),function(){var t=o,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=t.create(),"string"==typeof n&&(n=e.parse(n));var o=t.blockSize,r=4*o;n.sigBytes>r&&(n=t.finalize(n));for(var i=this._oKey=n.clone(),a=this._iKey=n.clone(),s=i.words,l=a.words,c=0;c<o;c++)s[c]^=1549556828,l[c]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;t=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),e.exports=o,cc._RF.pop()},{}],CueComponent:[function(t,e,n){"use strict";cc._RF.push(e,"8e27eq+42JBk4ADzQz7VLp6","CueComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/audio/AudioManager"),i=t("../../common/controller/http/HttpApi"),a=t("../../other/EnumCenter"),s=t("../../room/controller/RoomController"),l=t("./../../../base/script/global/SS"),c=t("./../../common/controller/websocket/RoomSocketInput"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ballArmPic=null,e._ballArmPic2=null,e._light=null,e.power=0,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.node.angle=-180},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._ballArmPic=cc.find("Pic",this.node),this._ballArmPic2=cc.find("PicOther",this._ballArmPic),this._light=cc.find("Light",this._ballArmPic)},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.InitComplete()},e.prototype.Reset=function(){this.node.angle=-180,this.node.active=!1},e.prototype.SetPower=function(t){var e=100*t+20;this._ballArmPic.y=e,this.power=t,s.RoomController.IsMyRound()&&c.RoomSocketInput.InputSetBallArm({power:this.power,angle:this.node.angle})},e.prototype.SetRotation=function(t){this.power=0,this.node.angle=t,s.RoomController.IsMyRound()&&c.RoomSocketInput.InputSetBallArm({power:this.power,angle:this.node.angle})},e.prototype.Rotate=function(t){this.power=0,this.node.angle-=t,s.RoomController.IsMyRound()&&c.RoomSocketInput.InputSetBallArm({power:this.power,angle:this.node.angle})},e.prototype.Hit=function(){var t=this;this._light.active=!0,this._ballArmPic.runAction(cc.sequence(cc.moveTo(.05,new cc.Vec2(0,20)),cc.callFunc(function(){l.SS.EventCenter.emit(a.EnumGameMessageType.CueHitComplete,t.power,t.node.angle),t.power=0,r.AudioManager.PlaySound(a.EnumAudio.CueHit),t._light.active=!1,t.Hide()},this)))},e.prototype.GetCueInfo=function(){return{power:this.power,angle:this.node.angle}},e.prototype.SendHit=function(){s.RoomController.IsMyRound()&&i.default.Shoot(this.power,this.node.angle)},e.prototype.Show=function(t,e){this.node.setPosition(t),this.node.active=!0,this._ballArmPic2.active=e===a.CueType.Cue2},e.prototype.Hide=function(){this.node.active=!1},e.prototype.RefreshFromServerData=function(t){if(!s.RoomController.IsMyRound()){this.node.angle=t.angle,this.power=t.power;var e=100*this.power+20;this._ballArmPic.y=e}},e.prototype.ForceSetData=function(t){this.node.angle=t.angle,this.power=t.power;var e=100*this.power+20;this._ballArmPic.y=e},e}(t("./BaseComponent").default);n.default=u,cc._RF.pop()},{"../../../base/script/frame/audio/AudioManager":"AudioManager","../../common/controller/http/HttpApi":"HttpApi","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","./../../../base/script/global/SS":"SS","./../../common/controller/websocket/RoomSocketInput":"RoomSocketInput","./BaseComponent":"BaseComponent"}],DecoratorUtil:[function(t,e,n){"use strict";cc._RF.push(e,"1e1371290lCC45pFEo6rMKu","DecoratorUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../global/SS");function r(t,e){return t.hasOwnProperty("name")?t.name+"."+e+".Bind":t.constructor.name+"."+e+".Bind"}function i(t,e,n){var o=a(e);t.hasOwnProperty(o)?t[o].push(n):(s(t,e),t[o].push(n))}function a(t){return"_bind_"+t}function s(t,e){var n=a(e);if(null==t[n]){t[n]=[];var o=t[n],r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),e);if(null!=r&&null!=r.set&&null!=r.get){var i=r.get,s=r.set;Object.defineProperty(t,e,{get:function(){return i.call(this)},set:function(t){i.call(this)!=t&&(s.call(this,t),o.forEach(function(e){return e(t)}))}})}else{var l=t[e],c="_bind_"+e+"_p";t[c]=l,Object.defineProperty(t,e,{get:function(){return this[c]},set:function(t){this[c]!=t&&(this[c]=t,o.forEach(function(e){return e(t)}))}})}}}n.catchError=function(t){return function(e,n,o){var r=o.value;o.value=function(){try{r()}catch(e){console.error(t)}}}},n.GenBindEventName=r,n.Bind=function(t){return function(e,n){t||(console.log(e),t=r(e,n)),i(e,n,function(e){o.SS.EventCenter.emit(t,e)})}},cc._RF.pop()},{"../global/SS":"SS"}],DragComp:[function(t,e,n){"use strict";cc._RF.push(e,"615b31u6JhEFpytsH9bVMS8","DragComp");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../game/controller/GameDataController"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragStartPos=cc.Vec2.ZERO,e}return o(e,t),e.prototype.onLoad=function(){this.initEvent()},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){},e.prototype.onTouchMove=function(t){var e=t.getLocationInView();this.node.setPosition(e.x-i.GameDataController.GetWinSize().width/2,-e.y+i.GameDataController.GetWinSize().height/2)},e.prototype.onTouchEnd=function(t){},e=r([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../game/controller/GameDataController":"GameDataController"}],DressController:[function(t,e,n){"use strict";cc._RF.push(e,"71ed7jcoPpEpa6Bo4QRPhnL","DressController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/frame/clog/Clog"),a=t("../../xiyou/xiyouSDK/utils/NetCenterMgr"),s=t("../../xiyou/xiyouSDK/XiyouSDK"),l=t("../../xiyou/xiyouSDK/socket/MsgDefine"),c=t("../model/DressItemData"),u=t("../../common/view/UIToast"),h=t("../../../base/script/global/SS"),f=t("../../other/EventCommond"),p=t("../view/DressItemDetail"),d=t("../../../base/script/api/http/Xhr"),m=t("../../room/controller/RoomController"),y=function(){function t(){}return t.GetXiyouDressInfo=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return i.default.Green(i.ClogKey.Net,"\u83b7\u53d6xiyou\u88c5\u626e\u6570\u636e"),[2,new Promise(function(e){a.default.Ins.registerMsgListener(l.default.REQUEST_USER_BAG,function(n,a,s){return o(t,void 0,void 0,function(){var t,n,o;return r(this,function(r){if(i.default.Trace(i.ClogKey.Net,"\u3010\u83b7\u53d6xiyou\u80cc\u5305\u6570\u636e\u3011:"+JSON.stringify(s)),s&&0!=s.ec)return e(!1),[2];if((t=s.data)&&t.gameItems)for(this.DressItems=new Array,n=0;n<t.gameItems.length;n++)o=t.gameItems[n],this.DressItems.push(new c.DressItemData(o));else this.DressItems=null;return e(!0),[2]})})},t,!0),s.XiyouSDK.Ins.getBagInfo()})]})})},t.ReqDressItem=function(t,e){var n=this;return i.default.Green(i.ClogKey.Net,"\u88c5\u626e\u7269\u54c1"),new Promise(function(c){a.default.Ins.registerMsgListener(l.default.REQUEST_CHANGE_ITEM_STATE,function(a,s,l){return o(n,void 0,void 0,function(){var n,o,a;return r(this,function(r){if(i.default.Trace(i.ClogKey.Net,"\u3010\u4f7f\u7528\u7269\u54c1\u3011:"+JSON.stringify(l)),l&&0!=l.ec)return c(!1),[2];if(0==e)(a=this.DressItems.find(function(e){return e.Id==t})).Using=!1,this.SetHeadIcon(),u.UIToast.Show("\u53d6\u6d88\u5934\u50cf\u6846\u6210\u529f");else{for(n=0;n<this.DressItems.length;n++)(o=this.DressItems[n]).Id==t?o.Using=!0:o.Using=!1;a=this.DressItems.find(function(e){return e.Id==t}),this.SetHeadIcon(JSON.stringify({code:t,icon:a.Icon})),u.UIToast.Show("\u88dd\u626e\u5934\u50cf\u6846\u6210\u529f")}return h.SS.EventCenter.emit(f.EventCommond.UIDressHeadIcon),c(!0),[2]})})},n,!0),s.XiyouSDK.Ins.setItemState(t,e)})},t.ReqItemDetial=function(t){var e=this;return i.default.Green(i.ClogKey.Net,"ReqItemDetial"),new Promise(function(n){a.default.Ins.registerMsgListener(l.default.REQUEST_ITEM_INFO,function(t,a,s){return o(e,void 0,void 0,function(){var t;return r(this,function(e){return i.default.Trace(i.ClogKey.Net,"\u3010ReqItemDetial\u3011:"+JSON.stringify(s)),s&&0!=s.ec?(n(null),[2]):(t=new c.DressItemDetialData(s.data),n(t),[2])})})},e,!0),s.XiyouSDK.Ins.getItemInfo(t)})},t.SetHeadIcon=function(t){return void 0===t&&(t=""),o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,i;return r(this,function(r){switch(r.label){case 0:return e=new d.XhrUrl("xiyou/setUserHeadFrame").Url,o={head_frame:t,rid:m.RoomController.CurRoom.RoomId},[4,d.default.PostJson(e,o)];case 1:return i=r.sent(),Boolean(i.success)||n(!1),n(!0),[2]}})})})]})})},t.GetItemDetial=function(t){return o(this,void 0,void 0,function(){var e;return r(this,function(n){switch(n.label){case 0:return[4,this.ReqItemDetial(t)];case 1:return null==(e=n.sent())?[2]:(p.DressItemDetail.Intance.Refresh(e),[2])}})})},t}();n.DressController=y,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../common/view/UIToast":"UIToast","../../other/EventCommond":"EventCommond","../../room/controller/RoomController":"RoomController","../../xiyou/xiyouSDK/XiyouSDK":"XiyouSDK","../../xiyou/xiyouSDK/socket/MsgDefine":"MsgDefine","../../xiyou/xiyouSDK/utils/NetCenterMgr":"NetCenterMgr","../model/DressItemData":"DressItemData","../view/DressItemDetail":"DressItemDetail"}],DressItemData:[function(t,e,n){"use strict";cc._RF.push(e,"d4935NrUaBAbIJw6IAu6ziK","DressItemData");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../other/EnumCenter"),i=function(){function t(t){t&&(this.using=t.using,this.TypeName=t.typeName,this.Count=t.count,this.Name=t.name,this.Icon=t.icon,this.Id=t.id,this.Type=t.type,this.ExpireAt=t.expireAt)}return Object.defineProperty(t.prototype,"Using",{get:function(){return!(this.Count>1)&&this.using},set:function(t){this.using=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ExpireState",{get:function(){if(-1==this.ExpireAt)return{state:r.EnumItemDeadline.Always,desc:"\u6c38\u4e45"};var t=Math.floor((new Date).valueOf()/1e3),e=this.ExpireAt-t;if(e<=0)return{state:r.EnumItemDeadline.Passed,desc:"\u5df2\u8fc7\u671f"};if(e<86400)return{state:r.EnumItemDeadline.Near,desc:"\u5373\u5c06\u8fc7\u671f"};var n=Math.floor(e/86400);return{state:r.EnumItemDeadline.Days,desc:n+"\u5929\u540e\u8fc7\u671f"}},enumerable:!0,configurable:!0}),t}();n.DressItemData=i;var a=function(t){function e(e){var n=this;if(e)return(n=t.call(this,e)||this).Description=e.description,n.Description=n.Description.replace("\\n","<br/>").replace("<font color=0x","<color=#"),n}return o(e,t),e}(i);n.DressItemDetialData=a,cc._RF.pop()},{"../../other/EnumCenter":"EnumCenter"}],DressItemDetail:[function(t,e,n){"use strict";cc._RF.push(e,"cfcb8Z2mqBGPby/nmhYn3Mc","DressItemDetail");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/util/UIEventCenter"),i=t("../controller/DressController"),a=t("../../../base/script/frame/ui/UIUtil"),s=t("../../other/EnumCenter"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){e.Intance=this,this.initRoot(),this.initEvent(),this.node.active=!1},e.prototype.onDestroy=function(){},e.prototype.initRoot=function(){this._icon=cc.find("icon",this.node).getComponent(cc.Sprite),this._onUse=cc.find("icon/onUse",this.node),this._count=cc.find("icon/count",this.node),this._countLabel=cc.find("icon/count/label",this.node).getComponent(cc.Label),this._state=cc.find("state",this.node).getComponent(cc.Label),this._btn=cc.find("btn",this.node).getComponent(cc.Button),this._btnSprite=cc.find("btn",this.node).getComponent(cc.Sprite),this._btnLabel=cc.find("btn/label",this.node).getComponent(cc.Label),this._always=cc.find("always",this.node),this._name=cc.find("Layout/Name",this.node).getComponent(cc.Label),this._description=cc.find("desc",this.node).getComponent(cc.RichText),this._tag=cc.find("Layout/Flag/Label",this.node).getComponent(cc.Label)},e.prototype.initEvent=function(){var t=this;r.UIEventCenter.ButtonEvent(this._btn,function(){return t.onBtnClick()})},e.prototype.Refresh=function(t){this.data=t,null!=this.data?(this.node.active=!0,this.refreshIcon(),this.refreshState(),this.refreshBtn(),this.refreshName(),this.refershUsing(),this.refreshDesc(),this.refreshTag()):this.node.active=!1},e.prototype.refreshName=function(){this._name.string=this.data.Name},e.prototype.refreshDesc=function(){this._description.string=this.data.Description},e.prototype.refreshTag=function(){this._tag.string=this.data.TypeName},e.prototype.refreshIcon=function(){var t="https://res-yqwsq.oclkj.com/game/commonres/item/thumbnail_2/"+this.data.Icon;a.UIUtil.LoadRemoteImage(t,this._icon)},e.prototype.refreshState=function(){switch(this.data.ExpireState.state){case s.EnumItemDeadline.Always:return this._always.active=!0,void(this._state.node.active=!1);case s.EnumItemDeadline.Near:case s.EnumItemDeadline.Passed:return this._always.active=!1,this._state.node.active=!0,this._state.string=this.data.ExpireState.desc,void(this._state.node.color=(new cc.Color).fromHEX("#FF6946"));case s.EnumItemDeadline.Days:return this._always.active=!1,this._state.node.active=!0,this._state.string=this.data.ExpireState.desc,void(this._state.node.color=(new cc.Color).fromHEX("#999999"))}},e.prototype.refreshBtn=function(){if(this.data.Using)return a.UIUtil.ChangeSprite("T_xiyou_button_gray_s_line_1",this._btnSprite),this._btnLabel.string="\u53d6\u6d88\u4f7f\u7528",void(this._btnLabel.node.color=(new cc.Color).fromHEX("#999999"));a.UIUtil.ChangeSprite("T_xiyou_button_yellow_s_line_1",this._btnSprite),this._btnLabel.string="\u4f7f\u7528",this._btnLabel.node.color=(new cc.Color).fromHEX("#222222")},e.prototype.refershUsing=function(){if(this.data.Using)return this._onUse.active=!0,void(this._count.active=!1);this._onUse.active=!1,this._count.active=!0,this._countLabel.string="X"+this.data.Count},e.prototype.onBtnClick=function(){i.DressController.ReqDressItem(this.data.Id,!this.data.Using),this.node.active=!1},e}(cc.Component);n.DressItemDetail=l,cc._RF.pop()},{"../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../../other/EnumCenter":"EnumCenter","../controller/DressController":"DressController"}],DressItem:[function(t,e,n){"use strict";cc._RF.push(e,"fbb02B2Y9BJPYP6HIh/hyCq","DressItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/util/UIEventCenter"),i=t("../controller/DressController"),a=t("../../../base/script/frame/ui/UIUtil"),s=t("../../other/EnumCenter"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.Index=t,this.initRoot(),this.initEvent(),this.Refresh()},e.prototype.onDestroy=function(){},e.prototype.initRoot=function(){this._icon=cc.find("icon",this.node).getComponent(cc.Sprite),this._onUse=cc.find("icon/onUse",this.node),this._count=cc.find("icon/count",this.node),this._countLabel=cc.find("icon/count/label",this.node).getComponent(cc.Label),this._state=cc.find("state",this.node).getComponent(cc.Label),this._btnUse=cc.find("btn",this.node).getComponent(cc.Button),this._btnSprite=cc.find("btn",this.node).getComponent(cc.Sprite),this._btnLabel=cc.find("btn/label",this.node).getComponent(cc.Label),this._always=cc.find("always",this.node),this._btnDetial=cc.find("icon",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;r.UIEventCenter.ButtonEvent(this._btnUse,function(){return t.onBtnUseClick()}),r.UIEventCenter.ButtonEvent(this._btnDetial,function(){return t.onBtnDetialClick()})},e.prototype.Refresh=function(){this.data=i.DressController.DressItems[this.Index],null!=this.data?(this.node.active=!0,this.refreshIcon(),this.refreshState(),this.refreshBtn(),this.refershUsing()):this.node.active=!1},e.prototype.refreshIcon=function(){var t="https://res-yqwsq.oclkj.com/game/commonres/item/thumbnail_1/"+this.data.Icon;a.UIUtil.LoadRemoteImage(t,this._icon)},e.prototype.refreshState=function(){switch(this.data.ExpireState.state){case s.EnumItemDeadline.Always:return this._always.active=!0,void(this._state.node.active=!1);case s.EnumItemDeadline.Near:case s.EnumItemDeadline.Passed:return this._always.active=!1,this._state.node.active=!0,this._state.string=this.data.ExpireState.desc,void(this._state.node.color=(new cc.Color).fromHEX("#FF6946"));case s.EnumItemDeadline.Days:return this._always.active=!1,this._state.node.active=!0,this._state.string=this.data.ExpireState.desc,void(this._state.node.color=(new cc.Color).fromHEX("#999999"))}},e.prototype.refreshBtn=function(){if(this.data.Using)return a.UIUtil.ChangeSprite("T_xiyou_button_gray_s_line_1",this._btnSprite),this._btnLabel.string="\u53d6\u6d88\u4f7f\u7528",void(this._btnLabel.node.color=(new cc.Color).fromHEX("#999999"));a.UIUtil.ChangeSprite("T_xiyou_button_yellow_s_line_1",this._btnSprite),this._btnLabel.string="\u4f7f\u7528",this._btnLabel.node.color=(new cc.Color).fromHEX("#222222")},e.prototype.refershUsing=function(){if(this.data.Using)return this._onUse.active=!0,void(this._count.active=!1);this._onUse.active=!1,this._count.active=!0,this._countLabel.string="X"+this.data.Count},e.prototype.onBtnUseClick=function(){i.DressController.ReqDressItem(this.data.Id,!this.data.Using)},e.prototype.onBtnDetialClick=function(){i.DressController.GetItemDetial(this.data.Id)},e}(cc.Component);n.DressItem=l,cc._RF.pop()},{"../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../../other/EnumCenter":"EnumCenter","../controller/DressController":"DressController"}],EffectBase:[function(t,e,n){"use strict";cc._RF.push(e,"77b37OBn1pN1pNwZ6jRcguG","EffectBase");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/global/SS"),i=t("../../other/EnumCenter"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Release=function(){r.SS.EventCenter.emit(i.EnumGameMessageType.EffectRelease,this)},e}(cc.Component);n.EffectBase=a,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter"}],EffectComponent:[function(t,e,n){"use strict";cc._RF.push(e,"6c61d9p+r5L44qP3iNAcntj","EffectComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./BaseComponent"),i=t("../../../base/script/global/SS"),a=t("../../other/EnumCenter"),s=t("../../../base/script/frame/clog/Clog"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._container=null,e._sample=null,e._dictEffectPool={},e}return o(e,t),e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.InitComplete()},e.prototype.Reset=function(){},e.prototype.Show=function(t,e){var n=null,o=(new t).EffectName;if(this._dictEffectPool[o]&&this._dictEffectPool[o].size()>0)n=this._dictEffectPool[o].get().getComponent(t);else{var r=cc.find(o,this._sample);if(null==r)return void s.default.Error("EffectControl's Function Show sample is null");n=cc.instantiate(r).addComponent(t)}n.node.active=!0,n.node.parent=this._container,n.node.setPosition(n.node.parent.convertToNodeSpaceAR(e)),n.Show()},e.prototype.initRoot=function(){this._sample=cc.find("Sample",this.node),this._container=cc.find("Container",this.node)},e.prototype.initEvent=function(){i.SS.EventCenter.on(a.EnumGameMessageType.EffectRelease,this.onEffectRelease,this)},e.prototype.removeEvent=function(){i.SS.EventCenter.off(a.EnumGameMessageType.EffectRelease,this.onEffectRelease,this)},e.prototype.onEffectRelease=function(t){this._dictEffectPool[t.name]||(this._dictEffectPool[t.name]=new cc.NodePool),this._dictEffectPool[t.name].put(t.node)},e}(r.default);n.default=l,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","./BaseComponent":"BaseComponent"}],EffectInHole:[function(t,e,n){"use strict";cc._RF.push(e,"96652D7PUJN2JTmHlVcw63/","EffectInHole");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EffectName="EffectInHole",e}return o(e,t),e.prototype.Show=function(){var t=this;this.node.scale=0,this.node.opacity=255,cc.tween(this.node).to(.5,{scale:1.5},{easing:"backOut"}).to(.2,{opacity:0}).call(function(){t.Release()}).start()},e}(t("./EffectBase").EffectBase);n.default=r,cc._RF.pop()},{"./EffectBase":"EffectBase"}],EmojData:[function(t,e,n){"use strict";cc._RF.push(e,"c581c8+JcZESL6esppP2hg4","EmojData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){this.Data=[],null!=t&&(this.Name=t.name,this.Id=t.id,this.Key=t.key,this.Duration=t.duration/1e3,this.Subpackage=t.subpackage,this.OnlyInMic=t.onlyInMic,this.Data=t.data,this.ChatScale=t.chatScale,this.SeatScale=t.seatScale)}}();n.EmojiData=o,cc._RF.pop()},{}],EmojiController:[function(t,e,n){"use strict";cc._RF.push(e,"a21f0Y9V0NBo5N87ZHOKyPz","EmojiController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../model/EmojData"),a=t("../../common/controller/websocket/RoomSocketInput"),s=t("../../../base/script/frame/ui/UIUtil"),l=t("../../../base/script/frame/res/ResManager"),c=t("../../../base/script/frame/clog/Clog"),u=function(){function t(){}return Object.defineProperty(t,"AllEmojisUniqueKeys",{get:function(){if(t._allEmojisUniqueKeys)return t._allEmojisUniqueKeys;t._allEmojisUniqueKeys=[];for(var e=null,n=0,o=t.AllEmojis.length;n<o;n++)e&&t.AllEmojis[n].Key==e.Key||(t._allEmojisUniqueKeys.push(t.AllEmojis[n]),e=t.AllEmojis[n]);return t._allEmojisUniqueKeys},enumerable:!0,configurable:!0}),t.GetEmojiByKeyData=function(t,e){return this.AllEmojis.find(function(n){return n.Key==t&&n.Data[0]==e[0]})},t.SendEmojiByKey=function(e){var n=t.AllEmojis.filter(function(t){return t.Key==e});0!=n.length&&(n.length>1?a.RoomSocketInput.InputEmoji(n[Math.trunc(Math.random()*n.length)]):a.RoomSocketInput.InputEmoji(n[0]))},t.CreatePlaceClip=function(t,e){return o(this,void 0,void 0,function(){var n,i,a=this;return r(this,function(u){switch(u.label){case 0:return n="texture/"+t.Subpackage+"/"+t.Id,this._loadedEmojiMap.get(n)?[4,s.UIUtil.CreateAnimationClip(n)]:[3,2];case 1:return i=u.sent(),e&&e("AnimClip",i,t),[3,3];case 2:l.ResManager.LoadRes(t.Key,cc.SpriteFrame,function(l,u){return o(a,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return l?(c.default.Error("ChangeSprite Error!, name:"+n+",err"+JSON.stringify(l)),[2]):(e&&e("SpriteFrame",u,t),[4,s.UIUtil.CreateAnimationClip(n)]);case 1:return i=o.sent(),e&&e("AnimClip",i,t),[2]}})})}),u.label=3;case 3:return[2]}})})},t.AllEmojis=[new i.EmojiData({name:"\u54c8\u54c8\u5927\u7b11",key:"smill_new",id:"smill_new",data:[],duration:1600,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u6342\u8138",key:"wulian_new",id:"wulian_new",data:[],duration:2e3,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u5fc3\u788e",key:"heart_new",id:"heart_new",data:[],duration:4e3,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u8272\u8ff7\u8ff7",key:"mimi_new",id:"mimi_new",data:[],duration:1780,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u5bb3\u7f9e",key:"shy_new",id:"shy_new",data:[],duration:1790,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u98de\u543b",key:"kiss_new",id:"kiss_new",data:[],duration:1580,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u59d4\u5c48",key:"grievance_new",id:"grievance_new",data:[],duration:1470,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u5de8\u6c57",key:"sweat_new",id:"sweat_new",data:[],duration:2330,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u5c34\u5c2c",key:"awkward_new",id:"awkward_new",data:[],duration:1970,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u7591\u60d1",key:"doubt_new",id:"doubt_new",data:[],duration:4120,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u9001\u82b1",key:"flower_new",id:"flower_new",data:[],duration:1540,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u751f\u6c14",key:"angry_new",id:"angry_new",data:[],duration:1560,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u5927\u54ed",key:"cry_new",id:"cry_new",data:[],duration:1470,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u8df3\u821e",key:"dance_new",id:"dance_new",data:[],duration:1440,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u518d\u89c1",key:"bye_new",id:"bye_new",data:[],duration:1680,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u5de6\u4eb2\u4eb2",key:"kiss_left_new",id:"kiss_left_new",data:[],duration:1470,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u53f3\u4eb2\u4eb2",key:"kiss_right_new",id:"kiss_right_new",data:[],duration:1470,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u60ca\u8bb6",key:"surprise_new",id:"surprise_new",data:[],duration:1820,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u5455\u5410",key:"retch_new",id:"retch_new",data:[],duration:4e3,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u6655\u5012",key:"faint_new",id:"faint_new",data:[],duration:3960,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u8981\u62b1\u62b1",key:"pick_new",id:"pick_new",data:[],duration:1470,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u6c42\u52fe\u642d",key:"catch_new",id:"catch_new",data:[],duration:2170,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u6c42\u793c\u7269",key:"gift_new",id:"gift_new",data:[],duration:2120,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u4eae\u706f",key:"light_new",id:"light_new",data:[],duration:3960,subpackage:"emo1",onlyInMic:!1,chatScale:.8,seatScale:1}),new i.EmojiData({name:"\u62bd\u7b7e",key:"rand_new",id:"rand_0_new",data:[0],duration:2880,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u62bd\u7b7e",key:"rand_new",id:"rand_1_new",data:[1],duration:2880,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u62bd\u7b7e",key:"rand_new",id:"rand_2_new",data:[2],duration:2880,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u62bd\u7b7e",key:"rand_new",id:"rand_3_new",data:[3],duration:2880,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u62bd\u7b7e",key:"rand_new",id:"rand_4_new",data:[4],duration:2880,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u62bd\u7b7e",key:"rand_new",id:"rand_5_new",data:[5],duration:2880,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u62bd\u7b7e",key:"rand_new",id:"rand_6_new",data:[6],duration:2880,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u62bd\u7b7e",key:"rand_new",id:"rand_7_new",data:[7],duration:2880,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u786c\u5e01",key:"coin_new",id:"coin_0_new",data:[0],duration:3780,subpackage:"emo2",onlyInMic:!0,chatScale:.4,seatScale:.7}),new i.EmojiData({name:"\u786c\u5e01",key:"coin_new",id:"coin_1_new",data:[1],duration:3780,subpackage:"emo2",onlyInMic:!0,chatScale:.4,seatScale:.7}),new i.EmojiData({name:"\u731c\u62f3",key:"stone_new",id:"stone_0_new",data:[0],duration:2350,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u731c\u62f3",key:"stone_new",id:"stone_1_new",data:[1],duration:2350,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8}),new i.EmojiData({name:"\u731c\u62f3",key:"stone_new",id:"stone_2_new",data:[2],duration:2350,subpackage:"emo2",onlyInMic:!0,chatScale:.5,seatScale:.8})],t._allEmojisUniqueKeys=null,t._loadedEmojiMap=new Map,t}();n.EmojiController=u,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/res/ResManager":"ResManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../common/controller/websocket/RoomSocketInput":"RoomSocketInput","../model/EmojData":"EmojData"}],EmojiItem:[function(t,e,n){"use strict";cc._RF.push(e,"1dfe2/pFadCxJWOnV/DPSFg","EmojiItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/util/UIEventCenter"),i=t("../../../base/script/frame/ui/UIUtil"),a=t("../../../base/script/frame/ui/UIManager"),s=t("./UIEmoji"),l=t("../controller/EmojiController"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.initRoot(),this.initEvent(),this.refreshIcon(),this.refreshName()},e.prototype.initRoot=function(){this._icon=cc.find("Icon",this.node).getComponent(cc.Sprite),this._label=cc.find("Label",this.node).getComponent(cc.Label),this._btnThis=this.node.getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;r.UIEventCenter.ButtonEvent(this._btnThis,function(){t.onBtnThisClick()})},e.prototype.onBtnThisClick=function(){l.EmojiController.SendEmojiByKey(this.data.Key),a.UIManager.CloseUI(s.UIEmoji)},e.prototype.refreshIcon=function(){i.UIUtil.ChangeSprite("texture/emoji/"+this.data.Key,this._icon)},e.prototype.refreshName=function(){this._label.string=this.data.Name},e}(cc.Component);n.EmojiItem=c,cc._RF.pop()},{"../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../controller/EmojiController":"EmojiController","./UIEmoji":"UIEmoji"}],EndBallComponent:[function(t,e,n){"use strict";cc._RF.push(e,"28f6eGbKrNPqKhLUqHi1Yhw","EndBallComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../other/EnumCenter"),s=t("../entity/BallTexture"),l=t("./BaseComponent"),c=t("../../Constance"),u=cc._decorator,h=u.ccclass,f=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ball=null,e._container=null,e.num=0,e._ballPool=new cc.NodePool,e.resetBallInHoleNum=0,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.InitComplete()},e.prototype.Reset=function(){for(var t=this._container.children,e=t.length-1;e>=0;e--)t[e].stopAllActions(),t[e].active=!1,this._ballPool.put(t[e]);this.num=0},e.prototype.ResetToLastRoundValue=function(t){var e=this;if(t.forEach(function(t){t.GetBallState()===a.EnumBallState.InHole&&e.resetBallInHoleNum++},this),this.resetBallInHoleNum<this.num){for(var n=this._container.children,o=n.length-1;o>=this.resetBallInHoleNum;o--)n[o].stopAllActions(),n[o].active=!1,this._ballPool.put(n[o]);this.num=this.resetBallInHoleNum}},e.prototype.RefreshEndBall=function(t){for(var e=this._container.children,n=0,o=(c.Constance.END_BALL_RADIUS,0);o<e.length;o++)e[o].stopAllActions(),e[o].active=!1;for(o=0;o<t.length;o++)if(e[o])e[o].getComponent(s.default).SetTexture(t[o].BallNum),e[o].parent=this._container,e[o].active=!0,n++,e[o].setPosition(this.calcEndBallPos(n));else{var r=null;(r=this._ballPool.size()>0?this._ballPool.get():cc.instantiate(this._ball)).parent=this._container,r.active=!0,r.getComponent(s.default).SetTexture(t[o].BallNum),n++,r.setPosition(this.calcEndBallPos(n))}this.num=n},e.prototype.calcEndBallPos=function(t){var e=c.Constance.END_BALL_RADIUS+7+(t-1)*(c.Constance.END_BALL_RADIUS-3)*2;return new cc.Vec2(27,e)},e.prototype.initRoot=function(){this._ball=cc.find("Ball",this.node),this._container=cc.find("Container",this.node)},e.prototype.initEvent=function(){i.SS.EventCenter.on(a.EnumGameMessageType.BallInHole,this.onBallInHole,this)},e.prototype.removeEvent=function(){i.SS.EventCenter.off(a.EnumGameMessageType.BallInHole,this.onBallInHole,this)},e.prototype.onBallInHole=function(t){if(8!==t&&0!==t){var e=null;(e=this._ballPool.size()>0?this._ballPool.get():cc.instantiate(this._ball)).active=!0,e.getComponent(s.default).SetTexture(t),e.parent=this._container;e.position=new cc.Vec3(100,504,0);var n=504-2*c.Constance.END_BALL_RADIUS;this.num++;var o=this.calcEndBallPos(this.num),r=360*n/(Math.PI*c.Constance.END_BALL_RADIUS*2)*(n-o.y)/n,i=cc.find("Sphere",e);cc.tween(e).to(.2,{position:new cc.Vec2(o.x,504)}).to(1,{position:o}).start(),cc.tween(i).to(.2,{eulerAngles:new cc.Vec3(0,-180,0)}).by(1,{eulerAngles:new cc.Vec3(-r,0,0)}).start()}},e=r([h],e)}(l.default));n.default=f,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../Constance":"Constance","../../other/EnumCenter":"EnumCenter","../entity/BallTexture":"BallTexture","./BaseComponent":"BaseComponent"}],EntryController:[function(t,e,n){"use strict";cc._RF.push(e,"a0019SG11dLmpF5rx9lGhma","EntryController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/api/http/Xhr"),a=t("../../../base/script/frame/audio/AudioManager"),s=t("../../../base/script/frame/clog/Clog"),l=t("../../../base/script/frame/ui/UIManager"),c=t("../../../base/script/global/BaseEnum"),u=t("../../../base/script/global/SS"),h=t("../../../base/script/global/SystemInfoManager"),f=t("../../../base/script/sdk/report/Report"),p=t("../../../base/script/sdk/thinkingdata/controller/TaContoroller"),d=t("../../common/controller/qqShare/ShareManager"),m=t("../../common/controller/subpackage/LaunchManager"),y=t("../../common/view/UILoading"),g=(t("../../login/controller/LoginController"),t("../../login/view/UILogin")),C=t("./AndroidProcess"),_=t("./IOSProcess"),v=t("../../xiyou/controller/XiYouController"),b=t("../../other/EnumCenter"),S=function(){function t(){}return t.Init=function(){s.default.Init(),d.ShareManager.Init(),a.AudioManager.Init(),this.initSystemInfo(),this.Start()},t.Start=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return y.UILoading.Open(),[4,this.initSubpackages()];case 1:return t.sent(),[4,this.readGameConfig()];case 2:return t.sent(),[4,f.Report.Boot("boot")];case 3:return t.sent(),[4,this.GetEnv()];case 4:return t.sent(),[4,v.XiYouController.initXiYou()];case 5:return t.sent(),l.UIManager.OpenUI(g.UILogin),y.UILoading.Close(),[2];case 6:return t.sent(),u.qq?(u.qq.setKeepScreenOn({keepScreenOn:!0}),h.SystemInfoManager.IsIOS?[4,_.IOSPrpocess.Start()]:[3,8]):[3,10];case 7:return t.sent(),[3,10];case 8:return[4,C.AndroidProcess.Start()];case 9:t.sent(),t.label=10;case 10:return y.UILoading.Close(),[2]}})})},t.initSystemInfo=function(){var t=u.qq?u.qq.getSystemInfoSync():{model:"iPhone X",pixelRatio:2,windowWidth:414,windowHeight:896,system:"iOS 10.0.1",language:"zh_CN",version:"7.0.4",screenWidth:414,screenHeight:896,SDKVersion:"2.9.1",brand:"devtools",fontSizeSetting:16,batteryLevel:100,statusBarHeight:44,safeArea:{right:414,bottom:896,left:0,top:44,width:414,height:852},deviceOrientation:"portrait",platform:"devtools",devicePixelRatio:2};h.SystemInfoManager.Init(t)},t.initSubpackages=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.Xiyou)];case 1:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.Emoji)];case 2:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.EmojiPart1)];case 3:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.EmojiPart2)];case 4:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.XiyouCharmIcon)];case 5:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.XiyouVipIcon)];case 6:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.XiyouHeadFrame)];case 7:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.Gift)];case 8:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.UserDetail)];case 9:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.Game)];case 10:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.Room)];case 11:return t.sent(),[4,m.LaunchManager.LoadSubPackage(m.EnumSubPackage.Texture)];case 12:return t.sent(),[2]}})})},t.IphoneXUIFit=function(t,e){if(h.SystemInfoManager.IsIphoneX)for(var n=0;n<t.length;n++)t[n].bottom=e},t.readGameConfig=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){return o(t,void 0,void 0,function(){return r(this,function(t){return cc.loader.loadRes("config/GameConfig",function(t,n){null!=t&&(s.default.Error("load Config Error!"),e(!1)),u.SS.Version=n.json.Version,u.SS.CurPlatform=c.EnumPlatform[""+n.json.Platform],u.SS.CurAppName=n.json.AppName,u.SS.CurAgoraType=c.EnumAgoraType[""+n.json.AgoraType],u.SS.QQAppId=n.json.QQAppId,v.XiYouController.XiYouAppId=n.json.XiYouAppId,u.SS.DevUrl=n.json.DevUrl,u.SS.OfficeUrl=n.json.OfficeUrl,s.default.Trace(s.ClogKey.Entry,"GameVersion="+u.SS.Version),s.default.Trace(s.ClogKey.Entry,"CurPlatform="+u.SS.CurPlatform),s.default.Trace(s.ClogKey.Entry,"CurAppName="+u.SS.CurAppName),s.default.Trace(s.ClogKey.Entry,"CurAgoraType="+u.SS.CurAgoraType),s.default.Trace(s.ClogKey.Entry,"DevUrl="+u.SS.DevUrl),s.default.Trace(s.ClogKey.Entry,"OfficeUrl="+u.SS.OfficeUrl),s.default.Trace(s.ClogKey.Entry,"QQAppId="+u.SS.QQAppId),e(!0)}),[2]})})})]})})},t.GetEnv=function(){return o(this,void 0,void 0,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o,a;return r(this,function(r){switch(r.label){case 0:return t=new i.XhrUrl("https://xy.iambanban.com/xiyou/env").Query({key:"version",value:u.SS.Version}).Url,[4,i.default.GetJson(t)];case 1:return n=r.sent(),0==n.success?(e(!1),[2]):(o=n.data,a=o.env,s.default.IsOpenLog=o.log||!1,u.SS.IsDevMode=a==b.EnumEnv.Alpha||a==b.EnumEnv.Dev||!1,u.SS.HttpUrl=u.SS.IsDevMode?u.SS.DevUrl:u.SS.OfficeUrl,s.default.Trace(s.ClogKey.Entry,"\u662f\u5426\u662f\u6d4b\u8bd5\u73af\u5883\uff1a"+u.SS.IsDevMode+",\u662f\u5426\u5f00\u542f\u65e5\u5fd7\uff1a"+s.default.IsOpenLog),p.TaController.Init(),e(!0),[2])}})})})]})})},t.ReStartGame=function(){cc.audioEngine.stopAll(),cc.game.restart()},t}();n.EntryController=S,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/audio/AudioManager":"AudioManager","../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/BaseEnum":"BaseEnum","../../../base/script/global/SS":"SS","../../../base/script/global/SystemInfoManager":"SystemInfoManager","../../../base/script/sdk/report/Report":"Report","../../../base/script/sdk/thinkingdata/controller/TaContoroller":"TaContoroller","../../common/controller/qqShare/ShareManager":"ShareManager","../../common/controller/subpackage/LaunchManager":"LaunchManager","../../common/view/UILoading":"UILoading","../../login/controller/LoginController":"LoginController","../../login/view/UILogin":"UILogin","../../other/EnumCenter":"EnumCenter","../../xiyou/controller/XiYouController":"XiYouController","./AndroidProcess":"AndroidProcess","./IOSProcess":"IOSProcess"}],Entry:[function(t,e,n){"use strict";cc._RF.push(e,"1a9f1f125pKu4gC2/TaPr3c","Entry");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/frame/ui/UIManager"),a=t("../../common/view/UILoading"),s=t("../../game/controller/GameDataController"),l=t("../../util/FYTipsMgr"),c=t("../controller/EntryController"),u=cc._decorator.ccclass,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.selfAdaption(),window.CC_ENGINE_VERSION=cc.ENGINE_VERSION,s.GameDataController.Entry=this,s.GameDataController.Canvas=cc.find("Entry").getComponent(cc.Canvas),cc.debug.setDisplayStats(!1),cc.game.addPersistRootNode(this.node),this.InitLoading(),this.InitUIManager(),this.InitGameEvent(),c.EntryController.Init()},e.prototype.InitUIManager=function(){i.UIManager.Init(cc.find("UIManager",this.node)),l.FYTipsMgr.init(cc.find("Top",this.node))},e.prototype.InitLoading=function(){cc.find("UIManager/UILoading",this.node).addComponent(a.UILoading).Init()},e.prototype.InitGameEvent=function(){var t=this;cc.game.on(cc.game.EVENT_HIDE,function(){t.OnGameHide()}),cc.game.on(cc.game.EVENT_SHOW,function(){t.GameShow()})},e.prototype.OnGameHide=function(){},e.prototype.GameShow=function(){},e.prototype.selfAdaption=function(){var t=cc.find("Entry").getComponent(cc.Canvas),e=s.GameDataController.GetWinSize().height/s.GameDataController.GetWinSize().width;e>16/9?(t.fitWidth=!0,t.fitHeight=!1):e<16/9&&(t.fitWidth=!1,t.fitHeight=!0)},e=r([u],e)}(cc.Component);n.Entry=h,cc._RF.pop()},{"../../../base/script/frame/ui/UIManager":"UIManager","../../common/view/UILoading":"UILoading","../../game/controller/GameDataController":"GameDataController","../../util/FYTipsMgr":"FYTipsMgr","../controller/EntryController":"EntryController"}],EnumCenter:[function(t,e,n){"use strict";cc._RF.push(e,"c6276MqlYxJZL1b+BmGUOmV","EnumCenter"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.Unknow=0]="Unknow",t[t.Male=1]="Male",t[t.Female=2]="Female"}(n.EnumSex||(n.EnumSex={})),function(t){t.Gift="\u793c\u7269",t.Bag="\u80cc\u5305"}(n.EnumGiftTab||(n.EnumGiftTab={})),function(t){t.Normal="normal",t.Radio="radio",t.RadioDefend="radio-defend",t.Order="order",t.Auto="auto",t.Joy="joy",t.Cp="cp",t.CpLove="cp-love",t.Private="private"}(n.EnumRoomTypes||(n.EnumRoomTypes={})),function(t){t[t.ROLE_REG=0]="ROLE_REG",t[t.ROLE_NORMAL=1]="ROLE_NORMAL",t[t.ROLE_DISABLED=2]="ROLE_DISABLED",t[t.ROLE_GOD=3]="ROLE_GOD"}(n.EnumRole||(n.EnumRole={})),n.EnumRoomSubType||(n.EnumRoomSubType={}),function(t){t.Auto="auto",t.Lock="lock"}(n.EnumRoomMode||(n.EnumRoomMode={})),function(t){t.Normal="normal",t.Order="order"}(n.EnumRoomBusiness||(n.EnumRoomBusiness={})),function(t){t.Business="businss",t.Vip="vip",t.Fleet="fleet",t.Private="private"}(n.RoomProperty||(n.RoomProperty={})),function(t){t.Message="message",t.Notify="notify",t.System="system",t.Package="package",t.Box="box",t.Local="local",t.CloseNotify="close-notify",t.Guess="guess",t.AvatarGift="avatargift"}(n.EnumMessageType||(n.EnumMessageType={})),function(t){t.TxtMsg="RC:TxtMsg"}(n.EnumMessageSubType||(n.EnumMessageSubType={})),function(t){t.Online="Online",t.Admin="Manager"}(n.EnumUIRoomManagerTab||(n.EnumUIRoomManagerTab={})),function(t){t.Createor="createor",t.SuperAdmin="superAdmin",t.Admin="admin",t.Normal="normal",t.SuperPowerAdmin="SuperPowerAdmin"}(n.EnumPurview||(n.EnumPurview={})),function(t){t.ForbiddenMic="forbiddenMic",t.UnforbiddenMic="unforbiddenMic",t.UnlockMic="unlockMic",t.LockMic="lockMic",t.Timer="timer"}(n.EnumOnMicOp||(n.EnumOnMicOp={})),function(t){t.Dev="dev",t.Alpha="alpha",t.Prod="prod"}(n.EnumEnv||(n.EnumEnv={})),function(t){t.XiYou="xiyou",t.Share="share",t.Test="test"}(n.EnumEntryWay||(n.EnumEntryWay={})),function(t){t[t.XiyouCommodity=1]="XiyouCommodity",t[t.XiyouProp=2]="XiyouProp"}(n.EnumXiyouItemType||(n.EnumXiyouItemType={})),function(t){t[t.White=0]="White",t[t.Other=1]="Other"}(n.EnumBallType||(n.EnumBallType={})),function(t){t.GameInit="GameInit",t.BallMoveEnd="BallMoveEnd",t.BallInHole="BallInHole",t.InHole="InHole",t.PlayerCountDownComplete="PlayerCountDownComplete",t.ConfirmBallColorType="ConfirmBallColorType",t.GameAgain="GameAgain",t.WhiteBallCollition="WhiteBallCollition",t.StartTurn="StartTurn",t.NextTurn="NextTurn",t.GameEnd="GameEnd",t.FreeBallPut="FreeBallPut",t.AngleChangeStart="AngleChangeStart",t.AngleChange="AngleChange",t.AngleChangeEnd="AngleChangeEnd",t.CueHitComplete="CueHitComplete",t.TableTouchStart="TableTouchStart",t.TableTouchMove="TableTouchMove",t.TableTouchEnd="TableTouchEnd",t.PowerValueChangeStart="PowerValueChangeStart",t.PowerValueChange="PowerValueChange",t.PowerValueChangeEnd="PowerValueChangeEnd",t.ClickBall="ClickBall",t.GameStateChange="GameStateChange",t.VsAnimFinish="VsAnimFinish",t.ReadyAddGame="ReadyAddGame",t.ReadyExitGame="ReadyExitGame",t.ReadyGame="ReadyGame",t.ReadyStartGame="ReadyStartGame",t.EffectRelease="EffectRelease",t.NetSyncData="NetSyncData",t.ChatRoomStateChange="ChatRoomStateChange",t.OnMatchingCountChange="OnMatchingCountChange",t.OnPlayingListChange="OnUnderPlayingListChange",t.OnShow="OnShow",t.GameRoomStateRefresh="GameRoomStateRefresh"}(n.EnumGameMessageType||(n.EnumGameMessageType={})),function(t){t[t.Idle=0]="Idle",t[t.Move=1]="Move",t[t.MoveEnd=2]="MoveEnd",t[t.InHole=3]="InHole"}(n.EnumBallState||(n.EnumBallState={})),function(t){t[t.Me=0]="Me",t[t.Other=1]="Other"}(n.EnumPlayerType||(n.EnumPlayerType={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(n.EnumPositionType||(n.EnumPositionType={})),function(t){t.None="none",t.Full="solid",t.Half="stripe",t.Eight="black"}(n.EnumBallColorType||(n.EnumBallColorType={})),function(t){t[t.MyStartBall=0]="MyStartBall",t[t.YourRound=1]="YourRound",t[t.HitHalfBall=2]="HitHalfBall",t[t.HitFullBall=3]="HitFullBall",t[t.Foul=4]="Foul",t[t.Win=5]="Win",t[t.Lose=6]="Lose",t[t.Link=7]="Link"}(n.EnumGameTipsType||(n.EnumGameTipsType={})),function(t){t[t.None=0]="None",t[t.Win=1]="Win",t[t.Fail=2]="Fail"}(n.EnumGameResultType||(n.EnumGameResultType={})),function(t){t[t.NextPlayer=0]="NextPlayer",t[t.Continue=1]="Continue",t[t.FreeBall=2]="FreeBall"}(n.EnumRuleType||(n.EnumRuleType={})),function(t){t[t.ReadyToHit=0]="ReadyToHit",t[t.FreeBallIdle=1]="FreeBallIdle",t[t.FreeBallMove=2]="FreeBallMove",t[t.FreeBallPut=3]="FreeBallPut",t[t.HitBall=4]="HitBall"}(n.EnumGameState||(n.EnumGameState={})),function(t){t.BallCollider="S_Game_BallCollider",t.BallHit="S_Game_BallHit",t.CueHit="S_Game_CueHit",t.Pocket="S_Game_Pocket"}(n.EnumAudio||(n.EnumAudio={})),function(t){t.BallArm="billiard.ballArm",t.CueBall="billiard.cueBall",t.Init="game.billiard.init",t.Start="game.billiard.ready",t.AllBalls="game.billiard.allBalls",t.RoomRefresh="room.refersh",t.Pass="game.billiard.pass",t.Result="game.billiard.result",t.Shoot="game.billiard.shoot",t.PlayerBalls="game.billiard.playerBalls",t.Continue="game.billiard.continue"}(n.EnumWsSync||(n.EnumWsSync={})),function(t){t.None="none",t.Wait="wait",t.Ready="ready",t.Playing="playing"}(n.EnumUserStatus||(n.EnumUserStatus={})),function(t){t.Noraml="normal",t.ShootEight="shootEight",t.EightHole="eightHoled",t.EightAndCueBallHoled="eightAndCueBallHoled",t.NoShoot="noShoot",t.NoShot="noShot",t.ShootOpponent="shootOpponent",t.Holed="holed",t.CueBallHoled="cueBallHoled",t.NoShotCueBallHoled="noShotCueBalHoled",t.NoDecorEightHoled="noDecorEightHoled",t.ShootOpponentEightHoled="shootOpponentEightHoled"}(n.EnumHitBallResult||(n.EnumHitBallResult={})),function(t){t.Wait="wait",t.Ready="ready",t.Adjust="adjust",t.Shooting="Shooting",t.Shot="shot",t.End="end"}(n.EnumGameRoomState||(n.EnumGameRoomState={})),function(t){t.None="none",t.Shooter="shooter",t.Others="others"}(n.EnumGameRole||(n.EnumGameRole={})),function(t){t[t.Ready=0]="Ready",t[t.Other=1]="Other"}(n.EnumChatRoomState||(n.EnumChatRoomState={})),function(t){t[t.Cue1=0]="Cue1",t[t.Cue2=1]="Cue2"}(n.CueType||(n.CueType={})),cc._RF.pop()},{}],EventCommond:[function(t,e,n){"use strict";cc._RF.push(e,"b9c2bbYouhIX5Kuzhk6z3U7","EventCommond"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.CommDiaEvent="CommDiaEvent",t.EventLogout="EventLogout",t.UIRoomChat="EventRoomChat",t.UIRoomWellcome="UIRoomWellcome",t.UIVistorEmoji="UIVistorEmoji",t.UIPlayerEmoji="UIPlayerEmoji",t.UIRoomOnline="EventRoomOnline",t.OnRelink="OnRelink",t.UIRoomRefresh="EventRoomRefresh",t.UIRoomReset="EventRoomReset",t.UIRoomMicBt="EventRoomMicBt",t.UITopic="EventTopic",t.UITopicTagChange="EventTopicTagChange",t.UIMicWait="EventUIMicWait",t.OnXiYouMoneyChange="OnSessionMoneyChange",t.OnSelectGiftNumChange="OnSelectGiftNumChange",t.OnSelectGiftIdChange="OnSelectGiftIdChange",t.OnSendGiftWordTip="OnSendGiftWordTip",t.OnShowGiftEffect="OnShowGiftEffect",t.OnShowGiftCountTip="OnShowGiftCountTip",t.SubLoadSuccess="SubLoadSuccess",t.OnSelectRoomManagerOnlineTab="OnSelectRoomManagerOnlineTab",t.UIThemeBackground="UIThemeBackground",t.OnRoomKick="OnRoomKick",t.CloseQQChatBack="CloseQQChatBack",t.UINewbieGuildStep="UINewbieGuildStep",t.UIChatCheck="UIChatCheck",t.UIDressHeadIcon="UIDressHeadIcon",t}();n.EventCommond=o,cc._RF.pop()},{}],FYCountDownMgr:[function(t,e,n){"use strict";cc._RF.push(e,"4f798Kw7QhE4YJs27ZwXaIn","FYCountDownMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bStart=!1,e._dictCountDownInfo={},e._type=0,e}var n;return o(e,t),n=e,Object.defineProperty(e,"Instance",{get:function(){return null===n._instance&&(n._instance=cc.director.getScene().getChildByName("Entry").getComponent(n)),null===n._instance&&(n._instance=cc.director.getScene().getChildByName("Entry").addComponent(n)),n._instance},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=this;if(1===this._type){window.setInterval(function(){t.do(1)},1e3)}},e.prototype.add=function(t,e,n,o){this._dictCountDownInfo[t]&&cc.warn("key = "+t+"is already exist");var r=new l(t,e,n,o);this._dictCountDownInfo[t]=r,this._bStart=!0},e.prototype.remove=function(t){this._dictCountDownInfo[t]&&delete this._dictCountDownInfo[t]},e.prototype.getRemainTime=function(t){if(this._dictCountDownInfo[t])return this._dictCountDownInfo[t].needTime-this._dictCountDownInfo[t].curTime},e.prototype.do=function(t){if(this._bStart)for(var e in this._dictCountDownInfo){var n=this._dictCountDownInfo[e];n.curTime+=t,-1!=n.intervalTime&&(n.intervalTotalTime+=t),-1!=n.needTime&&n.curTime>=n.needTime?(delete this._dictCountDownInfo[e],0===Object.keys(this._dictCountDownInfo).length&&(this._bStart=!1),n.cb&&n.cb(!0,n.curTime)):-1!=n.intervalTime&&n.intervalTotalTime>=n.intervalTime&&(n.cb&&n.cb(!1,n.curTime),n.intervalTotalTime=0)}},e.prototype.update=function(t){0===this._type&&this.do(t)},e._instance=null,e=n=r([a],e)}(cc.Component));n.default=s;var l=function(){return function(t,e,n,o){this.key="",this.needTime=0,this.intervalTime=0,this.intervalTotalTime=0,this.curTime=0,this.cb=null,this.key=t,this.needTime=e,this.intervalTime=n,this.cb=o,this.curTime=0,this.intervalTotalTime=0}}();cc._RF.pop()},{}],FYTipsMgr:[function(t,e,n){"use strict";cc._RF.push(e,"428496u99lHZbAssalQfZc7","FYTipsMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./FYTips"),r=t("../../base/script/frame/res/ResManager"),i=t("../../base/script/frame/clog/Clog"),a=function(){function t(){this.isInit=!1,this._nodeContainer=null,this._pool=new cc.NodePool,this._tipPrefab=null}return t.prototype.init=function(t){var e=this;this._nodeContainer=t,r.ResManager.LoadRes("P_FYTips",cc.Prefab,function(t,n){e._tipPrefab=n,e.isInit=!0})},t.prototype.getTips=function(){var t=null;return this._pool.size()>0?t=this._pool.get():this._tipPrefab&&(t=cc.instantiate(this._tipPrefab)),t},t.prototype.putTips=function(t){t?this._pool.put(t):cc.error("nodeTips is null")},t.prototype.showTips=function(t){this.isInit||i.default.Warn(i.ClogKey.UI,"Tips \u6ca1\u6709\u521d\u59cb\u5316");var e=this.addTips();e?e.setTips(t):i.default.Warn(i.ClogKey.UI,"Tips \u521b\u5efa\u52a0\u8f7d\u5931\u8d25 tips = "+t)},t.prototype.addTips=function(t){void 0===t&&(t=this._nodeContainer);var e=this.getTips();return e?(e.parent=t,e.scale=1,e.opacity=255,e.getComponent(o.default)):null},t.prototype.removeTips=function(t){this.putTips(t.node)},t}();n.default=a,n.FYTipsMgr=new a,cc._RF.pop()},{"../../base/script/frame/clog/Clog":"Clog","../../base/script/frame/res/ResManager":"ResManager","./FYTips":"FYTips"}],FYTips:[function(t,e,n){"use strict";cc._RF.push(e,"8a27c/c2edJzqMK7WW7dIda","FYTips");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./FYTipsMgr"),a=cc._decorator,s=a.ccclass,l=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTips=null,e}return o(e,t),e.prototype.setTips=function(t){this.labTips&&cc.isValid(this.labTips)&&(this.labTips.string=t,this.playTween())},e.prototype.playTween=function(){this.node.setPosition(0,0);var t=this;this.node.opacity=0;var e=cc.fadeTo(.3,255),n=cc.fadeTo(.3,0),o=cc.moveBy(1.2,0,80),r=cc.callFunc(function(){i.FYTipsMgr.removeTips(t)}),a=cc.sequence(e,cc.delayTime(.9),n,r),s=cc.spawn(o,a);this.node.runAction(s)},r([l(cc.Label)],e.prototype,"labTips",void 0),e=r([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{"./FYTipsMgr":"FYTipsMgr"}],FreeBallComponent:[function(t,e,n){"use strict";cc._RF.push(e,"7d9fd6Kz/RAM6P3sdTWjOE8","FreeBallComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../common/controller/http/HttpApi"),s=t("../../common/controller/websocket/RoomSocketInput"),l=t("../../Constance"),c=t("../../other/EnumCenter"),u=t("../controller/GameDataController"),h=t("./BaseComponent"),f=t("../../room/controller/RoomController"),p=cc._decorator,d=p.ccclass,m=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canNotPut=null,e._hand=null,e._bg=null,e.deltaPos=cc.Vec2.ZERO,e.allBallPosArray=[],e}return o(e,t),e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.InitComplete()},e.prototype.Reset=function(){this.node.active=!1},e.prototype.ShowFreeBall=function(t,e){u.GameDataController.GameState=c.EnumGameState.FreeBallIdle,this._bg.active=!0,this._hand.active=!0,this.node.active=!0,this.node.setPosition(t),this.allBallPosArray=e,this.canPut()},e.prototype.ShowFreeBallStart=function(t,e){this._bg.active=!1,this._hand.active=!1,this.node.active=!0,this.node.setPosition(t),this.allBallPosArray=e,this.canPut()},e.prototype.PutFreeBall=function(){this._bg.active=!1,this._hand.active=!1},e.prototype.HideFreeBall=function(){this.node.active=!1},e.prototype.SyncPosition=function(t){f.RoomController.IsMyRound()||(u.GameDataController.GameState=c.EnumGameState.FreeBallMove,this._bg.active=!0,this._hand.active=!0,this.node.setPosition(new cc.Vec2(t.cue_ball.location.x,t.cue_ball.location.y)),this._canNotPut.active=!this.canPut())},e.prototype.initRoot=function(){this._bg=cc.find("Bg",this.node),this._hand=cc.find("Hand",this.node),this._canNotPut=cc.find("CanNotPut",this.node)},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.removeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.canPut=function(){var t=!0;this.node.x<u.GameDataController.TableLeftBorder.x+l.Constance.BALL_RADIUS&&(this.node.x=u.GameDataController.TableLeftBorder.x+l.Constance.BALL_RADIUS),this.node.x>u.GameDataController.TableRightBorder.x-l.Constance.BALL_RADIUS&&(this.node.x=u.GameDataController.TableRightBorder.x-l.Constance.BALL_RADIUS),this.node.y<u.GameDataController.TableBottomBorder.y+l.Constance.BALL_RADIUS&&(this.node.y=u.GameDataController.TableBottomBorder.y+l.Constance.BALL_RADIUS),u.GameDataController.IsFirstHit?this.node.y>-210&&(this.node.y=-210):this.node.y>u.GameDataController.TableTopBorder.y-l.Constance.BALL_RADIUS&&(this.node.y=u.GameDataController.TableTopBorder.y-l.Constance.BALL_RADIUS);for(var e=0;e<this.allBallPosArray.length;e++){var n=this.allBallPosArray[e];if(this.node.x>=n.x-2*l.Constance.BALL_RADIUS&&this.node.x<=n.x+2*l.Constance.BALL_RADIUS&&this.node.y>=n.y-2*l.Constance.BALL_RADIUS&&this.node.y<=n.y+2*l.Constance.BALL_RADIUS)return t=!1}return t},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.onTouchStart=function(t){if(f.RoomController.IsMyRound()){u.GameDataController.GameState=c.EnumGameState.FreeBallMove,this._bg.active=!0,this._hand.active=!0;var e=t.getLocation();this.deltaPos=this.node.getPosition().sub(e)}},e.prototype.onTouchMove=function(t){f.RoomController.IsMyRound()&&(this.node.setPosition(this.deltaPos.add(t.getLocation())),this._canNotPut.active=!this.canPut(),s.RoomSocketInput.InputMoveCueBall(this.node.getPosition()))},e.prototype.onTouchEnd=function(){f.RoomController.IsMyRound()&&this.canPut()&&(i.SS.EventCenter.emit(c.EnumGameMessageType.FreeBallPut,this.node.getPosition()),this.PutFreeBall(),a.default.MoveCueBall(this.node.getPosition()))},e.prototype.onTouchCancel=function(){f.RoomController.IsMyRound()},e=r([d],e)}(h.default));n.default=m,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../Constance":"Constance","../../common/controller/http/HttpApi":"HttpApi","../../common/controller/websocket/RoomSocketInput":"RoomSocketInput","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../controller/GameDataController":"GameDataController","./BaseComponent":"BaseComponent"}],GameCenter:[function(t,e,n){"use strict";cc._RF.push(e,"2bd65zde3JB/5xhtzlknRKc","GameCenter");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/frame/clog/Clog"),a=t("../../../base/script/global/BaseEnum"),s=t("../../../base/script/global/SS"),l=t("../../ready/controller/UIReadyController"),c=function(){function t(){}return t.ReStartGame=function(){cc.audioEngine.stopAll(),cc.game.restart()},t.InitGame=function(){},t.Start=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return s.SS.IsDevMode=!0,[4,this.readGameConfig()];case 1:return t.sent()?(this.initAgora(),l.UIReadyController.InitData(),l.UIReadyController.OpenUI(),[2]):[2]}})})},t.initAgora=function(){s.SS.IsDevMode},t.readGameConfig=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){return o(t,void 0,void 0,function(){return r(this,function(t){return cc.loader.loadRes("config/GameConfig",function(t,n){null!=t&&(i.default.Error("load Config Error!"),e(!1)),s.SS.CurPlatform=a.EnumPlatform[""+n.json.Platform],s.SS.CurAppName=n.json.AppName,s.SS.CurAgoraType=a.EnumAgoraType[""+n.json.AgoraType],s.SS.IsDevMode=Boolean(n.json.IsDevMode),s.SS.HttpUrl=n.json.HttpUrl,i.default.Trace(i.ClogKey.Entry,"CurPlatform="+s.SS.CurPlatform),i.default.Trace(i.ClogKey.Entry,"CurAppName="+s.SS.CurAppName),i.default.Trace(i.ClogKey.Entry,"CurAgoraType="+s.SS.CurAgoraType),i.default.Trace(i.ClogKey.Entry,"IsDevMode="+s.SS.IsDevMode),i.default.Trace(i.ClogKey.Entry,"HttpUrl="+s.SS.HttpUrl),e(!0)}),[2]})})})]})})},t}();n.GameCenter=c,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/BaseEnum":"BaseEnum","../../../base/script/global/SS":"SS","../../ready/controller/UIReadyController":"UIReadyController"}],GameDataController:[function(t,e,n){"use strict";cc._RF.push(e,"a14a5wSdmxM8a2ilnCkgaYy","GameDataController"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../other/EnumCenter"),r=t("../../../base/script/global/SS"),i=t("../../util/UtilityEx"),a=t("../../room/controller/RoomController"),s=t("../../../base/script/frame/clog/Clog"),l=function(){function t(){this.Entry=null,this.Canvas=null,this.TableSize=new cc.Vec2(0,0),this.TableLeftBorder=new cc.Vec2(0,0),this.TableRightBorder=new cc.Vec2(0,0),this.TableTopBorder=new cc.Vec2(0,0),this.TableBottomBorder=new cc.Vec2(0,0),this.WhiteBallPos=new cc.Vec3(0,0,0),this.OverTimeCount=[0,0],this.StartBallPosition=-1,this.RemainBallNumArray=[0,0],this.IsFirstHit=!1,this.IsGameStart=!1,this.MyBallColorType=o.EnumBallColorType.None,this.gameStatePre=o.EnumGameState.ReadyToHit,this.gameState=o.EnumGameState.ReadyToHit,this.GameUserDataArray=[],this.LinkNumArray=[],this._isNewGuide=-1,this.AgoraSwitch=!1,this.ShowTime=0,this.HideTime=0}return t.prototype.GetDesignWidth=function(){return this.Canvas?this.Canvas.designResolution.width:0},t.prototype.GetDesignHeight=function(){return this.Canvas?this.Canvas.designResolution.height:0},t.prototype.GetWinSize=function(){return cc.winSize},t.prototype.StartTurn=function(){r.SS.EventCenter.emit(o.EnumGameMessageType.StartTurn)},t.prototype.NextTurn=function(t){s.default.Cyan(s.ClogKey.UI,"\u4e0b\u4e2a\u56de\u5408 BiCurrent = "+a.RoomController.CurRoom.BiCurrent),r.SS.EventCenter.emit(o.EnumGameMessageType.NextTurn,t||30)},Object.defineProperty(t.prototype,"GameState",{get:function(){return this.gameState},set:function(t){t!=this.gameState&&(this.gameStatePre=this.gameState,this.gameState=t,r.SS.EventCenter.emit(o.EnumGameMessageType.GameStateChange,this.gameState,this.gameStatePre))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsNewGuide",{get:function(){return 1},set:function(t){t!=this._isNewGuide&&(this._isNewGuide=t,i.SetLocalStorageNumber("isNewGuide",this._isNewGuide))},enumerable:!0,configurable:!0}),t.prototype.Reset=function(){this.OverTimeCount=[0,0],this.WhiteBallPos=new cc.Vec3(0,0,0),this.IsGameStart=!1,this.MyBallColorType=o.EnumBallColorType.None,this.gameState=o.EnumGameState.ReadyToHit,this.RemainBallNumArray=[0,0],this.IsFirstHit=!0},t.prototype.processNetData=function(t){if(t&&t.op&&t.data)switch(t.op){case o.EnumWsSync.Start:var e=t.data;this.StartBallPosition=e.position,r.SS.EventCenter.emit(o.EnumWsSync.Start);break;case o.EnumWsSync.AllBalls:case o.EnumWsSync.BallArm:case o.EnumWsSync.Continue:case o.EnumWsSync.CueBall:case o.EnumWsSync.Init:case o.EnumWsSync.Pass:case o.EnumWsSync.PlayerBalls:case o.EnumWsSync.Result:case o.EnumWsSync.RoomRefresh:case o.EnumWsSync.Shoot:}},t}();n.GameDataController=new l,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../../util/UtilityEx":"UtilityEx"}],GameTipsComponent:[function(t,e,n){"use strict";cc._RF.push(e,"363124+v9xACZZXdtXTMDwJ","GameTipsComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIUtil"),i=t("../../../base/script/global/SS"),a=t("../../other/EnumCenter"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._container=null,e._win=null,e._lose=null,e._yourRound=null,e._hitFullBall=null,e._hitHalfBall=null,e._foul=null,e._myStartBall=null,e._link=null,e._labLinkNum=null,e._other=null,e._nextRoundOther=null,e._hitFullBallOther=null,e._hitHalfBallOther=null,e._foulOther=null,e._startBallOther=null,e._linkOther=null,e._labLinkNumOther=null,e._headRedBorder=null,e._headIcon=null,e}return o(e,t),e.prototype.Init=function(){this.initRoot(),this.InitComplete()},e.prototype.Reset=function(){this.node.stopAllActions(),this.hideAll()},e.prototype.ShowGameTip=function(t){this._win.active=t===a.EnumGameTipsType.Win,this._lose.active=t===a.EnumGameTipsType.Lose,this._hitFullBall.active=t===a.EnumGameTipsType.HitFullBall,this._hitHalfBall.active=t===a.EnumGameTipsType.HitHalfBall,this._foul.active=t===a.EnumGameTipsType.Foul,this._myStartBall.active=t===a.EnumGameTipsType.MyStartBall,this._yourRound.active=t===a.EnumGameTipsType.YourRound,this._link.active=t===a.EnumGameTipsType.Link,this.playTween(t)},e.prototype.ShowGameTipOther=function(t,e){this._win.active=t===a.EnumGameTipsType.Win,this._lose.active=t===a.EnumGameTipsType.Lose,this._hitFullBallOther.active=t===a.EnumGameTipsType.HitFullBall,this._hitHalfBallOther.active=t===a.EnumGameTipsType.HitHalfBall,this._foulOther.active=t===a.EnumGameTipsType.Foul,this._startBallOther.active=t===a.EnumGameTipsType.MyStartBall,this._nextRoundOther.active=t===a.EnumGameTipsType.YourRound,this._linkOther.active=t===a.EnumGameTipsType.Link;var n=i.SS.ImageUrlProxy+e.Icon;r.UIUtil.LoadRemoteImage(n,this._headIcon),this._headRedBorder.active=1===e.BiPosition,this.playTweenOther(t)},e.prototype.ShowLink=function(t){console.log("ShowLink num = "+t),t>=3&&t<=8&&(this._labLinkNum.string=t.toString(),this.ShowGameTip(a.EnumGameTipsType.Link))},e.prototype.ShowLinkOther=function(t,e){console.log("ShowLinkOther num = "+t),t>=3&&t<=8&&(this._labLinkNumOther.string=t.toString(),this.ShowGameTipOther(a.EnumGameTipsType.Link,e))},e.prototype.playTween=function(t){this._other.active=!1,this._container.active=!0,t!=a.EnumGameTipsType.Win&&t!=a.EnumGameTipsType.Lose?(this._container.stopAllActions(),this._container.scale=0,this._container.opacity=255,cc.tween(this._container).to(.5,{scale:1},{easing:"backOut"}).delay(1).to(.2,{opacity:0}).start()):t===a.EnumGameTipsType.Win?(this._win.stopAllActions(),this._win.scale=0,this._win.opacity=255,cc.tween(this._win).to(.5,{scale:1},{easing:"backOut"}).delay(1).to(.2,{opacity:0}).start()):t===a.EnumGameTipsType.Lose&&(this._lose.stopAllActions(),this._lose.scale=0,this._lose.opacity=255,cc.tween(this._lose).to(.5,{scale:1},{easing:"backOut"}).delay(1).to(.2,{opacity:0}).start())},e.prototype.playTweenOther=function(t){this._other.active=!0,this._container.active=!1,t!=a.EnumGameTipsType.Win&&t!=a.EnumGameTipsType.Lose?(this._other.stopAllActions(),this._other.scale=0,this._other.opacity=255,cc.tween(this._other).to(.5,{scale:1},{easing:"backOut"}).delay(1).to(.2,{opacity:0}).start()):t===a.EnumGameTipsType.Win?(this._win.stopAllActions(),this._win.scale=0,this._win.opacity=255,cc.tween(this._win).to(.5,{scale:1},{easing:"backOut"}).delay(1).to(.2,{opacity:0}).start()):t===a.EnumGameTipsType.Lose&&(this._lose.stopAllActions(),this._lose.scale=0,this._lose.opacity=255,cc.tween(this._lose).to(.5,{scale:1},{easing:"backOut"}).delay(1).to(.2,{opacity:0}).start())},e.prototype.initRoot=function(){this._container=cc.find("Container",this.node),this._win=cc.find("Win",this.node),this._lose=cc.find("Lose",this.node),this._yourRound=cc.find("YourRound",this._container),this._hitHalfBall=cc.find("HitHalfBall",this._container),this._hitFullBall=cc.find("HitFullBall",this._container),this._foul=cc.find("Foul",this._container),this._myStartBall=cc.find("MyStartBall",this._container),this._link=cc.find("Link",this._container),this._labLinkNum=cc.find("Link/LabNum",this._container).getComponent(cc.Label),this._other=cc.find("Other",this.node),this._headRedBorder=cc.find("Head/Head2",this._other),this._headIcon=cc.find("Head/HeadMask/Head",this._other).getComponent(cc.Sprite),this._foulOther=cc.find("Foul",this._other),this._hitFullBallOther=cc.find("HitFullBall",this._other),this._hitHalfBallOther=cc.find("HitHalfBall",this._other),this._startBallOther=cc.find("MyStartBall",this._other),this._nextRoundOther=cc.find("YourRound",this._other),this._linkOther=cc.find("Link",this._other),this._labLinkNumOther=cc.find("Link/LabNum",this._other).getComponent(cc.Label)},e.prototype.hideAll=function(){this._yourRound.active=!1,this._link.active=!1,this._hitFullBall.active=!1,this._hitHalfBall.active=!1,this._foul.active=!1,this._myStartBall.active=!1,this._win.active=!1,this._lose.active=!1},e}(t("./BaseComponent").default);n.default=s,cc._RF.pop()},{"../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","./BaseComponent":"BaseComponent"}],GameUserData:[function(t,e,n){"use strict";cc._RF.push(e,"c04ef7G5GdFLqq3FH526axq","GameUserData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t=null),this.Id=0,this.Name="",this.Sex=0,this.Age=0,this.HeadUrl="",this.SeatId=0,this.Position=0,null!==t&&(t.hasOwnProperty("id")&&(this.Id=Number(t.id)),t.hasOwnProperty("name")&&(this.Name=t.name),t.hasOwnProperty("sex")&&(this.Sex=Number(t.sex)),t.hasOwnProperty("age")&&(this.Age=Number(t.age)),t.hasOwnProperty("head")&&(this.HeadUrl=t.head),t.hasOwnProperty("seatId")&&(this.SeatId=t.seatId))}return t.FromRoomSeatData=function(e){var n=new t;return n.Name=e.Name,n.Id=e.UId,n.HeadUrl=e.Icon,n.SeatId=e.BiPosition,n.Position=e.Position,n},t}();n.GameUserData=o,cc._RF.pop()},{}],GiftEffectController:[function(t,e,n){"use strict";cc._RF.push(e,"e9e5db6SgtAibLwt8Hi9aqG","GiftEffectController"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.GiftEffectList=new Array,t}();n.GiftEffectController=o,cc._RF.pop()},{}],GiftEffectData:[function(t,e,n){"use strict";cc._RF.push(e,"20eb37DP1pMvrU/pCCTC2v/","GiftEffectData"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../xiyou/config/XiYouGiftConfig"),r=function(){return function(t){if(t){this.GiftId=t.extra.gift.id;var e=o.XiYouGiftTable.GetGiftConfigById(this.GiftId).Name;this.Content=t.extra.from+"\u6253\u8d4f\u4e86"+t.extra.to+e,this.GiftNum=t.extra.gift._num,this.From={UId:t.extra.uid,Name:t.extra.from,Vip:t.extra.vip_new,Icon:t.extra.icon},this.To={UId:t.extra.to_uid,Name:t.extra.to}}}}();n.GiftEffectData=r,cc._RF.pop()},{"../../xiyou/config/XiYouGiftConfig":"XiYouGiftConfig"}],GiftItem:[function(t,e,n){"use strict";cc._RF.push(e,"4275eGCvYtBfa0fyWizQl1B","GiftItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../../base/script/util/UIEventCenter"),i=t("../../../../../base/script/frame/ui/UIUtil"),a=t("../../../../xiyou/controller/XiYouGiftManager"),s=t("../../../../other/EnumCenter"),l=t("../GiftPanel"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.node.active=!0,this.initRoot(),this.initEvent(),this.refreshAll()},e.prototype.initRoot=function(){this._icon=cc.find("Icon",this.node).getComponent(cc.Sprite),this._cost=cc.find("Cost",this.node).getComponent(cc.Label),this._nameLabel=cc.find("Name",this.node).getComponent(cc.Label),this._onSelect=cc.find("OnSelect",this.node),this._onSelect.active=!1,this._btnThis=this.node.getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;r.UIEventCenter.ButtonEvent(this._btnThis,function(){return t.onBtnThisClick()})},e.prototype.refreshAll=function(){this.refreshIcon(),this.refrehsCost(),this.refreshName(),this.RefreshOnSelect()},e.prototype.refreshIcon=function(){i.UIUtil.ChangeSprite("gift_01_"+this.data.Id,this._icon)},e.prototype.refreshName=function(){this._nameLabel.string=this.data.Name},e.prototype.refrehsCost=function(){switch(this.data.Type){case s.EnumXiyouItemType.XiyouCommodity:return this._cost.string=this.data.Price+"\u73a9\u5e01",void(this._cost.node.color=(new cc.Color).fromHEX("#FF6949"));case s.EnumXiyouItemType.XiyouProp:return this._cost.string=this.data.Price+"\u91d1\u5e01",void(this._cost.node.color=(new cc.Color).fromHEX("#FFC600"))}},e.prototype.RefreshOnSelect=function(){this._onSelect.active=a.XiYouGiftManager.CurSendGiftInfo.Id==this.data.Id},e.prototype.onBtnThisClick=function(){a.XiYouGiftManager.CurSendGiftInfo.Id=this.data.Id,l.GiftPanel.Instance.OnSelectGiftId()},e}(cc.Component);n.GiftItem=c,cc._RF.pop()},{"../../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../../other/EnumCenter":"EnumCenter","../../../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager","../GiftPanel":"GiftPanel"}],GiftNumItem:[function(t,e,n){"use strict";cc._RF.push(e,"b4a10XVdHlLJJIWkE6UObYK","GiftNumItem"),cc._RF.pop()},{}],GiftPanel:[function(t,e,n){"use strict";cc._RF.push(e,"43f52D6a/dOxrEJqrdzoeNb","GiftPanel");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./giftList/GiftItem"),s=t("../../../xiyou/controller/XiYouGiftManager"),l=t("./giftTarget/GiftTarget"),c=t("../../../login/model/SessionData"),u=t("../../../../base/script/global/SS"),h=t("../../../other/EventCommond"),f=t("../../../room/controller/RoomController"),p=t("../../../xiyou/config/XiYouGiftConfig"),d=t("../../../../base/script/util/UIEventCenter"),m=t("../../../common/view/UIToast"),y=t("../../../other/EnumCenter"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numberList=[1,10,30,66,188,520,1314],e._btnNumberItemList=[],e}return o(e,t),e.prototype.onLoad=function(){e.Instance=this,this.initRoot(),this.initEvent(),this.initGiftItems()},e.prototype.start=function(){this.refreshMoney(),this.refreshGiftCharmValue(),this.refreshGiftVipValue(),this.refreshGiftNumber(),this.refreshBgWidget()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){var t=this;this._bgWidget=cc.find("Bg",this.node).getComponent(cc.Widget),cc.find("Players",this.node).addComponent(l.GiftTarget),this._giftItem=cc.find("Gifts/GiftItem",this.node),this._giftItem.active=!1,this._giftRoot=cc.find("Gifts/GiftRoot/view/content",this.node),this._moneyLabel=cc.find("BottomLayer/Money",this.node).getComponent(cc.Label),this._goldLabel=cc.find("BottomLayer/Gold",this.node).getComponent(cc.Label),this._btnNumber=cc.find("Btns/BtnNumber",this.node).getComponent(cc.Button),this._btnSend=cc.find("Btns/BtnSend",this.node).getComponent(cc.Button),this._numberMenu=cc.find("NumberMenu",this.node).getComponent(cc.Button),this._numberMenu.node.active=!1,this._charmLabel=cc.find("Layout/CharmLabel",this.node).getComponent(cc.Label),this._vipLabel=cc.find("Layout/VIPLabel",this.node).getComponent(cc.Label),this._giftNum=cc.find("Btns/BtnNumber/Num",this.node).getComponent(cc.Label);for(var e=function(e){var o=n.numberList[e],r=cc.find("NumberMenu/Layout/Item_"+o,n.node).getComponent(cc.Button);d.UIEventCenter.ButtonEvent(r,function(){s.XiYouGiftManager.CurSendGiftInfo.Num=o,t.onSelectGiftNum()}),n._btnNumberItemList.push(r.node)},n=this,o=0;o<this.numberList.length;o++)e(o)},e.prototype.initGiftItems=function(){this.allGiftItem=new Array;for(var t=0;t<p.XiYouGiftTable.AllConfig.length;t++){var e=p.XiYouGiftTable.AllConfig[t],n=cc.instantiate(this._giftItem);n.setParent(this._giftRoot);var o=n.addComponent(a.GiftItem);o.Init(e),this.allGiftItem.push(o)}},e.prototype.initEvent=function(){var t=this;d.UIEventCenter.ButtonEvent(this._btnNumber,function(){return t.onBtnNumberClick()}),d.UIEventCenter.ButtonEvent(this._btnSend,function(){return t.onBtnSendClick()}),d.UIEventCenter.ButtonEvent(this._numberMenu,function(){return t.onNumberMenuClick()}),u.SS.EventCenter.on(h.EventCommond.OnXiYouMoneyChange,this.refreshMoney,this)},e.prototype.onNumberMenuClick=function(){this._numberMenu.node.active=!this._numberMenu.node.active},e.prototype.removeEvent=function(){u.SS.EventCenter.off(h.EventCommond.OnXiYouMoneyChange,this.refreshMoney,this)},e.prototype.refreshGiftNumber=function(){this._giftNum.string=s.XiYouGiftManager.CurSendGiftInfo.Num.toString()},e.prototype.refreshMoney=function(){this._moneyLabel.string=c.Session.XiYou.Deposit.toString(),this._goldLabel.string=c.Session.XiYou.Gold.toString()},e.prototype.onBtnNumberClick=function(){this._numberMenu.node.active=!this._numberMenu.node.active},e.prototype.refreshGiftCharmValue=function(){var t=p.XiYouGiftTable.GetGiftConfigById(s.XiYouGiftManager.CurSendGiftInfo.Id);t?(this._charmLabel.node.active=!0,this._charmLabel.string="\u9b45\u529b\u503c+"+(t.Charm*s.XiYouGiftManager.CurSendGiftInfo.Num).toString()):this._charmLabel.node.active=!1},e.prototype.refreshGiftVipValue=function(){var t=p.XiYouGiftTable.GetGiftConfigById(s.XiYouGiftManager.CurSendGiftInfo.Id);t?(this._vipLabel.node.active=!0,this._vipLabel.string="VIP\u503c+"+(t.VipValue*s.XiYouGiftManager.CurSendGiftInfo.Num).toString()):this._vipLabel.node.active=!1},e.prototype.refreshBtnNumberItem=function(){for(var t=0;t<this._btnNumberItemList.length;t++)this._btnNumberItemList[t].color=s.XiYouGiftManager.CurSendGiftInfo.Num===this.numberList[t]?new cc.Color(102,102,102):new cc.Color(34,34,34)},e.prototype.OnSelectGiftId=function(){this.allGiftItem.forEach(function(t){return t.RefreshOnSelect()}),this.refreshGiftVipValue(),this.refreshGiftCharmValue()},e.prototype.onSelectGiftNum=function(){this.refreshGiftNumber(),this.onNumberMenuClick(),this.refreshGiftVipValue(),this.refreshGiftCharmValue(),this.refreshBtnNumberItem()},e.prototype.onBtnSendClick=function(){return r(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:switch(t=p.XiYouGiftTable.GetGiftConfigById(s.XiYouGiftManager.CurSendGiftInfo.Id),e=t.Price*s.XiYouGiftManager.CurSendGiftTarget.UIdList.length*s.XiYouGiftManager.CurSendGiftInfo.Num,t.Type){case y.EnumXiyouItemType.XiyouCommodity:if(c.Session.XiYou.Deposit<e)return m.UIToast.Show("\u60a8\u7684\u73a9\u5e01\u4e0d\u8db3\uff0c\u8bf7\u8fd4\u56de\u5927\u5385\u5145\u503c"),[2];break;case y.EnumXiyouItemType.XiyouProp:if(c.Session.XiYou.Gold<e)return m.UIToast.Show("\u60a8\u7684\u91d1\u5e01\u4e0d\u8db3"),[2]}return s.XiYouGiftManager.CurSendGiftTarget.UIdList.indexOf(c.Session.BanBan.UId)>=0?(m.UIToast.Show("\u4e0d\u80fd\u9001\u7ed9\u81ea\u5df1"),[2]):s.XiYouGiftManager.CurSendGiftTarget.UIdList.length<=0?(m.UIToast.Show("\u672a\u9009\u62e9\u8d60\u9001\u7684\u73a9\u5bb6"),[2]):s.XiYouGiftManager.CurSendGiftInfo.Num<=0?(m.UIToast.Show("\u793c\u7269\u6570\u636e\u6709\u8bef"),[2]):s.XiYouGiftManager.CurSendGiftInfo.Id<=0?(m.UIToast.Show("\u793c\u7269\u4e0d\u5b58\u5728"),[2]):(this._btnSend.interactable=!1,[4,s.XiYouGiftManager.GiftSend()]);case 1:return n.sent(),this._btnSend.interactable=!0,[2]}})})},e.prototype.refreshBgWidget=function(){if(f.RoomController.Seats.filter(function(t){return t.HasPlayer&&t.UId!=c.Session.BanBan.UId}).length>0)return this._bgWidget.top=0,void(this._bgWidget.bottom=0);this._bgWidget.top=110,this._bgWidget.bottom=0},e}(cc.Component);n.GiftPanel=g,cc._RF.pop()},{"../../../../base/script/global/SS":"SS","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../common/view/UIToast":"UIToast","../../../login/model/SessionData":"SessionData","../../../other/EnumCenter":"EnumCenter","../../../other/EventCommond":"EventCommond","../../../room/controller/RoomController":"RoomController","../../../xiyou/config/XiYouGiftConfig":"XiYouGiftConfig","../../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager","./giftList/GiftItem":"GiftItem","./giftTarget/GiftTarget":"GiftTarget"}],GiftTab:[function(t,e,n){"use strict";cc._RF.push(e,"8d22fRyXmtGY5wcxhPtUeww","GiftTab");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../other/EnumCenter"),i=t("../../../../base/script/util/UIEventCenter"),a=t("../../../../base/script/frame/clog/Clog"),s=t("../main/UIGift"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curTab=r.EnumGiftTab.Gift,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.initRoot=function(){this._btnGift=cc.find("BtnGift",this.node).getComponent(cc.Button),this._btnGiftOn=cc.find("BtnGift/On",this.node),this._btnGiftOff=cc.find("BtnGift/Off",this.node),this._btnBag=cc.find("BtnBag",this.node).getComponent(cc.Button),this._btnBagOn=cc.find("BtnBag/On",this.node),this._btnBagOff=cc.find("BtnBag/Off",this.node)},e.prototype.initEvent=function(){var t=this;i.UIEventCenter.ButtonEvent(this._btnGift,function(){return t.onBntGiftClick()}),i.UIEventCenter.ButtonEvent(this._btnBag,function(){return t.onBntBagClick()})},e.prototype.refreshTab=function(){switch(this.curTab){case r.EnumGiftTab.Gift:this._btnGiftOn.active=!0,this._btnGiftOff.active=!1,this._btnBagOn.active=!1,this._btnBagOff.active=!0;break;case r.EnumGiftTab.Bag:this._btnGiftOn.active=!1,this._btnGiftOff.active=!0,this._btnBagOn.active=!0,this._btnBagOff.active=!1}s.UIGift.Instance.ShowSubPanel(this.curTab)},e.prototype.onBntGiftClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoomGift >> onBntGiftClick"),this.curTab!=r.EnumGiftTab.Gift&&(this.curTab=r.EnumGiftTab.Gift,this.refreshTab())},e.prototype.onBntBagClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoomGift >> onBntBagClick"),this.curTab!=r.EnumGiftTab.Bag&&(this.curTab=r.EnumGiftTab.Bag,this.refreshTab())},e}(cc.Component);n.GiftTab=l,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../other/EnumCenter":"EnumCenter","../main/UIGift":"UIGift"}],GiftTargetData:[function(t,e,n){"use strict";cc._RF.push(e,"26777UfOL5IN5QzDtTHg/cm","GiftTargetData"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../login/model/SessionData"),r=t("../../../base/script/util/ArrayUtil"),i=function(){function t(){this.targetIds=new Array}return Object.defineProperty(t.prototype,"UIdList",{get:function(){return this.targetIds},enumerable:!0,configurable:!0}),t.prototype.Add=function(t){if(t!=o.Session.BanBan.UId&&!this.Has(t))return this.targetIds.push(t),this},t.prototype.Has=function(t){return this.targetIds.indexOf(t)>=0},t.prototype.Del=function(t){if(this.Has(t))return r.ArrayRemove(this.targetIds,t),this},t.prototype.ToString=function(){var t=new Array;return this.targetIds.forEach(function(e){t.push(e.toString())}),t},t}();n.GiftTargetData=i,cc._RF.pop()},{"../../../base/script/util/ArrayUtil":"ArrayUtil","../../login/model/SessionData":"SessionData"}],GiftTargetItem:[function(t,e,n){"use strict";cc._RF.push(e,"b9f2cHyxRlJ0qw5r90Kb80L","GiftTargetItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../../base/script/util/UIEventCenter"),i=t("../../../../../base/script/global/SS"),a=t("../../../../../base/script/frame/ui/UIUtil"),s=t("../../../../xiyou/controller/XiYouGiftManager"),l=t("./GiftTarget"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.node.active=!0,this.initRoot(),this.initEvent(),this.refreshUserIcon(),this.refreshUserName(),this.RefreshOnSelect()},e.prototype.initRoot=function(){this._icon=cc.find("Mask/Icon",this.node).getComponent(cc.Sprite),this._name=cc.find("Name",this.node).getComponent(cc.Label),this._onselect=cc.find("OnSelect",this.node),this._btnThis=cc.find("BtnThis",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;r.UIEventCenter.ButtonEvent(this._btnThis,function(){return t.onBtnThisClick()})},e.prototype.RefreshOnSelect=function(){this._onselect.active=s.XiYouGiftManager.CurSendGiftTarget.Has(this.data.UId),this._name.node.color=this._onselect.active?new cc.Color(250,194,0):new cc.Color(255,255,255)},e.prototype.refreshUserIcon=function(){var t=i.SS.ImageUrlProxy+this.data.Icon;a.UIUtil.LoadRemoteImage(t,this._icon)},e.prototype.refreshUserName=function(){this._name.string=this.data.Name},e.prototype.onBtnThisClick=function(){s.XiYouGiftManager.CurSendGiftTarget.Has(this.data.UId)?s.XiYouGiftManager.CurSendGiftTarget.Del(this.data.UId):s.XiYouGiftManager.CurSendGiftTarget.Add(this.data.UId),this.RefreshOnSelect(),l.GiftTarget.Instance.RefreshAllSelectIcon()},e}(cc.Component);n.GiftTargetItem=c,cc._RF.pop()},{"../../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../../base/script/global/SS":"SS","../../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager","./GiftTarget":"GiftTarget"}],GiftTarget:[function(t,e,n){"use strict";cc._RF.push(e,"eb4a8lMKHVEBag+hwASPeWm","GiftTarget");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../room/controller/RoomController"),i=t("../../../../login/model/SessionData"),a=t("./GiftTargetItem"),s=t("../../../../../base/script/util/UIEventCenter"),l=t("../../../../xiyou/controller/XiYouGiftManager"),c=t("../../../model/GiftTargetData"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"others",{get:function(){return r.RoomController.Seats.filter(function(t){return t.HasPlayer&&t.UId!=i.Session.BanBan.UId})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAllSelect",{get:function(){return l.XiYouGiftManager.CurSendGiftTarget.UIdList.length==this.others.length},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){e.Instance=this,this.initRoot(),this.initEvent()},e.prototype.start=function(){this.initAllPlayers(),this.RefreshAllSelectIcon()},e.prototype.initRoot=function(){this._playerItem=cc.find("PlayerItem",this.node),this._playerItem.active=!1,this._playerRoot=cc.find("ScrollView/view/content",this.node),this._btnAllSelect=cc.find("BtnAllSelect",this.node).getComponent(cc.Button),this._stateSelectOn=cc.find("BtnAllSelect/On",this.node),this._stateSelectOff=cc.find("BtnAllSelect/Off",this.node)},e.prototype.initEvent=function(){var t=this;s.UIEventCenter.ButtonEvent(this._btnAllSelect,function(){return t.onBtnAllSelectClick()})},e.prototype.initAllPlayers=function(){if(this.others.length<=0)this.node.active=!1;else{this.node.active=!0,this.allGiftPlayerItem=new Array;for(var t=0;t<this.others.length;t++){var e=this.others[t],n=cc.instantiate(this._playerItem);n.setParent(this._playerRoot);var o=n.addComponent(a.GiftTargetItem);o.Init(e),this.allGiftPlayerItem.push(o)}}},e.prototype.onBtnAllSelectClick=function(){if(this.isAllSelect)l.XiYouGiftManager.CurSendGiftTarget=new c.GiftTargetData;else{l.XiYouGiftManager.CurSendGiftTarget=new c.GiftTargetData;for(var t=0;t<this.others.length;t++){var e=this.others[t];l.XiYouGiftManager.CurSendGiftTarget.Add(e.UId)}}this.RefreshAllSelectIcon(),this.allGiftPlayerItem.forEach(function(t){return t.RefreshOnSelect()})},e.prototype.RefreshAllSelectIcon=function(){this._stateSelectOff.active=!this.isAllSelect,this._stateSelectOn.active=this.isAllSelect},e}(cc.Component);n.GiftTarget=u,cc._RF.pop()},{"../../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../../login/model/SessionData":"SessionData","../../../../room/controller/RoomController":"RoomController","../../../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager","../../../model/GiftTargetData":"GiftTargetData","./GiftTargetItem":"GiftTargetItem"}],GiftWallItem:[function(t,e,n){"use strict";cc._RF.push(e,"202ddAo+VdML7W8/ri22eLK","GiftWallItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIUtil"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.node.active=!0,this.initRoot()},e.prototype.initRoot=function(){this._icon=cc.find("Gift/Icon",this.node).getComponent(cc.Sprite),this._numLabel=cc.find("Number",this.node).getComponent(cc.Label),this._nameLabel=cc.find("Name",this.node).getComponent(cc.Label)},e.prototype.Refresh=function(){this.refreshIcon(),this.refreshNum(),this.refreshName()},e.prototype.refreshIcon=function(){r.UIUtil.ChangeSprite("gift_01_"+this.data.Id,this._icon)},e.prototype.refreshNum=function(){this._numLabel.string="x"+this.data.Num},e.prototype.refreshName=function(){this._nameLabel.string=this.data.Name},e}(cc.Component);n.GiftWallItem=i,cc._RF.pop()},{"../../../base/script/frame/ui/UIUtil":"UIUtil"}],GuideComponent:[function(t,e,n){"use strict";cc._RF.push(e,"46726zipg1LWYKzCUW78W3S","GuideComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./BaseComponent"),i=t("../../util/FYCountDownMgr"),a=t("../controller/GameDataController"),s=t("../../room/controller/RoomController"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._move=null,e._angle=null,e._power=null,e._freeball=null,e.step=0,e}return o(e,t),e.prototype.Init=function(){this.initRoot(),this.initData(),this.InitComplete()},e.prototype.Reset=function(){},e.prototype.Show=function(){if(s.RoomController.IsMyRound()){if(this.step<0||3===this.step)return this._move.active=!1,this._angle.active=!1,this._power.active=!1,this._freeball.active=!1,void i.default.Instance.remove("GuideControl");this._move.active=0===this.step,this._angle.active=1===this.step,this._power.active=2===this.step,this.step++,a.GameDataController.IsNewGuide=1}},e.prototype.ShowFreeBall=function(t){s.RoomController.IsMyRound()||3===this.step&&(this._freeball.active=!0,this._freeball.setPosition(new cc.Vec2(t.x,t.y+50)),this.step=-1)},e.prototype.StartMoveTipsCountDown=function(){s.RoomController.IsMyRound()&&this.step},e.prototype.StartPowerTipsCountDown=function(){s.RoomController.IsMyRound()&&this.step},e.prototype.Hide=function(){this.step>0&&this.step<3&&(this.step=3),i.default.Instance.remove("GuideControl"),this._move.active=!1,this._angle.active=!1,this._power.active=!1,this._freeball.active=!1},e.prototype.initRoot=function(){this._move=cc.find("Move",this.node),this._angle=cc.find("Angle",this.node),this._power=cc.find("Power",this.node),this._freeball=cc.find("FreeBall",this.node)},e.prototype.initData=function(){1===a.GameDataController.IsNewGuide?this.step=-1:this.step=0},e.prototype.showMove=function(){this._move.active=!0},e.prototype.showPower=function(){this._power.active=!0},e}(r.default);n.default=l,cc._RF.pop()},{"../../room/controller/RoomController":"RoomController","../../util/FYCountDownMgr":"FYCountDownMgr","../controller/GameDataController":"GameDataController","./BaseComponent":"BaseComponent"}],GuideLineComponent:[function(t,e,n){"use strict";cc._RF.push(e,"7424e5FUyNAkbiEASROvMtE","GuideLineComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Constance"),a=t("../../other/EnumCenter"),s=t("../../util/UtilityEx"),l=t("../controller/GameDataController"),c=t("./BaseComponent"),u=t("../../room/controller/RoomController"),h=cc._decorator,f=h.ccclass,p=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._drawLine=null,e._drawLinePic=null,e._drawCircle=null,e._drawCirCleWhite=null,e._drawCircleRed=null,e._reflectedLine=null,e._nearestBall=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.Init=function(){this.initRoot(),this.InitComplete()},e.prototype.Reset=function(){this.Hide()},e.prototype.DrawGuideLine=function(t,e,n){this.node.active=!0,this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO))),this.node.angle=t;var o=this.getGuideLineLength(t-90,n,e,i.Constance.BALL_RADIUS);this._drawLinePic.getComponent(cc.Sprite).enabled=o>0,this._drawLinePic.width=o,this._drawCircle.x=o+i.Constance.BALL_RADIUS,this._reflectedLine.x=o+i.Constance.BALL_RADIUS,this._reflectedLine.active=!1,this.drawReflectedLine(e)},e.prototype.Show=function(){this.node.active=!0},e.prototype.Hide=function(){this.node.active=!1},e.prototype.initRoot=function(){this._drawLine=cc.find("DrawLine",this.node),this._drawLinePic=cc.find("DrawLine/DrawLine",this.node),this._drawCircle=cc.find("DrawCircle",this._drawLinePic),this._drawCirCleWhite=cc.find("DrawCircle/White",this._drawLinePic),this._drawCircleRed=cc.find("DrawCircle/Red",this._drawLinePic),this._reflectedLine=cc.find("ReflectedLine",this._drawLinePic)},e.prototype.getLineEquation=function(t,e){var n=0,o=0,r=0;if(90===t)n=0,o=1,r=-e.y;else{var i=t*Math.PI/180;n=-Math.tan(i),o=1,r=Math.tan(i)*e.x-e.y}return new cc.Vec3(n,o,r)},e.prototype.getDistanceBetweenPointAndLine=function(t,e,n,o){var r=this.getLineEquation(t,n),i=r.x,a=r.y,s=r.z;return Math.abs(i*e.x+a*e.y+s)/Math.sqrt(i*i+a*a)},e.prototype.changeAngleFrom0To360=function(t){return t<0?t%360+360:t%360},e.prototype.drawReflectedLine=function(t){if(this._nearestBall){var e=t.node.parent.convertToNodeSpaceAR(this._drawCircle.convertToWorldSpaceAR(cc.Vec2.ZERO)),n=t.node.getPosition().sub(e),o=this._nearestBall.node.getPosition().sub(e),r=s.RadianToAngle(cc.v2(n).signAngle(o));this._reflectedLine.angle=r+180,this._reflectedLine.active=!0}},e.prototype.getGuideLineLength=function(t,e,n,o){for(var r=[],c=n.node.getPosition(),h=n.node.parent.convertToNodeSpaceAR(this._drawLinePic.convertToWorldSpaceAR(cc.Vec2.ZERO)),f=h.sub(n.node.getPosition()),p=0;p<e.length;p++){if((g=this.getDistanceBetweenPointAndLine(t,e[p].node.getPosition(),c,o))<2*o){var d=e[p].node.getPosition().sub(h);s.RadianToAngle(d.angle(f))<90&&r.push(p)}}if(r.length>0){var m=r[0],y=cc.Vec2.distance(e[r[0]].node.getPosition(),c);for(p=1;p<r.length;p++){var g;y>(g=cc.Vec2.distance(e[r[p]].node.getPosition(),c))&&(m=r[p],y=g)}this._nearestBall=e[m];var C=u.RoomController.CurRoom.GetCurrentPosition(),_=(C+1)%2,v=!0;u.RoomController.IsMyRound()&&(8===this._nearestBall.BallNum&&l.GameDataController.MyBallColorType!=a.EnumBallColorType.None&&l.GameDataController.MyBallColorType!=a.EnumBallColorType.Eight?v=!!(l.GameDataController.RemainBallNumArray[C]<=1&&u.RoomController.IsMyRound())||l.GameDataController.RemainBallNumArray[_]<=1&&!u.RoomController.IsMyRound():(v=l.GameDataController.MyBallColorType===s.BallNumToBallColorType(this._nearestBall.BallNum)||l.GameDataController.MyBallColorType===a.EnumBallColorType.None,u.RoomController.IsMyRound()||(v=l.GameDataController.MyBallColorType===a.EnumBallColorType.None||!v))),this._drawCircleRed.active=!v,this._drawCirCleWhite.active=v;var b=this.getDistanceBetweenPointAndLine(t,this._nearestBall.node.getPosition(),c,o),S=Math.sqrt(Math.abs(Math.pow(2*o,2)-Math.pow(b,2))),I=cc.Vec2.distance(this._nearestBall.node.getPosition(),c),w=Math.sqrt(Math.pow(I,2)-Math.pow(b,2)),R=i.Constance.BALL_RADIUS,E=w-S-i.Constance.BALL_RADIUS-R;return this._drawLinePic.width=E,E}this._drawCircleRed.active=!1,this._drawCirCleWhite.active=!0,this._nearestBall=null,this._reflectedLine.active=!1;var U=this.getLineEquation(t,c),T=U.x,B=U.y,M=-T/B,P=-U.z/B,O=M*l.GameDataController.TableLeftBorder.x+P,A=M*l.GameDataController.TableRightBorder.x+P,G=(l.GameDataController.TableTopBorder.y-P)/M,D=(l.GameDataController.TableBottomBorder.y-P)/M,k=new cc.Vec2(0,0),x=[];O<=l.GameDataController.TableTopBorder.y&&O>=l.GameDataController.TableBottomBorder.y&&x.push(new cc.Vec2(l.GameDataController.TableLeftBorder.x,O)),A<=l.GameDataController.TableTopBorder.y&&A>=l.GameDataController.TableBottomBorder.y&&x.push(new cc.Vec2(l.GameDataController.TableRightBorder.x,A)),G<=l.GameDataController.TableRightBorder.x&&G>=l.GameDataController.TableLeftBorder.x&&x.push(new cc.Vec2(G,l.GameDataController.TableTopBorder.y)),D<=l.GameDataController.TableRightBorder.x&&D>=l.GameDataController.TableLeftBorder.x&&x.push(new cc.Vec2(D,l.GameDataController.TableBottomBorder.y)),x.forEach(function(t){var e=t.sub(h);s.RadianToAngle(e.angle(f))<90&&(k=t)});var L=this.changeAngleFrom0To360(t),N=(R=20.5,Math.abs(Math.cos(s.AngleToRadian(L))));L>=45&&L<90?L+=90:L>=90&&L<135?L+=90:L>=135&&L<225||(L>=225&&L<315?L+=270:L>=315&&L<360||L>=0&&L<45&&(L-=180)),N=R/Math.abs(Math.cos(s.AngleToRadian(L)))+R;return I=cc.Vec2.distance(c,k)-20-N},e=r([f],e)}(c.default));n.default=p,cc._RF.pop()},{"../../Constance":"Constance","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../../util/UtilityEx":"UtilityEx","../controller/GameDataController":"GameDataController","./BaseComponent":"BaseComponent"}],HData:[function(t,e,n){"use strict";cc._RF.push(e,"9617fHU3nBOKLrG7txzn0og","HData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.SDKVERSION="1.0.32",t.isInitSdk=!1,t.isShowLog=!1,t.hallSocketUrl="wss://center-yqwsq-xiyou.xiyouchat.com:3000/getServer",t.requestAddr="https://apigateway.52xiyou.com/api/center_server/game/version/",t.CLIENTVERSION="1.0.0",t.appId="",t.H5_VERSION="303",t.gsToken="",t.isNeedAuthorize=!1,t}();n.default=o,cc._RF.pop()},{}],HoleComponent:[function(t,e,n){"use strict";cc._RF.push(e,"90a7bxCSfdB7LEGx10LcYkW","HoleComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./BaseComponent"),i=t("../entity/Hole"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(){for(var t=0;t<this.node.children.length;t++){var e=this.node.children[t].getComponent(i.default);e||(e=this.node.children[t].addComponent(i.default)),e.HoleNum=t+1}this.InitComplete()},e.prototype.Reset=function(){},e}(r.default);n.default=a,cc._RF.pop()},{"../entity/Hole":"Hole","./BaseComponent":"BaseComponent"}],Hole:[function(t,e,n){"use strict";cc._RF.push(e,"02b84HMHc5AIKqjcykx3Ajz","Hole");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Ball"),a=t("../../other/EnumCenter"),s=t("../../../base/script/global/SS"),l=t("../../../base/script/frame/audio/AudioManager"),c=cc._decorator,u=c.ccclass,h=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HoleNum=1,e}return o(e,t),e.prototype.onBeginContact=function(t,e,n){n&&(n.node.getComponent(i.default).GetBallState()!==a.EnumBallState.Idle&&(n.node.getComponent(i.default).InHole(this.HoleNum),s.SS.EventCenter.emit(a.EnumGameMessageType.InHole,this.node),l.AudioManager.PlaySound(a.EnumAudio.Pocket)))},e=r([u],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../../base/script/frame/audio/AudioManager":"AudioManager","../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","./Ball":"Ball"}],HttpApi:[function(t,e,n){"use strict";cc._RF.push(e,"372ecdkFQNEcYe1Npw/oQN+","HttpApi");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../base/script/api/http/Xhr"),a=t("../../../../base/script/global/SS"),s=t("../../../login/model/SessionData"),l=t("../../../other/EnumCenter"),c=t("./../../../room/controller/RoomController"),u=function(){function t(){}return t.BallNumToType=function(t){return t>=1&&t<=7?"solid":t>=9&&t<=15?"stripe":8==t?"eight":void 0},t.ConvertBalls=function(t){var e=this,n=[];return t.forEach(function(t){n.push({number:t.BallNum,type:e.BallNumToType(t.BallNum),location:{x:t.node.position.x,y:t.node.position.y}})}),n},t.ConvertHoleBall=function(t){var e=this,n=[];return t.forEach(function(t){n.push({number:t.BallNum,type:e.BallNumToType(t.BallNum),hole:t.InHoleNum})}),n},t.Join=function(){return o(this,void 0,void 0,function(){var e,n;return r(this,function(o){switch(o.label){case 0:return t.TestSwitch?(s.Session.BanBan.UId=this.MyUid,t.RoomRefreshInfo.list[0].bi_status=l.EnumUserStatus.Wait,t.RoomRefreshInfo.list[0].bi_position=0,console.log("----------------"),console.log(t.RoomRefreshInfo),a.SS.EventCenter.emit(l.EnumWsSync.RoomRefresh,t.RoomRefreshInfo),[2]):(e=new i.XhrUrl("roombilliard/join").Url,n={rid:c.RoomController.CurRoom.RoomId.toString()},[4,i.default.PostJson(e,n)]);case 1:return o.sent(),[2]}})})},t.JoinOtherTest=function(){if(t.TestSwitch)return t.RoomRefreshInfo.list[1].bi_status=l.EnumUserStatus.Wait,t.RoomRefreshInfo.list[1].bi_position=1,void a.SS.EventCenter.emit(l.EnumWsSync.RoomRefresh,t.RoomRefreshInfo)},t.Leave=function(){return o(this,void 0,void 0,function(){var t,e;return r(this,function(n){switch(n.label){case 0:return t=new i.XhrUrl("roombilliard/leave").Url,e={rid:c.RoomController.CurRoom.RoomId.toString()},[4,i.default.PostJson(t,e)];case 1:return n.sent(),[2]}})})},t.Ready=function(){return o(this,void 0,void 0,function(){var e,n;return r(this,function(o){switch(o.label){case 0:return t.TestSwitch?(t.RoomRefreshInfo.list[0].bi_status=l.EnumUserStatus.Ready,a.SS.EventCenter.emit(l.EnumWsSync.RoomRefresh,t.RoomRefreshInfo),[2]):(e=new i.XhrUrl("roombilliard/ready").Url,n={rid:c.RoomController.CurRoom.RoomId.toString()},[4,i.default.PostJson(e,n)]);case 1:return o.sent(),[2]}})})},t.ReadyOtherTest=function(){if(t.TestSwitch)return t.RoomRefreshInfo.list[1].bi_status=l.EnumUserStatus.Ready,void a.SS.EventCenter.emit(l.EnumWsSync.RoomRefresh,t.RoomRefreshInfo)},t.CancelReady=function(){return o(this,void 0,void 0,function(){var t,e;return r(this,function(n){switch(n.label){case 0:return t=new i.XhrUrl("roombilliard/cancelReady").Url,e={rid:c.RoomController.CurRoom.RoomId.toString()},[4,i.default.PostJson(t,e)];case 1:return n.sent(),[2]}})})},t.Start=function(){return o(this,void 0,void 0,function(){var e,n;return r(this,function(o){switch(o.label){case 0:return t.TestSwitch?(t.RoomRefreshInfo._options.op=l.EnumWsSync.Start,t.RoomRefreshInfo._options.data={position:c.RoomController.GetSelfGameSeat().BiPosition},a.SS.EventCenter.emit(l.EnumWsSync.RoomRefresh,t.RoomRefreshInfo),[2]):(e=new i.XhrUrl("roombilliard/start").Url,n={rid:c.RoomController.CurRoom.RoomId.toString()},[4,i.default.PostJson(e,n)]);case 1:return o.sent(),[2]}})})},t.Shoot=function(t,e){return o(this,void 0,void 0,function(){var n,o;return r(this,function(r){switch(r.label){case 0:return n=new i.XhrUrl("roombilliard/shoot").Url,o={rid:c.RoomController.CurRoom.RoomId.toString(),ball_arm:JSON.stringify({power:t,angle:e})},[4,i.default.PostJson(n,o)];case 1:return r.sent(),[2]}})})},t.End=function(){return o(this,void 0,void 0,function(){var t,e;return r(this,function(n){switch(n.label){case 0:return t=new i.XhrUrl("roombilliard/end").Url,e={rid:c.RoomController.CurRoom.RoomId.toString()},[4,i.default.PostJson(t,e)];case 1:return n.sent(),[2]}})})},t.Init=function(e,n){return o(this,void 0,void 0,function(){var o,s;return r(this,function(r){switch(r.label){case 0:return t.TestSwitch?(t.RoomRefreshInfo._options.op=l.EnumWsSync.Init,t.RoomRefreshInfo._options.data={cue_ball:{location:{x:e.node.position.x,y:e.node.position.y}},balls:this.ConvertBalls(n)},a.SS.EventCenter.emit(l.EnumWsSync.RoomRefresh,t.RoomRefreshInfo),[2]):(o=new i.XhrUrl("roombilliard/init").Url,s={rid:c.RoomController.CurRoom.RoomId.toString(),balls:JSON.stringify({cue_ball:{location:{x:e.node.position.x,y:e.node.position.y}},balls:this.ConvertBalls(n)})},[4,i.default.PostJson(o,s)]);case 1:return r.sent(),[2]}})})},t.ShootResult=function(t,e,n,a,s){return o(this,void 0,void 0,function(){var o,l;return r(this,function(r){switch(r.label){case 0:return o=new i.XhrUrl("roombilliard/shootResult").Url,l={rid:c.RoomController.CurRoom.RoomId.toString(),balls:JSON.stringify({cue_ball:{location:{x:t.node.x,y:t.node.y}},balls:this.ConvertBalls(e),holed_balls:this.ConvertHoleBall(n)}),result:a,is_first_shoot:s+""},[4,i.default.PostJson(o,l)];case 1:return r.sent(),[2]}})})},t.MoveCueBall=function(t){return o(this,void 0,void 0,function(){var e,n;return r(this,function(o){switch(o.label){case 0:return e=new i.XhrUrl("roombilliard/moveCueBall").Url,n={rid:c.RoomController.CurRoom.RoomId.toString(),cue_ball:JSON.stringify({location:{x:t.x,y:t.y}})},[4,i.default.PostJson(e,n)];case 1:return o.sent(),[2]}})})},t.TestSwitch=!1,t.MyUid=105003288,t.RoomRefreshInfo={config:{rid:"193181931",app_id:"1",uid:"105003288",prefix:"",name:"\u66ff\u5929\u884c\u9053",icon:"202007/17/5f117dd2852c74.62485388.bmp",type:"friend",property:"vip",types:"auto",description:1,display_message:"1",online_num:2,online_admin:"0",version:"2024",deleted:"0",boss:"4",reception:"0",paier:"0",theme:"normal",background:"joy",counter:0,mode:"auto",package:"0",o_total:"0",o_num:"0",o_duration:"0",nine:"1",dateline:"1594982688",password:"",weight:"0",display_rank:"0",bicon:"",sex:"0",close_box:"0",game:"none",state:"0",real:6950,description_text:"\u5199\u5b57\u697c\u91cc\u5199\u5b57\u95f4\uff0c\u5199\u5b57\u95f4\u91cc\u7a0b\u5e8f\u5458\uff1b\u7a0b\u5e8f\u4eba\u5458\u5199\u7a0b\u5e8f\uff0c\u53c8\u62ff\u7a0b\u5e8f\u6362\u9152\u94b1\u3002\u9152\u9192\u53ea\u5728\u7f51\u4e0a\u5750\uff0c\u9152\u9189\u8fd8\u6765\u7f51\u4e0b\u7720\uff1b\u9152\u9189\u9152\u9192\u65e5\u590d\u65e5\uff0c\u7f51\u4e0a\u7f51\u4e0b\u5e74\u590d\u5e74\u3002\u4f46\u613f\u8001\u6b7b\u7535\u8111\u95f4\uff0c\u4e0d\u613f\u97a0\u8eac\u8001\u677f\u524d\uff1b\u5954\u9a70\u5b9d\u9a6c\u8d35\u8005\u8da3\uff0c\u516c\u4ea4\u81ea\u884c\u7a0b\u5e8f\u5458\u3002\u522b\u4eba\u7b11\u6211\u5fd2\u75af\u766b\uff0c\u6211\u7b11\u81ea\u5df1\u547d\u592a\u8d31\uff1b\u4e0d\u89c1\u6ee1\u8857\u6f02\u4eae\u59b9\uff0c\u54ea\u4e2a\u5f52\u5f97\u7a0b\u5e8f\u5458\uff1f",type_label:"\u4ea4\u53cb",bi_current:0},wait:[],waitForBoss:[],list:[{position:0,uid:105003288,lock:0,forbidden:0,counter:0,package:0,openid:"30001",name:"\u6d4b\u8bd5\u4eba\u54581",icon:"202007/17/5f117dd2852c74.62485388.bmp",role:0,frame:"",bi_status:"none",bi_position:0},{position:1,uid:105003289,lock:0,forbidden:0,counter:0,package:0,openid:"30002",name:"\u6d4b\u8bd5\u4eba\u54582",icon:"202007/17/5f118123383c73.61809527.png",role:0,frame:"",bi_status:"none",bi_position:1},{position:2,uid:0,lock:0,forbidden:0,counter:0,package:0,openid:"30003",name:"",icon:"",frame:"",role:0,bi_status:"none"},{position:3,uid:0,lock:0,forbidden:0,counter:0,package:0,openid:"30003",name:"",icon:"",frame:"",role:0,bi_status:"none"},{position:4,uid:0,lock:0,forbidden:0,counter:0,package:0,openid:"30003",name:"",icon:"",frame:"",role:0,bi_status:"none"},{position:5,uid:0,lock:0,forbidden:0,counter:0,package:0,openid:"30002",name:"",icon:"",frame:"",role:0,bi_status:"none"},{position:6,uid:0,lock:0,forbidden:0,counter:0,package:0,openid:"30004",name:"",icon:"",frame:"",role:0,bi_status:"none"},{position:7,uid:0,lock:0,forbidden:0,counter:0,package:0,openid:"30004",name:"",icon:"",frame:"",role:0,bi_status:"none"},{position:8,uid:0,lock:0,forbidden:0,counter:0,package:0,openid:"30005",name:"",icon:"",frame:"",role:0,bi_status:"none"}],now:1597027274,createor:{uid:"105003288",app_id:"1",name:"\u5b8b\u6c5f",icon:"202007/17/5f117dd2852c74.62485388.bmp",sex:"1",video:"",cover:"",birthday:"0",job:"0",role:"0",god_category:"",god_num:"0",god_month_num:"0",god_week_num:"0",god_day_num:"0",god_now_num:"0",god_dateline:"0",online_status:"1",online_dateline:"1594981842",version:"0",city:"",city_code:"0",position:"",longitude:"0.0000000",latitude:"0.0000000",dateline:"1594981842",deleted:"1",star:"0",tmp_icon:"202007/17/5f117dd2852c74.62485388.bmp",update_time:"0",block_un_auther_message:"0",sign:"",pay_num:"0",pay_money:"0",pay_room_money:"0",pay_order_num:"0",pay_receive_today:"0",god_default_id:"0",god_default_cid:"0",god_discount:"0",god_discount_id:"0",god_discount_cid:"0",service_score:"0",service_busy:"0",service_pause:"0",notice_order:"1",title:"0",notice_power:"1",notice_game:"1",credit_god:"0",credit_user:"0",credit_god_now:"0",credit_god_week:"0",credit_god_day:"0",tag:"0",friend_state:"0",has_video:"0"},_options:{op:"",data:null}},t}();n.default=u,cc._RF.pop()},{"../../../../base/script/api/http/Xhr":"Xhr","../../../../base/script/global/SS":"SS","../../../login/model/SessionData":"SessionData","../../../other/EnumCenter":"EnumCenter","./../../../room/controller/RoomController":"RoomController"}],IOSProcess:[function(t,e,n){"use strict";cc._RF.push(e,"209bbqOhnZCXosCnHxZByU7","IOSProcess");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../../base/script/frame/clog/Clog"),s=t("../../room/controller/RoomController"),l=t("../../common/controller/createRoom/CreateRoomController"),c=t("../../common/view/UILoading"),u=t("../../../base/script/frame/ui/UIManager"),h=t("../../match/view/UIMatching"),f=t("../../match/controller/MatchController"),p=t("../../../base/script/sdk/thinkingdata/controller/TaContoroller"),d=t("../../xiyou/controller/XiYouController"),m=t("../../login/model/SessionData"),y=t("../../common/controller/websocket/RoomSocket"),g=(t("../../room/controller/JoinMicController"),t("../../Constance")),C=t("../../other/EnumCenter"),_=t("../../game/controller/GameDataController"),v=function(){function t(){}return t.Start=function(){return o(this,void 0,void 0,function(){var t,e,n,o,d,m,y,C;return r(this,function(r){switch(r.label){case 0:return(t=i.qq.getLaunchOptionsSync())&&a.default.Trace(a.ClogKey.Entry,"\u3010case0\u3011\uff0c---[ios]---\u6e38\u620f\u542f\u52a8\uff0c\u53c2\u6570\u4e3a:"+JSON.stringify(t)),1037==t.scene&&t&&t.referrerInfo&&t.referrerInfo.appId?(a.default.Trace(a.ClogKey.Entry,"\u3010case1\u3011\uff0c---[ios]---\u901a\u8fc7xiyou\u542f\u52a8\uff0c\u53c2\u6570:"+JSON.stringify(t)),(e=t.referrerInfo.extraData)?(n=e.type,a.default.Green(a.ClogKey.Entry,"\u897f\u6e38type="+n),"createRoom"!=n?[3,2]:(m=""!=e.data.roomName?e.data.roomName:g.Constance.ROOM_NAME,y=g.Constance.ROOM_TYPE,C=e.data.identify,s.RoomController.OnJoinPassword="-1"===e.data.password?"":e.data.password,a.default.Green(a.ClogKey.Entry,"\u3010case1.1\u3011\uff0c---[ios]---\u901a\u8fc7xiyou\u542f\u52a8\u521b\u5efa\u623f\u95f4\uff0c\u53c2\u6570:\u623f\u95f4\u540d\u79f0:"+m+"\u623f\u95f4\u7c7b\u578b:"+y+"xiyou identify:"+C+", password = "+s.RoomController.OnJoinPassword),[4,l.CreateRoomController.CreateRoom(m,y,C,s.RoomController.OnJoinPassword)])):[3,6]):[3,7];case 1:return r.sent(),[3,6];case 2:return"joinRoom"!=n?[3,3]:(s.RoomController.OnJoinRoomId=e.data.roomId,s.RoomController.OnJoinPassword="-1"===e.data.password?"":e.data.password,a.default.Green(a.ClogKey.Entry,"\u3010case1.2\u3011\uff0c---[ios]---\u901a\u8fc7xiyou\u542f\u52a8\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4Id:"+s.RoomController.OnJoinRoomId+", password = "+s.RoomController.OnJoinPassword),[3,6]);case 3:return"matchRoom"!=n?[3,6]:(c.UILoading.Close(),f.MatchController.Identify=e.data.identify,[4,u.UIManager.OpenUI(h.default)]);case 4:return r.sent(),this.IsMatchJoin=!0,this.onQQHandler(),[4,f.MatchController.DonePromise()];case 5:r.sent(),s.RoomController.OnJoinPassword="",a.default.Green(a.ClogKey.Entry,"\u3010case1.3\u3011\uff0c---[ios]---\u901a\u8fc7xiyou\u542f\u52a8\u5339\u914d\u8fdb\u623f\uff0c\u623f\u95f4Id:"+s.RoomController.OnJoinRoomId+", password = "+s.RoomController.OnJoinPassword+", identify = "+f.MatchController.Identify),r.label=6;case 6:return[3,10];case 7:return t.query.hasOwnProperty("type")&&"shareJoinRoom"==t.query.type?(a.default.Green(a.ClogKey.Entry,"\u3010case2\u3011\uff0c---[ios]---\u901a\u8fc7\u5206\u4eab\u94fe\u63a5\u542f\u52a8\uff0c\u6709\u53c2\u6570:"+JSON.stringify(t)),s.RoomController.OnJoinRoomId=t.query.roomId,s.RoomController.OnJoinPassword=t.query.password,o=t.query.uid,d=t.query.xy_uid,p.TaController.OpenShareLinkUrl(o,d),a.default.Green(a.ClogKey.Entry,"\u901a\u8fc7\u5206\u4eab\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4Id"+s.RoomController.OnJoinRoomId+"\u623f\u95f4\u5bc6\u7801 = "+s.RoomController.OnJoinPassword),[3,10]):[3,8];case 8:return a.default.Green(a.ClogKey.Entry,"\u3010case3\u3011\uff0c---[ios]---\u5176\u5b83\u542f\u52a8\uff0c\u65e0\u53c2\u6570\uff0c\u9ed8\u8ba4\u521b\u5efa\u623f\u95f4"),m=g.Constance.ROOM_NAME,y=g.Constance.ROOM_TYPE,C=(new Date).valueOf().toString(),s.RoomController.OnJoinPassword="",a.default.Green(a.ClogKey.Entry,"\u4f7f\u7528\u9ed8\u8ba4\u521b\u5efa\u623f\u95f4\u65b9\u6848\uff0c\u623f\u95f4\u540d\u79f0:"+m+"\u623f\u95f4\u7c7b\u578b:"+y+"xiyou identify:"+C+", password = "+s.RoomController.OnJoinPassword),[4,l.CreateRoomController.CreateRoom(m,y,C,s.RoomController.OnJoinPassword)];case 9:r.sent(),r.label=10;case 10:return[4,s.RoomController.JoinRoom()];case 11:return r.sent(),this.onQQHandler(),[2]}})})},t.onQQHandler=function(){var e=this;this.IsMatchJoin||(i.qq.setKeepScreenOn({keepScreenOn:!0}),i.qq.onShow(function(n){t.IsShow||(t.IsShow=!0,e.GameShow(n),i.SS.EventCenter.emit(C.EnumGameMessageType.OnShow))}),i.qq.onHide(function(){t.IsShow=!1,e.GameHide()}),this.resetTimer())},t.GameShow=function(t){return o(this,void 0,void 0,function(){var e,n,o,c,m,y,C;return r(this,function(r){switch(r.label){case 0:return a.default.Green(a.ClogKey.Entry,"-------------qq ---[ios]--- \u5207\u5165\u6e38\u620f\u4e8b\u4ef6------------------"),a.default.Green(a.ClogKey.Entry,"\u3010qqOnShowInfo\u3011:"+JSON.stringify(t)),_.GameDataController.ShowTime=Date.now(),1037==t.scene&&t&&t.referrerInfo&&t.referrerInfo.appId?(a.default.Green(a.ClogKey.Entry,"\u3010case1\u3011 >>: \u5207\u51fa\u53bb\u7684\u65f6\u5019\uff0c\u901a\u8fc7xiyou\u53c2\u6570\u518d\u6b21\u5207\u5165"),i.qq.showLoading({}),s.RoomController.EndBanBanSocket(),d.XiYouController.EndXiYouSocket(),[4,d.XiYouController.ReconectXiyou()]):[3,9];case 1:return r.sent(),(e=t.referrerInfo.extraData)?(n=e.type,a.default.Green(a.ClogKey.Entry,"\u897f\u6e38type="+n),"createRoom"!=n?[3,3]:(o=""!=e.data.roomName?e.data.roomName:g.Constance.ROOM_NAME,c=g.Constance.ROOM_TYPE,m=e.data.identify,s.RoomController.OnJoinPassword="-1"===e.data.password?"":e.data.password,a.default.Green(a.ClogKey.Entry,"\u901a\u8fc7xiyou\u521b\u5efa\u623f\u95f4\uff0c\u623f\u95f4\u540d\u79f0:"+o+"\u623f\u95f4\u7c7b\u578b:"+c+"xiyou identify:"+m+", password = "+s.RoomController.OnJoinPassword),[4,l.CreateRoomController.CreateRoom(o,c,m,s.RoomController.OnJoinPassword)])):[3,7];case 2:return r.sent(),[3,7];case 3:return"joinRoom"!=n?[3,4]:(s.RoomController.OnJoinRoomId=e.data.roomId,s.RoomController.OnJoinPassword="-1"===e.data.password?"":e.data.password,a.default.Green(a.ClogKey.Entry,"\u901a\u8fc7xiyou\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4Id:"+s.RoomController.OnJoinRoomId+", password = "+s.RoomController.OnJoinPassword),[3,7]);case 4:return"matchRoom"!=n?[3,7]:(i.qq.hideLoading(),[4,u.UIManager.OpenUI(h.default)]);case 5:return r.sent(),this.IsMatchOnshowJoin=!0,[4,f.MatchController.DonePromise()];case 6:r.sent(),s.RoomController.OnJoinPassword="",a.default.Green(a.ClogKey.Entry,"\u901a\u8fc7onshow\u5339\u914d\u8fdb\u623f\uff0c\u623f\u95f4Id:"+s.RoomController.OnJoinRoomId+", password = "+s.RoomController.OnJoinPassword),r.label=7;case 7:return[4,s.RoomController.httpJoinRoom(!1)];case 8:return r.sent(),this.IsMatchOnshowJoin||i.qq.hideLoading(),[2];case 9:return t.query.hasOwnProperty("type")&&"shareJoinRoom"==t.query.type?(a.default.Green(a.ClogKey.Entry,"\u3010case2\u3011>>: \u5207\u51fa\u53bb\u7684\u65f6\u5019\uff0c\u70b9\u4e86\u5206\u4eab\u94fe\u63a5\u5207\u5165"),i.qq.showLoading({}),s.RoomController.EndBanBanSocket(),d.XiYouController.EndXiYouSocket(),[4,d.XiYouController.ReconectXiyou()]):[3,12];case 10:return r.sent(),s.RoomController.OnJoinRoomId=t.query.roomId,s.RoomController.OnJoinPassword=t.query.password,y=t.query.uid,C=t.query.xy_uid,p.TaController.OpenShareLinkUrl(y,C),[4,s.RoomController.httpJoinRoom(!1)];case 11:return r.sent(),i.qq.hideLoading(),[2];case 12:return this.ShowTime=(new Date).valueOf(),this.IsLostRoom?(a.default.Green(a.ClogKey.Entry,"\u3010case3.1\u3011>> \u5207\u51fa\u53bb\u4ec0\u4e48\u90fd\u6ca1\u5e72\uff0c5\u79d2\u624d\u540e\u5207\u56de\u6765"),[4,this.localRelink()]):[3,14];case 13:return r.sent(),[2];case 14:return this.IsDisconnect?(a.default.Green(a.ClogKey.Entry,"\u3010case3.2\u3011>> \u5207\u51fa\u53bb\u4ec0\u4e48\u90fd\u6ca1\u5e72\uff0c5\u79d2\u5185\u5207\u56de\u6765\u4f46\u662f\u65ad\u7f51\u4e86"),[4,this.localRelink()]):[3,16];case 15:return r.sent(),[2];case 16:return a.default.Green(a.ClogKey.Entry,"\u3010case5\u3011>> \u53ea\u8981\u5207\u51fa\u53bb\u90fd\u91cd\u8fde"),[4,this.localRelink()];case 17:return r.sent(),[2]}})})},t.resetTimer=function(){this.ShowTime=null,this.HideTime=null},Object.defineProperty(t,"IsLostRoom",{get:function(){if(null!=this.ShowTime&&null!=this.HideTime){var t=this.ShowTime-this.HideTime>5e3;if(a.default.Trace(a.ClogKey.Entry,"\u3010\u5207\u51fa\u79bb\u5f00\u65f6\u957f\u3011"+(this.ShowTime-this.HideTime)/1e3+"\u79d2"),this.resetTimer(),t)return a.default.Trace(a.ClogKey.Entry,"qq \u3010\u8fd4\u56de\u6e38\u620f\u3011=>\u3010\u79bb\u5f00\u65f6\u95f4\u592a\u957f\u3011"),!0}return a.default.Trace(a.ClogKey.Entry,"qq \u3010\u8fd4\u56de\u6e38\u620f\u3011=>\u30105\u79d2\u5185\u5207\u56de\u6765\u3011"),!1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsDisconnect",{get:function(){return!(!m.Session.BanBan.UId||0!=y.RoomSocket.IsOpen)&&(a.default.Trace(a.ClogKey.Entry,"qq \u3010\u8fd4\u56de\u6e38\u620f\u3011=>\u3010ws\u7f51\u7edc\u65ad\u5f00\u8fde\u63a5\u3011"),!0)},enumerable:!0,configurable:!0}),t.localRelink=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return i.qq.showLoading({}),s.RoomController.EndBanBanSocket(),d.XiYouController.EndXiYouSocket(),[4,d.XiYouController.ReconectXiyou()];case 1:return t.sent(),s.RoomController.OnJoinRoomId=s.RoomController.CurRoom.RoomId,s.RoomController.OnJoinPassword=s.RoomController.CurRoom.Password,[4,s.RoomController.httpJoinRoom(!1)];case 2:return t.sent(),i.qq.hideLoading(),[2]}})})},t.GameHide=function(){if(a.default.Red(a.ClogKey.Entry,"\u3010\u4ece\u6e38\u620f\u5207\u5230\u540e\u53f0\u3011"),_.GameDataController.HideTime=Date.now(),this.HideTime=(new Date).valueOf(),f.MatchController.IsMatching)return f.MatchController.CloseMatch(!0),this.IsMatchJoin=!1,void(this.IsMatchOnshowJoin=!1)},t.IsMatchJoin=!1,t.IsMatchOnshowJoin=!1,t.HideTime=null,t.ShowTime=null,t.IsShow=!1,t}();n.IOSPrpocess=v,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../../base/script/sdk/thinkingdata/controller/TaContoroller":"TaContoroller","../../Constance":"Constance","../../common/controller/createRoom/CreateRoomController":"CreateRoomController","../../common/controller/websocket/RoomSocket":"RoomSocket","../../common/view/UILoading":"UILoading","../../game/controller/GameDataController":"GameDataController","../../login/model/SessionData":"SessionData","../../match/controller/MatchController":"MatchController","../../match/view/UIMatching":"UIMatching","../../other/EnumCenter":"EnumCenter","../../room/controller/JoinMicController":"JoinMicController","../../room/controller/RoomController":"RoomController","../../xiyou/controller/XiYouController":"XiYouController"}],InHoleBallInfo:[function(t,e,n){"use strict";cc._RF.push(e,"d464fazRX5N4ZwiGct9UEtZ","InHoleBallInfo"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../util/UtilityEx"),r=function(){function t(t){t&&(t.hasOwnProperty("number")&&(this.Number=Number(t.number)),t.hasOwnProperty("type")&&(this.Type=t.type),t.hasOwnProperty("hole")&&(this.Hole=Number(t.hole)))}return t.From=function(e){var n=new t;return n.Number=e.BallNum,n.Type=o.BallNumToBallColorType(e.BallNum),n.Hole=e.InHoleNum,n},t}();n.default=r,cc._RF.pop()},{"../../util/UtilityEx":"UtilityEx"}],InfiniteScrollView:[function(t,e,n){"use strict";cc._RF.push(e,"8fb7a7lShFFQ4z3dsUiKccD","InfiniteScrollView");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mask=null,e._item=null,e._itemList=[],e.onScrollStart=null,e.onScrollEnd=null,e.onScroll=null,e}return o(e,t),e.prototype.Init=function(t,e,n,o,r){void 0===o&&(o=null),void 0===r&&(r=null),this._item=t,this._mask=e,this.onScroll=n,this.onScrollStart=o,this.onScrollEnd=r;for(var i=Math.ceil(this.node.height/this._item.height)+1,a=0;a<i;a++){var s=cc.instantiate(this._item);this._mask.addChild(s),s.setPosition(0,0),s.y=a*-s.height,s.active=!0,this._itemList.push(s)}this.initEvent()},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.moveImage=function(t){var e=this;this._itemList.forEach(function(n){n.y+=t.y,t.y>0&&n.y>e._item.height&&(n.y-=e._itemList.length*e._item.height),t.y<0&&n.y<-(e._itemList.length-1)*e._item.height&&(n.y+=e._itemList.length*e._item.height)},this)},e.prototype.onTouchStart=function(){this.onScrollStart&&this.onScrollStart()},e.prototype.onTouchMove=function(t){this.moveImage(t.getDelta()),this.onScroll&&this.onScroll(t.getDelta().y)},e.prototype.onTouchEnd=function(){this.onScrollEnd&&this.onScrollEnd()},e=r([a],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],JoinMicController:[function(t,e,n){"use strict";cc._RF.push(e,"8fddaAaGvpF1b1rSMQBLaaI","JoinMicController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/frame/clog/Clog"),a=t("./RoomController"),s=t("../../../base/script/api/AgoraApi"),l=t("../../xiyou/xiyouSDK/data/HData"),c=t("../../../base/script/global/SS"),u=t("../../../base/script/api/http/Xhr"),h=t("../../../base/script/api/agora/AgoraBase"),f=t("../../other/EnumCenter"),p=t("../../other/EventCommond"),d=t("../../login/model/SessionData"),m=t("../../common/view/UIToast"),y=function(){function t(){}return t.OpenAgora=function(){return o(this,void 0,void 0,function(){var e,n;return r(this,function(o){switch(o.label){case 0:return t.Enable?[4,s.AgoraApi.Agora.Init({appId:c.SS.QQAppId,sessionKey:l.default.gsToken})]:[2];case 1:return o.sent(),e=a.RoomController.GetSelfSeat(),[4,s.AgoraApi.Agora.JoinChannel({uid:"",rid:""+a.RoomController.CurRoom.RoomId,token:"",role:h.EnumAgoraRole.HOST,muteMicrophone:!e||!e.IsOpenMicrophone,muteLoudspeaker:!1})];case 2:return(n=o.sent())?(m.UIToast.Show(""+n),[2]):(t.MicMute=!e||!e.IsOpenMicrophone,c.SS.EventCenter.emit(p.EventCommond.UIRoomMicBt),[2])}})})},t.DisposeAgora=function(){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return t.Enable?(this.SelfMicMute(),[4,s.AgoraApi.Agora.Dispose()]):[2];case 1:return e.sent(),[2]}})})},t.JoinMicAuto=function(t,e){void 0===t&&(t=d.Session.BanBan.UId),void 0===e&&(e=d.Session.BanBan.OpenId);var n=new u.XhrUrl("room/joinMic").Url,o={rid:""+a.RoomController.CurRoom.RoomId,position:"-1",boss:"0",uid:t,openid:e};u.default.PostJson(n,o)},t.JoinMic=function(t,e,n){void 0===e&&(e=d.Session.BanBan.UId),void 0===n&&(n=d.Session.BanBan.OpenId);var o=a.RoomController.Seats.find(function(e){return e.Position==t});if(o){var r=new u.XhrUrl("room/joinMic").Url,i={rid:""+a.RoomController.CurRoom.RoomId,position:""+t,boss:o.Role==f.EnumRole.ROLE_GOD?"1":"0",uid:e,openid:n};u.default.PostJson(r,i)}else this.JoinMicAuto()},t.LeaveMic=function(t){var e=a.RoomController.Seats.find(function(e){return e.Position==t});if(e&&e.UId){var n=new u.XhrUrl("room/leavelMic").Url,o={rid:""+a.RoomController.CurRoom.RoomId,uid:""+e.UId};u.default.PostJson(n,o)}},t.SyncMicrophone=function(){var e=a.RoomController.GetSelfSeat(),n=!e||!e.IsOpenMicrophone;i.default.Green(i.ClogKey.UI,"[SyncMicrophone]------"+n+t.MicMute),n?(t.MicMute=!0,t.Enable&&s.AgoraApi.Agora.MuteMicrophone(!0)):t.MicMute?t.Enable&&s.AgoraApi.Agora.MuteMicrophone(!0):t.Enable&&s.AgoraApi.Agora.MuteMicrophone(!1),c.SS.EventCenter.emit(p.EventCommond.UIRoomMicBt)},t.onMic=function(t,e,n){return void 0===n&&(n=0),o(this,void 0,void 0,function(){var o,i;return r(this,function(r){switch(r.label){case 0:return o=new u.XhrUrl("room/opMic").Url,i={rid:a.RoomController.CurRoom.RoomId.toString(),op:e,position:t.toString(),duration:n.toString()},[4,u.default.PostJson(o,i)];case 1:return r.sent(),[2]}})})},t.SelfMicMute=function(){t.MicMute||(t.MicMute=!0,t.Enable&&s.AgoraApi.Agora.MuteMicrophone(!0),c.SS.EventCenter.emit(p.EventCommond.UIRoomMicBt))},t.SelfMicUnmute=function(){if(t.MicMute){var e=a.RoomController.GetSelfSeat();if(e&&!e.IsOpenMicrophone){var n=function(){t.MicMute=!1,t.Enable&&s.AgoraApi.Agora.MuteMicrophone(!1),c.SS.EventCenter.emit(p.EventCommond.UIRoomMicBt)};c.qq?c.qq.getSetting({success:function(t){i.default.Red(i.ClogKey.UI,"\u3010--------------authSetting\u3011:"+JSON.stringify(t.authSetting)),t.authSetting["scope.record"]?n():c.qq.authorize({scope:"scope.record",success:function(){console.log("\u6388\u6743\u6210\u529f"),n()},fail:function(){console.log("\u6388\u6743\u5931\u8d25"),c.qq.openSetting({success:function(t){console.log(JSON.stringify(t.authSetting)),console.log("\u6210\u529f\u6253\u5f00\u8bbe\u7f6e")},fail:function(t){console.log("\u6253\u5f00\u8bbe\u7f6e\u5931\u8d25")}})}})},fail:function(){console.log("\u83b7\u53d6qq\u8bbe\u7f6e\u5931\u8d25")}}):n()}}},t.joinMicModeReq=function(t){return o(this,void 0,void 0,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,i,s;return r(this,function(r){switch(r.label){case 0:return e=""+a.RoomController.CurRoom.RoomId,o=new u.XhrUrl("room/setting").Query({key:"rid",value:e}).Url,i={rid:e,type:"mode",value:t?1:0},[4,u.default.PostJson(o,i)];case 1:return s=r.sent(),s.success?(n(!0),[2]):(m.UIToast.Show(s.msg),n(!1),[2])}})})})]})})},t.Enable=!!c.qq,t.MicMute=!0,t}();n.JoinMicController=y,cc._RF.pop()},{"../../../base/script/api/AgoraApi":"AgoraApi","../../../base/script/api/agora/AgoraBase":"AgoraBase","../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../common/view/UIToast":"UIToast","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","../../other/EventCommond":"EventCommond","../../xiyou/xiyouSDK/data/HData":"HData","./RoomController":"RoomController"}],LaunchManager:[function(t,e,n){"use strict";cc._RF.push(e,"31d37PMTHFAdI8e5M3X4AJ2","LaunchManager"),Object.defineProperty(n,"__esModule",{value:!0});var o,r=t("../../../../base/script/frame/clog/Clog"),i=t("../../../../base/script/global/SS"),a=t("../../../other/EventCommond");(function(t){t[t.Start=0]="Start",t[t.Success=1]="Success",t[t.Fail=2]="Fail",t[t.Error=3]="Error"})(o=n.EnumSubLoadState||(n.EnumSubLoadState={})),function(t){t.Xiyou="xiyou",t.Emoji="emoji",t.EmojiPart1="emo1",t.EmojiPart2="emo2",t.XiyouCharmIcon="xiyouCharmIcon",t.XiyouVipIcon="xiyouVipIcon",t.XiyouHeadFrame="xiyouHeadFrame",t.Gift="gift",t.UserDetail="userDetail",t.Game="game",t.Room="room",t.Texture="texture",t.OtherScript="otherScript"}(n.EnumSubPackage||(n.EnumSubPackage={}));var s=function(){function t(){}return t.LoadSubPackage=function(e){return new Promise(function(n){if(r.default.Warn(r.ClogKey.Res,"load subpackage",e),cc.sys.isBrowser)return t.subLoadStates[name]=o.Success,void n(!0);try{t.subLoadStates[e]=o.Start,cc.loader.downloader.loadSubpackage(e,function(s){s?(r.default.Warn(r.ClogKey.Res,"load subpackage fail",e,s),t.subLoadStates[e]=o.Fail,n(!1)):(r.default.Warn(r.ClogKey.Res,"load subpackage success",e),t.subLoadStates[e]=o.Success,i.SS.EventCenter.emit(a.EventCommond.SubLoadSuccess,e),n(!0))})}catch(i){r.default.Warn(r.ClogKey.Res,"load subpackage error",e,i),t.subLoadStates[e]=o.Error,n(!1)}})},t.SubLoadState=function(e){return void 0===t.subLoadStates[e]?o.Error:t.subLoadStates[e]},t.subLoadStates={},t}();n.LaunchManager=s,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../../base/script/global/SS":"SS","../../../other/EventCommond":"EventCommond"}],LocalStorage:[function(t,e,n){"use strict";cc._RF.push(e,"fe6dfBEInhMQbBdKpY/8j7k","LocalStorage"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../util/StringUtil"),r=t("../clog/Clog"),i=function(){function t(){}return t.SetString=function(t,e){cc.sys.localStorage.setItem(t,e)},t.GetString=function(t,e){var n=cc.sys.localStorage.getItem(t);return null!=n?n:null==n&&null!=e?e:null},t.SetBool=function(t,e){e?cc.sys.localStorage.setItem(t,"true"):cc.sys.localStorage.setItem(t,"false")},t.GetBool=function(t,e){var n=cc.sys.localStorage.getItem(t);return"true"==n||"false"!=n&&(o.IsNullOrEmpty(n)&&null!=e?e:(!o.IsNullOrEmpty(n)||null!=e)&&void 0)},t.SetNumber=function(t,e){null!=e&&cc.sys.localStorage.setItem(t,e)},t.GetNumber=function(t,e){var n=cc.sys.localStorage.getItem(t);if(null==n&&null!=e)return r.default.Orange(r.ClogKey.LocalStorage,"LocalStorage get Number is null or empty ,return defult false!"),e;if(null==n&&null==e)return r.default.Orange(r.ClogKey.LocalStorage,"LocalStorage get Number is null ,defult is null, return -1!"),-1;var o=Number(n);return isNaN(o)?e:o},t}();n.LocalStorageUtil=i,cc._RF.pop()},{"../../util/StringUtil":"StringUtil","../clog/Clog":"Clog"}],LoginController:[function(t,e,n){"use strict";cc._RF.push(e,"048fa/ghN5NW5GNxgswuela","LoginController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/api/http/Xhr"),a=t("../model/BanBanData"),s=t("../../../base/script/frame/clog/Clog"),l=t("../../../base/script/util/StringUtil"),c=t("../../../base/script/global/SS"),u=t("../../../base/script/frame/ui/UIManager"),h=t("../../authorize/UIAuthorize"),f=t("../../xiyou/xiyouSDK/utils/NetCenterMgr"),p=t("../../xiyou/xiyouSDK/socket/MsgDefine"),d=t("../../xiyou/xiyouSDK/XiyouSDK"),m=t("../../xiyou/xiyouSDK/data/HData"),y=t("../model/XiYouData"),g=t("../model/SessionData"),C=t("../../xiyou/config/XiYouGiftConfig"),_=t("../../../base/script/sdk/thinkingdata/controller/TaContoroller"),v=t("../../../base/script/sdk/report/Report"),b=function(){function t(){}return Object.defineProperty(t,"isLogined",{get:function(){return null!=g.Session.BanBan.UId&&null!=g.Session.BanBan.Token},enumerable:!0,configurable:!0}),t.Step1LoginQQ=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return s.default.Green(s.ClogKey.Net,"\u3010\u7b2c1\u6b65\uff0c\u767b\u5f55QQ\u670d\u52a1\u5668\u3011"),[2,new Promise(function(e){c.qq.login({success:function(n){if(console.warn("qq login success",n),n.errMsg.endsWith(":ok"))return t.Step1Result=n,s.default.Trace(s.ClogKey.Net,"Step1 \u767b\u5f55QQ\u670d\u52a1\u5668\u6210\u529f"+JSON.stringify(n)),void e(!0);s.default.Trace(s.ClogKey.Net,"Step1 \u767b\u5f55QQ\u670d\u52a1\u5668\u5931\u8d25"+JSON.stringify(n.errMsg)),e(n.errMsg)},fail:function(t){s.default.Trace(s.ClogKey.Net,"Step1 \u767b\u5f55QQ\u670d\u52a1\u5668\u5931\u8d25"+JSON.stringify(t)),e(!1)}})})]})})},t.Step2LoginXiyou=function(){return o(this,void 0,Promise,function(){var t,e=this;return r(this,function(n){return s.default.Green(s.ClogKey.Net,"\u3010\u7b2c2\u6b65\uff0c\u767b\u5f55xiyou\u670d\u52a1\u5668\u3011"),t=null,t=c.qq.getSystemInfoSync(),[2,new Promise(function(n){f.default.Ins.registerMsgListener(p.default.U_USER_LOGIN,function(t,i,a){return o(e,void 0,void 0,function(){return r(this,function(t){return s.default.Trace(s.ClogKey.Net,"\u3010Step2 \u767b\u5f55xiyou\u670d\u52a1, info\u3011:"+JSON.stringify(a)),a&&0!=a.ec?(n(!1),[2]):(m.default.isNeedAuthorize=a.data.needAuthorize||!1,m.default.gsToken=a.data.session_key,this.Step2Result=a.data.profile,g.Session.XiYou=new y.XiyouData(a.data.profile),C.XiYouGiftTable.Init(a.data.gifts.lists[2011]),s.default.Trace(s.ClogKey.Net,"\u3010Step2 \u767b\u5f55xiyou\u670d\u52a1\u5668\u6210\u529f, Result\u3011:"+JSON.stringify(this.Step2Result)),s.default.Trace(s.ClogKey.Net,"\u3010Step2 \u767b\u5f55xiyou\u670d\u52a1\u5668\u6210\u529f, xiyou\u6570\u636e:"+JSON.stringify(g.Session.XiYou)),_.TaController.SetCommonXiyouId(g.Session.XiYou.MomoId),n(!0),[2])})})},e,!0),s.default.Trace(s.ClogKey.Net,"\u3010Step2 \u767b\u5f55xiyou\u670d\u52a1\u5668\u53c2\u6570\u3011\t\n \u3010data1\u3011:"+JSON.stringify(t)+"\t\n\u3010data2\u3011:"+JSON.stringify(e.Step1Result)),d.XiyouSDK.Ins.login({data:t},{data:e.Step1Result})})]})})},t.Step3GetQQAuthorize=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return s.default.Green(s.ClogKey.Net,"\u3010\u7b2c3\u6b65\uff0c\u83b7\u53d6QQ\u6388\u6743\u4fe1\u606f\u3011"),[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t=this;return r(this,function(n){switch(n.label){case 0:return m.default.isNeedAuthorize?[4,new Promise(function(t){c.qq.getSetting({success:function(e){t(!!e.authSetting["scope.userInfo"])}})})]:[3,5];case 1:return n.sent()?[3,4]:[4,u.UIManager.OpenUI(h.UIAuthorize)];case 2:return n.sent(),[4,h.UIAuthorize.Instance.DonePromise];case 3:n.sent(),n.label=4;case 4:return c.qq.getUserInfo({withCredentials:!0,success:function(n){if(n.errMsg.endsWith(":ok"))return t.Step3Result=n,s.default.Trace(s.ClogKey.Net,"\u3010Step3 QQ\u6388\u6743\u6210\u529f\u3011\uff0c res="+JSON.stringify(n)),d.XiyouSDK.Ins.sendPlayerInfo({avatarUrl:"",city:"",country:"",language:"",nickName:"",province:"",gender:2},n),void e(!0);s.default.Trace(s.ClogKey.Net,"\u3010Step3 QQ\u6388\u6743\u5931\u8d25\u3011\uff1a"+n.errMsg),e(!1)},fail:function(t){s.default.Trace(s.ClogKey.Net,"\u3010Step3 QQ\u6388\u6743\u5931\u8d25\u3011\uff1a"+JSON.stringify(t)),e(!1)}}),[3,6];case 5:e(!0),s.default.Trace(s.ClogKey.Net,"\u3010Step3 \u65e0\u9700QQ\u6388\u6743\uff0c\u8fd9\u4e00\u6b65pass\u3011"),n.label=6;case 6:return[2]}})})})]})})},t.Stpe4LoignAppServer=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return s.default.Green(s.ClogKey.Net,"Stpe4 \u767b\u5f55\u6211\u4eec\u81ea\u5df1\u7684\u670d\u52a1\u5668"),[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o;return r(this,function(r){switch(r.label){case 0:return t=new i.XhrUrl("xiyou/login").Url,n={params:JSON.stringify(this.Step2Result)},[4,i.default.PostJson(t,n)];case 1:return o=r.sent(),Boolean(o.success)||e(!1),g.Session.BanBan=new a.BanBanData(o.data),s.default.Trace(s.ClogKey.Net,"Step4\uff0c\u767b\u5f55\u6211\u4eec\u81ea\u5df1\u7684\u670d\u52a1\u5668\u6210\u529f, Session="+JSON.stringify(g.Session)),g.Session.BanBan.OpenId=o.openId,l.IsNullOrEmpty(g.Session.BanBan.Token)||(i.default.SetHeaderToken(g.Session.BanBan.Token),e(!0)),e(!1),[2]}})})})]})})},t.Login=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,v.Report.Boot("Login")];case 1:return t.sent(),[4,this.Step1LoginQQ()];case 2:return t.sent()?[4,this.Step2LoginXiyou()]:(s.default.Error("login step 1 error!"),[2]);case 3:return t.sent()?[4,this.Step3GetQQAuthorize()]:(s.default.Error("login step 2 error!"),[2]);case 4:return t.sent()?[4,this.Stpe4LoignAppServer()]:(s.default.Error("login step 3 error!"),[2]);case 5:return t.sent()?[4,v.Report.Boot("Login")]:(s.default.Error("login step 4 error!"),[2]);case 6:return t.sent(),[4,v.Report.Version()];case 7:return t.sent(),[2]}})})},t}();n.LoginController=b,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../../base/script/sdk/report/Report":"Report","../../../base/script/sdk/thinkingdata/controller/TaContoroller":"TaContoroller","../../../base/script/util/StringUtil":"StringUtil","../../authorize/UIAuthorize":"UIAuthorize","../../xiyou/config/XiYouGiftConfig":"XiYouGiftConfig","../../xiyou/xiyouSDK/XiyouSDK":"XiyouSDK","../../xiyou/xiyouSDK/data/HData":"HData","../../xiyou/xiyouSDK/socket/MsgDefine":"MsgDefine","../../xiyou/xiyouSDK/utils/NetCenterMgr":"NetCenterMgr","../model/BanBanData":"BanBanData","../model/SessionData":"SessionData","../model/XiYouData":"XiYouData"}],Log:[function(t,e,n){"use strict";cc._RF.push(e,"77defp4DyVIfIpDLkmXm++F","Log"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../data/HData"),r=t("./Utils"),i=function(){function t(){}return t.showVersion=function(){console.log("%c XYSDK - \u5f53\u524d\u7248\u672c\u53f7\uff1a %c%s","color:#ff0000","color:#0000ff",o.default.SDKVERSION)},t.showWarn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.default.isShowLog&&(t?t.unshift(r.default.formateTimestamp(Date.now())):t=[],console.warn.apply(console,t))},t.showLog=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.default.isShowLog&&(t?t.unshift(r.default.formateTimestamp(Date.now())):t=[],console.log.apply(console,t))},t}();n.default=i,cc._RF.pop()},{"../data/HData":"HData","./Utils":"Utils"}],MD5:[function(t,e,n){"use strict";cc._RF.push(e,"ba025CVJkJC+pyZImJDxfxo","MD5"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var o=Array(16),r=Array(16),i=0;i<16;i++)o[i]=909522486^n[i],r[i]=1549556828^n[i];var a=this.binl_md5(o.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(a),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(t){this.hexcase=0}for(var e,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",r=0;r<t.length;r++)e=t.charCodeAt(r),o+=n.charAt(e>>>4&15)+n.charAt(15&e);return o},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(t){this.b64pad=""}for(var e="",n=t.length,o=0;o<n;o+=3)for(var r=t.charCodeAt(o)<<16|(o+1<n?t.charCodeAt(o+1)<<8:0)|(o+2<n?t.charCodeAt(o+2):0),i=0;i<4;i++)8*o+6*i>8*t.length?e+=this.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-i)&63);return e},t.prototype.rstr2any=function(t,e){var n,o,r,i,a,s=e.length,l=Array(Math.ceil(t.length/2));for(n=0;n<l.length;n++)l[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),u=Array(c);for(o=0;o<c;o++){for(a=Array(),i=0,n=0;n<l.length;n++)i=(i<<16)+l[n],i-=(r=Math.floor(i/s))*s,(a.length>0||r>0)&&(a[a.length]=r);u[o]=i,l=a}var h="";for(n=u.length-1;n>=0;n--)h+=e.charAt(u[n]);return h},t.prototype.str2rstr_utf8=function(t){for(var e,n,o="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),r++),e<=127?o+=String.fromCharCode(e):e<=2047?o+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,o=-271733879,r=-1732584194,i=271733878,a=0;a<t.length;a+=16){var s=n,l=o,c=r,u=i;n=this.md5_ff(n,o,r,i,t[a+0],7,-680876936),i=this.md5_ff(i,n,o,r,t[a+1],12,-389564586),r=this.md5_ff(r,i,n,o,t[a+2],17,606105819),o=this.md5_ff(o,r,i,n,t[a+3],22,-1044525330),n=this.md5_ff(n,o,r,i,t[a+4],7,-176418897),i=this.md5_ff(i,n,o,r,t[a+5],12,1200080426),r=this.md5_ff(r,i,n,o,t[a+6],17,-1473231341),o=this.md5_ff(o,r,i,n,t[a+7],22,-45705983),n=this.md5_ff(n,o,r,i,t[a+8],7,1770035416),i=this.md5_ff(i,n,o,r,t[a+9],12,-1958414417),r=this.md5_ff(r,i,n,o,t[a+10],17,-42063),o=this.md5_ff(o,r,i,n,t[a+11],22,-1990404162),n=this.md5_ff(n,o,r,i,t[a+12],7,1804603682),i=this.md5_ff(i,n,o,r,t[a+13],12,-40341101),r=this.md5_ff(r,i,n,o,t[a+14],17,-1502002290),o=this.md5_ff(o,r,i,n,t[a+15],22,1236535329),n=this.md5_gg(n,o,r,i,t[a+1],5,-165796510),i=this.md5_gg(i,n,o,r,t[a+6],9,-1069501632),r=this.md5_gg(r,i,n,o,t[a+11],14,643717713),o=this.md5_gg(o,r,i,n,t[a+0],20,-373897302),n=this.md5_gg(n,o,r,i,t[a+5],5,-701558691),i=this.md5_gg(i,n,o,r,t[a+10],9,38016083),r=this.md5_gg(r,i,n,o,t[a+15],14,-660478335),o=this.md5_gg(o,r,i,n,t[a+4],20,-405537848),n=this.md5_gg(n,o,r,i,t[a+9],5,568446438),i=this.md5_gg(i,n,o,r,t[a+14],9,-1019803690),r=this.md5_gg(r,i,n,o,t[a+3],14,-187363961),o=this.md5_gg(o,r,i,n,t[a+8],20,1163531501),n=this.md5_gg(n,o,r,i,t[a+13],5,-1444681467),i=this.md5_gg(i,n,o,r,t[a+2],9,-51403784),r=this.md5_gg(r,i,n,o,t[a+7],14,1735328473),o=this.md5_gg(o,r,i,n,t[a+12],20,-1926607734),n=this.md5_hh(n,o,r,i,t[a+5],4,-378558),i=this.md5_hh(i,n,o,r,t[a+8],11,-2022574463),r=this.md5_hh(r,i,n,o,t[a+11],16,1839030562),o=this.md5_hh(o,r,i,n,t[a+14],23,-35309556),n=this.md5_hh(n,o,r,i,t[a+1],4,-1530992060),i=this.md5_hh(i,n,o,r,t[a+4],11,1272893353),r=this.md5_hh(r,i,n,o,t[a+7],16,-155497632),o=this.md5_hh(o,r,i,n,t[a+10],23,-1094730640),n=this.md5_hh(n,o,r,i,t[a+13],4,681279174),i=this.md5_hh(i,n,o,r,t[a+0],11,-358537222),r=this.md5_hh(r,i,n,o,t[a+3],16,-722521979),o=this.md5_hh(o,r,i,n,t[a+6],23,76029189),n=this.md5_hh(n,o,r,i,t[a+9],4,-640364487),i=this.md5_hh(i,n,o,r,t[a+12],11,-421815835),r=this.md5_hh(r,i,n,o,t[a+15],16,530742520),o=this.md5_hh(o,r,i,n,t[a+2],23,-995338651),n=this.md5_ii(n,o,r,i,t[a+0],6,-198630844),i=this.md5_ii(i,n,o,r,t[a+7],10,1126891415),r=this.md5_ii(r,i,n,o,t[a+14],15,-1416354905),o=this.md5_ii(o,r,i,n,t[a+5],21,-57434055),n=this.md5_ii(n,o,r,i,t[a+12],6,1700485571),i=this.md5_ii(i,n,o,r,t[a+3],10,-1894986606),r=this.md5_ii(r,i,n,o,t[a+10],15,-1051523),o=this.md5_ii(o,r,i,n,t[a+1],21,-2054922799),n=this.md5_ii(n,o,r,i,t[a+8],6,1873313359),i=this.md5_ii(i,n,o,r,t[a+15],10,-30611744),r=this.md5_ii(r,i,n,o,t[a+6],15,-1560198380),o=this.md5_ii(o,r,i,n,t[a+13],21,1309151649),n=this.md5_ii(n,o,r,i,t[a+4],6,-145523070),i=this.md5_ii(i,n,o,r,t[a+11],10,-1120210379),r=this.md5_ii(r,i,n,o,t[a+2],15,718787259),o=this.md5_ii(o,r,i,n,t[a+9],21,-343485551),n=this.safe_add(n,s),o=this.safe_add(o,l),r=this.safe_add(r,c),i=this.safe_add(i,u)}return[n,o,r,i]},t.prototype.md5_cmn=function(t,e,n,o,r,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(o,i)),r),n)},t.prototype.md5_ff=function(t,e,n,o,r,i,a){return this.md5_cmn(e&n|~e&o,t,e,r,i,a)},t.prototype.md5_gg=function(t,e,n,o,r,i,a){return this.md5_cmn(e&o|n&~o,t,e,r,i,a)},t.prototype.md5_hh=function(t,e,n,o,r,i,a){return this.md5_cmn(e^n^o,t,e,r,i,a)},t.prototype.md5_ii=function(t,e,n,o,r,i,a){return this.md5_cmn(n^(e|~o),t,e,r,i,a)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();n.default=o,cc._RF.pop()},{}],MGameHitBall:[function(t,e,n){"use strict";cc._RF.push(e,"d7f94vL/VtIto10EwsOSPXS","MGameHitBall"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){void 0===t&&(t=null),this.Power=0,this.Angle=0,null!==t&&(this.Power=t.power?t.power:0,this.Angle=t.angle?t.angle:0)}}();n.MGameHitBall=o,cc._RF.pop()},{}],MatchController:[function(t,e,n){"use strict";cc._RF.push(e,"62335gh+LtEJKSnVlkAjPzw","MatchController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/frame/clog/Clog"),a=t("../../../base/script/api/http/Xhr"),s=t("../../room/controller/RoomController"),l=t("../../common/view/UIToast"),c=t("../../../base/script/global/SS"),u=t("../../../base/script/frame/ui/UIManager"),h=t("../view/UIMatching"),f=t("../../xiyou/controller/XiYouController"),p=t("../../../base/script/util/SyncPromise"),d=t("../../other/EnumCenter"),m=t("../../Constance"),y=function(){function t(){}return t.DoMatchCall=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return i.default.Green(i.ClogKey.Net,"\u53d1\u542f\u5f81\u53ec"),[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o;return r(this,function(r){switch(r.label){case 0:return t=new a.XhrUrl("match/call").Url,n={rid:s.RoomController.CurRoom.RoomId},[4,a.default.PostJson(t,n)];case 1:return o=r.sent(),Boolean(o.success)||(l.UIToast.Show(o.msg),e(!1)),e(!0),[2]}})})})]})})},t.DoMatchStop=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return i.default.Green(i.ClogKey.Net,"\u505c\u6b62\u5f81\u53ec"),[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o;return r(this,function(r){switch(r.label){case 0:return t=new a.XhrUrl("match/stop").Url,n={rid:s.RoomController.CurRoom.RoomId},[4,a.default.PostJson(t,n)];case 1:return o=r.sent(),Boolean(o.success)||e(!1),e(!0),[2]}})})})]})})},t.Start=function(){var t=this;this.Handler=window.setInterval(function(){t.ReqMatch()},1e3*this.MatchInterval),this.IsMatching=!0},t.End=function(){window.clearInterval(this.Handler),this.IsMatching=!1,this.ReqCount=0},t.MatchResult=function(t){this.CurMatchRoomId=t,i.default.Trace(i.ClogKey.Net,"\u5f53\u524d\u8bf7\u6c42\u6b21\u6570\uff1aReqCount\uff1a"+this.ReqCount+"\uff1bjoinRoomId = "+this.CurMatchRoomId),this.CurMatchRoomId>0&&(l.UIToast.Show("\u5339\u914d\u6210\u529f"),s.RoomController.OnJoinRoomId=this.CurMatchRoomId,this.MatchDonePromise.resolve(!0),this.CloseMatch(!1))},t.ReqMatch=function(){this.ReqCount>this.MatchReqMaxCount&&(l.UIToast.Show("\u5339\u914d\u5931\u8d25"),this.MatchDonePromise.resolve(!1),this.CloseMatch(!0)),this.ReqCount++,this.UnderMatch()},t.UnderMatch=function(){return o(this,void 0,void 0,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,n,o,s;return r(this,function(r){switch(r.label){case 0:return e=new a.XhrUrl("match/match").Query({key:"version",value:"4"}).Url,n={key:m.Constance.ROOM_TYPE,identify:t.Identify},[4,a.default.PostJson(e,n)];case 1:return o=r.sent(),0==o.success?(i.default.Trace(i.ClogKey.Net,"\u8bf7\u6c42match/match\u5931\u8d25"),this.MatchResult(0),[2]):(s=o.data,this.MatchingCount=s.count,this.PlayingList=s.playing_list?s.playing_list:[],c.SS.EventCenter.emit(d.EnumGameMessageType.OnMatchingCountChange),parseInt(s.rid)>0?this.MatchResult(parseInt(o.data.rid)):this.MatchResult(0),[2])}})})})]})})},t.CloseMatch=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return this.End(),[4,u.UIManager.CloseUI(h.default)];case 1:return e.sent(),t&&f.XiYouController.JumpToXiyou(),[2]}})})},t.DonePromise=function(){return this.MatchDonePromise.promise},t.UnderPlayingList=function(){return o(this,void 0,void 0,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,e;return r(this,function(n){switch(n.label){case 0:return i.default.Trace(i.ClogKey.Net,"\u9996\u9875\u4fe1\u606f\u8bf7\u6c42\uff1amini/channelhome"),t=new a.XhrUrl("mini/channelhome").Query({key:"game_type",value:m.Constance.ROOM_TYPE}).Url,[4,a.default.GetJson(t)];case 1:return e=n.sent(),e.success?(e.data&&e.data.playing_list?this.PlayingList=e.data.playing_list:this.PlayingList=[],c.SS.EventCenter.emit(d.EnumGameMessageType.OnPlayingListChange),[2]):[2]}})})})]})})},t.MatchingCount=0,t.PlayingList=[],t.IsCalling=!1,t.MatchReqMaxCount=300,t.ReqCount=0,t.MatchInterval=1,t.CurMatchRoomId=0,t.IsMatching=!1,t.MatchDonePromise=new p.SyncPromise,t}();n.MatchController=y,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../../base/script/util/SyncPromise":"SyncPromise","../../Constance":"Constance","../../common/view/UIToast":"UIToast","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../../xiyou/controller/XiYouController":"XiYouController","../view/UIMatching":"UIMatching"}],MatchPlayingItem:[function(t,e,n){"use strict";cc._RF.push(e,"292a4G/fdFBjrHSTde6nuMM","MatchPlayingItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIUtil"),s=t("../../../base/script/util/UIEventCenter"),l=t("../../room/controller/RoomController"),c=t("../../../base/script/global/SS"),u=t("../../../base/script/frame/ui/UIManager"),h=t("./UIMatching"),f=t("../controller/MatchController"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.initRoot=function(){this._nickName=cc.find("NickName",this.node).getComponent(cc.Label),this._playTime=cc.find("PlayTime",this.node).getComponent(cc.Label),this._headIcon=cc.find("HeadMask/HeadIcon",this.node).getComponent(cc.Sprite),this._btnBg=cc.find("BtnBg",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;s.UIEventCenter.ButtonEvent(this._btnBg,function(){return t.lookPlayingClick()})},e.prototype.refreshView=function(t){if(t){this._data=t,this._nickName.string=t.nickName,this._playTime.string=t.timeText;var e=c.SS.ImageUrlProxy+t.headIcon;a.UIUtil.LoadRemoteImage(e,this._headIcon)}},e.prototype.lookPlayingClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this._data?(l.RoomController.OnJoinRoomId=this._data.RId,l.RoomController.OnJoinPassword="",[4,l.RoomController.JoinRoom()]):[2];case 1:return t.sent(),f.MatchController.End(),[4,u.UIManager.CloseUI(h.default)];case 2:return t.sent(),[2]}})})},e}(cc.Component);n.default=p,cc._RF.pop()},{"../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../room/controller/RoomController":"RoomController","../controller/MatchController":"MatchController","./UIMatching":"UIMatching"}],MatchPlayingUserInfo:[function(t,e,n){"use strict";cc._RF.push(e,"2b7625dwV1AGYqslak4S9ma","MatchPlayingUserInfo"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){t&&(this.UId=t.uid,this.RId=t.rid,this.nickName=t.name,this.timeText=t.time_text,this.headIcon=t.icon)}}();n.MatchPlayingUserInfo=o,cc._RF.pop()},{}],Md5Util:[function(t,e,n){"use strict";cc._RF.push(e,"fe058ypei5BH5cWPb8Sj8/i","Md5Util");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../base/script/global/SS"),i=t("../../base/script/frame/clog/Clog"),a=t("./MD5"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.GenSign=function(t){var e="im."+r.SS.CurAppName+".minigame."+r.SS.CurPlatformStr,n=[],o=Object.keys(t);o.sort(),o.forEach(function(e){null!=t[e]&&n.push(e+"="+t[e])});var s=e+n.join("&");return i.default.Purple(i.ClogKey.Net,"[\u52a0\u5bc6]"+s),(new a.default).hex_md5(s)},e}(cc.Component);n.Md5Util=s,cc._RF.pop()},{"../../base/script/frame/clog/Clog":"Clog","../../base/script/global/SS":"SS","./MD5":"MD5"}],MicWaitController:[function(t,e,n){"use strict";cc._RF.push(e,"c99d33hVnxKarPXM2wHwjVb","MicWaitController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../other/EventCommond"),a=t("../../../base/script/global/SS"),s=t("../../login/model/SessionData"),l=t("../model/MicWaitData"),c=t("../../room/controller/RoomController"),u=t("../../../base/script/api/http/Xhr"),h=t("../../other/EnumCenter"),f=t("../../room/controller/JoinMicController"),p=t("../../common/view/UIToast"),d=function(){function t(){}return t.RefreshMicWaitListData=function(e){t.JoinMicWaitIDList=e},t.IsMicWaiting=function(e){return!!t.JoinMicWaitIDList.find(function(t){return t==e})},t.JoinMicWait=function(t,e,n){if(void 0===e&&(e=s.Session.BanBan.UId),void 0===n&&(n=s.Session.BanBan.OpenId),c.RoomController.CurRoom.Mode==h.EnumRoomMode.Auto)f.JoinMicController.JoinMic(t);else if(c.RoomController.CurRoom.Mode==h.EnumRoomMode.Lock){var o=c.RoomController.Seats.find(function(e){return e.Position==t}),r="0";o&&(r=o.Role==h.EnumRole.ROLE_GOD?"1":"0");var i=new u.XhrUrl("room/queue").Url,a={rid:""+c.RoomController.CurRoom.RoomId,position:""+t,boss:r};u.default.PostJson(i,a)}},t.JoinMicWaitCancel=function(e,n){return void 0===e&&(e=s.Session.BanBan.UId),void 0===n&&(n=s.Session.BanBan.OpenId),o(this,void 0,void 0,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,i;return r(this,function(r){switch(r.label){case 0:return c.RoomController.CurRoom.Mode==h.EnumRoomMode.Lock&&t.IsMicWaiting(s.Session.BanBan.UId)?(e=new u.XhrUrl("room/queue").Url,o={rid:""+c.RoomController.CurRoom.RoomId,position:"-3",boss:"0"},[4,u.default.PostJson(e,o)]):[3,2];case 1:return i=r.sent(),0==i.success?(n(!1),[2]):(n(!0),[3,3]);case 2:n(!1),r.label=3;case 3:return[2]}})})})]})})},t.micWaitListReq=function(e,n){return void 0===e&&(e=s.Session.BanBan.UId),void 0===n&&(n=s.Session.BanBan.OpenId),o(this,void 0,void 0,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,i,a,s;return r(this,function(r){switch(r.label){case 0:return e=new u.XhrUrl("room/queue").Url,o={rid:""+c.RoomController.CurRoom.RoomId,position:"-2",boss:"0"},[4,u.default.PostJson(e,o)];case 1:if(i=r.sent(),0==i.success)return n(!1),[2];for(a=i.data,t.JoinMicWaitList=[],s=0;s<a.length;s++)t.JoinMicWaitList.push(new l.MicWaitData(a[s]));return n(!0),[2]}})})})]})})},t.JoinMic=function(t){return o(this,void 0,void 0,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,i;return r(this,function(r){switch(r.label){case 0:return e=new u.XhrUrl("room/joinMic").Url,o={rid:""+c.RoomController.CurRoom.RoomId,position:"-1",uid:t},[4,u.default.PostJson(e,o)];case 1:return i=r.sent(),0==i.success?(i.msg&&p.UIToast.Show(i.msg),n(!1),[2]):(n(!0),[2])}})})})]})})},t.micWaitListCheck=function(){return o(this,void 0,void 0,function(){var e,n;return r(this,function(o){switch(o.label){case 0:return[4,t.micWaitListReq()];case 1:for(o.sent(),e=[],n=0;n<t.JoinMicWaitList.length;n++)e.push(t.JoinMicWaitList[n].UId);return t.JoinMicWaitIDList=e,a.SS.EventCenter.emit(i.EventCommond.UIMicWait),[2]}})})},t.JoinMicWaitList=[],t.JoinMicWaitIDList=[],t}();n.MicWaitController=d,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/global/SS":"SS","../../common/view/UIToast":"UIToast","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","../../other/EventCommond":"EventCommond","../../room/controller/JoinMicController":"JoinMicController","../../room/controller/RoomController":"RoomController","../model/MicWaitData":"MicWaitData"}],MicWaitData:[function(t,e,n){"use strict";cc._RF.push(e,"e8f9aAt7dlA84wvncxCLh6O","MicWaitData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){null!=t&&(t.hasOwnProperty("uid")&&(this.UId=t.uid),t.hasOwnProperty("name")&&(this.Name=t.name),t.hasOwnProperty("icon")&&(this.Icon=t.icon),t.hasOwnProperty("sex")&&(this.Sex=t.sex),t.hasOwnProperty("vip")&&(this.VipNew=t.vip),t.hasOwnProperty("dateline_diff")&&(this.Dateline=t.dateline_diff))}}();n.MicWaitData=o,cc._RF.pop()},{}],MsgDefine:[function(t,e,n){"use strict";cc._RF.push(e,"3d116ir3L1EbIFfwkapv4kM","MsgDefine"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.U_HEAR_MSG="system.jump",t.U_USER_LOGIN="game.login",t.U_INFO_POST="post.platform.info",t.REQUEST_GET_GIFT_PANEL="get.gift.panel",t.REQUEST_QQ_SEND_GIFT="qq.send.gift",t.COST_GOODS="cost.goods",t.REQUEST_ACCOUNT_INFO="request.my.accountInfo.details",t.ADD_FRIEND="request.optFriend",t.REQUEST_USER_BAG="request.user.app.bag",t.REQUEST_ITEM_INFO="request.item.info",t.REQUEST_CHANGE_ITEM_STATE="request.change.item.state",t}();n.default=o,cc._RF.pop()},{}],NetCenterMgr:[function(t,e,n){"use strict";cc._RF.push(e,"f05cfr60o5GcrLCCD/4Zb00","NetCenterMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.m_msgListenerList=[]}return Object.defineProperty(t,"Ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!0,configurable:!0}),t.prototype.registerMsgListener=function(t,e,n,o){for(var r=this.m_msgListenerList.length,i=0;i<r;i++){var a=this.m_msgListenerList[i];if(a&&a.listener==e&&a.thisObject==n)return!1}var s={type:t,listener:e,thisObject:n,dispatchOnce:o};return this.m_msgListenerList.push(s),!0},t.prototype.removeMsgListener=function(t,e,n){if(this.m_msgListenerList&&this.m_msgListenerList.length)for(var o=this.m_msgListenerList.length,r=0;r<o;r++){var i=this.m_msgListenerList[r];if(i&&i.type==t&&i.listener==e&&i.thisObject==n)return void this.m_msgListenerList.splice(r,1)}},t.prototype.removeMsgListeners=function(t){if(void 0===t&&(t=""),this.m_msgListenerList&&this.m_msgListenerList.length){for(var e=this.m_msgListenerList.length,n=[],o=0;o<e;o++){var r=this.m_msgListenerList[o];r&&r.type!=t&&n.push(r)}this.m_msgListenerList=n}},t.prototype.removeAllListeners=function(){for(var t in this.m_msgListenerList)this.m_msgListenerList[t]&&(this.m_msgListenerList[t]=null,delete this.m_msgListenerList[t])},t.prototype.notifyListener=function(t){if(this.m_msgListenerList){var e=this.m_msgListenerList.length;if(0!=e){for(var n=t.header.msgCode,o=[],r=0;r<e;r++){(i=this.m_msgListenerList[r])&&i.type==n&&(i.listener.call(i.thisObject,t.header.msgCode,t.header.version,t.body),i.dispatchOnce&&o.push(i))}for(;o.length;){var i=o.pop();this.removeMsgListener(i.type,i.listener,i.thisObject)}}}},t}();n.default=o,cc._RF.pop()},{}],NewbieGuildConfigData:[function(t,e,n){"use strict";cc._RF.push(e,"bcbaaxRq3RLB5E2+xPdq/kt","NewbieGuildConfigData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){null!=t&&(this.guildName=t.guildName,this.maskPos=t.maskPos,this.guildTipPos=t.guildTipPos,this.guildTipSize=t.guildTipSize,this.arrowPos=t.arrowPos,this.arrowScale=t.arrowScale,this.iconPos=t.iconPos,this.iconName=t.iconName,this.text=t.text)}}();n.NewbieGuildConfigData=o,cc._RF.pop()},{}],NewbieGuildController:[function(t,e,n){"use strict";cc._RF.push(e,"d1c206QlUtCxZCvJR4ZIab3","NewbieGuildController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../other/EventCommond"),s=t("../model/NewbieGuildConfigData"),l=t("../../../base/script/frame/clog/Clog"),c=function(){function t(){}return t.InitNewbieGuild=function(){var t=this;this.Timer=setInterval(function(){return t.CheckExecuteNewbieGuild()},500)},t.CheckExecuteNewbieGuild=function(){},t.GuildStepExecute=function(){return o(this,void 0,void 0,function(){var t;return r(this,function(e){return this.CurStep>=this.GuildList.length?(l.default.Trace(l.ClogKey.UI,"\u65b0\u624b\u6307\u5f15\u5df2\u6267\u884c\u5b8c"),this.IsRunningGuild=!1,clearInterval(this.Timer),this.GuildList=[],this.CurStep=-1,this.IsNeedShowGuild=!1,this.serverGuilds=null,[2]):(t=this.GuildList[this.CurStep],this.IsRunningGuild||(this.IsRunningGuild=!0),i.SS.EventCenter.emit(a.EventCommond.UINewbieGuildStep,t),this.CurStep++,[2])})})},t.IsNeedShowGuild=!1,t.IsRunningGuild=!1,t.CurStep=-1,t.GuildList=[],t.Timer=null,t.JoinRoomEnd=!1,t.GuildConfigs={flame:new s.NewbieGuildConfigData({guildName:"flame",maskPos:cc.v2(125,620),guildTipPos:cc.v2(195,470),guildTipSize:cc.size(276,166),arrowPos:cc.v2(-70,94),arrowScale:cc.v2(1,1),iconPos:cc.v2(85,85),iconName:"T_Newbie_Hot",text:"\u7ba1\u7406\u8005\u53ef\u4ee5\u70b9\u51fb\u5c0f\u706b\u82d7\uff0c\u5bf9\u623f\u95f4\u6210\u5458\u8fdb\u884c\u66f4\u591a\u64cd\u4f5c\u54e6"}),more:new s.NewbieGuildConfigData({guildName:"more",maskPos:cc.v2(307,-613),guildTipPos:cc.v2(218,-490),guildTipSize:cc.size(276,125),arrowPos:cc.v2(48,-74),arrowScale:cc.v2(-1,-1),iconPos:cc.v2(116,-56),iconName:"T_Newbie_More",text:"\u70b9\u51fb\u8fd9\u91cc\uff0c\u53ef\u4ee5\u4fee\u6539\u623f\u95f4\u4fe1\u606f\u54e6"}),topic:new s.NewbieGuildConfigData({guildName:"topic",maskPos:cc.v2(-80,-615),guildTipPos:cc.v2(2,-492),guildTipSize:cc.size(248,125),arrowPos:cc.v2(-54,-74),arrowScale:cc.v2(1,-1),iconPos:cc.v2(105,-54),iconName:"T_Newbie_Topic",text:"\u5feb\u9009\u62e9\u8bdd\u9898\u548c\u5927\u5bb6\u4e00\u8d77\u73a9\u5427"})},t}();n.NewbieGuildController=c,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../other/EventCommond":"EventCommond","../model/NewbieGuildConfigData":"NewbieGuildConfigData"}],OnlineInfoItem:[function(t,e,n){"use strict";cc._RF.push(e,"69eb84wamNKB6OoFno5Q1fW","OnlineInfoItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIUtil"),s=t("../../../base/script/global/SS"),l=t("../../other/EnumCenter"),c=t("../../../base/script/util/StringUtil"),u=t("../../../base/script/util/UIEventCenter"),h=t("../../../base/script/frame/clog/Clog"),f=t("../../actionSheet/controller/ActionSheetController"),p=t("../../../base/script/frame/ui/UIManager"),d=t("./UIRoomAdmin"),m=t("../../login/model/SessionData"),y=t("../../other/RoomStyle"),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.node.active=!0,this.initRoot(),this.initEvent(),this.refresh()},e.prototype.initRoot=function(){this._btnThis=cc.find("Button",this.node).getComponent(cc.Button),this._icon=cc.find("Mask/Icon",this.node).getComponent(cc.Sprite),this._nameLabel=cc.find("Name",this.node).getComponent(cc.Label),this._sexAgeBg=cc.find("Layout/TagSexAge/Bg",this.node),this._sexIcon=cc.find("Layout/TagSexAge/Sex",this.node).getComponent(cc.Sprite),this._ageLabel=cc.find("Layout/TagSexAge/Age",this.node).getComponent(cc.Label),this._ageLabel.node.active=!1,this._tagAdmin=cc.find("Layout/TagAdmin",this.node),this._tagAdminLabel=cc.find("Layout/TagAdmin/Label",this.node).getComponent(cc.Label),this._tagOnMic=cc.find("Layout/TagOnMic",this.node),this._tagVip=cc.find("Layout/TagVip",this.node),this._vipBg=cc.find("Layout/TagVip/Bg",this.node),this._tagVipLabel=cc.find("Layout/TagVip/Label",this.node).getComponent(cc.Label)},e.prototype.initEvent=function(){var t=this;u.UIEventCenter.ButtonEvent(this._btnThis,function(){return t.onBtnThisClick()})},e.prototype.onBtnThisClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return h.default.Green(h.ClogKey.UI,"OnlineInfoItem onBtnThisClick"),m.Session.BanBan.UId==this.data.UId?(h.default.Green(h.ClogKey.UI,"OnlineInfoItem \u70b9\u51fb\u81ea\u5df1"),[2]):(f.ActionSheetController.SetOnline(this.data),p.UIManager.CloseUI(d.UIRoomAdmin),[2])})})},e.prototype.refresh=function(){this.refreshIcon(),this.refreshSexIcon(),this.refreshAgeLabel(),this.refreshTagAdmin(),this.refreshTagOnMic(),this.refreshTagVip(),this.refreshNameLabel()},e.prototype.refreshNameLabel=function(){this._nameLabel.string=c.StringLimit(this.data.Name,16)},e.prototype.refreshIcon=function(){var t=s.SS.ImageUrlProxy+this.data.Icon;a.UIUtil.LoadRemoteImage(t,this._icon)},e.prototype.refreshSexIcon=function(){switch(this.data.Sex){case l.EnumSex.Unknow:return void(this._sexIcon.node.active=!1);case l.EnumSex.Female:return a.UIUtil.ChangeSprite("T_Com_Female",this._sexIcon),void(this._sexAgeBg.color=new cc.Color(255,100,255,255));case l.EnumSex.Male:return a.UIUtil.ChangeSprite("T_Com_Male",this._sexIcon),void(this._sexAgeBg.color=new cc.Color(75,110,255,255))}},e.prototype.refreshAgeLabel=function(){this._ageLabel.string=this.data.Age.toString()},e.prototype.refreshTagAdmin=function(){switch(this.data.Role){case l.EnumPurview.Createor:return this._tagAdmin.active=!0,void(this._tagAdminLabel.string="\u623f\u4e3b");case l.EnumPurview.Admin:return this._tagAdmin.active=!0,void(this._tagAdminLabel.string="\u7ba1\u7406");default:this._tagAdmin.active=!1}},e.prototype.refreshTagOnMic=function(){this._tagOnMic.active=0!=this.data.Mic},e.prototype.refreshTagVip=function(){this.data.Vip<=0?this._tagVip.active=!1:(this._tagVip.active=!0,this._vipBg.color=y.RoomStyle.VipColor(this.data.Vip),this._tagVipLabel.string=this.data.Vip.toString())},e}(cc.Component);n.OnlineInfoItem=g,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/StringUtil":"StringUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../../actionSheet/controller/ActionSheetController":"ActionSheetController","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","../../other/RoomStyle":"RoomStyle","./UIRoomAdmin":"UIRoomAdmin"}],PlatformApi:[function(t,e,n){"use strict";cc._RF.push(e,"5baa1U3sC5NIbZqxGPpSBu3","PlatformApi"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./platform/WechatPlatform"),r=t("./platform/WebPlatform"),i=t("./platform/QQPlatform"),a=t("../global/BaseEnum"),s=t("../global/SS"),l=function(){function t(){this._platform=null}return Object.defineProperty(t.prototype,"Platform",{get:function(){if(!this._platform)switch(s.SS.CurPlatform){case a.EnumPlatform.WEB:this._platform=new r.WebPlatform;break;case a.EnumPlatform.QQ:this._platform=new i.QQPlatform;break;case a.EnumPlatform.WECHAT:this._platform=new o.WechatPlatform}return this._platform},enumerable:!0,configurable:!0}),t}();n._PlatformApi=l,n.PlatformApi=new l,cc._RF.pop()},{"../global/BaseEnum":"BaseEnum","../global/SS":"SS","./platform/QQPlatform":"QQPlatform","./platform/WebPlatform":"WebPlatform","./platform/WechatPlatform":"WechatPlatform"}],PlayerComponent:[function(t,e,n){"use strict";cc._RF.push(e,"d2663CnDj5Ktog5bgsCbSNN","PlayerComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../../other/EnumCenter"),s=t("../entity/Player"),l=t("./BaseComponent"),c=t("../model/GameUserData"),u=t("../../room/controller/RoomController"),h=cc._decorator,f=h.ccclass,p=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._playerLeft=null,e._playerRight=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.Init=function(){this.initRoot(),this.initData(),this.initEvent(),this.InitComplete()},e.prototype.Reset=function(){},e.prototype.SetPlayerLeftData=function(t){this._playerLeft.SetData(t)},e.prototype.SetPlayerRightData=function(t){this._playerRight.SetData(t)},e.prototype.initRoot=function(){this._playerLeft=cc.find("PlayerLeft",this.node).addComponent(s.default),this._playerRight=cc.find("PlayerRight",this.node).addComponent(s.default),u.RoomController.GameSeat1Pos=this._playerLeft.node.parent.convertToWorldSpaceAR(this._playerLeft.node.getPosition()),u.RoomController.GameSeat2Pos=this._playerRight.node.parent.convertToWorldSpaceAR(this._playerRight.node.getPosition())},e.prototype.initData=function(){var t=u.RoomController.GetHasPlayerSeatData();t.length<2||(this._playerLeft.Init(c.GameUserData.FromRoomSeatData(t[0])),this._playerRight.Init(c.GameUserData.FromRoomSeatData(t[1])))},e.prototype.initEvent=function(){i.SS.EventCenter.on(a.EnumGameMessageType.StartTurn,this.onTurnChange,this),i.SS.EventCenter.on(a.EnumGameMessageType.NextTurn,this.onTurnChange,this)},e.prototype.removeEvent=function(){i.SS.EventCenter.off(a.EnumGameMessageType.StartTurn,this.onTurnChange,this),i.SS.EventCenter.off(a.EnumGameMessageType.NextTurn,this.onTurnChange,this)},e.prototype.onTurnChange=function(){0===u.RoomController.CurRoom.GetCurrentPosition()?(this._playerLeft.ShowLight(),this._playerRight.HideLight()):(this._playerRight.ShowLight(),this._playerLeft.HideLight())},e=r([f],e)}(l.default));n.default=p,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../entity/Player":"Player","../model/GameUserData":"GameUserData","./BaseComponent":"BaseComponent"}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"b2ac188EH5D07GcDMnchDu5","Player");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../../base/script/frame/ui/UIUtil"),l=t("../../common/controller/http/HttpApi"),c=t("../../../base/script/global/SS"),u=t("../../../base/script/util/StringUtil"),h=t("../../../base/script/frame/ui/UIManager"),f=t("../../userDetail/controller/UserDetailController"),p=t("../../userDetail/view/UIUserDetail"),d=t("../../../base/script/frame/clog/Clog"),m=t("../../emoji/controller/EmojiController"),y=t("../../other/EventCommond"),g=t("../../room/controller/RoomController"),C=cc._decorator,_=C.ccclass,v=(C.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._head=null,e._labNickName=null,e._labAge=null,e._sprSex=null,e._nodeLight=null,e._nodeFemale=null,e._nodeMale=null,e.gameUserData=null,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.onDisable=function(){this.removeEvent()},e.prototype.initRoot=function(){this._head=cc.find("HeadMask/Head",this.node).getComponent(cc.Sprite),this._labNickName=cc.find("LabNickName",this.node).getComponent(cc.Label),this._nodeLight=cc.find("Light",this.node),this._nodeFemale=cc.find("Sex/Female",this.node),this._nodeMale=cc.find("Sex/Male",this.node),this._emoji=cc.find("Emoji",this.node).getComponent(cc.Animation),this._headFrame=cc.find("HeadFrame",this.node).getComponent(cc.Sprite),this._emoji.node.active=!1,this._emoji.on("finished",this.onEmojiFinished,this)},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClickHead,this),c.SS.EventCenter.on(y.EventCommond.UIPlayerEmoji,this.onEmoji,this),c.SS.EventCenter.on(y.EventCommond.UIRoomRefresh,this.refreshHeadFrame,this)},e.prototype.removeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClickHead,this),c.SS.EventCenter.off(y.EventCommond.UIPlayerEmoji,this.onEmoji,this),c.SS.EventCenter.off(y.EventCommond.UIRoomRefresh,this.refreshHeadFrame,this)},e.prototype.SetData=function(t){this.Init(t)},e.prototype.Init=function(t){if(this.gameUserData=t,this._labNickName.string=u.StringLimitForce(this.gameUserData.Name,12),this._nodeFemale.active=0===this.gameUserData.Sex,this._nodeMale.active=1===this.gameUserData.Sex,!l.default.TestSwitch){var e=c.SS.ImageUrlProxy+this.gameUserData.HeadUrl;s.UIUtil.LoadRemoteImage(e,this._head)}},e.prototype.Reset=function(){this.HideLight()},e.prototype.ShowLight=function(){this._nodeLight.active=!0,this._nodeLight.stopAllActions(),cc.tween(this._nodeLight).by(1,{angle:-180}).repeatForever().start()},e.prototype.HideLight=function(){this._nodeLight.stopAllActions(),this._nodeLight.active=!1},e.prototype.refreshHeadFrame=function(){if(this.gameUserData){var t=g.RoomController.GetGameSeat(this.gameUserData.SeatId);if(null!=t.HeadFrameIcon){this._headFrame.node.active=!0;var e="https://res-yqwsq.oclkj.com/game/commonres/item/icon/"+t.HeadFrameIcon;s.UIUtil.LoadRemoteImage(e,this._headFrame)}else this._headFrame.node.active=!1}},e.prototype.onClickHead=function(){f.UserDetailController.TargetUserId=this.gameUserData.Id,h.UIManager.OpenUI(p.UIUserDetail)},e.prototype.onEmoji=function(t){return i(this,void 0,void 0,function(){var e,n=this;return a(this,function(o){return this.gameUserData&&t.position==this.gameUserData.Position?(d.default.Green(d.ClogKey.UI,"onEmoji, emojiInfo:"+JSON.stringify(t)),this._emoji.node.active=!0,e=this._emoji.getComponent(cc.Sprite),m.EmojiController.CreatePlaceClip(t.emoji,function(o,r){return i(n,void 0,void 0,function(){return a(this,function(n){if("SpriteFrame"==o)e.spriteFrame=r,e.node.scale=.8;else{for(e.spriteFrame=null,e.node.scale=t.emoji.SeatScale;this._emoji.getClips().length>0;)this._emoji.removeClip(this._emoji.getClips()[0],!0);r&&(this._emoji.addClip(r,t.emoji.Id),this._emoji.play(t.emoji.Id))}return[2]})})}),[2]):[2]})})},e.prototype.onEmojiFinished=function(){this._emoji.node.active=!1},e=r([_],e)}(cc.Component));n.default=v,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/StringUtil":"StringUtil","../../common/controller/http/HttpApi":"HttpApi","../../emoji/controller/EmojiController":"EmojiController","../../other/EventCommond":"EventCommond","../../room/controller/RoomController":"RoomController","../../userDetail/controller/UserDetailController":"UserDetailController","../../userDetail/view/UIUserDetail":"UIUserDetail"}],PowerComponent:[function(t,e,n){"use strict";cc._RF.push(e,"3a60fZMANtIVYC64DC5FYlX","PowerComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/global/SS"),i=t("../../other/EnumCenter"),a=t("./BaseComponent"),s=t("../controller/GameDataController"),l=t("../../room/controller/RoomController"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._powerValue=null,e._powerBallArm=null,e}return o(e,t),e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.InitComplete()},e.prototype.Reset=function(){this._powerValue.fillRange=0,this._powerBallArm.y=0},e.prototype.initRoot=function(){this._powerValue=cc.find("PowerValue",this.node).getComponent(cc.Sprite),this._powerBallArm=cc.find("Mask/PowerBallArm",this.node)},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onLoad=function(){},e.prototype.onTouchStart=function(){l.RoomController.IsMyRound()&&r.SS.EventCenter.emit(i.EnumGameMessageType.PowerValueChangeStart)},e.prototype.onTouchMove=function(t){l.RoomController.IsMyRound()&&s.GameDataController.GameState==i.EnumGameState.ReadyToHit&&(this._powerValue.fillRange+=t.getDelta().y/this._powerValue.node.height,this._powerValue.fillRange<-1&&(this._powerValue.fillRange=-1),this._powerValue.fillRange>=0&&(this._powerValue.fillRange=0),r.SS.EventCenter.emit(i.EnumGameMessageType.PowerValueChange,Math.abs(this._powerValue.fillRange)),this._powerBallArm.y=-340*Math.abs(this._powerValue.fillRange))},e.prototype.onTouchEnd=function(){l.RoomController.IsMyRound()&&s.GameDataController.GameState==i.EnumGameState.ReadyToHit&&(r.SS.EventCenter.emit(i.EnumGameMessageType.PowerValueChangeEnd,Math.abs(this._powerValue.fillRange)),this._powerValue.fillRange=0,this._powerBallArm.y=0)},e.prototype.onTouchCancel=function(){l.RoomController.IsMyRound()&&s.GameDataController.GameState==i.EnumGameState.ReadyToHit&&(r.SS.EventCenter.emit(i.EnumGameMessageType.PowerValueChangeEnd,Math.abs(this._powerValue.fillRange)),this._powerValue.fillRange=0,this._powerBallArm.y=0)},e}(a.default);n.default=c,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../controller/GameDataController":"GameDataController","./BaseComponent":"BaseComponent"}],QQData:[function(t,e,n){"use strict";cc._RF.push(e,"e00d788ffNDxqS+8KUB9fEj","QQData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){void 0===t&&(t=null),this.SessionKey="",null!=t&&(this.SessionKey=t.session_key)}}();n.QQData=o,cc._RF.pop()},{}],QQPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"ced6cfqv3VP7I+yG9GMyydf","QQPlatform");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./BasePlatform"),i=t("../../global/SS"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Login=function(){return new Promise(function(t){console.warn("qq login"),i.qq.login({success:function(e){console.warn("qq login success",e),e.errMsg.endsWith(":ok")?t({code:e.code}):t(e.errMsg)},fail:function(e){console.warn("qq login error",e),t("qq\u767b\u5f55\u5931\u8d25")}})})},e.prototype.GetUserInfo=function(){return new Promise(function(t){i.qq.getUserInfo({withCredentials:!0,success:function(e){e.errMsg.endsWith(":ok")?t(e):t(e.errMsg)},fail:function(e){t("\u83b7\u53d6qq\u7528\u6237\u4fe1\u606f\u5931\u8d25")}})})},e.prototype.GetUserDataPath=function(){return i.qq.env.USER_DATA_PATH},e.prototype.Access=function(t){var e=i.qq.getFileSystemManager();try{return e.accessSync(t),!0}catch(t){return!1}},e.prototype.MakeDir=function(t){var e=i.qq.getFileSystemManager();try{return e.mkdirSync(t),!0}catch(t){return!1}},e.prototype.ReadDir=function(t){try{return i.qq.getFileSystemManager().readdirSync(t)}catch(t){return[]}},e.prototype.RemoveDir=function(t){var e=i.qq.getFileSystemManager();try{return e.rmdirSync(t,!0),!0}catch(t){return!1}},e.prototype.WriteFile=function(t,e){var n=i.qq.getFileSystemManager();try{return n.writeFileSync(t,e,"utf-8"),!0}catch(t){return!1}},e.prototype.ReadFile=function(t){var e="";try{e=i.qq.getFileSystemManager().readFileSync(t,"utf-8")}catch(e){console.warn("readFile "+t+" error",JSON.stringify(e))}return e},e.prototype.RemoveFile=function(t){var e=i.qq.getFileSystemManager();try{return e.unlinkSync(t),!0}catch(t){return!1}},e.prototype.SetStorage=function(t,e){try{return i.qq.setStorageSync(t,e),!0}catch(t){return!1}},e.prototype.GetStorage=function(t){try{return i.qq.getStorageSync(t)}catch(t){return""}},e.prototype.RemoveStorage=function(t){try{return i.qq.removeStorageSync(t),!0}catch(t){return!1}},e}(r.BasePlatform);n.QQPlatform=a,cc._RF.pop()},{"../../global/SS":"SS","./BasePlatform":"BasePlatform"}],QQSystemInfo:[function(t,e,n){"use strict";cc._RF.push(e,"5203fkjjdlIr6YdFvmKCKrV","QQSystemInfo"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){this.StatusBarHeight=t.statusBarHeight,this.ScreenHeight=t.screenHeight}}();n.QQSystemInfo=o,cc._RF.pop()},{}],QQUtils:[function(t,e,n){"use strict";cc._RF.push(e,"18487lQfDRGrYEF5+Pi8SRt","QQUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return Object.defineProperty(t,"Ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!0,configurable:!0}),t.prototype.doRequest=function(t,e,n,o,r){var i=window.qq;return!!i&&(i.request({header:{"content-type":"application/x-www-form-urlencoded"},method:e,url:t,data:n,success:o,fail:r}),!0)},t}();n.default=o,cc._RF.pop()},{}],RecommendJoinController:[function(t,e,n){"use strict";cc._RF.push(e,"fa450w+Zi1CPaYHj4Zd0tgB","RecommendJoinController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/api/http/Xhr"),a=t("../model/RecommendRoomData"),s=function(){function t(){}return t.GetRecommend=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o,s,l,c;return r(this,function(r){switch(r.label){case 0:return t=new i.XhrUrl("xiyou/recommendRooms").Url,[4,i.default.GetJson(t)];case 1:if(n=r.sent(),!n.success)return e(!1),[2];for(o=n.data,this.AllRecommendRoom=new Array,s=0;s<o.rooms.length;s++)l=o.rooms[s],c=new a.RecommendRoomData(l),this.AllRecommendRoom.push(c);return e(!0),[2]}})})})]})})},t}();n.RecommendJoinController=s,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../model/RecommendRoomData":"RecommendRoomData"}],RecommendJoinItem:[function(t,e,n){"use strict";cc._RF.push(e,"b667dGnzy5HjYuigxiS9eLR","RecommendJoinItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/util/UIEventCenter"),s=t("../../../base/script/frame/clog/Clog"),l=t("../../room/controller/RoomController"),c=t("../../../base/script/frame/ui/UIUtil"),u=t("../../other/EnumCenter"),h=t("../../../base/script/global/SS"),f=t("../../../base/script/util/StringUtil"),p=t("../../common/view/UILoading"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.initRoot(),this.initEvent(),this.refreshAll()},e.prototype.initRoot=function(){this._icon=cc.find("IconMask/Icon",this.node).getComponent(cc.Sprite),this._sex=cc.find("Sex",this.node).getComponent(cc.Sprite),this._tagBg=cc.find("Layout/Tag/Bg",this.node).getComponent(cc.Sprite),this._tagLabel=cc.find("Layout/Tag/Label",this.node).getComponent(cc.Label),this._roomNameLabel=cc.find("Layout/RoomName",this.node).getComponent(cc.Label),this._creatorNameLabel=cc.find("CreatorName",this.node).getComponent(cc.Label),this._btnJoin=cc.find("BtnJoin",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;a.UIEventCenter.ButtonEvent(this._btnJoin,function(){return t.onBtnJoinClick()})},e.prototype.refreshAll=function(){this.refreshCreatorIocn(),this.refreshCreatorName(),this.refreshRoomName(),this.refreshSex(),this.refreshTag()},e.prototype.refreshRoomName=function(){this._roomNameLabel.string=f.StringLimit(this.data.Name,10)},e.prototype.refreshSex=function(){switch(this.data.Sex){case u.EnumSex.Unknow:return void(this._sex.node.active=!1);case u.EnumSex.Female:return void c.UIUtil.ChangeSprite("T_Com_Female",this._sex);case u.EnumSex.Male:return void c.UIUtil.ChangeSprite("T_Com_Male",this._sex)}},e.prototype.refreshTag=function(){this._tagLabel.string=this.data.Type},e.prototype.refreshCreatorName=function(){this._creatorNameLabel.string=this.data.UserName},e.prototype.refreshCreatorIocn=function(){var t=h.SS.ImageUrlProxy+this.data.Icon;c.UIUtil.LoadRemoteImage(t,this._icon)},e.prototype.onBtnJoinClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return s.default.Trace(s.ClogKey.UI,"onBtnJoinClick"),l.RoomController.OnJoinRoomId=this.data.RoomId,l.RoomController.OnJoinPassword="",p.UILoading.Open(),[4,l.RoomController.JoinRoom()];case 1:return t.sent(),p.UILoading.Close(),[2]}})})},e}(cc.Component);n.RecommendJoinItem=d,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/StringUtil":"StringUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../../common/view/UILoading":"UILoading","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController"}],RecommendRoomData:[function(t,e,n){"use strict";cc._RF.push(e,"3d3b7mSNv1JS6lreWGIpBuB","RecommendRoomData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){null!=t&&(this.RoomId=t.rid,this.Name=t.name,this.Type=t.type,this.Icon=t.icon,this.UserName=t.username,this.Sex=t.sex)}}();n.RecommendRoomData=o,cc._RF.pop()},{}],RemoteIconConfig:[function(t,e,n){"use strict";cc._RF.push(e,"c970bZyOqpMhZgf3I8tVGFD","RemoteIconConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.ImagePreFix="https://xs-image-proxy.oss-cn-hangzhou.aliyuncs.com/static/mini/room/",t.IconHot=t.ImagePreFix+"room_hot.png",t.IconBack=t.ImagePreFix+"back.png",t.IconGift=t.ImagePreFix+"gift.png",t.IconEmote=t.ImagePreFix+"emote.png",t.IconMessage=t.ImagePreFix+"message.png",t.IconWaitBoss=t.ImagePreFix+"boss.png",t.IconSelected=t.ImagePreFix+"selected.png",t.IconMute=t.ImagePreFix+"mute.png",t.IconMuteSelected=t.ImagePreFix+"mute_selected.png",t.IconJoinMic=t.ImagePreFix+"join_mic.png",t.IconInfo=t.ImagePreFix+"info.png",t}();n.RemoteIconUrl=o,cc._RF.pop()},{}],Report:[function(t,e,n){"use strict";cc._RF.push(e,"5d7f2MBmXVPT4MPXwknC2uu","Report");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../api/http/Xhr"),a=t("../../../../script/login/model/SessionData"),s=t("../../frame/storage/LocalStorage"),l=t("../../global/SS"),c=t("../../../../script/xiyou/xiyouSDK/utils/md5"),u=t("../../global/SystemInfoManager"),h=t("../../frame/clog/Clog"),f=function(){function t(){}return Object.defineProperty(t,"s4",{get:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"guid",{get:function(){return this.platform+this.s4+this.s4+"-"+this.s4+"-"+this.s4+"-"+this.s4+"-"+this.s4+this.s4},enumerable:!0,configurable:!0}),Object.defineProperty(t,"mac",{get:function(){return null==this._mac&&(this._mac=s.LocalStorageUtil.GetString("mac",null),null!=this._mac&&""!=this._mac||(this._mac=this.guid,s.LocalStorageUtil.SetString("mac",this._mac))),this._mac},enumerable:!0,configurable:!0}),Object.defineProperty(t,"platform",{get:function(){return l.SS.CurPlatformStr},enumerable:!0,configurable:!0}),Object.defineProperty(t,"sid",{get:function(){if(null==this._sid&&(this._sid=s.LocalStorageUtil.GetString("sid",null),null==this._sid)){var t=(this.ct+"555_"+this.guid).toString();this._sid=(new c.default).hex_md5(t),s.LocalStorageUtil.SetString("sid",this._sid)}return this._sid},enumerable:!0,configurable:!0}),Object.defineProperty(t,"son",{get:function(){return null==this._son&&(this._son=s.LocalStorageUtil.GetNumber("son",0),this._son++,s.LocalStorageUtil.SetNumber("son",this._son)),this._son},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ct",{get:function(){return Math.floor((new Date).getTime()/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"reportBootUrl",{get:function(){return"https://log.iambanban.com/xs"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"reportVersionUrl",{get:function(){return"https://api.iambanban.com/cloud/uversion"},enumerable:!0,configurable:!0}),t.Boot=function(t,e){return o(this,void 0,void 0,function(){var e,n,o;return r(this,function(r){switch(r.label){case 0:return e=u.SystemInfoManager.CurSystemInfo.system.split(" "),n=e.length>1?e[1]:"1.0.0",o=new i.XhrUrl(this.reportBootUrl).Query({key:"ct",value:this.ct.toString()}).Query({key:"sid",value:this.sid}).Query({key:"son",value:this.son.toString()}).Query({key:"mt",value:u.SystemInfoManager.CurSystemInfo.model}).Query({key:"sys",value:u.SystemInfoManager.IsIOS?"ios":"android"}).Query({key:"syv",value:n}).Query({key:"mac",value:this.mac}).Query({key:"ch",value:l.SS.CurPlatformStr+"_xiyou"}).Query({key:"pname",value:"im."+l.SS.CurAppName+".minigame."+l.SS.CurPlatformStr}).Query({key:"ver",value:l.SS.Version}).Query({key:"jv",value:"1.0.0.0"}).Query({key:"uid",value:a.Session.BanBan.UId?a.Session.BanBan.UId.toString():""}).Query({key:"tm",value:"0"}).Query({key:"tp",value:t}).Query({key:"net",value:""}).Query({key:"idfa",value:""}).Url,h.default.Trace(h.ClogKey.Net,"Report Boot url="+o),[4,i.default.GetJson(o)];case 1:return r.sent(),[2]}})})},Object.defineProperty(t,"localStorageVerionUrl",{get:function(){return null==this._localStorageVerionUrl&&(this._localStorageVerionUrl=s.LocalStorageUtil.GetString("reportVersion",null)),this._localStorageVerionUrl},set:function(t){this._localStorageVerionUrl=t,s.LocalStorageUtil.SetString("reportVersion",t)},enumerable:!0,configurable:!0}),t.Version=function(){return o(this,void 0,void 0,function(){var t,e,n;return r(this,function(o){switch(o.label){case 0:if(t=u.SystemInfoManager.CurSystemInfo.system.split(" "),e=t.length>1?t[1]:"1.0.0",n=new i.XhrUrl(this.reportVersionUrl).Query({key:"version",value:l.SS.Version}).Query({key:"jversion",value:"2.0.0.0"}).Query({key:"platform",value:u.SystemInfoManager.CurSystemInfo.platform}).Query({key:"channel",value:l.SS.CurPlatformStr+"_xiyou"}).Query({key:"mac",value:this.mac}).Query({key:"idfa",value:u.SystemInfoManager.CurSystemInfo.model}).Query({key:"syv",value:e}).Query({key:"imei",value:""}).Query({key:"oaid",value:""}).Query({key:"pname",value:"im."+l.SS.CurAppName+".minigame."+l.SS.CurPlatformStr}).Query({key:"simulator",value:"devtools"==u.SystemInfoManager.CurSystemInfo.platform?"1":"0"}).Query({key:"size",value:u.SystemInfoManager.CurSystemInfo.screenWidth+"*"+u.SystemInfoManager.CurSystemInfo.screenHeight}).Query({key:"pixelRatio",value:""+(u.SystemInfoManager.CurSystemInfo.pixelRatio||"")}).Query({key:"root",value:"0"}).Url,h.default.Trace(h.ClogKey.Net,"Report Version url="+n),null==this.localStorageVerionUrl)this.localStorageVerionUrl=n;else if(this.localStorageVerionUrl==n)return[2];return[4,i.default.GetJson(n)];case 1:return o.sent(),[2]}})})},t._mac=null,t._sid=null,t._son=null,t._localStorageVerionUrl=null,t}();n.Report=f,cc._RF.pop()},{"../../../../script/login/model/SessionData":"SessionData","../../../../script/xiyou/xiyouSDK/utils/md5":"md5","../../api/http/Xhr":"Xhr","../../frame/clog/Clog":"Clog","../../frame/storage/LocalStorage":"LocalStorage","../../global/SS":"SS","../../global/SystemInfoManager":"SystemInfoManager"}],ResManager:[function(t,e,n){"use strict";cc._RF.push(e,"509179zF3RP/rL6wbvaUxEy","ResManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../util/StringUtil"),r=t("../clog/Clog"),i=function(){function t(){this.isPreReleseMap=new Map}return t.prototype.getUrlByName=function(t){return window.ResourcesPath.hasOwnProperty(t)?window.ResourcesPath[t]:t},t.prototype.LoadRes=function(t,e,n){var r=this.getUrlByName(t);o.IsNullOrEmpty(r)||cc.loader.loadRes(r,e,n)},t.prototype.Release=function(t){var e=this.getUrlByName(t);o.IsNullOrEmpty(e)||cc.loader.release(e)},t.prototype.addReleaseRes=function(t,e){if(this.isPreReleseMap[t]&&this.isPreReleseMap[t].length>0){var n=this.isPreReleseMap[t];this.isResAdded(t,e)||n.push(e)}else this.isPreReleseMap[t]=[],this.isPreReleseMap[t].push(e)},t.prototype.removeReleaseRes=function(t){this.isPreReleseMap[t]&&this.isPreReleseMap[t].length>0&&(this.isPreReleseMap[t]=[])},t.prototype.releaseResByTag=function(t){if(this.isPreReleseMap[t]&&this.isPreReleseMap[t].length>0){for(var e=0;e<this.isPreReleseMap[t].length;e++){var n=this.isPreReleseMap[t][e];r.default.Trace(r.ClogKey.UI,n),this.Release(n)}this.removeReleaseRes(t)}},t.prototype.isResAdded=function(t,e){if(this.isPreReleseMap[t]&&this.isPreReleseMap[t].length>0)for(var n=0;n<this.isPreReleseMap[t].length;n++){if(this.isPreReleseMap[t][n]==e)return!0}return!1},t}();n.ResManager=new i,cc._RF.pop()},{"../../util/StringUtil":"StringUtil","../clog/Clog":"Clog"}],ResUtil:[function(t,e,n){"use strict";cc._RF.push(e,"b802dMjyflH1ZKP76jr+sSL","ResUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../clog/Clog"),r=t("../../util/StringUtil"),i=t("./ResManager"),a=function(){function t(){}return t.prototype.SetHeadIcon=function(t,e){null!=e?r.CheckNetUrl(t)?this.LoadNetImage(t,e):this.ChangeSprite(t,e):o.default.Error("iconSprite is null ")},t.prototype.LoadNetImage=function(t,e){if(r.IsNullOrEmpty(t))o.default.Warn(o.ClogKey.Res,"LoadNetImg Path Error:"+t);else if(r.CheckNetUrl(t)){var n=t.lastIndexOf("/"),i=t.slice(0,n)+"/0";cc.loader.load({url:i,type:"jpg"},function(t,n){if(t)o.default.Warn(o.ClogKey.Res,"LoadNetImg load error,error:"+t);else if(null!=e.node){var r=new cc.SpriteFrame(n);e.spriteFrame=r}else o.default.Error("LoadNetImg load error>>>>>>>>obj.node==null")})}},t.prototype.ChangeSprite=function(t,e){null!=e&&(r.IsNullOrEmpty(t)?o.default.Error("ChangeSprite name is Empty!"):null!=e.spriteFrame&&e.spriteFrame.name==t||i.ResManager.LoadRes(t,cc.SpriteFrame,function(n,r){n?o.default.Error("ChangeSprite Error!, name:"+t+",err"+JSON.stringify(n)):e.isValid&&(e.spriteFrame=r)}))},t}();n.ResUtil=new a,cc._RF.pop()},{"../../util/StringUtil":"StringUtil","../clog/Clog":"Clog","./ResManager":"ResManager"}],RoomAdminController:[function(t,e,n){"use strict";cc._RF.push(e,"ff21ezn2eZCLo0gh+HDmDyU","RoomAdminController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/api/http/Xhr"),a=t("../../room/controller/RoomController"),s=t("../model/RoomAdminData"),l=t("../../../base/script/frame/clog/Clog"),c=t("../../other/EnumCenter"),u=t("../../common/view/UIToast"),h=function(){function t(){}return t.GetRoomOnlineInfo=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o,c,u,h;return r(this,function(r){switch(r.label){case 0:return t=new i.XhrUrl("room/online").Url,n={rid:a.RoomController.CurRoom.RoomId.toString()},[4,i.default.PostJson(t,n)];case 1:if(o=r.sent(),!o.success)return e(!1),[2];for(c=o.data,this.AllOnlineInfo=new Array,u=0;u<c.length;u++)h=c[u],this.AllOnlineInfo.push(new s.RoomOlineData(h));return l.default.Trace(l.ClogKey.Net,"this.AllOnlineInfo="+JSON.stringify(this.AllOnlineInfo)),e(!0),[2]}})})})]})})},t.GetRoomAdminInfo=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o,c,h,f,p;return r(this,function(r){switch(r.label){case 0:return t=new i.XhrUrl("room/admins").Url,n={rid:a.RoomController.CurRoom.RoomId.toString()},[4,i.default.PostJson(t,n)];case 1:if(o=r.sent(),!o.success)return c=o.msg,u.UIToast.Show(c),e(!1),[2];for(h=o.data,this.AllAdminInfo=new Array,f=0;f<h.length;f++)p=h[f],this.AllAdminInfo.push(new s.RoomAdminData(p));return l.default.Trace(l.ClogKey.Net,"this.AllAdminInfo="+JSON.stringify(this.AllAdminInfo)),e(!0),[2]}})})})]})})},t.SetRoomAdmin=function(t,e){return o(this,void 0,Promise,function(){var n=this;return r(this,function(s){return[2,new Promise(function(s){return o(n,void 0,void 0,function(){var n,o,l;return r(this,function(r){switch(r.label){case 0:return n=new i.XhrUrl("room/setAdmin").Url,o={rid:a.RoomController.CurRoom.RoomId.toString(),uid:t.toString(),admin:e==c.EnumPurview.SuperAdmin?"1":"0",op:"add"},[4,i.default.PostJson(n,o)];case 1:return l=r.sent(),l.success?(l.data,s(!0),[2]):(s(!1),[2])}})})})]})})},t.CanelRoomAdmin=function(t,e){return o(this,void 0,Promise,function(){var n=this;return r(this,function(s){return[2,new Promise(function(s){return o(n,void 0,void 0,function(){var n,o,l;return r(this,function(r){switch(r.label){case 0:return n=new i.XhrUrl("room/setAdmin").Url,o={rid:a.RoomController.CurRoom.RoomId.toString(),uid:t.toString(),admin:e==c.EnumPurview.SuperAdmin?"1":"0",op:"remove"},[4,i.default.PostJson(n,o)];case 1:return l=r.sent(),l.success?(l.data,s(!0),[2]):(s(!1),[2])}})})})]})})},t}();n.RoomAdminController=h,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../common/view/UIToast":"UIToast","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../model/RoomAdminData":"RoomAdminData"}],RoomAdminData:[function(t,e,n){"use strict";cc._RF.push(e,"71c21gARwBIQbtdYtM7dv7F","RoomAdminData");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(t){null!=t&&(this.UId=t.uid,this.Name=t.name,this.Icon=t.icon,this.Sex=t.sex,this.Vip=t.vip,this.OpenId=t.openId)}}();n.RoomAdminData=r;var i=function(t){function e(e){var n=t.call(this)||this;return null==e?n:(n.UId=Number(e.uid),n.Name=e.name,n.Icon=e.icon,n.Sex=e.sex,n.Vip=e.vip,n.Mic=e.mic,n.Role=e.role,n.Age=e.year,n)}return o(e,t),e}(r);n.RoomOlineData=i,cc._RF.pop()},{}],RoomChat:[function(t,e,n){"use strict";cc._RF.push(e,"99fb5TYxxNE75Ht9uWIyTK5","RoomChat");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../other/RoomStyle"),s=t("../../../../base/script/util/UIEventCenter"),l=t("../../../userDetail/controller/UserDetailController"),c=t("../../../../base/script/frame/ui/UIManager"),u=t("../../../userDetail/view/UIUserDetail"),h=t("../../../login/model/SessionData"),f=t("../../../../base/script/frame/ui/UIUtil"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initRoot=function(){this._item=this.node,this._lvIcon=cc.find("LvIcon",this.node),this._lvIconSprite=cc.find("LvIcon",this.node).getComponent(cc.Sprite),this._label=cc.find("Label",this.node).getComponent(cc.RichText),this._label.lineHeight=40,this._emoji=cc.find("Emoji",this.node),this._emojiAnim=cc.find("Emoji/Icon",this.node).getComponent(cc.Animation),this._btn=this.node.getComponent(cc.Button),this._layout=this.node.getComponent(cc.Layout)},e.prototype.Init=function(t){this.initRoot(),this._emoji.active=!1,t.vip<=0?this._lvIcon.active=!1:(this._lvIcon.active=!0,f.UIUtil.ChangeSprite("vip_"+t.vip,this._lvIconSprite)),this.refreshContentLabel(t.name,t.chatStr,t.vip),this.eventLookOtherDetail(t.id)},e.prototype.refreshContentLabel=function(t,e,n){var o=this,r="<b>"+t+"\uff1a<color="+a.RoomStyle.VipColor(n).toHEX("#rrggbb")+">"+e+"</color></>";this._label.string=r,this.scheduleOnce(function(){if(o._label.node.width>616){o._label.maxWidth=n>0?550:616,o._label.enabled=!1,o._label.enabled=!0;var t=o._label.node.height+20;o.node.height=t}else o._label.maxWidth=0,o._label.enabled=!1,o._label.enabled=!0},0)},e.prototype.eventLookOtherDetail=function(t){var e=this;t!=h.Session.BanBan.UId&&s.UIEventCenter.ButtonEvent(this._btn,function(){return r(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return l.UserDetailController.TargetUserId=t,[4,c.UIManager.OpenUI(u.UIUserDetail)];case 1:return e.sent(),[2]}})})})},e}(cc.Component);n.RoomChat=p,cc._RF.pop()},{"../../../../base/script/frame/ui/UIManager":"UIManager","../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../login/model/SessionData":"SessionData","../../../other/RoomStyle":"RoomStyle","../../../userDetail/controller/UserDetailController":"UserDetailController","../../../userDetail/view/UIUserDetail":"UIUserDetail"}],RoomController:[function(t,e,n){"use strict";cc._RF.push(e,"9b07ddahqdL5Lv1rsoRwnNi","RoomController");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/api/http/Xhr"),s=t("../../../base/script/frame/clog/Clog"),l=t("../../../base/script/frame/ui/UIManager"),c=t("../../../base/script/global/SS"),u=t("../../common/controller/heartBeat/RoomHeatBeat"),h=t("../../common/controller/websocket/RoomSocket"),f=t("../../common/controller/websocket/RoomSocketCall"),p=t("../../common/controller/websocket/RoomSocketSync"),d=t("../../common/view/UICommDia"),m=t("../../login/model/SessionData"),y=t("../../newbie/control/NewbieGuildController"),g=t("../../other/EnumCenter"),C=t("../../other/EventCommond"),_=t("../../ready/controller/UIReadyController"),v=t("../../xiyou/controller/XiYouController"),b=t("../model/RoomCreatorData"),S=t("../model/RoomInfoData"),I=t("../model/RoomSeatData"),w=t("./JoinMicController"),R=t("../../game/controller/UIGameController"),E=t("../../../base/script/sdk/thinkingdata/controller/TaContoroller"),U=t("../view/main/UIRoom"),T=t("../../../base/script/util/DecoratorUtil"),B=t("../../match/controller/MatchController"),M=t("../../giftEffect/view/UIGiftEffect"),P=function(){function t(){}return t.GetRemainTime=function(){return this.CurRoom.Counter-this.CurRoom.Now},t.IsMyRound=function(){var t=this.GetSelfGameSeat();return!!t&&this.CurRoom.GetCurrentPosition()===t.BiPosition},t.GetPositionByUserId=function(t){var e=this.Seats.find(function(e){return e.UId==t});return null==e?-1:e.Position},t.GetGamePositionByUserId=function(t){var e=this.Seats.find(function(e){return e.UId==t});return null==e?-1:e.BiPosition},t.GetSelfSeat=function(){return this.Seats.find(function(t){return t.UId==m.Session.BanBan.UId})},t.GetSelfGameSeat=function(){return this.Seats.find(function(t){return t.BiOrigin==m.Session.BanBan.UId})},t.GetOtherPlayerSeat=function(){return this.Seats.find(function(t){return t.UId!==m.Session.BanBan.UId&&t.BiUserStatus!==g.EnumUserStatus.None})},t.GetGameSeat=function(t){return this.Seats.find(function(e){return e.BiPosition===t})},t.IsPlayerSeatFull=function(){var t=0;return this.Seats.forEach(function(e){e.UId===e.BiOrigin&&t++}),2===t},t.GetOnSeatPlayerNum=function(){var t=0;return this.Seats.forEach(function(e){e.UId===e.BiOrigin&&t++}),t},t.GetHasPlayerSeatData=function(){var t=[];return this.Seats.forEach(function(e){e.UId===e.BiOrigin&&t.push(e)}),t},t.JoinRoom=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.OnJoinRoomId?[4,this.httpJoinRoom(!1)]:(s.default.Error("\u623f\u95f4\u53f7\u6709\u8bef"),[2]);case 1:return t.sent()?(l.UIManager.CloseAll(),c.SS.EventCenter=new cc.EventTarget,y.NewbieGuildController.JoinRoomEnd=!0,[2]):[2]}})})},t.httpJoinRoom=function(e){return void 0===e&&(e=!1),r(this,void 0,Promise,function(){var n=this;return i(this,function(o){return[2,new Promise(function(o){return r(n,void 0,void 0,function(){var n,r,u,h,f,p,y,w,T;return i(this,function(i){switch(i.label){case 0:return n=new a.XhrUrl("room/config").Url,r={rid:""+this.OnJoinRoomId,init:e?0:1,password:this.OnJoinPassword},[4,a.default.PostJson(n,r)];case 1:if(u=i.sent(),0==u.success)return(h=u.msg).indexOf("\u88ab\u7981\u6b62\u8fdb\u5165\u8be5\u804a\u5929\u5ba4")>=0?d.UICommDia.Open(h,"\u786e\u5b9a","\u9000\u51fa",function(){v.XiYouController.JumpToXiyou()},function(){v.XiYouController.JumpToXiyou()}):h.indexOf("\u623f\u95f4\u5df2\u5173\u95ed")>=0||h.indexOf("\u623f\u95f4\u4e0d\u5b58\u5728")>=0?c.qq&&c.qq.showModal({title:"\u63d0\u793a",content:"\u623f\u95f4\u4e0d\u5b58\u5728",success:function(t){t.confirm?v.XiYouController.JumpToXiyou():t.cancel&&v.XiYouController.JumpToXiyou()}}):(h.indexOf("\u8bf7\u8f93\u5165\u623f\u95f4\u5bc6\u7801")>=0||h.indexOf("\u623f\u95f4\u5bc6\u7801\u9519\u8bef")>=0)&&c.qq&&c.qq.showModal({title:"\u63d0\u793a",content:"\u623f\u95f4\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5",success:function(t){t.confirm?v.XiYouController.JumpToXiyou():t.cancel&&v.XiYouController.JumpToXiyou()}}),s.default.Trace(s.ClogKey.Net,"HttpJoinRoom room/config errMsg ="+h),o(!1),[2];for(f=u.data,m.Session.BanBan.isSuperAdmin=f.is_super,this.CurRoom=new S.RoomInfo(f.config),f.now&&(this.CurRoom.Now=Number(f.now)),s.default.Trace(s.ClogKey.Net,"HttpJoinRoom CurRoomInfo="+JSON.stringify(this.CurRoom)),f.match&&(B.MatchController.IsCalling=1==f.match.status),s.default.Trace(s.ClogKey.Net,"match = "+f.match),this.Vistors=new Array,w=0;w<f.admins.length;w++)T=f.admins[w],this.Vistors.push(T);for(s.default.Trace(s.ClogKey.Net,"HttpJoinRoom Vistors="+JSON.stringify(this.Vistors)),this.CreateorInfo=new b.RoomCreatorData(f.createor),s.default.Trace(s.ClogKey.Net,"HttpJoinRoom CreateorInfo="+JSON.stringify(this.CreateorInfo)),this.webscoketUrl=f.socket.replace("https://","wss://"),s.default.Trace(s.ClogKey.Net,"HttpJoinRoom WebscoketUrl="+this.webscoketUrl),this.Seats=new Array,w=0;w<f.list.length;w++)p=f.list[w],y=new I.RoomSeatData(p),this.Seats.push(y);for(s.default.Trace(s.ClogKey.Net,"HttpJoinRoom players="+JSON.stringify(this.Seats)),this.Admins=new Array,w=0;w<f.admins.length;w++)T=f.admins[w],this.Admins.push(T);return s.default.Trace(s.ClogKey.Net,"HttpJoinRoom admins="+JSON.stringify(this.Admins)),this.Purview=f.purview,m.Session.BanBan.isSuperAdmin&&(this.Purview=g.EnumPurview.SuperPowerAdmin),[4,this.InitRoomWebSocket()];case 2:return i.sent(),[4,this.GetRoomDescription()];case 3:return i.sent(),e&&(c.SS.EventCenter.emit(C.EventCommond.OnRelink),c.SS.EventCenter.emit(C.EventCommond.UIRoomRefresh)),c.SS.EventCenter.emit(C.EventCommond.UIMicWait),c.SS.EventCenter.emit(C.EventCommond.UIChatCheck),this.autoJoinCreatorPos(),c.SS.EventCenter.emit(g.EnumGameMessageType.GameRoomStateRefresh),E.TaController.JoinRoom(t.CurRoom.RoomId,t.CreateorInfo.UId,t.CurRoom.RoomType,t.CurRoom.RoomTypes,t.CurRoom.Property),o(!0),[4,l.UIManager.OpenUI(U.UIRoom)];case 4:return i.sent(),[4,l.UIManager.OpenUI(M.UIGiftEffect)];case 5:return i.sent(),R.UIGameController.CloseUI(),_.UIReadyController.CloseUI(),this.CurRoom.BiState!==g.EnumGameRoomState.Wait?[3,7]:[4,_.UIReadyController.OpenUI()];case 6:return i.sent(),[3,9];case 7:return[4,R.UIGameController.OpenUI()];case 8:i.sent(),i.label=9;case 9:return[2]}})})})]})})},t.Kickout=function(e,n){return r(this,void 0,void 0,function(){var o,r,s;return i(this,function(i){switch(i.label){case 0:return o=t.Seats.find(function(t){return t.Position==e}),r=new a.XhrUrl("room/kickout").Url,s={rid:""+t.CurRoom.RoomId,uid:o?""+o.UId:"",position:""+e,time:""+n},[4,a.default.PostJson(r,s)];case 1:return i.sent(),[2]}})})},t.SyncRoomRefresh=function(t){if(t){if(cc.js.isString(t)&&(t=JSON.parse(t)),t.config){var e=this.CurRoom.Background!=t.background;if(this.CurRoom.From(t.config),s.default.SkyBlue(s.ClogKey.Net,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011-\u3010config\u3011-\u3010\u5f53\u524d\u623f\u95f4\u4fe1\u606f\u3011>>\n"+JSON.stringify(this.CurRoom)),e&&c.SS.EventCenter.emit(C.EventCommond.UIThemeBackground),2==this.CurRoom.Deleted)return void d.UICommDia.Open("\u8be5\u623f\u95f4\u5df2\u88ab\u5c01","\u786e\u5b9a","\u9000\u51fa",function(){v.XiYouController.JumpToXiyou()},function(){v.XiYouController.JumpToXiyou()})}if(t.now&&(this.CurRoom.Now=Number(t.now)),t.match&&(B.MatchController.IsCalling=1==t.match.status),s.default.Trace(s.ClogKey.Net,"match = "+t.match),c.SS.EventCenter.emit(g.EnumGameMessageType.GameRoomStateRefresh),t.admins){this.Admins=new Array;for(var n=0;n<t.admins.length;n++){var o=t.admins[n];this.Admins.push(o)}s.default.SkyBlue(s.ClogKey.Net,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011-\u3010admins\u3011-\u3010\u623f\u95f4\u7ba1\u7406\u5458\u5217\u8868\u3011>>\n"+JSON.stringify(this.Admins))}if(t.superAdmins){this.SuperAdmins=new Array;for(n=0;n<t.superAdmins.length;n++){o=t.superAdmins[n];this.SuperAdmins.push(o)}s.default.SkyBlue(s.ClogKey.Net,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011-\u3010superAdmins\u3011-\u3010\u623f\u95f4\u63a5\u5f85\u7ba1\u7406\u5458\u5217\u8868\u3011>>\n"+JSON.stringify(this.SuperAdmins))}switch(t.wait&&(s.default.SkyBlue(s.ClogKey.Net,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011-\u3010wait\u3011-\u3010\u6392\u9ea6\u3011>>\n"+JSON.stringify(t.wait)),p.RoomSocketSync.SyncRoomMicWait(t.wait)),this.Purview){case g.EnumPurview.Createor:break;case g.EnumPurview.Admin:case g.EnumPurview.SuperAdmin:this.Admins.indexOf(m.Session.BanBan.UId)<0&&(this.Purview=g.EnumPurview.Normal,s.default.Red(s.ClogKey.Net,"\u3010\u89d2\u8272\u6539\u53d8 admin > Normal"));break;case g.EnumPurview.Normal:this.Admins.indexOf(m.Session.BanBan.UId)>=0&&this.SuperAdmins.indexOf(m.Session.BanBan.UId)<0?(this.Purview=g.EnumPurview.Admin,s.default.Trace(s.ClogKey.Net,"\u3010\u89d2\u8272\u6539\u53d8 Normal > Admin")):this.Admins.indexOf(m.Session.BanBan.UId)>=0&&this.SuperAdmins.indexOf(m.Session.BanBan.UId)>=0&&(this.Purview=g.EnumPurview.SuperAdmin,s.default.Red(s.ClogKey.Net,"\u3010\u89d2\u8272\u6539\u53d8 Normal > SuperAdmin"))}if(m.Session.BanBan.isSuperAdmin&&(this.Purview=g.EnumPurview.SuperPowerAdmin),t.createor&&(this.CreateorInfo=new b.RoomCreatorData(t.createor),s.default.SkyBlue(s.ClogKey.Net,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011-\u3010createor\u3011-\u3010\u623f\u95f4\u521b\u5efa\u8005\u4fe1\u606f\u3011>>\n"+JSON.stringify(this.CreateorInfo))),t.list){this.Seats=new Array;for(n=0;n<t.list.length;n++){var r=t.list[n],i=new I.RoomSeatData(r);this.Seats.push(i)}s.default.SkyBlue(s.ClogKey.Net,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011-\u3010list\u3011-\u3010\u9ea6\u4e0a\u7684\u73a9\u5bb6\u3011>>\n"+JSON.stringify(this.Seats))}if(t._options&&t._options.op)if("kickout"==t._options.op){var a=t._options.uid;if(s.default.Trace(s.ClogKey.Net,"[kickout] target="+a),a==m.Session.BanBan.UId)return void d.UICommDia.Open("\u4f60\u5df2\u88ab\u8e22\u51fa\u623f\u95f4","\u786e\u5b9a","\u9000\u51fa",function(){v.XiYouController.JumpToXiyou()},function(){v.XiYouController.JumpToXiyou()})}c.SS.EventCenter.emit(C.EventCommond.UIRoomRefresh),c.SS.EventCenter.emit(C.EventCommond.UIChatCheck),c.SS.EventCenter.emit(C.EventCommond.UIMicWait)}},t.InitRoomWebSocket=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return s.default.Trace(s.ClogKey.Net,"InitRoomWebSocket"),h.RoomSocket.IsOpen?[2]:[4,h.RoomSocket.OnInit(this.webscoketUrl)];case 1:return t.sent()?(p.RoomSocketSync.Start(),f.RoomSocketCall.JoinChannel(),f.RoomSocketCall.GetHistoryMessages(),f.RoomSocketCall.OnLineNum(),u.RoomHeatBeat.Start(),w.JoinMicController.OpenAgora(),[2]):(s.default.Error("\u521d\u59cb\u5316RoomSocket Error!"),[2])}})})},t.EndBanBanSocket=function(){h.RoomSocket.IsOpen&&(u.RoomHeatBeat.End(),p.RoomSocketSync.End(),h.RoomSocket.ManulClose(),w.JoinMicController.DisposeAgora())},t.autoJoinCreatorPos=function(){if(s.default.Trace(s.ClogKey.UI,"autoJoinCreatorPos RoomInfoManager.Purview="+t.Purview),t.Purview==g.EnumPurview.Createor){var e=t.Seats.find(function(t){return 0==t.Position});e&&!e.HasPlayer&&(s.default.Trace(s.ClogKey.UI,"\u81ea\u52a8\u5750\u623f\u4e3b\u4f4d"),w.JoinMicController.JoinMic(0))}},t.GetRoomDescription=function(){return r(this,void 0,Promise,function(){var t=this;return i(this,function(e){return[2,new Promise(function(e){return r(t,void 0,void 0,function(){var t,n;return i(this,function(o){switch(o.label){case 0:return t=new a.XhrUrl("room/description").Query({key:"rid",value:this.CurRoom.RoomId.toString()}).Url,[4,a.default.GetJson(t)];case 1:return n=o.sent(),n.success?(this.CurRoom.Description=n.data,s.default.Trace(s.ClogKey.Api,"\u83b7\u53d6\u623f\u95f4\u516c\u544a\uff1a"+this.CurRoom.Description),e(!0),[2]):(e(!1),[2])}})})})]})})},t.freezeUser=function(e,n){return r(this,void 0,void 0,function(){var o,r,s;return i(this,function(i){switch(i.label){case 0:return o=t.Seats.find(function(t){return t.Position==e}),r=new a.XhrUrl("room/freezeUser").Url,s={rid:""+t.CurRoom.RoomId,uid:o?""+o.UId:"",position:""+e,time:""+n},[4,a.default.PostJson(r,s)];case 1:return i.sent(),[2]}})})},t.closeRoom=function(t,e){return r(this,void 0,void 0,function(){var n,o;return i(this,function(r){switch(r.label){case 0:return n=new a.XhrUrl("room/forbidden").Url,o={rid:""+t,time:""+e,deleted:"1"},[4,a.default.PostJson(n,o)];case 1:return r.sent(),[2]}})})},t.ChatCheck=function(e){return r(this,void 0,void 0,function(){var n,o;return i(this,function(r){switch(r.label){case 0:return n=new a.XhrUrl("room/displayMessage").Url,o={rid:t.CurRoom.RoomId,display:e?"1":"0"},[4,a.default.PostJson(n,o)];case 1:return r.sent(),[2]}})})},t.OnJoinPassword="",t.Admins=new Array,t.SuperAdmins=new Array,t.MaxPlayerSeatNum=2,o([T.Bind(g.EnumGameMessageType.ChatRoomStateChange)],t,"ChatRoomState",void 0),t}();n.RoomController=P,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../../base/script/sdk/thinkingdata/controller/TaContoroller":"TaContoroller","../../../base/script/util/DecoratorUtil":"DecoratorUtil","../../common/controller/heartBeat/RoomHeatBeat":"RoomHeatBeat","../../common/controller/websocket/RoomSocket":"RoomSocket","../../common/controller/websocket/RoomSocketCall":"RoomSocketCall","../../common/controller/websocket/RoomSocketSync":"RoomSocketSync","../../common/view/UICommDia":"UICommDia","../../game/controller/UIGameController":"UIGameController","../../giftEffect/view/UIGiftEffect":"UIGiftEffect","../../login/model/SessionData":"SessionData","../../match/controller/MatchController":"MatchController","../../newbie/control/NewbieGuildController":"NewbieGuildController","../../other/EnumCenter":"EnumCenter","../../other/EventCommond":"EventCommond","../../ready/controller/UIReadyController":"UIReadyController","../../xiyou/controller/XiYouController":"XiYouController","../model/RoomCreatorData":"RoomCreatorData","../model/RoomInfoData":"RoomInfoData","../model/RoomSeatData":"RoomSeatData","../view/main/UIRoom":"UIRoom","./JoinMicController":"JoinMicController"}],RoomCreatorData:[function(t,e,n){"use strict";cc._RF.push(e,"dd08fRyqRtE17zBI/Fuv0HD","RoomCreatorData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){t&&(this.Name=t.name,this.Icon=t.icon,this.Role=t.role,this.UId=parseInt(t.uid))}}();n.RoomCreatorData=o,cc._RF.pop()},{}],RoomDescription:[function(t,e,n){"use strict";cc._RF.push(e,"604c7jNxjBHWopeKQImmzt+","RoomDescription");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../controller/RoomController"),i=t("../../../../base/script/global/SS"),a=t("../../../other/EventCommond"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initRoot=function(){this._label=cc.find("Label",this.node).getComponent(cc.Label)},e.prototype.initEvent=function(){i.SS.EventCenter.on(a.EventCommond.UIRoomRefresh,this.onRefresh,this)},e.prototype.removeEvent=function(){i.SS.EventCenter.off(a.EventCommond.UIRoomRefresh,this.onRefresh,this)},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.Init=function(){this.initRoot(),this.initEvent(),this._label.string=r.RoomController.CurRoom.Description,this._label.node.color=new cc.Color(180,180,180,255),this._label._forceUpdateRenderData(),this._label.node.width>616?(this._label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this._label.node.width=616,this._label._forceUpdateRenderData()):(this._label.overflow=cc.Label.Overflow.NONE,this._label._forceUpdateRenderData())},e.prototype.onRefresh=function(){this._label.overflow=cc.Label.Overflow.NONE,this._label.string=r.RoomController.CurRoom.Description,this._label.node.color=new cc.Color(180,180,180,255),this._label._forceUpdateRenderData(),this._label.node.width>616?(this._label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this._label.node.width=616,this._label._forceUpdateRenderData()):(this._label.overflow=cc.Label.Overflow.NONE,this._label._forceUpdateRenderData())},e}(cc.Component);n.RoomDescription=s,cc._RF.pop()},{"../../../../base/script/global/SS":"SS","../../../other/EventCommond":"EventCommond","../../controller/RoomController":"RoomController"}],RoomEmoji:[function(t,e,n){"use strict";cc._RF.push(e,"5d552st1dZJw7s/+dVLardV","RoomEmoji");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../base/script/frame/ui/UIUtil"),s=t("../../../../base/script/util/UIEventCenter"),l=t("../../../userDetail/controller/UserDetailController"),c=t("../../../../base/script/frame/ui/UIManager"),u=t("../../../userDetail/view/UIUserDetail"),h=t("../../../login/model/SessionData"),f=t("../../../emoji/controller/EmojiController"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initRoot=function(){this._lvIcon=cc.find("LvIcon",this.node),this._label=cc.find("Label",this.node).getComponent(cc.Label),this._emoji=cc.find("Emoji",this.node),this._emojiAnim=cc.find("Emoji/Icon",this.node).getComponent(cc.Animation),this._btn=this.node.getComponent(cc.Button)},e.prototype.eventLookOtherDetail=function(t){var e=this;t!=h.Session.BanBan.UId&&s.UIEventCenter.ButtonEvent(this._btn,function(){return r(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return l.UserDetailController.TargetUserId=t,[4,c.UIManager.OpenUI(u.UIUserDetail)];case 1:return e.sent(),[2]}})})})},e.prototype.Init=function(t){return r(this,void 0,void 0,function(){var e,n=this;return i(this,function(o){return this.initRoot(),t.vip<=0?this._lvIcon.active=!1:(this._lvIcon.active=!0,a.UIUtil.ChangeSprite("vip_"+t.vip,this._lvIcon.getComponent(cc.Sprite))),this._label.string=t.name+"\uff1a",this._emoji.active=!0,e=this._emojiAnim.getComponent(cc.Sprite),f.EmojiController.CreatePlaceClip(t.emoji,function(o,a){return r(n,void 0,void 0,function(){return i(this,function(n){if("SpriteFrame"==o)e.spriteFrame=a,e.node.scale=.64;else{for(e.spriteFrame=null,e.node.scale=t.emoji.ChatScale;this._emojiAnim.getClips().length>0;)this._emojiAnim.removeClip(this._emojiAnim.getClips()[0],!0);a&&(this._emojiAnim.addClip(a,t.emoji.Id),this._emojiAnim.play(t.emoji.Id).wrapMode=cc.WrapMode.Loop)}return[2]})})}),this.eventLookOtherDetail(t.id),[2]})})},e}(cc.Component);n.RoomEmoji=p,cc._RF.pop()},{"../../../../base/script/frame/ui/UIManager":"UIManager","../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../emoji/controller/EmojiController":"EmojiController","../../../login/model/SessionData":"SessionData","../../../userDetail/controller/UserDetailController":"UserDetailController","../../../userDetail/view/UIUserDetail":"UIUserDetail"}],RoomGiftTip:[function(t,e,n){"use strict";cc._RF.push(e,"646d1SmpJZD0pEXUUTgDuQ9","RoomGiftTip");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../base/script/util/UIEventCenter"),s=t("../../../login/model/SessionData"),l=t("../../../../base/script/frame/ui/UIManager"),c=t("../../../userDetail/view/UIUserDetail"),u=t("../../../userDetail/controller/UserDetailController"),h=t("../../../../base/script/frame/ui/UIUtil"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initRoot=function(){this._lvIcon=cc.find("LvIcon",this.node),this._fromLabel=cc.find("FromLabel",this.node).getComponent(cc.Label),this._toLabel=cc.find("ToLabel",this.node).getComponent(cc.Label),this._giftCountLabel=cc.find("CountLabel",this.node).getComponent(cc.Label),this._btn=this.node.getComponent(cc.Button),this._giftIcon=cc.find("gift/Icon",this.node).getComponent(cc.Sprite)},e.prototype.Init=function(t){this.initRoot(),this._fromLabel.string=t.From.Name,this._toLabel.string=t.To.Name,this._giftCountLabel.string="x"+t.GiftNum;var e="gift_01_"+t.GiftId;h.UIUtil.ChangeSprite(e,this._giftIcon),t.From.Vip<=0?this._lvIcon.active=!1:(this._lvIcon.active=!0,h.UIUtil.ChangeSprite("vip_"+t.From.Vip,this._lvIcon.getComponent(cc.Sprite))),this.eventLookOtherDetail(t.From.UId)},e.prototype.eventLookOtherDetail=function(t){var e=this;t!=s.Session.BanBan.UId&&a.UIEventCenter.ButtonEvent(this._btn,function(){return r(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return u.UserDetailController.TargetUserId=t,[4,l.UIManager.OpenUI(c.UIUserDetail)];case 1:return e.sent(),[2]}})})})},e}(cc.Component);n.RoomGiftTip=f,cc._RF.pop()},{"../../../../base/script/frame/ui/UIManager":"UIManager","../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../login/model/SessionData":"SessionData","../../../userDetail/controller/UserDetailController":"UserDetailController","../../../userDetail/view/UIUserDetail":"UIUserDetail"}],RoomHeatBeat:[function(t,e,n){"use strict";cc._RF.push(e,"23bc7pNGtZKlI6HdOVlKJdw","RoomHeatBeat"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../base/script/frame/clog/Clog"),r=t("../../../room/controller/RoomController"),i=t("../websocket/RoomSocket"),a=t("../websocket/RoomSocketCall"),s=function(){function t(){}return t.Start=function(){var t=this;this.handle=window.setInterval(function(){t.HeatBeat()},1e3*this.heatBeatInterval)},t.End=function(){window.clearInterval(this.handle),this.heatBeatTimer=0},t.OnHeatBeat=function(t){r.RoomController.CurRoom.ServerTimeStamp=t,this.heatBeatTimer=0},t.HeatBeat=function(){if(i.RoomSocket.IsOpen){if(this.heatBeatTimer>=this.lostTimeMax)return this.heatBeatTimer=0,o.default.Error("\u5fc3\u8df3\u4e22\u5931"),void i.RoomSocket.ManulClose();a.RoomSocketCall.HeartBeat(),this.heatBeatTimer+=this.heatBeatInterval}},t.heatBeatInterval=5,t.heatBeatTimer=0,t.lostTimeMax=20,t}();n.RoomHeatBeat=s,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../room/controller/RoomController":"RoomController","../websocket/RoomSocket":"RoomSocket","../websocket/RoomSocketCall":"RoomSocketCall"}],RoomInfoData:[function(t,e,n){"use strict";cc._RF.push(e,"2c3213PK2pDk7j4ohmeiQ2k","RoomInfoData"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../base/script/frame/time/Time"),r=t("../../game/controller/GameDataController"),i=function(){function t(t){if(this.Password="",this.ThemeSwitchBackground=[],this.IsOpenChat=!0,t){if(this.RoomId=parseInt(t.rid),this.RoomName=t.name,this.RoomType=t.type,this.RoomTypes=t.types,this.Mode=t.mode,this.Hot=parseInt(t.online_num),this.Background=t.background,this.Reception=!!t.reception,this.Property=t.property,this.TypeLabel=t.type_label,this.Deleted=t.deleted,t.hasOwnProperty("password")&&(this.Password=t.password),t.themeSwitchBackground){this.ThemeSwitchBackground=[];for(var e=0;e<t.themeSwitchBackground.length;e++){var n=t.themeSwitchBackground[e];this.ThemeSwitchBackground.push(n)}}t.hasOwnProperty("display_message")&&(this.IsOpenChat=Number(t.display_message)>0),t.hasOwnProperty("counter")&&(this.Counter=Number(t.counter)),t.hasOwnProperty("bi_balls")&&(this.BiBalls=t.bi_balls),t.hasOwnProperty("bi_current")&&(this.BiCurrent=t.bi_current),t.hasOwnProperty("bi_state")&&(this.BiState=t.bi_state),t.hasOwnProperty("bi_start")&&(this.BiStart=t.bi_start),t.hasOwnProperty("bi_ball_arm")&&(this.BiBallArm=t.bi_ball_arm),t.hasOwnProperty("bi_shoot_result")&&(this.BiShootResult=t.bi_shoot_result),t.hasOwnProperty("bi_continuous_times")&&(this.BiContinuousTimes=t.bi_continuous_times)}}return Object.defineProperty(t.prototype,"ServerTime",{get:function(){return o.Time.TimestampToTime(1e3*this.ServerTimeStamp)},enumerable:!0,configurable:!0}),t.prototype.GetCurrentPosition=function(){return-1===this.BiCurrent?r.GameDataController.StartBallPosition:this.BiCurrent},t.prototype.From=function(t){if(t.hasOwnProperty("rid")&&(this.RoomId=parseInt(t.rid)),t.hasOwnProperty("name")&&(this.RoomName=t.name),t.hasOwnProperty("type")&&(this.RoomType=t.type),t.hasOwnProperty("types")&&(this.RoomTypes=t.types),t.hasOwnProperty("mode")&&(this.Mode=t.mode),t.hasOwnProperty("online_num")&&(this.Hot=parseInt(t.online_num)),t.hasOwnProperty("background")&&(this.Background=t.background),t.hasOwnProperty("reception")&&(this.Reception=!!t.reception),t.hasOwnProperty("property")&&(this.Property=t.property),t.hasOwnProperty("deleted")&&(this.Deleted=t.deleted),t.hasOwnProperty("description_text")&&(this.Description=t.description_text),t.hasOwnProperty("themeSwitchBackground")){this.ThemeSwitchBackground=[];for(var e=0;e<t.themeSwitchBackground.length;e++){var n=t.themeSwitchBackground[e];this.ThemeSwitchBackground.push(n)}}t.hasOwnProperty("display_message")&&(this.IsOpenChat=Number(t.display_message)>0),t.hasOwnProperty("password")&&(this.Password=t.password),t.hasOwnProperty("counter")&&(this.Counter=Number(t.counter)),t.hasOwnProperty("bi_balls")&&(this.BiBalls=t.bi_balls),t.hasOwnProperty("bi_current")&&(this.BiCurrent=t.bi_current),t.hasOwnProperty("bi_state")&&(this.BiState=t.bi_state),t.hasOwnProperty("bi_start")&&(this.BiStart=t.bi_start),t.hasOwnProperty("bi_ball_arm")&&(this.BiBallArm=t.bi_ball_arm),t.hasOwnProperty("bi_shoot_result")&&(this.BiShootResult=t.bi_shoot_result),t.hasOwnProperty("bi_continuous_times")&&(this.BiContinuousTimes=t.bi_continuous_times)},t}();n.RoomInfo=i,cc._RF.pop()},{"../../../base/script/frame/time/Time":"Time","../../game/controller/GameDataController":"GameDataController"}],RoomKick:[function(t,e,n){"use strict";cc._RF.push(e,"96e33FpbDJD/oXhIIsSyr+x","RoomKick");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initRoot=function(){this._label=cc.find("Label",this.node).getComponent(cc.Label)},e.prototype.Init=function(t){this.initRoot(),this._label.string=t,this._label.node.color=new cc.Color(180,180,180,255),this._label._forceUpdateRenderData(),this._label.node.width>616?(this._label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this._label.node.width=616,this._label._forceUpdateRenderData()):(this._label.overflow=cc.Label.Overflow.NONE,this._label._forceUpdateRenderData())},e}(cc.Component);n.RoomKick=r,cc._RF.pop()},{}],RoomSeatData:[function(t,e,n){"use strict";cc._RF.push(e,"0e10b9u5yJAMIwcGNBIxU5h","RoomSeatData"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../base/script/frame/clog/Clog"),r=t("../controller/RoomController"),i=t("../../other/EnumCenter"),a=t("../controller/JoinMicController"),s=function(){function t(t){t&&(this.Position=parseInt(t.position),this.UId=parseInt(t.uid),this.OpenId=parseInt(t.uid)?t.openid:0,this._isLock=0!=t.lock,this.IsForbidden=0!=t.forbidden,this.Counter=parseInt(t.counter),this.Name=t.name,this.Icon=t.icon,this.Role=t.role,t.head_frame&&t.head_frame.icon?this.HeadFrameIcon=t.head_frame.icon:this.HeadFrameIcon=null,t.hasOwnProperty("bi_status")&&(this.BiUserStatus=t.bi_status),t.hasOwnProperty("bi_position")&&(this.BiPosition=Number(t.bi_position)),t.hasOwnProperty("bi_role")&&(this.BiRole=t.bi_role),t.hasOwnProperty("bi_decor")&&(this.BiDecor=t.bi_decor),t.hasOwnProperty("bi_holed_balls")&&(this.BiHoledBalls=t.bi_holed_balls),t.hasOwnProperty("bi_origin")&&(this.BiOrigin=Number(t.bi_origin)))}return Object.defineProperty(t.prototype,"IsLock",{get:function(){return r.RoomController.CurRoom.Mode!=i.EnumRoomMode.Lock&&this._isLock},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"HasPlayer",{get:function(){return 0!==this.UId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsCreator",{get:function(){return this.UId==r.RoomController.CreateorInfo.UId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsHost",{get:function(){return 0==this.BiPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsAdmin",{get:function(){return r.RoomController.Admins.indexOf(this.UId)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsOpenMicrophone",{get:function(){return o.default.Green(o.ClogKey.UI,"\u3010IsOpenMicrophone\u3011,JoinMicController.MicMute:"+a.JoinMicController.MicMute+",this.HasPlayer:"+this.HasPlayer+",this.IsLock:"+this.IsLock+",this.IsForbidden:"+this.IsForbidden),!a.JoinMicController.MicMute&&this.HasPlayer&&!this.IsLock&&!this.IsForbidden},enumerable:!0,configurable:!0}),t}();n.RoomSeatData=s,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../other/EnumCenter":"EnumCenter","../controller/JoinMicController":"JoinMicController","../controller/RoomController":"RoomController"}],RoomSeatItem:[function(t,e,n){"use strict";cc._RF.push(e,"376a86e5LJIfpFCLGFxjhXE","RoomSeatItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../base/script/util/UIEventCenter"),s=t("../../../../base/script/frame/ui/UIUtil"),l=t("../../../../base/script/global/SS"),c=t("../../controller/RoomController"),u=t("../../../../base/script/frame/clog/Clog"),h=t("../../../other/EventCommond"),f=t("../../../../base/script/api/agora/AgoraBase"),p=t("../../../../base/script/api/AgoraApi"),d=t("../../../actionSheet/controller/ActionSheetController"),m=t("../../../emoji/controller/EmojiController"),y=t("../../../other/EnumCenter"),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"data",{get:function(){var t=this;return c.RoomController.Seats.find(function(e){return e.Position==t._position})},enumerable:!0,configurable:!0}),e.prototype.Init=function(t){this._position=t,this.node.active=!0,this.initRoot(),this.initEvent()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._headIcon=cc.find("Mask/Icon",this.node).getComponent(cc.Sprite),this._iconAdd=cc.find("Mask/Add",this.node).getComponent(cc.Sprite),this._nameLabel=cc.find("NameLabel",this.node).getComponent(cc.Label),this._infoRoot=cc.find("Info",this.node),this._info=cc.find("Info/Label",this.node).getComponent(cc.Label),this._btnThis=cc.find("Btn",this.node).getComponent(cc.Button),this._emoji=cc.find("Emoji",this.node).getComponent(cc.Animation),this._onSpeak=cc.find("OnSpeak",this.node),this._onSpeakAnim=cc.find("OnSpeak/Bg",this.node).getComponent(cc.Animation),this._onCountDown=cc.find("Mask/OnCountdown",this.node),this._onCountDownLabel=cc.find("Mask/OnCountdown/Bg/Label",this.node).getComponent(cc.Label),this._micMuteIcon=cc.find("micMute",this.node),this._emoji.node.active=!1,this._emoji.on("finished",this.onEmojiFinished,this)},e.prototype.initEvent=function(){var t=this;a.UIEventCenter.ButtonEvent(this._btnThis,function(){return t.OnBtnThisClick()}),l.SS.EventCenter.on(h.EventCommond.UIPlayerEmoji,this.onEmoji,this),l.SS.EventCenter.on(h.EventCommond.UIRoomMicBt,this.refreshOnSpeak,this),l.SS.EventCenter.on(f.EventAgora.EventVoIPChatSpeakersChanged,this.refreshOnSpeak,this),this.schedule(this.refreshCountdown.bind(this),1,cc.macro.REPEAT_FOREVER,1)},e.prototype.removeEvent=function(){l.SS.EventCenter.off(h.EventCommond.UIPlayerEmoji,this.onEmoji,this),l.SS.EventCenter.off(h.EventCommond.UIRoomMicBt,this.refreshOnSpeak,this),l.SS.EventCenter.off(f.EventAgora.EventVoIPChatSpeakersChanged,this.refreshOnSpeak,this),this.unschedule(this.refreshCountdown.bind(this))},e.prototype.onEmoji=function(t){return r(this,void 0,void 0,function(){var e,n=this;return i(this,function(o){return t.position!=this.data.Position?[2]:(u.default.Green(u.ClogKey.UI,"onPlayerEmoji, emojiInfo:"+JSON.stringify(t)),this._emoji.node.active=!0,e=this._emoji.getComponent(cc.Sprite),m.EmojiController.CreatePlaceClip(t.emoji,function(o,a){return r(n,void 0,void 0,function(){return i(this,function(n){if("SpriteFrame"==o)e.spriteFrame=a,e.node.scale=.8;else{for(e.spriteFrame=null,e.node.scale=t.emoji.SeatScale;this._emoji.getClips().length>0;)this._emoji.removeClip(this._emoji.getClips()[0],!0);a&&(this._emoji.addClip(a,t.emoji.Id),this._emoji.play(t.emoji.Id))}return[2]})})}),[2])})})},e.prototype.onEmojiFinished=function(){this._emoji.node.active=!1},e.prototype.OnBtnThisClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return d.ActionSheetController.OnClickPosition(this._position),[2]})})},e.prototype.Refresh=function(){this.refreshSeatPlayerIcon(),this.refreshSeatPlayerName(),this.refreshSeatPlayerInfo(),this.refreshOnSpeak(),this.refreshCountdown()},e.prototype.Reset=function(){this._iconAdd.node.active=!0,s.UIUtil.ChangeSprite("T_Com_Seat_Normal",this._iconAdd),this._headIcon.node.active=!1,this._nameLabel.node.active=!1,this._onSpeak.active=!1,this._onCountDown.active=!1},e.prototype.refreshSeatPlayerIcon=function(){if(this.data.HasPlayer){var t=l.SS.ImageUrlProxy+this.data.Icon;return s.UIUtil.LoadRemoteImage(t,this._headIcon),this._iconAdd.node.active=!1,void(this._headIcon.node.active=!0)}return this.data.IsLock?(this._iconAdd.node.active=!0,s.UIUtil.ChangeSprite("T_Com_Seat_Lock",this._iconAdd),void(this._headIcon.node.active=!1)):c.RoomController.CurRoom.Mode==y.EnumRoomMode.Lock?(this._iconAdd.node.active=!0,s.UIUtil.ChangeSprite("T_Com_Seat_Boss",this._iconAdd),void(this._headIcon.node.active=!1)):(this._iconAdd.node.active=!0,s.UIUtil.ChangeSprite("T_Com_Seat_Normal",this._iconAdd),void(this._headIcon.node.active=!1))},e.prototype.refreshSeatPlayerName=function(){this.data.HasPlayer||(this._nameLabel.node.active=!1)},e.prototype.refreshSeatPlayerInfo=function(){this._infoRoot.active=!1,this.data.IsForbidden&&this.data.HasPlayer?this._micMuteIcon.active=!0:this._micMuteIcon.active=!1},e.prototype.refreshOnSpeak=function(){var t=this,e=p.AgoraApi.Agora.SpeakingUids.find(function(e){return e==t.data.OpenId});this._onSpeak.active=!!e},e.prototype.refreshCountdown=function(){if(this.data.HasPlayer){var t=Math.trunc((new Date).getTime()/1e3);t<this.data.Counter?(this._onCountDown.active=!0,this._onCountDownLabel.string=Math.max(0,this.data.Counter-t)+"s"):this._onCountDown.active&&(this._onCountDown.active=!1)}else this._onCountDown.active=!1},e}(cc.Component);n.RoomSeatItem=g,cc._RF.pop()},{"../../../../base/script/api/AgoraApi":"AgoraApi","../../../../base/script/api/agora/AgoraBase":"AgoraBase","../../../../base/script/frame/clog/Clog":"Clog","../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../base/script/global/SS":"SS","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../actionSheet/controller/ActionSheetController":"ActionSheetController","../../../emoji/controller/EmojiController":"EmojiController","../../../other/EnumCenter":"EnumCenter","../../../other/EventCommond":"EventCommond","../../controller/RoomController":"RoomController"}],RoomSeats:[function(t,e,n){"use strict";cc._RF.push(e,"6dbafpyp91LP7LLOCg+tuj3","RoomSeats");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./RoomSeatItem"),i=t("../../controller/RoomController"),a=t("../../../other/EventCommond"),s=t("../../../../base/script/global/SS"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){e.Instance=this,this.initRoot(),this.initEvent(),this.refreshAllSeat()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initEvent=function(){s.SS.EventCenter.on(a.EventCommond.UIRoomRefresh,this.refreshAllSeat,this),s.SS.EventCenter.on(a.EventCommond.UIRoomReset,this.resetAllSeat,this)},e.prototype.removeEvent=function(){s.SS.EventCenter.off(a.EventCommond.UIRoomRefresh,this.refreshAllSeat,this),s.SS.EventCenter.off(a.EventCommond.UIRoomReset,this.resetAllSeat,this)},e.prototype.initRoot=function(){this._seatGrid=cc.find("Grid",this.node),this._createrRoot=cc.find("Creater",this.node),this._item=cc.find("Item",this.node),this._item.active=!1,this.allSeat=new Map;for(var t=0;t<i.RoomController.Seats.length;t++){var e=i.RoomController.Seats[t],n=cc.instantiate(this._item);0==e.Position?n.setParent(this._createrRoot):n.setParent(this._seatGrid);var o=n.addComponent(r.RoomSeatItem);o.Init(e.Position),this.allSeat.set(t,o)}},e.prototype.refreshAllSeat=function(){this.allSeat.forEach(function(t){return t.Refresh()})},e.prototype.resetAllSeat=function(){this.allSeat.forEach(function(t){return t.Reset()})},e.prototype.GetSeatItemPostion=function(t){var e=this.allSeat.get(t);if(e){var n=cc.v2(e.node.position.x,e.node.position.y);return e.node.parent.convertToWorldSpaceAR(n)}return null},e}(cc.Component);n.RoomSeats=l,cc._RF.pop()},{"../../../../base/script/global/SS":"SS","../../../other/EventCommond":"EventCommond","../../controller/RoomController":"RoomController","./RoomSeatItem":"RoomSeatItem"}],RoomSettingController:[function(t,e,n){"use strict";cc._RF.push(e,"44aecF2HFxF+aTw5cO0k8ry","RoomSettingController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../room/controller/RoomController"),a=t("../../../base/script/api/http/Xhr"),s=t("../../common/view/UIToast"),l=t("../../common/controller/checkContent/CheckContentController"),c=function(){function t(){}return t.RoomInfoSetting=function(t,e,n){return void 0===n&&(n=""),o(this,void 0,Promise,function(){var c=this;return r(this,function(u){return[2,new Promise(function(u){return o(c,void 0,void 0,function(){var o,c,h;return r(this,function(r){switch(r.label){case 0:return[4,l.CheckContentController.CheckContent(t)];case 1:return r.sent()?[4,l.CheckContentController.CheckContent(e)]:(s.UIToast.Show("\u623f\u95f4\u540d\u79f0\u4e0d\u5408\u6cd5"),u(!1),[2]);case 2:return r.sent()?(i.RoomController.CurRoom.Password=n,o=new a.XhrUrl("room/create").Url,c={rid:i.RoomController.CurRoom.RoomId.toString(),name:t,type:"music",description:e,clientVersion:3,password:n},[4,a.default.PostJson(o,c)]):(s.UIToast.Show("\u623f\u95f4\u516c\u544a\u4e0d\u5408\u6cd5"),u(!1),[2]);case 3:return h=r.sent(),h.success?(h.data,i.RoomController.CurRoom.Password=n,u(!0),[2]):(s.UIToast.Show(h.msg),u(!1),[2])}})})})]})})},t.ChangeTheme=function(t){return void 0===t&&(t=""),o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,l,c;return r(this,function(r){switch(r.label){case 0:return e=""+i.RoomController.CurRoom.RoomId,o=new a.XhrUrl("room/setting").Query({key:"rid",value:e}).Url,l={rid:e,type:"background",value:t},[4,a.default.PostJson(o,l)];case 1:return c=r.sent(),c.success?(c.data,n(!0),[2]):(s.UIToast.Show(c.msg),n(!1),[2])}})})})]})})},t}();n.RoomSettingController=c,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../common/controller/checkContent/CheckContentController":"CheckContentController","../../common/view/UIToast":"UIToast","../../room/controller/RoomController":"RoomController"}],RoomSocketCall:[function(t,e,n){"use strict";cc._RF.push(e,"e66f8VXmmZAib7MpOO4n2qP","RoomSocketCall"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./RoomSocket"),r=t("../../../../base/script/frame/clog/Clog"),i=t("../../../room/controller/RoomController"),a=t("../../../login/model/SessionData"),s=function(){function t(){}return t.JoinChannel=function(){var t={op:"joinChannel",data:{rid:i.RoomController.CurRoom.RoomId.toString(),token:a.Session.BanBan.Token}};o.RoomSocket.Call(t,function(t){i.RoomController.CurRoom.VoiceToken=t,r.default.Trace(r.ClogKey.Net,"JoinChannel resp , voiceToken:"+i.RoomController.CurRoom.VoiceToken)})},t.GetHistoryMessages=function(){var t={op:"getHistoryMessages",data:{rid:i.RoomController.CurRoom.RoomId.toString()}};o.RoomSocket.Call(t,function(t){r.default.Trace(r.ClogKey.Net,"GetHistoryMessages , data:"+t)})},t.OnLineNum=function(){var t={op:"onlineNum",data:{rid:i.RoomController.CurRoom.RoomId.toString()}};o.RoomSocket.Call(t,function(t){r.default.Trace(r.ClogKey.Net,"OnLineNum , data:"+JSON.stringify(t))})},t.HeartBeat=function(){o.RoomSocket.Call({op:"ping",data:null},null)},t}();n.RoomSocketCall=s,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../login/model/SessionData":"SessionData","../../../room/controller/RoomController":"RoomController","./RoomSocket":"RoomSocket"}],RoomSocketDataType:[function(t,e,n){"use strict";cc._RF.push(e,"5cd304zek9O0b3NaDg74dTd","RoomSocketDataType"),cc._RF.pop()},{}],RoomSocketInput:[function(t,e,n){"use strict";cc._RF.push(e,"2f878V8d0FDlL7IqYkowGLR","RoomSocketInput"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./../../../other/EnumCenter"),r=t("./../../../../base/script/global/SS"),i=t("./RoomSocket"),a=t("../../../room/controller/RoomController"),s=t("../../../login/model/SessionData"),l=t("../http/HttpApi"),c=function(){function t(){}return t.InputChat=function(t){var e={vip_new:s.Session.XiYou.VIP,title:s.Session.BanBan.Title,defends:0,is_guess:0,position:a.RoomController.GetPositionByUserId(s.Session.BanBan.UId)},n={op:"sendMessage",data:{content:t,user:{id:s.Session.BanBan.UId,name:s.Session.BanBan.Name},extra:JSON.stringify(e)}};i.RoomSocket.Input(n)},t.InputEmoji=function(t){var e={vip_new:s.Session.XiYou.VIP,title:s.Session.BanBan.Title,emote:t.Key,emote_sender:s.Session.BanBan.UId,emote_position:a.RoomController.GetPositionByUserId(s.Session.BanBan.UId),emote_data:t.Data},n={op:"sendMessage",data:{content:t.Name,user:{id:s.Session.BanBan.UId,name:s.Session.BanBan.Name},extra:JSON.stringify(e)}};i.RoomSocket.Input(n)},t.InputSetBallArm=function(t){if(l.default.TestSwitch)r.SS.EventCenter.emit(o.EnumWsSync.BallArm,t);else{var e={op:"billiardSetBallArm",data:{rid:a.RoomController.CurRoom.RoomId.toString(),ball_arm:{power:t.power,angle:t.angle}}};i.RoomSocket.Input(e)}},t.InputMoveCueBall=function(t){var e={op:"billiardMoveCueBall",data:{rid:a.RoomController.CurRoom.RoomId.toString(),cue_ball:{location:{x:t.x,y:t.y}}}};i.RoomSocket.Input(e)},t}();n.RoomSocketInput=c,cc._RF.pop()},{"../../../login/model/SessionData":"SessionData","../../../room/controller/RoomController":"RoomController","../http/HttpApi":"HttpApi","./../../../../base/script/global/SS":"SS","./../../../other/EnumCenter":"EnumCenter","./RoomSocket":"RoomSocket"}],RoomSocketSync:[function(t,e,n){"use strict";cc._RF.push(e,"b5c950vzLBE04P0wRGudeSz","RoomSocketSync"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../base/script/frame/clog/Clog"),r=t("../../../../base/script/global/SS"),i=t("../../../emoji/controller/EmojiController"),a=t("../../../giftEffect/controller/GiftEffectController"),s=t("../../../giftEffect/model/GiftEffectData"),l=t("../../../micWait/controller/MicWaitController"),c=t("../../../newbie/control/NewbieGuildController"),u=t("../../../other/EnumCenter"),h=t("../../../other/EventCommond"),f=t("../../../room/controller/JoinMicController"),p=t("../../../room/controller/RoomController"),d=t("../../../topic/controller/TopicController"),m=function(){function t(){}return t.Start=function(){},t.End=function(){},t.OnSyncRoomOnline=function(t){o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 OnSyncRoomOnline num:"+t),p.RoomController.CurRoom.Hot=t,r.SS.EventCenter.emit(h.EventCommond.UIRoomOnline)},t.SyncRoomChat=function(t){if(o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncRoomChat data:"+JSON.stringify(t)),t.hasOwnProperty("user")){var e={chatStr:t.content,id:t.user.id,name:t.user.name,vip:t.extra.vip_new};r.SS.EventCenter.emit(h.EventCommond.UIRoomChat,e)}},t.SyncRoomWellcome=function(t){o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncRoomWellcome data:"+JSON.stringify(t));var e={id:t.extra.uid,name:t.extra.name,vip:t.extra.vip_new};r.SS.EventCenter.emit(h.EventCommond.UIRoomWellcome,e)},t.SyncRoomSendGift=function(t){o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncRoomSendGift data:"+JSON.stringify(t));var e=new s.GiftEffectData(t);a.GiftEffectController.GiftEffectList.push(e),r.SS.EventCenter.emit(h.EventCommond.OnShowGiftEffect),r.SS.EventCenter.emit(h.EventCommond.OnShowGiftCountTip,e),r.SS.EventCenter.emit(h.EventCommond.OnSendGiftWordTip,e)},t.SyncRoomKickInfo=function(t){o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncRoomKickInfo data:"+JSON.stringify(t));var e=t.content;r.SS.EventCenter.emit(h.EventCommond.OnRoomKick,e)},t.SyncRoomEmoji=function(t){o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncRoomEmoji data:"+JSON.stringify(t));var e=t.extra.emote_position,n=i.EmojiController.GetEmojiByKeyData(t.extra.emote,t.extra.emote_data);if(null!=n)if(-1!=e)if(e>=0&&e<=8){a={position:e,emoji:n};r.SS.EventCenter.emit(h.EventCommond.UIPlayerEmoji,a)}else;else{var a={id:t.user.id,name:null==t.user.name?"test":t.user.name,emoji:n,vip:t.extra.vip_new};r.SS.EventCenter.emit(h.EventCommond.UIVistorEmoji,a)}},t.SyncRoomTopic=function(t){if(o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncRoomTopic data:"+JSON.stringify(t)),cc.js.isString(t)&&(t=JSON.parse(t)),t.hasOwnProperty("topics")&&t.hasOwnProperty("status")){for(var e=[],n=t.topics,r=0;r<n.length;r++)e.push(Number(n[r].id));d.TopicController.RefreshTopic(e,Number(t.status)>0)}},t.SyncRoomMicWait=function(t){if(o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncRoomMicWait data:"+JSON.stringify(t)),t){for(var e=[],n=0;n<t.length;n++){var r=Number(t[n]);e.push(r)}l.MicWaitController.RefreshMicWaitListData(e)}},t.SyncUserNewbieGuild=function(t){o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncUserNewbieGuild data:"+JSON.stringify(t));var e=JSON.parse(t);e instanceof Array&&e.length>0&&(c.NewbieGuildController.IsNeedShowGuild=!0,c.NewbieGuildController.serverGuilds=e,c.NewbieGuildController.InitNewbieGuild())},t.SyncRoomRefresh=function(t){o.default.Green(o.ClogKey.Net,"\u3010\u63a8\u9001\u3011 SyncRoomRefresh data:"+JSON.stringify(t)),p.RoomController.SyncRoomRefresh(t),f.JoinMicController.SyncMicrophone()},t.SyncData=function(e,n){if(cc.js.isString(n)&&(n=JSON.parse(n)),e===u.EnumWsSync.BallArm||e===u.EnumWsSync.CueBall?o.default.Purple(o.ClogKey.FrameSync,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011---\u3010"+e+"\u3011>>\n"+JSON.stringify(n)):o.default.Purple(o.ClogKey.Net,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011---\u3010"+e+"\u3011>>\n"+JSON.stringify(n)),"room.Online"==e||"Room.Online"==e){var i=n.num;o.default.Purple(o.ClogKey.Net,"\u3010\u5237\u65b0\u623f\u95f4\u4eba\u6570\u3011<< "+i),t.OnSyncRoomOnline(i)}else"room.refersh"==e?(o.default.Purple(o.ClogKey.Net,"\u3010\u5237\u65b0\u623f\u95f4\u6570\u636e\u3011 << "+JSON.stringify(n)),n._options&&n._options.op&&n._options.data&&o.default.Orange(o.ClogKey.Net,"\n<< \u3010\u63a8\u9001\u6d88\u606f\u3011-\u3010"+e+"\u3011-\u3010"+n._options.op+"\u3011>>\n"+JSON.stringify(n._options.data)),t.SyncRoomRefresh(n)):"topic.refersh"==e?(o.default.Purple(o.ClogKey.Net,"\u3010\u5237\u65b0\u8bdd\u9898\u5361\u3011<< "+n),t.SyncRoomTopic(n)):"user.guide"==e&&(o.default.Purple(o.ClogKey.Net,"\u3010\u65b0\u624b\u5f15\u5bfc\u3011<< "+n),t.SyncUserNewbieGuild(n));r.SS.EventCenter.emit(e,n)},t}();n.RoomSocketSync=m,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../../base/script/global/SS":"SS","../../../emoji/controller/EmojiController":"EmojiController","../../../giftEffect/controller/GiftEffectController":"GiftEffectController","../../../giftEffect/model/GiftEffectData":"GiftEffectData","../../../micWait/controller/MicWaitController":"MicWaitController","../../../newbie/control/NewbieGuildController":"NewbieGuildController","../../../other/EnumCenter":"EnumCenter","../../../other/EventCommond":"EventCommond","../../../room/controller/JoinMicController":"JoinMicController","../../../room/controller/RoomController":"RoomController","../../../topic/controller/TopicController":"TopicController"}],RoomSocket:[function(t,e,n){"use strict";cc._RF.push(e,"a736cYbn7lGZ5Whj8yKzmr8","RoomSocket");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../other/msgpack"),a=t("./RoomSocketSync"),s=t("../../../../base/script/frame/clog/Clog"),l=t("../heartBeat/RoomHeatBeat"),c=t("../../view/UIToast"),u=function(){function t(){}return t.OnInit=function(t){return o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){e.linkIndex++,s.default.Purple(s.ClogKey.Net,"RoomSocket >>> OnInit >>>  url:"+t+", linkIndex:"+e.linkIndex),e.ws=new WebSocket(t),e.ws.binaryType="arraybuffer",e.ws.onopen=function(){s.default.Trace(s.ClogKey.Net,"RoomSocket open success! url:"+t),e.RerlinkTimer>0&&(s.default.Trace(s.ClogKey.Net,"Websocket \u521d\u59cb\u5316\u6210\u529f\uff0c\u91cd\u8fde\u6b21\u6570\u6e05\u96f6"),e.RerlinkTimer=0),n(!0)},e.ws.onmessage=function(t){var n=i.decode(new Uint8Array(t.data));if(Number.isInteger(n))l.RoomHeatBeat.OnHeatBeat(n);else{if(cc.js.isString(n)?s.default.Purple(s.ClogKey.FrameSync,"[\u6e90\u6570\u636e\uff0cjsonString] << "+n):s.default.Purple(s.ClogKey.FrameSync,"[\u6e90\u6570\u636e\uff0cjson] << "+JSON.stringify(n)),n.hasOwnProperty("s")&&n.hasOwnProperty("i"))return s.default.Purple(s.ClogKey.Net,"\u3010\u8bf7\u6c42\u54cd\u5e94\u3011"),void e.onCallResp(n);if(n.hasOwnProperty("content")&&n.hasOwnProperty("type")){var o=n.content;switch(n.type){case"RC:TxtMsg":if(o.hasOwnProperty("extra")){var r=o.extra;if(o.hasOwnProperty("content")){var u=o.content;if(r.type&&"notify"==r.type&&u.indexOf("\u6b22\u8fce")>=0)return s.default.Purple(s.ClogKey.Net,"\u3010\u6b22\u8fce\u3011 << "+JSON.stringify(o)),void a.RoomSocketSync.SyncRoomWellcome(o);if(r.type&&"package"==r.type&&u.indexOf("\u6253\u8d4f")>=0)return s.default.Purple(s.ClogKey.Net,"\u3010\u6253\u8d4f\u3011 << "+JSON.stringify(o)),void a.RoomSocketSync.SyncRoomSendGift(o);if(r.type&&"system"==r.type&&u.indexOf("\u8bf7\u51fa\u623f\u95f4")>=0)return s.default.Purple(s.ClogKey.Net,"\u3010\u8bf7\u51fa\u623f\u95f4\u3011 << "+JSON.stringify(o)),void a.RoomSocketSync.SyncRoomKickInfo(o);if(r.type&&"system"==r.type&&u.indexOf("\u5185\u5bb9\u8fdd\u89c4")>=0)return void c.UIToast.Show(u)}return r.hasOwnProperty("emote")?(s.default.Purple(s.ClogKey.Net,"\u3010\u8868\u60c5\u3011<< "+JSON.stringify(o)),void a.RoomSocketSync.SyncRoomEmoji(o)):(s.default.Purple(s.ClogKey.Net,"\u3010\u6587\u5b57\u804a\u5929\u3011 << "+JSON.stringify(o)),void a.RoomSocketSync.SyncRoomChat(o))}break;case"RC:CmdMsg":if(o.hasOwnProperty("name")&&o.hasOwnProperty("data")){var h=o.name,f=o.data;return void a.RoomSocketSync.SyncData(h,f)}}}}},e.ws.onerror=function(){n(!1),s.default.Error("RoomSocket: ws link error !")},e.ws.onclose=function(){s.default.Error("RoomSocket: ws link close !")}})]})})},t.OnSend=function(t){this.ws.send(t)},Object.defineProperty(t,"IsOpen",{get:function(){return null!=this.ws&&this.ws.readyState==WebSocket.OPEN},enumerable:!0,configurable:!0}),t.ManulClose=function(){this.IsOpen&&this.ws.close()},t.Call=function(e,n){if(t.IsOpen){var o=JSON.stringify({op:e.op,data:null==e.data?{}:e.data,index:this.sendIndex});s.default.Purple(s.ClogKey.Net,"[send message call] >> "+o),t.OnSend(o);var r=this.sendIndex;this.CallMap.set(r,n),this.sendIndex++}},t.onCallResp=function(t){var e=t.i;0!=t.s?this.CallMap.has(e)?(this.CallMap.get(e)(t.data),this.CallMap.delete(e)):s.default.Trace(s.ClogKey.Net,"[onCallResp] can not find func by i"):s.default.Error("[recive message s is false]")},t.Input=function(e){if(t.IsOpen){var n=JSON.stringify({op:e.op,data:null==e.data?{}:e.data,index:this.sendIndex});s.default.Purple(s.ClogKey.FrameSync,"[send message input] >> "+n),t.OnSend(n)}},t.RerlinkTimer=0,t.linkIndex=0,t.sendIndex=1,t.CallMap=new Map,t}();n.RoomSocket=u,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../other/msgpack":"msgpack","../../view/UIToast":"UIToast","../heartBeat/RoomHeatBeat":"RoomHeatBeat","./RoomSocketSync":"RoomSocketSync"}],RoomStyle:[function(t,e,n){"use strict";cc._RF.push(e,"8d9b2E6dpRO5a95SFQodCDy","RoomStyle"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.VipColor=function(t){return t>=60?(new cc.Color).fromHEX("#FFEC18"):t>=40?(new cc.Color).fromHEX("#FFCE38"):t>=20?(new cc.Color).fromHEX("#9c27FF"):t>=16?(new cc.Color).fromHEX("#FF52F1"):t>=1?(new cc.Color).fromHEX("#72CE76"):(new cc.Color).fromHEX("#FFFFFF")},t}();n.RoomStyle=o,cc._RF.pop()},{}],RoomTopic:[function(t,e,n){"use strict";cc._RF.push(e,"33dfc2BRAFK3LXVMx6hiaUd","RoomTopic");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/global/SS"),i=t("../../other/EventCommond"),a=t("../controller/TopicController"),s=t("../../../base/script/util/UIEventCenter"),l=t("../../room/controller/RoomController"),c=t("../../other/EnumCenter"),u=t("../../actionSheet/controller/ActionSheetController"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._currentTopic=null,e._pendingLabel=null,e._btnClose=null,e._btnNext=null,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.static=function(){this.onRefreshTopic()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._currentTopic=cc.find("Content/Current",this.node).getComponent(cc.Label),this._pendingLabel=cc.find("Content/Pending",this.node).getComponent(cc.Label),this._btnClose=cc.find("Content/CloseBtn",this.node).getComponent(cc.Button),this._btnNext=cc.find("Content/NextBtn",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;s.UIEventCenter.ButtonEvent(this._btnClose,function(){return t.onClickClose()}),s.UIEventCenter.ButtonEvent(this._btnNext,function(){return t.onClickNext()}),r.SS.EventCenter.on(i.EventCommond.UITopic,this.onRefreshTopic,this)},e.prototype.removeEvent=function(){r.SS.EventCenter.off(i.EventCommond.UITopic,this.onRefreshTopic,this)},e.prototype.onRefreshTopic=function(){var t=l.RoomController.Purview==c.EnumPurview.Createor;this._btnClose.node.active=t,this._btnNext.node.active=t&&a.TopicController.PendingTopicIds.length>1,this._currentTopic.node.y=t?-25:0;var e=a.TopicController.PendingTopicIds.length>0?a.TopicController.getTopicByID(a.TopicController.PendingTopicIds[0]):"\u6682\u65e0\u8bdd\u9898";e.length>15?this._currentTopic.horizontalAlign=cc.Label.HorizontalAlign.LEFT:this._currentTopic.horizontalAlign=cc.Label.HorizontalAlign.CENTER,this._currentTopic.string=e,this._pendingLabel.node.active=t,this._pendingLabel.string=a.TopicController.PendingTopicIds.length>1?a.TopicController.PendingTopicIds.length-1+"\u4e2a\u5f85\u804a":"\u65e0\u5f85\u804a"},e.prototype.onClickClose=function(){u.ActionSheetController.SetCloseTopic()},e.prototype.onClickNext=function(){a.TopicController.NextTopic()},e}(cc.Component);n.RoomTopic=h,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../actionSheet/controller/ActionSheetController":"ActionSheetController","../../other/EnumCenter":"EnumCenter","../../other/EventCommond":"EventCommond","../../room/controller/RoomController":"RoomController","../controller/TopicController":"TopicController"}],RoomWellcome:[function(t,e,n){"use strict";cc._RF.push(e,"0a6f8fFLW1Id6+wKWuPMq9e","RoomWellcome");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../other/RoomStyle"),s=t("../../../../base/script/util/UIEventCenter"),l=t("../../../userDetail/controller/UserDetailController"),c=t("../../../../base/script/frame/ui/UIManager"),u=t("../../../userDetail/view/UIUserDetail"),h=t("../../../login/model/SessionData"),f=t("../../../../base/script/frame/ui/UIUtil"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initRoot=function(){this._lvIcon=cc.find("LvIcon",this.node),this._label=cc.find("Label",this.node).getComponent(cc.Label),this._btn=this.node.getComponent(cc.Button)},e.prototype.eventLookOtherDetail=function(t){var e=this;t!=h.Session.BanBan.UId&&s.UIEventCenter.ButtonEvent(this._btn,function(){return r(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return l.UserDetailController.TargetUserId=t,[4,c.UIManager.OpenUI(u.UIUserDetail)];case 1:return e.sent(),[2]}})})})},e.prototype.Init=function(t){this.initRoot(),this._label.string=t.name,this._label.node.color=a.RoomStyle.VipColor(t.vip),t.vip<=0?this._lvIcon.active=!1:(this._lvIcon.active=!0,f.UIUtil.ChangeSprite("vip_"+t.vip,this._lvIcon.getComponent(cc.Sprite))),this.eventLookOtherDetail(t.id)},e}(cc.Component);n.RoomWellcome=p,cc._RF.pop()},{"../../../../base/script/frame/ui/UIManager":"UIManager","../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../login/model/SessionData":"SessionData","../../../other/RoomStyle":"RoomStyle","../../../userDetail/controller/UserDetailController":"UserDetailController","../../../userDetail/view/UIUserDetail":"UIUserDetail"}],SS:[function(t,e,n){"use strict";cc._RF.push(e,"6107fhklndOr41vzyDFGaxy","SS"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./BaseEnum");n.qq=window.qq,n.wx=window.wx,n.AgoraRTC=window.AgoraRTC,n.ResourcesPath=window.ResourcesPath||{};var r=function(){function t(){}return Object.defineProperty(t,"ImageUrlProxy",{get:function(){return"https://xs-image-proxy.oss-cn-hangzhou.aliyuncs.com/"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ImageUrlUnProxy",{get:function(){return"https://xs-image.oss-cn-hangzhou.aliyuncs.com/"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CurPlatformStr",{get:function(){switch(t.CurPlatform){case o.EnumPlatform.QQ:return o.EnumPlatformStr.QQ;case o.EnumPlatform.WEB:return o.EnumPlatformStr.WEB;case o.EnumPlatform.WECHAT:return o.EnumPlatformStr.WECHAT;default:return o.EnumPlatformStr.NONE}},enumerable:!0,configurable:!0}),t.EventCenter=new cc.EventTarget,t.IsDevMode=!1,t}();n.SS=r,cc._RF.pop()},{"./BaseEnum":"BaseEnum"}],SessionData:[function(t,e,n){"use strict";cc._RF.push(e,"f2b17bn8UlIfpyvD6wE1cjB","SessionData"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./XiYouData"),r=t("./BanBanData"),i=t("./QQData"),a=function(){return function(){this.BanBan=new r.BanBanData,this.XiYou=new o.XiyouData,this.QQ=new i.QQData}}();n.SessionData=a,n.Session=new a,cc._RF.pop()},{"./BanBanData":"BanBanData","./QQData":"QQData","./XiYouData":"XiYouData"}],ShareManager:[function(t,e,n){"use strict";cc._RF.push(e,"636ff0nDLZEvrrU8ZjfqDkC","ShareManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../base/script/global/SS"),r=t("../../../room/controller/RoomController"),i=t("../../../../base/script/frame/clog/Clog"),a=function(){function t(){}return t.Init=function(){o.qq&&(o.qq.onShareAppMessage(this.sharePassivity),o.qq.showShareMenu())},t.Share=function(){if(o.qq){var t={title:"\u7528\u58f0\u97f3\uff0c\u4ea4\u670b\u53cb\uff0c\u8fde\u9ea6\u9047\u89c1\u6709\u8da3\u7684\u7075\u9b42\u3002",imageUrl:"http://xs-image.oss-cn-hangzhou.aliyuncs.com/static/xiyou/share.png",query:"type=shareJoinRoom&roomId="+r.RoomController.CurRoom.RoomId+"&password="+r.RoomController.CurRoom.Password,shareAppType:"qqFastShareList"};o.qq.shareAppMessage(t),i.default.Trace(i.ClogKey.Entry,"Share param ="+t)}},t.sharePassivity=function(){var t={title:"\u7528\u58f0\u97f3\uff0c\u4ea4\u670b\u53cb\uff0c\u8fde\u9ea6\u9047\u89c1\u6709\u8da3\u7684\u7075\u9b42\u3002",imageUrl:"http://xs-image.oss-cn-hangzhou.aliyuncs.com/static/xiyou/share.png",query:"type=shareJoinRoom&roomId="+r.RoomController.CurRoom.RoomId+"&password="+r.RoomController.CurRoom.Password,shareAppType:"qqFastShareList"};return i.default.Trace(i.ClogKey.Entry,"Share param ="+t),t},t}();n.ShareManager=a,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../../base/script/global/SS":"SS","../../../room/controller/RoomController":"RoomController"}],StringUtil:[function(t,e,n){"use strict";cc._RF.push(e,"ffc9dMDyqJN9J85aqTQOsva","StringUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.CheckNetUrl=function(t){return/^http[s]*:\/\//.test(t)},n.IsNullOrEmpty=function(t){return null==t||""===t},n.MapToString=function(t){return JSON.stringify(Array.from(t.entries()).reduce(function(t,e){var n=e[0],o=e[1];return t[n]=o,t},{}))},n.StringLimit=function(t,e){for(var n=0,o=0,r=0;r<t.length;r++)n>=e&&0==o&&(o=r),escape(t[r]).indexOf("%u")<0?n+=1:n+=2;return n<=e?t:t.slice(0,o)+"..."},n.StringLength=function(t){for(var e=0,n=0;n<t.length;n++)escape(t[n]).indexOf("%u")<0?e+=1:e+=2;return e},n.StringLimitForce=function(t,e){for(var n=0,o=0,r=0;r<t.length;r++)n>=e&&0==o&&(o=r),escape(t[r]).indexOf("%u")<0?n+=1:n+=2;return n<=e?t:t.slice(0,o-1)+"..."},n.StringForamt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(e.length<1)return t;var o=e;for(var r in 1==e.length&&"object"==typeof e&&(o=e),o){var i=o[r];void 0!=i&&(t=t.replace("{"+r+"}",i))}return t},cc._RF.pop()},{}],SyncPromise:[function(t,e,n){"use strict";cc._RF.push(e,"4cc927sksRJt4mDyIR8d1wA","SyncPromise"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}();n.SyncPromise=o,cc._RF.pop()},{}],SystemInfoManager:[function(t,e,n){"use strict";cc._RF.push(e,"4d2a3eezOZBIqndPMme9Ocv","SystemInfoManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){void 0===t&&(t=null),null!=t&&(this.model=t.model,this.pixelRatio=t.pixelRatio,this.windowWidth=t.windowWidth,this.windowHeight=t.windowHeight,this.system=t.system,this.language=t.language,this.version=t.version,this.screenWidth=t.screenWidth,this.screenHeight=t.screenHeight,this.SDKVersion=t.SDKVersion,this.brand=t.brand,this.fontSizeSetting=t.fontSizeSetting,this.batteryLevel=t.batteryLevel,this.statusBarHeight=t.statusBarHeight,this.safeArea=t.safeArea,this.deviceOrientation=t.deviceOrientation,this.platform=t.platform,this.devicePixelRatio=t.devicePixelRatio)}}();n.SystemInfo=o;var r=function(){function t(){}return Object.defineProperty(t,"IsIOS",{get:function(){return this.CurSystemInfo.system.indexOf("iOS")>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsAndroid",{get:function(){return this.CurSystemInfo.system.indexOf("iOS")<0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsIphoneX",{get:function(){return!!this.CurSystemInfo.model&&(this.CurSystemInfo.model.indexOf("iPhone 11")>-1||(this.CurSystemInfo.model.indexOf("iPhone X")>-1||(this.CurSystemInfo.model.indexOf("iPhone XS")>-1||this.CurSystemInfo.model.indexOf("iPhone XR")>-1)))},enumerable:!0,configurable:!0}),t.Init=function(t){this.CurSystemInfo=new o(t)},t}();n.SystemInfoManager=r,cc._RF.pop()},{}],TaContoroller:[function(t,e,n){"use strict";cc._RF.push(e,"2d3c1/9WhJGtLRJLRnJGdtW","TaContoroller"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../global/SS"),r=t("../../../frame/clog/Clog"),i=t("../../report/Report"),a=function(){function t(){}return t.Init=function(){var t={appid:o.SS.IsDevMode?this.devAppId:this.officeAppId,server_url:this.url,debugMode:o.SS.IsDevMode?"debug":"none",autoTrack:{appShow:!0,appHide:!0}};this.TA=new ThinkingDataAPI(t),this.commonParams={package_name:"im."+o.SS.CurAppName+".minigame."+o.SS.CurPlatformStr,mac:i.Report.mac},this.TA.setSuperProperties(this.commonParams),this.TA.init(),r.default.DeepPink(r.ClogKey.Ta,"\u521d\u59cb\u5316thinkingdata")},t.SetCommonXiyouId=function(t){this.commonParams.xy_uid=Number(t),this.TA.setSuperProperties(this.commonParams),r.default.DeepPink(r.ClogKey.Ta,"\u8bbe\u7f6e\u901a\u7528\u53c2\u6570xiyouId, xy_id="+t)},t.OpenShareLinkUrl=function(t,e){var n={share_uid:Number(t),share_xy_uid:Number(e),share_page:o.SS.CurAppName};this.TA.track("enter_share",n),r.default.DeepPink(r.ClogKey.Ta,"\u4e0a\u62a5\u7528\u6237\u70b9\u51fb\u5206\u4eab\u94fe\u63a5\u5730\u5740\u4e8b\u4ef6, info="+JSON.stringify(n))},t.CreateRoom=function(t,e){var n={rid:t,room_type:e};this.TA.track("create_room",n),this.joinRoomTime=(new Date).getTime(),r.default.DeepPink(r.ClogKey.Ta,"\u4e0a\u62a5\u521b\u5efa\u623f\u95f4\u4e8b\u4ef6, info="+JSON.stringify(n))},t.JoinRoom=function(t,e,n,o,i){var a={rid:t,owner_id:e,room_type:n,room_types:o,room_property:i};this.TA.track("enter_room",a),this.joinRoomTime=(new Date).valueOf(),r.default.DeepPink(r.ClogKey.Ta,"\u4e0a\u62a5\u52a0\u5165\u623f\u95f4\u4e8b\u4ef6, info="+JSON.stringify(a))},t.QuitRoom=function(t,e,n,o,i){var a=null!=this.joinRoomTime?(new Date).valueOf()-this.joinRoomTime:0,s={rid:t,owner_id:e,duration:Math.floor(a/1e3),room_type:n,room_types:o,room_property:i};this.TA.track("exit_room",s),r.default.DeepPink(r.ClogKey.Ta,"\u4e0a\u62a5\u9000\u51fa\u623f\u95f4\u4e8b\u4ef6, info="+JSON.stringify(s))},t.JoinMic=function(t,e,n,o,i,a){var s={rid:t,owner_id:e,position:n,room_type:o,room_types:i,room_property:a};this.TA.track("room_on_mic",s),r.default.DeepPink(r.ClogKey.Ta,"\u4e0a\u62a5\u4e0a\u9ea6\u4e8b\u4ef6, info="+JSON.stringify(s))},t.QuitMic=function(t,e,n,o,i,a){var s={rid:t,owner_id:e,position:n,room_type:o,room_types:i,room_property:a};this.TA.track("room_off_mic",s),r.default.DeepPink(r.ClogKey.Ta,"\u4e0a\u62a5\u4e0b\u9ea6\u4e8b\u4ef6, info="+JSON.stringify(s))},t.SendGift=function(t,e,n,o,i,a,s){var l={gift_id:t,gift_name:e,gift_num:n,gift_price:o,gift_type:i,rid:a,scene:s};this.TA.track("send_gift",l),r.default.DeepPink(r.ClogKey.Ta,"\u4e0a\u62a5\u73a9\u5bb6\u9001\u793c, info="+JSON.stringify(l))},t.devAppId="4135588af6af4645a222978cdaeda0cf",t.officeAppId="133842caba3945529797a1c4971a764d",t.url="https://data.yinjietd.com",t.commonParams=null,t.joinRoomTime=null,t}();n.TaController=a,cc._RF.pop()},{"../../../frame/clog/Clog":"Clog","../../../global/SS":"SS","../../report/Report":"Report"}],TableComponent:[function(t,e,n){"use strict";cc._RF.push(e,"ed05buH35lKVqXWMMrlgnq3","TableComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/global/SS"),i=t("../../other/EnumCenter"),a=t("./BaseComponent"),s=t("../controller/GameDataController"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(){this.initEvent(),this.InitComplete()},e.prototype.Reset=function(){},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.removeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.onTouchStart=function(t){r.SS.EventCenter.emit(i.EnumGameMessageType.TableTouchStart)},e.prototype.onTouchMove=function(t){var e=t.getLocation(),n=s.GameDataController.GetWinSize();r.SS.EventCenter.emit(i.EnumGameMessageType.TableTouchMove,t.getDelta(),new cc.Vec2(e.x-n.width/2,e.y-n.height/2))},e.prototype.onTouchEnd=function(t){var e=t.getLocation(),n=s.GameDataController.GetWinSize();r.SS.EventCenter.emit(i.EnumGameMessageType.TableTouchEnd,t.getDelta(),new cc.Vec2(e.x-n.width/2,e.y-n.height/2))},e}(a.default);n.default=l,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","../controller/GameDataController":"GameDataController","./BaseComponent":"BaseComponent"}],TargetBallComponent:[function(t,e,n){"use strict";cc._RF.push(e,"05c52CfjNVBSq/q5IMLg217","TargetBallComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/global/SS"),i=t("../../other/EnumCenter"),a=t("../controller/GameDataController"),s=t("../entity/TargetBall"),l=t("./BaseComponent"),c=t("../../room/controller/RoomController"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._leftTargetBall=null,e._rightTargetBall=null,e.ballInHoleNumArray=[],e}return o(e,t),e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.initData(),this.InitComplete()},e.prototype.Reset=function(){this.ballInHoleNumArray=[],this._leftTargetBall.Reset(),this._rightTargetBall.Reset()},e.prototype.SetLeftTargetBall=function(t,e){this._leftTargetBall.SetTargetBall(t,e)},e.prototype.SetRightTargetBall=function(t,e){this._rightTargetBall.SetTargetBall(t,e)},e.prototype.GetRemainBallNum=function(t){return 0===t?this._leftTargetBall.GetRemainBallNum():this._rightTargetBall.GetRemainBallNum()},e.prototype.GetLeftRemainBallNum=function(){return this._leftTargetBall.GetRemainBallNum()},e.prototype.GetRightRemainBallNum=function(){return this._rightTargetBall.GetRemainBallNum()},e.prototype.ResetToLastRoundValue=function(t){var e=this;this.ballInHoleNumArray=[],t.forEach(function(t){t.GetBallState()===i.EnumBallState.InHole&&e.ballInHoleNumArray.push(t.BallNum)},this),this.checkBallInHole()},e.prototype.CheckBallInHole=function(t){this._leftTargetBall.CheckBallInHole(t),this._rightTargetBall.CheckBallInHole(t)},e.prototype.SyncNetInfo=function(t){this._leftTargetBall.SyncNetInfo(t),this._rightTargetBall.SyncNetInfo(t)},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._leftTargetBall=cc.find("OurTargetBall",this.node).addComponent(s.default),this._rightTargetBall=cc.find("TheirTargetBall",this.node).addComponent(s.default)},e.prototype.initData=function(){this._leftTargetBall.Init(),this._rightTargetBall.Init()},e.prototype.initEvent=function(){r.SS.EventCenter.on(i.EnumGameMessageType.ConfirmBallColorType,this.onConfirmBallColorType,this),r.SS.EventCenter.on(i.EnumGameMessageType.BallInHole,this.onBallInHole,this)},e.prototype.removeEvent=function(){r.SS.EventCenter.off(i.EnumGameMessageType.ConfirmBallColorType,this.onConfirmBallColorType,this),r.SS.EventCenter.off(i.EnumGameMessageType.BallInHole,this.onBallInHole,this)},e.prototype.checkBallInHole=function(){this._leftTargetBall.CheckBallInHole(this.ballInHoleNumArray),this._rightTargetBall.CheckBallInHole(this.ballInHoleNumArray),a.GameDataController.RemainBallNumArray[0]=this._leftTargetBall.GetRemainBallNum(),a.GameDataController.RemainBallNumArray[1]=this._rightTargetBall.GetRemainBallNum()},e.prototype.onConfirmBallColorType=function(t){this._leftTargetBall.SetBallColorType(c.RoomController.GetGameSeat(0).BiDecor),this._rightTargetBall.SetBallColorType(c.RoomController.GetGameSeat(1).BiDecor),this.checkBallInHole()},e.prototype.onBallInHole=function(t){0!==t&&8!==t&&8!=t&&(this.ballInHoleNumArray.push(t),this.checkBallInHole())},e}(l.default);n.default=u,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../controller/GameDataController":"GameDataController","../entity/TargetBall":"TargetBall","./BaseComponent":"BaseComponent"}],TargetBallTexture:[function(t,e,n){"use strict";cc._RF.push(e,"d5de231NcZLvKAgOM1yj3Ww","TargetBallTexture");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetBallArray=[],e}return o(e,t),r([s(Array(cc.SpriteFrame))],e.prototype,"targetBallArray",void 0),e=r([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],TargetBall:[function(t,e,n){"use strict";cc._RF.push(e,"51357zRivVPiJeYou9Vkauc","TargetBall");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../other/EnumCenter"),i=t("../../Constance"),a=t("./TargetBallTexture"),s=t("../../util/UtilityEx"),l=t("../controller/GameDataController"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ballSpriteArray=[],e._ballNumArray=[],e._targetBallTexture=null,e.ballColorType=r.EnumBallColorType.None,e.isShowBall8=!1,e}return o(e,t),e.prototype.Init=function(){this.initRoot(),this.initData()},e.prototype.Reset=function(){this.initData(),this.ballColorType=r.EnumBallColorType.None,this._ballNumArray=[],this.isShowBall8=!1},e.prototype.SetTargetBall=function(t,e){var n=this;if(e!==r.EnumBallColorType.None){if(0===this._ballNumArray.length){this.ballColorType=e;for(var o=0;o<i.Constance.BALL_COUNT/2;o++)this.ballColorType===r.EnumBallColorType.Full?this._ballNumArray.push(o+1):this._ballNumArray.push(o+8)}t&&t.forEach(function(t){var e=t.number;n.ballColorType===r.EnumBallColorType.Full&&e<8?n._ballNumArray[e-1]=-1:n.ballColorType===r.EnumBallColorType.Half&&e>8&&(n._ballNumArray[e%8]=-1)},this),1===this.GetRemainBallNum()&&l.GameDataController.MyBallColorType!=r.EnumBallColorType.None&&l.GameDataController.MyBallColorType!=r.EnumBallColorType.Eight?this.ShowBallEight():this.refreshBallSprite()}},e.prototype.SetBallColorType=function(t){this.ballColorType=t;for(var e=0;e<i.Constance.BALL_COUNT/2;e++)this.ballColorType===r.EnumBallColorType.Full?this._ballNumArray.push(e+1):this._ballNumArray.push(e+8);this.refreshBallSprite()},e.prototype.ShowBallEight=function(){this.isShowBall8=!0,this.refreshBallSprite()},e.prototype.PopBall=function(t){s.BallNumToBallColorType(t)===this.ballColorType&&(this.ballColorType===r.EnumBallColorType.Full?this._ballNumArray[t-1]=-1:this._ballNumArray[t%8]=-1),this.refreshBallSprite()},e.prototype.CheckBallInHole=function(t){var e=this;t.forEach(function(t){s.BallNumToBallColorType(t)===e.ballColorType&&(e.ballColorType===r.EnumBallColorType.Full?e._ballNumArray[t-1]=-1:e._ballNumArray[t%8]=-1)},this),1===this.GetRemainBallNum()&&l.GameDataController.MyBallColorType!=r.EnumBallColorType.None&&l.GameDataController.MyBallColorType!=r.EnumBallColorType.Eight?this.ShowBallEight():this.refreshBallSprite()},e.prototype.SyncNetInfo=function(t){var e=this;if(t&&this._ballNumArray.length>0){for(var n=0;n<i.Constance.BALL_COUNT/2;n++)this.ballColorType===r.EnumBallColorType.Full?this._ballNumArray[n]=n+1:this.ballColorType===r.EnumBallColorType.Half&&(this._ballNumArray[n]=n+8);t.forEach(function(t){var n=t;e.ballColorType===r.EnumBallColorType.Full&&n<8?e._ballNumArray[n-1]=-1:e.ballColorType===r.EnumBallColorType.Half&&n>8&&(e._ballNumArray[n%8]=-1)},this)}1===this.GetRemainBallNum()&&l.GameDataController.MyBallColorType!=r.EnumBallColorType.None&&l.GameDataController.MyBallColorType!=r.EnumBallColorType.Eight?this.ShowBallEight():this.refreshBallSprite()},e.prototype.GetRemainBallNum=function(){var t=0;return this._ballNumArray.forEach(function(e){-1!=e&&t++}),t},e.prototype.initRoot=function(){var t=this;cc.find("Container",this.node).children.forEach(function(e){t._ballSpriteArray.push(e.getComponent(cc.Sprite))},this),this._targetBallTexture=this.getComponent(a.default)},e.prototype.initData=function(){for(var t=0;t<this._ballSpriteArray.length;t++)this._ballSpriteArray[t].spriteFrame=null},e.prototype.refreshBallSprite=function(){for(var t=0,e=0;t<this._ballSpriteArray.length;t++,e++)-1===this._ballNumArray[e]||!this.isShowBall8&&8===this._ballNumArray[e]?t--:e<this._ballNumArray.length?this._ballSpriteArray[t].spriteFrame=this._targetBallTexture.targetBallArray[this._ballNumArray[e]-1]:this._ballSpriteArray[t].spriteFrame=null},e}(cc.Component);n.default=c,cc._RF.pop()},{"../../Constance":"Constance","../../other/EnumCenter":"EnumCenter","../../util/UtilityEx":"UtilityEx","../controller/GameDataController":"GameDataController","./TargetBallTexture":"TargetBallTexture"}],ThemeItem:[function(t,e,n){"use strict";cc._RF.push(e,"8adb7R4bltEM6Godtdqz7ue","ThemeItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/util/UIEventCenter"),i=t("../../../base/script/frame/ui/UIManager"),a=t("./UITheme"),s=t("../../../base/script/global/SS"),l=t("../../../base/script/frame/ui/UIUtil"),c=t("../controller/RoomSettingController"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){var e=this,n=s.SS.ImageUrlProxy+"static/background/theme_preview_"+t+".png?v=1";l.UIUtil.LoadRemoteImage(n,this.node.getComponent(cc.Sprite)),r.UIEventCenter.ButtonEvent(this.node.getComponent(cc.Button),function(){return e.onClick(t)})},e.prototype.onClick=function(t){c.RoomSettingController.ChangeTheme(t),i.UIManager.CloseUI(a.UITheme)},e}(cc.Component);n.ThemeItem=u,cc._RF.pop()},{"../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../controller/RoomSettingController":"RoomSettingController","./UITheme":"UITheme"}],Time:[function(t,e,n){"use strict";cc._RF.push(e,"87123eqT2hDrIxbfnMZ/Zky","Time"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.Format=function(t,e){void 0===e&&(e="yyyy/MM/dd hh:mm:ss");var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var o in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return e},t.TimestampToTime=function(t){return this.Format(new Date(t))},t.FormatTimeSec=function(t,e){void 0===e&&(e=2);var n=Math.floor(t/3600),o=Math.floor(t/60),r=Math.floor(t%60),i=o<10?"0"+o:o+"",a=r<10?"0"+r:r+"";return 3==e?(n<10?"0"+n:n+"")+":"+i+":"+a:2==e?i+":"+a:a},t}();n.Time=o,cc._RF.pop()},{}],TopicController:[function(t,e,n){"use strict";cc._RF.push(e,"962ce6Ie7FN6INPkglnqRWO","TopicController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/api/http/Xhr"),a=t("../../room/controller/RoomController"),s=t("../../../base/script/frame/clog/Clog"),l=function(){function t(){}return t.InitTopic=function(e){t.AllTopics=e},t.RefreshTopic=function(e,n){void 0===n&&(n=!1),t.IsOpenTopic=!1},t.getTopicByID=function(e){for(var n="",o=0;o<t.AllTopics.topics.length;o++){for(var r=!1,i=0;i<t.AllTopics.topics[o].topics.length;i++)if(t.AllTopics.topics[o].topics[i].id==e){r=!0,n=t.AllTopics.topics[o].topics[i].name;break}if(r)break}return n},t.EntryTopic=function(){var e=this;if(a.RoomController.CurRoom)return new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,l,c,u,h,f;return r(this,function(r){switch(r.label){case 0:return e=new i.XhrUrl("xiyou/roomTopics").Query({key:"rid",value:a.RoomController.CurRoom.RoomId.toString()}).Url,[4,i.default.GetJson(e)];case 1:if(o=r.sent(),0==o.success)return n(!1),[2];if(l=o.data,s.default.Red(s.ClogKey.Entry,"\u3010EntryTopic\u3011\uff1a"+JSON.stringify(l)),l.hasOwnProperty("topics")&&l.hasOwnProperty("status")){for(c=l.topics,u=l.status,h=[],f=0;f<c.length;f++)h.push(c[f].id);t.RefreshTopic(h,u>0)}return n(!0),[2]}})})});s.default.Error("\u52a0\u5165\u623f\u95f4\u5931\u8d25,\u4e0d\u80fd\u540c\u6b65\u8bdd\u9898\u5361\u914d\u7f6e")},t.NextTopic=function(){if(0!=t.PendingTopicIds.length){var e=new i.XhrUrl("xiyou/nextRoomTopic").Url,n={rid:""+a.RoomController.CurRoom.RoomId};i.default.PostJson(e,n)}},t.SelectTopic=function(t){for(var e=0;e<t.length;e++)t[e]=Number(t[e]);var n=new i.XhrUrl("xiyou/setRoomTopic").Url,o={rid:""+a.RoomController.CurRoom.RoomId,topic_ids:JSON.stringify(t)};i.default.PostJson(n,o)},t.CloseTopic=function(){var t=new i.XhrUrl("xiyou/closeRoomTopic").Url,e={rid:""+a.RoomController.CurRoom.RoomId};i.default.PostJson(t,e)},t.AllTopics={topics:[{topic_category_name:"\u604b\u7231\u90a3\u4e9b\u4e8b",topics:[{id:1,topic_category_id:1,name:"\u4f60\u6697\u604b\u4e2d\u4ec0\u4e48\u65f6\u5019\u6700\u5fc3\u9178"}]},{topic_category_name:"\u6c99\u96d5\u7f51\u53cb",topics:[{id:2,topic_category_id:2,name:"\u751f\u6d3b\u5df2\u7ecf\u88ab\u5de5\u4f5c\u586b\u6ee1\uff0c\u662f\u5426\u8be5\u8f9e\u804c"}]},{topic_category_name:"\u56de\u5fc6\u5f80\u4e8b",topics:[{id:3,topic_category_id:3,name:"\u7ae5\u5e74\u6700\u4e0d\u582a\u56de\u9996\u7684\u7ecf\u5386\u662f\u4ec0\u4e48"}]},{topic_category_name:"\u5410\u69fd\u5927\u4f1a",topics:[{id:4,topic_category_id:4,name:"\u4f60\u89c1\u8fc7\u6700\u908b\u9062\u7684\u4eba\u662f\u600e\u6837\u7684"}]},{topic_category_name:"\u771f\u5fc3\u8bdd\u5927\u5192\u9669",topics:[{id:5,topic_category_id:5,name:"\u8bb2\u4e00\u4e2a\u4f60\u8ba4\u4e3a\u597d\u7b11\u7684\u7b11\u8bdd"}]},{topic_category_name:"\u5403\u74dc\u7fa4\u4f17",topics:[{id:6,topic_category_id:6,name:"\u4e3a\u4ec0\u4e48\u73b0\u5728\u7684\u6b4c\u8d8a\u6765\u8d8a\u96be\u542c"}]},{topic_category_name:"\u95fa\u871c\u79c1\u8bed",topics:[{id:7,topic_category_id:7,name:"\u4f60\u4f1a\u600e\u6837\u548c\u7eff\u8336\u5a4a\u76f8\u5904"}]}]},t.PendingTopicIds=[],t.IsOpenTopic=!1,t.SelectedTag="",t}();n.TopicController=l,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../room/controller/RoomController":"RoomController"}],TopicItem:[function(t,e,n){"use strict";cc._RF.push(e,"b8c961i67tNaozfJZSyEGus","TopicItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../controller/TopicController"),i=t("../../../base/script/util/UIEventCenter"),a=t("../../../base/script/frame/res/ResUtil"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._checkmark=null,e._contentLabel=null,e._itemBg=null,e.topic="",e}return o(e,t),e.prototype.Init=function(){var t=this;this._checkmark=cc.find("Checkmark",this.node),this._contentLabel=cc.find("Label",this.node).getComponent(cc.Label),this._itemBg=this.node.getComponent(cc.Sprite),i.UIEventCenter.ButtonEvent(this.node.getComponent(cc.Button),function(){return t.onClickItem()})},e.prototype.Refresh=function(t,e,n){this.topic=e,this.topicId=t,this._contentLabel.string=""+e,this._checkmark.active=!!r.TopicController.PendingTopicIds.find(function(e){return e==t}),a.ResUtil.ChangeSprite("T_Topic_Item_"+n%10,this._itemBg)},e.prototype.RefreshSelected=function(){var t=this;this._checkmark.active=!!r.TopicController.PendingTopicIds.find(function(e){return e==t.topicId})},e.prototype.onClickItem=function(){var t=this,e=[];r.TopicController.PendingTopicIds.find(function(e){return e==t.topicId})?e.push.apply(e,r.TopicController.PendingTopicIds.filter(function(e){return e!=t.topicId})):e.push.apply(e,r.TopicController.PendingTopicIds.concat([this.topicId])),r.TopicController.SelectTopic(e)},e}(cc.Component);n.TopicItem=s,cc._RF.pop()},{"../../../base/script/frame/res/ResUtil":"ResUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../controller/TopicController":"TopicController"}],TopicTag:[function(t,e,n){"use strict";cc._RF.push(e,"f5528JMkgxKrbpobaWbXsbY","TopicTag");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/util/UIEventCenter"),i=t("../controller/TopicController"),a=t("../../../base/script/global/SS"),s=t("../../other/EventCommond"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tagLabel=null,e._indicator=null,e.tag="",e}return o(e,t),e.prototype.Init=function(){var t=this;this._tagLabel=this.node.getComponent(cc.Label),this._indicator=cc.find("Indicator",this.node),r.UIEventCenter.ButtonEvent(this.node.getComponent(cc.Button),function(){return t.onClickTag()})},e.prototype.Refresh=function(t){this.tag=t,this._tagLabel.string=""+t,this._tagLabel.node.opacity=t==i.TopicController.SelectedTag?255:178,this._indicator.active=t==i.TopicController.SelectedTag},e.prototype.onClickTag=function(){i.TopicController.SelectedTag!=this.tag&&(i.TopicController.SelectedTag=this.tag,a.SS.EventCenter.emit(s.EventCommond.UITopicTagChange))},e}(cc.Component);n.TopicTag=l,cc._RF.pop()},{"../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../other/EventCommond":"EventCommond","../controller/TopicController":"TopicController"}],UIActionSheet:[function(t,e,n){"use strict";cc._RF.push(e,"7a89cUrxC9OBZH45HPNlVwe","UIActionSheet");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIBase"),i=t("../../../base/script/frame/ui/UIEnum"),a=t("../../../base/script/frame/ui/UIManager"),s=t("../../../base/script/util/UIEventCenter"),l=t("../../entry/controller/EntryController"),c=t("../controller/ActionSheetController"),u=t("./ActionSheetItem"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIActionSheet",e.HierarchyType=i.EnumUIHierarchy.Fix,e.OpenTween=i.EnumUIOpenTween.PullUp,e.CloseTween=i.EnumUICloseTween.PullDown,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refreshPanelPosition()},e.prototype.initRoot=function(){this._btnMask=cc.find("Mask",this.node).getComponent(cc.Button),this._btnCancel=cc.find("Content/Cancel/BtnThis",this.node).getComponent(cc.Button),this._titleLabel=cc.find("Content/Title/Label",this.node).getComponent(cc.Label),this._grid=cc.find("Content/Layout",this.node),this._item=cc.find("Content/Layout/Item",this.node),this._item.active=!1,c.ActionSheetController.data.Title&&(this._titleLabel.string=""+c.ActionSheetController.data.Title),c.ActionSheetController.data.List.sort(function(t,e){return t.Id-e.Id}),this.allperateItem=new Array;for(var t=0;t<c.ActionSheetController.data.List.length;t++){var e=c.ActionSheetController.data.List[t],n=cc.instantiate(this._item);n.parent=this._grid,n.active=!0;var o=n.addComponent(u.ActionSheetItem);o.Init(e),this.allperateItem.push(o)}},e.prototype.initEvent=function(){var t=this;s.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.onClickClose()}),s.UIEventCenter.ButtonEvent(this._btnCancel,function(){return t.onClickClose()})},e.prototype.onClickClose=function(){a.UIManager.CloseUI(e)},e.prototype.refreshPanelPosition=function(){var t=cc.find("Content",this.node).getComponent(cc.Widget);l.EntryController.IphoneXUIFit([t],20)},e}(r.UIBase);n.UIActionSheet=h,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/util/UIEventCenter":"UIEventCenter","../../entry/controller/EntryController":"EntryController","../controller/ActionSheetController":"ActionSheetController","./ActionSheetItem":"ActionSheetItem"}],UIAuthorize:[function(t,e,n){"use strict";cc._RF.push(e,"f1e161PAcFAuq2KnFJm5Qtj","UIAuthorize");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../base/script/global/SS"),i=t("../../base/script/frame/ui/UIBase"),a=t("../../base/script/frame/ui/UIManager"),s=t("../../base/script/util/SyncPromise"),l=t("../../base/script/util/UIEventCenter"),c=t("../../base/script/frame/ui/UIEnum"),u=t("../xiyou/controller/XiYouController"),h=t("../../base/script/global/SystemInfoManager"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HierarchyType=c.EnumUIHierarchy.NetDlg,e.PrefabName="P_UIAuthorize",e.OpenTween=c.EnumUIOpenTween.NormalOpen,e.CloseTween=c.EnumUICloseTween.NormalClose,e._authorizePlaceHolder=null,e._cancelBt=null,e._cancelLabel=null,e._qqAuthorizeBt=null,e._donePromise=new s.SyncPromise,e}return o(e,t),e.prototype.onLoad=function(){e.Instance=this,this._authorizePlaceHolder=cc.find("Bg/Layout/SureBt",this.node),this._cancelLabel=cc.find("Bg/Layout/CancelBt/Background/Label",this.node).getComponent(cc.Label),this._cancelBt=cc.find("Bg/Layout/CancelBt",this.node).getComponent(cc.Button)},e.prototype.start=function(){var t=this;l.UIEventCenter.ButtonEvent(this._cancelBt,function(){t.onCloseClick()});var e=h.SystemInfoManager.CurSystemInfo,n=e.screenWidth/cc.winSize.width*this._authorizePlaceHolder.width,o=e.screenHeight/cc.winSize.height*this._authorizePlaceHolder.height,i=this._authorizePlaceHolder.convertToWorldSpace(cc.v2(0,0));i=cc.v2(e.screenWidth/cc.winSize.width*i.x,e.screenHeight/cc.winSize.height*(cc.winSize.height-i.y));this._qqAuthorizeBt=r.qq.createUserInfoButton({type:"text",text:"\u540c\u610f",style:{left:i.x,top:i.y-o,width:n,height:o,lineHeight:o,backgroundColor:"#4FE4FF",color:"#ffffff",textAlign:"center",fontSize:e.screenWidth/cc.winSize.width*this._cancelLabel.fontSize,borderRadius:o/2},withCredentials:!1}),this._qqAuthorizeBt.onTap(function(e){t.onClose()})},e.prototype.onClose=function(){this._qqAuthorizeBt.destroy(),this._donePromise.resolve(),a.UIManager.CloseUI(e)},e.prototype.onCloseClick=function(){u.XiYouController.JumpToXiyou()},Object.defineProperty(e.prototype,"DonePromise",{get:function(){return this._donePromise.promise},enumerable:!0,configurable:!0}),e}(i.UIBase);n.UIAuthorize=f,cc._RF.pop()},{"../../base/script/frame/ui/UIBase":"UIBase","../../base/script/frame/ui/UIEnum":"UIEnum","../../base/script/frame/ui/UIManager":"UIManager","../../base/script/global/SS":"SS","../../base/script/global/SystemInfoManager":"SystemInfoManager","../../base/script/util/SyncPromise":"SyncPromise","../../base/script/util/UIEventCenter":"UIEventCenter","../xiyou/controller/XiYouController":"XiYouController"}],UIBaseController:[function(t,e,n){"use strict";cc._RF.push(e,"99c62RwYFNMcq+WO2/ZKZpi","UIBaseController"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){}}();n.UIBaseController=o,cc._RF.pop()},{}],UIBase:[function(t,e,n){"use strict";cc._RF.push(e,"56dedyqd9JNGrCqgQomWysX","UIBase");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./UIEnum"),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HierarchyType=r.EnumUIHierarchy.Normal,e.OpenTween=r.EnumUIOpenTween.NormalOpen,e.CloseTween=r.EnumUICloseTween.NormalClose,e}return o(e,t),e.prototype.__preload=function(){if(this.Mask=cc.find("Mask",this.node),this.Mask&&!this.Mask.getComponent(cc.Widget)){var t=this.Mask.addComponent(cc.Widget);t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignTop=!0,t.isAlignBottom=!0,t.left=0,t.right=0,t.top=0,t.bottom=0,t.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE,t.updateAlignment()}},e}(cc.Component);n.UIBase=i,cc._RF.pop()},{"./UIEnum":"UIEnum"}],UICommDia:[function(t,e,n){"use strict";cc._RF.push(e,"f9e27xqe79CgLTa4tpcjeXa","UICommDia");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIBase"),s=t("../../../base/script/frame/ui/UIManager"),l=t("../../../base/script/frame/ui/UIEnum"),c=t("../../../base/script/util/UIEventCenter"),u=t("../../entry/controller/EntryController"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UICommDia",e.HierarchyType=l.EnumUIHierarchy.NetDlg,e}return o(e,t),e.Open=function(t,n,o,a,l){return void 0===n&&(n="\u786e\u5b9a"),void 0===o&&(o=""),r(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,s.UIManager.OpenUI(e)];case 1:return r.sent().OnOpen(t,n,o,a,l),[2]}})})},e.prototype.onLoad=function(){this._content=cc.find("Bg/Content",this.node).getComponent(cc.Label),this._btnSure=cc.find("Bg/BtnLayout/BtnSure",this.node).getComponent(cc.Button),this._btnSureLabel=cc.find("Bg/BtnLayout/BtnSure/Label",this.node).getComponent(cc.Label),this._btnCancel=cc.find("Bg/BtnLayout/BtnCancel",this.node).getComponent(cc.Button),this._btnCancelLabel=cc.find("Bg/BtnLayout/BtnCancel/Label",this.node).getComponent(cc.Label)},e.prototype.start=function(){this.refreshPanelPosition()},e.prototype.OnOpen=function(t,n,o,r,i){this._content.string=""+t,this._btnSureLabel.string=""+n,this._btnSure.node.active=!!n,c.UIEventCenter.ButtonEvent(this._btnSure,function(){r&&r(),s.UIManager.CloseUI(e)}),this._btnCancelLabel.string=""+o,this._btnCancel.node.active=!!o,c.UIEventCenter.ButtonEvent(this._btnCancel,function(){i&&i(),s.UIManager.CloseUI(e)})},e.prototype.refreshPanelPosition=function(){var t=cc.find("Bg",this.node).getComponent(cc.Widget);u.EntryController.IphoneXUIFit([t],20)},e}(a.UIBase);n.UICommDia=h,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/util/UIEventCenter":"UIEventCenter","../../entry/controller/EntryController":"EntryController"}],UICostTip:[function(t,e,n){"use strict";cc._RF.push(e,"f5581vG74BI449aLEObPJOg","UICostTip");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../base/script/frame/storage/LocalStorage"),s=t("../../../../base/script/frame/ui/UIBase"),l=t("../../../../base/script/frame/ui/UIEnum"),c=t("../../../../base/script/frame/ui/UIManager"),u=t("../../../../base/script/frame/ui/UIUtil"),h=t("../../../../base/script/util/UIEventCenter"),f=t("../../../xiyou/controller/XiYouGiftManager"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UICostTip",e.HierarchyType=l.EnumUIHierarchy.Fix,e}return o(e,t),Object.defineProperty(e,"IsTipCost",{get:function(){return null==this._isTipCost&&(this._isTipCost=a.LocalStorageUtil.GetBool("IsTipCost",!0)),this._isTipCost},set:function(t){this._isTipCost=t,a.LocalStorageUtil.SetBool("IsTipCost",this._isTipCost)},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refresTipIcon(),this.refreshTip()},e.prototype.initRoot=function(){this._btnSure=cc.find("Bg/Layout/BtnSure",this.node).getComponent(cc.Button),this._btnCancel=cc.find("Bg/Layout/BtnCancel",this.node).getComponent(cc.Button),this._isSelectSprite=cc.find("Bg/BtnUnTip/Cell",this.node).getComponent(cc.Sprite),this._btnUnTip=cc.find("Bg/BtnUnTip",this.node).getComponent(cc.Button),this._tip=cc.find("Bg/Tip",this.node).getComponent(cc.Label)},e.prototype.initEvent=function(){var t=this;h.UIEventCenter.ButtonEvent(this._btnSure,function(){return t.onBtnSureClick()}),h.UIEventCenter.ButtonEvent(this._btnCancel,function(){return t.onBtnCancelClick()}),h.UIEventCenter.ButtonEvent(this._btnUnTip,function(){return t.onBtnUnTipClick()})},e.prototype.onBtnCancelClick=function(){c.UIManager.CloseUI(e)},e.prototype.refreshTip=function(){this._tip.string="\u60a8\u672c\u6b21\u6d88\u8d39\u9700\u8981\u652f\u4ed8"+e.Cost+"\u73a9\u5e01"},e.prototype.onBtnSureClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,f.XiYouGiftManager.GiftSend()];case 1:return t.sent(),[4,c.UIManager.CloseUI(e)];case 2:return t.sent(),[2]}})})},e.prototype.onBtnUnTipClick=function(){e.IsTipCost=!e.IsTipCost,this.refresTipIcon()},e.prototype.refresTipIcon=function(){var t=e.IsTipCost?"T_Cell_UnSelect":"T_Cell_Selected";u.UIUtil.ChangeSprite(t,this._isSelectSprite)},e.Cost=1,e._isTipCost=null,e}(s.UIBase);n.UICostTip=p,cc._RF.pop()},{"../../../../base/script/frame/storage/LocalStorage":"LocalStorage","../../../../base/script/frame/ui/UIBase":"UIBase","../../../../base/script/frame/ui/UIEnum":"UIEnum","../../../../base/script/frame/ui/UIManager":"UIManager","../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager"}],UIDress:[function(t,e,n){"use strict";cc._RF.push(e,"3635e8nwcJLfoEK9VO1HLZF","UIDress");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIBase"),i=t("./DressItem"),a=t("../controller/DressController"),s=t("../../../base/script/util/UIEventCenter"),l=t("../../../base/script/frame/ui/UIManager"),c=t("../../../base/script/global/SS"),u=t("../../other/EventCommond"),h=t("./DressItemDetail"),f=t("../../../base/script/frame/ui/UIEnum"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIDress",e.HierarchyType=f.EnumUIHierarchy.Fix,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refresh()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._btnMask=cc.find("Mask",this.node).getComponent(cc.Button),this._dressItem=cc.find("Content/Item",this.node),this._dressItem.active=!1,this._scrollView=cc.find("Content/ScrollView/view/content",this.node),cc.find("ItemDetial",this.node).addComponent(h.DressItemDetail),this._none=cc.find("Content/None",this.node)},e.prototype.initEvent=function(){var t=this;s.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.onBtnMaskClick()}),c.SS.EventCenter.on(u.EventCommond.UIDressHeadIcon,function(){return t.onDressHeadIcon()},this)},e.prototype.removeEvent=function(){var t=this;c.SS.EventCenter.off(u.EventCommond.UIDressHeadIcon,function(){return t.onDressHeadIcon()},this)},e.prototype.onDressHeadIcon=function(){this.allDressItems.forEach(function(t){return t.Refresh()})},e.prototype.refresh=function(){if(null==a.DressController.DressItems||a.DressController.DressItems.length<=0)return this._none.active=!0,void(this._scrollView.active=!1);this._none.active=!1,this._scrollView.active=!0,this.allDressItems=new Array;for(var t=0;t<a.DressController.DressItems.length;t++){a.DressController.DressItems[t];var e=cc.instantiate(this._dressItem);e.active=!0,e.setParent(this._scrollView);var n=e.addComponent(i.DressItem);n.Init(t),this.allDressItems.push(n)}},e.prototype.onBtnMaskClick=function(){l.UIManager.CloseUI(e)},e}(r.UIBase);n.UIDress=p,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../other/EventCommond":"EventCommond","../controller/DressController":"DressController","./DressItem":"DressItem","./DressItemDetail":"DressItemDetail"}],UIEmoji:[function(t,e,n){"use strict";cc._RF.push(e,"f2262igtJtDJL/BQXp7dzPp","UIEmoji");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIBase"),i=t("../../../base/script/frame/ui/UIEnum"),a=t("../../../base/script/frame/ui/UIManager"),s=t("../../../base/script/util/UIEventCenter"),l=t("../../entry/controller/EntryController"),c=t("../controller/EmojiController"),u=t("./EmojiItem"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIEmoji",e.HierarchyType=i.EnumUIHierarchy.Fix,e.OpenTween=i.EnumUIOpenTween.DrawerBottomOpen,e.CloseTween=i.EnumUICloseTween.DrawerBottomClose,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refreshPanelPosition()},e.prototype.initRoot=function(){this._btnMask=cc.find("Mask",this.node).getComponent(cc.Button),this._item=cc.find("Main/Item",this.node),this._item.active=!1,this._grid=cc.find("Main/ScrollView/view/content",this.node),this.allEmoji=new Array;for(var t=0,e=c.EmojiController.AllEmojisUniqueKeys.length;t<e;t++){var n=c.EmojiController.AllEmojisUniqueKeys[t],o=cc.instantiate(this._item);o.setParent(this._grid),o.active=!0;var r=o.addComponent(u.EmojiItem);r.Init(n),this.allEmoji.push(r)}},e.prototype.refreshPanelPosition=function(){var t=cc.find("Main",this.node).getComponent(cc.Widget);l.EntryController.IphoneXUIFit([t],20)},e.prototype.initEvent=function(){var t=this;s.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.onBtnMaskClick()})},e.prototype.onBtnMaskClick=function(){a.UIManager.CloseUI(e)},e}(r.UIBase);n.UIEmoji=h,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/util/UIEventCenter":"UIEventCenter","../../entry/controller/EntryController":"EntryController","../controller/EmojiController":"EmojiController","./EmojiItem":"EmojiItem"}],UIEnum:[function(t,e,n){"use strict";cc._RF.push(e,"f6f07QCwkRKJ6CF+ivwkg5O","UIEnum"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.Base=0]="Base",t[t.Normal=1e4]="Normal",t[t.Fix=2e4]="Fix",t[t.Marquee=20100]="Marquee",t[t.Tip=20200]="Tip",t[t.Loading=20300]="Loading",t[t.Waiting=20400]="Waiting",t[t.NetDlg=20500]="NetDlg",t[t.Toast=20600]="Toast",t[t.FrameMask=20700]="FrameMask"}(n.EnumUIHierarchy||(n.EnumUIHierarchy={})),function(t){t.NormalOpen="NormalOpen",t.ScaleBig="ScaleBig",t.FadeIn="FadeIn",t.PullUp="PullUp",t.DrawerBottomOpen="DrawerBottomOpen"}(n.EnumUIOpenTween||(n.EnumUIOpenTween={})),function(t){t.NormalClose="NormalClose",t.ScaleSmall="ScaleSmall",t.FadeOut="FadeOut",t.PullDown="PullDown",t.DrawerBottomClose="DrawerBottomClose"}(n.EnumUICloseTween||(n.EnumUICloseTween={})),cc._RF.pop()},{}],UIEventCenter:[function(t,e,n){"use strict";cc._RF.push(e,"a017bnK6gRFB4tdrMeyMWTE","UIEventCenter"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../frame/audio/AudioManager"),r=t("./StringUtil"),i=function(){function t(){}return t.ButtonEvent=function(t,e,n,i){void 0===n&&(n="S_Button"),void 0===i&&(i=.4),t.node.on("click",function(){t.interactable&&(r.IsNullOrEmpty(n)||o.AudioManager.PlaySound(n),i>0&&(t.interactable=!1,window.setTimeout(function(){t&&(t.interactable=!0)},1e3*i)),e())})},t.TouchNodeStart=function(t,e){t.on(cc.Node.EventType.TOUCH_START,function(t){e(t)})},t.TouchNodeEnd=function(t,e){t.on(cc.Node.EventType.TOUCH_END,function(t){e(t)})},t.TouchNodeCancel=function(t,e){t.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e(t)})},t.TouchNodeMove=function(t,e){t.on(cc.Node.EventType.TOUCH_MOVE,function(t){e(t)})},t.ScrollSelect=function(){},t}();n.UIEventCenter=i,cc._RF.pop()},{"../frame/audio/AudioManager":"AudioManager","./StringUtil":"StringUtil"}],UIGameController:[function(t,e,n){"use strict";cc._RF.push(e,"4cf65cvW4VOybiCnKEQDsuc","UIGameController");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../other/UIBaseController"),s=t("../../../base/script/frame/ui/UIManager"),l=t("../view/UIGame"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.OpenUI=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,s.UIManager.OpenUI(l.default)];case 1:return t.sent(),[2]}})})},e.prototype.CloseUI=function(){s.UIManager.CloseUI(l.default)},e.prototype.Reset=function(){},e}(a.UIBaseController);n.default=c,n.UIGameController=new c,cc._RF.pop()},{"../../../base/script/frame/ui/UIManager":"UIManager","../../other/UIBaseController":"UIBaseController","../view/UIGame":"UIGame"}],UIGame:[function(t,e,n){"use strict";cc._RF.push(e,"8a1c9+1xmhD6YxV1oUi28UD","UIGame");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/clog/Clog"),s=t("../../../base/script/frame/ui/UIBase"),l=t("../../../base/script/frame/ui/UIEnum"),c=t("../../../base/script/global/SS"),u=t("../../common/controller/http/HttpApi"),h=t("../../Constance"),f=t("../../other/EnumCenter"),p=t("../../result/controller/UIResultController"),d=t("../../room/controller/RoomController"),m=t("../../util/CollitionFixForce"),y=t("../../util/UtilityEx"),g=t("../component/AngleComponent"),C=t("../component/BallComponent"),_=t("../component/CountDownComponent"),v=t("../component/CueComponent"),b=t("../component/EffectComponent"),S=t("../component/EndBallComponent"),I=t("../component/FreeBallComponent"),w=t("../component/GameTipsComponent"),R=t("../component/GuideComponent"),E=t("../component/GuideLineComponent"),U=t("../component/HoleComponent"),T=t("../component/PlayerComponent"),B=t("../component/PowerComponent"),M=t("../component/TableComponent"),P=t("../component/TargetBallComponent"),O=t("../component/VsComponent"),A=t("../controller/AIController"),G=t("../controller/GameDataController"),D=t("../controller/UIGameController"),k=t("../entity/EffectInHole"),x=t("../model/GameUserData"),L=t("./../../other/EnumCenter"),N=t("../../../base/script/frame/ui/UIManager"),F=t("../../result/view/UIResult"),j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIGame",e.OpenTween=l.EnumUIOpenTween.NormalOpen,e.CloseTween=l.EnumUICloseTween.NormalClose,e._bg=null,e._animVS=null,e._angleComponent=null,e._cueComponent=null,e._tableComponent=null,e._powerControl=null,e._ballComponent=null,e._guideLineComponent=null,e._endBallComponent=null,e._playerComponent=null,e._holeComponent=null,e._gameTipComponent=null,e._targetBallComponent=null,e._freeBallComponent=null,e._countDownComponent=null,e._vsComponent=null,e._effectComponent=null,e._guideComponent=null,e._componentArray=[],e._btnReset=null,e.controlCount=0,e.curInitCount=0,e.canHit=!0,e.curRule=f.EnumRuleType.Continue,e.linkNum=0,e.firstHitBallNum=-1,e.isBallEightInHole=!1,e.isMyBallInHole=!1,e.isHisBallInHole=!1,e.isWhiteBallInHole=!1,e.firstInHoleBallNum=-1,e.hitBallResultType=L.EnumHitBallResult.Noraml,e.bInit=!1,e.bConfirmBallColor=!1,e}return o(e,t),e.prototype.onLoad=function(){A.default.Switch&&A.default.Init(),this.setupPhysicsManager(),this.curInitCount=0,this.initRoot(),this.initEvent(),this.initData(),this.selfAdaption(),this.initControl()},e.prototype.onEnable=function(){d.RoomController.ChatRoomState=f.EnumChatRoomState.Other},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.start=function(){},e.prototype.selfAdaption=function(){cc.find("Entry").getComponent(cc.Canvas);var t=G.GameDataController.GetWinSize().height/G.GameDataController.GetWinSize().width,e=1;t>16/9?e=t/(16/9):t<16/9&&(e=16/9/t),this._bg.node.scale=e},e.prototype.refreshUI=function(){var t=this;if(d.RoomController.Seats.forEach(function(e){if(0===e.BiPosition){var n=x.GameUserData.FromRoomSeatData(e);t._playerComponent.SetPlayerLeftData(n),(o=d.RoomController.GetSelfGameSeat())&&0===o.BiPosition&&(G.GameDataController.MyBallColorType=e.BiDecor),t._targetBallComponent.SetLeftTargetBall(e.BiHoledBalls,e.BiDecor)}else if(1===e.BiPosition){var o;n=x.GameUserData.FromRoomSeatData(e);t._playerComponent.SetPlayerRightData(n),(o=d.RoomController.GetSelfGameSeat())&&1===o.BiPosition&&(G.GameDataController.MyBallColorType=e.BiDecor),t._targetBallComponent.SetRightTargetBall(e.BiHoledBalls,e.BiDecor)}},this),d.RoomController.CurRoom.BiBalls&&d.RoomController.CurRoom.BiBalls.balls&&d.RoomController.CurRoom.BiBalls.balls.length>0&&0===this._ballComponent.GetAllBall().length){this._ballComponent.CreateBallWithInfo(d.RoomController.CurRoom.BiBalls);var e=[];d.RoomController.CurRoom.BiBalls.holed_balls.forEach(function(t){e.push(t.number)}),this._targetBallComponent.SyncNetInfo(e),this._endBallComponent.RefreshEndBall(this._ballComponent.GetAllInHoleBall()),d.RoomController.CurRoom.BiBallArm.hasOwnProperty("power")}},e.prototype.setupPhysicsManager=function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,0),t.enabledAccumulator=!1},e.prototype.initData=function(){G.GameDataController.TableSize.x=this._tableComponent.node.getContentSize().width,G.GameDataController.TableSize.y=this._tableComponent.node.getContentSize().height,G.GameDataController.TableLeftBorder=cc.find("Table/Border/Left",this.node).getPosition(),G.GameDataController.TableRightBorder=cc.find("Table/Border/Right",this.node).getPosition(),G.GameDataController.TableTopBorder=cc.find("Table/Border/Top",this.node).getPosition(),G.GameDataController.TableBottomBorder=cc.find("Table/Border/Bottom",this.node).getPosition()},e.prototype.initEvent=function(){c.SS.EventCenter.on(f.EnumGameMessageType.GameInit,this.onGameInit,this),c.SS.EventCenter.on(f.EnumGameMessageType.BallMoveEnd,this.onBallMoveEnd,this),c.SS.EventCenter.on(f.EnumGameMessageType.BallInHole,this.onBallInHole,this),c.SS.EventCenter.on(f.EnumGameMessageType.GameAgain,this.onGameAgain,this),c.SS.EventCenter.on(f.EnumGameMessageType.StartTurn,this.onStartTurn,this),c.SS.EventCenter.on(f.EnumGameMessageType.NextTurn,this.onNextTurn,this),c.SS.EventCenter.on(f.EnumGameMessageType.WhiteBallCollition,this.onWhiteBallCollition,this),c.SS.EventCenter.on(f.EnumGameMessageType.GameEnd,this.onGameEnd,this),c.SS.EventCenter.on(f.EnumGameMessageType.PlayerCountDownComplete,this.onPlayerCountDownComplete,this),c.SS.EventCenter.on(f.EnumGameMessageType.FreeBallPut,this.onFreeBallPut,this),c.SS.EventCenter.on(f.EnumGameMessageType.AngleChangeStart,this.onAngleChangeStart,this),c.SS.EventCenter.on(f.EnumGameMessageType.AngleChange,this.onAngleChange,this),c.SS.EventCenter.on(f.EnumGameMessageType.AngleChangeEnd,this.onAngleChangeEnd,this),c.SS.EventCenter.on(f.EnumGameMessageType.CueHitComplete,this.onCueHitComplete,this),c.SS.EventCenter.on(f.EnumGameMessageType.TableTouchStart,this.onTableTouchStart,this),c.SS.EventCenter.on(f.EnumGameMessageType.TableTouchMove,this.onTableTouchMove,this),c.SS.EventCenter.on(f.EnumGameMessageType.TableTouchEnd,this.onTableTouchEnd,this),c.SS.EventCenter.on(f.EnumGameMessageType.PowerValueChangeStart,this.onPowerValueChangeStart,this),c.SS.EventCenter.on(f.EnumGameMessageType.PowerValueChange,this.onPowerValueChange,this),c.SS.EventCenter.on(f.EnumGameMessageType.PowerValueChangeEnd,this.onPowerValueChangeEnd,this),c.SS.EventCenter.on(f.EnumGameMessageType.ClickBall,this.onClickBall,this),c.SS.EventCenter.on(f.EnumGameMessageType.GameStateChange,this.onGameStateChange,this),c.SS.EventCenter.on(f.EnumGameMessageType.VsAnimFinish,this.onVsAnimFinish,this),c.SS.EventCenter.on(f.EnumGameMessageType.InHole,this.onInHole,this),c.SS.EventCenter.on(f.EnumGameMessageType.NetSyncData,this.onNetSyncData,this),c.SS.EventCenter.on(f.EnumGameMessageType.OnShow,this.onShow,this),c.SS.EventCenter.on(L.EnumWsSync.BallArm,this.onSetBallArm,this),c.SS.EventCenter.on(L.EnumWsSync.RoomRefresh,this.onRoomRefresh,this),c.SS.EventCenter.on(L.EnumWsSync.CueBall,this.onSyncCueBallMove,this),this._btnReset.on(cc.Node.EventType.TOUCH_END,function(){c.SS.EventCenter.emit(f.EnumGameMessageType.GameAgain)},this)},e.prototype.removeEvent=function(){c.SS.EventCenter.off(f.EnumGameMessageType.GameInit,this.onGameInit,this),c.SS.EventCenter.off(f.EnumGameMessageType.BallMoveEnd,this.onBallMoveEnd,this),c.SS.EventCenter.off(f.EnumGameMessageType.BallInHole,this.onBallInHole,this),c.SS.EventCenter.off(f.EnumGameMessageType.GameAgain,this.onGameAgain,this),c.SS.EventCenter.off(f.EnumGameMessageType.StartTurn,this.onStartTurn,this),c.SS.EventCenter.off(f.EnumGameMessageType.NextTurn,this.onNextTurn,this),c.SS.EventCenter.off(f.EnumGameMessageType.WhiteBallCollition,this.onWhiteBallCollition,this),c.SS.EventCenter.off(f.EnumGameMessageType.GameEnd,this.onGameEnd,this),c.SS.EventCenter.off(f.EnumGameMessageType.PlayerCountDownComplete,this.onPlayerCountDownComplete,this),c.SS.EventCenter.off(f.EnumGameMessageType.FreeBallPut,this.onFreeBallPut,this),c.SS.EventCenter.off(f.EnumGameMessageType.AngleChangeStart,this.onAngleChangeStart,this),c.SS.EventCenter.off(f.EnumGameMessageType.AngleChange,this.onAngleChange,this),c.SS.EventCenter.off(f.EnumGameMessageType.AngleChangeEnd,this.onAngleChangeEnd,this),c.SS.EventCenter.off(f.EnumGameMessageType.CueHitComplete,this.onCueHitComplete,this),c.SS.EventCenter.off(f.EnumGameMessageType.TableTouchStart,this.onTableTouchStart,this),c.SS.EventCenter.off(f.EnumGameMessageType.TableTouchMove,this.onTableTouchMove,this),c.SS.EventCenter.off(f.EnumGameMessageType.TableTouchEnd,this.onTableTouchEnd,this),c.SS.EventCenter.off(f.EnumGameMessageType.PowerValueChangeStart,this.onPowerValueChangeStart,this),c.SS.EventCenter.off(f.EnumGameMessageType.PowerValueChange,this.onPowerValueChange,this),c.SS.EventCenter.off(f.EnumGameMessageType.PowerValueChangeEnd,this.onPowerValueChangeEnd,this),c.SS.EventCenter.off(f.EnumGameMessageType.ClickBall,this.onClickBall,this),c.SS.EventCenter.off(f.EnumGameMessageType.GameStateChange,this.onGameStateChange,this),c.SS.EventCenter.off(f.EnumGameMessageType.VsAnimFinish,this.onVsAnimFinish,this),c.SS.EventCenter.off(f.EnumGameMessageType.InHole,this.onInHole,this),c.SS.EventCenter.off(f.EnumGameMessageType.NetSyncData,this.onNetSyncData,this),c.SS.EventCenter.off(f.EnumGameMessageType.OnShow,this.onShow,this),c.SS.EventCenter.off(L.EnumWsSync.BallArm,this.onSetBallArm,this),c.SS.EventCenter.off(L.EnumWsSync.RoomRefresh,this.onRoomRefresh,this),c.SS.EventCenter.off(L.EnumWsSync.CueBall,this.onSyncCueBallMove,this)},e.prototype.getControl=function(t,e){this.controlCount++;var n=cc.find(t,this.node).addComponent(e);return this._componentArray.push(n),n},e.prototype.initRoot=function(){this._bg=cc.find("Bg",this.node).getComponent(cc.Sprite),this._angleComponent=this.getControl("Angle",g.default),this._cueComponent=this.getControl("Cue",v.default),this._tableComponent=this.getControl("Table",M.default),this._powerControl=this.getControl("Power",B.default),this._ballComponent=this.getControl("Table/Balls",C.default),this._guideLineComponent=this.getControl("GuideLine",E.default),this._endBallComponent=this.getControl("EndBall",S.default),this._playerComponent=this.getControl("PlayerContainer",T.default),this._holeComponent=this.getControl("Table/Holes",U.default),this._gameTipComponent=this.getControl("GameTips",w.default),this._targetBallComponent=this.getControl("TargetBall",P.default),this._freeBallComponent=this.getControl("Table/FreeBall",I.default),this._countDownComponent=this.getControl("CountDown",_.default),this._vsComponent=this.getControl("VS",O.default),this._effectComponent=this.getControl("EffectContainer",b.default),this._guideComponent=this.getControl("Guide",R.default),cc.find("Table/Border/Top",this.node).addComponent(m.default).SetFixForce(new cc.Vec2(0,-h.Constance.BORDER_FIX_POWER)),cc.find("Table/Border/Left",this.node).addComponent(m.default).SetFixForce(new cc.Vec2(h.Constance.BORDER_FIX_POWER,0)),cc.find("Table/Border/Right",this.node).addComponent(m.default).SetFixForce(new cc.Vec2(-h.Constance.BORDER_FIX_POWER,0)),cc.find("Table/Border/Bottom",this.node).addComponent(m.default).SetFixForce(new cc.Vec2(0,h.Constance.BORDER_FIX_POWER)),this._btnReset=cc.find("BtnReset",this.node)},e.prototype.initControl=function(){this._componentArray.forEach(function(t){t.Init()})},e.prototype.resetControl=function(){this._componentArray.forEach(function(t){t.Reset()})},e.prototype.reset=function(){this.linkNum=0,this.firstHitBallNum=-1,this.isBallEightInHole=!1,this.isMyBallInHole=!1,this.isHisBallInHole=!1,this.isWhiteBallInHole=!1,this.firstInHoleBallNum=-1,this.canHit=!0,this.curRule=f.EnumRuleType.Continue,G.GameDataController.Reset(),p.UIResultController.Reset(),D.UIGameController.Reset(),this.resetControl(),this._ballComponent.EnableWhiteBall(!0),this._freeBallComponent.HideFreeBall(),this.bInit=!1,this.bConfirmBallColor=!1},e.prototype.startGame=function(){G.GameDataController.IsGameStart=!0;var t=this._cueComponent.node.parent.convertToNodeSpaceAR(this._ballComponent.GetWhiteBallPos());a.default.Trace(a.ClogKey.UI,"onGameInit position = "+t),this._cueComponent.Show(t),this._guideLineComponent.DrawGuideLine(-180,this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall()),G.GameDataController.StartTurn()},e.prototype.checkAllBallMoveEnd=function(){G.GameDataController.IsGameStart&&this._ballComponent.IsAllBallMoveEnd()&&!this.canHit&&(this.canHit=!0,d.RoomController.IsMyRound()&&this.checkRule(),this.resetGameOnceState())},e.prototype.curRoundLastStep=function(){if(this._ballComponent.IsInitComplete()){var t=this._cueComponent.node.parent.convertToNodeSpaceAR(this._ballComponent.GetWhiteBallPos());a.default.Trace(a.ClogKey.UI,"checkAllBallMoveEnd position = "+t),this.curRule!=f.EnumRuleType.FreeBall&&(this._cueComponent.Show(t),this._guideLineComponent.DrawGuideLine(this._cueComponent.node.angle,this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall())),this._ballComponent.SaveLastRoundValue(),G.GameDataController.GameState===f.EnumGameState.HitBall&&(G.GameDataController.GameState=f.EnumGameState.ReadyToHit)}},e.prototype.showFreeBall=function(){A.default.Switch?G.GameDataController.NextTurn(1):(this._guideComponent.ShowFreeBall(this._ballComponent.GetWhiteBallLocalPos()),G.GameDataController.GameState=f.EnumGameState.FreeBallIdle,this.curRule=f.EnumRuleType.FreeBall,this._gameTipComponent.ShowGameTipOther(f.EnumGameTipsType.Foul,d.RoomController.GetGameSeat((d.RoomController.CurRoom.GetCurrentPosition()+1)%2)),this._freeBallComponent.ShowFreeBall(this._ballComponent.GetWhiteBallLocalPos(),this._ballComponent.GetAllActiveBallPos()),this._ballComponent.EnableWhiteBall(!1),G.GameDataController.NextTurn(45))},e.prototype.resetToLastRoundValue=function(){this._ballComponent.ResetToLastRoundValue(),this._targetBallComponent.ResetToLastRoundValue(this._ballComponent.GetAllBall()),this._endBallComponent.ResetToLastRoundValue(this._ballComponent.GetAllBall())},e.prototype.checkBallEightInHole=function(){this._targetBallComponent.GetRemainBallNum(d.RoomController.CurRoom.BiCurrent)>1&&(this.resetToLastRoundValue(),this.showFreeBall())},e.prototype.confirmBallColorTypeWithNetInfo=function(){var t=d.RoomController.GetSelfGameSeat();if(t&&G.GameDataController.MyBallColorType===f.EnumBallColorType.None&&t.BiDecor!==f.EnumBallColorType.None&&(G.GameDataController.MyBallColorType=t.BiDecor,G.GameDataController.MyBallColorType===f.EnumBallColorType.Full?this._gameTipComponent.ShowGameTip(f.EnumGameTipsType.HitFullBall):this._gameTipComponent.ShowGameTip(f.EnumGameTipsType.HitHalfBall),c.SS.EventCenter.emit(f.EnumGameMessageType.ConfirmBallColorType,G.GameDataController.MyBallColorType),this.curRule=f.EnumRuleType.Continue),!t&&!this.bConfirmBallColor){this.bConfirmBallColor=!0;var e=d.RoomController.GetGameSeat(0);e.BiDecor===f.EnumBallColorType.Full?this._gameTipComponent.ShowGameTipOther(f.EnumGameTipsType.HitFullBall,e):this._gameTipComponent.ShowGameTipOther(f.EnumGameTipsType.HitHalfBall,e)}},e.prototype.linkCue=function(){this.linkNum++,this.linkNum>=3&&this._gameTipComponent.ShowLink(this.linkNum)},e.prototype.processRule=function(t){var e=this;switch(t){case L.EnumHitBallResult.Noraml:G.GameDataController.NextTurn();break;case L.EnumHitBallResult.EightHole:this.checkBallEightInHole();break;case L.EnumHitBallResult.CueBallHoled:case L.EnumHitBallResult.ShootEight:this.showFreeBall();break;case L.EnumHitBallResult.EightAndCueBallHoled:this.resetToLastRoundValue(),this.showFreeBall();break;case L.EnumHitBallResult.NoShotCueBallHoled:G.GameDataController.GameState=f.EnumGameState.FreeBallIdle,this.curRule=f.EnumRuleType.FreeBall,this.scheduleOnce(function(){e.showFreeBall()},.5);break;case L.EnumHitBallResult.NoShot:this.showFreeBall();break;case L.EnumHitBallResult.NoDecorEightHoled:this.resetToLastRoundValue(),this.showFreeBall();break;case L.EnumHitBallResult.Holed:this.confirmBallColorTypeWithNetInfo(),G.GameDataController.IsFirstHit,this._countDownComponent.StartCountDown(d.RoomController.CurRoom.GetCurrentPosition());break;case L.EnumHitBallResult.ShootOpponent:this.showFreeBall();break;case L.EnumHitBallResult.ShootOpponentEightHoled:this.resetToLastRoundValue(),this.showFreeBall();break;case L.EnumHitBallResult.NoShoot:this._guideComponent.Hide(),this._ballComponent.EnableWhiteBall(!0),this._freeBallComponent.HideFreeBall(),this._guideLineComponent.Hide(),this._cueComponent.Hide(),this.showFreeBall()}},e.prototype.checkRule=function(){this.curRule=f.EnumRuleType.NextPlayer,this.hitBallResultType=L.EnumHitBallResult.Noraml,this._guideComponent.Hide(),8===this.firstHitBallNum?this.isBallEightInHole?this.hitBallResultType=L.EnumHitBallResult.EightHole:this.isWhiteBallInHole?this.hitBallResultType=L.EnumHitBallResult.CueBallHoled:d.RoomController.IsMyRound()&&!this.isMyBallInHole&&this._targetBallComponent.GetRemainBallNum(d.RoomController.CurRoom.BiCurrent)<=1?this.hitBallResultType=L.EnumHitBallResult.Noraml:!d.RoomController.IsMyRound()&&this._targetBallComponent.GetRemainBallNum((d.RoomController.CurRoom.BiCurrent+1)%2)<=1&&A.default.Switch?this.hitBallResultType=L.EnumHitBallResult.Noraml:this.hitBallResultType=L.EnumHitBallResult.ShootEight:this.isWhiteBallInHole?this.isBallEightInHole?this.hitBallResultType=L.EnumHitBallResult.EightAndCueBallHoled:-1===this.firstHitBallNum?this.hitBallResultType=L.EnumHitBallResult.NoShotCueBallHoled:this.hitBallResultType=L.EnumHitBallResult.CueBallHoled:-1===this.firstHitBallNum?this.hitBallResultType=L.EnumHitBallResult.NoShot:G.GameDataController.MyBallColorType===f.EnumBallColorType.None?-1!=this.firstInHoleBallNum?this.isBallEightInHole?this.hitBallResultType=L.EnumHitBallResult.NoDecorEightHoled:this.hitBallResultType=L.EnumHitBallResult.Holed:this.hitBallResultType=L.EnumHitBallResult.Noraml:d.RoomController.IsMyRound()&&(y.BallNumToBallColorType(this.firstHitBallNum)===G.GameDataController.MyBallColorType?this.isBallEightInHole?this.hitBallResultType=L.EnumHitBallResult.EightHole:this.isMyBallInHole?this.hitBallResultType=L.EnumHitBallResult.Holed:this.hitBallResultType=L.EnumHitBallResult.Noraml:y.BallNumToBallColorType(this.firstHitBallNum)!=G.GameDataController.MyBallColorType&&(this.isBallEightInHole?this.hitBallResultType=L.EnumHitBallResult.ShootOpponentEightHoled:this.hitBallResultType=L.EnumHitBallResult.ShootOpponent)),d.RoomController.IsMyRound()&&u.default.ShootResult(this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall(),this._ballComponent.GetAllInHoleBall(),this.hitBallResultType,G.GameDataController.IsFirstHit?1:0),-1!=this.firstHitBallNum&&(G.GameDataController.IsFirstHit=!1)},e.prototype.resetGameOnceState=function(){this.firstHitBallNum=-1,this.isBallEightInHole=!1,this.isMyBallInHole=!1,this.isHisBallInHole=!1,this.isWhiteBallInHole=!1,this.firstInHoleBallNum=-1,this.curRule=f.EnumRuleType.Continue,this.canHit=!0,a.default.SkyBlue(a.ClogKey.UI,"---\x3e resetGameOnceState")},e.prototype.processAllBalls=function(t){this._ballComponent.RefreshBall(t._options.data);var e=[];t._options.data.holed_balls.forEach(function(t){e.push(t.number)}),this._targetBallComponent.SyncNetInfo(e),this._endBallComponent.RefreshEndBall(this._ballComponent.GetAllInHoleBall()),this.canHit=!0},e.prototype.processInit=function(t){N.UIManager.IsActive((new F.default).PrefabName)&&(p.UIResultController.CloseUI(),this.reset()),d.RoomController.IsMyRound()?G.GameDataController.IsFirstHit=!0:this._ballComponent.CreateBallWithInfo(t._options.data),this._vsComponent.Show()},e.prototype.processContinue=function(t){var e=Number(t._options.data.continuous_times);e>=3&&this._gameTipComponent.ShowLinkOther(e,d.RoomController.GetGameSeat(d.RoomController.CurRoom.GetCurrentPosition())),this.processRule(L.EnumHitBallResult.Holed),this.curRoundLastStep()},e.prototype.processPass=function(t){var e=t._options.data;if(a.default.SkyBlue(a.ClogKey.UI,"\u5f53\u524d\u56de\u5408\u7ed3\u675f next_round_position = "+e.next_round_position+", result = "+e.result),y.CheckValue(e.next_round_position)){var n=e.result;this.processRule(n),this.curRoundLastStep()}},e.prototype.processShoot=function(t){if(!d.RoomController.IsMyRound()){var e=t._options.data;0!=e.power&&(G.GameDataController.GameState=f.EnumGameState.HitBall),this._cueComponent.ForceSetData({power:e.power,angle:e.angle}),G.GameDataController.GameState!==f.EnumGameState.FreeBallIdle&&G.GameDataController.GameState!==f.EnumGameState.FreeBallMove&&G.GameDataController.GameState!==f.EnumGameState.FreeBallPut||(c.SS.EventCenter.emit(f.EnumGameMessageType.FreeBallPut,this._ballComponent.GetWhiteBallLocalPos()),this._freeBallComponent.PutFreeBall(),this._guideLineComponent.Hide()),this._cueComponent.Hit(),G.GameDataController.IsFirstHit&&(G.GameDataController.IsFirstHit=!1)}},e.prototype.processResult=function(t){var e=t._options.data;this.reset(),p.UIResultController.OpenUIWait(this._gameTipComponent,e)},e.prototype.onTableTouchStart=function(){d.RoomController.IsMyRound()&&(this._guideComponent.Show(),this._guideComponent.StartPowerTipsCountDown())},e.prototype.onTableTouchMove=function(t,e){if(G.GameDataController.IsGameStart&&d.RoomController.IsMyRound()&&G.GameDataController.GameState==f.EnumGameState.ReadyToHit){var n=0,o=this.node.convertToNodeSpaceAR(this._ballComponent.GetWhiteBallPos());n=Math.abs(t.x)>Math.abs(t.y)?e.y>o.y?t.x:-t.x:e.x>o.x?-t.y:t.y,a.default.Gray(a.ClogKey.UI,"touchPos.x = "+e.x+", touchPos.y = "+e.y+", whiteBallPos.x = "+o.x+", whiteBallPos.y = "+o.y),this._cueComponent.Rotate(n/10),this._guideLineComponent.DrawGuideLine(this._cueComponent.node.angle,this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall())}},e.prototype.onTableTouchEnd=function(t){d.RoomController.IsMyRound()},e.prototype.onAngleChangeStart=function(){G.GameDataController.IsGameStart&&this._guideComponent.Show()},e.prototype.onAngleChange=function(t){G.GameDataController.IsGameStart&&d.RoomController.IsMyRound()&&G.GameDataController.GameState==f.EnumGameState.ReadyToHit&&(this._cueComponent.Rotate(t/10),this._guideLineComponent.DrawGuideLine(this._cueComponent.node.angle,this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall()))},e.prototype.onAngleChangeEnd=function(){},e.prototype.onPowerValueChangeStart=function(){this._guideComponent.Show()},e.prototype.onPowerValueChange=function(t){G.GameDataController.IsGameStart&&G.GameDataController.GameState==f.EnumGameState.ReadyToHit&&(this._cueComponent.SetPower(t),this._guideLineComponent.Hide())},e.prototype.onPowerValueChangeEnd=function(t){G.GameDataController.IsGameStart&&(0!=t&&(G.GameDataController.GameState=f.EnumGameState.HitBall),0===t?this._guideLineComponent.Show():(this._cueComponent.SendHit(),this._cueComponent.Hit()))},e.prototype.onGameInit=function(){if(this.curInitCount++,a.default.Trace(a.ClogKey.UI,"onGameInit count = "+this.curInitCount+" / "+this.controlCount),this.curInitCount===this.controlCount){if(this.refreshUI(),!d.RoomController.IsMyRound()||d.RoomController.CurRoom.BiBalls.balls&&0!==d.RoomController.CurRoom.BiBalls.balls.length||this._ballComponent.CreateBallNet(),d.RoomController.CurRoom.BiBalls&&d.RoomController.CurRoom.BiBalls.balls&&d.RoomController.CurRoom.BiBalls.balls.length>0){G.GameDataController.IsGameStart=!0;var t=this._cueComponent.node.parent.convertToNodeSpaceAR(this._ballComponent.GetWhiteBallPos());this._cueComponent.Show(t),this._guideLineComponent.DrawGuideLine(-180,this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall()),G.GameDataController.NextTurn(d.RoomController.GetRemainTime())}this.bInit=!0}},e.prototype.onVsAnimFinish=function(){this.startGame()},e.prototype.onBallMoveEnd=function(){this.checkAllBallMoveEnd()},e.prototype.onInHole=function(t){this._effectComponent.Show(k.default,t.convertToWorldSpaceAR(cc.Vec2.ZERO))},e.prototype.onBallInHole=function(t){G.GameDataController.IsGameStart&&(-1===this.firstInHoleBallNum&&(this.firstInHoleBallNum=t),this.isBallEightInHole||(a.default.SkyBlue(a.ClogKey.UI,"---\x3e onBallInHole = "+t),8===t?this.isBallEightInHole=!0:0===t?this.isWhiteBallInHole=!0:y.BallNumToBallColorType(t)===G.GameDataController.MyBallColorType?this.isMyBallInHole=!0:y.BallNumToBallColorType(t)!=G.GameDataController.MyBallColorType&&y.BallNumToBallColorType(t)!=f.EnumBallColorType.None&&(this.isHisBallInHole=!0),this.checkAllBallMoveEnd()))},e.prototype.onWhiteBallCollition=function(t){G.GameDataController.IsGameStart&&(a.default.Cyan(a.ClogKey.UI,"---\x3e onWhiteBallCollition = "+t+", firstHitBallNum = "+this.firstHitBallNum),-1==this.firstHitBallNum&&(a.default.Cyan(a.ClogKey.UI,"---\x3e firstHitBallNum = "+this.firstHitBallNum),this.firstHitBallNum=t))},e.prototype.onGameAgain=function(){this.reset(),this._vsComponent.Show()},e.prototype.onStartTurn=function(){if(G.GameDataController.IsGameStart){if(this._freeBallComponent.ShowFreeBallStart(this._ballComponent.GetWhiteBallLocalPos(),this._ballComponent.GetAllActiveBallPos()),this._countDownComponent.StartCountDown(d.RoomController.CurRoom.GetCurrentPosition()),d.RoomController.GetSelfGameSeat())d.RoomController.IsMyRound()&&(this._gameTipComponent.ShowGameTip(f.EnumGameTipsType.MyStartBall),this._guideComponent.Show());else{var t=d.RoomController.GetGameSeat(0),e=d.RoomController.GetGameSeat(1);t.BiPosition===d.RoomController.CurRoom.GetCurrentPosition()&&this._gameTipComponent.ShowGameTipOther(f.EnumGameTipsType.MyStartBall,t),e.BiPosition===d.RoomController.CurRoom.GetCurrentPosition()&&this._gameTipComponent.ShowGameTipOther(f.EnumGameTipsType.MyStartBall,e)}A.default.Switch&&c.SS.EventCenter.emit(f.EnumGameMessageType.NetSyncData,A.default.GetGameHitData())}},e.prototype.onNextTurn=function(t){if(this.linkNum=0,G.GameDataController.IsGameStart&&(this._countDownComponent.StartCountDown(d.RoomController.CurRoom.GetCurrentPosition(),t),this.curRule!==f.EnumRuleType.FreeBall)){if(d.RoomController.GetSelfGameSeat())d.RoomController.IsMyRound()&&(this._gameTipComponent.ShowGameTip(f.EnumGameTipsType.YourRound),this._guideComponent.Show(),this._guideComponent.StartMoveTipsCountDown());else{var e=d.RoomController.GetGameSeat(0),n=d.RoomController.GetGameSeat(1);e.BiPosition===d.RoomController.CurRoom.GetCurrentPosition()&&this._gameTipComponent.ShowGameTipOther(f.EnumGameTipsType.YourRound,e),n.BiPosition===d.RoomController.CurRoom.GetCurrentPosition()&&this._gameTipComponent.ShowGameTipOther(f.EnumGameTipsType.YourRound,n)}A.default.Switch&&c.SS.EventCenter.emit(f.EnumGameMessageType.NetSyncData,A.default.GetGameHitData())}},e.prototype.onGameEnd=function(){G.GameDataController.IsGameStart=!1,this._countDownComponent.StopCountDown()},e.prototype.onPlayerCountDownComplete=function(t){this._guideComponent.Hide(),this._ballComponent.EnableWhiteBall(!0),this._freeBallComponent.HideFreeBall(),this._guideLineComponent.Hide(),this._cueComponent.Hide(),d.RoomController.IsMyRound(),this.resetGameOnceState()},e.prototype.onFreeBallPut=function(t){G.GameDataController.GameState=f.EnumGameState.ReadyToHit,this.curRule=f.EnumRuleType.Continue,this.canHit=!0,this._ballComponent.SetWhiteBallLocalPos(t);var e=this._cueComponent.node.parent.convertToNodeSpaceAR(this._ballComponent.GetWhiteBallPos());this._cueComponent.Show(e),this._guideLineComponent.DrawGuideLine(this._cueComponent.node.angle,this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall()),this._ballComponent.EnableWhiteBall(!0),this._guideComponent.StartMoveTipsCountDown()},e.prototype.onCueHitComplete=function(t,e){a.default.Cyan(a.ClogKey.UI,"GameDataController.IsGameStart = "+G.GameDataController.IsGameStart+", this.curRule = "+this.curRule+", this.canHit = "+this.canHit),G.GameDataController.IsGameStart&&this.curRule!==f.EnumRuleType.FreeBall&&(this.canHit&&(this._ballComponent.HitWhiteBall(t,e),this._countDownComponent.StopCountDown()),this.canHit=!1)},e.prototype.onClickBall=function(t){if(G.GameDataController.IsGameStart&&G.GameDataController.GameState==f.EnumGameState.ReadyToHit&&d.RoomController.IsMyRound()){var e=y.RadianToAngle(cc.v2(this._ballComponent.GetWhiteBall().node.position.sub(t.node.position)).signAngle(cc.Vec2.UP));this._cueComponent.SetRotation(-e),this._guideLineComponent.DrawGuideLine(this._cueComponent.node.angle,this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall())}},e.prototype.onGameStateChange=function(t,e){switch(t){case f.EnumGameState.FreeBallMove:this.canHit=!1,this.curRule=f.EnumRuleType.FreeBall,this._ballComponent.EnableWhiteBall(!1),this._guideLineComponent.Hide(),this._cueComponent.Hide();break;case f.EnumGameState.HitBall:this._freeBallComponent.HideFreeBall()}},e.prototype.onNetSyncData=function(t){this._cueComponent.Rotate(t.Angle),this._cueComponent.SetPower(t.Power),this._cueComponent.Hit()},e.prototype.onSetBallArm=function(t){d.RoomController.IsMyRound()||(this._freeBallComponent.HideFreeBall(),this._ballComponent.EnableWhiteBall(!0),this._cueComponent.RefreshFromServerData(t),this._guideLineComponent.DrawGuideLine(this._cueComponent.node.angle,this._ballComponent.GetWhiteBall(),this._ballComponent.GetAllActiveBall()),0!==t.power&&this._guideLineComponent.Hide())},e.prototype.onShow=function(){a.default.Cyan(a.ClogKey.UI,"=== UIGame onShow === "),0!==this._ballComponent.GetAllBall().length&&(a.default.Cyan(a.ClogKey.UI,"RemainTime = "+this._countDownComponent.GetRemainTime()),a.default.Cyan(a.ClogKey.UI,"HideTime = "+G.GameDataController.HideTime),a.default.Cyan(a.ClogKey.UI,"ShowTime = "+G.GameDataController.HideTime),this._countDownComponent.GetRemainTime()>=G.GameDataController.HideTime-G.GameDataController.ShowTime&&G.GameDataController.NextTurn(this._countDownComponent.GetRemainTime()-(G.GameDataController.HideTime-G.GameDataController.ShowTime)))},e.prototype.onSyncCueBallMove=function(t){if(t&&t.op)if("moved"===t.op){if(d.RoomController.IsMyRound())return;G.GameDataController.GameState!==f.EnumGameState.FreeBallIdle&&G.GameDataController.GameState!==f.EnumGameState.FreeBallMove&&G.GameDataController.GameState!==f.EnumGameState.FreeBallPut||this._guideLineComponent.Hide(),c.SS.EventCenter.emit(f.EnumGameMessageType.FreeBallPut,new cc.Vec2(t.location.x,t.location.y)),this._freeBallComponent.PutFreeBall()}else if("moving"===t.op){if(d.RoomController.IsMyRound())return;this._freeBallComponent.SyncPosition(t)}},e.prototype.onRoomRefresh=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){if(t)if(t._options&&t._options.op&&t._options.data)switch(t._options.op){case L.EnumWsSync.AllBalls:this.resetGameOnceState(),this.processAllBalls(t);break;case L.EnumWsSync.Init:this.processInit(t);break;case L.EnumWsSync.Continue:this.processContinue(t);break;case L.EnumWsSync.Pass:this.resetGameOnceState(),this.processPass(t);break;case L.EnumWsSync.Shoot:this.processShoot(t);break;case L.EnumWsSync.Result:this.processResult(t)}else this.refreshUI();return[2]})})},e}(s.UIBase);n.default=j,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../Constance":"Constance","../../common/controller/http/HttpApi":"HttpApi","../../other/EnumCenter":"EnumCenter","../../result/controller/UIResultController":"UIResultController","../../result/view/UIResult":"UIResult","../../room/controller/RoomController":"RoomController","../../util/CollitionFixForce":"CollitionFixForce","../../util/UtilityEx":"UtilityEx","../component/AngleComponent":"AngleComponent","../component/BallComponent":"BallComponent","../component/CountDownComponent":"CountDownComponent","../component/CueComponent":"CueComponent","../component/EffectComponent":"EffectComponent","../component/EndBallComponent":"EndBallComponent","../component/FreeBallComponent":"FreeBallComponent","../component/GameTipsComponent":"GameTipsComponent","../component/GuideComponent":"GuideComponent","../component/GuideLineComponent":"GuideLineComponent","../component/HoleComponent":"HoleComponent","../component/PlayerComponent":"PlayerComponent","../component/PowerComponent":"PowerComponent","../component/TableComponent":"TableComponent","../component/TargetBallComponent":"TargetBallComponent","../component/VsComponent":"VsComponent","../controller/AIController":"AIController","../controller/GameDataController":"GameDataController","../controller/UIGameController":"UIGameController","../entity/EffectInHole":"EffectInHole","../model/GameUserData":"GameUserData","./../../other/EnumCenter":"EnumCenter"}],UIGiftEffect:[function(t,e,n){"use strict";cc._RF.push(e,"ea8e8xLaJtC9bQN2LKfTcNH","UIGiftEffect");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIBase"),s=t("../../../base/script/global/SS"),l=t("../../other/EventCommond"),c=t("../../../base/script/frame/ui/UIUtil"),u=t("../controller/GiftEffectController"),h=t("../../../base/script/frame/clog/Clog"),f=t("../../room/controller/RoomController"),p=t("../../../base/script/util/StringUtil"),d=t("../../xiyou/config/XiYouGiftConfig"),m=t("../../../base/script/frame/ui/UIEnum"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIGiftEffect",e.HierarchyType=m.EnumUIHierarchy.Fix,e.isPlaying=!1,e}return o(e,t),e.prototype.start=function(){this.initRoot(),this.initEvent()},e.prototype.initRoot=function(){this._texture=cc.find("Texture",this.node).getComponent(cc.Sprite),this._dragon=cc.find("Dragon",this.node).getComponent(dragonBones.ArmatureDisplay),this._sendInfo=cc.find("SendInfo",this.node),this._sendInfo.active=!1,this._texture.node.active=!1,this._dragon.node.active=!1},e.prototype.initEvent=function(){var t=this;s.SS.EventCenter.on(l.EventCommond.OnShowGiftEffect,function(){t.showNextGiftAnim()},this),s.SS.EventCenter.on(l.EventCommond.OnShowGiftCountTip,function(e){t.OnAnimGiftCount(e)},this)},e.prototype.onDestroy=function(){s.SS.EventCenter.off(l.EventCommond.OnShowGiftEffect),s.SS.EventCenter.off(l.EventCommond.OnShowGiftCountTip)},e.prototype.showNextGiftAnim=function(){return r(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return h.default.Green(h.ClogKey.UI,"showNextGiftAnim"),this.isPlaying?[2]:u.GiftEffectController.GiftEffectList.length<=0?[2]:(t=u.GiftEffectController.GiftEffectList.pop(),[4,this.OnAnimGiftShow(t)]);case 1:return e.sent()?(this.showNextGiftAnim(),[2]):[2]}})})},e.prototype.OnAnimGiftCount=function(t){var e=cc.instantiate(this._sendInfo);e.addComponent(g).Init(t),e.active=!0,e.setParent(this.node),e.setPosition(cc.v2(-175,0));var n=cc.moveTo(1.2,cc.v2(-175,300)),o=cc.delayTime(.2),r=cc.fadeOut(1.2),i=cc.callFunc(function(){return e.destroy()});e.runAction(cc.sequence(n,o,r,i))},e.prototype.OnAnimGiftShow=function(t){return r(this,void 0,Promise,function(){var e=this;return i(this,function(n){return[2,new Promise(function(n){return r(e,void 0,void 0,function(){var e,o,r,a,s,l,c,u=this;return i(this,function(i){switch(i.label){case 0:return this.isPlaying=!0,e=f.RoomController.GetGamePositionByUserId(t.From.UId),o=f.RoomController.GetGamePositionByUserId(t.To.UId),r=d.XiYouGiftTable.GetGiftConfigById(t.GiftId),a=r.Image,s=function(){if(o>=0){var t=0===o?f.RoomController.GameSeat1Pos:f.RoomController.GameSeat2Pos;return u.node.convertToNodeSpaceAR(t)}return u.node.convertToNodeSpaceAR(f.RoomController.AudiencePos)},l=function(){if(e>=0){var t=0===e?f.RoomController.GameSeat1Pos:f.RoomController.GameSeat2Pos;return u.node.convertToNodeSpaceAR(t)}return u.node.convertToNodeSpaceAR(f.RoomController.AudiencePos)}(),c=s(),[4,this.step1(a,l,cc.v2(0,0))];case 1:return i.sent(),[4,this.step2(t)];case 2:return i.sent(),[4,this.step3(a,cc.v2(0,0),c)];case 3:return i.sent(),this.isPlaying=!1,n(!0),[2]}})})})]})})},e.prototype.step1=function(t,e,n){return r(this,void 0,Promise,function(){var o=this;return i(this,function(a){return[2,new Promise(function(a){return r(o,void 0,void 0,function(){var o=this;return i(this,function(r){return this._texture.node.active=!0,c.UIUtil.ChangeSprite(t,this._texture),this._texture.node.setPosition(e),this._texture.node.runAction(cc.sequence(cc.moveTo(.5,n),cc.callFunc(function(){o._texture.node.active=!1,a(!0)}))),[2]})})})]})})},e.prototype.step2=function(t){return r(this,void 0,void 0,function(){var e,n;return i(this,function(o){switch(o.label){case 0:return h.default.Green(h.ClogKey.UI,"gift="+JSON.stringify(t)),this._dragon.node.active=!0,this._dragon.node.scale=.6,e=d.XiYouGiftTable.GetGiftConfigById(t.GiftId),n="xiyou/gift/"+e.AnimName,[4,c.UIUtil.LoadDragonBones(this._dragon,n,e.AnimName,"idle")];case 1:return o.sent(),this._dragon.node.active=!1,[2]}})})},e.prototype.step3=function(t,e,n){return r(this,void 0,Promise,function(){var o=this;return i(this,function(a){return[2,new Promise(function(a){return r(o,void 0,void 0,function(){var o=this;return i(this,function(r){return this._texture.node.active=!0,c.UIUtil.ChangeSprite(t,this._texture),this._texture.node.setPosition(e),this._texture.node.runAction(cc.sequence(cc.moveTo(.5,n),cc.callFunc(function(){o._texture.node.active=!1,a(!0)}))),[2]})})})]})})},e}(a.UIBase);n.UIGiftEffect=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.initRoot(),this.refresh()},e.prototype.initRoot=function(){this._playerIcon=cc.find("IconMask/Icon",this.node).getComponent(cc.Sprite),this._fromNameLabel=cc.find("FromName",this.node).getComponent(cc.Label),this._toNameLabel=cc.find("ToName",this.node).getComponent(cc.Label),this._giftIcon=cc.find("GiftIcon",this.node).getComponent(cc.Sprite),this._countLabel=cc.find("Count",this.node).getComponent(cc.Label)},e.prototype.refresh=function(){this._fromNameLabel.string=p.StringLimit(this.data.From.Name,14),this._toNameLabel.string=p.StringLimit(this.data.To.Name,14);var t=d.XiYouGiftTable.GetGiftConfigById(this.data.GiftId).Image;c.UIUtil.ChangeSprite(t,this._giftIcon),this._countLabel.string="X"+this.data.GiftNum.toString();var e=s.SS.ImageUrlProxy+this.data.From.Icon;c.UIUtil.LoadRemoteImage(e,this._playerIcon)},e}(cc.Component);cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/StringUtil":"StringUtil","../../other/EventCommond":"EventCommond","../../room/controller/RoomController":"RoomController","../../xiyou/config/XiYouGiftConfig":"XiYouGiftConfig","../controller/GiftEffectController":"GiftEffectController"}],UIGift:[function(t,e,n){"use strict";cc._RF.push(e,"ee319zrl41EkIZiV9Sikerh","UIGift");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../base/script/frame/ui/UIBase"),s=t("../../../../base/script/frame/ui/UIEnum"),l=t("../../../../base/script/frame/ui/UIManager"),c=t("../../../../base/script/util/UIEventCenter"),u=t("../../../entry/controller/EntryController"),h=t("../../../other/EnumCenter"),f=t("../../../xiyou/controller/XiYouGiftManager"),p=t("../gift/GiftPanel"),d=t("../tab/GiftTab"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIGift",e.HierarchyType=s.EnumUIHierarchy.Fix,e.OpenTween=s.EnumUIOpenTween.DrawerBottomOpen,e.CloseTween=s.EnumUICloseTween.DrawerBottomClose,e}return o(e,t),e.prototype.onLoad=function(){e.Instance=this,this.initRoot(),this.initSubPanel(),this.initEvent()},e.prototype.start=function(){this.refresh()},e.prototype.initRoot=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return this._btnMask=cc.find("Mask",this.node).getComponent(cc.Button),cc.find("Main/Tab",this.node).addComponent(d.GiftTab),[2]})})},e.prototype.initEvent=function(){var t=this;c.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.onBtnMaskClick()})},e.prototype.initSubPanel=function(){f.XiYouGiftManager.ResetCurSendGiftInfo(),this._panelGift=cc.find("Main/Gift",this.node),this._panelGift.active=!1,this._panelGift.addComponent(p.GiftPanel),this._panelGift.active=!0},e.prototype.onBtnMaskClick=function(){l.UIManager.CloseUI(e)},e.prototype.ShowSubPanel=function(t){this._panelBag.active=t==h.EnumGiftTab.Bag,this._panelGift.active=t==h.EnumGiftTab.Gift},e.prototype.refresh=function(){var t=cc.find("Main",this.node).getComponent(cc.Widget);u.EntryController.IphoneXUIFit([t],20)},e}(a.UIBase);n.UIGift=m,cc._RF.pop()},{"../../../../base/script/frame/ui/UIBase":"UIBase","../../../../base/script/frame/ui/UIEnum":"UIEnum","../../../../base/script/frame/ui/UIManager":"UIManager","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../entry/controller/EntryController":"EntryController","../../../other/EnumCenter":"EnumCenter","../../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager","../gift/GiftPanel":"GiftPanel","../tab/GiftTab":"GiftTab"}],UILoading:[function(t,e,n){"use strict";cc._RF.push(e,"bd981K+icFBRpQ0fWDFDhCQ","UILoading");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIEnum"),i=t("../../../base/script/frame/clog/Clog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOver=!1,e}return o(e,t),e.Open=function(t){t&&(e.defaultTime=t),e._instance.onOpen()},e.Close=function(){e._instance.onClose()},e.prototype.Init=function(){e._instance=this,this.node.zIndex=r.EnumUIHierarchy.Loading,this._rateIcon=cc.find("Rate/Process",this.node).getComponent(cc.Sprite),this._rate=cc.find("Rate",this.node)},e.prototype.onOpen=function(){i.default.Trace(i.ClogKey.UI,"\u3010\u6253\u5f00Loading\u3011"),this.isOver=!1,this.node.active=!0,this._rate.active=!0,this.time=e.defaultTime,this.timer=0},e.prototype.update=function(t){if(0!=this._rate.active){if(this.timer+=t,this.isOver){if(this.curRate=this.timer/this.time,this.timer>this.time)return void(this.node.active=!1)}else this.timer<.5*this.time?this.curRate=this.timer/this.time:(this.time+=t,this.curRate=this.timer/this.time);this._rateIcon.fillRange=-this.curRate}},e.prototype.onClose=function(){i.default.Trace(i.ClogKey.UI,"\u3010\u5173\u95edLoading\u3011"),1!=this.isOver&&(this.time=e.defaultTime,this.timer=this.time*this.curRate,this.isOver=!0)},e.defaultTime=1.5,e}(cc.Component);n.UILoading=a,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIEnum":"UIEnum"}],UILogin:[function(t,e,n){"use strict";cc._RF.push(e,"d493ad3eN9LbJMXwSLGwLN0","UILogin");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/clog/Clog"),s=t("../../../base/script/frame/ui/UIBase"),l=t("../../../base/script/util/UIEventCenter"),c=t("../../common/controller/createRoom/CreateRoomController"),u=t("../../room/controller/RoomController"),h=t("../controller/LoginController"),f=t("../../Constance"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UILogin",e.xiyouDebugInfo=[{id:30141,avatarUrl:"http://www.ttpaihang.com/image/vote/20140716110208870289.jpg",city:"\u65e0\u9521",country:"\u4e2d\u56fd",language:"\u4e2d\u6587",nickName:"\u4e01\u4fca\u6656",province:"\u6c5f\u82cf",gender:1},{id:30142,avatarUrl:"http://www.ttpaihang.com/image/vote/20140716110330282703.jpg",city:"\u827e\u585e\u514b\u65af",country:"\u82f1\u56fd",language:"\u82f1\u8bed",nickName:"\u7f57\u5c3c\xb7\u5965\u6c99\u5229\u6587",province:"\u82f1\u683c\u5170",gender:1},{id:30143,avatarUrl:"http://www.ttpaihang.com/image/vote/u141231134522469935.jpg",city:"\u5e03\u91cc\u65af\u6258\u5c14",country:"\u82f1\u56fd",language:"\u82f1\u8bed",nickName:"\u8d3e\u5fb7\xb7\u7279\u9c81\u59c6\u666e",province:"\u82f1\u683c\u5170",gender:1},{id:30144,avatarUrl:"http://www.ttpaihang.com/image/vote/20140716171356633486.jpg",city:"\u7231\u4e01\u5821",country:"\u82cf\u683c\u5170",language:"\u82f1\u8bed",nickName:"\u53f2\u8482\u82ac\xb7\u4ea8\u5f97\u5229",province:"\u82cf\u683c\u5170",gender:1},{id:30145,avatarUrl:"http://www.ttpaihang.com/image/vote/20140716170724310622.jpg",city:"\u6fb3\u5927\u5229\u4e9a",country:"\u6fb3\u5927\u5229\u4e9a",language:"\u82f1\u8bed",nickName:"\u5c3c\u5c14\xb7\u7f57\u4f2f\u900a",province:"\u6fb3\u5927\u5229\u4e9a",gender:1},{id:30146,avatarUrl:"http://www.ttpaihang.com/image/vote/20140716110428437257.jpg",city:"\u5317\u62c9\u7eb3\u514b\u90e1\u5a01\u8096",country:"\u82cf\u683c\u5170",language:"\u82f1\u8bed",nickName:"\u7ea6\u7ff0\xb7\u5e0c\u91d1\u65af",province:"\u5317\u62c9\u7eb3\u514b\u90e1\u5a01\u8096",gender:1},{id:30147,avatarUrl:"http://www.ttpaihang.com/image/vote/u190206200051140770.jpg",city:"\u5156\u5dde",country:"\u4e2d\u56fd",language:"\u4e2d\u6587",nickName:"\u6f58\u6653\u5a77",province:"\u5c71\u4e1c",gender:2}],e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.initRoot=function(){var t=this;this._btns=cc.find("LoginBtns",this.node),this._btns.active=!1,this._btnLoign=cc.find("LoginBtns/BtnLogin",this.node).getComponent(cc.Button),this._editBoxRId=cc.find("EditBoxRId",this.node).getComponent(cc.EditBox),this._grid=cc.find("Grid",this.node),this._grid.active=!0;var e=cc.find("Button",this.node);e.active=!1;for(var n=function(n){var r=o.xiyouDebugInfo[n],i=cc.instantiate(e);i.active=!0,i.setParent(o._grid),cc.find("Background/Label",i).getComponent(cc.Label).string=r.nickName.toString();var a=i.getComponent(cc.Button);l.UIEventCenter.ButtonEvent(a,function(){h.LoginController.DebugXiYouInfo=r,t.OnLogin()})},o=this,r=0;r<this.xiyouDebugInfo.length;r++)n(r)},e.prototype.initEvent=function(){var t=this;l.UIEventCenter.ButtonEvent(this._btnLoign,function(){t.onBtnLoginClick()})},e.prototype.onBtnLoginWithXiYouId=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){return h.LoginController.DebugXiYouInfo=t,this.OnLogin(),[2]})})},e.prototype.onBtnLoginClick=function(){a.default.Green(a.ClogKey.UI,"onBtnLoginClick"),this.OnLogin()},e.prototype.OnLogin=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,h.LoginController.Login()];case 1:return t.sent(),"\u4e01\u4fca\u6656"!=h.LoginController.DebugXiYouInfo.nickName?[3,3]:[4,c.CreateRoomController.CreateRoom(f.Constance.ROOM_NAME,f.Constance.ROOM_TYPE)];case 2:return t.sent(),[3,4];case 3:u.RoomController.OnJoinRoomId=Number(this._editBoxRId.string),t.label=4;case 4:return u.RoomController.OnJoinPassword="",[4,u.RoomController.JoinRoom()];case 5:return t.sent(),[2]}})})},e}(s.UIBase);n.UILogin=p,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/util/UIEventCenter":"UIEventCenter","../../Constance":"Constance","../../common/controller/createRoom/CreateRoomController":"CreateRoomController","../../room/controller/RoomController":"RoomController","../controller/LoginController":"LoginController"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"ca71b8VesFOSr54h0VFE18I","UIManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../util/ArrayUtil"),a=t("../../util/StringUtil"),s=t("../clog/Clog"),l=t("../res/ResManager"),c=t("./UITweenManager"),u=function(){function t(){this.OpenedUI=new Array,this.OnOpenUITag=new Array}return t.prototype.Init=function(t){this._root=t,this.OpenedUI=new Array,this.OnOpenUITag=new Array},t.prototype.OpenUI=function(t){return o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,u,h=this;return r(this,function(r){return e=(new t).PrefabName,a.IsNullOrEmpty(e)?(s.default.Error("Open UI -> UI Name is null! "),n(),[2,null]):null!=(o=this.OpenedUI.find(function(t){return t.PrefabName==e}))?(this.PrintOpenedUIList("Open UI -> UI Name is opened! name:"+e),i.ArrayRemove(this.OpenedUI,o),this.OpenedUI.push(o),this.SortOrder(),n(o),[2]):this.OnOpenUITag.find(function(t){return t==e})?(s.default.Warn(s.ClogKey.UI,"Open UI -> but UI is OnOpen, name:"+e),n(),[2]):(this.OnOpenUITag.push(e),this.PrintOnOpenUIList("Open UI -> before Open UI with name:"+e),u=function(){h.OnOpenUITag.find(function(t){return t==e})?(s.default.Trace(s.ClogKey.UI,"remove target Name from OnOpen List!"),i.ArrayRemove(h.OnOpenUITag,e)):s.default.Error("can not find onOpen UI name, targetName:"+e),h.PrintOnOpenUIList("Open UI -> After Open UI with name:"+e)},l.ResManager.LoadRes(e,cc.Prefab,function(o,r){if(o)return u(),s.default.Error("UIManager >> GetInstance >> node is null!, name:"+e+",err"+JSON.stringify(o)),void n();var i=cc.instantiate(r),a=i.addComponent(t);a.PrefabName=e,h._root.addChild(i),i.setPosition(0,0),u(),h.OpenedUI.push(a),h.SortOrder(),h.PrintOpenedUIList("After Open UI >>"+e),c.default.PlayOpenTween(a,function(){},function(){n(a)})}),[2])})})})]})})},t.prototype.CloseUI=function(t){var e=this;return new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,a=this;return r(this,function(r){return e=(new t).PrefabName,s.default.Orange(s.ClogKey.UI,"Close UI  -> UIName="+e),null==(o=this.OpenedUI.find(function(t){return t.PrefabName==e}))?(s.default.Warn(s.ClogKey.UI,"CloseUI -> target UI is null,name:"+e),n(),[2]):(c.default.PlayCloseTween(o,null,function(){o.node.destroy(),i.ArrayRemove(a.OpenedUI,o),a.PrintOpenedUIList("After Close UI :"+e),n()}),[2])})})})},t.prototype.CloseAll=function(){for(var t=0;t<this.OpenedUI.length;t++){var e=this.OpenedUI[t];e.node&&e.node.destroy()}this.OpenedUI=new Array,this.PrintOpenedUIList("After Close All UI")},t.prototype.IsActive=function(t){var e=this.OpenedUI.find(function(e){return e.PrefabName==t});return!!e&&e.node.active},t.prototype.SortOrder=function(){for(var t=0;t<this.OpenedUI.length;t++){var e=this.OpenedUI[t];e.node.zIndex=e.HierarchyType+2*t}},t.prototype.PrintOpenedUIList=function(t){if(void 0===t&&(t=null),this.OpenedUI.length<=0)s.default.Orange(s.ClogKey.UI,t+">>> Now Opened UI List is Empty");else{for(var e="",n=0;n<this.OpenedUI.length;n++){var o=this.OpenedUI[n];e=e+"\n[ name: "+o.PrefabName+", zIndex: "+o.node.zIndex+" ]"}s.default.Orange(s.ClogKey.UI,t+">>> Now  Opened UI List :"+e)}},t.prototype.PrintOnOpenUIList=function(t){if(void 0===t&&(t=null),this.OnOpenUITag.length<=0)s.default.Orange(s.ClogKey.UI,t+">>> Now OnOpen UI List is Empty");else{for(var e="",n=0;n<this.OnOpenUITag.length;n++){e=e+"\n[ name: "+this.OnOpenUITag[n]+" ]"}s.default.Orange(s.ClogKey.UI,t+">>> Now OnOpen UI List :"+e)}},t}();n.UIManager=new u,cc._RF.pop()},{"../../util/ArrayUtil":"ArrayUtil","../../util/StringUtil":"StringUtil","../clog/Clog":"Clog","../res/ResManager":"ResManager","./UITweenManager":"UITweenManager"}],UIMatching:[function(t,e,n){"use strict";cc._RF.push(e,"59b1avZyAdIy6+dU1Y8suoY","UIMatching");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIBase"),i=t("../../../base/script/util/UIEventCenter"),a=t("../../../base/script/frame/ui/UIUtil"),s=t("../../../base/script/frame/time/Time"),l=t("../../login/model/SessionData"),c=t("../../../base/script/global/SS"),u=t("../controller/MatchController"),h=t("../../../base/script/util/StringUtil"),f=t("./MatchPlayingItem"),p=t("../model/MatchPlayingUserInfo"),d=t("../../other/EnumCenter"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIMatching",e.curTime=0,e.posAry=[[-290,260],[260,220],[-290,-270],[270,-210]],e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){var t=this;this.schedule(function(){return t.refreshMatchTime()},1),this.refreshHeadView(),this.refreshMatchingView(),this.refreshMatchingMc(),u.MatchController.Start()},e.prototype.onDestroy=function(){var t=this;this.unschedule(function(){return t.refreshMatchTime()}),cc.Tween.stopAll(),this.removeEvent()},e.prototype.initRoot=function(){this._headIcon=cc.find("HeadMask/HeadIcon",this.node).getComponent(cc.Sprite),this._matchLabel=cc.find("MatchLabel",this.node).getComponent(cc.RichText),this._matchTime=cc.find("MatchTime",this.node).getComponent(cc.Label),this._playingView=cc.find("PlayingView",this.node),this._layout=cc.find("PlayingView/PlayingList/view/content",this.node),this._closeBtn=cc.find("CloseBtn",this.node).getComponent(cc.Button),this._anim1=cc.find("MatchingAnim/Anim1",this.node),this._anim2=cc.find("MatchingAnim/Anim2",this.node),this._anim2.active=!1,this._playingItem=cc.find("PlayingView/PlayingItem",this.node),this._playingItem.active=!1,this._smallAnim=cc.find("SmallAnim",this.node),this._singleSmallAnim=cc.find("SmallAnim/SmallMatchingAnim",this.node),this._singleSmallAnim.active=!1},e.prototype.initEvent=function(){var t=this;i.UIEventCenter.ButtonEvent(this._closeBtn,function(){return t.closeClick()}),c.SS.EventCenter.on(d.EnumGameMessageType.OnMatchingCountChange,this.refreshMatchingView,this)},e.prototype.removeEvent=function(){c.SS.EventCenter.off(d.EnumGameMessageType.OnMatchingCountChange,this.refreshMatchingView,this)},e.prototype.closeClick=function(){var t=this;this.unschedule(function(){return t.refreshMatchTime()}),u.MatchController.CloseMatch(!0)},e.prototype.refreshMatchTime=function(){this.curTime++,this._matchTime.string=s.Time.FormatTimeSec(this.curTime)},e.prototype.refreshMatchingView=function(){this._matchLabel.string=h.StringForamt("<b>\u5df2\u5339\u914d<color=#0fffff> {0} </color>\u4eba</b>",u.MatchController.MatchingCount),this.refreshPlayingView()},e.prototype.refreshMatchingMc=function(){this.playAnim(this._anim1,this._anim2);for(var t=0;t<4;t++){var e=cc.instantiate(this._singleSmallAnim);e.active=!0,e.parent=this._smallAnim,e.setPosition(this.posAry[t][0],this.posAry[t][1]);var n=cc.find("Anim1",e),o=cc.find("Anim2",e);this.playAnim(n,o)}},e.prototype.playAnim=function(t,e){var n=cc.tween(t),o=n.to(0,{scale:1,opacity:50}).to(2,{scale:4,opacity:0}).start();n.repeatForever(o).start(),e.active=!1,this.scheduleOnce(function(){e.active=!0;var t=cc.tween(e).to(0,{scale:1,opacity:50}).to(2,{scale:4,opacity:0}).start();t.repeatForever(t).start()},1)},e.prototype.refreshHeadView=function(){var t=c.SS.ImageUrlProxy+l.Session.BanBan.Icon;a.UIUtil.LoadRemoteImage(t,this._headIcon)},e.prototype.refreshPlayingView=function(){if(u.MatchController.PlayingList.length<=0)this._playingView.active=!1;else{this._playingView.active=!0;for(var t=0;t<this._layout.childrenCount;t++)this._layout.children[t].active=!1;for(t=0;t<u.MatchController.PlayingList.length;t++){var e=void 0,n=void 0,o=new p.MatchPlayingUserInfo(u.MatchController.PlayingList[t]);t>=this._layout.childrenCount?(n=(e=cc.instantiate(this._playingItem)).addComponent(f.default),e.parent=this._layout):n=(e=this._layout.children[t]).getComponent(f.default),e.active=!0,n.refreshView(o)}this._layout.getComponent(cc.Layout).updateLayout(),this._layout.getComponent(cc.Widget).updateAlignment()}},e}(r.UIBase);n.default=m,cc._RF.pop()},{"../../../base/script/frame/time/Time":"Time","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/StringUtil":"StringUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","../controller/MatchController":"MatchController","../model/MatchPlayingUserInfo":"MatchPlayingUserInfo","./MatchPlayingItem":"MatchPlayingItem"}],UIMicWaitItem:[function(t,e,n){"use strict";cc._RF.push(e,"2d2d77kNaFJiqArnpT4mWdk","UIMicWaitItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIUtil"),s=t("../../../base/script/global/SS"),l=t("../../other/EnumCenter"),c=t("../../../base/script/util/UIEventCenter"),u=t("../../../base/script/frame/ui/UIManager"),h=t("./UIMicWaitList"),f=t("../../common/view/UIToast"),p=t("../controller/MicWaitController"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){this.data=t,this.node.active=!0,this.initRoot(),this.initEvent(),this.Refresh()},e.prototype.initRoot=function(){this._userIcon=cc.find("Icon/Ring/Mask/Icon",this.node).getComponent(cc.Sprite),this._userName=cc.find("NameLabel",this.node).getComponent(cc.Label),this._sexNode=cc.find("Layout/SexAge",this.node),this._sexIcon=cc.find("Layout/SexAge/Sprite",this.node).getComponent(cc.Sprite),this._vipNode=cc.find("Layout/Vip",this.node),this._vipLabel=cc.find("Layout/Vip/Label",this.node).getComponent(cc.Label),this._timeLabel=cc.find("dateline",this.node).getComponent(cc.Label),this._btnJoinMic=cc.find("micBtn",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;c.UIEventCenter.ButtonEvent(this._btnJoinMic,function(){return t.onBtnJoinMicClick()})},e.prototype.onBtnJoinMicClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,p.MicWaitController.JoinMic(this.data.UId)];case 1:return t.sent()&&f.UIToast.Show("\u64cd\u4f5c\u6210\u529f"),u.UIManager.CloseUI(h.UIMicWaitList),p.MicWaitController.micWaitListCheck(),[2]}})})},e.prototype.Refresh=function(){this.refreshUserIcon(),this.refreshUserSex(),this.refreshUserName(),this.refreshUserVip(),this.refreshTime()},e.prototype.refreshUserIcon=function(){var t=s.SS.ImageUrlProxy+this.data.Icon;a.UIUtil.LoadRemoteImage(t,this._userIcon)},e.prototype.refreshUserSex=function(){switch(this.data.Sex){case l.EnumSex.Unknow:return void(this._sexNode.active=!1);case l.EnumSex.Female:return this._sexNode.active=!0,void a.UIUtil.ChangeSprite("T_Com_Female",this._sexIcon);case l.EnumSex.Male:return this._sexNode.active=!0,void a.UIUtil.ChangeSprite("T_Com_Male",this._sexIcon)}},e.prototype.refreshUserName=function(){this._userName.string=this.data.Name},e.prototype.refreshUserVip=function(){this.data.VipNew>0?this._vipNode.active=!0:this._vipNode.active=!1,this._vipLabel.string=this.data.VipNew.toString()},e.prototype.refreshTime=function(){this._timeLabel.string=this.data.Dateline},e}(cc.Component);n.UIMicWaitItem=d,cc._RF.pop()},{"../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../common/view/UIToast":"UIToast","../../other/EnumCenter":"EnumCenter","../controller/MicWaitController":"MicWaitController","./UIMicWaitList":"UIMicWaitList"}],UIMicWaitList:[function(t,e,n){"use strict";cc._RF.push(e,"193f2YmmJpISLRhJofMwzKa","UIMicWaitList");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIBase"),s=t("../../../base/script/frame/ui/UIEnum"),l=t("../../../base/script/frame/ui/UIManager"),c=t("../../../base/script/global/SS"),u=t("../../../base/script/util/UIEventCenter"),h=t("../../other/EventCommond"),f=t("../controller/MicWaitController"),p=t("./UIMicWaitItem"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIMicWaitList",e.HierarchyType=s.EnumUIHierarchy.Fix,e.OpenTween=s.EnumUIOpenTween.NormalOpen,e.CloseTween=s.EnumUICloseTween.NormalClose,e.allItem=new Array,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refreshMicWaitList()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._btnMask=cc.find("Mask",this.node).getComponent(cc.Button),this._item=cc.find("Bg/item",this.node),this._item.active=!1,this._content=cc.find("Bg/Grid/view/content",this.node)},e.prototype.initEvent=function(){var t=this;u.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.onBtnMaskClick()}),c.SS.EventCenter.on(h.EventCommond.UIMicWait,this.onRefresh,this)},e.prototype.removeEvent=function(){c.SS.EventCenter.off(h.EventCommond.UIMicWait,this.onRefresh,this)},e.prototype.onBtnMaskClick=function(){l.UIManager.CloseUI(e),f.MicWaitController.micWaitListCheck()},e.prototype.onRefresh=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,f.MicWaitController.micWaitListReq()];case 1:return t.sent(),this.refreshMicWaitList(),[2]}})})},e.prototype.refreshMicWaitList=function(){if(this.node){var t=f.MicWaitController.JoinMicWaitList;if(t.length>0){this._content.active=!0,this.allItem=new Array;for(var n=0;n<t.length;n++){var o,r,i=t[n];if(this._content.children[n])(o=this._content.children[n]).active=!0,(r=o.getComponent(p.UIMicWaitItem)).Init(i),this.allItem.push(r);else(o=cc.instantiate(this._item)).setParent(this._content),o.active=!0,(r=o.addComponent(p.UIMicWaitItem)).Init(i),this.allItem.push(r)}if(this._content.childrenCount>t.length)for(var a=t.length;a<this._content.childrenCount;a++)this._content.children[a].active=!1}else this._content.active=!1,l.UIManager.CloseUI(e),f.MicWaitController.micWaitListCheck()}},e}(a.UIBase);n.UIMicWaitList=d,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../other/EventCommond":"EventCommond","../controller/MicWaitController":"MicWaitController","./UIMicWaitItem":"UIMicWaitItem"}],UIMicWaiting:[function(t,e,n){"use strict";cc._RF.push(e,"be405GMoAxMO6f3HtgTwLhx","UIMicWaiting");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/clog/Clog"),s=t("../../../base/script/frame/ui/UIBase"),l=t("../../../base/script/frame/ui/UIEnum"),c=t("../../../base/script/frame/ui/UIManager"),u=t("../../../base/script/frame/ui/UIUtil"),h=t("../../../base/script/global/SS"),f=t("../../../base/script/util/UIEventCenter"),p=t("../../login/model/SessionData"),d=t("../../other/EnumCenter"),m=t("../controller/MicWaitController"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIMicWaiting",e.HierarchyType=l.EnumUIHierarchy.Fix,e.OpenTween=l.EnumUIOpenTween.NormalOpen,e.CloseTween=l.EnumUICloseTween.NormalClose,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent(),this.initData()},e.prototype.start=function(){this.onRefresh()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._btnMask=cc.find("Mask",this.node).getComponent(cc.Button),this._btnCancel=cc.find("Bg/cancelBtn",this.node).getComponent(cc.Button),this._userIcon=cc.find("Bg/item/Icon/Ring/Mask/Icon",this.node).getComponent(cc.Sprite),this._userName=cc.find("Bg/item/NameLabel",this.node).getComponent(cc.Label),this._sexNode=cc.find("Bg/item/Layout/SexAge",this.node),this._sexIcon=cc.find("Bg/item/Layout/SexAge/Sprite",this.node).getComponent(cc.Sprite),this._vipNode=cc.find("Bg/item/Layout/Vip",this.node),this._vipLabel=cc.find("Bg/item/Layout/Vip/Label",this.node).getComponent(cc.Label),this._datelineLabel=cc.find("Bg/item/dateline",this.node).getComponent(cc.Label)},e.prototype.initEvent=function(){var t=this;f.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.onBtnMaskClick()}),f.UIEventCenter.ButtonEvent(this._btnCancel,function(){return t.onBtnCancelClick()})},e.prototype.initData=function(){for(var t=0;t<m.MicWaitController.JoinMicWaitList.length;t++)if(m.MicWaitController.JoinMicWaitList[t].UId==p.Session.BanBan.UId){this.data=m.MicWaitController.JoinMicWaitList[t];break}},e.prototype.onBtnCancelClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,m.MicWaitController.JoinMicWaitCancel()];case 1:return t.sent(),c.UIManager.CloseUI(e),[2]}})})},e.prototype.onBtnMaskClick=function(){c.UIManager.CloseUI(e)},e.prototype.removeEvent=function(){},e.prototype.onRefresh=function(){this.data?(this.refreshUserIcon(),this.refreshUserName(),this.refreshUserVip(),this.refreshUserSex(),this.refreshTime()):a.default.Error("\u6392\u9ea6\u5217\u8868\u4e2d\u6ca1\u6709\u81ea\u5df1\uff1f\uff1f"+JSON.stringify(m.MicWaitController.JoinMicWaitList))},e.prototype.refreshUserIcon=function(){var t=h.SS.ImageUrlProxy+this.data.Icon;u.UIUtil.LoadRemoteImage(t,this._userIcon)},e.prototype.refreshUserSex=function(){switch(this.data.Sex){case d.EnumSex.Unknow:return void(this._sexNode.active=!1);case d.EnumSex.Female:return this._sexNode.active=!0,void u.UIUtil.ChangeSprite("T_Com_Female",this._sexIcon);case d.EnumSex.Male:return this._sexNode.active=!0,void u.UIUtil.ChangeSprite("T_Com_Male",this._sexIcon)}},e.prototype.refreshUserName=function(){this._userName.string=this.data.Name},e.prototype.refreshUserVip=function(){this.data.VipNew>0?this._vipNode.active=!0:this._vipNode.active=!1,this._vipLabel.string=this.data.VipNew.toString()},e.prototype.refreshTime=function(){this._datelineLabel.string=this.data.Dateline},e}(s.UIBase);n.UIMicWaiting=y,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","../controller/MicWaitController":"MicWaitController"}],UINewbieGuild:[function(t,e,n){"use strict";cc._RF.push(e,"d2d17cmtZZBjb+L4GQBxgBD","UINewbieGuild");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIBase"),i=t("../../../base/script/util/UIEventCenter"),a=t("../../../base/script/global/SS"),s=t("../../other/EventCommond"),l=t("../../../base/script/frame/res/ResUtil"),c=t("../control/NewbieGuildController"),u=t("../../../base/script/frame/clog/Clog"),h=t("../../../base/script/frame/ui/UIEnum"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UINewbieGuild",e.HierarchyType=h.EnumUIHierarchy.Tip,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._maskNode=cc.find("MaskNode",this.node),this._btnMask=cc.find("BtnMask",this.node).getComponent(cc.Button),this._tipText=cc.find("GuildTip/TipText",this.node).getComponent(cc.Label),this._guildTip=cc.find("GuildTip",this.node),this._icon=cc.find("GuildTip/Icon",this.node),this._arrow=cc.find("GuildTip/Arrow",this.node)},e.prototype.initEvent=function(){var t=this;a.SS.EventCenter.on(s.EventCommond.UINewbieGuildStep,this.refreshGuildView,this),i.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.btnMaskClick()})},e.prototype.removeEvent=function(){a.SS.EventCenter.off(s.EventCommond.UINewbieGuildStep,this.refreshGuildView,this)},e.prototype.btnMaskClick=function(){c.NewbieGuildController.GuildStepExecute()},e.prototype.refreshGuildView=function(t){t&&(this.data=t,this._maskNode.setPosition(t.maskPos),this._guildTip.setPosition(t.guildTipPos),this._guildTip.setContentSize(t.guildTipSize),this._icon.setPosition(t.iconPos),this._arrow.setPosition(t.arrowPos),this._arrow.setScale(t.arrowScale),this._tipText.string=t.text,l.ResUtil.ChangeSprite(t.iconName,this._icon.getComponent(cc.Sprite)),this.refreshPanelPosition())},e.prototype.refreshPanelPosition=function(){if(this.data){var t=cc.winSize.height/2-667;u.default.Trace(u.ClogKey.UI,"\u4e0a\u65b9offY:"+c.NewbieGuildController.QQTopWidget+"<<<<<winSize.offy:"+t),"flame"==this.data.guildName?(this._maskNode.y+=t,this._guildTip.y+=t,c.NewbieGuildController.QQTopWidget&&(this._maskNode.y-=c.NewbieGuildController.QQTopWidget),c.NewbieGuildController.QQTopWidget&&(this._guildTip.y-=c.NewbieGuildController.QQTopWidget)):(this._maskNode.y-=t,this._guildTip.y-=t,c.NewbieGuildController.ButtomWidget&&(this._maskNode.y+=c.NewbieGuildController.ButtomWidget),c.NewbieGuildController.ButtomWidget&&(this._guildTip.y+=c.NewbieGuildController.ButtomWidget))}},e}(r.UIBase);n.default=f,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/res/ResUtil":"ResUtil","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../other/EventCommond":"EventCommond","../control/NewbieGuildController":"NewbieGuildController"}],UIReadyController:[function(t,e,n){"use strict";cc._RF.push(e,"f77deXJFphG+Jao9v7RcEiA","UIReadyController");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIManager"),s=t("../view/UIReady"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.InitData=function(){},e.prototype.OpenUI=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,a.UIManager.OpenUI(s.default)];case 1:return t.sent(),this.GetData(),[2]}})})},e.prototype.CloseUI=function(){a.UIManager.CloseUI(s.default)},e.prototype.Reset=function(){},e.prototype.GetData=function(){},e}(t("../../other/UIBaseController").UIBaseController);n.default=l,n.UIReadyController=new l,cc._RF.pop()},{"../../../base/script/frame/ui/UIManager":"UIManager","../../other/UIBaseController":"UIBaseController","../view/UIReady":"UIReady"}],UIReadyPlayerSeat:[function(t,e,n){"use strict";cc._RF.push(e,"a7643fV5KpI1KlpsKQ3lTuH","UIReadyPlayerSeat");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIUtil"),s=t("../../../base/script/global/SS"),l=t("../../../base/script/util/StringUtil"),c=t("../../common/controller/qqShare/ShareManager"),u=t("../../../base/script/frame/clog/Clog"),h=t("../../emoji/controller/EmojiController"),f=t("../../other/EventCommond"),p=t("../../room/controller/RoomController"),d=t("../../../base/script/frame/ui/UIManager"),m=t("../../userDetail/controller/UserDetailController"),y=t("../../userDetail/view/UIUserDetail"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sprHead=null,e._labNickName=null,e._nodeReady=null,e._nodeSeat=null,e._nodeCreator=null,e._nodeMale=null,e._nodeFemale=null,e.data=null,e}return o(e,t),e.prototype.onDestroy=function(){this._sprHead.spriteFrame=null,this.removeEvent()},e.prototype.Init=function(){this.initRoot(),this.initEvent()},e.prototype.Clear=function(){this._nodeSeat.active=!1,this._sprHead.node.parent.parent.active=!1,this._labNickName.string="",this._nodeReady.active=!1},e.prototype.InitData=function(t){this.data=t,this.refreshUI()},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClickShare,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onClickHead,this),s.SS.EventCenter.on(f.EventCommond.UIPlayerEmoji,this.onEmoji,this),s.SS.EventCenter.on(f.EventCommond.UIRoomRefresh,this.refreshHeadFrame,this)},e.prototype.removeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClickShare,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onClickHead,this),s.SS.EventCenter.off(f.EventCommond.UIPlayerEmoji,this.onEmoji,this),s.SS.EventCenter.off(f.EventCommond.UIRoomRefresh,this.refreshHeadFrame,this)},e.prototype.ShowReady=function(){this._nodeReady.active=!0},e.prototype.HideReady=function(){this._nodeReady.active=!1},e.prototype.IsReady=function(){return this._nodeReady.active},e.prototype.ShowCreator=function(t){this._nodeCreator.active=t},e.prototype.initRoot=function(){this._nodeSeat=cc.find("Seat",this.node),this._sprHead=cc.find("Seat/HeadBg/HeadMask/Head",this.node).getComponent(cc.Sprite),this._labNickName=cc.find("Seat/ValueBg/LabNickName",this.node).getComponent(cc.Label),this._nodeReady=cc.find("Seat/Ready",this.node),this._nodeCreator=cc.find("Seat/Creator",this.node),this._nodeMale=cc.find("Seat/ValueBg/Male",this.node),this._nodeFemale=cc.find("Seat/ValueBg/Female",this.node),this._emoji=cc.find("Seat/Emoji",this.node).getComponent(cc.Animation),this._headFrame=cc.find("Seat/HeadFrame",this.node).getComponent(cc.Sprite),this._emoji.node.active=!1,this._emoji.on("finished",this.onEmojiFinished,this)},e.prototype.refreshUI=function(){this._nodeSeat.active=!0,this._sprHead.node.parent.parent.active=!0;var t=s.SS.ImageUrlProxy+this.data.HeadUrl;a.UIUtil.LoadRemoteImage(t,this._sprHead),this._labNickName.string=l.StringLimitForce(this.data.Name,8),this._nodeReady.active=!1},e.prototype.refreshHeadFrame=function(){if(this.data){var t=p.RoomController.GetGameSeat(this.data.SeatId);if(t)if(null!=t.HeadFrameIcon){this._headFrame.node.active=!0;var e="https://res-yqwsq.oclkj.com/game/commonres/item/icon/"+t.HeadFrameIcon;a.UIUtil.LoadRemoteImage(e,this._headFrame)}else this._headFrame.node.active=!1}},e.prototype.onClickShare=function(){this._nodeSeat.active||c.ShareManager.Share()},e.prototype.onEmoji=function(t){return r(this,void 0,void 0,function(){var e,n=this;return i(this,function(o){return this.data&&t.position==this.data.Position?(u.default.Green(u.ClogKey.UI,"onEmoji, emojiInfo:"+JSON.stringify(t)),this._emoji.node.active=!0,e=this._emoji.getComponent(cc.Sprite),h.EmojiController.CreatePlaceClip(t.emoji,function(o,a){return r(n,void 0,void 0,function(){return i(this,function(n){if("SpriteFrame"==o)e.spriteFrame=a,e.node.scale=.8;else{for(e.spriteFrame=null,e.node.scale=t.emoji.SeatScale;this._emoji.getClips().length>0;)this._emoji.removeClip(this._emoji.getClips()[0],!0);a&&(this._emoji.addClip(a,t.emoji.Id),this._emoji.play(t.emoji.Id))}return[2]})})}),[2]):[2]})})},e.prototype.onEmojiFinished=function(){this._emoji.node.active=!1},e.prototype.onClickHead=function(){m.UserDetailController.TargetUserId=this.data.Id,d.UIManager.OpenUI(y.UIUserDetail)},e}(cc.Component);n.default=g,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/StringUtil":"StringUtil","../../common/controller/qqShare/ShareManager":"ShareManager","../../emoji/controller/EmojiController":"EmojiController","../../other/EventCommond":"EventCommond","../../room/controller/RoomController":"RoomController","../../userDetail/controller/UserDetailController":"UserDetailController","../../userDetail/view/UIUserDetail":"UIUserDetail"}],UIReady:[function(t,e,n){"use strict";cc._RF.push(e,"b3d60s+DmtOV79J/6HtUXBD","UIReady");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../../base/script/frame/ui/UIBase"),l=t("../../../base/script/frame/ui/UIEnum"),c=t("../../../base/script/global/SS"),u=t("../../../base/script/util/UIEventCenter"),h=t("../../common/controller/http/HttpApi"),f=t("../../game/controller/GameDataController"),p=t("../../game/controller/UIGameController"),d=t("../../game/model/GameUserData"),m=t("../../login/model/SessionData"),y=t("../../other/EnumCenter"),g=t("../../room/controller/JoinMicController"),C=t("../../util/FYTipsMgr"),_=t("../controller/UIReadyController"),v=t("./../../room/controller/RoomController"),b=t("./UIReadyPlayerSeat"),S=t("../../xiyou/controller/XiYouController"),I=t("../../room/view/call/CallComponent"),w=cc._decorator,R=w.ccclass,E=(w.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIReady",e.OpenTween=l.EnumUIOpenTween.NormalOpen,e.CloseTween=l.EnumUICloseTween.NormalClose,e._bg=null,e._btnAdd=null,e._btnExit=null,e._btnReady=null,e._btnReadyGrey=null,e._btnStart=null,e._btnCall=null,e.playerSeat1=null,e.playerSeat2=null,e.mySeatId=0,e._bJoin=!1,e._bReady=!1,e._labBtnReady=null,e._readyCountDownHandler=0,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent(),this.initData(),this.selfAdaption(),this.refreshUI()},e.prototype.onEnable=function(){v.RoomController.ChatRoomState=y.EnumChatRoomState.Ready},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._bg=cc.find("Bg",this.node),this._btnAdd=cc.find("BtnAdd",this.node).getComponent(cc.Button),this._btnReady=cc.find("BtnReady",this.node).getComponent(cc.Button),this._btnReadyGrey=cc.find("BtnReadyGrey",this._btnReady.node),this._btnStart=cc.find("BtnStart",this.node).getComponent(cc.Button),this._btnExit=cc.find("BtnExit",this.node).getComponent(cc.Button),this.playerSeat1=cc.find("PlayerSeat1",this.node).addComponent(b.default),this.playerSeat2=cc.find("PlayerSeat2",this.node).addComponent(b.default),this._btnCall=cc.find("CallUp",this.node).addComponent(I.CallComponent),this._labBtnReady=cc.find("Label",this._btnReady.node).getComponent(cc.Label),v.RoomController.GameSeat1Pos=this.playerSeat1.node.parent.convertToWorldSpaceAR(this.playerSeat1.node.getPosition()),v.RoomController.GameSeat2Pos=this.playerSeat2.node.parent.convertToWorldSpaceAR(this.playerSeat2.node.getPosition())},e.prototype.initData=function(){this._btnAdd.node.active=!0,this._btnReady.node.active=!1,this._btnExit.node.active=!1,this._btnStart.node.active=!1,this.playerSeat1.Init(),this.playerSeat2.Init()},e.prototype.initEvent=function(){u.UIEventCenter.ButtonEvent(this._btnAdd,this.onClickBtnAdd.bind(this)),u.UIEventCenter.ButtonEvent(this._btnReady,this.onClickBtnReady.bind(this)),u.UIEventCenter.ButtonEvent(this._btnStart,this.onClickBtnStart.bind(this)),u.UIEventCenter.ButtonEvent(this._btnExit,this.onClickBtnExit.bind(this)),c.SS.EventCenter.on(y.EnumGameMessageType.ReadyAddGame,this.onReadyAdd,this),c.SS.EventCenter.on(y.EnumGameMessageType.ReadyExitGame,this.onReadyExitGame,this),c.SS.EventCenter.on(y.EnumGameMessageType.ReadyGame,this.onReady,this),c.SS.EventCenter.on(y.EnumGameMessageType.ReadyStartGame,this.onReadyStart,this),c.SS.EventCenter.on(y.EnumWsSync.RoomRefresh,this.onRoomRefresh,this)},e.prototype.removeEvent=function(){c.SS.EventCenter.off(y.EnumGameMessageType.ReadyAddGame,this.onReadyAdd,this),c.SS.EventCenter.off(y.EnumGameMessageType.ReadyExitGame,this.onReadyExitGame,this),c.SS.EventCenter.off(y.EnumGameMessageType.ReadyGame,this.onReady,this),c.SS.EventCenter.off(y.EnumGameMessageType.ReadyStartGame,this.onReadyStart,this),c.SS.EventCenter.off(y.EnumWsSync.RoomRefresh,this.onRoomRefresh,this)},e.prototype.selfAdaption=function(){cc.find("Entry").getComponent(cc.Canvas);var t=f.GameDataController.GetWinSize().height/f.GameDataController.GetWinSize().width,e=1;t>16/9?e=t/(16/9):t<16/9&&(e=16/9/t),this._bg.scale=e},e.prototype.startReadyCountDown=function(){var t=this,e=20;this._readyCountDownHandler=window.setInterval(function(){e--,t._labBtnReady.string="\u51c6\u5907 "+e,0===e&&(h.default.Ready(),t.stopReadyCountDown())},1e3)},e.prototype.stopReadyCountDown=function(){window.clearInterval(this._readyCountDownHandler),this._labBtnReady.string="\u51c6\u5907"},e.prototype.refreshStateAndBtn=function(t,e,n){if(e===y.EnumUserStatus.Wait)n&&(this._btnAdd.node.active=!1,this._btnExit.node.active=!0,this.mySeatId=t,this._btnStart.node.active=!1,this._btnReady.node.active=!0),1===t?this.playerSeat1.HideReady():(this.playerSeat2.HideReady(),(o=v.RoomController.GetSelfGameSeat())&&(1===o.BiPosition&&0===this._readyCountDownHandler?this.startReadyCountDown():this.stopReadyCountDown()));else if(e===y.EnumUserStatus.Ready){var o;if(n&&(this._btnAdd.node.active=!1,this._btnExit.node.active=!0,this.mySeatId=t,this._btnStart.node.active=1===this.mySeatId,this._btnReady.node.active=1!==this.mySeatId),1===t)this.playerSeat1.ShowReady();else this.playerSeat2.ShowReady(),(o=v.RoomController.GetSelfGameSeat())&&(1===o.BiPosition?(this._btnReadyGrey.active=!0,this.stopReadyCountDown()):this._btnReadyGrey.active=!1)}},e.prototype.refreshUI=function(){var t=this,e=v.RoomController.GetHasPlayerSeatData(),n=e.length;n===v.RoomController.MaxPlayerSeatNum&&void 0==v.RoomController.GetSelfGameSeat()?(this._btnAdd.node.active=!1,this._btnExit.node.active=!1,this._btnReady.node.active=!1,this._btnStart.node.active=!1):n<v.RoomController.MaxPlayerSeatNum&&void 0==v.RoomController.GetSelfGameSeat()&&(this._btnAdd.node.active=!0,this._btnExit.node.active=!1,this._btnReady.node.active=!1,this._btnStart.node.active=!1);var o=!1,r=!1;this._bJoin||0!==n&&(1!==n||0===e[0].BiPosition||e[0].UId===m.Session.BanBan.UId)||(h.default.Join(),this._bJoin=!0),v.RoomController.Seats.forEach(function(e){if(0===e.BiPosition&&e.UId===e.BiOrigin){var n=d.GameUserData.FromRoomSeatData(e);t.playerSeat1.InitData(n),n.Id===m.Session.BanBan.UId&&(e.BiUserStatus!==y.EnumUserStatus.Wait||t._bReady||(h.default.Ready(),t._bReady=!0)),t.playerSeat1.ShowCreator(e.UId===v.RoomController.CreateorInfo.UId),t._btnCall.node.active=n.Id===m.Session.BanBan.UId,t.refreshStateAndBtn(1,e.BiUserStatus,n.Id===m.Session.BanBan.UId),o=!0}else if(1===e.BiPosition&&e.UId===e.BiOrigin){n=d.GameUserData.FromRoomSeatData(e);t.playerSeat2.InitData(n),t.playerSeat2.ShowCreator(e.UId===v.RoomController.CreateorInfo.UId),t.refreshStateAndBtn(2,e.BiUserStatus,n.Id===m.Session.BanBan.UId),r=!0}},this),o||this.playerSeat1.Clear(),r||this.playerSeat2.Clear()},e.prototype.onClickBtnAdd=function(){-1===v.RoomController.GetPositionByUserId(m.Session.BanBan.UId)&&g.JoinMicController.JoinMicAuto(),h.default.Join(),0===v.RoomController.GetPositionByUserId(m.Session.BanBan.UId)&&h.default.Ready(),h.default.TestSwitch&&(this.scheduleOnce(function(){h.default.JoinOtherTest()},1),this.scheduleOnce(function(){h.default.ReadyOtherTest()},2))},e.prototype.onClickBtnReady=function(){h.default.Ready()},e.prototype.onClickBtnStart=function(){return i(this,void 0,void 0,function(){return a(this,function(t){return this.playerSeat2.IsReady()?(h.default.Start(),this._btnStart.interactable=!1):C.FYTipsMgr.showTips("\u5bf9\u65b9\u8fd8\u6ca1\u6709\u51c6\u5907\u597d\uff01"),[2]})})},e.prototype.onClickBtnExit=function(){S.XiYouController.JumpToXiyou()},e.prototype.onReadyStart=function(){},e.prototype.onReadyAdd=function(t,e,n){var o=v.RoomController.GetSelfGameSeat();o&&(v.RoomController.IsPlayerSeatFull()&&o.BiUserStatus===y.EnumUserStatus.None||(1===t?(this.playerSeat1.InitData(e),this.playerSeat1.ShowReady()):this.playerSeat2.InitData(e),n&&(this._btnAdd.node.active=!1,this._btnExit.node.active=!0,this.mySeatId=t,this._btnStart.node.active=1===this.mySeatId,this._btnReady.node.active=1!==this.mySeatId)))},e.prototype.onReady=function(t){if(1===t)this.playerSeat1.ShowReady();else{this.playerSeat2.ShowReady();var e=v.RoomController.GetSelfGameSeat();e&&(1===e.BiPosition?(this._btnReadyGrey.active=!0,this.stopReadyCountDown()):this._btnReadyGrey.active=!1)}},e.prototype.onReadyExitGame=function(){},e.prototype.onRoomRefresh=function(t){return i(this,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:if(!t)return[3,6];if(!(t._options&&t._options.op&&t._options.data))return[3,5];switch(t._options.op){case y.EnumWsSync.Start:return[3,1]}return[3,3];case 1:return e=t._options.data,f.GameDataController.StartBallPosition=e.position,[4,p.UIGameController.OpenUI()];case 2:return n.sent(),_.UIReadyController.CloseUI(),[3,4];case 3:return[3,4];case 4:return[3,6];case 5:this.refreshUI(),n.label=6;case 6:return[2]}})})},e=r([R],e)}(s.UIBase));n.default=E,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../common/controller/http/HttpApi":"HttpApi","../../game/controller/GameDataController":"GameDataController","../../game/controller/UIGameController":"UIGameController","../../game/model/GameUserData":"GameUserData","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","../../room/controller/JoinMicController":"JoinMicController","../../room/view/call/CallComponent":"CallComponent","../../util/FYTipsMgr":"FYTipsMgr","../../xiyou/controller/XiYouController":"XiYouController","../controller/UIReadyController":"UIReadyController","./../../room/controller/RoomController":"RoomController","./UIReadyPlayerSeat":"UIReadyPlayerSeat"}],UIRecommendJoin:[function(t,e,n){"use strict";cc._RF.push(e,"bf030SWHU9OcYSq4oUR7MlK","UIRecommendJoin");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIBase"),s=t("../../../base/script/util/UIEventCenter"),l=t("../../../base/script/frame/clog/Clog"),c=t("../controller/RecommendJoinController"),u=t("./RecommendJoinItem"),h=t("../../../base/script/frame/ui/UIManager"),f=t("../../xiyou/controller/XiYouController"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIRecommendJoin",e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refreshAll()},e.prototype.initRoot=function(){this._btnReturn=cc.find("BtnReturn",this.node).getComponent(cc.Button),this._roomItem=cc.find("RoomItem",this.node),this._roomItem.active=!1,this._grid=cc.find("ScrollView/view/content",this.node)},e.prototype.initEvent=function(){var t=this;s.UIEventCenter.ButtonEvent(this._btnReturn,function(){t.OnBtnRetrunClick()})},e.prototype.refreshAll=function(){return r(this,void 0,void 0,function(){var t,e,n,o;return i(this,function(r){switch(r.label){case 0:return[4,c.RecommendJoinController.GetRecommend()];case 1:for(r.sent(),this.allRecomendRoomItem=new Array,t=0;t<c.RecommendJoinController.AllRecommendRoom.length;t++)e=c.RecommendJoinController.AllRecommendRoom[t],(n=cc.instantiate(this._roomItem)).setParent(this._grid),n.active=!0,(o=n.addComponent(u.RecommendJoinItem)).Init(e),this.allRecomendRoomItem.push(o);return[2]}})})},e.prototype.OnBtnRetrunClick=function(){l.default.Trace(l.ClogKey.UI,"OnBtnRetrunClick"),f.XiYouController.JumpToXiyou(),h.UIManager.CloseUI(e)},e}(a.UIBase);n.UIRecommendJoin=p,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/util/UIEventCenter":"UIEventCenter","../../xiyou/controller/XiYouController":"XiYouController","../controller/RecommendJoinController":"RecommendJoinController","./RecommendJoinItem":"RecommendJoinItem"}],UIResultController:[function(t,e,n){"use strict";cc._RF.push(e,"282f4Kk6p5KM56z4c4xlZBj","UIResultController");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIManager"),i=t("../view/UIResult"),a=t("../../other/UIBaseController"),s=t("../../other/EnumCenter"),l=t("../../../base/script/global/SS"),c=t("../../login/model/SessionData"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ScoreArray=[],e.ResultData=null,e.GameResultType=s.EnumGameResultType.None,e}return o(e,t),e.prototype.OpenUIWait=function(t,e){this.GameResultType=Number(e.winner.uid)===c.Session.BanBan.UId?s.EnumGameResultType.Win:s.EnumGameResultType.Fail,l.SS.EventCenter.emit(s.EnumGameMessageType.GameEnd),this.ResultData=e,this.OpenUI()},e.prototype.OpenUI=function(){r.UIManager.OpenUI(i.default)},e.prototype.CloseUI=function(){r.UIManager.CloseUI(i.default)},e.prototype.Reset=function(){this.ScoreArray=[],this.GameResultType=s.EnumGameResultType.None},e}(a.UIBaseController);n.default=u,n.UIResultController=new u,cc._RF.pop()},{"../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","../../other/UIBaseController":"UIBaseController","../view/UIResult":"UIResult"}],UIResult:[function(t,e,n){"use strict";cc._RF.push(e,"2a326G0coBGTatTCl4SxIWW","UIResult");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../../base/script/frame/ui/UIBase"),l=t("../../../base/script/frame/ui/UIEnum"),c=t("../../../base/script/frame/ui/UIManager"),u=t("../../../base/script/global/SS"),h=t("../../../base/script/util/UIEventCenter"),f=t("../../room/controller/RoomController"),p=t("../controller/UIResultController"),d=t("../../../base/script/frame/ui/UIUtil"),m=t("../../game/view/UIGame"),y=t("../../ready/view/UIReady"),g=t("../../login/model/SessionData"),C=cc._decorator,_=C.ccclass,v=(C.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIResult",e.OpenTween=l.EnumUIOpenTween.NormalOpen,e.CloseTween=l.EnumUICloseTween.NormalClose,e._labWinName=null,e._labWinScore=null,e._sprWinHead=null,e._labLoseName=null,e._labLoseScore=null,e._sprLoseHead=null,e._btnAgain=null,e._win=null,e._lose=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){this.initRoot(),this.initEvent(),this.initData()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._btnAgain=cc.find("BtnAgain",this.node),this._labWinName=cc.find("Win/LabNickName",this.node).getComponent(cc.Label),this._labWinScore=cc.find("Win/ValueBg/LabScore",this.node).getComponent(cc.Label),this._sprWinHead=cc.find("Win/HeadMask/Head",this.node).getComponent(cc.Sprite),this._labLoseName=cc.find("Lose/LabNickName",this.node).getComponent(cc.Label),this._labLoseScore=cc.find("Lose/ValueBg/LabScore",this.node).getComponent(cc.Label),this._sprLoseHead=cc.find("Lose/HeadMask/Head",this.node).getComponent(cc.Sprite),this._win=cc.find("WinLogo",this.node),this._lose=cc.find("LoseLogo",this.node)},e.prototype.initData=function(){var t=this;f.RoomController.Seats.forEach(function(e){if(e.UId===Number(p.UIResultController.ResultData.winner.uid)){t._labWinName.string=e.Name,t._labWinScore.string=p.UIResultController.ResultData.winner.score.toString();var n=u.SS.ImageUrlProxy+e.Icon;d.UIUtil.LoadRemoteImage(n,t._sprWinHead)}else if(e.UId===Number(p.UIResultController.ResultData.loser.uid)){t._labLoseName.string=e.Name,t._labLoseScore.string=p.UIResultController.ResultData.loser.score.toString();n=u.SS.ImageUrlProxy+e.Icon;d.UIUtil.LoadRemoteImage(n,t._sprLoseHead)}}),this._win.active=Number(p.UIResultController.ResultData.winner.uid)===g.Session.BanBan.UId,this._lose.active=Number(p.UIResultController.ResultData.loser.uid)===g.Session.BanBan.UId},e.prototype.initEvent=function(){h.UIEventCenter.ButtonEvent(this._btnAgain.getComponent(cc.Button),this.onClickBtnAgain.bind(this))},e.prototype.removeEvent=function(){},e.prototype.onClickBtnAgain=function(){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,c.UIManager.OpenUI(y.default)];case 1:return t.sent(),c.UIManager.CloseUI(m.default),c.UIManager.CloseUI(n),[2]}})})},e=n=r([_],e)}(s.UIBase));n.default=v,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../game/view/UIGame":"UIGame","../../login/model/SessionData":"SessionData","../../ready/view/UIReady":"UIReady","../../room/controller/RoomController":"RoomController","../controller/UIResultController":"UIResultController"}],UIRoomAdmin:[function(t,e,n){"use strict";cc._RF.push(e,"ff7d2ag08VO/7WIQcDr6kRE","UIRoomAdmin");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIBase"),s=t("../../../base/script/frame/ui/UIEnum"),l=t("../../../base/script/frame/ui/UIManager"),c=t("../../../base/script/util/UIEventCenter"),u=t("../../other/EnumCenter"),h=t("../../room/controller/RoomController"),f=t("../controller/RoomAdminController"),p=t("./AdminInfoItem"),d=t("./OnlineInfoItem"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIRoomAdmin",e.HierarchyType=s.EnumUIHierarchy.Fix,e.allRoomAdminItem=new Array,e.allRoomOnlineItem=new Array,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refresh()},e.prototype.initRoot=function(){this._mask=cc.find("Mask",this.node).getComponent(cc.Button),this._item=cc.find("Main/Item",this.node),this._item.active=!1,this._scrollview=cc.find("Main/ScrollView/view/content",this.node),this._scrollview.active=!1,this._tabOnline=cc.find("Main/Tab/Online",this.node).getComponent(cc.Button),this._tabAdmin=cc.find("Main/Tab/Admin",this.node).getComponent(cc.Button),this._tip=cc.find("Main/Tip",this.node),this._tip.active=!1,this._tabOnlineOn=cc.find("Main/Tab/Online/On",this.node),this._tabOnlineOff=cc.find("Main/Tab/Online/Off",this.node),this._tabAdminOn=cc.find("Main/Tab/Admin/On",this.node),this._tabAdminOff=cc.find("Main/Tab/Admin/Off",this.node)},e.prototype.initEvent=function(){var t=this;c.UIEventCenter.ButtonEvent(this._mask,function(){return t.onBtnMaskClick()}),c.UIEventCenter.ButtonEvent(this._tabOnline,function(){t.onTabOnlineClick()}),c.UIEventCenter.ButtonEvent(this._tabAdmin,function(){t.onTabAdminClick()})},e.prototype.onBtnMaskClick=function(){l.UIManager.CloseUI(e)},e.prototype.onTabOnlineClick=function(){this._tabOnlineOn.active=!0,this._tabOnlineOff.active=!1,this._tabAdminOn.active=!1,this._tabAdminOff.active=!0,this._scrollview.active=!0,this._tip.active=!1,this.allRoomOnlineItem.forEach(function(t){return t.node.active=!0}),this.allRoomAdminItem.forEach(function(t){return t.node.active=!1})},e.prototype.onTabAdminClick=function(){this._tabOnlineOn.active=!1,this._tabOnlineOff.active=!0,this._tabAdminOn.active=!0,this._tabAdminOff.active=!1,h.RoomController.Purview==u.EnumPurview.Createor?(this._scrollview.active=!0,this._tip.active=!1,this.allRoomOnlineItem.forEach(function(t){return t.node.active=!1}),this.allRoomAdminItem.forEach(function(t){return t.node.active=!0})):(this._tip.active=!0,this._scrollview.active=!1)},e.prototype.refresh=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.refreshAdminItem()];case 1:return t.sent(),[4,this.refreshOnlineItem()];case 2:return t.sent(),this.onTabOnlineClick(),[2]}})})},e.prototype.refreshOnlineItem=function(){return r(this,void 0,void 0,function(){var t,e,n,o;return i(this,function(r){switch(r.label){case 0:return[4,f.RoomAdminController.GetRoomOnlineInfo()];case 1:if(!r.sent())return[2];for(this.allRoomOnlineItem=new Array,t=0;t<f.RoomAdminController.AllOnlineInfo.length;t++)e=f.RoomAdminController.AllOnlineInfo[t],(n=cc.instantiate(this._item)).setParent(this._scrollview),(o=n.addComponent(d.OnlineInfoItem)).Init(e),this.allRoomOnlineItem.push(o);return[2]}})})},e.prototype.refreshAdminItem=function(){return r(this,void 0,void 0,function(){var t,e,n,o;return i(this,function(r){switch(r.label){case 0:return h.RoomController.Purview!=u.EnumPurview.Createor?[2]:[4,f.RoomAdminController.GetRoomAdminInfo()];case 1:if(!r.sent())return[2];for(this.allRoomAdminItem=new Array,t=0;t<f.RoomAdminController.AllAdminInfo.length;t++)e=f.RoomAdminController.AllAdminInfo[t],(n=cc.instantiate(this._item)).setParent(this._scrollview),(o=n.addComponent(p.AdminInfoItem)).Init(e),this.allRoomAdminItem.push(o);return[2]}})})},e}(a.UIBase);n.UIRoomAdmin=m,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/util/UIEventCenter":"UIEventCenter","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","../controller/RoomAdminController":"RoomAdminController","./AdminInfoItem":"AdminInfoItem","./OnlineInfoItem":"OnlineInfoItem"}],UIRoomSetting:[function(t,e,n){"use strict";cc._RF.push(e,"7c27ajxBO9HHZcmRGMMDlFC","UIRoomSetting");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIBase"),s=t("../../../base/script/util/UIEventCenter"),l=t("../../../base/script/frame/ui/UIManager"),c=t("../../../base/script/util/StringUtil"),u=t("../controller/RoomSettingController"),h=t("../../../base/script/frame/clog/Clog"),f=t("../../common/view/UIToast"),p=t("../../room/controller/RoomController"),d=t("../../entry/controller/EntryController"),m=t("../../../base/script/frame/ui/UIEnum"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HierarchyType=m.EnumUIHierarchy.Fix,e.PrefabName="P_UIRoomSetting",e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refresh()},e.prototype.initRoot=function(){this._mask=cc.find("Mask",this.node).getComponent(cc.Button),this._titleEditor=cc.find("Main/TitleInput/EditBox",this.node).getComponent(cc.EditBox),this._contentEditor=cc.find("Main/ContentInput/EditBox",this.node).getComponent(cc.EditBox),this._lockEditor=cc.find("Main/LockInput/EditBox",this.node).getComponent(cc.EditBox),this.resetInput(),this._btnSure=cc.find("Main/Layout/BtnSure",this.node).getComponent(cc.Button),this._btnCancel=cc.find("Main/Layout/BtnCancel",this.node).getComponent(cc.Button)},e.prototype.initEvent=function(){var t=this;s.UIEventCenter.ButtonEvent(this._mask,function(){return t.onBtnMaskClick()}),s.UIEventCenter.ButtonEvent(this._btnSure,function(){return t.onBtnSureClick()}),s.UIEventCenter.ButtonEvent(this._btnCancel,function(){return t.onBtnCancelClick()})},e.prototype.onBtnMaskClick=function(){l.UIManager.CloseUI(e)},e.prototype.onBtnSureClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return c.IsNullOrEmpty(this._titleEditor.string)?(f.UIToast.Show("\u623f\u95f4\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),[2]):c.IsNullOrEmpty(this._contentEditor.string)?(f.UIToast.Show("\u623f\u95f4\u516c\u544a\u4e0d\u80fd\u4e3a\u7a7a"),[2]):this._lockEditor.string.length>0&&(4!=this._lockEditor.string.length||isNaN(parseInt(this._lockEditor.string)))?(f.UIToast.Show("\u5bc6\u7801\u53ea\u80fd\u662f4\u4f4d\u6570\u5b57"),[2]):(h.default.Green(h.ClogKey.UI,"title:"+this._titleEditor.string+"\n content:"+this._contentEditor.string),u.RoomSettingController.RoomInfoSetting(this._titleEditor.string,this._contentEditor.string,this._lockEditor.string),l.UIManager.CloseUI(e),[2])})})},e.prototype.onBtnCancelClick=function(){l.UIManager.CloseUI(e)},e.prototype.resetInput=function(){this._titleEditor.string=p.RoomController.CurRoom.RoomName,this._contentEditor.string=p.RoomController.CurRoom.Description,this._lockEditor.string=p.RoomController.CurRoom.Password},e.prototype.refresh=function(){var t=cc.find("Main",this.node).getComponent(cc.Widget);d.EntryController.IphoneXUIFit([t],20)},e}(a.UIBase);n.UIRoomSetting=y,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/util/StringUtil":"StringUtil","../../../base/script/util/UIEventCenter":"UIEventCenter","../../common/view/UIToast":"UIToast","../../entry/controller/EntryController":"EntryController","../../room/controller/RoomController":"RoomController","../controller/RoomSettingController":"RoomSettingController"}],UIRoom:[function(t,e,n){"use strict";cc._RF.push(e,"4cad7KBG4pPip4YUTVDGMON","UIRoom");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../base/script/frame/clog/Clog"),s=t("../../../../base/script/frame/ui/UIBase"),l=t("../../../../base/script/frame/ui/UIEnum"),c=t("../../../../base/script/frame/ui/UIManager"),u=t("../../../../base/script/frame/ui/UIUtil"),h=t("../../../../base/script/global/SS"),f=t("../../../../base/script/global/SystemInfoManager"),p=t("../../../../base/script/util/StringUtil"),d=t("../../../../base/script/util/UIEventCenter"),m=t("../../../actionSheet/controller/ActionSheetController"),y=t("../../../common/controller/qqShare/ShareManager"),g=t("../../../common/view/UICommDia"),C=t("../../../common/view/UIToast"),_=t("../../../dress/controller/DressController"),v=t("../../../dress/view/UIDress"),b=t("../../../emoji/view/UIEmoji"),S=t("../../../entry/controller/EntryController"),I=t("../../../login/model/SessionData"),w=t("../../../micWait/controller/MicWaitController"),R=t("../../../micWait/view/UIMicWaiting"),E=t("../../../micWait/view/UIMicWaitList"),U=t("../../../newbie/control/NewbieGuildController"),T=t("../../../other/EnumCenter"),B=t("../../../other/EventCommond"),M=t("../../../roomAdmin/view/UIRoomAdmin"),P=t("../../../sendGift/model/GiftTargetData"),O=t("../../../sendGift/view/main/UIGift"),A=t("../../../topic/view/UITopic"),G=t("../../../xiyou/controller/XiYouController"),D=t("../../../xiyou/controller/XiYouGiftManager"),k=t("../../controller/ChatInputController"),x=t("../../controller/JoinMicController"),L=t("../../controller/RoomController"),N=t("../chat/Chat"),F=t("../chat/ChatInput"),j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIRoom",e.HierarchyType=l.EnumUIHierarchy.Fix,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refreshPanelPosition(),this.refreshPanel()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._btnReturn=cc.find("Top/BtnReturn",this.node).getComponent(cc.Button),this._hotLabel=cc.find("Top/Hot/Label",this.node).getComponent(cc.Label),this._roomName=cc.find("Top/RoomName",this.node).getComponent(cc.Label),this._roomId=cc.find("Top/RoomId/Number",this.node).getComponent(cc.Label),this._btnMore=cc.find("Top/BtnMore",this.node).getComponent(cc.Button),this._btnShare=cc.find("Top/BtnShare",this.node).getComponent(cc.Button),this._topWidget=cc.find("Top",this.node).getComponent(cc.Widget),this._bottomWidget=cc.find("Bottom",this.node).getComponent(cc.Widget),this._btnTopic=cc.find("Bottom/Right/BtnTopic",this.node).getComponent(cc.Button),this._btnGift=cc.find("Bottom/Right/BtnGift",this.node).getComponent(cc.Button),this._btnChat=cc.find("Bottom/Right/BtnChat",this.node).getComponent(cc.Button),this._btnEmoji=cc.find("Bottom/Right/BtnEmoji",this.node).getComponent(cc.Button),this._btnDress=cc.find("Bottom/Right/BtnDress",this.node).getComponent(cc.Button),this._btnOnMic=cc.find("Bottom/Left/BtnOnMic",this.node).getComponent(cc.Button),this._btnMicMute=cc.find("Bottom/Left/BtnMicMute",this.node).getComponent(cc.Button),this._btnMicUnmute=cc.find("Bottom/Left/BtnMicUnmute",this.node).getComponent(cc.Button),this._btnOpenChat=cc.find("Bottom/Left/BtnOpenChat",this.node).getComponent(cc.Button),this._btnHot=cc.find("Top/Hot",this.node).getComponent(cc.Button),this._roomTypeLabel=cc.find("Top/Type/Label",this.node).getComponent(cc.Label),this._btnCloseChat=cc.find("Chat/ChatContent/BtnCloseChat",this.node).getComponent(cc.Button),this._chat=cc.find("Chat",this.node),this._chat.addComponent(N.Chat),this._chatInput=cc.find("ChatInput",this.node),this._chatInput.addComponent(F.ChatInput),this._background=cc.find("Bg",this.node).getComponent(cc.Sprite),this._chatInput.active=!1,this._btnTopic.node.active=!1,this._joinMicTip=cc.find("Bottom/Left/BtnOnMic/joinMicTip",this.node),this._joinMicTip.active=!1,this._qqChatCloseBtn=cc.find("QQChatCloseBtn",this.node).getComponent(cc.Button),this._qqChatCloseBtn.node.active=!1,L.RoomController.AudiencePos=this._btnHot.node.parent.convertToWorldSpaceAR(this._btnHot.node.getPosition())},e.prototype.initEvent=function(){var t=this;d.UIEventCenter.ButtonEvent(this._btnReturn,function(){return t.onBtnReturnClick()}),d.UIEventCenter.ButtonEvent(this._btnMore,function(){return t.onBtnMoreClick()}),d.UIEventCenter.ButtonEvent(this._btnChat,function(){return t.onBtnChatClick()}),d.UIEventCenter.ButtonEvent(this._btnGift,function(){return t.onBtnGiftClick()}),d.UIEventCenter.ButtonEvent(this._btnEmoji,function(){return t.onBtnEmojiClick()}),d.UIEventCenter.ButtonEvent(this._btnOnMic,function(){return t.onBtnOnMicClick()}),d.UIEventCenter.ButtonEvent(this._btnMicMute,function(){return t.onBtnMicMuteClick()}),d.UIEventCenter.ButtonEvent(this._btnMicUnmute,function(){return t.onBtnMicUnmuteClick()}),d.UIEventCenter.ButtonEvent(this._btnTopic,function(){return t.onBtnTopic()}),d.UIEventCenter.ButtonEvent(this._btnHot,function(){t.onBtnHotClick()}),d.UIEventCenter.ButtonEvent(this._btnShare,function(){t.onBtnShareClick()}),d.UIEventCenter.ButtonEvent(this._qqChatCloseBtn,function(){t.onQQChatBtnCloseClick()}),d.UIEventCenter.ButtonEvent(this._btnOpenChat,function(){t.onClickBtnOpenChat()}),d.UIEventCenter.ButtonEvent(this._btnCloseChat,function(){t.onClickBtnOpenChat()}),d.UIEventCenter.ButtonEvent(this._btnDress,function(){return t.onBtnDressClick()}),h.SS.EventCenter.on(B.EventCommond.UIRoomOnline,this.refreshHotLabel,this),h.SS.EventCenter.on(B.EventCommond.UIRoomMicBt,this.refreshMicBtn,this),h.SS.EventCenter.on(B.EventCommond.UIRoomRefresh,this.refreshHotLabel,this),h.SS.EventCenter.on(B.EventCommond.UIRoomRefresh,this.refreshRoomName,this),h.SS.EventCenter.on(B.EventCommond.UIRoomRefresh,this.refreshRoomId,this),h.SS.EventCenter.on(B.EventCommond.UIRoomRefresh,this.refreshBackground,this),h.SS.EventCenter.on(B.EventCommond.UIMicWait,this.refreshMicWait,this),h.SS.EventCenter.on(B.EventCommond.UIThemeBackground,this.refreshBackground,this),h.SS.EventCenter.on(B.EventCommond.CloseQQChatBack,this.closeQQChatBack,this),h.SS.EventCenter.on(B.EventCommond.UIChatCheck,this.refreshChatCheck,this),h.SS.EventCenter.on(T.EnumGameMessageType.ChatRoomStateChange,this.onChatRoomStateChange,this)},e.prototype.removeEvent=function(){h.SS.EventCenter.off(B.EventCommond.UIRoomOnline,this.refreshHotLabel,this),h.SS.EventCenter.off(B.EventCommond.UIRoomMicBt,this.refreshMicBtn,this),h.SS.EventCenter.off(B.EventCommond.UIRoomRefresh,this.refreshHotLabel,this),h.SS.EventCenter.off(B.EventCommond.UIRoomRefresh,this.refreshRoomName,this),h.SS.EventCenter.off(B.EventCommond.UIRoomRefresh,this.refreshRoomId,this),h.SS.EventCenter.off(B.EventCommond.UIRoomRefresh,this.refreshBackground,this),h.SS.EventCenter.off(B.EventCommond.UIMicWait,this.refreshMicWait,this),h.SS.EventCenter.off(B.EventCommond.UIThemeBackground,this.refreshBackground,this),h.SS.EventCenter.off(B.EventCommond.CloseQQChatBack,this.closeQQChatBack,this),h.SS.EventCenter.off(B.EventCommond.UIChatCheck,this.refreshChatCheck,this),h.SS.EventCenter.off(T.EnumGameMessageType.ChatRoomStateChange,this.onChatRoomStateChange,this)},e.prototype.refreshPanelPosition=function(t){void 0===t&&(t=!1);var e=0;if(h.qq){var n=h.qq.getMenuButtonBoundingClientRect();e=(n.top+n.height/2)/f.SystemInfoManager.CurSystemInfo.screenHeight*cc.winSize.height-this._topWidget.node.height/2;var o=this._chatInput.getComponent(cc.Widget);S.EntryController.IphoneXUIFit([o,this._bottomWidget],20)}this._topWidget.top=e,U.NewbieGuildController.QQTopWidget=e,U.NewbieGuildController.ButtomWidget=this._bottomWidget.bottom},e.prototype.loadRemoteImage=function(){this.refreshBackground()},e.prototype.refreshBackground=function(){var t=h.SS.ImageUrlProxy+"static/background/room_background_"+L.RoomController.CurRoom.Background+".jpg?v=2";u.UIUtil.LoadRemoteImage(t,this._background)},e.prototype.onBtnReturnClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoom, OnBtnCloseClick"),g.UICommDia.Open("\u662f\u5426\u9000\u51fa\u8bed\u97f3\u6d3e\u5bf9","\u518d\u73a9\u4f1a","\u9000\u51fa",function(){},function(){G.XiYouController.JumpToXiyou()})},e.prototype.onBtnMoreClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnMoreClick"),m.ActionSheetController.SetMore()},e.prototype.onBtnChatClick=function(){return r(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnChatClick"),L.RoomController.CurRoom.IsOpenChat?h.qq?[4,k.ChatInputController.QQInputHandler()]:[3,2]:[2];case 1:return t=e.sent(),this._qqChatCloseBtn.node.active=t,[3,3];case 2:this._chatInput.active=!0,this._chatInput.getComponent(F.ChatInput).setFocus(),e.label=3;case 3:return[2]}})})},e.prototype.closeQQChatBack=function(){this._qqChatCloseBtn.node.active=!1},e.prototype.onQQChatBtnCloseClick=function(){this._qqChatCloseBtn.node.active=!1,h.qq&&k.ChatInputController.QQHideKeyBoard()},e.prototype.onBtnTopic=function(){a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnChatClick"),c.UIManager.OpenUI(A.UITopic)},e.prototype.onBtnHotClick=function(){L.RoomController.Purview!=T.EnumPurview.Normal&&c.UIManager.OpenUI(M.UIRoomAdmin)},e.prototype.onBtnShareClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnShareClick"),y.ShareManager.Share()},e.prototype.onBtnGiftClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnGiftClick"),D.XiYouGiftManager.CurSendGiftTarget=new P.GiftTargetData;for(var t=0;t<L.RoomController.Seats.length;t++){var e=L.RoomController.Seats[t];if(e.HasPlayer&&e.UId===L.RoomController.CreateorInfo.UId){D.XiYouGiftManager.CurSendGiftTarget.Add(e.UId);break}}c.UIManager.OpenUI(O.UIGift)},e.prototype.onBtnEmojiClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnEmojClick"),(L.RoomController.CurRoom.IsOpenChat||L.RoomController.Seats.find(function(t){return t.UId==I.Session.BanBan.UId}))&&c.UIManager.OpenUI(b.UIEmoji)},e.prototype.onBtnOnMicClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnOnMicClick"),L.RoomController.CurRoom.Mode!=T.EnumRoomMode.Lock||L.RoomController.Purview==T.EnumPurview.Createor||L.RoomController.Purview==T.EnumPurview.Admin?[3,4]:w.MicWaitController.IsMicWaiting(I.Session.BanBan.UId)?[3,1]:(g.UICommDia.Open("\u662f\u5426\u8981\u7533\u8bf7\u4e0a\u9ea6","\u786e\u5b9a","\u53d6\u6d88",function(){w.MicWaitController.JoinMicWait(-1)}),[3,3]);case 1:return[4,w.MicWaitController.micWaitListReq()];case 2:t.sent()&&c.UIManager.OpenUI(R.UIMicWaiting),t.label=3;case 3:return[3,5];case 4:g.UICommDia.Open("\u662f\u5426\u8981\u7533\u8bf7\u4e0a\u9ea6","\u786e\u5b9a","\u53d6\u6d88",function(){x.JoinMicController.JoinMicAuto()}),t.label=5;case 5:return[2]}})})},e.prototype.onBtnMicMuteClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnMicMuteClick"),x.JoinMicController.SelfMicUnmute()},e.prototype.onBtnMicUnmuteClick=function(){a.default.Trace(a.ClogKey.UI,"UIRoom, onBtnMicUnmuteClick"),x.JoinMicController.SelfMicMute()},e.prototype.onBtnMicWaitClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,w.MicWaitController.micWaitListReq()];case 1:return t.sent(),c.UIManager.OpenUI(E.UIMicWaitList),[2]}})})},e.prototype.onClickBtnOpenChat=function(){this._chat.getComponent(N.Chat).EnableChatContent(),this.onBtnChatClick()},e.prototype.refreshPanel=function(){this.refreshRoomName(),this.refreshRoomId(),this.refreshHotLabel(),this.loadRemoteImage(),this.refreshMicBtn(),this.refreshRoomType(),this.refreshChatCheck()},e.prototype.refreshHotLabel=function(){L.RoomController.CurRoom.Hot>1e4?this._hotLabel.string=(L.RoomController.CurRoom.Hot/1e4).toFixed(2)+"w":this._hotLabel.string=""+L.RoomController.CurRoom.Hot},e.prototype.refreshRoomName=function(){this._roomName.string=p.StringLimitForce(L.RoomController.CurRoom.RoomName,10)},e.prototype.refreshRoomId=function(){this._roomId.string="\u623f\u53f7ID:"+L.RoomController.CurRoom.RoomId.toString()},e.prototype.refreshMicBtn=function(){return a.default.Green(a.ClogKey.UI,"[refreshMicBtn]----------JoinMicManager.MicMute:"+x.JoinMicController.MicMute),L.RoomController.GetSelfSeat()?x.JoinMicController.MicMute?(this._btnOnMic.node.active=!1,this._btnMicMute.node.active=!0,void(this._btnMicUnmute.node.active=!1)):(this._btnOnMic.node.active=!1,this._btnMicMute.node.active=!1,void(this._btnMicUnmute.node.active=!0)):(this._btnOnMic.node.active=!1,this._btnMicMute.node.active=!1,void(this._btnMicUnmute.node.active=!1))},e.prototype.refreshRoomType=function(){this._roomTypeLabel.string=""+L.RoomController.CurRoom.TypeLabel},e.prototype.refreshMicWait=function(){L.RoomController.CurRoom.Mode==T.EnumRoomMode.Lock?(w.MicWaitController.IsMicWaiting(I.Session.BanBan.UId)?this._joinMicTip.active=!0:this._joinMicTip.active=!1,L.RoomController.Purview==T.EnumPurview.Createor&&w.MicWaitController.JoinMicWaitIDList.length):this._joinMicTip.active=!1},e.prototype.refreshChatCheck=function(){if(L.RoomController.CurRoom.IsOpenChat){(t=this._btnEmoji.node.getChildByName("Icon")).color=new cc.Color(255,255,255,255),this._btnChat.node.getChildByName("Icon").color=new cc.Color(255,255,255,255)}else{var t=this._btnEmoji.node.getChildByName("Icon"),e=L.RoomController.Seats.find(function(t){return t.UId==I.Session.BanBan.UId});t.color=e?new cc.Color(255,255,255,255):new cc.Color(155,155,155,255),this._btnChat.node.getChildByName("Icon").color=new cc.Color(155,155,155,255)}},e.prototype.onChatRoomStateChange=function(t){switch(t){case T.EnumChatRoomState.Ready:this._btnShare.node.active=!1,this._btnMore.node.active=!1;break;case T.EnumChatRoomState.Other:this._btnShare.node.active=!1,this._btnMore.node.active=!0}},e.prototype.onBtnDressClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return a.default.Trace(a.ClogKey.UI,"onBtnDressClick"),[4,_.DressController.GetXiyouDressInfo()];case 1:return t.sent()?(c.UIManager.OpenUI(v.UIDress),[2]):(C.UIToast.Show("\u83b7\u53d6\u80cc\u5305\u6570\u636e\u9519\u8bef"),[2])}})})},e}(s.UIBase);n.UIRoom=j,cc._RF.pop()},{"../../../../base/script/frame/clog/Clog":"Clog","../../../../base/script/frame/ui/UIBase":"UIBase","../../../../base/script/frame/ui/UIEnum":"UIEnum","../../../../base/script/frame/ui/UIManager":"UIManager","../../../../base/script/frame/ui/UIUtil":"UIUtil","../../../../base/script/global/SS":"SS","../../../../base/script/global/SystemInfoManager":"SystemInfoManager","../../../../base/script/util/StringUtil":"StringUtil","../../../../base/script/util/UIEventCenter":"UIEventCenter","../../../actionSheet/controller/ActionSheetController":"ActionSheetController","../../../common/controller/qqShare/ShareManager":"ShareManager","../../../common/view/UICommDia":"UICommDia","../../../common/view/UIToast":"UIToast","../../../dress/controller/DressController":"DressController","../../../dress/view/UIDress":"UIDress","../../../emoji/view/UIEmoji":"UIEmoji","../../../entry/controller/EntryController":"EntryController","../../../login/model/SessionData":"SessionData","../../../micWait/controller/MicWaitController":"MicWaitController","../../../micWait/view/UIMicWaitList":"UIMicWaitList","../../../micWait/view/UIMicWaiting":"UIMicWaiting","../../../newbie/control/NewbieGuildController":"NewbieGuildController","../../../other/EnumCenter":"EnumCenter","../../../other/EventCommond":"EventCommond","../../../roomAdmin/view/UIRoomAdmin":"UIRoomAdmin","../../../sendGift/model/GiftTargetData":"GiftTargetData","../../../sendGift/view/main/UIGift":"UIGift","../../../topic/view/UITopic":"UITopic","../../../xiyou/controller/XiYouController":"XiYouController","../../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager","../../controller/ChatInputController":"ChatInputController","../../controller/JoinMicController":"JoinMicController","../../controller/RoomController":"RoomController","../chat/Chat":"Chat","../chat/ChatInput":"ChatInput"}],UITheme:[function(t,e,n){"use strict";cc._RF.push(e,"967110dUVpJ2qZE/94bdy+c","UITheme");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIBase"),i=t("../../../base/script/frame/ui/UIEnum"),a=t("../../../base/script/frame/ui/UIManager"),s=t("../../../base/script/util/UIEventCenter"),l=t("../../entry/controller/EntryController"),c=t("../../room/controller/RoomController"),u=t("./ThemeItem"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UITheme",e.HierarchyType=i.EnumUIHierarchy.Fix,e.OpenTween=i.EnumUIOpenTween.PullUp,e.CloseTween=i.EnumUICloseTween.PullDown,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initList()},e.prototype.start=function(){this.refresh()},e.prototype.initRoot=function(){var t=this;this._maskBtn=cc.find("Mask",this.node).getComponent(cc.Button),this._contentLayout=cc.find("Main/ScrollView/View/Content",this.node).getComponent(cc.Layout),this._item=cc.find("Main/ScrollView/View/Content/Item",this.node),this._item.active=!1,s.UIEventCenter.ButtonEvent(this._maskBtn,function(){return t.onClose()})},e.prototype.initList=function(){for(var t=c.RoomController.CurRoom.ThemeSwitchBackground,e=0,n=t.length;e<n;e++){var o=cc.instantiate(this._item);o.parent=this._contentLayout.node,o.active=!0,o.addComponent(u.ThemeItem).Init(t[e])}},e.prototype.onClose=function(){a.UIManager.CloseUI(e)},e.prototype.refresh=function(){var t=cc.find("Main",this.node).getComponent(cc.Widget);l.EntryController.IphoneXUIFit([t],20)},e}(r.UIBase);n.UITheme=h,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/util/UIEventCenter":"UIEventCenter","../../entry/controller/EntryController":"EntryController","../../room/controller/RoomController":"RoomController","./ThemeItem":"ThemeItem"}],UIToast:[function(t,e,n){"use strict";cc._RF.push(e,"8c437WHGWxPqru7ZsepoCFO","UIToast");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIEnum"),s=t("../../../base/script/frame/ui/UIBase"),l=t("../../../base/script/frame/ui/UIManager"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIToast",e.HierarchyType=a.EnumUIHierarchy.Toast,e}return o(e,t),e.Show=function(t,n){return void 0===t&&(t=""),void 0===n&&(n=e.DURATION_SHORT),r(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,l.UIManager.OpenUI(e)];case 1:return o.sent().OnOpen(t,n),[2]}})})},e.prototype.onLoad=function(){this._content=cc.find("bg/Label",this.node).getComponent(cc.Label)},e.prototype.OnOpen=function(t,n){this._content.string=t,this.scheduleOnce(function(){l.UIManager.CloseUI(e)},n)},e.DURATION_SHORT=2.5,e.DURATION_LONG=5,e}(s.UIBase);n.UIToast=c,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager"}],UITopic:[function(t,e,n){"use strict";cc._RF.push(e,"b36ddivpBZDN6LhancTXU0I","UITopic");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../base/script/frame/ui/UIBase"),i=t("../../../base/script/frame/ui/UIEnum"),a=t("../../../base/script/frame/ui/UIManager"),s=t("../../../base/script/global/SS"),l=t("../../../base/script/util/UIEventCenter"),c=t("../../entry/controller/EntryController"),u=t("../../other/EventCommond"),h=t("../controller/TopicController"),f=t("./TopicItem"),p=t("./TopicTag"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UITopic",e.HierarchyType=i.EnumUIHierarchy.Fix,e.OpenTween=i.EnumUIOpenTween.PullUp,e.CloseTween=i.EnumUICloseTween.PullDown,e._btnMask=null,e._tagsLayout=null,e._gridLayout=null,e}return o(e,t),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refreshPanelPosition(),this.checkTag(),this.refreshTag(),this.refreshGrid()},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initEvent=function(){s.SS.EventCenter.on(u.EventCommond.UITopicTagChange,this.changeTag,this),s.SS.EventCenter.on(u.EventCommond.UITopic,this.refreshTopic,this)},e.prototype.removeEvent=function(){s.SS.EventCenter.off(u.EventCommond.UITopic,this.refreshTopic,this),s.SS.EventCenter.off(u.EventCommond.UITopicTagChange,this.changeTag,this)},e.prototype.initRoot=function(){var t=this;this._btnMask=cc.find("Mask",this.node).getComponent(cc.Button),this._tagsLayout=cc.find("Container/Tags/View/Content",this.node).getComponent(cc.Layout),this._gridLayout=cc.find("Container/Grid/View/Content",this.node).getComponent(cc.Layout),l.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.onCloseBtn()})},e.prototype.checkTag=function(){""==h.TopicController.SelectedTag&&h.TopicController.AllTopics.topics.length>0&&(h.TopicController.SelectedTag=h.TopicController.AllTopics.topics[0].topic_category_name)},e.prototype.changeTag=function(){this.refreshTag(),this.refreshGrid()},e.prototype.refreshTag=function(){this._tagsLayout.node.children[0].active=!1;for(var t=1,e=0;e<h.TopicController.AllTopics.topics.length;e++){var n=h.TopicController.AllTopics.topics[e].topic_category_name,o=null;if(t<this._tagsLayout.node.childrenCount)o=this._tagsLayout.node.children[t];else(o=cc.instantiate(this._tagsLayout.node.children[0])).parent=this._tagsLayout.node,o.addComponent(p.TopicTag).Init();o.active=!0,o.getComponent(p.TopicTag).Refresh(n),t++}for(;t<this._tagsLayout.node.childrenCount;)this._tagsLayout.node.children[t++].active=!1},e.prototype.refreshGrid=function(){for(var t=[],e=0;e<h.TopicController.AllTopics.topics.length;e++)h.TopicController.AllTopics.topics[e].topic_category_name==h.TopicController.SelectedTag&&(t=h.TopicController.AllTopics.topics[e].topics);if(t){this._gridLayout.node.children[0].active=!1;for(var n=0,o=t.length;n<o;n++){var r=null;if(n+1<this._gridLayout.node.childrenCount)r=this._gridLayout.node.children[n+1];else(r=cc.instantiate(this._gridLayout.node.children[0])).parent=this._gridLayout.node,r.addComponent(f.TopicItem).Init();r.active=!0,r.getComponent(f.TopicItem).Refresh(Number(t[n].id),t[n].name,n)}for(var i=t.length+1;i<this._gridLayout.node.childrenCount;)this._gridLayout.node.children[i++].active=!1}},e.prototype.refreshTopic=function(){for(var t=0;t<this._gridLayout.node.childrenCount;t++){var e=this._gridLayout.node.children[t];e.active&&e.getComponent(f.TopicItem).RefreshSelected()}},e.prototype.onCloseBtn=function(){a.UIManager.CloseUI(e)},e.prototype.refreshPanelPosition=function(){var t=cc.find("Container",this.node).getComponent(cc.Widget);c.EntryController.IphoneXUIFit([t],20)},e}(r.UIBase);n.UITopic=d,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../entry/controller/EntryController":"EntryController","../../other/EventCommond":"EventCommond","../controller/TopicController":"TopicController","./TopicItem":"TopicItem","./TopicTag":"TopicTag"}],UITweenManager:[function(t,e,n){"use strict";cc._RF.push(e,"44ac0qCnnNJx7cdRLnXuL94","UITweenManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./UIEnum"),r=function(){function t(){}return t.PlayOpenTween=function(e,n,r){switch(e.OpenTween){case o.EnumUIOpenTween.NormalOpen:e.Mask&&(e.Mask.active=!0,e.Mask.runAction(cc.fadeTo(.2,t.maskColorA))),r&&r();break;case o.EnumUIOpenTween.ScaleBig:t.ScaleBig(this.scaleTweenTime,e,t.maskColorA,n,r);break;case o.EnumUIOpenTween.FadeIn:t.FadeIn(this.fadeTweenTime,e,this.maskColorA,n,r);break;case o.EnumUIOpenTween.PullUp:t.PullUp(this.pullTweenTime,e,n,r);break;case o.EnumUIOpenTween.DrawerBottomOpen:t.DrawerBottomOpen(this.drawerBottomTweenTime,e,this.maskColorA,n,r)}},t.PlayCloseTween=function(e,n,r){switch(e.CloseTween){case o.EnumUICloseTween.NormalClose:r&&r();break;case o.EnumUICloseTween.ScaleSmall:t.ScaleSmall(.1,e,n,r);break;case o.EnumUICloseTween.FadeOut:t.FadeOut(this.fadeTweenTime,e,n,r);break;case o.EnumUICloseTween.PullDown:t.PullDown(this.pullTweenTime,e,n,r);break;case o.EnumUICloseTween.DrawerBottomClose:t.DrawerBottomClose(this.drawerBottomTweenTime,e,this.maskColorA,n,r)}},t.ScaleBig=function(t,e,n,o,r){o&&o();var i=e.node.scale,a=cc.callFunc(function(){e.Mask&&(e.Mask.active=!1),e.node.scale=.2}),s=cc.scaleTo(t,i,i).easing(cc.easeBezierAction(i-.1,i+.2,i+.1,i)),l=cc.callFunc(function(){e.Mask&&(e.Mask.active=!0,e.Mask.runAction(cc.fadeTo(.2,n))),r&&r()});e.node.runAction(cc.sequence(a,s,l))},t.ScaleSmall=function(t,e,n,o){n&&n(),e.Mask&&(e.Mask.active=!1);var r=e.node.scale;e.node.runAction(cc.sequence(cc.callFunc(function(){e.node.scale=r}),cc.scaleTo(t,.1,.1),cc.callFunc(function(){o&&o()})))},t.FadeIn=function(t,e,n,o,r){o&&o();var i=cc.callFunc(function(){e.Mask&&(e.Mask.active=!1),e.node.opacity=0}),a=cc.fadeIn(t),s=cc.callFunc(function(){e.Mask&&(e.Mask.active=!0,e.Mask.runAction(cc.fadeTo(.2,n))),r&&r()});e.node.runAction(cc.sequence(i,a,s))},t.FadeOut=function(t,e,n,o){n&&n(),e.Mask&&(e.Mask.active=!1),e.node.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){o&&o()})))},t.PullUp=function(t,e,n,o){n&&n(),e.node.setPosition(e.node.x,-e.node.parent.anchorY*e.node.parent.height-(1-e.node.anchorY)*e.node.height);var r=cc.callFunc(function(){e.Mask&&(e.Mask.active=!1)}),i=cc.moveTo(t,e.node.x,-(e.node.parent.anchorY-.5)*e.node.parent.height+(e.node.anchorY-.5)*e.node.height).easing(cc.easeOut(3)),a=cc.callFunc(function(){e.Mask&&(e.Mask.active=!0),o&&o()});e.scheduleOnce(function(){return e.node.runAction(cc.sequence(r,i,a))})},t.PullDown=function(t,e,n,o){n&&n(),e.Mask&&(e.Mask.active=!1),e.node.runAction(cc.sequence(cc.moveTo(t,e.node.x,-e.node.parent.anchorY*e.node.parent.height-(1-e.node.anchorY)*e.node.height).easing(cc.easeIn(3)),cc.callFunc(function(){o&&o()})))},t.DrawerBottomOpen=function(t,e,n,o,r){o&&o();var i=e.node.getChildByName("Main");if(i){var a=i.getComponent(cc.Widget);a.updateAlignment();var s=i.getPosition();a.enabled=!1,i.setPosition(new cc.Vec2(i.x,s.y-i.height));var l=cc.callFunc(function(){e.Mask&&(e.Mask.opacity=0)}),c=cc.callFunc(function(){e.Mask&&(e.Mask.active=!0,e.Mask.runAction(cc.fadeTo(.2,n)))}),u=cc.moveTo(t,s),h=cc.callFunc(function(){a.enabled=!0,r&&r()});i.runAction(cc.sequence(l,c,u,h))}},t.DrawerBottomClose=function(t,e,n,o,r){o&&o();var i=e.node.getChildByName("Main");if(i){var a=i.getComponent(cc.Widget);a.updateAlignment();var s=i.getPosition();a.enabled=!1;var l=cc.callFunc(function(){e.Mask&&(e.Mask.active=!0,e.Mask.runAction(cc.fadeTo(.2,0)))}),c=cc.moveTo(t,new cc.Vec2(i.x,s.y-i.height)),u=cc.callFunc(function(){a.enabled=!0,r&&r()});i.runAction(cc.sequence(l,c,u))}},t.scaleTweenTime=.2,t.fadeTweenTime=.5,t.pullTweenTime=.2,t.drawerBottomTweenTime=.2,t.maskColorA=180,t}();n.default=r,cc._RF.pop()},{"./UIEnum":"UIEnum"}],UIUserDetail:[function(t,e,n){"use strict";cc._RF.push(e,"e988ewbmqxDP74+KC6zxNNQ","UIUserDetail");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/clog/Clog"),s=t("../../../base/script/frame/ui/UIBase"),l=t("../../../base/script/frame/ui/UIEnum"),c=t("../../../base/script/frame/ui/UIManager"),u=t("../../../base/script/frame/ui/UIUtil"),h=t("../../../base/script/global/SS"),f=t("../../../base/script/util/UIEventCenter"),p=t("../../entry/controller/EntryController"),d=t("../../other/EnumCenter"),m=t("../../sendGift/model/GiftTargetData"),y=t("../../sendGift/view/main/UIGift"),g=t("../../xiyou/controller/XiyouAddFriendController"),C=t("../../xiyou/controller/XiYouGiftManager"),_=t("../controller/UserDetailController"),v=t("./GiftWallItem"),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIUserDetail",e.HierarchyType=l.EnumUIHierarchy.Fix,e.OpenTween=l.EnumUIOpenTween.NormalOpen,e.CloseTween=l.EnumUICloseTween.NormalClose,e.allGiftWallItem=new Array,e}return o(e,t),Object.defineProperty(e.prototype,"xiyouData",{get:function(){return _.UserDetailController.CurXiyouUserInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"banbanData",{get:function(){return _.UserDetailController.CurBanBanUserDetail},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.initRoot(),this.initEvent()},e.prototype.start=function(){this.refreshPanelPosition(),this.refresh()},e.prototype.initRoot=function(){this._content=cc.find("Content",this.node),this._content.active=!1,this._userName=cc.find("Content/BaseInfoLayout/NameLabel",this.node).getComponent(cc.Label),this._vipGradeIcon=cc.find("Content/BaseInfoLayout/VipIcon",this.node).getComponent(cc.Sprite),this._charmGradeIcon=cc.find("Content/BaseInfoLayout/CharmIcon",this.node).getComponent(cc.Sprite),this._vipValueLabel=cc.find("Content/Layout/VIP/Number",this.node).getComponent(cc.Label),this._charmValueLabel=cc.find("Content/Layout/Charm/Number",this.node).getComponent(cc.Label),this._giftCount=cc.find("Content/Layout/Gift/Number",this.node).getComponent(cc.Label),this._cityLabel=cc.find("Content/InfoLayout/City/Label",this.node).getComponent(cc.Label),this._btnMask=cc.find("Mask",this.node).getComponent(cc.Button),this._userIcon=cc.find("Content/Icon/Ring/Mask/Icon",this.node).getComponent(cc.Sprite),this._sexIcon=cc.find("Content/InfoLayout/Info/SexIcon",this.node).getComponent(cc.Sprite),this._ageLabel=cc.find("Content/InfoLayout/Info/Label",this.node).getComponent(cc.Label),this._giftWallItem=cc.find("Content/GiftWall/Item",this.node),this._giftWallItem.active=!1,this._noGiftTip=cc.find("Content/NoGiftTip",this.node),this._grid=cc.find("Content/GiftWall/ScrollView/view/content",this.node),this._btnSend=cc.find("Content/BtnLayout/BtnSend",this.node).getComponent(cc.Button),this._btnAddFriend=cc.find("Content/BtnLayout/BtnAddFriend",this.node).getComponent(cc.Button)},e.prototype.refreshGiftWall=function(){if(this.xiyouData.GiftWallInfo.length<=0)return this._grid.active=!1,void(this._noGiftTip.active=!0);this._grid.active=!0,this._noGiftTip.active=!1,this.allGiftWallItem=new Array;for(var t=0;t<this.xiyouData.GiftWallInfo.length;t++){var e=this.xiyouData.GiftWallInfo[t],n=cc.instantiate(this._giftWallItem);n.setParent(this._grid);var o=n.addComponent(v.GiftWallItem);o.Init(e),this.allGiftWallItem.push(o)}this.allGiftWallItem.length<=0||this.allGiftWallItem.forEach(function(t){return t.Refresh()})},e.prototype.initEvent=function(){var t=this;f.UIEventCenter.ButtonEvent(this._btnMask,function(){return t.onBtnMaskClick()}),f.UIEventCenter.ButtonEvent(this._btnSend,function(){return t.onBtnSendClick()}),f.UIEventCenter.ButtonEvent(this._btnAddFriend,function(){return t.onBtnAddFriendClick()})},e.prototype.onBtnAddFriendClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,g.XiyouAddFriendController.AddFriend(this.banbanData.MomoId)];case 1:return t.sent()&&(this.xiyouData.WhetherFriends=!0,this.refrshIsShowAddFriendBtn()),[2]}})})},e.prototype.refresh=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,_.UserDetailController.GetUserDetail()];case 1:return t.sent()?(this._content.active=!0,this.refreshUserIcon(),this.refreshUserName(),this.refreshVipIcon(),this.refreshCharmIcon(),this.refreshUserVip(),this.refreshUserSex(),this.refreshGiftWall(),this.refreshCharmLabel(),this.refreshGiftCount(),this.refrshCity(),this.refreshAge(),this.refrshIsShowAddFriendBtn(),[2]):(c.UIManager.CloseUI(e),[2])}})})},e.prototype.refreshVipIcon=function(){this.xiyouData.VipGrade<=0?this._vipGradeIcon.node.active=!1:(this._vipGradeIcon.node.active=!0,u.UIUtil.ChangeSprite("vip_"+this.xiyouData.VipGrade,this._vipGradeIcon))},e.prototype.refreshCharmIcon=function(){this.xiyouData.CharmGrade<=0?this._charmGradeIcon.node.active=!1:(this._charmGradeIcon.node.active=!0,u.UIUtil.ChangeSprite("ml_"+this.xiyouData.CharmGrade,this._charmGradeIcon))},e.prototype.refrshIsShowAddFriendBtn=function(){if(this.xiyouData.WhetherFriends)return this._btnAddFriend.node.active=!1,this._btnSend.node.active=!0,void this._btnSend.node.setContentSize(600,108);this._btnAddFriend.node.active=!0,this._btnSend.node.active=!0,this._btnSend.node.setContentSize(248,108)},e.prototype.refrshCity=function(){this._cityLabel.string=this.xiyouData.City},e.prototype.refreshUserIcon=function(){var t=h.SS.ImageUrlProxy+this.banbanData.Icon;u.UIUtil.LoadRemoteImage(t,this._userIcon)},e.prototype.refreshUserSex=function(){switch(this.xiyouData.Sex){case d.EnumSex.Unknow:return void(this._sexIcon.node.active=!1);case d.EnumSex.Female:return void u.UIUtil.ChangeSprite("T_Info_Female",this._sexIcon);case d.EnumSex.Male:return void u.UIUtil.ChangeSprite("T_Info_Male",this._sexIcon)}},e.prototype.refreshAge=function(){this._ageLabel.string=this.xiyouData.Age+"\u5c81\xb7"+this.xiyouData.Constellation},e.prototype.refreshUserName=function(){this._userName.string=this.xiyouData.NickName},e.prototype.refreshUserVip=function(){this._vipValueLabel.string=this.xiyouData.VipValue.toString()},e.prototype.refreshCharmLabel=function(){this._charmValueLabel.string=this.xiyouData.CharmValue.toString()},e.prototype.refreshGiftCount=function(){this._giftCount.string=this.xiyouData.GiftCount.toString()},e.prototype.onBtnSendClick=function(){a.default.Trace(a.ClogKey.UI,"OnBtnSendClick"),C.XiYouGiftManager.CurSendGiftTarget=(new m.GiftTargetData).Add(_.UserDetailController.TargetUserId),c.UIManager.OpenUI(y.UIGift),c.UIManager.CloseUI(e)},e.prototype.onBtnMaskClick=function(){a.default.Trace(a.ClogKey.UI,"onBtnMaskClick"),c.UIManager.CloseUI(e)},e.prototype.refreshPanelPosition=function(){var t=cc.find("Content",this.node).getComponent(cc.Widget);p.EntryController.IphoneXUIFit([t],20)},e}(s.UIBase);n.UIUserDetail=b,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager","../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/UIEventCenter":"UIEventCenter","../../entry/controller/EntryController":"EntryController","../../other/EnumCenter":"EnumCenter","../../sendGift/model/GiftTargetData":"GiftTargetData","../../sendGift/view/main/UIGift":"UIGift","../../xiyou/controller/XiYouGiftManager":"XiYouGiftManager","../../xiyou/controller/XiyouAddFriendController":"XiyouAddFriendController","../controller/UserDetailController":"UserDetailController","./GiftWallItem":"GiftWallItem"}],UIUtil:[function(t,e,n){"use strict";cc._RF.push(e,"f2479emcdhHjI7HV5/GU7iw","UIUtil");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../clog/Clog"),a=t("../../util/StringUtil"),s=t("../res/ResManager"),l=function(){function t(){}return t.SetHeadIcon=function(t,e,n){null!=e?(t=(Number(n)%50).toString(),t=a.IsNullOrEmpty(t)?"T_HeadIcon_0":"T_HeadIcon_"+Number(t),this.ChangeSprite(t,e)):i.default.Error("iconSprite is null ")},t.LoadRemoteImage=function(t,e,n){a.IsNullOrEmpty(t)?i.default.Warn(i.ClogKey.UI,"LoadNetImg path error:"+t):a.CheckNetUrl(t)&&(i.default.Orange(i.ClogKey.Net,"LoadRemoteImage url:"+t),cc.loader.load({url:t},function(t,o){if(t)i.default.Warn(i.ClogKey.UI,"LoadNetImg load error,error:"+t);else if(null!=e.node){var r=new cc.SpriteFrame(o);e.spriteFrame=r,n&&n(!0)}else i.default.Error("LoadNetImg load error>>>>>>>>obj.node==null")}))},t.ChangeSprite=function(t,e){null!=e&&(a.IsNullOrEmpty(t)?i.default.Error("ChangeSprite name is Empty!"):null!=e.spriteFrame&&e.spriteFrame.name==t||s.ResManager.LoadRes(t,cc.SpriteFrame,function(n,o){if(n)i.default.Error("ChangeSprite Error!, name:"+t+",err"+JSON.stringify(n));else{var r=o;e.isValid&&(e.spriteFrame=r)}}))},t.CreateAnimationClip=function(t){return o(this,void 0,Promise,function(){return r(this,function(e){return[2,new Promise(function(e){if(a.IsNullOrEmpty(t))return i.default.Error("CreateAnimationClip name is Empty!"),void e(null);cc.loader.loadResDir(t,cc.SpriteFrame,function(n,o,r){if(n)return i.default.Error("CreateAnimationClip Error!, name:"+t+",err"+JSON.stringify(n)),void e(null);var a=[];a.push.apply(a,o),a.sort(function(t,e){return t.name==e.name?0:t.name<e.name?-1:1});e(function(t,e){var n=new cc.AnimationClip;n.sample=e||n.sample;for(var o=[],r=0,i=0,a=t.length;i<a;i++){var s=t[i].name.lastIndexOf("-"),l=parseInt(t[i].name.substr(s+1));o[i]={frame:r,value:t[i]},r+=l/1e3}return o[t.length]={frame:r,value:t[t.length-1]},n._duration=r,n.curveData={comps:{"cc.Sprite":{spriteFrame:o}}},n}(a,30))})})]})})},t.LoadDragonBones=function(t,e,n,o,r){return void 0===r&&(r=1),new Promise(function(i){cc.loader.loadResDir(e,function(e,a){e||a.length<=0?i(!1):(a.forEach(function(e){e instanceof dragonBones.DragonBonesAsset&&(t.dragonAsset=e),e instanceof dragonBones.DragonBonesAtlasAsset&&(t.dragonAtlasAsset=e)}),t.armatureName=n,t.playAnimation(o,r),t.addEventListener(dragonBones.EventObject.COMPLETE,function(){t.removeEventListener(dragonBones.EventObject.COMPLETE),i(!0)}))})})},t.InitPrefab=function(t){return o(this,void 0,Promise,function(){return r(this,function(e){return[2,new Promise(function(e){if(a.IsNullOrEmpty(t))return i.default.Error("prefab name is Empty!"),void e(null);s.ResManager.LoadRes(t,cc.Prefab,function(n,o){if(n)return i.default.Error("ChangeSprite Error!, name:"+t+",err"+JSON.stringify(n)),void e(null);var r=o,a=cc.instantiate(r);e(a)})})]})})},t.LoadScene=function(t){var e=this;return new Promise(function(n){return o(e,void 0,void 0,function(){return r(this,function(e){return cc.director.preloadScene(t,function(){cc.director.loadScene(t),cc.sys.garbageCollect(),n()}),[2]})})})},t.splitRichTextString=function(t,e,n){if(e.getComponent(cc.RichText)){for(var o=1;e.parent.getChildByName("_richTextSplit"+o);)e.parent.getChildByName("_richTextSplit"+o).active=!1,o+=1;var r=[],a=(t=t.replace(/[\n]/g,"<br/><br>")).split("<br>"),s=[],l=0;if(a.length>0)for(var c=0;c<a.length;c++)c%10==0&&(c>0&&(s[l]=s[l].slice(0,s[l].length-5),l+=1),s[l]=""),s[l]=s[l]+a[c];for(var u=0;u<s.length;u++)if(0==u)r[u]=e;else{var h=e.parent.getChildByName("_richTextSplit"+u);h?r[u]=h:(r[u]=cc.instantiate(e),r[u].parent=e.parent),r[u].name="_richTextSplit"+u}var f=(new Date).getTime(),p=0,d=function(){var t=r[p].getComponent(cc.RichText);if(s[p]&&(t.string=s[p],t.node.active=!0),(p+=1)>=r.length){n.unschedule(d);var o=(new Date).getTime(),a=o-f;for(i.default.Error("cost="+a+", timestart="+f+", timeEnd="+o);e.parent.getChildByName("_richTextSplit"+p);)e.parent.getChildByName("_richTextSplit"+p).active=!1,p+=1}};n.schedule(d,0,cc.macro.REPEAT_FOREVER)}else i.default.Error("\u53c2\u6570\u9519\u8bef\uff0c\u4e0d\u662f\u5bcc\u6587\u672c\u8282\u70b9")},t}();n.UIUtil=l,cc._RF.pop()},{"../../util/StringUtil":"StringUtil","../clog/Clog":"Clog","../res/ResManager":"ResManager"}],UIWaiting:[function(t,e,n){"use strict";cc._RF.push(e,"f7be6Lm9ZNANIW+i12GhZA/","UIWaiting");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../base/script/frame/ui/UIEnum"),s=t("../../../base/script/frame/ui/UIBase"),l=t("../../../base/script/frame/ui/UIManager"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabName="P_UIWaiting",e.HierarchyType=a.EnumUIHierarchy.Waiting,e.OpenTween=a.EnumUIOpenTween.NormalOpen,e.CloseTween=a.EnumUICloseTween.NormalClose,e}return o(e,t),e.Show=function(t){return void 0===t&&(t="\u7f51\u7edc\u51fa\u73b0\u95ee\u9898"),r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,l.UIManager.OpenUI(e)];case 1:return n.sent().OnOpen(t),[2]}})})},e.prototype.onLoad=function(){this._wire=cc.find("Bg/Wire",this.node),this._content=cc.find("Label",this.node).getComponent(cc.Label)},e.prototype.OnOpen=function(t){var e=this;this._content.string="",this._content.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e._content.string=t+"\xb7"}),cc.delayTime(.8),cc.callFunc(function(){e._content.string=t+"\xb7\xb7"}),cc.delayTime(.8),cc.callFunc(function(){e._content.string=t+"\xb7\xb7\xb7"}),cc.delayTime(.8)))),this._wire.runAction(cc.repeatForever(cc.rotateBy(3,-360)))},e}(s.UIBase);n.UIWaiting=c,cc._RF.pop()},{"../../../base/script/frame/ui/UIBase":"UIBase","../../../base/script/frame/ui/UIEnum":"UIEnum","../../../base/script/frame/ui/UIManager":"UIManager"}],UserDetailController:[function(t,e,n){"use strict";cc._RF.push(e,"7e4a7OoW89PJqDgl1kSiJu9","UserDetailController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/api/http/Xhr"),a=t("../model/UserDetailData"),s=t("../../../base/script/frame/clog/Clog"),l=t("../../xiyou/controller/XiYouUserInfoController"),c=t("../../common/view/UIToast"),u=function(){function t(){}return t.GetUserDetail=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o,u;return r(this,function(r){switch(r.label){case 0:return t=new i.XhrUrl("profile/home").Query({key:"version",value:"10"}).Query({key:"uid",value:this.TargetUserId.toString()}).Url,[4,i.default.GetJson(t)];case 1:return n=r.sent(),n.success?(o=n.data,this.CurBanBanUserDetail=new a.BanBanUserInfo(o),s.default.Trace(s.ClogKey.Net,"CurBanBanUserDetail="+JSON.stringify(this.CurBanBanUserDetail)),u=this,[4,l.XiYouUserDetailController.GetXiyouUserInfo(this.CurBanBanUserDetail.MomoId)]):(e(!1),c.UIToast.Show(n.msg),[2]);case 2:return u.CurXiyouUserInfo=r.sent(),s.default.Trace(s.ClogKey.Net,"CurXiyouUserInfo="+JSON.stringify(this.CurXiyouUserInfo)),e(!0),[2]}})})})]})})},t.FollowUser=function(t){return o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,a;return r(this,function(r){switch(r.label){case 0:return e=new i.XhrUrl("friend/follow").Url,[4,i.default.PostJson(e,{uid:t})];case 1:return o=r.sent(),o.success?(a=o.data,s.default.Green(s.ClogKey.Net,"FollowUser result="+JSON.stringify(a)),this.CurBanBanUserDetail.IsFllow=!0,n(!0),[2]):(n(!1),[2])}})})})]})})},t.UnFollowUser=function(t){return o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o,a;return r(this,function(r){switch(r.label){case 0:return e=new i.XhrUrl("friend/unfollow").Url,[4,i.default.PostJson(e,{uid:t})];case 1:return o=r.sent(),o.success?(a=o.data,s.default.Green(s.ClogKey.Net,"UnFollowUser result="+JSON.stringify(a)),this.CurBanBanUserDetail.IsFllow=!1,n(!0),[2]):(n(!1),[2])}})})})]})})},t}();n.UserDetailController=u,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../common/view/UIToast":"UIToast","../../xiyou/controller/XiYouUserInfoController":"XiYouUserInfoController","../model/UserDetailData":"UserDetailData"}],UserDetailData:[function(t,e,n){"use strict";cc._RF.push(e,"b6a34Mpq8ZNvo4xwCgPL5bp","UserDetailData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){t&&(this.UId=t.uid,this.MomoId=t.momo_id,this.Icon=t.icon,this.IsFllow=t.follow)}}();n.BanBanUserInfo=o,cc._RF.pop()},{}],UtilityEx:[function(t,e,n){"use strict";cc._RF.push(e,"9c99bax/nhCfatyeJa+ToJI","UtilityEx"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../other/EnumCenter"),r=t("../../base/script/frame/clog/Clog");n.CreateEventHandler=function(t,e,n){var o=new cc.Component.EventHandler;return o.target=t,o.component=e,o.handler=n,o},n.RotateAround=function(t,e,n,o){if(t){var r=new cc.Quat;t.getRotation(r),cc.Quat.rotateAround(r,r,new cc.Vec3(1,0,0),e),cc.Quat.rotateAround(r,r,new cc.Vec3(0,1,0),n),cc.Quat.rotateAround(r,r,new cc.Vec3(0,0,1),o),t.setRotation(r)}},n.BallNumToBallColorType=function(t){return t>0&&t<8?o.EnumBallColorType.Full:t>8&&t<=15?o.EnumBallColorType.Half:8===t?o.EnumBallColorType.Eight:o.EnumBallColorType.None},n.RadianToAngle=function(t){return 180*t/Math.PI},n.AngleToRadian=function(t){return t*Math.PI/180},n.LoadOnlineImage=function(t,e,n){""!=t&&void 0!=t&&" "!=t&&null!=t&&cc.loader.load({url:t,type:e},function(t,e){n&&n(e)})},n.ReleaseOnlineImage=function(t){cc.loader.release(t)},n.GetValue=function(t,e,o,i,a){void 0===a&&(a=!1),n.CheckValue(t)?n.CheckValue(e)?n.CheckValue(t[i])?e[o]=t[i]:a&&r.default.Warn(r.ClogKey.UI,"GetValue target["+i+"] is null or undefined"):a&&r.default.Warn(r.ClogKey.UI,"GetValue scope is null"):a&&r.default.Warn(r.ClogKey.UI,"GetValue target is null")},n.GetLocalStorageNumber=function(t,e){var n=cc.sys.localStorage.getItem(t);if(null==n&&null!=e)return e;if(null==n&&null==e)return-1;var o=Number(n);return isNaN(o)?e:o},n.SetLocalStorageNumber=function(t,e){null!=e&&cc.sys.localStorage.setItem(t,e)},n.CheckValue=function(t){return""!==t&&void 0!==t&&null!==t},n.CheckDict=function(t){var e=0;if(t)for(var n in t)e++;return e},cc._RF.pop()},{"../../base/script/frame/clog/Clog":"Clog","../other/EnumCenter":"EnumCenter"}],Utility:[function(t,e,n){"use strict";cc._RF.push(e,"b9fe39fqt9KAa9e1vkETzv/","Utility"),Object.defineProperty(n,"__esModule",{value:!0}),n.IsObject=function(t){return"function"==typeof t||!(!t||"object"!=typeof t)};var o=function(){function t(){}return t.getWorlPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},t}();n.Utility=o,cc._RF.pop()},{}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"3ff78DSuBpK3oK12sDiLOHM","Utils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.calcSumStr=function(t){if(void 0==t||null==t)return"";if(Array.isArray(t)){var e="";for(var n in t)e+=this.calcSumStr(t[n]);return e}if(t instanceof Object){var o=[];for(var r in t)o.push(r);o.sort(function(t,e){return t>e?1:t<e?-1:0});e="";for(var i in o){void 0!=t[n=o[i]]&&null!=t[n]&&(e+=n,e+=this.calcSumStr(t[n]))}return e}return t},t.getTenStr=function(t){return(t>=10?"":"0")+t},t.formateTimestamp=function(t){var e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),i=e.getHours(),a=e.getMinutes(),s=e.getSeconds();return n+"-"+this.getTenStr(o)+"-"+this.getTenStr(r)+" "+this.getTenStr(i)+":"+this.getTenStr(a)+":"+this.getTenStr(s)},t}();n.default=o,cc._RF.pop()},{}],VsComponent:[function(t,e,n){"use strict";cc._RF.push(e,"279e9qnTopNYo2oyDWBm7P9","VsComponent");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./BaseComponent"),i=t("../../../base/script/global/SS"),a=t("../../other/EnumCenter"),s=t("../../room/controller/RoomController"),l=t("../../../base/script/frame/ui/UIUtil"),c=t("../../../base/script/util/StringUtil"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animVs=null,e._sprHeadPlayer1=null,e._sprHeadPlayer2=null,e._labNickNamePlayer1=null,e._labNickNamePlayer2=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.removeEvent()},e.prototype.initRoot=function(){this._animVs=this.node.getComponent(cc.Animation),this._sprHeadPlayer1=cc.find("Left/PlayerLeft/HeadMask/Head",this.node).getComponent(cc.Sprite),this._sprHeadPlayer2=cc.find("Right/PlayerRight/HeadMask/Head",this.node).getComponent(cc.Sprite),this._labNickNamePlayer1=cc.find("Left/PlayerLeft/LabNickName",this.node).getComponent(cc.Label),this._labNickNamePlayer2=cc.find("Right/PlayerRight/LabNickName",this.node).getComponent(cc.Label)},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.initData=function(){var t=s.RoomController.GetHasPlayerSeatData();t.length<2||(this._labNickNamePlayer1.string=c.StringLimitForce(t[0].Name,12),this._labNickNamePlayer2.string=c.StringLimitForce(t[1].Name,12),l.UIUtil.LoadRemoteImage(i.SS.ImageUrlProxy+t[0].Icon,this._sprHeadPlayer1),l.UIUtil.LoadRemoteImage(i.SS.ImageUrlProxy+t[1].Icon,this._sprHeadPlayer2))},e.prototype.Init=function(){this.initRoot(),this.initEvent(),this.initData(),this.InitComplete()},e.prototype.Reset=function(){},e.prototype.Show=function(){var t=this;this.node.active=!0,this._animVs.play("A_Game_VS",0),this.scheduleOnce(function(){t.node.active=!1,i.SS.EventCenter.emit(a.EnumGameMessageType.VsAnimFinish)},1.5)},e}(r.default);n.default=u,cc._RF.pop()},{"../../../base/script/frame/ui/UIUtil":"UIUtil","../../../base/script/global/SS":"SS","../../../base/script/util/StringUtil":"StringUtil","../../other/EnumCenter":"EnumCenter","../../room/controller/RoomController":"RoomController","./BaseComponent":"BaseComponent"}],WebPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"0284dy+QupFEIq6qbCKMrw1","WebPlatform");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Access=function(t){return!1},e.prototype.GetStorage=function(t){return""},e.prototype.GetUserDataPath=function(){return""},e.prototype.GetUserInfo=function(){},e.prototype.Login=function(){},e.prototype.MakeDir=function(t){return!1},e.prototype.ReadDir=function(t){return[]},e.prototype.ReadFile=function(t){return""},e.prototype.RemoveDir=function(t){return!1},e.prototype.RemoveFile=function(t){return!1},e.prototype.RemoveStorage=function(t){return!1},e.prototype.SetStorage=function(t,e){return!1},e.prototype.WriteFile=function(t,e){return!1},e}(t("./BasePlatform").BasePlatform);n.WebPlatform=r,cc._RF.pop()},{"./BasePlatform":"BasePlatform"}],WechatPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"c0a44fJiNhKKr8Q6FZsvpUu","WechatPlatform");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./BasePlatform"),i=t("../../global/SS"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Login=function(){return new Promise(function(t){var e={};console.warn("wechat login"),i.wx.login({success:function(n){console.warn("wechat login success",n),e.code=n.code,t(e)},fail:function(n){console.warn("wechat login error",n),t(e)}})})},e.prototype.GetUserInfo=function(){return new Promise(function(t){i.wx.getUserInfo({success:function(e){t(e)},fail:function(e){t(null)}})})},e.prototype.GetUserDataPath=function(){return i.wx.env.USER_DATA_PATH},e.prototype.Access=function(t){var e=i.wx.getFileSystemManager();try{return e.accessSync(t),!0}catch(t){return!1}},e.prototype.MakeDir=function(t){var e=i.wx.getFileSystemManager();try{return e.mkdirSync(t),!0}catch(t){return!1}},e.prototype.ReadDir=function(t){try{return i.wx.getFileSystemManager().readdirSync(t)}catch(t){return[]}},e.prototype.RemoveDir=function(t){var e=i.wx.getFileSystemManager();try{return e.rmdirSync(t,!0),!0}catch(t){return!1}},e.prototype.WriteFile=function(t,e){var n=i.wx.getFileSystemManager();try{return n.writeFileSync(t,e,"utf-8"),!0}catch(t){return!1}},e.prototype.ReadFile=function(t){var e="";try{e=i.wx.getFileSystemManager().readFileSync(t,"utf-8")}catch(e){console.warn("readFile "+t+" error",JSON.stringify(e))}return e},e.prototype.RemoveFile=function(t){var e=i.wx.getFileSystemManager();try{return e.unlinkSync(t),!0}catch(t){return!1}},e.prototype.SetStorage=function(t,e){try{return i.wx.setStorageSync(t,e),!0}catch(t){return!1}},e.prototype.GetStorage=function(t){try{return i.wx.getStorageSync(t)}catch(t){return""}},e.prototype.RemoveStorage=function(t){try{return i.wx.removeStorageSync(t),!0}catch(t){return!1}},e}(r.BasePlatform);n.WechatPlatform=a,cc._RF.pop()},{"../../global/SS":"SS","./BasePlatform":"BasePlatform"}],Xhr:[function(t,e,n){"use strict";cc._RF.push(e,"15f91d3rMFBJ75ylNA+r+T5","Xhr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../frame/clog/Clog"),a=t("../../global/SS"),s=function(){function t(t){this.queryBase=new l;var e=t.indexOf("http")>=0?"":a.SS.HttpUrl;this.url=e+t+(t.indexOf("?")>-1?"&":"?")}return t.prototype.Query=function(t){return this.queryBase.Push(t),this},Object.defineProperty(t.prototype,"Url",{get:function(){return this.url+this.queryBase.ToString()},enumerable:!0,configurable:!0}),t}();n.XhrUrl=s;var l=function(){function t(){this.query=[{key:"package",value:"im."+a.SS.CurAppName+".minigame."+a.SS.CurPlatformStr},{key:"_ipv",value:"0"},{key:"_platform",value:a.SS.CurPlatformStr},{key:"_model",value:""},{key:"_timestamp",value:Math.floor((new Date).valueOf()/1e3).toString()},{key:"_index",value:t.indexStr}]}return Object.defineProperty(t,"indexStr",{get:function(){return this.index++,this.index.toString()},enumerable:!0,configurable:!0}),t.prototype.Push=function(t){this.query.push(t)},t.prototype.ToString=function(){var t=[];return this.query.forEach(function(e){return t.push(e.key+"="+e.value)}),t.join("&")},t.index=0,t}(),c=function(){function t(){this.config=[{key:"content-type",value:"application/x-www-form-urlencoded"},{key:"user-token",value:""}]}return t.prototype.ToString=function(){var t=[];return this.config.forEach(function(e){return t.push(e.key+":"+e.value)}),JSON.stringify(t)},t}(),u=function(){function t(){}return t.SetHeaderToken=function(t){this.header.config.find(function(t){return"user-token"==t.key}).value=t},t.GetJson=function(e){return o(this,void 0,Promise,function(){var n=this;return r(this,function(o){return[2,new Promise(function(o,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)switch(i.default.Green(i.ClogKey.Net,"get json from "+e+" status code :"+a.status),a.status){case 200:var n=void 0;try{n=JSON.parse(a.responseText)}catch(t){r({message:"\u8fd4\u56de\u4fe1\u606f\u9519\u8bef"})}i.default.Green(i.ClogKey.Net,"[XHR GET]\t\n[url]:"+e+"\t\n[msg]:"+JSON.stringify(n)),o(n);break;default:r(t.getEror(a.status))}},a.open("GET",e,!0),n.header.config.forEach(function(t){a.setRequestHeader(t.key,t.value)}),a.send(null),i.default.Green(i.ClogKey.Net,"[XHR GET]\t\n[url]:"+e+"\t\n[header]:"+n.header.ToString())})]})})},t.PostJson=function(e,n){return o(this,void 0,Promise,function(){var o=this;return r(this,function(r){return[2,new Promise(function(r,a){var s=new XMLHttpRequest;if(s.onreadystatechange=function(){if(4==s.readyState)switch(s.status){case 200:var n=void 0;try{n=JSON.parse(s.responseText)}catch(t){a({message:"\u8fd4\u56de\u4fe1\u606f\u9519\u8bef"})}i.default.Green(i.ClogKey.Net,"[XHR POST]\t\n[url]:"+e+"\t\n[msg]:"+JSON.stringify(n)),r(n);break;default:a(t.getEror(s.status))}},s.open("POST",e,!0),o.header.config.forEach(function(t){s.setRequestHeader(t.key,t.value)}),n){var l=[];for(var c in n)n.hasOwnProperty(c)&&n[c]&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(n[c]));var u=l.join("&");s.send(u)}else s.send(null);i.default.Green(i.ClogKey.Net,"[XHR POST]\t\n[url]:"+e+"\t\n[post data]:"+JSON.stringify(n)+",\t\n[header]:"+o.header.ToString())})]})})},t.getEror=function(t){return i.default.Error("xhr states error, code="+t),t>=500?{message:"\u670d\u52a1\u5668\u8fd4\u56de\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5"}:t>=400?{message:"\u9519\u8bef\u7684\u8bf7\u6c42\uff0c\u8bf7\u91cd\u8bd5"}:t>=300?{message:"\u767b\u5f55\u72b6\u6001\u53ef\u80fd\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u8bd5"}:{message:"\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5"}},t.header=new c,t}();n.default=u,cc._RF.pop()},{"../../frame/clog/Clog":"Clog","../../global/SS":"SS"}],XiYouController:[function(t,e,n){"use strict";cc._RF.push(e,"f94756klnRHqamO66a4+c65","XiYouController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/global/SS"),a=t("../xiyouSDK/XiyouSDK"),s=t("./XiyouSocket"),l=t("../../../base/script/frame/clog/Clog"),c=t("../../login/controller/LoginController"),u=t("../../room/controller/RoomController"),h=t("../../other/EventCommond"),f=t("../../../base/script/sdk/thinkingdata/controller/TaContoroller"),p=function(){function t(){}return t.initXiYou=function(){return o(this,void 0,void 0,function(){var t=this;return r(this,function(e){return[2,new Promise(function(e){a.XiyouSDK.Ins.isInit()?e():a.XiyouSDK.Ins.initConfig({appId:i.SS.QQAppId,callFunc:function(){return o(t,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,this.xiYouSocket.Open(a.XiyouSDK.Ins.getSocketUrl())];case 1:return t.sent(),e(),[2]}})})},funcObj:t,sendMsgFunc:t.xiYouSocket.sendMsg,netObj:t.xiYouSocket,isShowLog:l.default.IsOpenLog,isDebug:i.SS.IsDevMode})})]})})},t.EndXiYouSocket=function(){this.xiYouSocket.Close(),a.XiyouSDK.Ins.resetAllParam()},t.ReconectXiyou=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return l.default.Green(l.ClogKey.Net,"\u3010\u91cd\u8fdexiyou\u3011"),[4,this.initXiYou()];case 1:return t.sent(),[4,c.LoginController.Step1LoginQQ()];case 2:return t.sent(),[4,c.LoginController.Step2LoginXiyou()];case 3:return t.sent()||(l.default.Error("\u91cd\u8fdexiyou login\u5931\u8d25"),this.JumpToXiyou()),[2]}})})},t.JumpToXiyou=function(){i.qq&&(u.RoomController.EndBanBanSocket(),t.EndXiYouSocket(),i.SS.EventCenter.emit(h.EventCommond.UIRoomReset),u.RoomController.CurRoom&&f.TaController.QuitRoom(u.RoomController.CurRoom.RoomId,u.RoomController.CreateorInfo.UId,u.RoomController.CurRoom.RoomType,u.RoomController.CurRoom.RoomTypes,u.RoomController.CurRoom.Property),i.qq.exitMiniProgram({}))},t.xiYouSocket=new s.XiyouSocket,t}();n.XiYouController=p,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../../base/script/sdk/thinkingdata/controller/TaContoroller":"TaContoroller","../../login/controller/LoginController":"LoginController","../../other/EventCommond":"EventCommond","../../room/controller/RoomController":"RoomController","../xiyouSDK/XiyouSDK":"XiyouSDK","./XiyouSocket":"XiyouSocket"}],XiYouData:[function(t,e,n){"use strict";cc._RF.push(e,"527ffChqgtIIaxQc4SBud55","XiYouData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){null!=t&&(this.MomoId=t.momoId,this.Name=t.name,this.Age=t.age,this.VIP=t.vipLevel,this.CharmValue=t.charmValue,this.HomeCity=t.homeCity,this.OpenId=t.openId,this.Deposit=t.deposit,this.Gold=t.gold)}}();n.XiyouData=o,cc._RF.pop()},{}],XiYouGiftConfig:[function(t,e,n){"use strict";cc._RF.push(e,"e2fd8bIT3lBzpC34QaQmLYP","XiYouGiftConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../base/script/frame/clog/Clog"),r=t("../../other/EnumCenter"),i=function(){function t(t){this.AnimName=t.ani_name,this.Id=t.id,this.Name=t.name,this.Price=t.price,this.Charm=t.charm,this.Index=t.index,this.Type=t.type}return Object.defineProperty(t.prototype,"Image",{get:function(){return"gift_01_"+this.Id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VipValue",{get:function(){switch(this.Type){case r.EnumXiyouItemType.XiyouCommodity:return this.Price;case r.EnumXiyouItemType.XiyouProp:return 0}},enumerable:!0,configurable:!0}),t}();n.XiYouGiftConfig=i;var a=function(){function t(){}return t.Init=function(t){this.AllConfig=new Array;for(var e=0;e<t.length;e++){var n=t[e],r=new i(n);this.AllConfig.push(r)}o.default.Trace(o.ClogKey.Entry,"XiYouGiftTable.allConfig"+JSON.stringify(this.AllConfig))},t.GetGiftConfigById=function(t){return this.AllConfig.find(function(e){return e.Id==t})},t}();n.XiYouGiftTable=a,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../other/EnumCenter":"EnumCenter"}],XiYouGiftManager:[function(t,e,n){"use strict";cc._RF.push(e,"4bfedtlwX9OfaBt1jBo/qnr","XiYouGiftManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/frame/clog/Clog"),a=t("../../room/controller/RoomController"),s=t("../../../base/script/api/http/Xhr"),l=t("../xiyouSDK/XiyouSDK"),c=t("../xiyouSDK/utils/NetCenterMgr"),u=t("../xiyouSDK/socket/MsgDefine"),h=t("../../common/view/UIToast"),f=t("../../../base/script/global/SS"),p=t("../../other/Md5Util"),d=t("../../login/model/SessionData"),m=t("../../other/EventCommond"),y=t("../../sendGift/model/GiftTargetData"),g=t("../config/XiYouGiftConfig"),C=t("../../other/EnumCenter"),_=t("../../../base/script/sdk/thinkingdata/controller/TaContoroller"),v=function(){function t(){}return Object.defineProperty(t,"giftConfig",{get:function(){return g.XiYouGiftTable.GetGiftConfigById(this.CurSendGiftInfo.Id)},enumerable:!0,configurable:!0}),t.ResetCurSendGiftInfo=function(){this.CurSendGiftInfo={Id:g.XiYouGiftTable.AllConfig[0].Id,Num:1}},t.GiftSend=function(){return o(this,void 0,void 0,function(){var t,e,n;return r(this,function(o){switch(o.label){case 0:for(i.default.Green(i.ClogKey.Net,"[gift send] from:"+d.Session.BanBan.UId+", to:"+this.CurSendGiftTarget.UIdList.toString()+",giftId:"+this.CurSendGiftInfo.Id),t=0;t<this.CurSendGiftTarget.UIdList.length;t++)e=this.giftConfig.Type==C.EnumXiyouItemType.XiyouCommodity?"coin":"normal",n="room",_.TaController.SendGift(this.CurSendGiftInfo.Id,this.giftConfig.Name,this.CurSendGiftInfo.Num,this.giftConfig.Price,e,a.RoomController.CurRoom.RoomId,n);return[4,this.Step1GetGiftOrderNo()];case 1:return o.sent()?[4,this.Step2XiyouCostItem()]:(h.UIToast.Show("\u83b7\u53d6\u793c\u7269\u8ba2\u5355\u9519\u8bef"),[2]);case 2:return o.sent()?[4,this.Step3SendGiftResult()]:(h.UIToast.Show("\u8d60\u9001\u793c\u7269\u5931\u8d25"),[2]);case 3:return o.sent()?[4,this.Setp4GetXiyouUserInfo()]:(h.UIToast.Show("\u540c\u6b65\u793c\u7269\u7ed3\u679c\u9519\u8bef"),[2]);case 4:return o.sent()?[2]:(h.UIToast.Show("\u540c\u6b65\u6570\u636e\u51fa\u9519"),[2])}})})},t.Step1GetGiftOrderNo=function(){var t=this;return new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o,l,c;return r(this,function(r){switch(r.label){case 0:return t=new s.XhrUrl("xiyou/createOrder").Url,n=g.XiYouGiftTable.GetGiftConfigById(this.CurSendGiftInfo.Id),o={appId:f.SS.QQAppId,giftId:this.CurSendGiftInfo.Id,giftName:n.Name,giftNum:this.CurSendGiftInfo.Num,giftPrice:n.Price,money:n.Price*this.CurSendGiftTarget.UIdList.length,from:d.Session.BanBan.UId,to:this.CurSendGiftTarget.ToString(),rid:a.RoomController.CurRoom.RoomId,sign:null},l=p.Md5Util.GenSign(o),o.sign=l,[4,s.default.PostJson(t,o)];case 1:return c=r.sent(),c.success?(this.step1Result=c.data,i.default.Trace(i.ClogKey.Net,"[Step1 success, resp]:"+JSON.stringify(this.step1Result)),e(!0),[2]):(e(!1),[2])}})})})},t.Step2XiyouCostItem=function(){var t=this;return new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o=this;return r(this,function(r){return t=function(){for(var t=g.XiYouGiftTable.GetGiftConfigById(o.CurSendGiftInfo.Id),e=[],n=0;n<o.CurSendGiftTarget.UIdList.length;n++){var r=o.CurSendGiftTarget.UIdList[n];o.step1Result.to[r]&&e.push(o.step1Result.to[r])}var s={type:"1",toArrs:e,roomId:a.RoomController.CurRoom.RoomId.toString(),productId:o.CurSendGiftInfo.Id.toString(),num:o.CurSendGiftInfo.Num,price:t.Price*o.CurSendGiftTarget.UIdList.length,orderNo:o.step1Result.orderNo,cbURL:f.SS.HttpUrl+"xiyou/payCallback",param:""};i.default.Green(i.ClogKey.Net,"[Step2XiyouCostItem req], postData="+JSON.stringify(s)),l.XiyouSDK.Ins.costGoods(s.type,s.productId,s.num,s.price,s.roomId,s.orderNo,s.cbURL,s.param,s.toArrs)},n=function(t){if(o.step2Result={success:t.success,deposit:t.deposit,message:t.message,gold:t.gold},0!=o.step2Result.success)return h.UIToast.Show(o.step2Result.message),void e(!1);d.Session.XiYou.Deposit=o.step2Result.deposit,d.Session.XiYou.Gold=o.step2Result.gold,f.SS.EventCenter.emit(m.EventCommond.OnXiYouMoneyChange),i.default.Green(i.ClogKey.Net,"\u793c\u7269\u8d60\u9001\u6210\u529f\uff0cDeposit="+d.Session.XiYou.Deposit),e(!0)},c.default.Ins.registerMsgListener(u.default.COST_GOODS,function(t,e,o){i.default.Green(i.ClogKey.Net,"[Step2XiyouCostItem resp], info="+JSON.stringify(o)),o&&0==o.ec&&n(o.data)},this,!0),t(),[2]})})})},t.Step3SendGiftResult=function(){var t=this;return new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o,i;return r(this,function(r){switch(r.label){case 0:return t=new s.XhrUrl("xiyou/sendGiftResult").Url,n={orderNo:this.step1Result.orderNo,success:this.step2Result.success,message:this.step2Result.message,sign:null},o=p.Md5Util.GenSign(n),n.sign=o,[4,s.default.PostJson(t,n)];case 1:return i=r.sent(),i.success?(i.data,e(!0),[2]):(e(!1),[2])}})})})},t.Setp4GetXiyouUserInfo=function(){var t=this;return new Promise(function(e){return o(t,void 0,void 0,function(){var t,e;return r(this,function(n){return t=function(){l.XiyouSDK.Ins.getAccountInfo(d.Session.XiYou.MomoId)},e=function(t){d.Session.XiYou.VIP=t.data.vipGrade.vipGrade,i.default.Green(i.ClogKey.Net,"[Setp4\u66f4\u65b0\u73a9\u5bb6VIP],Session.XiYou.VIP "+d.Session.XiYou.VIP)},c.default.Ins.registerMsgListener(u.default.REQUEST_ACCOUNT_INFO,function(t,n,o){i.default.Green(i.ClogKey.Net,"[Setp4GetXiyouUserInfo resp], info="+JSON.stringify(o)),o&&0==o.ec?e(o.data):i.default.Error("Setp4GetXiyouUserInfo error")},this,!0),t(),[2]})})})},t.CurSendGiftTarget=new y.GiftTargetData,t}();n.XiYouGiftManager=v,cc._RF.pop()},{"../../../base/script/api/http/Xhr":"Xhr","../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../../base/script/sdk/thinkingdata/controller/TaContoroller":"TaContoroller","../../common/view/UIToast":"UIToast","../../login/model/SessionData":"SessionData","../../other/EnumCenter":"EnumCenter","../../other/EventCommond":"EventCommond","../../other/Md5Util":"Md5Util","../../room/controller/RoomController":"RoomController","../../sendGift/model/GiftTargetData":"GiftTargetData","../config/XiYouGiftConfig":"XiYouGiftConfig","../xiyouSDK/XiyouSDK":"XiyouSDK","../xiyouSDK/socket/MsgDefine":"MsgDefine","../xiyouSDK/utils/NetCenterMgr":"NetCenterMgr"}],XiYouUserInfoController:[function(t,e,n){"use strict";cc._RF.push(e,"f42d1MbY/JN75pwbKB4WG3I","XiYouUserInfoController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../xiyouSDK/utils/NetCenterMgr"),a=t("../xiyouSDK/socket/MsgDefine"),s=t("../../../base/script/frame/clog/Clog"),l=t("../xiyouSDK/XiyouSDK"),c=t("../model/XiyouUserInfoData"),u=function(){function t(){}return t.GetXiyouUserInfo=function(t){return o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o;return r(this,function(r){return e=function(){l.XiyouSDK.Ins.getAccountInfo(t)},o=function(t){n(new c.XiyouUserInfoData(t.data))},i.default.Ins.registerMsgListener(a.default.REQUEST_ACCOUNT_INFO,function(t,e,n){n&&0==n.ec?o(n.data):s.default.Error("GetXiyouFriendInfo resp error")},this,!0),e(),[2]})})})]})})},t}();n.XiYouUserDetailController=u,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../model/XiyouUserInfoData":"XiyouUserInfoData","../xiyouSDK/XiyouSDK":"XiyouSDK","../xiyouSDK/socket/MsgDefine":"MsgDefine","../xiyouSDK/utils/NetCenterMgr":"NetCenterMgr"}],XiyouAddFriendController:[function(t,e,n){"use strict";cc._RF.push(e,"77342GHDxxDiK3teNIo++w0","XiyouAddFriendController");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../xiyouSDK/XiyouSDK"),a=t("../xiyouSDK/utils/NetCenterMgr"),s=t("../xiyouSDK/socket/MsgDefine"),l=t("../../../base/script/frame/clog/Clog"),c=t("../../common/view/UIToast"),u=function(){function t(){}return t.AddFriend=function(t){return o(this,void 0,Promise,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){return o(e,void 0,void 0,function(){var e,o;return r(this,function(r){return e=function(){i.XiyouSDK.Ins.addFriend(t)},o=function(t){l.default.Trace(l.ClogKey.Net,"msg="+JSON.stringify(t)),1==t.success&&(c.UIToast.Show("\u6dfb\u52a0\u597d\u53cb\u6210\u529f"),n(!0)),n(!1)},a.default.Ins.registerMsgListener(s.default.ADD_FRIEND,function(t,e,n){l.default.Trace(l.ClogKey.Net,"info="+JSON.stringify(n)),n&&0==n.ec?o(n.data):l.default.Error("Xiyou AddFriend resp error")},this,!0),e(),[2]})})})]})})},t}();n.XiyouAddFriendController=u,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../common/view/UIToast":"UIToast","../xiyouSDK/XiyouSDK":"XiyouSDK","../xiyouSDK/socket/MsgDefine":"MsgDefine","../xiyouSDK/utils/NetCenterMgr":"NetCenterMgr"}],XiyouSDK:[function(t,e,n){"use strict";cc._RF.push(e,"a88228KO19MHIaKHByUd73n","XiyouSDK"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./utils/Log"),r=t("./data/HData"),i=t("./utils/QQUtils"),a=t("./utils/Utils"),s=t("./utils/NetCenterMgr"),l=t("./utils/md5"),c=t("./socket/MsgDefine"),u=function(){function t(){}return Object.defineProperty(t,"Ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!0,configurable:!0}),t.prototype.isInit=function(){return r.default.isInitSdk},t.prototype.resetAllParam=function(){r.default.isInitSdk=!1,r.default.isShowLog=!1,r.default.appId="",r.default.gsToken="",r.default.sendMsg=null,r.default.NetObj=null,r.default.isNeedAuthorize=!1,s.default.Ins.removeAllListeners()},t.prototype.initConfig=function(t){if(o.default.showVersion(),t.appId&&t.callFunc&&t.funcObj&&t.sendMsgFunc&&t.netObj){o.default.showWarn("XYSDK - \u5f00\u59cb\u521d\u59cb\u5316 - data\uff1a",t),r.default.isInitSdk=!0,r.default.appId=t.appId,r.default.sendMsg=t.sendMsgFunc,r.default.NetObj=t.netObj,r.default.isShowLog=!!t.isShowLog;var e=!!t.isDebug;e&&(r.default.hallSocketUrl="wss://testcenter-yqwsq-xiyou.xiyouchat.com:3000/getServer"),r.default.requestAddr="https://apigateway.52xiyou.com/api/center_server/game/version/",r.default.requestAddr=r.default.requestAddr+r.default.appId+"/"+r.default.CLIENTVERSION,i.default.Ins.doRequest(r.default.requestAddr,"GET",null,function(n){n.data&&200===n.data.status&&n.data.data&&n.data.data.center_addr&&(e||(r.default.hallSocketUrl=n.data.data.center_addr)),t.callFunc&&t.funcObj&&t.callFunc.apply(t.funcObj)},function(e){t.callFunc&&t.funcObj&&t.callFunc.apply(t.funcObj)})||t.callFunc&&t.funcObj&&t.callFunc.apply(t.funcObj)}else o.default.showWarn("XYSDK - \u521d\u59cb\u5316\u7f3a\u5c11\u53c2\u6570")},t.prototype.initSocketUrl=function(t){void 0===t&&(t=!1),r.default.appId?t?r.default.hallSocketUrl="wss://testcenter-yqwsq-xiyou.xiyouchat.com:3000/getServer":(r.default.requestAddr=r.default.requestAddr+r.default.appId+"/"+r.default.CLIENTVERSION,i.default.Ins.doRequest(r.default.requestAddr,"GET",null,function(t){t.data&&200===t.data.status&&t.data.data&&t.data.data.center_addr&&(r.default.hallSocketUrl=t.data.data.center_addr)},function(t){})):o.default.showWarn("XYSDK - \u521d\u59cb\u5316websocket\u5730\u5740\uff0c\u7f3a\u5c11appId")},t.prototype.getSocketUrl=function(){return r.default.hallSocketUrl},t.prototype.sendHeartBeat=function(){this.sendMsg(c.default.U_HEAR_MSG,{})},t.prototype.login=function(t,e){if(o.default.showWarn("XYSDK - \u5f00\u59cb\u767b\u5f55 - ","systemInfoData\uff1a",t,"loginData\uff1a",e),t)if(e)if(r.default.appId){var n={},i=navigator.userAgent.toLowerCase().split(";"),a=i&&i.length>4?i[i.length-5]:"";""!=a&&(a=a.substr(a.lastIndexOf("(")+1,a.length)),n.appId=r.default.appId;var s='{"client":"'+t.data.system+'","rom":"'+t.data.SDKVersion+'","mac":"","gversion":"'+r.default.H5_VERSION+'","gversion_str":"'+r.default.H5_VERSION+'","rom_str":"6","version":"NaN'+a+'","uid":"'+t.data.model+'","kid":"'+t.data.model+'","realVersion":"'+r.default.H5_VERSION+'","h5_version":"","mversion":"'+t.data.version+'","appToken":"","clientApp":""}';n.ua=s,n.code=e.data.code,n.isFromIM=!1,r.default.gsToken="",this.sendMsg(c.default.U_USER_LOGIN,n)}else o.default.showWarn("XYSDK - \u767b\u5f55\uff0c\u7f3a\u5c11appId");else o.default.showWarn("XYSDK - \u83b7\u53d6 qq.login() \u6570\u636e\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5");else o.default.showWarn("XYSDK - \u83b7\u53d6 qq.getSystemInfoSync() \u6570\u636e\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5")},t.prototype.sendPlayerInfo=function(t,e){o.default.showWarn("XYSDK - \u53d1\u9001\u73a9\u5bb6\u4fe1\u606f\uff1a",t,e),e&&e.userInfo&&(t.avatarUrl=e.userInfo.avatarUrl,t.city=e.userInfo.city,t.country=e.userInfo.country,t.language=e.userInfo.language,t.nickName=e.userInfo.nickName,t.province=e.userInfo.province,t.gender=e.userInfo.gender),this.sendMsg(c.default.U_INFO_POST,t)},t.prototype.getGiftList=function(){o.default.showWarn("XYSDK - \u83b7\u53d6\u793c\u7269\u5217\u8868"),this.sendMsg(c.default.REQUEST_GET_GIFT_PANEL,{types:"2011"})},t.prototype.costGoods=function(t,e,n,r,i,a,s,l,u){void 0===l&&(l=""),void 0===u&&(u=[]),o.default.showWarn("XYSDK - \u6d88\u8017\u7269\u54c1\uff1a",t,e,n,r,i,a,s,l,u),this.sendMsg(c.default.COST_GOODS,{type:t,productId:e,num:n,price:r,roomId:i,orderNo:a,cbURL:s,param:l,toArrs:u})},t.prototype.getAccountInfo=function(t){o.default.showWarn("XYSDK - \u73a9\u5bb6\u8be6\u8bf7\uff1a",t),this.sendMsg(c.default.REQUEST_ACCOUNT_INFO,{userId:t})},t.prototype.addFriend=function(t,e){void 0===e&&(e=1),o.default.showWarn("XYSDK - \u6dfb\u52a0\u597d\u53cb\uff1a",t),this.sendMsg(c.default.ADD_FRIEND,{momoId:t,flag:e})},t.prototype.getBagInfo=function(t){void 0===t&&(t=!1),o.default.showWarn("XYSDK - \u83b7\u53d6\u80cc\u5305\u7269\u54c1\uff1a",r.default.appId,t),this.sendMsg(c.default.REQUEST_USER_BAG,{appId:r.default.appId,onlyCanUse:t})},t.prototype.getItemInfo=function(t){o.default.showWarn("XYSDK - \u83b7\u53d6\u7269\u54c1\u8be6\u60c5\uff1a",r.default.appId,t),this.sendMsg(c.default.REQUEST_ITEM_INFO,{appId:r.default.appId,itemId:t})},t.prototype.setItemState=function(t,e){o.default.showWarn("XYSDK - \u4f7f\u7528\u7269\u54c1\uff1a",r.default.appId,t,e),this.sendMsg(c.default.REQUEST_CHANGE_ITEM_STATE,{appId:r.default.appId,itemId:t,flag:e})},t.prototype.baseSendMsg=function(t,e){e||(e={}),r.default.gsToken&&(e.code=r.default.gsToken);var n=a.default.calcSumStr(e);r.default.gsToken&&(r.default.gsToken.length>=16?n+=r.default.gsToken.slice(0,16):n+=r.default.gsToken);var o=(new l.default).hex_md5(n).toLocaleLowerCase(),i={header:{msgCode:t,version:r.default.H5_VERSION},body:{data:e,sum:o}};return JSON.stringify(i)},t.prototype.sendMsg=function(t,e){r.default.sendMsg&&r.default.NetObj?r.default.sendMsg.apply(r.default.NetObj,[t,e]):o.default.showWarn("XYSDK - \u5bf9\u63a5\u65b9\u7f51\u7edc\u65b9\u6cd5\u4e22\u5931\uff0c\u8bf7\u68c0\u67e5")},t}();n.XiyouSDK=u,cc._RF.pop()},{"./data/HData":"HData","./socket/MsgDefine":"MsgDefine","./utils/Log":"Log","./utils/NetCenterMgr":"NetCenterMgr","./utils/QQUtils":"QQUtils","./utils/Utils":"Utils","./utils/md5":"md5"}],XiyouSocket:[function(t,e,n){"use strict";cc._RF.push(e,"f6b79BkK/dAGbV5j3Lq01fo","XiyouSocket");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../base/script/frame/clog/Clog"),a=t("../xiyouSDK/XiyouSDK"),s=t("../xiyouSDK/utils/NetCenterMgr"),l=t("../../common/view/UIToast"),c=t("../../../base/script/global/SS"),u=t("./XiYouController"),h=function(){function t(){this.ws=null,this.needOpen=!1,this.retriedOpenImmediately=!1,this.retryTimerId=0,this.heartbeatTimerId=0,this.relinkXiyouTimer=0}return t.prototype.Open=function(t){return o(this,void 0,void 0,function(){var e=this;return r(this,function(n){return[2,new Promise(function(n){!e.ws||e.ws.url!=t||e.ws.readyState!=WebSocket.OPEN&&e.ws.readyState!=WebSocket.CONNECTING?(e.needOpen=!0,e.ws&&e.ws.close(),e.ws=new WebSocket(t),e.ws.onopen=function(){n(),e.retriedOpenImmediately=!1,e.stopConnectRetry(),e.startHeartbeat(),i.default.Trace(i.ClogKey.Net,"XiyouSocket open success! url:"+t)},e.ws.onmessage=function(t){if(t&&t.data){var e=t.data;try{var n=JSON.parse(e);s.default.Ins.notifyListener(n)}catch(n){i.default.Warn(i.ClogKey.Net,"msg type="+typeof e),i.default.Warn(i.ClogKey.Net,"\u897f\u6e38socket\u6570\u636e\u8fd4\u56de\u6709\u95ee\u9898",t)}}},e.ws.onclose=function(){i.default.Trace(i.ClogKey.Net,"XiyouSocket close! url:"+t),n(),e.needOpen&&(e.retriedOpenImmediately||(e.stopHeartbeat(),e.retriedOpenImmediately=!0,e.Open(t),e.startConnectRetry(t)))}):n()})]})})},t.prototype.startConnectRetry=function(t){var e=this;this.stopConnectRetry(),this.retryTimerId=window.setInterval(function(){e.needOpen?e.relinkXiyouTimer>=3?c.qq?(e.stopConnectRetry(),c.qq.showModal({title:"\u63d0\u793a",content:"\u4e0e\u670d\u52a1\u5668\u5931\u53bb\u8fde\u63a5",success:function(t){t.confirm?u.XiYouController.JumpToXiyou():t.cancel&&u.XiYouController.JumpToXiyou()}})):l.UIToast.Show("\u4e0e\u897f\u6e38\u670d\u52a1\u5668\u5931\u53bb\u8fde\u63a5"):(e.relinkXiyouTimer+=1,e.Open(t)):e.relinkXiyouTimer=0},5e3)},t.prototype.stopConnectRetry=function(){this.retryTimerId&&window.clearInterval(this.retryTimerId),this.retryTimerId=0},t.prototype.startHeartbeat=function(){var t=this;this.stopHeartbeat(),this.heartbeatTimerId=window.setInterval(function(){t.ws&&t.ws.readyState==WebSocket.OPEN&&a.XiyouSDK.Ins.sendHeartBeat()},1e4)},t.prototype.stopHeartbeat=function(){this.heartbeatTimerId&&window.clearInterval(this.heartbeatTimerId),this.heartbeatTimerId=0},t.prototype.Close=function(){this.stopHeartbeat(),this.stopConnectRetry(),this.needOpen=!1,this.ws&&(i.default.Trace(i.ClogKey.Net,"XiyouSocket \u8c03\u7528\u4e86 Close"),this.ws.close()),this.ws=null},t.prototype.sendMsg=function(t,e){var n=a.XiyouSDK.Ins.baseSendMsg(t,e);this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(n):i.default.Warn(i.ClogKey.Net,"attempt to send data when ws not ready")},t}();n.XiyouSocket=h,cc._RF.pop()},{"../../../base/script/frame/clog/Clog":"Clog","../../../base/script/global/SS":"SS","../../common/view/UIToast":"UIToast","../xiyouSDK/XiyouSDK":"XiyouSDK","../xiyouSDK/utils/NetCenterMgr":"NetCenterMgr","./XiYouController":"XiYouController"}],XiyouUserInfoData:[function(t,e,n){"use strict";cc._RF.push(e,"7a5efvrwXROUaISOBc5bE+j","XiyouUserInfoData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t){t&&(this.Id=t.id,this.Num=t.num,this.Name=t.name)}}();n.XiyouGiftWallItemData=o;var r=function(){return function(t){if(null!=t){this.Id=t.id,this.Birthday=t.birthday,this.Icon=t.headImg,this.NickName=t.nickName,this.Sex=t.sex,this.City=t.city?t.city:"\u672a\u77e5",this.CharmGrade=t.charmGrade.charmGrade,this.VipGrade=t.vipGrade.vipGrade,this.CharmValue=t.charm,this.VipValue=t.vipValue,this.WhetherFriends=t.whetherFriends,this.Age=t.age,this.GiftCount=t.giftCount,this.Constellation=t.constellation?t.constellation:"\u672a\u77e5",this.GiftWallInfo=new Array;for(var e=0;e<t.giftList.length;e++){var n=t.giftList[e],r=new o(n);this.GiftWallInfo.push(r)}}}}();n.XiyouUserInfoData=r,cc._RF.pop()},{}],md5:[function(t,e,n){"use strict";cc._RF.push(e,"7424dSVpRtA651AmsNvYrVP","md5"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var o=Array(16),r=Array(16),i=0;i<16;i++)o[i]=909522486^n[i],r[i]=1549556828^n[i];var a=this.binl_md5(o.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(a),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(t){this.hexcase=0}for(var e,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",r=0;r<t.length;r++)e=t.charCodeAt(r),o+=n.charAt(e>>>4&15)+n.charAt(15&e);return o},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(t){this.b64pad=""}for(var e="",n=t.length,o=0;o<n;o+=3)for(var r=t.charCodeAt(o)<<16|(o+1<n?t.charCodeAt(o+1)<<8:0)|(o+2<n?t.charCodeAt(o+2):0),i=0;i<4;i++)8*o+6*i>8*t.length?e+=this.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-i)&63);return e},t.prototype.rstr2any=function(t,e){var n,o,r,i,a,s=e.length,l=Array(Math.ceil(t.length/2));for(n=0;n<l.length;n++)l[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),u=Array(c);for(o=0;o<c;o++){for(a=Array(),i=0,n=0;n<l.length;n++)i=(i<<16)+l[n],i-=(r=Math.floor(i/s))*s,(a.length>0||r>0)&&(a[a.length]=r);u[o]=i,l=a}var h="";for(n=u.length-1;n>=0;n--)h+=e.charAt(u[n]);return h},t.prototype.str2rstr_utf8=function(t){for(var e,n,o="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),r++),e<=127?o+=String.fromCharCode(e):e<=2047?o+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,o=-271733879,r=-1732584194,i=271733878,a=0;a<t.length;a+=16){var s=n,l=o,c=r,u=i;n=this.md5_ff(n,o,r,i,t[a+0],7,-680876936),i=this.md5_ff(i,n,o,r,t[a+1],12,-389564586),r=this.md5_ff(r,i,n,o,t[a+2],17,606105819),o=this.md5_ff(o,r,i,n,t[a+3],22,-1044525330),n=this.md5_ff(n,o,r,i,t[a+4],7,-176418897),i=this.md5_ff(i,n,o,r,t[a+5],12,1200080426),r=this.md5_ff(r,i,n,o,t[a+6],17,-1473231341),o=this.md5_ff(o,r,i,n,t[a+7],22,-45705983),n=this.md5_ff(n,o,r,i,t[a+8],7,1770035416),i=this.md5_ff(i,n,o,r,t[a+9],12,-1958414417),r=this.md5_ff(r,i,n,o,t[a+10],17,-42063),o=this.md5_ff(o,r,i,n,t[a+11],22,-1990404162),n=this.md5_ff(n,o,r,i,t[a+12],7,1804603682),i=this.md5_ff(i,n,o,r,t[a+13],12,-40341101),r=this.md5_ff(r,i,n,o,t[a+14],17,-1502002290),o=this.md5_ff(o,r,i,n,t[a+15],22,1236535329),n=this.md5_gg(n,o,r,i,t[a+1],5,-165796510),i=this.md5_gg(i,n,o,r,t[a+6],9,-1069501632),r=this.md5_gg(r,i,n,o,t[a+11],14,643717713),o=this.md5_gg(o,r,i,n,t[a+0],20,-373897302),n=this.md5_gg(n,o,r,i,t[a+5],5,-701558691),i=this.md5_gg(i,n,o,r,t[a+10],9,38016083),r=this.md5_gg(r,i,n,o,t[a+15],14,-660478335),o=this.md5_gg(o,r,i,n,t[a+4],20,-405537848),n=this.md5_gg(n,o,r,i,t[a+9],5,568446438),i=this.md5_gg(i,n,o,r,t[a+14],9,-1019803690),r=this.md5_gg(r,i,n,o,t[a+3],14,-187363961),o=this.md5_gg(o,r,i,n,t[a+8],20,1163531501),n=this.md5_gg(n,o,r,i,t[a+13],5,-1444681467),i=this.md5_gg(i,n,o,r,t[a+2],9,-51403784),r=this.md5_gg(r,i,n,o,t[a+7],14,1735328473),o=this.md5_gg(o,r,i,n,t[a+12],20,-1926607734),n=this.md5_hh(n,o,r,i,t[a+5],4,-378558),i=this.md5_hh(i,n,o,r,t[a+8],11,-2022574463),r=this.md5_hh(r,i,n,o,t[a+11],16,1839030562),o=this.md5_hh(o,r,i,n,t[a+14],23,-35309556),n=this.md5_hh(n,o,r,i,t[a+1],4,-1530992060),i=this.md5_hh(i,n,o,r,t[a+4],11,1272893353),r=this.md5_hh(r,i,n,o,t[a+7],16,-155497632),o=this.md5_hh(o,r,i,n,t[a+10],23,-1094730640),n=this.md5_hh(n,o,r,i,t[a+13],4,681279174),i=this.md5_hh(i,n,o,r,t[a+0],11,-358537222),r=this.md5_hh(r,i,n,o,t[a+3],16,-722521979),o=this.md5_hh(o,r,i,n,t[a+6],23,76029189),n=this.md5_hh(n,o,r,i,t[a+9],4,-640364487),i=this.md5_hh(i,n,o,r,t[a+12],11,-421815835),r=this.md5_hh(r,i,n,o,t[a+15],16,530742520),o=this.md5_hh(o,r,i,n,t[a+2],23,-995338651),n=this.md5_ii(n,o,r,i,t[a+0],6,-198630844),i=this.md5_ii(i,n,o,r,t[a+7],10,1126891415),r=this.md5_ii(r,i,n,o,t[a+14],15,-1416354905),o=this.md5_ii(o,r,i,n,t[a+5],21,-57434055),n=this.md5_ii(n,o,r,i,t[a+12],6,1700485571),i=this.md5_ii(i,n,o,r,t[a+3],10,-1894986606),r=this.md5_ii(r,i,n,o,t[a+10],15,-1051523),o=this.md5_ii(o,r,i,n,t[a+1],21,-2054922799),n=this.md5_ii(n,o,r,i,t[a+8],6,1873313359),i=this.md5_ii(i,n,o,r,t[a+15],10,-30611744),r=this.md5_ii(r,i,n,o,t[a+6],15,-1560198380),o=this.md5_ii(o,r,i,n,t[a+13],21,1309151649),n=this.md5_ii(n,o,r,i,t[a+4],6,-145523070),i=this.md5_ii(i,n,o,r,t[a+11],10,-1120210379),r=this.md5_ii(r,i,n,o,t[a+2],15,718787259),o=this.md5_ii(o,r,i,n,t[a+9],21,-343485551),n=this.safe_add(n,s),o=this.safe_add(o,l),r=this.safe_add(r,c),i=this.safe_add(i,u)}return[n,o,r,i]},t.prototype.md5_cmn=function(t,e,n,o,r,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(o,i)),r),n)},t.prototype.md5_ff=function(t,e,n,o,r,i,a){return this.md5_cmn(e&n|~e&o,t,e,r,i,a)},t.prototype.md5_gg=function(t,e,n,o,r,i,a){return this.md5_cmn(e&o|n&~o,t,e,r,i,a)},t.prototype.md5_hh=function(t,e,n,o,r,i,a){return this.md5_cmn(e^n^o,t,e,r,i,a)},t.prototype.md5_ii=function(t,e,n,o,r,i,a){return this.md5_cmn(n^(e|~o),t,e,r,i,a)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();n.default=o,cc._RF.pop()},{}],msgpack:[function(t,e,n){(function(o){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"12447RqjOJM96/yVv3Pi6Kf","msgpack"),function(t){if("object"==(void 0===n?"undefined":r(n))&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:this).msgpack=t()}}(function(){return function e(n,o,r){function i(s,l){if(!o[s]){if(!n[s]){var c="function"==typeof t&&t;if(!l&&c)return c(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=o[s]={exports:{}};n[s][0].call(h.exports,function(t){var e=n[s][1][t];return i(e||t)},h,h.exports,e,n,o,r)}return o[s].exports}for(var a="function"==typeof t&&t,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){n.encode=t("./encode").encode,n.decode=t("./decode").decode,n.Encoder=t("./encoder").Encoder,n.Decoder=t("./decoder").Decoder,n.createCodec=t("./ext").createCodec,n.codec=t("./codec").codec},{"./codec":10,"./decode":12,"./decoder":13,"./encode":15,"./encoder":16,"./ext":20}],2:[function(t,e,n){(function(t){function n(t){return t&&t.isBuffer&&t}e.exports=n(void 0!==t&&t)||n(this.Buffer)||n("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,t("buffer").Buffer)},{buffer:29}],3:[function(t,e,n){n.copy=function(t,e,n,o){var r;n||(n=0),o||0===o||(o=this.length),e||(e=0);var i=o-n;if(t===this&&n<e&&e<o)for(r=i-1;r>=0;r--)t[r+e]=this[r+n];else for(r=0;r<i;r++)t[r+e]=this[r+n];return i},n.toString=function(t,e,n){var o=this,r=0|e;n||(n=o.length);for(var i="",a=0;r<n;)(a=o[r++])<128?i+=String.fromCharCode(a):(192==(224&a)?a=(31&a)<<6|63&o[r++]:224==(240&a)?a=(15&a)<<12|(63&o[r++])<<6|63&o[r++]:240==(248&a)&&(a=(7&a)<<18|(63&o[r++])<<12|(63&o[r++])<<6|63&o[r++]),a>=65536?(a-=65536,i+=String.fromCharCode(55296+(a>>>10),56320+(1023&a))):i+=String.fromCharCode(a));return i},n.write=function(t,e){for(var n=this,o=e||(e|=0),r=t.length,i=0,a=0;a<r;)(i=t.charCodeAt(a++))<128?n[o++]=i:i<2048?(n[o++]=192|i>>>6,n[o++]=128|63&i):i<55296||i>57343?(n[o++]=224|i>>>12,n[o++]=128|i>>>6&63,n[o++]=128|63&i):(i=65536+(i-55296<<10|t.charCodeAt(a++)-56320),n[o++]=240|i>>>18,n[o++]=128|i>>>12&63,n[o++]=128|i>>>6&63,n[o++]=128|63&i);return o-e}},{}],4:[function(t,e,n){function o(t){return new Array(t)}var r=t("./bufferish");(n=e.exports=o(0)).alloc=o,n.concat=r.concat,n.from=function(t){if(!r.isBuffer(t)&&r.isView(t))t=r.Uint8Array.from(t);else if(r.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return r.from.call(n,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},{"./bufferish":8}],5:[function(t,e,n){function o(t){return new i(t)}var r=t("./bufferish"),i=r.global;(n=e.exports=r.hasBuffer?o(0):[]).alloc=r.hasBuffer&&i.alloc||o,n.concat=r.concat,n.from=function(t){if(!r.isBuffer(t)&&r.isView(t))t=r.Uint8Array.from(t);else if(r.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return r.from.call(n,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(t):new i(t)}},{"./bufferish":8}],6:[function(t,e,n){function o(t,e,n,o){var s=a.isBuffer(this),l=a.isBuffer(t);if(s&&l)return this.copy(t,e,n,o);if(c||s||l||!a.isView(this)||!a.isView(t))return i.copy.call(this,t,e,n,o);var u=n||null!=o?r.call(this,n,o):this;return t.set(u,e),u.length}function r(t,e){var n=this.slice||!c&&this.subarray;if(n)return n.call(this,t,e);var r=a.alloc.call(this,e-t);return o.call(this,r,0,t,e),r}var i=t("./buffer-lite");n.copy=o,n.slice=r,n.toString=function(t,e,n){return(!l&&a.isBuffer(this)?this.toString:i.toString).apply(this,arguments)},n.write=function(t){return function(){return(this[t]||i[t]).apply(this,arguments)}}("write");var a=t("./bufferish"),s=a.global,l=a.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s,c=l&&!s.TYPED_ARRAY_SUPPORT},{"./buffer-lite":3,"./bufferish":8}],7:[function(t,e,n){function o(t){return new Uint8Array(t)}var r=t("./bufferish");(n=e.exports=r.hasArrayBuffer?o(0):[]).alloc=o,n.concat=r.concat,n.from=function(t){if(r.isView(t)){var e=t.byteOffset,o=t.byteLength;(t=t.buffer).byteLength!==o&&(t.slice?t=t.slice(e,e+o):(t=new Uint8Array(t)).byteLength!==o&&(t=Array.prototype.slice.call(t,e,e+o)))}else{if("string"==typeof t)return r.from.call(n,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},{"./bufferish":8}],8:[function(t,e,n){function o(t){return i(this).alloc(t)}function r(t){var e=3*t.length,n=o.call(this,e),r=g.write.call(n,t);return e!==r&&(n=g.slice.call(n,0,r)),n}function i(t){return f(t)?m:p(t)?y:h(t)?d:c?m:u?y:d}function a(){return!1}function s(t,e){return t="[object "+t+"]",function(n){return null!=n&&{}.toString.call(e?n[e]:n)===t}}var l=n.global=t("./buffer-global"),c=n.hasBuffer=l&&!!l.isBuffer,u=n.hasArrayBuffer="undefined"!=typeof ArrayBuffer,h=n.isArray=t("isarray");n.isArrayBuffer=u?function(t){return t instanceof ArrayBuffer||C(t)}:a;var f=n.isBuffer=c?l.isBuffer:a,p=n.isView=u?ArrayBuffer.isView||s("ArrayBuffer","buffer"):a;n.alloc=o,n.concat=function(t,e){e||(e=0,Array.prototype.forEach.call(t,function(t){e+=t.length}));var r=this!==n&&this||t[0],i=o.call(r,e),a=0;return Array.prototype.forEach.call(t,function(t){a+=g.copy.call(t,i,a)}),i},n.from=function(t){return"string"==typeof t?r.call(this,t):i(this).from(t)};var d=n.Array=t("./bufferish-array"),m=n.Buffer=t("./bufferish-buffer"),y=n.Uint8Array=t("./bufferish-uint8array"),g=n.prototype=t("./bufferish-proto"),C=s("ArrayBuffer")},{"./buffer-global":2,"./bufferish-array":4,"./bufferish-buffer":5,"./bufferish-proto":6,"./bufferish-uint8array":7,isarray:34}],9:[function(t,e,n){function o(t){return this instanceof o?(this.options=t,void this.init()):new o(t)}function r(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function i(t){function e(t,e){return e(t)}return t=t.slice(),function(n){return t.reduce(e,n)}}function a(t){return new o(t)}var s=t("isarray");n.createCodec=a,n.install=function(t){for(var e in t)o.prototype[e]=r(o.prototype[e],t[e])},n.filter=function(t){return s(t)?i(t):t};var l=t("./bufferish");o.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=l.Uint8Array),this},n.preset=a({preset:!0})},{"./bufferish":8,isarray:34}],10:[function(t,e,n){t("./read-core"),t("./write-core"),n.codec={preset:t("./codec-base").preset}},{"./codec-base":9,"./read-core":22,"./write-core":25}],11:[function(t,e,n){function o(t){if(!(this instanceof o))return new o(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}n.DecodeBuffer=o;var r=t("./read-core").preset;t("./flex-buffer").FlexDecoder.mixin(o.prototype),o.prototype.codec=r,o.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":21,"./read-core":22}],12:[function(t,e,n){n.decode=function(t,e){var n=new o(e);return n.write(t),n.read()};var o=t("./decode-buffer").DecodeBuffer},{"./decode-buffer":11}],13:[function(t,e,n){function o(t){return this instanceof o?void i.call(this,t):new o(t)}n.Decoder=o;var r=t("event-lite"),i=t("./decode-buffer").DecodeBuffer;o.prototype=new i,r.mixin(o.prototype),o.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},o.prototype.push=function(t){this.emit("data",t)},o.prototype.end=function(t){this.decode(t),this.emit("end")}},{"./decode-buffer":11,"event-lite":31}],14:[function(t,e,n){function o(t){if(!(this instanceof o))return new o(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}n.EncodeBuffer=o;var r=t("./write-core").preset;t("./flex-buffer").FlexEncoder.mixin(o.prototype),o.prototype.codec=r,o.prototype.write=function(t){this.codec.encode(this,t)}},{"./flex-buffer":21,"./write-core":25}],15:[function(t,e,n){n.encode=function(t,e){var n=new o(e);return n.write(t),n.read()};var o=t("./encode-buffer").EncodeBuffer},{"./encode-buffer":14}],16:[function(t,e,n){function o(t){return this instanceof o?void i.call(this,t):new o(t)}n.Encoder=o;var r=t("event-lite"),i=t("./encode-buffer").EncodeBuffer;o.prototype=new i,r.mixin(o.prototype),o.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},o.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},{"./encode-buffer":14,"event-lite":31}],17:[function(t,e,n){n.ExtBuffer=function t(e,n){return this instanceof t?(this.buffer=o.from(e),void(this.type=n)):new t(e,n)};var o=t("./bufferish")},{"./bufferish":8}],18:[function(t,e,n){function o(e){return s||(s=t("./encode").encode),s(e)}function r(t){return t.valueOf()}function i(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function a(t){var e={};for(var n in h)e[n]=t[n];return e}n.setExtPackers=function(t){t.addExtPacker(14,Error,[a,o]),t.addExtPacker(1,EvalError,[a,o]),t.addExtPacker(2,RangeError,[a,o]),t.addExtPacker(3,ReferenceError,[a,o]),t.addExtPacker(4,SyntaxError,[a,o]),t.addExtPacker(5,TypeError,[a,o]),t.addExtPacker(6,URIError,[a,o]),t.addExtPacker(10,RegExp,[i,o]),t.addExtPacker(11,Boolean,[r,o]),t.addExtPacker(12,String,[r,o]),t.addExtPacker(13,Date,[Number,o]),t.addExtPacker(15,Number,[r,o]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,u),t.addExtPacker(18,Uint8Array,u),t.addExtPacker(19,Int16Array,u),t.addExtPacker(20,Uint16Array,u),t.addExtPacker(21,Int32Array,u),t.addExtPacker(22,Uint32Array,u),t.addExtPacker(23,Float32Array,u),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,u),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,u),t.addExtPacker(26,ArrayBuffer,u),t.addExtPacker(29,DataView,u)),l.hasBuffer&&t.addExtPacker(27,c,l.from)};var s,l=t("./bufferish"),c=l.global,u=l.Uint8Array.from,h={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./encode":15}],19:[function(t,e,n){function o(e){return l||(l=t("./decode").decode),l(e)}function r(t){return RegExp.apply(null,t)}function i(t){return function(e){var n=new t;for(var o in h)n[o]=e[o];return n}}function a(t){return function(e){return new t(e)}}function s(t){return new Uint8Array(t).buffer}n.setExtUnpackers=function(t){t.addExtUnpacker(14,[o,i(Error)]),t.addExtUnpacker(1,[o,i(EvalError)]),t.addExtUnpacker(2,[o,i(RangeError)]),t.addExtUnpacker(3,[o,i(ReferenceError)]),t.addExtUnpacker(4,[o,i(SyntaxError)]),t.addExtUnpacker(5,[o,i(TypeError)]),t.addExtUnpacker(6,[o,i(URIError)]),t.addExtUnpacker(10,[o,r]),t.addExtUnpacker(11,[o,a(Boolean)]),t.addExtUnpacker(12,[o,a(String)]),t.addExtUnpacker(13,[o,a(Date)]),t.addExtUnpacker(15,[o,a(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,a(Int8Array)),t.addExtUnpacker(18,a(Uint8Array)),t.addExtUnpacker(19,[s,a(Int16Array)]),t.addExtUnpacker(20,[s,a(Uint16Array)]),t.addExtUnpacker(21,[s,a(Int32Array)]),t.addExtUnpacker(22,[s,a(Uint32Array)]),t.addExtUnpacker(23,[s,a(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[s,a(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,a(Uint8ClampedArray)),t.addExtUnpacker(26,s),t.addExtUnpacker(29,[s,a(DataView)])),c.hasBuffer&&t.addExtUnpacker(27,a(u))};var l,c=t("./bufferish"),u=c.global,h={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./decode":12}],20:[function(t,e,n){t("./read-core"),t("./write-core"),n.createCodec=t("./codec-base").createCodec},{"./codec-base":9,"./read-core":22,"./write-core":25}],21:[function(t,e,n){function o(){if(!(this instanceof o))return new o}function r(){if(!(this instanceof r))return new r}function i(){throw new Error("method not implemented: write()")}function a(){throw new Error("method not implemented: fetch()")}function s(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function l(t){(this.buffers||(this.buffers=[])).push(t)}function c(){return(this.buffers||(this.buffers=[])).shift()}function u(t){return function(e){for(var n in t)e[n]=t[n];return e}}n.FlexDecoder=o,n.FlexEncoder=r;var h=t("./bufferish"),f=2048,p=65536,d="BUFFER_SHORTAGE";o.mixin=u({bufferish:h,write:function(t){var e=this.offset?h.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:a,flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=d)throw t;this.offset=e;break}this.push(t)}},push:l,pull:c,read:s,reserve:function(t){var e=this.offset,n=e+t;if(n>this.buffer.length)throw new Error(d);return this.offset=n,e},offset:0}),o.mixin(o.prototype),r.mixin=u({bufferish:h,write:i,fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return h.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:l,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:s,reserve:function(t){var e=0|t;if(this.buffer){var n=this.buffer.length,o=0|this.offset,r=o+e;if(r<n)return this.offset=r,o;this.flush(),t=Math.max(t,Math.min(2*n,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var n=this.reserve(e);h.prototype.copy.call(t,this.buffer,n)}},maxBufferSize:p,minBufferSize:f,offset:0,start:0}),r.mixin(r.prototype)},{"./bufferish":8}],22:[function(t,e,n){function o(t){var e=l.getReadToken(t);return function(t){var n=s(t),o=e[n];if(!o)throw new Error("Invalid type: "+(n?"0x"+n.toString(16):n));return o(t)}}function r(){var t=this.options;return this.decode=o(t),t&&t.preset&&a.setExtUnpackers(this),this}var i=t("./ext-buffer").ExtBuffer,a=t("./ext-unpacker"),s=t("./read-format").readUint8,l=t("./read-token"),c=t("./codec-base");c.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=c.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new i(e,t)}},init:r}),n.preset=r.call(c.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-unpacker":19,"./read-format":23,"./read-token":24}],23:[function(t,e,n){function o(t,e){var n,o={},r=new Array(e),i=new Array(e),a=t.codec.decode;for(n=0;n<e;n++)r[n]=a(t),i[n]=a(t);for(n=0;n<e;n++)o[r[n]]=i[n];return o}function r(t,e){var n,o=new Map,r=new Array(e),i=new Array(e),a=t.codec.decode;for(n=0;n<e;n++)r[n]=a(t),i[n]=a(t);for(n=0;n<e;n++)o.set(r[n],i[n]);return o}function i(t,e){for(var n=new Array(e),o=t.codec.decode,r=0;r<e;r++)n[r]=o(t);return n}function a(t,e){var n=t.reserve(e),o=n+e;return T.toString.call(t.buffer,"utf-8",n,o)}function s(t,e){var n=t.reserve(e),o=n+e,r=T.slice.call(t.buffer,n,o);return U.from(r)}function l(t,e){var n=t.reserve(e),o=n+e,r=T.slice.call(t.buffer,n,o);return U.Uint8Array.from(r).buffer}function c(t,e){var n=t.reserve(e+1),o=t.buffer[n++],r=n+e,i=t.codec.getExtUnpacker(o);if(!i)throw new Error("Invalid ext type: "+(o?"0x"+o.toString(16):o));return i(T.slice.call(t.buffer,n,r))}function u(t){var e=t.reserve(1);return t.buffer[e]}function h(t){var e=t.reserve(1),n=t.buffer[e];return 128&n?n-256:n}function f(t){var e=t.reserve(2),n=t.buffer;return n[e++]<<8|n[e]}function p(t){var e=t.reserve(2),n=t.buffer,o=n[e++]<<8|n[e];return 32768&o?o-65536:o}function d(t){var e=t.reserve(4),n=t.buffer;return 16777216*n[e++]+(n[e++]<<16)+(n[e++]<<8)+n[e]}function m(t){var e=t.reserve(4),n=t.buffer;return n[e++]<<24|n[e++]<<16|n[e++]<<8|n[e]}function y(t,e){return function(n){var o=n.reserve(t);return e.call(n.buffer,o,M)}}function g(t){return new R(this,t).toNumber()}function C(t){return new E(this,t).toNumber()}function _(t){return new R(this,t)}function v(t){return new E(this,t)}function b(t){return I.read(this,t,!1,23,4)}function S(t){return I.read(this,t,!1,52,8)}var I=t("ieee754"),w=t("int64-buffer"),R=w.Uint64BE,E=w.Int64BE;n.getReadFormat=function(t){var e=U.hasArrayBuffer&&t&&t.binarraybuffer,n=t&&t.int64;return{map:B&&t&&t.usemap?r:o,array:i,str:a,bin:e?l:s,ext:c,uint8:u,uint16:f,uint32:d,uint64:y(8,n?_:g),int8:h,int16:p,int32:m,int64:y(8,n?v:C),float32:y(4,b),float64:y(8,S)}},n.readUint8=u;var U=t("./bufferish"),T=t("./bufferish-proto"),B="undefined"!=typeof Map,M=!0},{"./bufferish":8,"./bufferish-proto":6,ieee754:32,"int64-buffer":33}],24:[function(t,e,n){function o(t){var e,n=new Array(256);for(e=0;e<=127;e++)n[e]=i(e);for(e=128;e<=143;e++)n[e]=s(e-128,t.map);for(e=144;e<=159;e++)n[e]=s(e-144,t.array);for(e=160;e<=191;e++)n[e]=s(e-160,t.str);for(n[192]=i(null),n[193]=null,n[194]=i(!1),n[195]=i(!0),n[196]=a(t.uint8,t.bin),n[197]=a(t.uint16,t.bin),n[198]=a(t.uint32,t.bin),n[199]=a(t.uint8,t.ext),n[200]=a(t.uint16,t.ext),n[201]=a(t.uint32,t.ext),n[202]=t.float32,n[203]=t.float64,n[204]=t.uint8,n[205]=t.uint16,n[206]=t.uint32,n[207]=t.uint64,n[208]=t.int8,n[209]=t.int16,n[210]=t.int32,n[211]=t.int64,n[212]=s(1,t.ext),n[213]=s(2,t.ext),n[214]=s(4,t.ext),n[215]=s(8,t.ext),n[216]=s(16,t.ext),n[217]=a(t.uint8,t.str),n[218]=a(t.uint16,t.str),n[219]=a(t.uint32,t.str),n[220]=a(t.uint16,t.array),n[221]=a(t.uint32,t.array),n[222]=a(t.uint16,t.map),n[223]=a(t.uint32,t.map),e=224;e<=255;e++)n[e]=i(e-256);return n}function r(t){var e,n=o(t).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],e=160;e<=191;e++)n[e]=s(e-160,t.bin);return n}function i(t){return function(){return t}}function a(t,e){return function(n){var o=t(n);return e(n,o)}}function s(t,e){return function(n){return e(n,t)}}var l=t("./read-format");n.getReadToken=function(t){var e=l.getReadFormat(t);return t&&t.useraw?r(e):o(e)}},{"./read-format":23}],25:[function(t,e,n){function o(t){var e=l.getWriteType(t);return function(t,n){var o=e[r(n)];if(!o)throw new Error('Unsupported type "'+r(n)+'": '+n);o(t,n)}}function i(){var t=this.options;return this.encode=o(t),t&&t.preset&&s.setExtPackers(this),this}var a=t("./ext-buffer").ExtBuffer,s=t("./ext-packer"),l=t("./write-type"),c=t("./codec-base");c.install({addExtPacker:function(t,e,n){function o(e){return n&&(e=n(e)),new a(e,t)}n=c.filter(n);var r=e.name;r&&"Object"!==r?(this.extPackers||(this.extPackers={}))[r]=o:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,o])},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),n=t.constructor,o=n&&n.name&&e[n.name];if(o)return o;for(var r=this.extEncoderList||(this.extEncoderList=[]),i=r.length,a=0;a<i;a++){var s=r[a];if(n===s[0])return s[1]}},init:i}),n.preset=i.call(c.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-packer":18,"./write-type":27}],26:[function(t,e,n){function o(){var t=r();return t[202]=c(202,4,f),t[203]=c(203,8,p),t}function r(){var t=C.slice();return t[196]=a(196),t[197]=s(197),t[198]=l(198),t[199]=a(199),t[200]=s(200),t[201]=l(201),t[202]=c(202,4,S.writeFloatBE||f,!0),t[203]=c(203,8,S.writeDoubleBE||p,!0),t[204]=a(204),t[205]=s(205),t[206]=l(206),t[207]=c(207,8,u),t[208]=a(208),t[209]=s(209),t[210]=l(210),t[211]=c(211,8,h),t[217]=a(217),t[218]=s(218),t[219]=l(219),t[220]=s(220),t[221]=l(221),t[222]=s(222),t[223]=l(223),t}function i(){var t=C.slice();return t[196]=c(196,1,v.prototype.writeUInt8),t[197]=c(197,2,v.prototype.writeUInt16BE),t[198]=c(198,4,v.prototype.writeUInt32BE),t[199]=c(199,1,v.prototype.writeUInt8),t[200]=c(200,2,v.prototype.writeUInt16BE),t[201]=c(201,4,v.prototype.writeUInt32BE),t[202]=c(202,4,v.prototype.writeFloatBE),t[203]=c(203,8,v.prototype.writeDoubleBE),t[204]=c(204,1,v.prototype.writeUInt8),t[205]=c(205,2,v.prototype.writeUInt16BE),t[206]=c(206,4,v.prototype.writeUInt32BE),t[207]=c(207,8,u),t[208]=c(208,1,v.prototype.writeInt8),t[209]=c(209,2,v.prototype.writeInt16BE),t[210]=c(210,4,v.prototype.writeInt32BE),t[211]=c(211,8,h),t[217]=c(217,1,v.prototype.writeUInt8),t[218]=c(218,2,v.prototype.writeUInt16BE),t[219]=c(219,4,v.prototype.writeUInt32BE),t[220]=c(220,2,v.prototype.writeUInt16BE),t[221]=c(221,4,v.prototype.writeUInt32BE),t[222]=c(222,2,v.prototype.writeUInt16BE),t[223]=c(223,4,v.prototype.writeUInt32BE),t}function a(t){return function(e,n){var o=e.reserve(2),r=e.buffer;r[o++]=t,r[o]=n}}function s(t){return function(e,n){var o=e.reserve(3),r=e.buffer;r[o++]=t,r[o++]=n>>>8,r[o]=n}}function l(t){return function(e,n){var o=e.reserve(5),r=e.buffer;r[o++]=t,r[o++]=n>>>24,r[o++]=n>>>16,r[o++]=n>>>8,r[o]=n}}function c(t,e,n,o){return function(r,i){var a=r.reserve(e+1);r.buffer[a++]=t,n.call(r.buffer,i,a,o)}}function u(t,e){new y(this,e,t)}function h(t,e){new g(this,e,t)}function f(t,e){d.write(this,t,e,!1,23,4)}function p(t,e){d.write(this,t,e,!1,52,8)}var d=t("ieee754"),m=t("int64-buffer"),y=m.Uint64BE,g=m.Int64BE,C=t("./write-uint8").uint8,_=t("./bufferish"),v=_.global,b=_.hasBuffer&&"TYPED_ARRAY_SUPPORT"in v&&!v.TYPED_ARRAY_SUPPORT,S=_.hasBuffer&&v.prototype||{};n.getWriteToken=function(t){return t&&t.uint8array?o():b||_.hasBuffer&&t&&t.safe?i():r()}},{"./bufferish":8,"./write-uint8":28,ieee754:32,"int64-buffer":33}],27:[function(t,e,n){var o=t("isarray"),r=t("int64-buffer"),i=r.Uint64BE,a=r.Int64BE,s=t("./bufferish"),l=t("./bufferish-proto"),c=t("./write-token"),u=t("./write-uint8").uint8,h=t("./ext-buffer").ExtBuffer,f="undefined"!=typeof Uint8Array,p="undefined"!=typeof Map,d=[];d[1]=212,d[2]=213,d[4]=214,d[8]=215,d[16]=216,n.getWriteType=function(t){function e(t,e){b[207](t,e.toArray())}function n(t,e){b[211](t,e.toArray())}function r(t,r){if(null===r)return m(t,r);if(w(r))return R(t,r);if(o(r))return y(t,r);if(i.isUint64BE(r))return e(t,r);if(a.isInt64BE(r))return n(t,r);var s=t.codec.getExtPacker(r);return s&&(r=s(r)),r instanceof h?C(t,r):void E(t,r)}function m(t,e){b[192](t,e)}function y(t,e){var n=e.length;b[n<16?144+n:n<=65535?220:221](t,n);for(var o=t.codec.encode,r=0;r<n;r++)o(t,e[r])}function g(t,e){var n=e.length;b[n<255?196:n<=65535?197:198](t,n),t.send(e)}function C(t,e){var n=e.buffer,o=n.length,r=d[o]||(o<255?199:o<=65535?200:201);b[r](t,o),u[e.type](t),t.send(n)}function _(t,e){var n=Object.keys(e),o=n.length;b[o<16?128+o:o<=65535?222:223](t,o);var r=t.codec.encode;n.forEach(function(n){r(t,n),r(t,e[n])})}function v(t,e){var n=e.length;b[n<32?160+n:n<=65535?218:219](t,n),t.send(e)}var b=c.getWriteToken(t),S=t&&t.useraw,I=f&&t&&t.binarraybuffer,w=I?s.isArrayBuffer:s.isBuffer,R=I?function(t,e){g(t,new Uint8Array(e))}:g,E=p&&t&&t.usemap?function(t,e){if(!(e instanceof Map))return _(t,e);var n=e.size;b[n<16?128+n:n<=65535?222:223](t,n);var o=t.codec.encode;e.forEach(function(e,n,r){o(t,n),o(t,e)})}:_;return{boolean:function(t,e){b[e?195:194](t,e)},function:m,number:function(t,e){var n=0|e;return e!==n?void b[203](t,e):void b[-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210](t,n)},object:S?function(t,e){return w(e)?v(t,e):void r(t,e)}:r,string:function(t){return function(e,n){var o=n.length,r=5+3*o;e.offset=e.reserve(r);var i=e.buffer,a=t(o),s=e.offset+a;o=l.write.call(i,n,s);var c=t(o);if(a!==c){var u=s+c-a,h=s+o;l.copy.call(i,i,u,s,h)}b[1===c?160+o:c<=3?215+c:219](e,o),e.offset+=o}}(S?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5}),symbol:m,undefined:m}}},{"./bufferish":8,"./bufferish-proto":6,"./ext-buffer":17,"./write-token":26,"./write-uint8":28,"int64-buffer":33,isarray:34}],28:[function(t,e,n){function o(t){return function(e){var n=e.reserve(1);e.buffer[n]=t}}for(var r=n.uint8=new Array(256),i=0;i<=255;i++)r[i]=o(i)},{}],29:[function(t,e,n){(function(e){function o(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=i.prototype:(null===t&&(t=new i(e)),t.length=e),t}function i(t,e,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,n)}function a(t,e,n,o){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(t,e,n,o):"string"==typeof e?u(t,e,n):p(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,n,o){return s(e),e<=0?r(t,e):void 0!==n?"string"==typeof o?r(t,e).fill(n,o):r(t,e).fill(n):r(t,e)}function c(t,e){if(s(e),t=r(t,e<0?0:0|d(e)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function u(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|m(e,n),a=(t=r(t,o)).write(e,n);return a!==o&&(t=t.slice(0,a)),t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=r(t,n);for(var o=0;o<n;o+=1)t[o]=255&e[o];return t}function f(t,e,n,o){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,n):new Uint8Array(e,n,o),i.TYPED_ARRAY_SUPPORT?(t=e).__proto__=i.prototype:t=h(t,e),t}function p(t,e){if(i.isBuffer(e)){var n=0|d(e.length);return 0===(t=r(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||q(e.length)?r(t,0):h(t,e);if("Buffer"===e.type&&z(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function m(t,e){if(i.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(t).length;default:if(o)return W(t).length;e=(""+e).toLowerCase(),o=!0}}function y(t,e,n){var o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return U(this,e,n);case"ascii":return B(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function g(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function C(t,e,n,o,r){if(0===t.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=i.from(e,o)),i.isBuffer(e))return 0===e.length?-1:_(t,e,n,o,r);if("number"==typeof e)return e&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,o,r);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,o,r){function i(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var a,s=1,l=t.length,c=e.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(t.length<2||e.length<2)return-1;s=2,l/=2,c/=2,n/=2}if(r){var u=-1;for(a=n;a<l;a++)if(i(t,a)===i(e,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===c)return u*s}else-1!==u&&(a-=a-u),u=-1}else for(n+c>l&&(n=l-c),a=n;a>=0;a--){for(var h=!0,f=0;f<c;f++)if(i(t,a+f)!==i(e,f)){h=!1;break}if(h)return a}return-1}function v(t,e,n,o){n=Number(n)||0;var r=t.length-n;o?(o=Number(o))>r&&(o=r):o=r;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var a=0;a<o;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,o){return V(W(e,t.length-n),t,n,o)}function S(t,e,n,o){return V(K(e),t,n,o)}function I(t,e,n,o){return S(t,e,n,o)}function w(t,e,n,o){return V(J(e),t,n,o)}function R(t,e,n,o){return V(X(e,t.length-n),t,n,o)}function E(t,e,n){return 0===e&&n===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,n))}function U(t,e,n){n=Math.min(t.length,n);for(var o=[],r=e;r<n;){var i,a,s,l,c=t[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(i=t[r+1]))&&((l=(31&c)<<6|63&i)>127&&(u=l));break;case 3:i=t[r+1],a=t[r+2],128==(192&i)&&128==(192&a)&&((l=(15&c)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l));break;case 4:i=t[r+1],a=t[r+2],s=t[r+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&((l=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l))}null===u?(u=65533,h=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),r+=h}return T(o)}function T(t){var e=t.length;if(e<=Z)return String.fromCharCode.apply(String,t);for(var n="",o=0;o<e;)n+=String.fromCharCode.apply(String,t.slice(o,o+=Z));return n}function B(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(127&t[r]);return o}function M(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(t[r]);return o}function P(t,e,n){var o=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>o)&&(n=o);for(var r="",i=e;i<n;++i)r+=H(t[i]);return r}function O(t,e,n){for(var o=t.slice(e,n),r="",i=0;i<o.length;i+=2)r+=String.fromCharCode(o[i]+256*o[i+1]);return r}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function G(t,e,n,o,r,a){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<a)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function D(t,e,n,o){e<0&&(e=65535+e+1);for(var r=0,i=Math.min(t.length-n,2);r<i;++r)t[n+r]=(e&255<<8*(o?r:1-r))>>>8*(o?r:1-r)}function k(t,e,n,o){e<0&&(e=4294967295+e+1);for(var r=0,i=Math.min(t.length-n,4);r<i;++r)t[n+r]=e>>>8*(o?r:3-r)&255}function x(t,e,n,o,r,i){if(n+o>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,o,r){return r||x(t,0,n,4),Q.write(t,e,n,o,23,4),n+4}function N(t,e,n,o,r){return r||x(t,0,n,8),Q.write(t,e,n,o,52,8),n+8}function F(t){if((t=j(t).replace($,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var n,o=t.length,r=null,i=[],a=0;a<o;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===o){(e-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function K(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function X(t,e){for(var n,o,r,i=[],a=0;a<t.length&&!((e-=2)<0);++a)o=(n=t.charCodeAt(a))>>8,r=n%256,i.push(r),i.push(o);return i}function J(t){return Y.toByteArray(F(t))}function V(t,e,n,o){for(var r=0;r<o&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function q(t){return t!=t}var Y=t("base64-js"),Q=t("ieee754"),z=t("isarray");n.Buffer=i,n.SlowBuffer=function(t){return+t!=t&&(t=0),i.alloc(+t)},n.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=o(),i.poolSize=8192,i._augment=function(t){return t.__proto__=i.prototype,t},i.from=function(t,e,n){return a(null,t,e,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(t,e,n){return l(null,t,e,n)},i.allocUnsafe=function(t){return c(null,t)},i.allocUnsafeSlow=function(t){return c(null,t)},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,o=e.length,r=0,a=Math.min(n,o);r<a;++r)if(t[r]!==e[r]){n=t[r],o=e[r];break}return n<o?-1:o<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var o=i.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,r),r+=a.length}return o},i.byteLength=m,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},i.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?U(this,0,t):y.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,o,r){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),e<0||n>t.length||o<0||r>this.length)throw new RangeError("out of range index");if(o>=r&&e>=n)return 0;if(o>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,o>>>=0,r>>>=0,this===t)return 0;for(var a=r-o,s=n-e,l=Math.min(a,s),c=this.slice(o,r),u=t.slice(e,n),h=0;h<l;++h)if(c[h]!==u[h]){a=c[h],s=u[h];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return C(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return C(this,t,e,n,!1)},i.prototype.write=function(t,e,n,o){if(void 0===e)o="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)o=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return I(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;i.prototype.slice=function(t,e){var n,o=this.length;if(t=~~t,e=void 0===e?o:~~e,t<0?(t+=o)<0&&(t=0):t>o&&(t=o),e<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),i.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=i.prototype;else{var r=e-t;n=new i(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+t]}return n},i.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var o=this[t],r=1,i=0;++i<e&&(r*=256);)o+=this[t+i]*r;return o},i.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var o=this[t+--e],r=1;e>0&&(r*=256);)o+=this[t+--e]*r;return o},i.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var o=this[t],r=1,i=0;++i<e&&(r*=256);)o+=this[t+i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},i.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var o=e,r=1,i=this[t+--o];o>0&&(r*=256);)i+=this[t+--o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},i.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),Q.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),Q.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),Q.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),Q.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,o){(t=+t,e|=0,n|=0,o)||G(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,i=0;for(this[e]=255&t;++i<n&&(r*=256);)this[e+i]=t/r&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,o){(t=+t,e|=0,n|=0,o)||G(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,i=1;for(this[e+r]=255&t;--r>=0&&(i*=256);)this[e+r]=t/i&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,1,255,0),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},i.prototype.writeIntLE=function(t,e,n,o){if(t=+t,e|=0,!o){var r=Math.pow(2,8*n-1);G(this,t,e,n,r-1,-r)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},i.prototype.writeIntBE=function(t,e,n,o){if(t=+t,e|=0,!o){var r=Math.pow(2,8*n-1);G(this,t,e,n,r-1,-r)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,1,127,-128),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||G(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},i.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,o){if(n||(n=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var r,a=o-n;if(this===t&&n<e&&e<o)for(r=a-1;r>=0;--r)t[r+e]=this[r+n];else if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},i.prototype.fill=function(t,e,n,o){if("string"==typeof t){if("string"==typeof e?(o=e,e=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!i.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=i.isBuffer(t)?t:W(new i(t,o).toString()),l=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%l]}return this};var $=/[^+\/0-9A-Za-z-_]/g}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":30,ieee754:32,isarray:34}],30:[function(t,e,n){function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function i(t,e,n){for(var o,i=[],a=e;a<n;a+=3)o=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i.push(r(o));return i.join("")}n.byteLength=function(t){return 3*t.length/4-o(t)},n.toByteArray=function(t){var e,n,r,i,a,c,u=t.length;a=o(t),c=new l(3*u/4-a),r=a>0?u-4:u;var h=0;for(e=0,n=0;e<r;e+=4,n+=3)i=s[t.charCodeAt(e)]<<18|s[t.charCodeAt(e+1)]<<12|s[t.charCodeAt(e+2)]<<6|s[t.charCodeAt(e+3)],c[h++]=i>>16&255,c[h++]=i>>8&255,c[h++]=255&i;return 2===a?(i=s[t.charCodeAt(e)]<<2|s[t.charCodeAt(e+1)]>>4,c[h++]=255&i):1===a&&(i=s[t.charCodeAt(e)]<<10|s[t.charCodeAt(e+1)]<<4|s[t.charCodeAt(e+2)]>>2,c[h++]=i>>8&255,c[h++]=255&i),c},n.fromByteArray=function(t){for(var e,n=t.length,o=n%3,r="",s=[],l=16383,c=0,u=n-o;c<u;c+=l)s.push(i(t,c,c+l>u?u:c+l));return 1===o?(e=t[n-1],r+=a[e>>2],r+=a[e<<4&63],r+="=="):2===o&&(e=(t[n-2]<<8)+t[n-1],r+=a[e>>10],r+=a[e>>4&63],r+=a[e<<2&63],r+="="),s.push(r),s.join("")};for(var a=[],s=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,h=c.length;u<h;++u)a[u]=c[u],s[c.charCodeAt(u)]=u;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],31:[function(t,e,n){!function(t){function n(t){for(var e in a)t[e]=a[e];return t}function o(t,e){var n,a=this;if(arguments.length){if(e){if(n=r(a,t,!0)){if(!(n=n.filter(function(t){return t!==e&&t.originalListener!==e})).length)return o.call(a,t);a[i][t]=n}}else if((n=a[i])&&(delete n[t],!Object.keys(n).length))return o.call(a)}else delete a[i];return a}function r(t,e,n){if(!n||t[i]){var o=t[i]||(t[i]={});return o[e]||(o[e]=[])}}void 0!==e&&(e.exports=t);var i="listeners",a={on:function(t,e){return r(this,t).push(e),this},once:function(t,e){function n(){o.call(i,t,n),e.apply(this,arguments)}var i=this;return n.originalListener=e,r(i,t).push(n),i},off:o,emit:function(t,e){var n=this,o=r(n,t,!0);if(!o)return!1;var i=arguments.length;if(1===i)o.forEach(function(t){t.call(n)});else if(2===i)o.forEach(function(t){t.call(n,e)});else{var a=Array.prototype.slice.call(arguments,1);o.forEach(function(t){t.apply(n,a)})}return!!o.length}};n(t.prototype),t.mixin=n}(function t(){if(!(this instanceof t))return new t})},{}],32:[function(t,e,n){n.read=function(t,e,n,o,r){var i,a,s=8*r-o-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,i=p&(1<<-u)-1,p>>=-u,u+=s;u>0;i=256*i+t[e+h],h+=f,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=o;u>0;a=256*a+t[e+h],h+=f,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,o),i-=c}return(p?-1:1)*a*Math.pow(2,i-o)},n.write=function(t,e,n,o,r,i){var a,s,l,c=8*i-r-1,u=(1<<c)-1,h=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:i-1,d=o?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*m}},{}],33:[function(t,e,n){(function(t){!function(e){function n(t,n,v){function I(t,e,n,o){return this instanceof I?w(this,t,e,n,o):new I(t,e,n,o)}function w(t,e,n,o,i){if(g&&C&&(e instanceof C&&(e=new g(e)),o instanceof C&&(o=new g(o))),e||n||o||d){if(!s(e,n))i=n,o=e,n=0,e=new(d||Array)(8);t.buffer=e,t.offset=n|=0,m!==r(o)&&("string"==typeof o?R(e,n,o,i||10):s(o,i)?l(e,n,o,i):"number"==typeof i?(U(e,n+B,o),U(e,n+M,i)):o>0?D(e,n,o):o<0?k(e,n,o):l(e,n,_,0))}else t.buffer=c(_,0)}function R(t,e,n,o){var r=0,i=n.length,a=0,s=0;"-"===n[0]&&r++;for(var l=r;r<i;){var c=parseInt(n[r++],o);if(!(c>=0))break;s=s*o+c,a=a*o+Math.floor(s/b),s%=b}l&&(a=~a,s?s=b-s:a++),U(t,e+B,a),U(t,e+M,s)}function E(){var t=this.buffer,e=this.offset,n=T(t,e+B),o=T(t,e+M);return v||(n|=0),n?n*b+o:o}function U(t,e,n){t[e+G]=255&n,n>>=8,t[e+A]=255&n,n>>=8,t[e+O]=255&n,n>>=8,t[e+P]=255&n}function T(t,e){return t[e+P]*S+(t[e+O]<<16)+(t[e+A]<<8)+t[e+G]}var B=n?0:4,M=n?4:0,P=n?0:3,O=n?1:2,A=n?2:1,G=n?3:0,D=n?u:f,k=n?h:p,x=I.prototype,L="is"+t,N="_"+L;return x.buffer=void 0,x.offset=0,x[N]=!0,x.toNumber=E,x.toString=function(t){var e=this.buffer,n=this.offset,o=T(e,n+B),r=T(e,n+M),i="",a=!v&&2147483648&o;for(a&&(o=~o,r=b-r),t=t||10;;){var s=o%t*b+r;if(o=Math.floor(o/t),r=Math.floor(s/t),i=(s%t).toString(t)+i,!o&&!r)break}return a&&(i="-"+i),i},x.toJSON=E,x.toArray=o,y&&(x.toBuffer=i),g&&(x.toArrayBuffer=a),I[L]=function(t){return!(!t||!t[N])},e[t]=I,I}function o(t){var e=this.buffer,n=this.offset;return d=null,!1!==t&&0===n&&8===e.length&&v(e)?e:c(e,n)}function i(e){var n=this.buffer,o=this.offset;if(d=y,!1!==e&&0===o&&8===n.length&&t.isBuffer(n))return n;var r=new y(8);return l(r,0,n,o),r}function a(t){var e=this.buffer,n=this.offset,o=e.buffer;if(d=g,!1!==t&&0===n&&o instanceof C&&8===o.byteLength)return o;var r=new g(8);return l(r,0,e,n),r.buffer}function s(t,e){var n=t&&t.length;return e|=0,n&&e+8<=n&&"string"!=typeof t[e]}function l(t,e,n,o){e|=0,o|=0;for(var r=0;r<8;r++)t[e++]=255&n[o++]}function c(t,e){return Array.prototype.slice.call(t,e,e+8)}function u(t,e,n){for(var o=e+8;o>e;)t[--o]=255&n,n/=256}function h(t,e,n){var o=e+8;for(n++;o>e;)t[--o]=255&-n^255,n/=256}function f(t,e,n){for(var o=e+8;e<o;)t[e++]=255&n,n/=256}function p(t,e,n){var o=e+8;for(n++;e<o;)t[e++]=255&-n^255,n/=256}var d,m="undefined",y=m!==r(t)&&t,g=m!==("undefined"==typeof Uint8Array?"undefined":r(Uint8Array))&&Uint8Array,C=m!==("undefined"==typeof ArrayBuffer?"undefined":r(ArrayBuffer))&&ArrayBuffer,_=[0,0,0,0,0,0,0,0],v=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},b=4294967296,S=16777216;n("Uint64BE",!0,!0),n("Int64BE",!0,!1),n("Uint64LE",!1,!0),n("Int64LE",!1,!1)}("object"==r(n)&&"string"!=typeof n.nodeName?n:this||{})}).call(this,t("buffer").Buffer)},{buffer:29}],34:[function(t,e,n){var o={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==o.call(t)}},{}]},{},[1])(1)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},["AgoraApi","PlatformApi","AgoraBase","AgoraQQ","AgoraWeb","AgoraWechat","Xhr","BasePlatform","QQPlatform","WebPlatform","WechatPlatform","AudioManager","Clog","ResManager","ResUtil","LocalStorage","Time","UIBase","UIEnum","UIManager","UITweenManager","UIUtil","BaseEnum","SS","SystemInfoManager","Report","TaContoroller","ArrayUtil","CryptoJS","DecoratorUtil","StringUtil","SyncPromise","UIEventCenter","Utility","Constance","ActionSheetController","ActionSheetData","ActionSheetItem","UIActionSheet","UIAuthorize","CheckContentController","CreateRoomController","RoomHeatBeat","HttpApi","ShareManager","LaunchManager","RoomSocket","RoomSocketCall","RoomSocketDataType","RoomSocketInput","RoomSocketSync","UICommDia","UILoading","UIToast","UIWaiting","DressController","DressItemData","DressItem","DressItemDetail","UIDress","EmojiController","EmojData","EmojiItem","UIEmoji","AndroidProcess","EntryController","GameCenter","IOSProcess","Entry","AngleComponent","BallComponent","BaseComponent","CountDownComponent","CueComponent","EffectComponent","EndBallComponent","FreeBallComponent","GameTipsComponent","GuideComponent","GuideLineComponent","HoleComponent","PlayerComponent","PowerComponent","TableComponent","TargetBallComponent","VsComponent","AIController","GameDataController","UIGameController","Ball","BallTexture","EffectBase","EffectInHole","Hole","Player","TargetBall","TargetBallTexture","GameUserData","InHoleBallInfo","MGameHitBall","UIGame","GiftEffectController","GiftEffectData","UIGiftEffect","LoginController","BanBanData","QQData","SessionData","XiYouData","UILogin","MatchController","MatchPlayingUserInfo","MatchPlayingItem","UIMatching","MicWaitController","MicWaitData","UIMicWaitItem","UIMicWaitList","UIMicWaiting","NewbieGuildController","NewbieGuildConfigData","UINewbieGuild","EnumCenter","EventCommond","MD5","Md5Util","QQSystemInfo","RemoteIconConfig","RoomStyle","UIBaseController","msgpack","UIReadyController","UIReady","UIReadyPlayerSeat","RecommendJoinController","RecommendRoomData","RecommendJoinItem","UIRecommendJoin","UIResultController","UIResult","ChatInputController","JoinMicController","RoomController","RoomCreatorData","RoomInfoData","RoomSeatData","CallComponent","Chat","ChatInput","RoomChat","RoomDescription","RoomEmoji","RoomGiftTip","RoomKick","RoomWellcome","UIRoom","RoomSeatItem","RoomSeats","RoomAdminController","RoomAdminData","AdminInfoItem","OnlineInfoItem","UIRoomAdmin","RoomSettingController","ThemeItem","UIRoomSetting","UITheme","GiftTargetData","Bag","GiftPanel","GiftItem","GiftNumItem","GiftTarget","GiftTargetItem","UIGift","GiftTab","UICostTip","TopicController","RoomTopic","TopicItem","TopicTag","UITopic","UserDetailController","UserDetailData","GiftWallItem","UIUserDetail","CollitionFixForce","DragComp","FYCountDownMgr","FYTips","FYTipsMgr","InfiniteScrollView","UtilityEx","XiYouGiftConfig","XiYouController","XiYouGiftManager","XiYouUserInfoController","XiyouAddFriendController","XiyouSocket","XiyouUserInfoData","XiyouSDK","BaseSDK","HData","MsgDefine","Log","NetCenterMgr","QQUtils","Utils","md5"]);