window.__require=function t(e,i,n){function o(c,a){if(!i[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}}var h=i[c]={exports:{}};e[c][0].call(h.exports,function(t){return o(e[c][1][t]||t)},h,h.exports,t,e,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({LabelLocalized:[function(t,e,i){"use strict";cc._RF.push(e,"e4f88adp3hERoJ48DZ2PSAl","LabelLocalized");var n=t("i18n");cc.Class({extends:cc.Label,properties:{textKey:{default:"TEXT_KEY",multiline:!0,tooltip:"Enter i18n key here",notify:function(){this._sgNode&&(this._sgNode.setString(this.string),this._updateNodeSize())}},string:{override:!0,tooltip:"Here shows the localized string of Text Key",get:function(){return n.t(this.textKey)},set:function(t){this.textKey=t,cc.warn("Please set label text key in Text Key property.")}}}}),cc._RF.pop()},{i18n:"i18n"}],audio:[function(t,e,i){"use strict";cc._RF.push(e,"7cba3Mq9T1BB5gqhCb2Xcci","audio");var n=cc.Class({name:"audio",ctor:function(){this.audio_url="https://wxgame.088.com/jdqs/res/resources/public/audio/",this.open=1;var t=parseInt(cc.sys.localStorage.getItem("isAudio"));1!=t&&0!=t||(this.open=t),this.sound=!0,this.filePath="",this.wxauio=null},play:function(t,e){return cc.audioEngine.play(t,e,this.open&&this.sound?1:0)},playMusic:function(t){this.filePath=t,1===this.open&&cc.audioEngine.playMusic(t,!0)},getUrl:function(t){var e=t.split("/");return this.audio_url+e[e.length-1]},playNative:function(t,e){var i=this;gl.load(t,function(t,n,o){gl.audio.play(t,e,i.open&&i.sound?1:0)})},clickPlay:function(){this.playNative("audio/click",!1)},pause:function(){},resume:function(){},stop:function(t){cc.audioEngine.stop(t)},stopMusic:function(){cc.audioEngine.stopMusic()},setSound:function(t){this.sound=t,console.log("this.sound",this.sound)},setOpen:function(){this.open?this.open=0:this.open=1,1==this.open?cc.audioEngine.resumeMusic():cc.audioEngine.pauseMusic(),cc.sys.localStorage.setItem("isAudio",this.open),this.filePath&&this.open&&this.playMusic(this.filePath,!0)},setGameOpen:function(t){t?this.open&&cc.audioEngine.resumeMusic():cc.audioEngine.pauseMusic()}});e.exports=new n,cc._RF.pop()},{}],bulletCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"305752ctkxNBay+wFMwmzEu","bulletCtrl"),cc.Class({extends:cc.Component,properties:{bullet:cc.Prefab},onLoad:function(){gl.emitter.on("event_fireBullet",this.fireBullet,this)},fireBullet:function(t){var e=gl.userinfo.get("shootCount");gl.userinfo.set("shootCount",e+=1);var i=cc.instantiate(this.bullet);i.parent=this.node,i.setPosition(t.pos);var n=Math.atan2(t.velocity.y,t.velocity.x);i.rotation=180*-n/Math.PI,i.getComponent(cc.RigidBody).linearVelocity=t.velocity},start:function(){},onDestroy:function(){gl.emitter.off("event_fireBullet",this)}}),cc._RF.pop()},{}],bullet:[function(t,e,i){"use strict";cc._RF.push(e,"f6804fDR3FINbzKRHJnCM9X","bullet");var n=0,o=3,s=4,c=5,a=6,r=7,l=8,h=9,d=10;cc.Class({extends:cc.Component,properties:{audio_list:[cc.AudioClip]},onLoad:function(){this.num=0,this.isOver=!1,this.isCollide=!1,this.bulletBody=this.node.getComponent(cc.RigidBody),this.BODYTAG=gl.userinfo.get("BODYTAG"),this.PLAYERTAG=gl.userinfo.get("PLAYERTAG"),this.bulletSpeed=gl.userinfo.get("bulletSpeed"),gl.audio.play(this.audio_list[n],!1)},onBeginContact:function(t,e,i){if(!this.isCollide)switch(i.tag){case this.PLAYERTAG.HATS:this.isCollide=!0,0!==gl.userinfo.shield?(0==--gl.userinfo.shield&&gl.emitter.emit("event_offshield"),this.hitTarget()):i.node.getComponent(cc.WeldJoint)&&i.node.getComponent(cc.WeldJoint).enabled&&(i.node.getComponent(cc.WeldJoint).enabled=!1);break;case this.BODYTAG.PLAYER:this.isCollide=!0,0!==gl.userinfo.shield?0==--gl.userinfo.shield&&gl.emitter.emit("event_offshield"):(i.node.children[0].active?i.node.children[0].active=!1:gl.emitter.emit("event_gameOver"),gl.emitter.emit("event_hitBody",{pos:i.node.position}),gl.audio.play(this.audio_list[l],!1)),this.hitTarget();break;case this.BODYTAG.GLASS:gl.emitter.emit("event_hitCup",{pos:i.node.position,tag:this.BODYTAG.GLASS}),i.node.destroy(),this.node.destroy(),gl.audio.play(this.audio_list[c],!1);break;case this.BODYTAG.BULEGLASS:case this.BODYTAG.BULEGLASSBIG:i.node.getComponent("goods_buleGlass").bulletHit(),gl.emitter.emit("event_hitCup",{pos:i.node.position,tag:this.BODYTAG.BULEGLASS}),this.hitTarget(i.node),gl.audio.play(this.audio_list[c],!1);break;case this.BODYTAG.LIGHT:gl.emitter.emit("event_hitCup",{pos:this.node.position,tag:this.BODYTAG.GLASS}),this.hitTarget(i.node),gl.audio.play(this.audio_list[s],!1);break;case this.BODYTAG.LIGHTCONNECT:i.node.getComponent(cc.RevoluteJoint)&&i.node.getComponent(cc.RevoluteJoint).enabled&&(i.node.getComponent(cc.RevoluteJoint).enabled=!1),this.hitTarget(null,!1),gl.audio.play(this.audio_list[a],!1);break;case this.BODYTAG.TV:if(1==i.node.children[0].active)return;var n=i.node;n.children[0].active=!0,n.children[1].active=!1,gl.audio.play(this.audio_list[d],!1),this.hitTarget(),gl.emitter.emit("event_blasting",{uuid:n.uuid,pos:n.position}),gl.audio.play(this.audio_list[l],!1);break;case this.BODYTAG.MOS:gl.emitter.emit("event_hitBody",{pos:i.node.position}),gl.emitter.emit("event_creatMos"),this.hitTarget(i.node),gl.audio.play(this.audio_list[r],!1);break;case this.BODYTAG.GAS:i.node.getComponent("goods_bottleGas").startJet(),this.hitTarget(null,!1),gl.audio.play(this.audio_list[o],!1);break;case this.BODYTAG.BOARD:gl.audio.play(this.audio_list[o],!1);break;case this.BODYTAG.WALL:gl.audio.play(this.audio_list[h],!1);break;default:gl.emitter.emit("event_spark",{pos:this.node.position})}},hitTarget:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&t&&t.destroy(),e&&this.node&&this.node.destroy()},onEndContact:function(t,e,i){this.isCollide=!1},start:function(){},update:function(t){var e=this.bulletBody.linearVelocity;Math.sqrt(e.x*e.x+e.y*e.y)<this.bulletSpeed*(2/3)&&(e.mulSelf(1.5),this.bulletBody.linearVelocity=e),this.radian=Math.atan2(e.y,e.x),this.node.rotation=180*-this.radian/Math.PI},onDestroy:function(){}}),cc._RF.pop()},{}],chipCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"adf62yrLypEm4RH6BEQpjAa","chipCtrl"),cc.Class({extends:cc.Component,properties:{effect_burst:cc.Prefab,effect_burst_blue:cc.Prefab,effect_blood:cc.Prefab,effect_fire:cc.Prefab,effect_spark:cc.Prefab,effect_openBottle:cc.Prefab},onLoad:function(){gl.emitter.on("event_hitCup",this.hitCup,this),gl.emitter.on("event_hitBody",this.hitBody,this),gl.emitter.on("event_fireBullet",this.fireBullet,this),gl.emitter.on("event_spark",this.spark,this),gl.emitter.on("event_openBottle",this.openBottl,this),this.BODYTAG=gl.userinfo.get("BODYTAG"),this.initPool()},initPool:function(){this.sparkPool=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.effect_spark);this.sparkPool.put(e)}},spark:function(t){var e=this,i=this.getNodeFromPool();i.setPosition(t.pos),i.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){e.sparkPool.put(i)})))},fireBullet:function(t){var e=cc.instantiate(this.effect_fire);e.setPosition(t.pos),e.parent=this.node,e.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){e.destroy()})))},hitBody:function(t){var e=cc.instantiate(this.effect_blood);e.setPosition(t.pos),e.parent=this.node,e.runAction(cc.sequence(cc.delayTime(5),cc.callFunc(function(){e.destroy()})))},hitCup:function(t){var e=void 0;switch(t.tag){case this.BODYTAG.GLASS:e=cc.instantiate(this.effect_burst);break;case this.BODYTAG.BULEGLASS:e=cc.instantiate(this.effect_burst_blue)}e&&(e.setPosition(t.pos),e.parent=this.node)},openBottl:function(t){var e=cc.instantiate(this.effect_openBottle);e.setPosition(t.pos),e.parent=this.node,e.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.destroy()})))},getNodeFromPool:function(){var t=null;return(t=this.sparkPool.size()>0?this.sparkPool.get():cc.instantiate(this.effect_spark)).parent=this.node,t},start:function(){},onDestroy:function(){this.sparkPool.clear(),gl.emitter.off("event_hitCup",this),gl.emitter.off("event_hitBody",this),gl.emitter.off("event_fireBullet",this),gl.emitter.off("event_spark",this),gl.emitter.off("event_openBottle",this)}}),cc._RF.pop()},{}],conf:[function(t,e,i){"use strict";cc._RF.push(e,"6a178wVdUtJ9Z41NvYLa5B5","conf"),window.sdkproxy||(window.sdkproxy={}),window.sdkproxy.conf||(window.sdkproxy.conf={}),window.sdkproxy.conf.appid="",window.sdkproxy.conf.version="",window.sdkproxy.conf.oppo||(window.sdkproxy.conf.oppo={}),window.sdkproxy.conf.oppo.appid="",window.sdkproxy.conf.oppo.banner_posid="",window.sdkproxy.conf.oppo.interstitial_posid="",window.sdkproxy.conf.oppo.video_posid="",window.sdkproxy.conf.vivo||(window.sdkproxy.conf.vivo={}),window.sdkproxy.conf.vivo.appid="",window.sdkproxy.conf.vivo.banner_posid="",window.sdkproxy.conf.vivo.interstitial_posid="",window.sdkproxy.conf.vivo.video_posid="",window.sdkproxy.conf.qtt||(window.sdkproxy.conf.qtt={}),window.sdkproxy.conf.qtt.appid="",window.sdkproxy.conf.tt||(window.sdkproxy.conf.tt={}),window.sdkproxy.conf.tt.appid="tt0f1779aa903d0519",window.sdkproxy.conf.tt.banner_posid="1784tdw8i9i4215ecb",window.sdkproxy.conf.tt.video_posid="587fd1kp71pokrk2ll",window.sdkproxy.conf.tt.share_templateId="3s4eum803g31jnmphu",window.sdkproxy.conf.tt.share_title="\u7231\u597d\u5c04\u51fb\u7684\u73a9\u5bb6\u4eec\u770b\u8fc7\u6765\u5566\uff01",window.sdkproxy.conf.tt.share_desc="\u8fd9\u662f\u4e00\u9879\u8270\u5de8\u7684\u6311\u6218\uff0c\u9700\u8981\u5728\u6700\u77ed\u7684\u65f6\u95f4\u5185\u5c06\u6240\u6709\u74f6\u5b50\u51fb\u788e\uff01",window.sdkproxy.conf.tt.share_topics="\u7231\u597d\u5c04\u51fb\u7684\u73a9\u5bb6\u4eec\u770b\u8fc7\u6765\u5566\uff01",window.sdkproxy.conf.bd||(window.sdkproxy.conf.bd={}),window.sdkproxy.conf.bd.appid="",window.sdkproxy.conf.bd.ad_appid="",window.sdkproxy.conf.bd.banner_posid="",window.sdkproxy.conf.bd.video_posid="",window.sdkproxy.conf.bd.share_title="",window.sdkproxy.conf.bd.share_desc="",window.sdkproxy.conf.qq||(window.sdkproxy.conf.qq={}),window.sdkproxy.conf.qq.appid="",window.sdkproxy.conf.qq.banner_posid="",window.sdkproxy.conf.qq.video_posid="",cc._RF.pop()},{}],emitter:[function(t,e,i){"use strict";cc._RF.push(e,"69ad01Dgy9H+Zn3G/Vc25DV","emitter");var n=cc.Class({name:"emitter",properties:{},ctor:function(){this.event_list=[]},on:function(t,e,i){t&&e&&i&&this.event_list.push({eventName:t,cb:e,target:i})},emit:function(t,e){for(var i=0;i<this.event_list.length;i++)this.event_list[i].eventName==t&&this.event_list[i].cb.call(this.event_list[i].target,e)},off:function(t,e){for(var i=this.event_list.length-1;i>=0;i--)this.event_list[i].eventName==t&&this.event_list[i].target==e&&this.event_list.splice(i,1)},emitOnce:function(t,e){for(var i=this.event_list.length-1;i>=0;i--)if(this.event_list[i].eventName==t)return void this.event_list[i].cb.call(this.event_list[i].target,e)}});e.exports=new n,cc._RF.pop()},{}],en:[function(t,e,i){"use strict";cc._RF.push(e,"920c5VLzJxKjYCAoIUwUHym","en"),e.exports={},cc._RF.pop()},{}],fluid:[function(t,e,i){"use strict";function n(t,e,i){return(e.x-t.x)*(i.y-t.y)>(e.y-t.y)*(i.x-t.x)}function o(t,e,i,n){var o=cc.p(t.x-e.x,t.y-e.y),s=cc.p(i.x-n.x,i.y-n.y),c=t.x*e.y-t.y*e.x,a=i.x*n.y-i.y*n.x,r=o.x*s.y-o.y*s.x;return cc.p((c*s.x-a*o.x)/r,(c*s.y-a*o.y)/r)}function s(t){for(var e=t.length,i=cc.p(0,0),n=0,o=0;o<e;++o){var s=t[o],c=o+1<e?t[o+1]:t[0],a=s.x-0,r=s.y-0,l=c.x-0,h=.5*(a*(c.y-0)-r*l);n+=h,i.x+=h*(1/3)*(0+s.x+c.x),i.y+=h*(1/3)*(0+s.y+c.y)}return[n,i]}cc._RF.push(e,"4fac2fSnGxDOruv0jMb5Reu","fluid"),cc.Class({extends:cc.Component,properties:{density:1,angularDrag:1,linearDrag:1},onLoad:function(){this.createFluid(),this.inFluid=[],this.gravity=cc.p(0,20)},findIntersectionAreaAndCentroid:function(t){var e=t.GetFixtureList();if(e&&2===e.GetType()){for(var i=cc.p(0,0),c=0,a=0;e;){for(var r=this.getVertices(this.fluidBody),l=this.getVertices(t),h=l[l.length-1],d=0;d<l.length;d++){var u=l[d],g=r;r=[];for(var f=g[g.length-1],p=0;p<g.length;p++){var _=g[p];n(h,u,_)?(n(h,u,f)||r.push(o(h,u,f,_)),r.push(_)):n(h,u,f)&&r.push(o(h,u,f,_)),f=_}h=u}var m=s(r),b=e.GetDensity();a+=m[0]*b,c+=m[0],i.x+=m[1].x*b,i.y+=m[1].y*b,e=e.GetNext()}return i.mulSelf(1/a),[c,i]}},createFluid:function(){var t=this.node.addComponent(cc.RigidBody);t.type=0,t.enabledContactListener=!0;var e=this.node.addComponent(cc.PhysicsPolygonCollider),i=this.node.width/2,n=this.node.height/2;e.points=[cc.p(-i,-n),cc.p(i,-n),cc.p(i,n),cc.p(-i,n)],e.sensor=!0,e.density=this.density,e.apply(),this.fluidBody=t._b2Body},onBeginContact:function(t,e,i){var n=i.body._b2Body;this.inFluid.push(n),t.disabled=!0},onEndContact:function(t,e,i){var n=i.body._b2Body,o=this.inFluid.indexOf(n);this.inFluid.splice(o,1),t.disabled=!0},applyBuoyancy:function(t){var e=this.findIntersectionAreaAndCentroid(t);if(0!==e[0]){var i=e[0]*this.density,n=e[1],o=new b2.Vec2(i*this.gravity.x,i*this.gravity.y);t.ApplyForce(o,n);var s=t.GetLinearVelocityFromWorldPoint(n).Subtract(this.fluidBody.GetLinearVelocityFromWorldPoint(n)),c=this.density*this.linearDrag*i,a=s.Multiply(-c);t.ApplyForce(a,n);var r=-t.GetInertia()/t.GetMass()*i*t.GetAngularVelocity()*this.angularDrag;t.ApplyTorque(r)}},getVertices:function(t){for(var e=t.GetFixtureList().GetShape(),i=[],n=0;n<e.GetVertexCount();n++)i.push(t.GetWorldPoint(e.GetVertex(n)));return i},update:function(t){for(var e=0,i=this.inFluid.length;e<i;e++)this.applyBuoyancy(this.inFluid[e])}}),cc._RF.pop()},{}],game:[function(t,e,i){"use strict";cc._RF.push(e,"dfb13XJV49L0ZkUGicCGwGL","game"),cc.Class({extends:cc.Component,properties:{node_time:cc.Label,goods_mos:cc.Prefab,prefab_overMenu:cc.Prefab,prefab_flaunt:cc.Prefab,prefab_winPanel:cc.Prefab,prefab_pauseMenu:cc.Prefab,prefab_hintFrame:cc.Prefab,prefab_lookRank:cc.Prefab,prefab_switchRole:cc.Prefab,prefab_guidancePass:cc.Prefab,pre_treasure:cc.Prefab,node_world:cc.Node,node_guidance:[cc.Node],audio_bg:cc.AudioClip,auido_win:cc.AudioClip,auido_fail:cc.AudioClip,goods:[cc.Prefab],tv_fire:cc.Prefab,aroundWall:cc.Node,lab_pointNum:cc.Label,starShow:cc.Node,recordBut:{default:null,type:cc.Button,displayName:"\u5f55\u5c4f",tooltip:"\u5f55\u5c4f\u6309\u94ae"}},onLoad:function(){this.goodsList={},this.timer=null,this.gameTime=0,this.useTime=0,this.isWin=!0,this.isOver=!1,this.paseMenu=null,this.overMenu=null,this.winPanel=null,this.node_tvfire=null,this.starLevel=3,this.lab_pointNum.string="\u7b2c"+(gl.userinfo.checkPoint+1)+"\u5173",gl.emitter.on("event_creatMos",this.creatMos,this),gl.emitter.on("event_gameOver",this.gameOver,this),gl.emitter.on("event_gameWin",this.gameWin,this),gl.emitter.on("event_nostamina",this.noStamina,this),gl.emitter.on("event_oplookRank",this.lookRank,this),gl.emitter.on("event_opswitchRole",this.switchRole,this),gl.emitter.on("event_gamecontinue",this.startTimeOut,this),gl.emitter.on("event_gamesenter",this.gamesenter,this),gl.emitter.on("event_gamesopne",this.gamesopne,this),gl.emitter.on("event_blasting",this.Blasting,this),gl.emitter.on("event_guidanceStateChange",this.guidanceStateChange,this),gl.audio.playMusic(this.audio_bg),this.initDataGoods(),this.startPhysic(),gl.userinfo.initData(),this.initPyhsicWorle(),this.showGudianceState(),this.initWnd()},showGudianceState:function(){var t=this;0==gl.userinfo.checkPoint&&(this.node_guidance[4].active=!0,this.node_guidance[5].active=!0,this.node_guidance[5].runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){t.btn_startGuidance()}))))},btn_startGuidance:function(){this.node_guidance[5].stopAllActions(),this.node_guidance[5].active=!1,this.guidanceStateChange(0)},guidanceStateChange:function(t){var e=this;switch(console.log(t),gl.userinfo.set("guidanceState",t),this.node_guidance[0].active=!1,this.node_guidance[1].active=!1,this.node_guidance[2].active=!1,this.node_guidance[3].active=!1,this.node_guidance[4].active=!0,t){case 0:this.node_guidance[0].active=!0;break;case 1:this.node_guidance[0].getChildByName("tip").getChildByName("tiplab").getComponent(cc.Label).string="\u677e\u5f00\u624b\u6307\u5c04\u51fa\u5b50\u5f39",this.node_guidance[0].active=!0;break;case 2:this.node_guidance[1].active=!0,this.node_guidance[1].getChildByName("tip").getChildByName("tiplab").getComponent(cc.Label).string="\u677e\u5f00\u624b\u6307\u5c04\u51fa\u5b50\u5f39";break;case 3:this.node_guidance[2].active=!0,this.node_guidance[2].runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){e.node_guidance[1].active=!0,e.node_guidance[2].active=!1})));break;case 4:this.node_guidance[4].active=!1,gl.userinfo.set("guidanceState",5)}},initWnd:function(){this.creatMos(),this.startTimeOut()},recordVideo:function(){var t=this;gl.sdk.recordVideo(30,function(){t.recordBut.getComponentInChildren(cc.Label).string="\u5f55\u5236\u4e2d"},function(){t.recordBut.getComponentInChildren(cc.Label).string="\u5df2\u7ed3\u675f"})},shareVideo:function(){var t=this;gl.sdk.shareVideo(function(e){t.recordVideo()})},gamesopne:function(t){cc.director.getPhysicsManager().enabled=t,t?this.node.resumeAllActions():this.node.pauseAllActions(),t?this.timer||this.startTimeOut():this.timer&&this.cleanTimeOut()},startPhysic:function(){cc.director.getPhysicsManager().enabled=!0},initDataGoods:function(){for(var t=0;t<this.goods.length;t++)this.goodsList[this.goods[t].data.name]||(this.goodsList[this.goods[t].data.name]=null),this.goodsList[this.goods[t].data.name]=this.goods[t].data},initPyhsicWorle:function(){this.levelarr=gl.levelArr;for(var t=gl.userinfo.get("checkPoint"),e=this.levelarr[t].itemArr,i=0,n=0;n<e.length;n++){var o=e[n].type;if("role"!=o){var s=cc.instantiate(this.goodsList[o]);s.x=e[n].x,s.y=e[n].y,s.rotation=e[n].rotation,s.width=e[n].width,s.height=e[n].height,"buleGlassBig"!=o&&"buleGlass"!=o||i++;var c=void 0;"fan"!=o&&"buleGlass"!=o&&"bottleGas"!=o&&"light"!=o&&"buleGlassBig"!=o&&"tv"!=o?((c=s.getComponent(cc.PhysicsBoxCollider)).size.width=e[n].width,c.size.height=e[n].height,s.parent=this.node_world):s.parent=this.node_world}else{var a=cc.p(e[n].x,e[n].y);gl.userinfo.set("playerPos",a)}}gl.userinfo.set("blueCount",i)},creatMos:function(){var t=this;this.isOver||gl.userinfo.get("checkPoint")<5||(this.mosNode=null,this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){t.mosNode=cc.instantiate(t.goods_mos),t.mosNode.parent=t.node}))))},creatTreasure:function(){if(gl.userinfo.wechatflag){if(gl.userinfo.checkPoint<9)return;this.Treasure=cc.instantiate(this.pre_treasure),this.Treasure.parent=this.node}},gameOver:function(){this.isOver||(this.cleanTimeOut(),this.isOver=!0,this.isWin=!1,gl.userinfo.set("isWin",!1),this.mosNode&&this.mosNode.destroy(),this.node.stopAllActions(),this.showOverMenu(),gl.audio.play(this.auido_fail,!1))},gameWin:function(){if(!this.isOver&&this.isWin){this.cleanTimeOut(),gl.userinfo.set("time",this.gameTime),this.isOver=!0,gl.userinfo.set("isWin",!0),this.mosNode&&this.mosNode.destroy(),this.node.stopAllActions(),this.storagePoint(),this.showOverMenu(),gl.audio.play(this.auido_win,!1);var t=this.gameTime;gl.userinfo.reqPointSubmit(gl.userinfo.get("checkPoint"),t)}},noStamina:function(){cc.instantiate(this.prefab_hintFrame).parent=cc.director.getScene()},lookRank:function(){var t=cc.instantiate(this.prefab_lookRank);t.parent=this.node},switchRole:function(){var t=cc.instantiate(this.prefab_switchRole);t.parent=this.node,roleNode.getComponent("prefab_selectRole").isInGame()},goEditor:function(){cc.director.loadScene("editor")},storagePoint:function(){var t=gl.userinfo.get("pointCount"),e=Number(gl.userinfo.get("hadPass")),i=gl.userinfo.get("checkPoint");e<=t&&i==e&&(e+=1,gl.userinfo.set("hadPass",e))},gamesenter:function(){this.cleanTimeOut(),new Promise(function(t,e){cc.director.preloadScene("game",function(e,i){if(!e)return t();console.error(e)})}).then(function(){cc.director.resume(),cc.director.loadScene("game")})},startTimeOut:function(){var t=this;this.timer||(this.timer=setInterval(function(){t.gameTime+=1,20==t.gameTime&&t.creatTreasure(),gl.userinfo.gameTime=t.gameTime,t.node_time.string=gl.userinfo.getStrTime(t.gameTime),t.starCtrl()},1e3))},starCtrl:function(){var t=gl.userinfo.starCondition;1!=this.starLevel&&this.gameTime>t.lev2?(this.starLevel=1,this.starShow.children[1].children[0].runAction(cc.sequence(cc.moveBy(.2,cc.v2(0,40)),cc.spawn(cc.moveBy(.3,cc.v2(0,-100)),cc.fadeTo(.3,0))))):2!=this.starLevel&&1!=this.starLevel&&this.gameTime>t.lev1&&(this.starLevel=2,this.starShow.children[2].children[0].runAction(cc.sequence(cc.moveBy(.2,cc.v2(0,40)),cc.spawn(cc.moveBy(.3,cc.v2(0,-100)),cc.fadeTo(.3,0)))))},cleanTimeOut:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},showOverMenu:function(){var t=this;this.Treasure&&this.Treasure.destroy(),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){(t.gamesopne(!1),t.isWin=gl.userinfo.get("isWin"),t.paseMenu&&t.paseMenu.destroy(),t.isWin)?0==gl.userinfo.get("checkPoint")?cc.instantiate(t.prefab_guidancePass).parent=t.node:(t.winPanel=cc.instantiate(t.prefab_winPanel),t.winPanel.parent=t.node,t.winPanel.getComponent("prefab_winPanel").initPanel(t.gameTime,t.starLevel,gl.userinfo.get("checkPoint"))):(t.overMenu=cc.instantiate(t.prefab_overMenu),t.overMenu.parent=t.node)})))},btn_pause:function(){gl.userinfo.set("gametime",this.gameTime),this.cleanTimeOut(),this.paseMenu=cc.instantiate(this.prefab_pauseMenu),this.paseMenu.parent=this.node,gl.emitter.emit("event_pauseGame"),gl.audio.clickPlay()},stopTvFire:function(){this.node_tvfire&&this.node_tvfire.destroy()},Blasting:function(t){for(var e=this,i=0,n=this.node_world.childrenCount;i<n;i++){var o=this.node_world.children[i];if(o.uuid!==t.uuid){var s=this.getNodeRigidBody(o);if(s){var c=500*(s.node.x-t.pos.x),a=500*(s.node.y-t.pos.y);s&&s.applyForceToCenter(cc.v2(c,a),!0)}}else o&&o.runAction(cc.moveBy(.5,cc.p(0,200)))}this.node_tvfire=cc.instantiate(this.tv_fire),this.node_tvfire.position=t.pos,this.node_tvfire.parent=this.node_world;var r=cc.delayTime(1),l=cc.callFunc(function(){e.stopTvFire()});this.node_tvfire.runAction(cc.sequence(r,l))},getNodeRigidBody:function(t){var e=null;switch(t.name){case"tv":case"bottleGas":case"glass":case"buleGlass":case"buleGlassBig":e=t.getComponent(cc.RigidBody);break;case"light":e=t.getChildByName("light_zhao").getComponent(cc.RigidBody);break;default:"Board"==t.name.split("_")[0]&&(e=t.getComponent(cc.RigidBody))}return e},start:function(){},onDestroy:function(){this.cleanTimeOut(),this.node.stopAllActions(),gl.emitter.off("event_creatMos",this),gl.emitter.off("event_gameOver",this),gl.emitter.off("event_gameWin",this),gl.emitter.off("event_nostamina",this),gl.emitter.off("event_oplookRank",this),gl.emitter.off("event_opswitchRole",this),gl.emitter.off("event_gamecontinue",this),gl.emitter.off("event_gamesenter",this),gl.emitter.off("event_gamesopne",this),gl.emitter.off("event_blasting",this),gl.emitter.off("event_guidanceStateChange",this),cc.director.getPhysicsManager().enabled=!1,gl.audio.stopMusic()}}),cc._RF.pop()},{}],global:[function(t,e,i){"use strict";cc._RF.push(e,"9d2c01KfTtKIbbNx7cy4sq0","global"),window.gl=window.gl||{},gl.bottom_color=[cc.color(145,224,234),cc.color(245,193,208),cc.color(223,195,232)],gl.light_color=[cc.color(64,168,181),cc.color(242,154,178),cc.color(204,157,218)],gl.button_color=[cc.color(64,168,181),cc.color(242,154,178),cc.color(204,157,218)],gl.color_index=0,gl.MESSAGE_TYPE={},gl.MESSAGE_TYPE.CLOSE_RANK=0,gl.MESSAGE_TYPE.GAIN_RANK=1,gl.MESSAGE_TYPE.GAIN_CLUB=2,gl.MESSAGE_TYPE.SUBMIT_RANK=3,gl.MESSAGE_TYPE.RANK_PAGE=4,gl.MESSAGE_TYPE.CROWD_RANK=5,gl.MESSAGE_TYPE.HIDE_RANK=6,gl.MESSAGE_TYPE.SHOW_RANK=7,gl.SHARE_TITLE="\u4fe1\u4e0d\u4fe1\u4f60\u538b\u67aa\u6280\u672f\u518d\u597d\uff0c\u4e5f\u538b\u4e0d\u4f4f\u8fd9\u628a\u67aa\uff1f",gl.SHARE_PICURL="https://wxgame.088.com/jdqs/res/resources/public/picture/img_share.png",gl.JDQS_DATA="https://wxgame.088.com/jdqs/res/resources/public/picture/jdqsData.json",cc.game.setFrameRate(60),gl.wechat_rank_key="imageJump",gl.role_key="role_index",gl.loading_jh="prefab_await",gl.tip="prefab_tip",gl.blLoading=!0,gl.blAddLoading=!1,gl.levelArr=null,gl.audio=t("audio"),gl.emitter=t("emitter"),gl.userinfo=t("userinfo"),gl.userinfo.onLoad(),gl.network=t("network"),gl.i18n=t("i18n"),gl.sdk=t("./sdk/sdk"),gl.horseRace={count:0,contentIndex:0,horseIndex:0},gl.backCb=null,gl.failCb=null,gl.failVideo=null,gl.backTime=null,gl.returnTime=null,gl.bannerSize=[],gl.bannerIndex=0,cc.game.on(cc.game.EVENT_HIDE,function(){gl.backTime=null,gl.returnTime=null,gl.backTime=Math.round(new Date/1e3),console.log("\u5207\u5230\u540e\u53f0"),gl.audio.setGameOpen(!1)}),cc.game.on(cc.game.EVENT_SHOW,function(){gl.returnTime=Math.round(new Date/1e3);var t=gl.returnTime-gl.backTime;console.log("\u8fd4\u56de\u524d\u53f0,\u65f6\u95f4:",t),t>3?gl.backCb&&gl.backCb():gl.failCb&&gl.failCb(),gl.backCb=null,gl.failCb=null,gl.audio.setGameOpen(!0)}),gl.userinfo.isDevelop||(console.log=function(){},console.error=function(){},cc.log=function(){},cc.error=function(){}),gl.showRemoteImage=function(t,e){if(!e)return console.error("showRemoteImage error");new Promise(function(t,i){cc.loader.load({url:e,type:"jpg"},function(e,n){if(e)return i("\u52a0\u8f7d\u8fdc\u7a0b\u8d44\u6e90\u5931\u8d25"),console.error(e);t(new cc.SpriteFrame(n))})}).then(function(e){t.getComponent(cc.Sprite).spriteFrame=e})},gl.load=function(t,e){cc.loader.loadRes(t,function(i,n){if(i)return cc.error("no find = "+t);e(n)})},gl.showJuHua=function(){var t=function(){var t=cc.director.getScene().getChildByName(gl.loading_jh);return t.active=!0,t.getComponent(t.name).startAction(),gl.blLoading||gl.closeJuHua(),t};return new Promise(function(e,i){if(cc.director.getScene().getChildByName(gl.loading_jh))e(t());else{if(gl.blAddLoading)return void(gl.blLoading=!0);gl.blAddLoading=!0,cc.loader.loadRes("prefab/prefab_await",cc.Prefab,function(n,o){if(n)return console.error("prefab/prefab_await.prefab \u6587\u4ef6\u8bfb\u53d6\u5931\u8d25"),i(n);var s=cc.director.getScene(),c=cc.instantiate(o);s.addChild(c,1e3),e(t())})}})},gl.closeJuHua=function(){var t=cc.director.getScene().getChildByName(gl.loading_jh);t?(t.getComponent(t.name).pauseAction(),t.active=!1,gl.blLoading=!0):gl.blLoading=!1},gl.showTip=function(t){var e=function(t,e){return t.getComponent(t.name).showTip(e),t};return new Promise(function(i,n){cc.loader.loadRes("prefab/"+gl.tip,cc.Prefab,function(o,s){if(o)return console.error("prefab/"+gl.tip+".prefab \u6587\u4ef6\u8bfb\u53d6\u5931\u8d25"),n(o);var c=cc.director.getScene(),a=cc.instantiate(s);c.addChild(a,99),i(e(a,t))})})},gl.readJSON=function(t){return new Promise(function(e,i){console.log("readJson",t),cc.loader.loadRes(t+".json",function(n,o){if(n)return console.error(t+".json \u6587\u4ef6\u8bfb\u53d6\u5931\u8d25"),i(n);console.log("\u8bfb\u53d6json\u6587\u4ef6 "+t+".json: ",o),e(o.json||o)})})},cc._RF.pop()},{"./sdk/sdk":"sdk",audio:"audio",emitter:"emitter",i18n:"i18n",network:"network",userinfo:"userinfo"}],goods_bottleGas:[function(t,e,i){"use strict";cc._RF.push(e,"7a6b5Yd/X5Oso/k40BQOnoy","goods_bottleGas"),cc.Class({extends:cc.Component,properties:{effect_fire:cc.Prefab,audio_fiv:cc.AudioClip,audio_light:cc.AudioClip},onLoad:function(){this.isJet=!1,this.isFirst=!0,this.BODYTAG=gl.userinfo.get("BODYTAG"),this.speed=gl.userinfo.get("gasSpeed"),this.audioID=-1},startJet:function(){var t=this;if(this.isFirst){var e=[];e.push(cc.callFunc(function(){t.updateVelocity(),t.isFirst=!1,t.isJet=!0,t.audioID=gl.audio.play(t.audio_fiv,!0)}));for(var i=0;i<5;i++)e.push(cc.delayTime(.6),cc.callFunc(function(){t.updateVelocity()}));e.push(cc.delayTime(.5),cc.callFunc(function(){-1!=t.audioID&&(gl.audio.stop(t.audioID),t.audioID=-1),t.updateVelocity(),t.isJet=!1})),this.node.runAction(cc.sequence(e))}},updateVelocity:function(){var t=this.node.getChildByName("top").convertToWorldSpaceAR(this.node.getChildByName("top").position),e=this.node.getChildByName("bottom").convertToWorldSpaceAR(this.node.getChildByName("top").position),i=e.x-t.x,n=e.y-t.y,o=i/260*this.speed,s=n/260*this.speed;this.velocity=cc.v2(o,s);var c=cc.instantiate(this.effect_fire),a=cc.p(0,-this.node.height/2);c.setPosition(a),c.parent=this.node,c.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){c.destroy()})))},start:function(){},onBeginContact:function(t,e,i){switch(i.tag){case this.BODYTAG.LIGHTCONNECT:console.log("BODYTAG.LIGHTCONNECT"),i.node.getComponent(cc.RevoluteJoint)&&i.node.getComponent(cc.RevoluteJoint).enabled&&(i.node.getComponent(cc.RevoluteJoint).enabled=!1),gl.audio.play(this.audio_light,!1)}},onEndContact:function(t,e,i){},onDestroy:function(){-1!=this.audioID&&gl.audio.stop(this.audioID)},update:function(t){this.isJet&&(this.node.getComponent(cc.RigidBody).linearVelocity=this.velocity)}}),cc._RF.pop()},{}],goods_buleGlass:[function(t,e,i){"use strict";cc._RF.push(e,"5c3e1IyNAxP85uwCnQBUNTe","goods_buleGlass"),cc.Class({extends:cc.Component,properties:{breakAudio:cc.AudioClip},onLoad:function(){gl.emitter.on("eventOnce_bottleBreak",this.breakBottle,this),this.isHit=!1,this.BODYTAG=gl.userinfo.get("BODYTAG")},bulletHit:function(){this.isHit=!0},breakBottle:function(){if(!this.node)return console.log("\u74f6\u5b50\u5df2\u9500\u6bc1");this.isHit=!0,gl.emitter.emit("event_hitCup",{pos:this.node.position,tag:this.BODYTAG.BULEGLASS}),gl.emitter.emit("event_openBottle",{pos:this.node.position}),gl.audio.play(this.breakAudio,!1),this.node&&this.node.destroy()},onDestroy:function(){if(gl.emitter.off("eventOnce_bottleBreak",this),this.isHit){var t=gl.userinfo.get("sorce");gl.userinfo.set("sorce",++t);var e=gl.userinfo.get("blueCount");gl.userinfo.get("sorce")===e&&gl.emitter.emit("event_gameWin")}}}),cc._RF.pop()},{}],i18n:[function(t,e,i){"use strict";cc._RF.push(e,"93789C/shtIL6entYsZPjee","i18n");var n=t("polyglot"),o=cc.sys.language;"zh"!==o&&(o="en");var s=t(o),c=new n({phrases:s,allowMissing:!0});e.exports={init:function(e){s=t(o=e),c.replace(s)},t:function(t,e){return c.t(t,e)}},cc._RF.pop()},{polyglot:"polyglot"}],mos:[function(t,e,i){"use strict";cc._RF.push(e,"e82d8AUAB9DVpq+uolmzJLS","mos"),cc.Class({extends:cc.Component,properties:{audio_fly:cc.AudioClip},onLoad:function(){gl.emitter.on("event_gamesopne",this.gamesopne,this),this.sceneSize=cc.director.getWinSize(),this.node.setPosition(this.randomPos()[2]),this.startAction(),this.flyid=gl.audio.play(this.audio_fly,!0)},gamesopne:function(t){t?(this.node.resumeAllActions(),this.flyid&&cc.audioEngine.resume(this.flyid)):(this.node.pauseAllActions(),this.flyid&&cc.audioEngine.pause(this.flyid))},startAction:function(){var t=this;this.node.stopAllActions();var e=this.randomPos();this.node.runAction(cc.sequence(cc.delayTime(1),cc.bezierTo(8,e),cc.callFunc(function(){t.startAction()})))},randomPos:function(){var t=1280*Math.random()-640,e=720*Math.random()-360;return t=t>0?t-=this.node.width:t+=this.node.width,e=e>0?e-=this.node.height:e+=200,[cc.v2(0,360),cc.v2(300,-640),cc.v2(t,e)]},start:function(){},update:function(t){},onDestroy:function(){gl.emitter.off("event_gamesopne",this),this.node.stopAllActions(),this.flyid&&gl.audio.stop(this.flyid)}}),cc._RF.pop()},{}],network:[function(t,e,i){"use strict";cc._RF.push(e,"9003b7BXJ1IXY/USQim0Gmo","network");var n=t("sha1"),o=cc.Class({name:"network",ctor:function(){this.code="jdqs",this.token="",this.http_ip="http://192.168.30.112:9504",this.sha1list=["token:","uid:","key:","data:"],this.netList=[],this.exit_count=0},POST:function(t,e){var i=this;t.head.token=this.token;var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(gl.closeJuHua(),4===n.readyState&&n.status>=200&&n.status<300){var t=n.responseText;t||console.log("httperror",t);var i=JSON.parse(t);if(gl.network.closeNetList(),console.log(i),this.exit_count=0,gl.network.codeerror(i.head.code))gl.emitter.emit("httperror");else{var o=i.head;gl.emitter.emit("event_servsertime",o.servertime),gl.network.setToken(o.token);var s=i.body;e&&e(o.route,s),gl.network.repeatNet()}}},n.timeout=5e3,n.onerror=function(t){console.log("\u51fa\u9519\u5566 http.POST ...",t),gl.closeJuHua(),setTimeout(i.repeatNet.bind(i),3e3)},gl.showJuHua(),console.log("http.POST \u53d1\u9001\u6570\u636e: ",this.http_ip,t),console.log(this.netList),n.open("POST",this.http_ip,!0),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.send(this.encryption(t))},wechatPost:function(t,e){gl.showJuHua(),t.head.token=this.token,wx.request({url:this.http_ip,header:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"},method:"POST",data:this.encryption(t),success:function(t){gl.closeJuHua(),console.log("Network sendReport success",t);var i=t.data,n=gl.network.bolOneNet(i.head.route);if(gl.network.closeNetList(),i.head.token&&gl.network.setToken(i.head.token),0!==i.head.flag&&1!==i.head.flag||(gl.userinfo.wechatflag=i.head.flag),!gl.network.codeerror(i.head.code)&&n){var o=i.head;gl.emitter.emit("event_servsertime",o.servertime);var s=i.body;gl.network.repeatNet(),e&&e(o.route,s)}else gl.emitter.emit("httperror")},fail:function(t){console.log("\u51fa\u9519\u5566 http.POST ...",t),setTimeout(function(){gl.network.repeatNet()},3e3)}})},setToken:function(t){this.token=t},closeNetList:function(){this.netList.splice(0,1)},repeatNet:function(){if(this.netList&&this.netList[0]){var t=this.netList[0];this.wechatPost(t.data,t.call)}},bolOneNet:function(t){var e=this.netList[0];if(e&&e.data&&e.data.head.route==t)return!0;return!1},bolNetList:function(t){for(var e=0,i=this.netList.length;e<i;e++){if(t===this.netList[e].data.head.route)return!1}return!0},send:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={};n.head={uid:gl.userinfo.get("userid")},n.head.route=t,n.body=e,this.netList[0]?this.bolNetList(t)&&this.netList.push({data:n,call:i}):(this.netList.push({data:n,call:i}),this.wechatPost(n,i))},encryption:function(t){var e=t.head,i=JSON.stringify(t.body),o=""+this.sha1list[0]+e.token+"&"+this.sha1list[1]+e.uid+"&"+this.sha1list[2]+this.code+"&"+this.sha1list[3]+i;return t.head.mi=n.hex_hmac_sha1(this.code,o).slice(5),console.log("mi mw:",o),console.log(""),console.log("post",t),JSON.stringify(t)},decode:function(t){var e=t.head,i=JSON.stringify(t.body),o=""+this.sha1list[0]+e.token+"&"+this.sha1list[1]+e.uid+"&"+this.sha1list[2]+this.code+"&"+this.sha1list[3]+i,s=n.hex_hmac_sha1(this.code,o).slice(5);return t.head.mi==s},codeerror:function(t){var e="";switch(t){case 10010002:gl.showJuHua(),e="\u60a8\u7684\u8d26\u53f7\u5728\u522b\u5904\u767b\u5f55",gl.userinfo.isWeChat&&wx.exitMiniProgram();break;case 10010013:e="\u4eca\u65e5\u5206\u4eab\u6b21\u6570\u8fbe\u5230\u4e0a\u9650";break;case 10010014:e="\u8bf7\u5206\u4eab\u5230\u597d\u53cb\u7fa4";break;case 10010015:e="\u8bf7\u4e0d\u8981\u5206\u4eab\u5230\u540c\u4e2a\u7fa4";break;case 0:return!1}return""!=e&&(gl.showTip(e),!0)}});e.exports=new o,cc._RF.pop()},{sha1:"sha1"}],playerCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"3c82ayBRf9OOpIJL8UGofOm","playerCtrl"),cc.Class({extends:cc.Component,properties:{roleList:[cc.Prefab]},onLoad:function(){this.isTouch=!1,this.role=null,this.roleScript=null,this.startPos=null,this.movePos=null,this.endPos=null,this.creatRole(),this.addListener(),gl.emitter.on("event_gameOver",this.gameOver,this),gl.emitter.on("event_gameWin",this.gameWin,this),gl.emitter.on("event_pauseGame",this.touchCancel,this)},gameOver:function(){this.offListener()},gameWin:function(){this.offListener()},creatRole:function(){var t=gl.userinfo.get("role");if(!this.roleList[t])return console.error("\u76ae\u80a4\u4e0d\u5b58\u5728");this.role=cc.instantiate(this.roleList[t]);var e=gl.userinfo.get("playerPos");this.role.setPosition(e),this.role.parent=this.node,this.roleScript=this.role.getComponent("role")},touchStart:function(t){this.isTouch=!0,this.startPos=t.touch.getLocation(),this.roleScript&&this.roleScript.moveArm(gl.userinfo.posChnange(this.startPos),!0)},touchMove:function(t){this.isTouch&&(this.movePos=t.touch.getLocation(),this.roleScript&&this.roleScript.moveArm(gl.userinfo.posChnange(this.movePos)))},touchEnd:function(t){if(this.isTouch){this.isTouch=!1,this.endPos=t.touch.getLocation();gl.userinfo.get("guidanceState");this.roleScript&&this.roleScript.fireBullet(gl.userinfo.posChnange(this.endPos)),this.roleScript&&this.roleScript.stopArm()}},touchCancel:function(t){this.isTouch=!1,console.log("\u89e6\u6478\u53d6\u6d88"),this.roleScript&&this.roleScript.stopArm()},addListener:function(){this.node.on("touchstart",this.touchStart,this),this.node.on("touchmove",this.touchMove,this),this.node.on("touchend",this.touchEnd,this),this.node.on("touchcancel",this.touchCancel,this)},offListener:function(){this.node.off("touchstart",this.touchStart,this),this.node.off("touchmove",this.touchMove,this),this.node.off("touchend",this.touchEnd,this),this.node.off("touchcancel",this.touchCancel,this)},onDestroy:function(){gl.emitter.off("event_gameOver",this),gl.emitter.off("event_gameWin",this),gl.emitter.off("event_pauseGame",this),this.offListener()}}),cc._RF.pop()},{}],polyglot:[function(t,e,i){(function(t){"use strict";cc._RF.push(e,"69decSgpRlE1rzEKp0RzG3V","polyglot");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t,o){"function"==typeof define&&define.amd?define([],function(){return o(t)}):"object"===(void 0===i?"undefined":n(i))?e.exports=o(t):t.Polyglot=o(t)})(void 0!==t?t:void 0,function(t){var e=String.prototype.replace;function i(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||_}i.VERSION="1.0.0",i.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},i.prototype.extend=function(t,e){var i;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],e&&(o=e+"."+o),"object"===(void 0===i?"undefined":n(i))?this.extend(i,o):this.phrases[o]=i)},i.prototype.unset=function(t,e){var i;if("string"==typeof t)delete this.phrases[t];else for(var o in t)t.hasOwnProperty(o)&&(i=t[o],e&&(o=e+"."+o),"object"===(void 0===i?"undefined":n(i))?this.unset(i,o):delete this.phrases[o])},i.prototype.clear=function(){this.phrases={}},i.prototype.replace=function(t){this.clear(),this.extend(t)},i.prototype.t=function(t,e){var i,n;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?i=this.phrases[t]:"string"==typeof e._?i=e._:this.allowMissing?i=t:(this.warn('Missing translation for key: "'+t+'"'),n=t),"string"==typeof i&&(e=m(e),n=p(n=h(i,this.currentLocale,e.smart_count),e)),n},i.prototype.has=function(t){return t in this.phrases};var o="||||",s={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},c={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function a(t){var e,i,n,o={};for(e in t)if(t.hasOwnProperty(e))for(n in i=t[e])o[i[n]]=e;return o}var r=/^\s+|\s+$/g;function l(t){return e.call(t,r,"")}function h(t,e,i){var n;return null!=i&&t?l((n=t.split(o))[u(e,i)]||n[0]):t}function d(t){var e=a(c);return e[t]||e.en}function u(t,e){return s[d(t)](e)}var g=/\$/g,f="$$$$";function p(t,i){for(var n in i)if("_"!==n&&i.hasOwnProperty(n)){var o=i[n];"string"==typeof o&&(o=e.call(i[n],g,f)),t=e.call(t,new RegExp("%\\{"+n+"\\}","g"),o)}return t}function _(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}function m(t){var e={};for(var i in t)e[i]=t[i];return e}return i}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],prefab_adunit:[function(t,e,i){"use strict";cc._RF.push(e,"4f199A5WOxCLpKYmrsFo32L","prefab_adunit"),cc.Class({extends:cc.Component,properties:{node_thirdpary:cc.Node,node_thirdparylist:cc.Node,btn_adunitlist:[cc.Node],btn_adunitlistcb:[cc.Node]},onLoad:function(){},onButton:function(t){switch(t.target.name){case"btn_adunit1":case"btn_adunit2":case"btn_adunit3":case"btn_adunit4":var e=t.target.name.split("btn_adunit");this.btn_adunit(parseInt(e[1]));break;case"btn_thirdparty1":case"btn_thirdparty2":t.target.name.split("btn_thirdparty")}},initThirdparty:function(){for(var t=this.btn_adunitlist.length,e=0,i=0;i<t;i++){var n=this.tpadunitlist[i];this.btn_adunitlist[i].active=!1,n?(gl.showRemoteImage(this.btn_adunitlist[i],n.app_icon),this.btn_adunitlist[i].active=!0):e++}e==t&&(this.node_thirdparylist.active=!1),e=0,t=this.btn_adunitlistcb.length;for(var o=0;o<t;o++){var s=this.thirdparty[o];this.btn_adunitlistcb[o].active=!1,s?(gl.showRemoteImage(this.btn_adunitlistcb[o],s.app_icon),this.btn_adunitlistcb[o].active=!0):e++}e==t&&(this.node_thirdpary.active=!1)},btn_Thirdparty:function(t){this.thirdparty[t-1]},btn_adunit:function(t){}}),cc._RF.pop()},{}],prefab_await:[function(t,e,i){"use strict";cc._RF.push(e,"c4d4bPe+xBEW6UrvETLadag","prefab_await"),cc.Class({extends:cc.Component,properties:{node_jh:cc.Node,node_jbbg:cc.Node},onLoad:function(){this.node.scale=.7,this.dot_max=8,this.index=0,this.opacity=[255,229,204,178,153,127,102,76],this.scale=[1,.9,.8,.7,.6,.5,.4,.3]},action:function(){this.node_jh.active=!0;for(var t=0;t<8;t++){var e=this.node_jh.getChildByName("img_jh"+(t+1)),i=(this.index+t)%this.dot_max;e.scale=this.scale[i],e.opacity=this.opacity[i]}this.index++,this.index>=8&&(this.index=0)},pauseAction:function(){this.unscheduleAllCallbacks()},startAction:function(){var t=this;this.unscheduleAllCallbacks(),this.node_jh.active=!1,this.node_jbbg.active=!1;for(var e=0;e<8;e++){var i=this.node_jh.getChildByName("img_jh"+(e+1)),n=(this.index+e)%this.dot_max;i.scale=this.scale[n],i.opacity=this.opacity[n]}this.scheduleOnce(function(e,i){t.node_jbbg.active=!0,t.schedule(t.action.bind(t),.1)},2)},start:function(){}}),cc._RF.pop()},{}],prefab_flaunt:[function(t,e,i){"use strict";cc._RF.push(e,"80c09THeY1L3b+46vwqVgwo","prefab_flaunt"),cc.Class({extends:cc.Component,properties:{prefab_overMenu:cc.Prefab,lab_tip:cc.Label,lab_time:cc.Label,btn_skip:cc.Node},onLoad:function(){gl.sdk.showBanner(),this.initInfo()},initInfo:function(){var t=gl.userinfo.get("userRank");if(gl.bannerSize&&gl.bannerSize[gl.bannerIndex]){var e=gl.bannerSize[gl.bannerIndex];e.height&&e.winHeight&&(this.btn_skip.y=-(cc.winSize.height/2-e.height/(e.winHeight/cc.winSize.height))+this.btn_skip.height/2)}var i=t.rank,n=t.rank_count,o=n-1<0?1:n-1;this.lab_time.string=gl.userinfo.getStrTime(gl.userinfo.get("time")),this.ranking=1==n?100:((n-i)/o*100).toFixed(2),this.lab_tip.string="\u60a8\u8d85\u8d8a\u4e86\u5168\u7403"+this.ranking+"%\u7684\u73a9\u5bb6\uff0c\u5feb\u53bb\u670b\u53cb\u5708\u70ab\u8000\u4e00\u4e0b\u5427\uff01"},btn_skip_cb:function(){this.close()},btn_flaunt:function(){gl.sdk.share()},close:function(){cc.instantiate(this.prefab_overMenu).parent=cc.director.getScene(),this.node.destroy()},onDestroy:function(){gl.sdk.hideBanner()}}),cc._RF.pop()},{}],prefab_gudiancePass:[function(t,e,i){"use strict";cc._RF.push(e,"ed1f8/WHltCJJcfQ3Zr/atc","prefab_gudiancePass"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},btn_nextPoint:function(){gl.userinfo.stamina>0?(gl.userinfo.set("checkPoint",1),gl.userinfo.reqEnterPoint()):gl.emitter.emit("event_nostamina")}}),cc._RF.pop()},{}],prefab_hintFrame:[function(t,e,i){"use strict";cc._RF.push(e,"3bad6jdCudP5qIiLowtf96K","prefab_hintFrame"),cc.Class({extends:cc.Component,properties:{label_hint:cc.Label,node_flag:[cc.Node]},onLoad:function(){},btn_cancel:function(){this.node.destroy(),gl.audio.clickPlay()},btn_addStamina:function(){var t=this;gl.sdk.showVideo(function(e){e&&(gl.userinfo.reqStamina(2,"",""),t.node.destroy())})},start:function(){},onDestroy:function(){}}),cc._RF.pop()},{}],prefab_horseRace:[function(t,e,i){"use strict";cc._RF.push(e,"47a37lF1MpDUZVz5ebg1bwf","prefab_horseRace"),cc.Class({extends:cc.Component,properties:{node_mask:cc.Node,node_race:cc.Node,node_bg:cc.Node},onLoad:function(){this.speed=55,this.horseRace=gl.userinfo.get("horseRace"),this.initRace()},initRace:function(){this.horseInterval=0;var t=this.horseRace[gl.horseRace.horseIndex];if(this.horseRace){if(!t&&(gl.horseRace.count=0,gl.horseRace.contentIndex=0,gl.horseRace.horseIndex=0,t=this.horseRace[gl.horseRace.horseIndex],console.log("\u8dd1\u9a6c\u706f\u4ece\u5934\u5f00\u59cb"),!t))return console.error("\u8dd1\u9a6c\u706f\u9519\u8bef");this.horseInterval=t.interval,this.times=t.times,this.startTime=t.starttime,this.endTime=t.endtime,this.content=t.string||[],this.startAction()}},hide:function(){this.node_race.getComponent(cc.Label).string=" ",this.node_bg.active=!1},show:function(){this.node_bg.active=!0},getContent:function(){var t=this.content[gl.horseRace.contentIndex];return console.log("\u8dd1\u9a6c\u706f\u5185\u5bb9="+this.content[gl.horseRace.contentIndex]+gl.horseRace.contentIndex),gl.horseRace.contentIndex+=1,gl.horseRace.contentIndex>this.content.length-1&&(gl.horseRace.contentIndex=0,gl.horseRace.count+=1),t},startAction:function(){var t=this;if(this.nowTime=Math.floor((new Date).getTime()/1e3),this.nowTime>=this.startTime&&this.nowTime<=this.endTime&&gl.horseRace.count<this.times){var e=this.getContent();this.node_race.getComponent(cc.Label).string=e,this.node_race.x=this.node_mask.width;var i=cc.v2(0-this.node_race.width,0);this.show(),this.node_race.runAction(cc.sequence(cc.moveTo(this.node_race.width/this.speed,i),cc.callFunc(function(){t.hide()}),cc.delayTime(this.horseInterval),cc.callFunc(function(){t.startAction()})))}else console.log("\u64ad\u653e\u4e0b\u4e00\u6761\u8dd1\u9a6c\u706f##nowTime"+this.nowTime+"##starttime"+this.startTime+"##endTime"+this.endTime+"##count"+gl.horseRace.count+"##times"+this.times),gl.horseRace.count=0,gl.horseRace.contentIndex=0,gl.horseRace.horseIndex+=1,this.initRace()}}),cc._RF.pop()},{}],prefab_loading:[function(t,e,i){"use strict";cc._RF.push(e,"dbfa7nv5I9C+6eJAliCaM0j","prefab_loading"),cc.Class({extends:cc.Component,properties:{node_bg:cc.Node,node_light:cc.Node,progress:cc.ProgressBar,prefab_light:cc.Prefab},onLoad:function(){gl.sdk.init(),this.delayTime=50,this.progress_count=0,this.progress.progress=0,this.progress_end=!1,this.initWnd()},initWnd:function(){this.node_bg.color=gl.bottom_color[gl.color_index];for(var t=1;t<=2;t++){this.node_bg.getChildByName("img_ztop"+t).color=gl.light_color[gl.color_index]}var e=cc.instantiate(this.prefab_light);e.parent=this.node_light,e.scaleX=1.3,e.scaleY=1.05,this.startLoading()},startLoading:function(){this.schedule(this.loadingAction.bind(this),.1)},loadingAction:function(){this.progress_end||(this.progress_count+=1,this.progress.progress=this.progress_count/this.delayTime,this.delayTime===this.progress_count&&(this.unschedule(this.loadingAction.bind(this)),this.closeLoading()))},closeLoading:function(){var t=this;this.progress_end=!0,this.progress.progress=1,this.unschedule(this.loadingAction.bind(this)),this.scheduleOnce(function(){t.node.destroy()},.1)},onDestroy:function(){gl.sdk.showBanner()}}),cc._RF.pop()},{}],prefab_lookClubRank:[function(t,e,i){"use strict";cc._RF.push(e,"36a9dDLpgFIcY+xYF+fSki4","prefab_lookClubRank");cc.Class({extends:cc.Component,properties:{node_bg:cc.Node,node_color:[cc.Node],sprite_rankingScrollView:cc.Sprite},onLoad:function(){this.tex=new cc.Texture2D,this.blSetWin=!1,this.initWnd()},initWnd:function(){for(var t in this.node_bg.color=gl.bottom_color[gl.color_index],this.node_color){this.node_color[t].color=gl.button_color[gl.color_index]}},onButton:function(t){switch(t.target.name){case"btn_close":this.node.destroy();break;case"btn_left":this.onLeftPage();break;case"btn_right":this.onRightPage()}gl.audio.clickPlay()},onLeftPage:function(){},onRightPage:function(){},start:function(){},onDestroy:function(){},update:function(t){if(window.sharedCanvas&&this.tex){if(!this.blSetWin){var e=cc.director.getWinSize();window.sharedCanvas.width=e.width,window.sharedCanvas.height=e.height,this.blSetWin=!0}this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.sprite_rankingScrollView.spriteFrame=new cc.SpriteFrame(this.tex)}}}),cc._RF.pop()},{}],prefab_lookRank:[function(t,e,i){"use strict";cc._RF.push(e,"5a287Sb5E9Cc7D/C2LYsp+P","prefab_lookRank");var n=0,o=1,s=0,c=1;cc.Class({extends:cc.Component,properties:{node_bg:cc.Node,node_light:cc.Node,node_roleData:cc.Node,node_btnSelect:[cc.Node],sf_rankPic:[cc.SpriteFrame],node_color:[cc.Node],prefab_light:cc.Prefab,node_roleStrip:cc.Node,node_rankContent:cc.Node,sprite_rankingScrollView:cc.Sprite},onLoad:function(){this.tex=new cc.Texture2D,this.blSetWin=!1,this.rank_page=1,this.rank_web_page=1,this.rank_init=!1,this.rank_count=12,this.rank_count_min=4,this.name_width=224,this.blRecord=!0,this.rank_type=n,this.rank_select_color=[cc.color(255,175,72),cc.color(212,212,212)],this.initWnd(),gl.emitter.on("event_rankuser",this.initUserRole,this),gl.emitter.on("event_ownerrank",this.rankView,this),this.setBtnColor(),this.setRankListOpen(),this.node_roleData.active=!1},initWnd:function(){this.node_bg.color=gl.bottom_color[gl.color_index];for(var t=1;t<=2;t++){this.node_bg.getChildByName("img_ztop"+t).color=gl.light_color[gl.color_index]}var e=cc.instantiate(this.prefab_light);for(var i in e.parent=this.node_light,e.scaleX=1.3,e.scaleY=1.2,this.node_color){this.node_color[i].color=gl.button_color[gl.color_index]}},ownerRank:function(){gl.userinfo.isWeChat&&gl.userinfo.reqOwnerRank(this.rank_web_page,this.rank_count)},rankView:function(){this.rank_init=!0;var t=(this.rank_page-1)*this.rank_count_min,e=this.rank_page*this.rank_count_min,i=0,n=gl.userinfo.get("ownerRank");if(t>n.length)return this.rank_page--,void(this.blRecord=!1);this.node_rankContent.removeAllChildren();for(var o=t;o<e;o++){var s=n[o];s&&s.rank&&(this.addRoleData(s),i++)}n.length<e||i<this.rank_count_min?this.blRecord=!1:this.blRecord=!0},initUserRole:function(){var t=gl.userinfo.get("userRank");this.setRestsRoleData(this.node_roleData,t,!0)},addRoleData:function(t){var e=cc.instantiate(this.node_roleStrip);e.active=!0,e.parent=this.node_rankContent,this.setRestsRoleData(e,t)},setRestsRoleData:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.getChildByName("img_rank"),o=n?n.getComponent(cc.Sprite):null,s=t.getChildByName("label_rank").getComponent(cc.Label),c=t.getChildByName("icon"),a=t.getChildByName("label_name").getComponent(cc.Label),r=t.getChildByName("label_point").getComponent(cc.Label),l=t.getChildByName("label_time").getComponent(cc.Label),h=t.getChildByName("sp_star").getChildByName("lab_starNum").getComponent(cc.Label);o&&(o.node.active=!1),s.node.active=!1,e.rank>3||i?(s.node.active=!0,s.string=""+e.rank,h.node.color=cc.color(0,0,0)):(o.node.active=!0,o.spriteFrame=this.sf_rankPic[e.rank-1],h.node.color=cc.color(255,0,0)),gl.showRemoteImage(c,e.avatar),a.string=""+e.nickname,a.node.width>=this.name_width&&(a.node.scale=this.name_width/a.node.width),r.string=parseInt(e.pointid)+1+"\u5173",l.string=gl.userinfo.getStrTime(e.finishtime),e.star_total?h.string="X"+e.star_total:h.string="X"+e.star},setBtnColor:function(){this.node_btnSelect[n].color=this.rank_select_color[c],this.node_btnSelect[o].color=this.rank_select_color[c],this.rank_type==n?this.node_btnSelect[n].color=this.rank_select_color[s]:this.node_btnSelect[o].color=this.rank_select_color[s]},setRankListOpen:function(){this.node_roleData.active=!1,this.node_rankContent.active=!1,this.rank_type==n||(this.node_rankContent.active=!0,this.node_roleData.active=!0,this.rank_init||this.ownerRank())},onButton:function(t){switch(t.target.name){case"btn_close":this.node.destroy();break;case"btn_invitation":this.rank_type!=n&&(this.rank_type=n,this.setBtnColor(),this.setRankListOpen());break;case"btn_allrank":this.rank_type!=o&&(this.rank_type=o,this.setBtnColor(),this.setRankListOpen());break;case"btn_left":this.onLeftPage();break;case"btn_right":this.onRightPage()}gl.audio.clickPlay()},onLeftPage:function(){this.rank_type==n||this.rank_page>1&&(this.rank_page--,this.rankView())},onRightPage:function(){if(this.rank_type==n);else{var t=gl.userinfo.get("ownerRank"),e=this.rank_page*this.rank_count_min;t&&1==this.blRecord&&this.rank_page<25&&(this.rank_page++,t.length<=e?(this.rank_web_page++,this.ownerRank()):this.rankView())}},start:function(){},onDestroy:function(){"start"===cc.director.getScene().name&&gl.sdk.showBanner(),gl.emitter.off("event_rankuser",this),gl.emitter.off("event_ownerrank",this)},update:function(t){if(window.sharedCanvas&&this.tex){if(!this.blSetWin){var e=cc.director.getWinSize();window.sharedCanvas.width=e.width,window.sharedCanvas.height=e.height,this.blSetWin=!0}this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.sprite_rankingScrollView.spriteFrame=new cc.SpriteFrame(this.tex)}}}),cc._RF.pop()},{}],prefab_notice:[function(t,e,i){"use strict";cc._RF.push(e,"becf2YN4xdJdLegNuboJsjB","prefab_notice"),cc.Class({extends:cc.Component,properties:{lab_content:cc.Label},onLoad:function(){gl.userinfo.isWeChat&&gl.sdk.hideBanner(),this.initPanel()},initPanel:function(){this.notice=gl.userinfo.get("bulletin");var t=this.notice.content;this.lab_content.string=t},btn_close:function(){this.node.destroy()},onDestroy:function(){gl.sdk.showBanner()}}),cc._RF.pop()},{}],prefab_nowRole:[function(t,e,i){"use strict";cc._RF.push(e,"7aaebcgLHZAz5XOfttaVu/q","prefab_nowRole"),cc.Class({extends:cc.Component,properties:{node_role:cc.Node},onLoad:function(){},btn_close:function(){this.selectIndex=null,this.node.destroy()},btn_getFree:function(){var t=this;gl.sdk.showVideoAd(function(e){e&&(gl.userinfo.skinList[t.selectIndex]=t.selectIndex,gl.userinfo.role=t.selectIndex-1,t.node.destroy())})},refreshRole:function(t){var e=this;this.selectIndex=Number(t),cc.loader.loadResDir("/dragon/dragon_role"+this.selectIndex,function(t,i){var n=e.node_role.getComponent(dragonBones.ArmatureDisplay);for(var o in i)i[o]instanceof dragonBones.DragonBonesAsset&&(n.dragonAsset=i[o]),i[o]instanceof dragonBones.DragonBonesAtlasAsset&&(n.dragonAtlasAsset=i[o])})}}),cc._RF.pop()},{}],prefab_openBox:[function(t,e,i){"use strict";cc._RF.push(e,"72988AMcQ1IhaDVQgexbNKa","prefab_openBox"),cc.Class({extends:cc.Component,properties:{btn_skip:cc.Node},onLoad:function(){gl.sdk.showBanner(),gl.emitter.emit("event_gamesopne",!1),this.initSkipPos()},initSkipPos:function(){if(gl.bannerSize&&gl.bannerSize[gl.bannerIndex]){var t=gl.bannerSize[gl.bannerIndex];t.height&&t.winHeight&&(this.btn_skip.y=-(cc.winSize.height/2-t.height/(t.winHeight/cc.winSize.height))+this.btn_skip.height/2)}},btn_boom_cb:function(){var t=this;gl.sdk.showVideo(function(e){e&&t.breakBottle()})},shareOpen:function(){gl.sdk.share()},btn_skip_cb:function(){this.node&&this.node.destroy()},breakBottle:function(){var t=this;this.scheduleOnce(function(){gl.emitter.emitOnce("eventOnce_bottleBreak"),t.node&&t.node.destroy()},.5)},onDestroy:function(){gl.emitter.emit("event_gamesopne",!0),gl.sdk.hideBanner()}}),cc._RF.pop()},{}],prefab_overMenu:[function(t,e,i){"use strict";cc._RF.push(e,"04378Psz3lFApEHm/kmXnVs","prefab_overMenu"),cc.Class({extends:cc.Component,properties:{node_bg:cc.Node,node_win:cc.Node,node_fail:cc.Node,node_rank:cc.Node,node_light:cc.Node,node_wudi:cc.Node,node_again:cc.Node,label_stamina:cc.Label,node_color:[cc.Node],prefab_switchRol:cc.Prefab,prefab_lookclub:cc.Prefab,prefab_light:cc.Prefab,label_staminatime:cc.Label,node_flag:[cc.Node],prefab_nowRole:cc.Prefab,node_specialStart:cc.Node},onLoad:function(){if(this.initWnd(),this.initMenu(),gl.emitter.on("event_refreshstamina",this.refreshStamina,this),gl.audio.setSound(!1),!gl.userinfo.wechatflag){for(var t in this.node_flag){this.node_flag[t].active=!1}this.node_again.x=0}this.showNewRole()},initWnd:function(){this.node_bg.color=gl.bottom_color[gl.color_index];for(var t=1;t<=2;t++){this.node_bg.getChildByName("img_ztop"+t).color=gl.light_color[gl.color_index]}var e=cc.instantiate(this.prefab_light);for(var i in e.parent=this.node_light,e.scaleX=1.3,e.scaleY=1.2,this.node_color){this.node_color[i].color=gl.button_color[gl.color_index]}this.refreshStamina()},refreshStamina:function(){this.label_stamina.string=""+gl.userinfo.get("stamina")},showNewRole:function(){if(this.isWin=gl.userinfo.get("isWin"),this.isWin){var t=Number(gl.userinfo.get("checkPoint"))+1,e=gl.userinfo.lockPoint,i=gl.userinfo.skinList;for(var n in e)if(t==e[n]&&!i[n]){var o=cc.instantiate(this.prefab_nowRole);return o.parent=this.node,void o.getComponent("prefab_nowRole").refreshRole(n)}}},initMenu:function(){(this.isWin=gl.userinfo.get("isWin"),this.node_win.active=!1,this.node_fail.active=!1,this.isWin)?this.node_win.active=!0:(this.node_fail.active=!0,this.node_wudi.getChildByName("label_"+parseInt(3*Math.random()+1)).active=!0)},btn_backToMenu:function(){new Promise(function(t,e){cc.director.preloadScene("start",function(e,i){if(!e)return t();console.error(e)})}).then(function(){cc.director.loadScene("start"),gl.sdk.showBanner()})},btn_share:function(){gl.sdk.share()},btn_showSpecialStart:function(){this.node_specialStart.active=!0},btn_specialStart:function(){gl.userinfo.stamina>0?gl.sdk.showVideo(function(t){t&&(gl.userinfo.shield=gl.userinfo.shieldMax,gl.userinfo.reqEnterPoint())}):gl.emitter.emit("event_nostamina")},btn_closePanel:function(){this.node_specialStart.active=!1},btn_again:function(){gl.userinfo.stamina>0?gl.userinfo.reqEnterPoint():gl.emitter.emit("event_nostamina")},btn_switchRole:function(){var t=cc.instantiate(this.prefab_switchRol);t.parent=this.node,t.getComponent("prefab_selectRole").isInGame()},btn_next:function(){if(gl.userinfo.stamina>0){var t=gl.userinfo.get("pointCount"),e=gl.userinfo.get("checkPoint");t>=e+1?(gl.userinfo.set("checkPoint",e+=1),gl.userinfo.reqEnterPoint()):gl.showTip("\u8fd8\u672a\u5f00\u653e\u656c\u8bf7\u671f\u5f85\uff01")}else gl.emitter.emit("event_nostamina")},btn_checkRank:function(){},onButton:function(t){switch(t.target.name){case"btn_checkrank":this.btn_checkRank();break;case"btn_again":this.btn_again();break;case"btn_showSpecialStart":this.btn_showSpecialStart();break;case"btn_specialStart":this.btn_specialStart();break;case"btn_selectRole":this.btn_switchRole();break;case"btn_next":this.btn_next();break;case"btn_share":this.btn_share();break;case"btn_backToStart":this.btn_backToMenu();break;case"btn_closePanel":this.btn_closePanel()}gl.audio.clickPlay()},update:function(t){this.label_staminatime&&(this.label_staminatime.string=gl.userinfo.getStaminaTime())},onDestroy:function(){gl.emitter.off("event_refreshstamina",this),gl.audio.setSound(!0)}}),cc._RF.pop()},{}],prefab_pauseMenu:[function(t,e,i){"use strict";cc._RF.push(e,"e80fdIjwtBAJ7TTszHEDWR9","prefab_pauseMenu"),cc.Class({extends:cc.Component,properties:{node_bg:cc.Node,label_time:cc.Label,label_stamina:cc.Label,node_color:[cc.Node],label_staminatime:cc.Label},onLoad:function(){gl.emitter.emit("event_gamesopne",!1),this.initWnd(),this.refreshTime(),gl.emitter.on("event_refreshstamina",this.refreshStamina,this),cc.audioEngine.pauseAll()},update:function(t){this.label_staminatime&&(this.label_staminatime.string=gl.userinfo.getStaminaTime())},initWnd:function(){for(var t in this.node_bg.color=gl.bottom_color[gl.color_index],this.node_color){this.node_color[t].color=gl.button_color[gl.color_index]}this.refreshStamina()},refreshStamina:function(){this.label_stamina.string=""+gl.userinfo.get("stamina")},btn_continue:function(){gl.emitter.emit("event_gamesopne",!0),this.node.destroy(),gl.emitter.emit("event_gamecontinue"),cc.audioEngine.resumeAll(),gl.audio.clickPlay()},btn_backToMenu:function(){gl.emitter.emit("event_gamesopne",!0),new Promise(function(t,e){cc.director.preloadScene("start",function(e,i){if(!e)return t();console.error(e)})}).then(function(){cc.director.loadScene("start"),gl.sdk.showBanner(),gl.userinfo.shield=0}),gl.audio.clickPlay()},btn_again:function(){gl.userinfo.get("stamina")>0?gl.userinfo.reqEnterPoint():gl.emitter.emit("event_nostamina"),gl.audio.clickPlay(),gl.userinfo.shield=0},btn_switchRole:function(){gl.emitter.emit("event_opswitchRole"),gl.audio.clickPlay(),gl.userinfo.shield=0},btn_lookRank:function(){gl.emitter.emit("event_oplookRank"),gl.audio.clickPlay()},refreshTime:function(){this.label_time.string=gl.userinfo.getStrTime()},start:function(){},onDestroy:function(){gl.emitter.off("event_refreshstamina",this)}}),cc._RF.pop()},{}],prefab_selectRole:[function(t,e,i){"use strict";cc._RF.push(e,"20901GmrgdGgb2G8noiyc+C","prefab_selectRole"),cc.Class({extends:cc.Component,properties:{node_bg:cc.Node,lab_intro:cc.Label,page_roleList:cc.PageView,node_roleContent:cc.Node,node_light:cc.Node,node_btnColor:[cc.Node],prefab_light:cc.Prefab,btn_select:cc.Node,btn_video:cc.Node,btn_noLock:cc.Node},onLoad:function(){this.page_count=7,this.selectIndex=gl.userinfo.get("role"),this.intro=gl.userinfo.get("intro"),this.isSwitch=!1,this.initWnd(),this.updateList(!1),this.updateText(),this.initRole(),this.chengeBtnState()},initWnd:function(){this.node_bg.color=gl.bottom_color[gl.color_index];for(var t=1;t<=2;t++){this.node_bg.getChildByName("img_ztop"+t).color=gl.light_color[gl.color_index]}for(var e=0,i=this.node_btnColor.length;e<i;e++){this.node_btnColor[e].color=gl.button_color[gl.color_index]}var n=cc.instantiate(this.prefab_light);n.parent=this.node_light,n.scaleX=1.3,n.scaleY=1.2;for(var o=this.node_roleContent.childrenCount,s=0;s<o;s++){var c=this.node_roleContent.getChildByName("page_"+s).getChildByName("img_lock");0!=s?gl.userinfo.skinList[s+1]?c.active=!1:c.active=!0:c.active=!1}},initRole:function(){for(var t=this.page_roleList.node.getChildByName("view").getChildByName("content").children,e=function(e){var i=t[e].getChildByName("role").getComponent(dragonBones.ArmatureDisplay);cc.loader.loadResDir("/dragon/dragon_role"+(e+1),function(t,e){for(var n in e)e[n]instanceof dragonBones.DragonBonesAsset&&(i.dragonAsset=e[n]),e[n]instanceof dragonBones.DragonBonesAtlasAsset&&(i.dragonAtlasAsset=e[n])})},i=0;i<t.length;i++)e(i)},chengeBtnState:function(){var t=this.selectIndex;if(0==this.selectIndex)return this.btn_video.active=!1,this.btn_noLock.active=!1,this.btn_select.active=!0;gl.userinfo.skinList[t+1]?this.initselectBtnState(!0):this.initselectBtnState(!1)},initselectBtnState:function(t){if(this.btn_select.active=t,t)this.btn_video.active=!1,this.btn_noLock.active=!1;else{var e=Number(gl.userinfo.lockPoint[Number(this.selectIndex)+1]);gl.userinfo.hadPass()>e-1?(this.btn_video.active=!0,this.btn_noLock.active=!1):(this.btn_video.active=!1,this.btn_noLock.active=!0,this.btn_noLock.getChildByName("lab_lock").getComponent(cc.Label).string="\u7b2c"+e+"\u5173\u89e3\u9501")}},updateList:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.page_roleList.scrollToPage(this.selectIndex):this.page_roleList.scrollToPercentHorizontal(this.getScrollIndex())},updateText:function(){this.intro[this.selectIndex]?this.lab_intro.string=this.intro[this.selectIndex]:this.lab_intro.string="\u65e0\u6b64\u4eba\u7269\u4ecb\u7ecd"},selectRoleAct:function(){for(var t=this.node_roleContent.getChildByName("page_"+this.selectIndex).getChildByName("role"),e=[],i=0;i<4;i++)e.push(cc.moveBy(.1,i%2?15:-15,0));t.runAction(cc.sequence(e));for(var n=this.node_roleContent.getChildByName("page_"+this.selectIndex).getChildByName("img_lock"),o=[],s=0;s<4;s++)o.push(cc.moveBy(.1,s%2?15:-15,0));n.runAction(cc.sequence(o))},getScrollIndex:function(){return 0!=this.selectIndex&&this.selectIndex!=this.page_count-1?this.selectIndex/(this.page_count-1):this.selectIndex?1:0},isInGame:function(){this.isSwitch=!0},pageTouch:function(t){this.selectIndex=t._lastPageIdx,this.updateText(),this.selectRoleAct(),this.chengeBtnState()},cb_left:function(){this.selectIndex-=1,this.selectIndex=this.selectIndex<0?0:this.selectIndex,this.updateList(),this.chengeBtnState(),gl.audio.clickPlay()},cb_right:function(){this.selectIndex+=1;var t=this.page_count-1;this.selectIndex=this.selectIndex>t?t:this.selectIndex,this.updateList(),this.chengeBtnState(),gl.audio.clickPlay()},cb_back:function(){this.node.destroy(),gl.audio.clickPlay()},cb_sure:function(){gl.userinfo.set("role",this.selectIndex),gl.userinfo.storageData(gl.role_key,this.selectIndex),gl.emitter.emit("event_refreshrole"),this.node.destroy(),gl.audio.clickPlay()},cb_video:function(){var t=this;gl.sdk.showVideo(function(e){e&&(gl.userinfo.setSkinList(t.selectIndex+1,t.selectIndex+1),t.initselectBtnState(!0),t.node_roleContent.getChildByName("page_"+t.selectIndex).getChildByName("img_lock").active=!1,gl.userinfo.set("role",t.selectIndex),gl.userinfo.storageData(gl.role_key,t.selectIndex),gl.emitter.emit("event_refreshrole"))})},start:function(){},onDestroy:function(){gl.sdk.showBanner()}}),cc._RF.pop()},{}],prefab_selectScene:[function(t,e,i){"use strict";cc._RF.push(e,"b6653+RHoJKkLmUEFuGvtya","prefab_selectScene");var n=0,o=1,s=2,c={};c[n]=cc.color(212,212,212),c[o]=cc.color(112,255,42),c[s]=cc.color(255,127,57),cc.Class({extends:cc.Component,properties:{node_bg:cc.Node,btn_preNode:cc.Node,node_pointList:cc.Node,btn_unlock:cc.Node,node_light:cc.Node,label_stamina:cc.Label,prefab_light:cc.Prefab,label_staminatime:cc.Label,pageview_content:cc.Node,node_color:[cc.Node],pageView:cc.PageView,node_page:cc.Node,node_star:cc.Node},onLoad:function(){this.selectIndex=0,this.initWnd(),this.initList(),this.btn_unlock.active=!1,gl.emitter.on("event_refreshstamina",this.refreshStamina,this)},start:function(){this.initPageViewIndex()},update:function(t){this.label_staminatime&&(this.label_staminatime.string=gl.userinfo.getStaminaTime())},initPageViewIndex:function(){var t=Math.ceil((gl.userinfo.hadPass()+1)/20)-1;t=t>4?4:t,console.log("\u6eda\u52a8\u5230\u6307\u5b9a\u9875\u9762"+t),this.pageView.getComponent(cc.PageView).scrollToPage(t,0),this.selectIndex=t},initWnd:function(){this.node_bg.color=gl.bottom_color[gl.color_index];for(var t=1;t<=2;t++){this.node_bg.getChildByName("img_ztop"+t).color=gl.light_color[gl.color_index]}var e=cc.instantiate(this.prefab_light);for(var i in e.parent=this.node_light,e.scaleX=1.3,e.scaleY=1.2,this.node_color){this.node_color[i].color=gl.button_color[gl.color_index]}this.refreshStamina()},refreshStamina:function(){this.label_stamina.string=""+gl.userinfo.get("stamina")},cb_unlock:function(){this.node_pointList.destroyAllChildren();var t=gl.userinfo.get("pointCount");gl.userinfo.set("hadPass",t),this.initList()},pageTouch:function(t){this.selectIndex=t._lastPageIdx},cb_left:function(){this.selectIndex-=1,this.selectIndex=this.selectIndex<0?0:this.selectIndex,this.pageView.getComponent(cc.PageView).scrollToPage(this.selectIndex,.3)},cb_right:function(){this.selectIndex+=1;var t=Math.ceil((gl.userinfo.pointCount+1)/20)-1;this.selectIndex=this.selectIndex>=t?t:this.selectIndex,this.pageView.getComponent(cc.PageView).scrollToPage(this.selectIndex,.3)},initList:function(){for(var t=this,e=gl.userinfo.hadPass(),i=gl.levelArr.length,a=Math.ceil(i/20),r=0;r<a;r++){var l=cc.instantiate(this.node_page);l.parent=this.pageview_content,l.active=!0}for(var h=function(a){var r=cc.instantiate(t.btn_preNode),l=Math.ceil((a+1)/20)-1;r.parent=t.pageview_content.children[l],r.active=!0,r.getChildByName("label_point").getComponent(cc.Label).string=a+1,r.getChildByName("img_pwhite").color=gl.button_color[gl.color_index],r.on("click",function(e){e.tag=a,t.selectPoint(e)},t),a>e?r.color=c[n]:a==e&&e<=i?r.color=c[o]:(r.color=c[s],t.showStar(r,a))},d=0;d<i;d++)h(d)},showStar:function(t,e){if(gl.userinfo.starList[e]||0==gl.userinfo.starList[e])for(var i=gl.userinfo.starList[e],n=1;n<=3;n++){var o=cc.instantiate(this.node_star);o.parent=t,o.active=!0,o.x=45*n-90,o.y=2==n?-35:-30,i>=n&&(o.children[0].active=!0)}},cb_back:function(){this.node.destroy(),gl.sdk.showBanner(),gl.audio.clickPlay()},selectPoint:function(t){gl.userinfo.set("checkPoint",Number(t.tag)),gl.emitter.emit("event_gamesenter")},onDestroy:function(){gl.emitter.off("event_refreshstamina",this)}}),cc._RF.pop()},{}],prefab_tip:[function(t,e,i){"use strict";cc._RF.push(e,"522d7+17/JNe5sgSfQtpXBZ","prefab_tip"),cc.Class({extends:cc.Component,properties:{bottom:cc.Node,content:cc.Label},onLoad:function(){var t=this;this.scheduleOnce(function(){t.node.destroy()},1.5)},showTip:function(t){this.content.string=t,this.bottom.width=40*t.length+120}}),cc._RF.pop()},{}],prefab_treasure:[function(t,e,i){"use strict";cc._RF.push(e,"37161DTHNND95X8aq5IWQXF","prefab_treasure"),cc.Class({extends:cc.Component,properties:{prefab_openBox:cc.Prefab},onLoad:function(){this.node.setPosition(cc.v2(-340,310)),this.startAction()},startAction:function(){var t=this;this.node.stopAllActions();var e=this.randomPos();this.node.runAction(cc.sequence(cc.moveTo(5,e),cc.callFunc(function(){t.startAction()})))},randomPos:function(){var t=1280*Math.random()-640,e=720*Math.random()-360;return t=t>0?t-=this.node.width:t+=this.node.width,e=e>0?e-=this.node.height:e+=200,cc.v2(t,e)},openBox:function(){console.log("\u6253\u5f00\u5b9d\u7bb1"),cc.instantiate(this.prefab_openBox).parent=cc.director.getScene().getChildByName("Canvas"),this.node.destroy()}}),cc._RF.pop()},{}],prefab_tv:[function(t,e,i){"use strict";cc._RF.push(e,"eb2f5O9myJH+ZnhlYFhIL0k","prefab_tv"),cc.Class({extends:cc.Component,properties:{tvFrame:cc.Sprite,imgList:[cc.SpriteFrame]},onLoad:function(){var t=Math.floor(6*Math.random());this.tvFrame.spriteFrame=this.imgList[t]}}),cc._RF.pop()},{}],prefab_winPanel:[function(t,e,i){"use strict";cc._RF.push(e,"a4e9bNIyApD0J/8iZeRSD6y","prefab_winPanel");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};cc.Class({extends:cc.Component,properties:{prefab_overMenu:cc.Prefab,lab_point:cc.Label,lab_time:cc.Label,starList:cc.Node,btn_skip:cc.Node,btnColor:cc.Node},onLoad:function(){if(this.btnColor.color=cc.color(91,255,71),gl.sdk.showBanner(),gl.bannerSize&&gl.bannerSize[gl.bannerIndex]){var t=gl.bannerSize[gl.bannerIndex];t.height&&t.winHeight&&(this.btn_skip.y=-(cc.winSize.height/2-t.height/(t.winHeight/cc.winSize.height))+this.btn_skip.height/2)}},initPanel:function(t,e,i){var o=this;this.lab_time.string=gl.userinfo.getStrTime(t),this.lab_point.string="\u7b2c"+i+"\u5173";for(var s=function(t){if(t>=3)return{v:void 0};o.starList.children[t].getChildByName("star").opacity=0,o.starList.children[t].getChildByName("star").active=!0,o.starList.children[t].runAction(cc.sequence(cc.delayTime(.3*t+.4),cc.callFunc(function(){o.starList.children[t].getChildByName("star").opacity=255}),cc.scaleTo(.2,1.5,1.5),cc.scaleTo(.1+.2*t,1,1)))},c=0;c<e;c++){var a=s(c);if("object"===(void 0===a?"undefined":n(a)))return a.v}},btn_flaunt_cb:function(){var t=gl.userinfo.get("userRank");gl.userinfo.getStrTime(gl.userinfo.get("time")),t.pointid},btn_again_cb:function(){gl.userinfo.stamina>0?gl.userinfo.reqEnterPoint():gl.emitter.emit("event_nostamina")},btn_close_cb:function(){cc.instantiate(this.prefab_overMenu).parent=cc.director.getScene().getChildByName("Canvas"),this.node.destroy()},onDestroy:function(){gl.sdk.hideBanner()}}),cc._RF.pop()},{}],role:[function(t,e,i){"use strict";cc._RF.push(e,"9407d457K9Mk4haUKafKKeG","role"),cc.Class({extends:cc.Component,properties:{head:cc.Node,upBody:cc.Node,arm_left:cc.Node,arm_right:cc.Node,hand_left:cc.Node,hand_right:cc.Node,line_left:cc.Node,line_right:cc.Node,foot_left:cc.Node,foot_right:cc.Node,node_shield:cc.Node,maozi:cc.Node},onLoad:function(){var t=this;this.node.opacity=0,this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){t.node.opacity=255}))),this.isTouch=!1,this.handBody=null,this._velocity=null,this.miaoZhunNode=null,this.direction=!0,this.bulletSpeed=gl.userinfo.get("bulletSpeed"),this.shield=gl.userinfo.shield,this.node_shield.active=Boolean(this.shield),gl.emitter.on("event_gameOver",this.gameOver,this),gl.emitter.on("event_gameWin",this.gameWin,this),gl.emitter.on("event_offshield",this.offshield,this),gl.emitter.on("event_blasting",this.Blasting,this)},gameOver:function(){gl.userinfo.get("isWin")||(gl.userinfo.shield=0,this.isTouch=!1,this.line_left.active=!1,this.line_right.active=!1,this.head.children[5].active=!0,this.maozi.getComponent(cc.WeldJoint)&&this.maozi.getComponent(cc.WeldJoint).enabled&&(this.maozi.getComponent(cc.WeldJoint).enabled=!1))},gameWin:function(){gl.userinfo.get("isWin")&&(gl.userinfo.shield=0,this.line_left.active=!1,this.line_right.active=!1,this.head.children[4].active=!0,this.dance())},offshield:function(){var t=this;this.node_shield.active=!1,this.shield=0,this.scheduleOnce(function(){t.head.getComponent(cc.RigidBody).fixedRotation=!1,t.upBody.getComponent(cc.RigidBody).fixedRotation=!1,t.foot_left.getComponent(cc.RigidBody).fixedRotation=!1,t.foot_right.getComponent(cc.RigidBody).fixedRotation=!1})},moveArm:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=gl.userinfo.get("guidanceState");this.isTouch=!0,this._velocity=cc.v2(t.x-this.upBody.x,t.y-this.upBody.y),this.miaoZhunNode&&(this.miaoZhunNode.active=!1),this.line_left.active=!1,this.line_right.active=!1;var n=this.arm_left.position.sub(t).mag(),o=this.arm_right.position.sub(t).mag();n>o?(e&&0==i&&(this.handState=1,gl.emitter.emit("event_guidanceStateChange",1)),this.miaoZhunNode=this.head.children[2],this.handBody=this.hand_right.getComponent(cc.RigidBody),this.line_right.active=!0):n<o&&(e&&3==i&&(this.handState=2,gl.emitter.emit("event_guidanceStateChange",2)),this.miaoZhunNode=this.head.children[3],this.handBody=this.hand_left.getComponent(cc.RigidBody),this.line_left.active=!0),this.miaoZhunNode.active=!0},stopArm:function(){this.handState&&(1==this.handState?gl.emitter.emit("event_guidanceStateChange",3):2==this.handState&&gl.emitter.emit("event_guidanceStateChange",4)),this.isTouch=!1,this.handBody=null,this._velocity=null,this.line_left.active=!1,this.line_right.active=!1,this.miaoZhunNode&&(this.miaoZhunNode.active=!1,this.miaoZhunNode=null)},fireBullet:function(t){var e=void 0,i=void 0,n=void 0,o=this.arm_left.position.sub(t).mag(),s=this.arm_right.position.sub(t).mag();o>s?(e=cc.v2(this.hand_right.x,this.hand_right.y),i=this.hand_right.x-this.arm_right.x,n=this.hand_right.y-this.arm_right.y):o<s&&(e=cc.v2(this.hand_left.x,this.hand_left.y),i=this.hand_left.x-this.arm_left.x,n=this.hand_left.y-this.arm_left.y),this.radian=Math.atan2(n,i);var c=Math.cos(this.radian)*this.bulletSpeed,a=Math.sin(this.radian)*this.bulletSpeed;0!==this.shield&&(this.head.getComponent(cc.RigidBody).fixedRotation=!0,this.upBody.getComponent(cc.RigidBody).fixedRotation=!0,this.foot_left.getComponent(cc.RigidBody).fixedRotation=!0,this.foot_right.getComponent(cc.RigidBody).fixedRotation=!0),gl.emitter.emit("event_fireBullet",{pos:e,velocity:cc.v2(c,a)})},dance:function(){var t=this;console.log("\u8df3\u821e"),this.danceTimer=setInterval(function(){t.direction=!t.direction;t.direction?(t.hand_right.getComponent(cc.RigidBody).applyForce(cc.v2(0,200),t.hand_right.position),t.hand_left.getComponent(cc.RigidBody).applyForce(cc.v2(0,-200),t.hand_right.position)):(t.hand_right.getComponent(cc.RigidBody).applyForce(cc.v2(0,-200),t.hand_right.position),t.hand_left.getComponent(cc.RigidBody).applyForce(cc.v2(0,200),t.hand_right.position))},200)},cleanTimeOut:function(){this.danceTimer&&(clearTimeout(this.danceTimer),this.danceTimer=null)},raiseHand:function(){if(this.handBody){var t=Math.atan2(this._velocity.y,this._velocity.x),e=600*Math.cos(t),i=600*Math.sin(t);this.handBody&&this.handBody.applyForceToCenter(cc.v2(e,i))}},Blasting:function(t){var e=this.node.getChildByName("body").getComponent(cc.RigidBody),i=500*(e.node.x-t.pos.x),n=500*(e.node.y-t.pos.y);e&&e.applyForceToCenter(cc.v2(i,n),!0),gl.userinfo.get("isWin")||0==gl.userinfo.shield&&this.unclothe()},unclothe:function(){this.node.getChildByName("body").children[0].active=!1,this.node.getChildByName("leg").children[0].active=!1,this.node.getChildByName("arm_left").children[0].active=!1,this.node.getChildByName("hand_left").children[0].active=!1,this.node.getChildByName("arm_right").children[0].active=!1,this.node.getChildByName("hand_righ").children[0].active=!1,this.node.getChildByName("foot_left").children[0].active=!1,this.node.getChildByName("foot_right").children[0].active=!1,this.maozi.getComponent(cc.WeldJoint)&&this.maozi.getComponent(cc.WeldJoint).enabled&&(this.maozi.getComponent(cc.WeldJoint).enabled=!1)},update:function(t){this.isTouch&&this.raiseHand()},onDestroy:function(){this.cleanTimeOut(),gl.emitter.off("event_gameOver",this),gl.emitter.off("event_gameWin",this),gl.emitter.off("event_offshield",this),gl.emitter.off("event_blasting",this)}}),cc._RF.pop()},{}],sdk:[function(t,e,i){"use strict";cc._RF.push(e,"1d9934HnO1JmoQ7C2jFUwhU","sdk");var n={isShowVideoAd:!1,playTimes:0,showtimes:0,recordStart:!1,recordTime:0,init:function(){},isTT:function(){},isQtt:function(){},exit:function(){SdkProxy.exit()},login:function(){},initAd:function(){},vibrate:function(t){},setLoadingProgress:function(t,e){},uploadScore:function(t,e){e&&e()},getRankList:function(t){t&&t(null)},getChaoyueRank:function(t,e){t&&t(null)},showVideo:function(t){},pauseMusic:function(){cc.audioEngine.pauseMusic()},resumeMusic:function(){cc.audioEngine.resumeMusic()},showBanner:function(){},hideBanner:function(){},showInterstitial:function(){this.showtimes++},share:function(t,e){},recordVideo:function(t,e,i){this.recordTime=0,this.recording=!1},stopRecord:function(){},shareVideo:function(t,e){this.recordStart&&((new Date).getTime()-this.recordTime<3e3?(this.showToast("\u5f55\u5c4f\u65f6\u95f4\u4e0d\u8db33s"),t&&t(!1)):(this.stopRecord(),setTimeout(function(){},200)))},skipGame:function(t,e){},shortcut:function(){},showToast:function(t){},getItem:function(t,e){e(JSON.parse(cc.sys.localStorage.getItem("__game_data")||"{}")[t]||0)},setItem:function(t,e){var i=JSON.parse(cc.sys.localStorage.getItem("__game_data")||"{}");for(var n in t)i[n]=t[n];cc.sys.localStorage.setItem("__game_data",JSON.stringify(i)),null!=e&&e()},switchGameAsync:function(t){},plusPlayTimes:function(){this.playTimes++},hasVideoAd:function(){},setRankScore:function(t,e,i,n){},clearData:function(){}};e.exports=n,cc._RF.pop()},{}],sha1:[function(t,e,i){"use strict";cc._RF.push(e,"8d195JHHOFGM49kpelDcipF","sha1");var n=cc.Class({name:"sha1",hex_sha1:function(t){return this.binb2hex(this.core_sha1(this.str2binb(t),8*t.length))},b64_sha1:function(t){return this.binb2b64(this.core_sha1(this.str2binb(t),8*t.length))},str_sha1:function(t){return this.binb2str(this.core_sha1(this.str2binb(t),8*t.length))},hex_hmac_sha1:function(t,e){return this.binb2hex(this.core_hmac_sha1(t,e))},b64_hmac_sha1:function(t,e){return this.binb2b64(this.core_hmac_sha1(t,e))},str_hmac_sha1:function(t,e){return this.binb2str(this.core_hmac_sha1(t,e))},sha1_vm_test:function(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==this.hex_sha1("abc")},core_sha1:function(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var i=Array(80),n=1732584193,o=-271733879,s=-1732584194,c=271733878,a=-1009589776,r=0;r<t.length;r+=16){for(var l=n,h=o,d=s,u=c,g=a,f=0;f<80;f++){i[f]=f<16?t[r+f]:this.rol(i[f-3]^i[f-8]^i[f-14]^i[f-16],1);var p=this.safe_add(this.safe_add(this.rol(n,5),this.sha1_ft(f,o,s,c)),this.safe_add(this.safe_add(a,i[f]),this.sha1_kt(f)));a=c,c=s,s=this.rol(o,30),o=n,n=p}n=this.safe_add(n,l),o=this.safe_add(o,h),s=this.safe_add(s,d),c=this.safe_add(c,u),a=this.safe_add(a,g)}return Array(n,o,s,c,a)},sha1_ft:function(t,e,i,n){return t<20?e&i|~e&n:t<40?e^i^n:t<60?e&i|e&n|i&n:e^i^n},sha1_kt:function(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514},core_hmac_sha1:function(t,e){var i=this.str2binb(t);i.length>16&&(i=this.core_sha1(i,8*t.length));for(var n=Array(16),o=Array(16),s=0;s<16;s++)n[s]=909522486^i[s],o[s]=1549556828^i[s];var c=this.core_sha1(n.concat(this.str2binb(e)),512+8*e.length);return this.core_sha1(o.concat(c),672)},safe_add:function(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i},rol:function(t,e){return t<<e|t>>>32-e},str2binb:function(t){for(var e=Array(),i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<24-i%32;return e},binb2str:function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>24-i%32&255);return e},binb2hex:function(t){for(var e="0123456789abcdef",i="",n=0;n<4*t.length;n++)i+=e.charAt(t[n>>2]>>8*(3-n%4)+4&15)+e.charAt(t[n>>2]>>8*(3-n%4)&15);return i},binb2b64:function(t){for(var e="",i=0;i<4*t.length;i+=3)for(var n=(t[i>>2]>>8*(3-i%4)&255)<<16|(t[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|t[i+2>>2]>>8*(3-(i+2)%4)&255,o=0;o<4;o++)8*i+6*o>32*t.length?e+="":e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6*(3-o)&63);return e}});e.exports=new n,cc._RF.pop()},{}],start:[function(t,e,i){"use strict";cc._RF.push(e,"84522CbYpZP8bvciPIvLa81","start"),cc.Class({extends:cc.Component,properties:{node_bg:cc.Node,node_role:cc.Node,node_light:cc.Node,node_color:[cc.Node],prefab_selectRole:cc.Prefab,prefab_selectScene:cc.Prefab,prefab_lookRank:cc.Prefab,prefab_notice:cc.Prefab,prefab_light:cc.Prefab,prefab_hintFrame:cc.Prefab,prefab_loading:cc.Prefab,prefab_hourseRace:cc.Prefab,label_stamina:cc.Label,label_staminatime:cc.Label,audio_bg:cc.AudioClip,img_audio:[cc.Node],btn_service:cc.Node,layBox:cc.Node},onLoad:function(){gl.userinfo.enter||(this.addLoading(),gl.levelArr||this.initData()),this.initWnd(),gl.emitter.on("event_nostamina",this.noStamina,this),gl.emitter.on("event_refreshrole",this.refreshRole,this),gl.emitter.on("event_gamesenter",this.gamesenter,this),gl.emitter.on("event_refreshstamina",this.refreshStamina,this),gl.emitter.on("event_showHorseRace",this.initHorseRace,this),this.loadGameScene(),this.initAudio(),gl.userinfo.getSkinList()},initData:function(){if(gl.userinfo.isOrgainMap)cc.loader.load(gl.JDQS_DATA,function(t,e){gl.levelArr=e,gl.userinfo.set("pointCount",e.length-1)});else{gl.readJSON("jdqsData").then(function(t){gl.levelArr=t,gl.userinfo.set("pointCount",t.length-1)})}},initAudio:function(){if(this.audio_open=1===gl.audio.open,gl.audio.playMusic(this.audio_bg),this.img_audio[0].active=this.audio_open,this.img_audio[1].active=!this.audio_open,!gl.userinfo.wechatflag)for(var t in this.node_flag){this.node_flag[t].active=!1}},loadGameScene:function(){var t=this;this.gamecut=!0,new Promise(function(t,e){cc.director.preloadScene("game",function(e,i){if(!e)return t();console.error(e)})}).then(function(){t.gamecut=!0})},initNotice:function(){var t=gl.userinfo.get("bulletin");(console.log("\u516c\u544a\u8be6\u60c5",t),t&&t.content)&&(cc.instantiate(this.prefab_notice).parent=this.node)},initHorseRace:function(){var t=gl.userinfo.get("horseRace");t&&0!=t.length&&(cc.instantiate(this.prefab_hourseRace).parent=this.node)},initWnd:function(){gl.color_index=parseInt(3*Math.random()+0),gl.userinfo.isWeChat||(this.btn_service.active=!1),this.node_bg.color=gl.bottom_color[gl.color_index];for(var t=1;t<=2;t++){this.node_bg.getChildByName("img_ztop"+t).color=gl.light_color[gl.color_index]}this.refreshRole();var e=cc.instantiate(this.prefab_light);for(var i in e.parent=this.node_light,e.scaleX=1.3,e.scaleY=1.05,this.node_color){this.node_color[i].color=gl.button_color[gl.color_index]}this.refreshStamina()},refreshStamina:function(){this.label_stamina.string=""+gl.userinfo.get("stamina")},refreshRole:function(){var t=this,e=gl.userinfo.get("role");cc.loader.loadResDir("/dragon/dragon_role"+(e+1),function(e,i){var n=t.node_role.getComponent(dragonBones.ArmatureDisplay);for(var o in i)i[o]instanceof dragonBones.DragonBonesAsset&&(n.dragonAsset=i[o]),i[o]instanceof dragonBones.DragonBonesAtlasAsset&&(n.dragonAtlasAsset=i[o])})},addLoading:function(){cc.instantiate(this.prefab_loading).parent=this.node},selectScene:function(){cc.instantiate(this.prefab_selectScene).parent=this.node},selectRole:function(){cc.instantiate(this.prefab_selectRole).parent=this.node},sceneEditor:function(){cc.director.loadScene("editor")},addStamina:function(){gl.sdk.showVideo(function(t){t&&gl.userinfo.reqStamina(2,"","")})},lookRank:function(){cc.instantiate(this.prefab_lookRank).parent=this.node},noStamina:function(){cc.instantiate(this.prefab_hintFrame).parent=this.node},gamesenter:function(){this.gamecut?cc.director.loadScene("game"):console.error("cutgame",this.gamecut)},onButton:function(t){switch(t.target.name){case"btn_start":this.selectScene(),gl.sdk.hideBanner();break;case"btn_selectRole":this.selectRole(),gl.sdk.hideBanner();break;case"btn_rank":this.lookRank(),gl.sdk.hideBanner();break;case"btn_stamina":this.addStamina();break;case"btn_service":if(!gl.userinfo.isWeChat)break;break;case"btn_snFight":gl.showTip("\u8fd8\u672a\u5f00\u653e\u656c\u8bf7\u671f\u5f85\uff01");break;case"btn_audio":this.audio_open=!this.audio_open,this.img_audio[0].active=this.audio_open,this.img_audio[1].active=!this.audio_open,gl.audio.setOpen()}gl.audio.clickPlay()},update:function(t){this.label_staminatime&&(this.label_staminatime.string=gl.userinfo.getStaminaTime())},onDestroy:function(){gl.emitter.off("event_refreshrole",this),gl.emitter.off("event_nostamina",this),gl.emitter.off("event_gamesenter",this),gl.emitter.off("event_refreshstamina",this),gl.emitter.off("event_login",this),gl.emitter.off("event_showHorseRace",this),gl.audio.stopMusic()}}),cc._RF.pop()},{}],userinfo:[function(t,e,i){"use strict";cc._RF.push(e,"dc6dd4TGyZO15HofpmBRabl","userinfo");var n=cc.Class({name:"userinfo",properties:{},ctor:function(){this.isWeChat=!1,this.isOrgainMap=!1,this.isDevelop=!0,this.isAndroid=!1,this.enter=!1,this.serverDelay=0,this.wechatflag=1,this.wcappid="",this.tpadunitlist=[],this.guidanceState=5,this.shieldVideoCount=0,this.shieldVideoMax=0,this.userid="",this.usericon="",this.username="",this.sendWechat={},this.bulletin={},this.horseRace=null,this.stamina=10,this.staminaTime=0,this.sharecount=0,this.skinList={},this.totalStar=0,this.starList={},this.starCondition=null,this.pointCount=19,this.checkPoint=0,this.time=0,this.gametime=0,this.role=0,this.blueCount=0,this.sceneSize=cc.winSize,this.sorce=0,this.shootCount=0,this.playerPos=null,this.isWin=null,this.shield=0,this.shieldMax=3,this.rank_type=0,this.rank_page=1,this.pointRank=[],this.friendRank=[],this.ownerRank=[],this.userRank={},this.gasSpeed=600,this.bulletSpeed=1300,this.BODYTAG={BOARD:0,PLAYER:1,GLASS:2,BULEGLASS:3,LIGHT:4,LIGHTCONNECT:5,TV:6,MOS:7,GAS:8,BULEGLASSBIG:9,WALL:10},this.PLAYERTAG={HATS:20},this.intro={0:"\u7cbe\u7075\u738b\u5b50\uff0c\u5c04\u7bad\u6280\u672f\u4e00\u6d41\uff0c\u4f46\u662f\u6253\u624b\u67aa\u66f4\u725b\u903c\u3002",1:"\u68a6\u60f3\u5c04\u672f\u7edd\u9876\uff0c\u63a5\u7740\u62ff\u5230\u4e00\u4e2a\u5c04\u51fb\u7684\u51a0\u519b\u3002",2:"\u4ee5\u524d\u6253\u98de\u673a\u7684\u5c04\u51fb\u5f88\u51c6\uff0c\u73b0\u5728\u559c\u6b22\u5c04\u84dd\u8272\u7684\u74f6\u5b50\u3002",3:"\u4e00\u628a\u5c06\u7535\u8111\u7838\u5728\u8001\u677f\u684c\u4e0a\uff0c\u62ff\u8d77\u62bd\u5c49\u91cc\u7684\u67aa\u8d70\u4e86\u3002",4:"\u68a6\u60f3\u6210\u4e3a\u9976\u820c\u9ad8\u624b\u7684\u4e2d\u5e74\u7537\u5b50\uff0c\u5728\u4e00\u573a\u88ab\u5632\u7b11\u7684\u8868\u6f14\u540e\u4e3e\u8d77\u4e86\u67aa\u3002",5:"\u5c11\u5973\u5fc3\u4e0d\u8db3\u4ee5\u652f\u6491\u81ea\u5df1\u559c\u597d\uff0c\u53ea\u80fd\u7528\u67aa\u634d\u536b\u3002",6:"\u4e0d\u7518\u5bc2\u5bde\u7684\u5b59\u5927\u5723\u4e71\u5165\uff0c\u624b\u6301\u767e\u53d8\u5175\u5668\uff0cbiubiubiu"},this.lockPoint={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},this.starLev={10:{lev1:9999,lev2:9999},30:{lev1:20,lev2:40},50:{lev1:30,lev2:50},70:{lev1:40,lev2:60},100:{lev1:50,lev2:70}}},onLoad:function(){gl.emitter.on("event_servsertime",this.setServerTime,this),this.userInfoGain();var t=parseInt(this.readData(gl.role_key));6!=t&&5!=t&&4!=t&&3!=t&&2!=t&&1!=t&&0!=t||(this.role=t)},initData:function(){this.sorce=0,this.shootCount=0,this.playerPos=null,this.isWin=null},posChnange:function(t){return this.sceneSize=cc.winSize,cc.v2(t.x-this.sceneSize.width/2,t.y-this.sceneSize.height/2)},storageData:function(t,e){cc.sys.localStorage.setItem(t,e)},readData:function(t){return cc.sys.localStorage.getItem(t)},setSkinList:function(t,e){gl.userinfo.skinList[t]=e,this.storageData("skinLIst",JSON.stringify(gl.userinfo.skinList))},getSkinList:function(){var t=this.readData("skinLIst");t?this.skinList=JSON.parse(t):this.setSkinList(0,1)},userInfoGain:function(){var t=this.readData("stamina");t?this.stamina=t:this.setMaxStamina(),this.hadPass()},hadPass:function(){return this.readData("dataKeyLevel")?Number(this.readData("dataKeyLevel")):0},getStrTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gametime,e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=t%60;return(e>9?"":"0")+e+":"+(i>9?"":"0")+i+":"+(n>9?"":"0")+n},getStaminaTime:function(){if(0==this.staminaTime)return"";var t=Math.floor(Date.now()/1e3),e=Math.max(this.staminaTime-t,0),i=Math.floor(e/60),n=e%60;return(i>9?"":"0")+i+":"+(n>9?"":"0")+n},setServerTime:function(t){this.serverDelay=t-Math.floor(Date.now()/1e3)},setStaminaTime:function(t){this.staminaTime=t?t+this.serverDelay+1:0},http_reqGetInitShare:function(){gl.sdk.share()},reqGetVideoRevive:function(){var t=this;gl.sdk.showVideo(function(e){e&&(t.shield=t.shieldMax,t.shieldVideoCount++,t.reqEnterPoint(!0))})},reqEnterPoint:function(t){var e=this.checkPoint+1;for(var i in this.starLev)if(e<=Number(i)){this.starCondition=this.starLev[i];break}this.stamina--,this.storageData("stamina",this.stamina),gl.emitter.emit("event_gamesenter")},reqPointSubmit:function(t,e){this.hadPass()<=t&&this.storageData("dataKeyLevel",t+1)},reqStamina:function(t,e,i){gl.showTip("\u4f53\u529b\u5df2\u6dfb\u52a0"),this.setMaxStamina()},setMaxStamina:function(){this.stamina=10,this.storageData("stamina",this.stamina),gl.emitter.emit("event_refreshstamina")},set:function(t,e){this[t]=e},get:function(t){return this[t]}});e.exports=new n,cc._RF.pop()},{}],wechat:[function(t,e,i){"use strict";cc._RF.push(e,"f9758/YuLlKx4ZcQawc3n2q","wechat");var n=cc.Class({});e.exports=new n,cc._RF.pop()},{}],zh:[function(t,e,i){"use strict";cc._RF.push(e,"87f1fs0gohHDIfNg4aePXbt","zh"),e.exports={remoteResPath:"https://ttl.088.com/wechatgame/gjmjdzz/",shareIconPath:"resources/public/picture/shareIcon.png",publicQRCode:"resources/public/picture/QRCode.png",globalShareTitle:"\u8fd9\u662f\u5c0f\u6e38\u620f\u53f3\u4e0a\u89d2\u7684\u5206\u4eab",loginShareTitle:"\u5c04\u6765\u5c04\u53bb\u5f88\u723d"},cc._RF.pop()},{}]},{},["audio","bulletCtrl","chipCtrl","emitter","LabelLocalized","en","zh","i18n","polyglot","playerCtrl","role","userinfo","wechat","fluid","global","network","sha1","bullet","goods_bottleGas","goods_buleGlass","mos","prefab_adunit","prefab_await","prefab_flaunt","prefab_gudiancePass","prefab_hintFrame","prefab_horseRace","prefab_loading","prefab_lookClubRank","prefab_lookRank","prefab_notice","prefab_nowRole","prefab_openBox","prefab_overMenu","prefab_pauseMenu","prefab_selectRole","prefab_selectScene","prefab_tip","prefab_treasure","prefab_tv","prefab_winPanel","game","start","sdk","conf"]);