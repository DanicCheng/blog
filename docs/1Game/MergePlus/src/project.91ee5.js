window.__require=function e(t,n,o){function r(i,s){if(!n[i]){if(!t[i]){var c=i.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){return r(t[i][1][e]||e)},l,l.exports,e,t,n,o)}return n[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<o.length;i++)r(o[i]);return r}({PetHero_AttackMgr:[function(e,t,n){"use strict";cc._RF.push(t,"d94a8kr8ppPVbuR7o1/Mjgs","PetHero_AttackMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Common/UserDataMgr"),a=e("../Common/PetHero_C"),i=cc._decorator,s=i.ccclass,c=(i.property,function(){function e(){this._nMaxBlood=300}var t;return t=e,Object.defineProperty(e.prototype,"maxBlood",{get:function(){return r.default.Instance.FightMode==a.C.FightMode.OneVsAI||r.default.Instance.FightMode==a.C.FightMode.OneVsOne||r.default.Instance.FightMode==a.C.FightMode.OneVsOnlineAI?99999999:600},enumerable:!0,configurable:!0}),e.prototype.calcDamage=function(e){return console.log("-----\u8ba1\u7b97\u4f24\u5bb3---",3*(e-2)),3*(e-2)},e.prototype.calcComboDamage=function(e){return console.log("-----\u8ba1\u7b97\u8fde\u51fb\u989d\u5916\u4f24\u5bb3---",e-1<0?0:e-1),e-1<0?0:e-1},e.Instance=new t,e=t=o([s],e)}());n.default=c,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/UserDataMgr":"UserDataMgr"}],PetHero_CellItem:[function(e,t,n){"use strict";cc._RF.push(t,"2423d9eHONIeafnlnH1SnfC","PetHero_CellItem");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Tools/PetHero_FYBaseNode"),i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.setSize=function(e){this.node.setContentSize(e)},t.prototype.setPosition=function(e){this.node.setPosition(e)},t.prototype.start=function(){},t=r([s],t)}(a.default));n.default=c,cc._RF.pop()},{"../Tools/PetHero_FYBaseNode":"PetHero_FYBaseNode"}],PetHero_CubeInfo:[function(e,t,n){"use strict";cc._RF.push(t,"14ac89Ig5RHDI6aN2MKWpD9","PetHero_CubeInfo");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./../Common/PetHero_C"),a=cc._decorator,i=a.ccclass,s=(a.property,function(){function e(){this.cubeType=r.C.CubeType.A,this.cubeIndexPos=new cc.Vec2(0,0)}return e=o([i],e)}());n.default=s,cc._RF.pop()},{"./../Common/PetHero_C":"PetHero_C"}],PetHero_CubeItem:[function(e,t,n){"use strict";cc._RF.push(t,"1e62d7QYORE3ZlSmIic/8w1","PetHero_CubeItem");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./../Common/PetHero_C"),i=e("./PetHero_CubeMgr"),s=e("../Tools/PetHero_FYTweenMgr"),c=e("../Tools/PetHero_FYBaseNode"),u=e("../Tools/PetHero_FYResMgr"),l=e("../Tools/PetHero_FYMessenger"),d=e("../Common/UserDataMgr"),f=e("./PetHero_EffectMgr"),p=e("../Tools/PetHero_FYScheduleCtl"),h=e("../Tools/PetHero_FYUtility"),y=cc._decorator,_=y.ccclass,C=y.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteCube=null,t.spriteCubeFace=null,t.spriteCubeFaceAnim=null,t.animSelect=null,t.spriteWater=null,t._oCubeInfo=null,t._selectedAction=null,t._state=a.C.CubeState.Normal,t._checked=!1,t._checkedProp=!1,t._nCubeIndex=0,t._bPlayScaleBigAndSmallTween=!1,t._actionPlayScaleBigAndSmallTween=null,t._cbUpdateSprite=null,t._bPlaySuggestionTween=!1,t._actionPlaySuggestionTween=null,t._efSuggestion=null,t}return o(t,e),t.prototype.setCubeInfo=function(e){this._oCubeInfo=e;var t="cube_";d.default.Instance.InkSwitch&&this._oCubeInfo.cubeType<d.default.Instance.cubeNum&&d.default.Instance.Ink&&(t="cube_ink_"),this.spriteCube.spriteFrame=u.default.Instance.loadSpriteFrame(t+this._oCubeInfo.cubeType),d.default.Instance.InkSwitch||(this.spriteCubeFace.spriteFrame=u.default.Instance.loadSpriteFrame(t+this._oCubeInfo.cubeType+"_face_"+a.C.CubeFaceType.F_1),this.spriteCubeFaceAnim.spriteFrame=u.default.Instance.loadSpriteFrame(t+this._oCubeInfo.cubeType+"_face_"+a.C.CubeFaceType.F_1)),this._oCubeInfo.cubeType!=a.C.CubeType.T_1&&this._oCubeInfo.cubeType!=a.C.CubeType.T_9||this.startCubeSpriteSequenceFrame(),this._oCubeInfo.cubeType>=a.C.CubeType.T_2&&s.default.scaleBigAndSmall(this.node,1,0,!0)},t.prototype.addListener=function(){e.prototype.addListener.call(this),this.node.on(cc.Node.EventType.TOUCH_START,this.onClickNode,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.node.off(cc.Node.EventType.TOUCH_START,this.onClickNode,this)},t.prototype.setCheckedProp=function(e){this._checkedProp=e},t.prototype.getCheckedProp=function(){return this._checkedProp},t.prototype.setChecked=function(e){this._checked=e},t.prototype.getChecked=function(){return this._checked},t.prototype.setSize=function(e){this.node.setScale(1),this.node.setContentSize(e)},t.prototype.getPosition=function(){return this.node.getPosition()},t.prototype.setPosition=function(e){this.node.setPosition(e)},t.prototype.getCubeInfo=function(){return this._oCubeInfo},t.prototype.setCubeState=function(e){this._state=e},t.prototype.getCubeState=function(){return this._state},t.prototype.getLeft=function(e,t,n){void 0===n&&(n=!1);for(var o=new Array,r=e.x-1;r>=0;r--){var s=i.default.Instance.getCubeItem(r,e.y);if(r==this._oCubeInfo.cubeIndexPos.x||null==s||s.getCubeInfo().cubeType!=this._oCubeInfo.cubeType)return o;n?o.push(s):s.getCubeInfo().cubeType<a.C.CubeType.Length&&o.push(s)}return o},t.prototype.getRight=function(e,t,n){void 0===n&&(n=!1);for(var o=new Array,r=e.x+1;r<i.default.Instance.indexSize.height;r++){var s=i.default.Instance.getCubeItem(r,e.y);if(r==this._oCubeInfo.cubeIndexPos.x||null==s||s.getCubeInfo().cubeType!=this._oCubeInfo.cubeType)return o;n?o.push(s):s.getCubeInfo().cubeType<a.C.CubeType.Length&&o.push(s)}return o},t.prototype.getTop=function(e,t,n){void 0===n&&(n=!1);for(var o=new Array,r=e.y+1;r<i.default.Instance.indexSize.height;r++){var s=i.default.Instance.getCubeItem(e.x,r);if(r==this._oCubeInfo.cubeIndexPos.y||null==s||s.getCubeInfo().cubeType!=this._oCubeInfo.cubeType)return o;n?o.push(s):s.getCubeInfo().cubeType<a.C.CubeType.Length&&o.push(s)}return o},t.prototype.getBottom=function(e,t,n){void 0===n&&(n=!1);for(var o=new Array,r=e.y-1;r>=0;r--){var s=i.default.Instance.getCubeItem(e.x,r);if(r==this._oCubeInfo.cubeIndexPos.y||null==s||s.getCubeInfo().cubeType!=this._oCubeInfo.cubeType)return o;n?o.push(s):s.getCubeInfo().cubeType<a.C.CubeType.Length&&o.push(s)}return o},t.prototype.getRow=function(e,t,n){var o=this.getLeft(e,t),r=this.getRight(e,t);return o.length+r.length>1?i.default.Instance.arrayPlus(o,r,n):new Array},t.prototype.getCollumn=function(e,t,n){var o=this.getTop(e,t),r=this.getBottom(e,t);return o.length+r.length>1?i.default.Instance.arrayPlus(o,r,n):new Array},t.prototype.getArrayCount=function(){return i.default.Instance.arrayPlus(this.getRow(this._oCubeInfo.cubeIndexPos,this._oCubeInfo.cubeType,null),this.getCollumn(this._oCubeInfo.cubeIndexPos,this._oCubeInfo.cubeType,null),this).length},t.prototype.getArray=function(){return i.default.Instance.arrayPlus(this.getRow(this._oCubeInfo.cubeIndexPos,this._oCubeInfo.cubeType,null),this.getCollumn(this._oCubeInfo.cubeIndexPos,this._oCubeInfo.cubeType,null),this)},t.prototype.playBackTween=function(){var e=this.indexToPos(this._oCubeInfo.cubeIndexPos),t=this;this._state=a.C.CubeState.Tween,s.default.moveTo(this.node,i.default.Instance.swapTweenTime,e.x,e.y,0,function(){}),p.default.Instance.setScheduleOnce(function(){t._state=a.C.CubeState.Normal},i.default.Instance.swapTweenTime)},t.prototype.playSelectedTween=function(){if(this._oCubeInfo&&this._oCubeInfo.cubeType<a.C.CubeType.Length){this._oCubeInfo.cubeType<a.C.CubeType.Length&&d.default.Instance.Ink&&"cube_ink_",this.animSelect.play("cubeFace")}},t.prototype.showFace=function(e){e&&this._oCubeInfo.cubeType>=d.default.Instance.cubeNum||(this.spriteCubeFace.node.active=e,this.spriteCube.node.active=!e)},t.prototype.showWaterCube=function(){this.spriteWater.node.active=!0,this.spriteWater.node.opacity=0;var e=cc.fadeIn(.5);this.spriteWater.node.runAction(e),cc.log("---------------showWaterCube")},t.prototype.hideWaterCube=function(){this.spriteWater.node.opacity=255;var e=this,t=cc.fadeOut(.5),n=cc.callFunc(function(){e.spriteWater.node.active=!1}),o=cc.sequence(t,n);this.spriteWater.node.runAction(o)},t.prototype.stopSelectedTween=function(){this._oCubeInfo&&this._oCubeInfo.cubeType<a.C.CubeType.Length&&this.animSelect.play("cubeIdle")},t.prototype.indexToPos=function(e){var t=e.x*i.default.Instance.cubeSize.width-d.default.Instance.MaxLength/2+i.default.Instance.cubeSize.width/2,n=e.y*i.default.Instance.cubeSize.height-d.default.Instance.MaxLength/2+i.default.Instance.cubeSize.width/2;return new cc.Vec2(t,n)},t.prototype.destroyCube=function(){i.default.Instance.setCubeItem(this._oCubeInfo.cubeIndexPos.x,this._oCubeInfo.cubeIndexPos.y,null),i.default.Instance.setCubeNode(this._oCubeInfo.cubeIndexPos.x,this._oCubeInfo.cubeIndexPos.y,null),this.reset(),i.default.Instance.putCube(this.node)},t.prototype.reset=function(){s.default.stopAllActions(this.node),this._oCubeInfo.cubeType!=a.C.CubeType.T_1&&this._oCubeInfo.cubeType!=a.C.CubeType.T_9||this.stopCubeSpriteSequenceFrame(),this.spriteWater.node.opacity=255,this.spriteWater.node.active=!1,this.node.scale=1,this.setCheckedProp(!1)},t.prototype.updateSprite=function(){this._nCubeIndex++,this._nCubeIndex=this._nCubeIndex%d.default.Instance.cubeNum,this.spriteCube.spriteFrame=u.default.Instance.loadSpriteFrame("cube_"+this._nCubeIndex)},t.prototype.startCubeSpriteSequenceFrame=function(){var e=this;this._cbUpdateSprite=function(){e.updateSprite()},this.schedule(this._cbUpdateSprite,.1,cc.macro.REPEAT_FOREVER,.1)},t.prototype.stopCubeSpriteSequenceFrame=function(){this.unschedule(this._cbUpdateSprite)},t.prototype.playScaleBigAndSmallTween=function(){this._bPlayScaleBigAndSmallTween&&(this.unschedule(this.stopScaleBigAndSmallTween),this.stopScaleBigAndSmallTween()),this._actionPlayScaleBigAndSmallTween=s.default.scaleBigAndSmall(this.node,1,0,!0),this._bPlayScaleBigAndSmallTween=!0,this.schedule(this.stopScaleBigAndSmallTween,0,0,i.default.Instance.telescopeTime)},t.prototype.stopScaleBigAndSmallTween=function(){this._actionPlayScaleBigAndSmallTween&&this.node&&(s.default.stopAction(this.node,this._actionPlayScaleBigAndSmallTween),this._bPlayScaleBigAndSmallTween=!1,this.node.scale=1,this._actionPlayScaleBigAndSmallTween=null)},t.prototype.playSuggestionTween=function(){this._bPlaySuggestionTween&&this.stopSuggestionTween(),this._bPlaySuggestionTween=!0,this._efSuggestion=f.default.Instance.add(a.C.EffectName.Tips,this.node.getPosition())},t.prototype.stopSuggestionTween=function(){this._efSuggestion&&this.node&&(this._bPlaySuggestionTween=!1,this.node.scale=1,f.default.Instance.remove(this._efSuggestion))},t.prototype.onClickNode=function(){if(d.default.Instance.TouchSwitch)if(this.stopSuggestionTween(),this.setCheckedProp(!0),this._oCubeInfo.cubeType==a.C.CubeType.T_1)this.stopCubeSpriteSequenceFrame(),d.default.Instance.WaitForT1=!0,this.schedule(function(){l.default.Instance.send(a.C.MsgType.DestroySameColorCube,this._nCubeIndex,this._oCubeInfo.cubeIndexPos),d.default.Instance.WaitForT1=!1},0,0,.5);else if(this._oCubeInfo.cubeType==a.C.CubeType.T_6)l.default.Instance.send(a.C.MsgType.UseLightningLine,this._oCubeInfo.cubeIndexPos);else if(this._oCubeInfo.cubeType==a.C.CubeType.T_7)l.default.Instance.send(a.C.MsgType.UseLightningRow,this._oCubeInfo.cubeIndexPos);else if(this._oCubeInfo.cubeType==a.C.CubeType.T_8)l.default.Instance.send(a.C.MsgType.UseBomb,this._oCubeInfo.cubeIndexPos);else if(this._oCubeInfo.cubeType==a.C.CubeType.T_9){var e=h.default.getRandomValueDif(0,4,1);l.default.Instance.send(a.C.MsgType.DestroySameColorCube,e,this._oCubeInfo.cubeIndexPos)}else this._oCubeInfo.cubeType==a.C.CubeType.T_10&&l.default.Instance.send(a.C.MsgType.UseStarCube,this._oCubeInfo.cubeIndexPos)},t.prototype.start=function(){},r([C({type:cc.Sprite,displayName:"\u65b9\u5757\u56fe\u7247"})],t.prototype,"spriteCube",void 0),r([C({type:cc.Sprite,displayName:"\u65b9\u5757\u8868\u60c5"})],t.prototype,"spriteCubeFace",void 0),r([C({type:cc.Sprite,displayName:"\u65b9\u5757\u8868\u60c5\u52a8\u753b"})],t.prototype,"spriteCubeFaceAnim",void 0),r([C({type:cc.Animation,displayName:"\u9009\u4e2d\u52a8\u753b"})],t.prototype,"animSelect",void 0),r([C({type:cc.Sprite,displayName:"\u6c34"})],t.prototype,"spriteWater",void 0),t=r([_],t)}(c.default);n.default=b,cc._RF.pop()},{"../Common/UserDataMgr":"UserDataMgr","../Tools/PetHero_FYBaseNode":"PetHero_FYBaseNode","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYScheduleCtl":"PetHero_FYScheduleCtl","../Tools/PetHero_FYTweenMgr":"PetHero_FYTweenMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility","./../Common/PetHero_C":"PetHero_C","./PetHero_CubeMgr":"PetHero_CubeMgr","./PetHero_EffectMgr":"PetHero_EffectMgr"}],PetHero_CubeMgr:[function(e,t,n){"use strict";cc._RF.push(t,"afbf0CjvnlEo6NzNIJesKUK","PetHero_CubeMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./PetHero_CubeItem"),a=e("../Tools/PetHero_FYUtility"),i=e("../Common/PetHero_C"),s=e("../Tools/PetHero_FYTweenMgr"),c=e("./PetHero_AttackMgr"),u=e("../Tools/PetHero_FYMessenger"),l=e("../Common/UserDataMgr"),d=e("../Tools/PetHero_FYResMgr"),f=e("./PetHero_EffectMgr"),p=e("../Tools/PetHero_FYScheduleCtl"),h=e("../Tools/PetHero_FYAudioCtl"),y=e("./PetHero_TextMgr"),_=e("./PetHero_CubeInfo"),C=cc._decorator,b=C.ccclass,g=(C.property,function(){function e(){this.redHeartRestoreBlood=80,this.inkTime=15,this.telescopeTime=5,this.indexSize=cc.Size.ZERO,this.cubeSize=cc.Size.ZERO,this.dropTweenTime=.1,this.swapTweenTime=.2,this._cubePool=null,this._arrayCubeItem=[[]],this._arrayCubeNode=[[]],this._nodeCubeCtl=null,this._nodeCube=null,this._nodeCrushTailPoint=null,this._nodeCrushTailContainer=null,this._tipsCubeItem1=null,this._tipsCubeItem2=null,this._bIsNoMove=!1,this._nSwapNum=0,this._nTotalDamage=0,this._bMoveCrush=!1,this._nLianji=0,this._bPlayWin=!1}var t;return t=e,e.prototype.reset=function(){for(var e in this._cubePool.clear(),this._arrayCubeItem=[],this._arrayCubeNode)if(this._arrayCubeNode[e])for(var t in this._arrayCubeNode[e])if(this._arrayCubeNode[e][t]){var n=cc.loader.getDependsRecursively(this._arrayCubeNode[e][t]);cc.loader.release(n),this._arrayCubeNode[e][t].destroy()}this._arrayCubeNode=[],this._nodeCubeCtl=null,this._nodeCube=null,this._nodeCrushTailPoint=null,this._nodeCrushTailContainer=null,this._tipsCubeItem1=null,this._tipsCubeItem2=null},e.prototype.clearData=function(){this.reset()},e.prototype.init=function(e,t,n,o,r){this._nodeCrushTailPoint=e,this._nodeCrushTailContainer=t,this._nodeCubeCtl=n,this._nodeCube=o,this.indexSize=r},e.prototype.preLoad=function(){if(this._cubePool=new cc.NodePool,console.log("===============\u521b\u5efa\u5bf9\u8c61\u6c60"),0==this._cubePool.size())for(var e=0;e<this.indexSize.width;e++)for(var t=0;t<this.indexSize.height;t++){var n=a.default.addChild(this._nodeCubeCtl,this._nodeCube),o=new _.default;o.cubeIndexPos=new cc.Vec2(e,t),o.cubeType=this.generateCubeType(),n.getComponent(r.default).setCubeInfo(o),this.putCube(n)}},e.prototype.generateCubeType=function(){if(a.default.getRangeRandom(1,100)<=0){var e=a.default.getRangeRandom(1,5);return e in l.default.Instance.lietCanUseProp?e+i.C.CubeType.Length+1:a.default.getRangeRandom(0,l.default.Instance.cubeNum-1)}return a.default.getRangeRandom(0,l.default.Instance.cubeNum-1)},e.prototype.putCube=function(e){this._cubePool.put(e)},e.prototype.getCube=function(){if(this._cubePool){var e=this._cubePool.get();return e.getComponent(r.default).reset(),e}},e.prototype.create=function(){cc.director.getWinSize();this.cubeSize=new cc.Size(l.default.Instance.MaxLength/this.indexSize.width,l.default.Instance.MaxLength/this.indexSize.height);for(var e=[this.indexSize.width*this.indexSize.height,0,Date.now()],n=0;n<this.indexSize.width;n++)for(var o=function(o){a._arrayCubeItem[n]||(a._arrayCubeItem[n]=[],a._arrayCubeNode[n]=[]);var c=a.getCube();c.parent=a._nodeCubeCtl;var u=c.getComponent(r.default);u.setSize(a.cubeSize);var d=new cc.Vec2(n*a.cubeSize.width-l.default.Instance.MaxLength/2+a.cubeSize.width/2,o*a.cubeSize.height+l.default.Instance.MaxLength/2+a.cubeSize.height/2+60);u.setPosition(d);var f=new _.default;f.cubeIndexPos=new cc.Vec2(n,o),f.cubeType=a.generateCubeType(),u.setCubeInfo(f),a._arrayCubeItem[n].push(u),a._arrayCubeNode[n].push(c),u.setCubeState(i.C.CubeState.Tween),s.default.moveBy(c,t.Instance.dropTweenTime/2*a.indexSize.height,0,-l.default.Instance.MaxLength-60,.5,function(){}),p.default.Instance.setScheduleOnce(function(){u.setCubeState(i.C.CubeState.Normal),t.Instance.ruleCheckerOneEx(u.node,e,function(){t.Instance.crushFinish()})},t.Instance.dropTweenTime/2*a.indexSize.height+.7)},a=this,c=0;c<this.indexSize.height;c++)o(c);this.isNoMove()&&this.reCreate()},e.prototype.reCreate=function(){for(var e=0;e<this.indexSize.width;e++)for(var n=0;n<this.indexSize.height;n++)this._arrayCubeItem[e][n]&&this._arrayCubeItem[e][n].destroyCube();for(e=0;e<this.indexSize.width;e++)for(n=0;n<this.indexSize.height;n++)this._arrayCubeItem[e][n]=null,this._arrayCubeNode[e][n]=null;var o=[this.indexSize.width*this.indexSize.height,0,Date.now()];for(e=0;e<this.indexSize.width;e++){var a=function(n){c._arrayCubeItem[e]||(c._arrayCubeItem[e]=[],c._arrayCubeNode[e]=[]);var a=c.getCube();a.parent=c._nodeCubeCtl;var u=a.getComponent(r.default);u.setSize(c.cubeSize);var d=new cc.Vec2(e*c.cubeSize.width-l.default.Instance.MaxLength/2+c.cubeSize.width/2,n*c.cubeSize.height+l.default.Instance.MaxLength/2+c.cubeSize.height/2);u.setPosition(d);var f=new _.default;f.cubeIndexPos=new cc.Vec2(e,n),f.cubeType=c.generateCubeType(),u.setCubeInfo(f),c.setCubeItem(e,n,u),c.setCubeNode(e,n,a),u.setCubeState(i.C.CubeState.Tween),u.showFace(!1),s.default.moveBy(a,t.Instance.dropTweenTime/2*c.indexSize.height,0,-l.default.Instance.MaxLength,.5,function(){}),p.default.Instance.setScheduleOnce(function(){u.setCubeState(i.C.CubeState.Normal),t.Instance.ruleCheckerOneEx(u.node,o,function(){t.Instance.crushFinish()})},t.Instance.dropTweenTime/2*c.indexSize.height+.7)},c=this;for(n=0;n<this.indexSize.height;n++)a(n)}},e.prototype.createOneCube=function(e){var t=this.getCube();t.parent=this._nodeCubeCtl,t.active=!0;var n=t.getComponent(r.default);n.setSize(this.cubeSize),n.setPosition(new cc.Vec2(e.x*this.cubeSize.width-l.default.Instance.MaxLength/2+this.cubeSize.width/2,e.y*this.cubeSize.height-l.default.Instance.MaxLength/2+this.cubeSize.height/2));var o=new _.default;o.cubeIndexPos=e,o.cubeType=this.generateCubeType(),n.setCubeInfo(o),n.showFace(!1),this._arrayCubeItem[e.x][e.y]=n,this._arrayCubeNode[e.x][e.y]=t},e.prototype.playAllCubeDownTween=function(e){for(var n=0;n<this._arrayCubeItem.length;n++)for(var o=0;o<this._arrayCubeItem[n].length;o++){var r=this._arrayCubeItem[n][o];null!=r&&(r.showFace(!0),r.setCubeState(i.C.CubeState.Tween))}var a=function(n){for(var o=function(o){var r=c._arrayCubeItem[n][o];if(null==r)return"continue";var a=r.node;s.default.moveBy(a,t.Instance.dropTweenTime/2*c.indexSize.height,0,-l.default.Instance.MaxLength-60,.5,function(){}),p.default.Instance.setScheduleOnce(function(){r.setCubeState(i.C.CubeState.Normal),0==n&&0==o&&e&&e()},t.Instance.dropTweenTime/2*c.indexSize.height+l.default.Instance.CrushCheckDelay)},r=0;r<c._arrayCubeItem[n].length;r++)o(r)},c=this;for(n=0;n<this._arrayCubeItem.length;n++)a(n)},e.prototype.checkAnyCubeIsTween=function(){for(var e in this._arrayCubeItem)for(var t in this._arrayCubeItem[e]){var n=this._arrayCubeItem[e][t];if(n&&n.getCubeState()==i.C.CubeState.Tween)return!0}return!1},e.prototype.getCubeItem=function(e,t){return this._arrayCubeItem[e]?this._arrayCubeItem[e][t]:null},e.prototype.setCubeItem=function(e,t,n){this._arrayCubeItem[e]&&(this._arrayCubeItem[e][t]=n)},e.prototype.getCubeNode=function(e,t){return this._arrayCubeNode[e]?this._arrayCubeNode[e][t]:null},e.prototype.setCubeNode=function(e,t,n){this._arrayCubeNode[e]&&(this._arrayCubeNode[e][t]=n)},e.prototype.arrayPlus=function(e,t,n){var o=new Array;n&&o.push(n);for(var r=0;r<e.length;r++)o.push(e[r]);for(r=0;r<t.length;r++)o.push(t[r]);return o},e.prototype.swapCubePos=function(e,n){var o=e.getComponent(r.default),a=n.getComponent(r.default),i=(o.getCubeInfo().cubeIndexPos,a.getCubeInfo().cubeIndexPos,o.getCubeInfo().cubeIndexPos);o.getCubeInfo().cubeIndexPos=a.getCubeInfo().cubeIndexPos,a.getCubeInfo().cubeIndexPos=i;var s=o.getCubeInfo().cubeIndexPos,c=a.getCubeInfo().cubeIndexPos,u=e;t.Instance.setCubeNode(c.x,c.y,n),t.Instance.setCubeNode(s.x,s.y,u);var l=o;t.Instance.setCubeItem(c.x,c.y,a),t.Instance.setCubeItem(s.x,s.y,l)},e.prototype.distanceChecker=function(e,t){var n=e.getCubeInfo().cubeIndexPos,o=t.getCubeInfo().cubeIndexPos;return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))<=1},e.prototype.ruleChecker=function(e,n,o){void 0===o&&(o=null);var a=e.getComponent(r.default),i=n.getComponent(r.default),s=t.Instance.arrayPlus(a.getCollumn(i.getCubeInfo().cubeIndexPos,a.getCubeInfo().cubeType,null),a.getRow(i.getCubeInfo().cubeIndexPos,a.getCubeInfo().cubeType,null),a),c=t.Instance.arrayPlus(i.getCollumn(a.getCubeInfo().cubeIndexPos,i.getCubeInfo().cubeType,null),i.getRow(a.getCubeInfo().cubeIndexPos,i.getCubeInfo().cubeType,null),i);s.length>=3||c.length>=3?(t.Instance.swapCubePos(e,n),this.cubeProcess(s,c,e,n,o)):(a.playBackTween(),i.playBackTween())},e.prototype.ruleCheckerOneEx=function(e,t,n){void 0===n&&(n=null);var o=e.getComponent(r.default),a=o.getArray();if(a.length>=3){this.arrayProcess(a,function(){t[1]++,t[1]==t[0]&&n&&n()}),o.setChecked(!0)}else t[1]++,t[1]==t[0]&&n&&n()},e.prototype.arrayProcess=function(e,n){void 0===n&&(n=null);for(var o=0,r=0,a=0;a<e.length;a++){var i=0;r<(i=e[a].getChecked()?e.length:e[a].getArrayCount())&&(r=i,o=a)}t.Instance.cubeProcessOne(e[o].getArray(),e[o].node,n)},e.prototype.cubeProcess=function(e,t,n,o,a){void 0===a&&(a=null),this._bMoveCrush=!0;var i=e.length,s=t.length;i>2&&(0==this._nSwapNum&&i>=4&&y.default.Instance.playEvaluateAnimByCount(i),this.cubeArrayProcess(e,o,n,n.getComponent(r.default).getCubeInfo().cubeType,a)),s>2&&(0==this._nSwapNum&&s>=4&&y.default.Instance.playEvaluateAnimByCount(s),this.cubeArrayProcess(t,n,o,o.getComponent(r.default).getCubeInfo().cubeType,a))},e.prototype.cubeProcessOne=function(e,t,n){void 0===n&&(n=null),e.length>2?this.cubeArrayProcess(e,t,null,t.getComponent(r.default).getCubeInfo().cubeType,n):n&&n()},e.prototype.checkCubeType=function(e){if(e&&e.isValid){var t=e.getCubeInfo(),n=t.cubeType,o=t.cubeIndexPos,r=[];if(n==i.C.CubeType.T_8)for(var s=o.x-1;s<=o.x+1;s++)for(var c=o.y-1;c<=o.y+1;c++)this._arrayCubeItem[s]&&this._arrayCubeItem[s][c]&&r.push(this._arrayCubeItem[s][c]);else if(n==i.C.CubeType.T_10){for(s=-2;s<=2;s++)for(c=-2;c<=2;c++)if(Math.abs(s)+Math.abs(c)<=2){var u=t.cubeIndexPos.x+s,l=t.cubeIndexPos.y+c;this._arrayCubeItem[u]&&this._arrayCubeItem[u][l]&&r.push(this._arrayCubeItem[u][l])}}else if(n==i.C.CubeType.T_9)for(var d=a.default.getRangeRandom(0,3),f=0;f<this._arrayCubeItem.length;f++)for(var p=0;p<this._arrayCubeItem[f].length;p++)this._arrayCubeItem[f][p]&&this._arrayCubeItem[f][p].getCubeInfo().cubeType==d&&r.push(this._arrayCubeItem[f][p]);else if(n==i.C.CubeType.T_7){for(f=0;f<this.indexSize.height;f++)if(this._arrayCubeItem[t.cubeIndexPos.x]&&this._arrayCubeItem[t.cubeIndexPos.x][f]){var h=this._arrayCubeItem[t.cubeIndexPos.x][f];r.push(h)}}else if(n==i.C.CubeType.T_6){for(f=0;f<this.indexSize.width;f++)if(this._arrayCubeItem[f]&&this._arrayCubeItem[f][t.cubeIndexPos.y]){h=this._arrayCubeItem[f][t.cubeIndexPos.y];r.push(h)}}else if(n==i.C.CubeType.T_1)for(d=e._nCubeIndex,f=0;f<this._arrayCubeItem.length;f++)for(p=0;p<this._arrayCubeItem[f].length;p++)this._arrayCubeItem[f][p]&&this._arrayCubeItem[f][p].getCubeInfo().cubeType==d&&r.push(this._arrayCubeItem[f][p]);return r}},e.prototype.achievePropCube=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);for(var n=0;n<e.length;n++){for(var o=e[n],r=!1,a=0;a<t.length;a++)if(o==t[a]){r=!0;break}if(!r){var i=this.checkCubeType(o);e=e.concat(i),t.push(o)}}return e},e.prototype.destroyNinePlaceCube=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),e&&e.isValid){for(var o=e.getCubeInfo().cubeIndexPos,r=[],a=o.x-1;a<=o.x+1;a++)for(var i=o.y-1;i<=o.y+1;i++)this._arrayCubeItem[a]&&this._arrayCubeItem[a][i]&&r.push(this._arrayCubeItem[a][i]);r=this.achievePropCube(r,[e]),this.cubeArrayProcess(r,null,null,null,t,n)}},e.prototype.destroyStarCube=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),e&&e.isValid){for(var o=e.getCubeInfo(),r=[],a=-2;a<=2;a++)for(var i=-2;i<=2;i++)if(Math.abs(a)+Math.abs(i)<=2){var s=o.cubeIndexPos.x+a,c=o.cubeIndexPos.y+i;this._arrayCubeItem[s]&&this._arrayCubeItem[s][c]&&r.push(this._arrayCubeItem[s][c])}r=this.achievePropCube(r,[e]),this.cubeArrayProcess(r,null,null,null,t,n)}},e.prototype.destroyOneRowCube=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),e&&e.isValid){for(var o=e.getCubeInfo(),r=[],a=0;a<this.indexSize.height;a++)if(this._arrayCubeItem[o.cubeIndexPos.x]&&this._arrayCubeItem[o.cubeIndexPos.x][a]){var i=this._arrayCubeItem[o.cubeIndexPos.x][a];r.push(i)}r=this.achievePropCube(r,[e]),this.cubeArrayProcess(r,null,null,null,t,n)}},e.prototype.destroyOneLineCube=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),e&&e.isValid){for(var o=e.getCubeInfo(),r=[],a=0;a<this.indexSize.width;a++)if(this._arrayCubeItem[a]&&this._arrayCubeItem[a][o.cubeIndexPos.y]){var i=this._arrayCubeItem[a][o.cubeIndexPos.y];r.push(i)}r=this.achievePropCube(r,[e]),this.cubeArrayProcess(r,null,null,null,t,n)}},e.prototype.destroySameColorCube=function(e,t,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!0),t&&t.isValid){for(var r=[],a=0;a<this._arrayCubeItem.length;a++)for(var i=0;i<this._arrayCubeItem[a].length;i++)this._arrayCubeItem[a][i]&&this._arrayCubeItem[a][i].getCubeInfo().cubeType==e&&r.push(this._arrayCubeItem[a][i]);r=this.achievePropCube(r,[t]),this.cubeArrayProcess(r,null,null,e,n,o),this.destroyOneCube(t)}},e.prototype.destroyOneCube=function(e,n){void 0===n&&(n=null),null==n&&(n=function(){t.Instance.crushFinish()}),e&&e.isValid&&this.cubeArrayProcess([e],null,null,e.getCubeInfo().cubeType,n)},e.prototype.checkArrayItemProp=function(e){for(var t=[],n={},o=0;o<e.length;o++){n[(r=e[o].getCubeInfo()).cubeIndexPos.x+","+r.cubeIndexPos.y]=1}for(o=0;o<e.length;o++){for(var r,a=0,s=0,c=0,u=0,l=(r=e[o].getCubeInfo()).cubeIndexPos.x-1;l>=0;l--)n[l+","+r.cubeIndexPos.y]&&(a+=1);for(l=r.cubeIndexPos.x+1;l<this.indexSize.width;l++)n[l+","+r.cubeIndexPos.y]&&(s+=1);for(var d=r.cubeIndexPos.y-1;d>=0;d--)n[r.cubeIndexPos.x+","+d]&&(u+=1);for(d=r.cubeIndexPos.y+1;d<this.indexSize.height;d++)n[r.cubeIndexPos.x+","+d]&&(c+=1);if((a*s*u!=0||a*s*c!=0||s*u*c!=0||a*u*c!=0)&&(a+s>2||a+u>2||a+c>2||s+u>2||s+c>2)){t.push([i.C.CubeType.T_10,r.cubeIndexPos]);break}a*u==0&&a*c==0&&s*u==0&&s*c==0||(a+u>2||a+c>2||s+u>2||s+c>2)&&t.push([i.C.CubeType.T_8,r.cubeIndexPos]),(a+s>=4||u+c>=4)&&t.push([i.C.CubeType.T_1,r.cubeIndexPos]),a+s>=3&&t.push([i.C.CubeType.T_6,r.cubeIndexPos]),u+c>=3&&t.push([i.C.CubeType.T_7,r.cubeIndexPos])}return t},e.prototype.creatPropCube=function(e){for(var n=t.Instance.checkArrayItemProp(e),o=[],r=0;r<n.length;r++)0==o.length&&o.push(n[r]),n[r][0]>o[0]&&(o=n[r]);if(0!=o.length){t.Instance.createOneCube(o[0][1]);var a=t.Instance.getCubeItem(o[0][1].x,o[0][1].y);a.getCubeInfo().cubeType=o[0][0],a.setCubeInfo(a.getCubeInfo())}},e.prototype.cubeArrayProcess=function(e,n,o,r,a,d){var _=this;void 0===a&&(a=null),void 0===d&&(d=!1),a=function(){u.default.Instance.send(i.C.MsgType.RefreshScore,_._nTotalDamage),a&&a()},this.stopSuggestionTween();for(var C=[],b=e.length-1;b>=0;b--){e[b];for(var g=0;g<C.length;g++)if(e[b]==C[g]){e.splice(b,1);break}C.push(e[b])}var m=!1,I=!1,P=null;for(g=0;g<e.length;g++)if(e[g]){P=e[g];break}if(P){if(d){P.getCubeInfo().cubeType>=i.C.CubeType.Length&&(I=!0),this._nLianji++;var T=e.length;if(this._nTotalDamage+=T,l.default.Instance.GameMode==i.C.GameMode.OneRoundInstantMode){var S=i.C.EvaluateType.Nice;2==this._nLianji?S=i.C.EvaluateType.Nice:3==this._nLianji?S=i.C.EvaluateType.Cool:4==this._nLianji?S=i.C.EvaluateType.Perfect:this._nLianji>4&&(S=i.C.EvaluateType.Wonderful),this._nLianji>1&&(y.default.Instance.playEvaluateAnim(S),this._bPlayWin||(this._bPlayWin=!0));var v=(T-(O=T%e.length))/e.length;for(b=0;b<e.length;b++){var F=0==b?v+O:v;y.default.Instance.playGetScore(F,e[b].getPosition())}}}else if(P.getCubeInfo().cubeType<i.C.CubeType.Length){this._nLianji++;T=c.default.Instance.calcDamage(e.length)+c.default.Instance.calcComboDamage(this._nLianji);if(l.default.Instance.DoubleAttackSwitch&&P.getCubeInfo().cubeType==l.default.Instance.DoubleAttackCubeType&&(m=!0),this._nTotalDamage+=T,l.default.Instance.GameMode==i.C.GameMode.OneRoundInstantMode){var M=i.C.EvaluateType.Nice;2==this._nLianji?M=i.C.EvaluateType.Nice:3==this._nLianji?M=i.C.EvaluateType.Cool:4==this._nLianji?M=i.C.EvaluateType.Perfect:this._nLianji>4&&(M=i.C.EvaluateType.Wonderful),this._nLianji>1&&(y.default.Instance.playEvaluateAnim(M),this._bPlayWin||(this._bPlayWin=!0));var O;for(v=(T-(O=T%e.length))/e.length,b=0;b<e.length;b++){F=0==b?v+O:v;y.default.Instance.playGetScore(F,e[b].getPosition())}}}else I=!0;for(g=0;g<e.length;g++){var R=e[g];R&&(s.default.stopAllActions(R.node),this._tipsCubeItem1&&this._tipsCubeItem1.getCubeInfo().cubeIndexPos==R.getCubeInfo().cubeIndexPos&&(this._tipsCubeItem1=null),this._tipsCubeItem2&&this._tipsCubeItem2.getCubeInfo().cubeIndexPos==R.getCubeInfo().cubeIndexPos&&(this._tipsCubeItem2=null),I||this.playCrushTailEffect(R.node.convertToWorldSpaceAR(new cc.Vec2(-cc.winSize.width/2,-cc.winSize.height/2))),m?f.default.Instance.playEffect(i.C.EffectName.fxClean03,R.node.position,1):this._bMoveCrush||I?f.default.Instance.playEffect(i.C.EffectName.fxClean,R.node.position,1):f.default.Instance.playEffect(i.C.EffectName.fxClean02,R.node.position,1),R.destroyCube())}e.length>0&&h.default.Instance.playSound(i.C.SoundType.Crush),this._bMoveCrush&&(this._bMoveCrush=!1),d||this.creatPropCube(e),l.default.Instance.WaitForEffect=!0;var w=[2,0,Date.now()];p.default.Instance.setScheduleOnce(function(){t.Instance.drop(w,a),t.Instance.spawn(w,a),l.default.Instance.WaitForEffect=!1},l.default.Instance.DropWaitTime)}else a&&a()},e.prototype.drop=function(e,n){void 0===e&&(e=[0,0]),void 0===n&&(n=null);for(var o=[],r=[this.indexSize.width*this.indexSize.height,0,Date.now()],a=function(){e[0]>0&&e[1]++,e[1]==e[0]&&n&&n()},c=0;c<this.indexSize.width;c++)for(var u=function(e){if(null!=t.Instance.getCubeItem(e,c)){for(var n=t.Instance.getCubeItem(e,c),u=n.getCubeInfo().cubeIndexPos.y,d=n.getCubeInfo().cubeIndexPos.x,f=n.getCubeInfo().cubeIndexPos.y,h=u-1;h>=0&&null==t.Instance.getCubeNode(d,h);h--)u=h;if(f!=u){o.push(n),t.Instance.setCubeItem(d,f,null),t.Instance.setCubeNode(d,f,null),n.getCubeInfo().cubeIndexPos=new cc.Vec2(d,u),t.Instance.setCubeItem(d,u,n),t.Instance.setCubeNode(d,u,n.node),n.setCubeState(i.C.CubeState.Tween);var y=n,_=n.indexToPos(new cc.Vec2(d,u));n.getCubeInfo().cubeType<=i.C.CubeType.T_0&&s.default.stopAllActions(n.node),n.node.setPosition(n.indexToPos(new cc.Vec2(d,f))),s.default.moveTo(n.node,(f-u)*t.Instance.dropTweenTime,_.x,_.y,0,function(){n.node.position.y!=_.y&&n.node.setPosition(_),l.default.Instance.GameMode==i.C.GameMode.OneRoundInstantMode&&(y.animSelect.play("cubeIdle"),y.animSelect.play("cubeDrop"),p.default.Instance.setScheduleOnce(function(){y.animSelect.play("cubeIdle")},.43))}),p.default.Instance.setScheduleOnce(function(){y.setCubeState(i.C.CubeState.Normal),t.Instance.ruleCheckerOneEx(y.node,r,a)},(f-u)*t.Instance.dropTweenTime+l.default.Instance.CrushCheckDelay)}else r[1]++,r[1]==r[0]&&a&&a()}else r[1]++,r[1]==r[0]&&a&&a()},d=0;d<this.indexSize.height;d++)u(d)},e.prototype.spawn=function(e,n){void 0===e&&(e=[0,0]),void 0===n&&(n=null),this._nSwapNum++;for(var o=[],a=0;a<this.indexSize.width;a++)o[a]=0;var c=[[]],u=[[]];for(a=0;a<this.indexSize.width;a++)for(var d=0;d<this.indexSize.height;d++)if(null==t.Instance.getCubeNode(a,d)){t.Instance.createOneCube(new cc.Vec2(a,d));var f=t.Instance.getCubeNode(a,d),h=f.y,y=f.x;f.setPosition(f.x,l.default.Instance.MaxLength/2+t.Instance.cubeSize.height/2+o[a]*t.Instance.cubeSize.height),c[a]||(c[a]=[]),c[a].push(f),u[a]||(u[a]=[]),u[a].push(new cc.Vec2(y,h)),o[a]++}var _=[0,0,Date.now()],C=function(){e[0]>0&&e[1]++,e[1]==e[0]&&n&&n()};for(a=0;a<this.indexSize.width;a++){var b=function(e){_[0]++;var n=c[a][e].getComponent(r.default);n.setCubeState(i.C.CubeState.Tween);var d=g;s.default.moveTo(c[a][e],o[a]*g.dropTweenTime,u[a][e].x,u[a][e].y,0,function(){l.default.Instance.GameMode==i.C.GameMode.OneRoundInstantMode&&(n.animSelect.play("cubeIdle"),n.animSelect.play("cubeDrop"),p.default.Instance.setScheduleOnce(function(){n.animSelect.play("cubeIdle")},.43))}),p.default.Instance.setScheduleOnce(function(){n.setCubeState(i.C.CubeState.Normal),t.Instance.ruleCheckerOneEx(n.node,_,C),d.isNoMove()&&d.reCreate()},o[a]*g.dropTweenTime+l.default.Instance.CrushCheckDelay)},g=this;for(d=0;c[a]&&d<c[a].length;d++)b(d)}0==_[0]&&C()},e.prototype.crushFinish=function(){this._nSwapNum,u.default.Instance.send(i.C.MsgType.AttackEnemy,this._nTotalDamage),this._nLianji=0,this._nSwapNum=0,this._nTotalDamage=0,this._bPlayWin&&(this._bPlayWin=!1),this.stopSuggestionTween()},e.prototype.isNoMove=function(){this.stopSuggestionTween();for(var e=0;e<this.indexSize.width;e++)for(var t=0;t<this.indexSize.height;t++)if(null!=this._arrayCubeItem[e][t]){var n=this._arrayCubeItem[e][t];if(n.getCubeInfo().cubeType>i.C.CubeType.Length)return this._bIsNoMove=!1,!1;var o=this.moveChecker(e,t,n);if(null!=o)return this._tipsCubeItem1=n,this._tipsCubeItem2=o,this._bIsNoMove=!1,!1}return this._bIsNoMove=!0,!0},e.prototype.moveChecker=function(e,t,n){for(var o=this.getArrayIndexPos(e,t),r=0;r<o.length;r++){var a=o[r];if(this.arrayPlus(n.getCollumn(a,n.getCubeInfo().cubeType,null),n.getRow(a,n.getCubeInfo().cubeType,null),n).length>=3)return this._arrayCubeItem[a.x][a.y]}return null},e.prototype.getArrayIndexPos=function(e,t){var n=[];return t+1<this.indexSize.height&&null!=this._arrayCubeNode[e][t+1]&&n.push(new cc.Vec2(e,t+1)),t-1>=0&&null!=this._arrayCubeNode[e][t-1]&&n.push(new cc.Vec2(e,t-1)),e+1<this.indexSize.width&&null!=this._arrayCubeNode[e+1][t]&&n.push(new cc.Vec2(e+1,t)),e-1>=0&&null!=this._arrayCubeNode[e-1][t]&&n.push(new cc.Vec2(e-1,t)),n},e.prototype.randomCubeAddWater=function(){for(var e=a.default.getRandomValueDif(0,63,21),t=0;t<e.length;t++){var n=e[t],o=Math.floor(n%l.default.Instance.col),r=Math.floor(n/l.default.Instance.col);this._arrayCubeItem[r][o]&&this._arrayCubeItem[r][o].showWaterCube()}},e.prototype.changeAllCubeToInkColor=function(){for(var e=0;e<this._arrayCubeItem.length;e++)for(var t=0;t<this._arrayCubeItem[e].length;t++)this._arrayCubeItem[e][t]&&(l.default.Instance.InkSwitch?this._arrayCubeItem[e][t].spriteCube.spriteFrame=d.default.Instance.loadSpriteFrame("cube_ink_"+this._arrayCubeItem[e][t].getCubeInfo().cubeType):this._arrayCubeItem[e][t].showWaterCube())},e.prototype.changeAllCubeToTypeColor=function(){for(var e=0;e<this._arrayCubeItem.length;e++)for(var t=0;t<this._arrayCubeItem[e].length;t++)this._arrayCubeItem[e][t]&&(l.default.Instance.InkSwitch?this._arrayCubeItem[e][t].spriteCube.spriteFrame=d.default.Instance.loadSpriteFrame("cube_"+this._arrayCubeItem[e][t].getCubeInfo().cubeType):this._arrayCubeItem[e][t].hideWaterCube())},e.prototype.getAllCanProcessCube=function(){for(var e=[],t={},n=0;n<this._arrayCubeItem.length;n++)for(var o=0;o<this._arrayCubeItem[n].length;o++){var r=this._arrayCubeItem[n][o];if(null!=r)for(var a=this.getArrayIndexPos(r.getCubeInfo().cubeIndexPos.x,r.getCubeInfo().cubeIndexPos.y),i=0;i<a.length;i++){var s=a[i],c=this.arrayPlus(r.getCollumn(s,r.getCubeInfo().cubeType,null),r.getRow(s,r.getCubeInfo().cubeType,null),r);if(c.length>=3)for(var u=0;u<c.length;u++){var l=c[u].getCubeInfo().cubeIndexPos.x.toString()+c[u].getCubeInfo().cubeIndexPos.y.toString();t[l]||(t[l]=c[u],e.push(c[u]))}}}return e},e.prototype.changeToUFO=function(e,n){if(this._arrayCubeItem[e][n]){var o=this._arrayCubeItem[e][n].getCubeInfo();o.cubeType==i.C.CubeType.T_1&&this._arrayCubeItem[e][n].stopCubeSpriteSequenceFrame(),o.cubeType=i.C.CubeType.T_0,this._arrayCubeItem[e][n].setCubeInfo(o),t.Instance.ruleCheckerOneEx(this._arrayCubeItem[e][n].node,[0,0,0])}},e.prototype.playSuggestionTween=function(){if(this._tipsCubeItem1&&this._tipsCubeItem2){var e=this._tipsCubeItem1.getComponent(r.default),t=this._tipsCubeItem2.getComponent(r.default);e.playSuggestionTween(),t.playSuggestionTween(),l.default.Instance.NodeFinger.active=!0;var n=e.node.getPosition();n.x+=e.node.width/2,n.y-=e.node.height/2,l.default.Instance.NodeFinger.setPosition(n);var o=cc.callFunc(function(){l.default.Instance.NodeFinger.setPosition(n),l.default.Instance.NodeFinger.opacity=0;var e=cc.fadeTo(.5,255);l.default.Instance.NodeFinger.runAction(e)}),a=cc.delayTime(.5),i=t.node.getPosition();i.x+=t.node.width/2,i.y-=t.node.height/2;var s=cc.moveTo(.5,i.x,i.y),c=cc.callFunc(function(){l.default.Instance.NodeFinger.opacity=255;var e=cc.fadeTo(.5,0);l.default.Instance.NodeFinger.runAction(e)}),u=cc.sequence(o,a,s,c,a);u.repeatForever(),l.default.Instance.NodeFinger.runAction(u)}},e.prototype.stopSuggestionTween=function(){if(this._tipsCubeItem1&&this._tipsCubeItem2){var e=this._tipsCubeItem1.getComponent(r.default),t=this._tipsCubeItem2.getComponent(r.default);e.stopSuggestionTween(),t.stopSuggestionTween(),s.default.stopAllActions(l.default.Instance.NodeFinger),l.default.Instance.NodeFinger.active=!1}},e.prototype.clearSuggestion=function(){if(this._tipsCubeItem1&&this._tipsCubeItem2){var e=this._tipsCubeItem1.getComponent(r.default),t=this._tipsCubeItem2.getComponent(r.default);e.stopSuggestionTween(),t.stopSuggestionTween(),this._tipsCubeItem1=null,this._tipsCubeItem2=null}},e.prototype.playCrushTailEffect=function(e){var t=this._nodeCrushTailPoint.position,n=(cc.Vec2.UP.signAngle(new cc.Vec2(t.x-e.x,t.y-e.y)),Math.PI,Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))/700),o=f.default.Instance.playEffect(i.C.EffectName.fxCubeTuoWei,e,n+.4,this._nodeCrushTailContainer),r=o.getChildByName("ef_crush_tail");r.active=!0;var a=cc.bezierTo(n,[new cc.Vec2(e.x+50,e.y+50),new cc.Vec2(e.x,e.y+100),t]),s=cc.callFunc(function(){r.getComponent(cc.ParticleSystem);r.active=!1}),c=cc.sequence(a,s);o.runAction(c)},e.Instance=new t,e=t=o([b],e)}());n.default=g,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/UserDataMgr":"UserDataMgr","../Tools/PetHero_FYAudioCtl":"PetHero_FYAudioCtl","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYScheduleCtl":"PetHero_FYScheduleCtl","../Tools/PetHero_FYTweenMgr":"PetHero_FYTweenMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility","./PetHero_AttackMgr":"PetHero_AttackMgr","./PetHero_CubeInfo":"PetHero_CubeInfo","./PetHero_CubeItem":"PetHero_CubeItem","./PetHero_EffectMgr":"PetHero_EffectMgr","./PetHero_TextMgr":"PetHero_TextMgr"}],PetHero_C:[function(e,t,n){"use strict";cc._RF.push(t,"3b849ZCPBhHF7IJT9/e/uq7","PetHero_C"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){(function(e){e.Score="wxScore"})(e.wxKey||(e.wxKey={})),function(e){e.selectMode="PetHero_selectMode",e.soundState="PetHero_soundState",e.SoundNum="PetHero_SoundNum",e.MusicNum="PetHero_MusicNum",e.GameMode="PetHero_GameMode",e.MaxScore="MaxScore"}(e.DataKey||(e.DataKey={})),function(e){e.maxScoreByType="maxScoreByType"}(e.JsonDataKey||(e.JsonDataKey={})),function(e){e[e.Attack=0]="Attack",e[e.Crush=1]="Crush",e[e.Go=2]="Go",e[e.Ready=3]="Ready",e[e.Skill=4]="Skill",e[e.Telescope=5]="Telescope",e[e.UFO=6]="UFO",e[e.Water=7]="Water",e[e.BattleToCrush=8]="BattleToCrush",e[e.CrushToBattle=9]="CrushToBattle",e[e.CountDown=10]="CountDown",e[e.Fail=11]="Fail",e[e.Win=12]="Win",e[e.Length=13]="Length"}(e.SoundType||(e.SoundType={})),function(e){e[e.MainBg=0]="MainBg",e[e.BattleBg=1]="BattleBg",e[e.Length=2]="Length"}(e.MusicType||(e.MusicType={})),function(e){e[e.OneRoundInstantMode=0]="OneRoundInstantMode",e[e.ThreeRoundRoundMode=1]="ThreeRoundRoundMode",e[e.Length=2]="Length"}(e.GameMode||(e.GameMode={})),function(e){e[e.OneVsAI=0]="OneVsAI",e[e.OneVsOne=1]="OneVsOne",e[e.TwoVsTwo=2]="TwoVsTwo",e[e.OneVsOnlineAI=3]="OneVsOnlineAI",e[e.TwoVsOnlineAI=4]="TwoVsOnlineAI"}(e.FightMode||(e.FightMode={})),function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=6]="G",e[e.Length=7]="Length",e[e.T_0=8]="T_0",e[e.T_1=9]="T_1",e[e.T_2=10]="T_2",e[e.T_3=11]="T_3",e[e.T_4=12]="T_4",e[e.T_5=13]="T_5",e[e.T_6=14]="T_6",e[e.T_7=15]="T_7",e[e.T_8=16]="T_8",e[e.T_9=17]="T_9",e[e.T_10=18]="T_10"}(e.CubeType||(e.CubeType={})),function(e){e.Damage="Damage",e.Ink="Ink",e.UFO="UFO",e.HpUp="HpUp",e.Telescope="Telescope",e.isRobot="isRobot",e.isNotRobot="isNotRobot",e.Statistics="Statistics",e.RoleType="RoleType",e.SeatInfo="RoleType",e.SyncResult="SyncResult",e.syncBlood="syncBlood",e.ColorType="ColorType",e.CanStartGame="CanStartGame",e.SetStartTime="SetStartTime"}(e.QQPostDataType||(e.QQPostDataType={})),function(e){e.InitCube="InitCube",e.CanStartGame="CanStartGame",e.TransferQQGameData="TransferQQGameData",e.ResetGame="ResetGame",e.Restart="Restart",e.AttackEnemy="AttackEnemy",e.Attacked="Attacked",e.SetDoubleAttackCube="SetDoubleAttackCube",e.DestroySameColorCube="DestroySameColorCube",e.GetRedHeart="GetRedHeart",e.SetEnemyHp="SetEnemyHp",e.SetCubeInk="SetCubeInk",e.GetTelescope="GetTelescope",e.UseLightningLine="UseLightningLine",e.UseLightningRow="UseLightningRow",e.UseBomb="UseBomb",e.UseSameCube="UseSameCube",e.UseStarCube="UseStarCube",e.SetUFO="SetUFO",e.PlayUFOAnim="PlayUFOAnim",e.PlayTelescopeAnim="PlayWTelescopeAnim",e.PlayRedHeartAnim="PlayRedHeartAnim",e.PlayInkAnim="PlayInkAnim",e.SetPlayerInfo="SetPlayerInfo",e.QQGame_Voice="qqgame_voice",e.Statistics="Statistics",e.SyncMyHp="SyncMyHp",e.SyncEnemyHp="SyncEnemyHp",e.SyncMyDamage="SyncMyDamage",e.SyncEnemyDamage="SyncEnemyDamage",e.SyncHP="SyncHP",e.SyncDamage="SyncDamage",e.SyncRound="SyncRound",e.ColorType="ColorType",e.RefreshGameUI="RefreshGameUI",e.SyncResult="SyncResult",e.LeaveToResult="LeaveToResult",e.SkipFight="SkipFight",e.GameOver="GameOver",e.RefreshScore="RefreshScore"}(e.MsgType||(e.MsgType={})),function(e){e.UIMessageBoxPanel="UIMessageBoxPanel",e.UITipPanel="UITipPanel",e.UIRandomDoubleCubePanel="UIRandomDoubleCubePanel",e.UIGamePanel="UIGamePanel",e.UILoadingPanel="UILoadingPanel"}(e.UIName||(e.UIName={})),function(e){e.fxClean="fxClean",e.fxClean02="fxClean03",e.fxClean03="fxClean03",e.feidie="feidie",e.hongxin="hongxin",e.skill_fire="skill_fire",e.Tips="Tips",e.SkillOff="skilloff",e.fxCubeTuoWei="fxCubeTuoWei"}(e.EffectName||(e.EffectName={})),function(e){e.SFAttack="SFAttack02",e.SFInk="SFInk",e.SFAttacked="SFAttacked02",e.SFSkill="SFSkill",e.SFWater="SFWater",e.SFSkillIdle="SFSkillIdle",e.SFSkillOff="SFSkillOff",e.SFWaterCube="SFWaterCube"}(e.SequenceFrameName||(e.SequenceFrameName={})),function(e){e.AtlasCube="cube"}(e.ResType||(e.ResType={})),function(e){e.Cube="Cube",e.Role_1="Role_1",e.Finger="Finger",e.Cell="Cell",e.ReadyGo="ReadyGo",e.Comb="Comb",e.Evaluate="Evaluate",e.PiaoZi="Piaozi"}(e.OtherName||(e.OtherName={})),function(e){e[e.Tween=0]="Tween",e[e.Normal=1]="Normal"}(e.CubeState||(e.CubeState={})),function(e){e[e.Win=0]="Win",e[e.Lose=1]="Lose",e[e.DogFall=2]="DogFall",e[e.TimeOut=3]="TimeOut",e[e.Statistics=4]="Statistics",e[e.Fight=5]="Fight",e[e.Round=6]="Round",e[e.Start=7]="Start"}(e.TipType||(e.TipType={})),function(e){e[e.F_1=0]="F_1"}(e.CubeFaceType||(e.CubeFaceType={})),function(e){e.Idle="roleIdle",e.Attack="roleAttack",e.Hurt="roleHurt",e.Die="roledie",e.Hurt2Before="roleHurt2-1",e.Hurt2="roleHurt2-2",e.Hurt2After="roleHurt2-3",e.SkillBefore="roleSkill-1",e.Skill="roleSkill-2",e.SkillAfter="roleSkill-3",e.UseTelescope="roleTelescope",e.UseUFO="roleUFO",e.UseWater="roleWater",e.Idle2="roleIdle2",e.Win="roleWin",e.Attack2="roleAttack2"}(e.RoleAnimType||(e.RoleAnimType={})),function(e){e[e.Me=0]="Me",e[e.Friend=1]="Friend",e[e.Enemy1=2]="Enemy1",e[e.Enemy2=3]="Enemy2",e[e.Length=4]="Length"}(e.RoleType||(e.RoleType={})),function(e){e[e.Attack1=0]="Attack1",e[e.Attack2=1]="Attack2"}(e.AttackType||(e.AttackType={})),function(e){e.Play="play",e.Stop="stop",e.Pause="pause",e.Resume="resume",e.LastFrame="lastframe",e.Finished="finished"}(e.AnimationEventType||(e.AnimationEventType={})),function(e){e.Nice="text_nice",e.Cool="text_cool",e.Wonderful="text_wonderful",e.Perfect="text_perfect"}(e.EvaluateType||(e.EvaluateType={})),function(e){e.HeadBgBlue="HeadSelfBg",e.NameBgBlue="CountDownBgSelf",e.HeadBgRed="HeadEnemyBg",e.NameBgRed="CountDownBgEnemy",e.NameBgBlue2v2="2v2NameBgSelf",e.NameBgRed2v2="2v2NameBgEnemy",e.LinkBlue="2v2BindSelf",e.LinkRed="2v2BindEnemy",e.ScoreBlue="2v2scoreBlue",e.ScoreRed="2v2scoreRed"}(e.TextureName||(e.TextureName={})),function(e){e.Blue="Blue",e.Red="Red"}(e.ColorType||(e.ColorType={}))}(n.C||(n.C={})),cc._RF.pop()},{}],PetHero_EffectMgr:[function(e,t,n){"use strict";cc._RF.push(t,"267d74cjMNCpo/JWHa8exGW","PetHero_EffectMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Tools/PetHero_FYResMgr"),a=e("../Tools/PetHero_FYEffectItem"),i=e("../Tools/PetHero_FYScheduleCtl"),s=e("../Common/PetHero_C"),c=cc._decorator,u=c.ccclass,l=(c.property,function(){function e(){this._effectContainer=null,this._dictEffectPool={}}var t;return t=e,e.prototype.init=function(e){this._effectContainer=e},e.prototype.reset=function(){for(var e in this._effectContainer=null,this._dictEffectPool)this._dictEffectPool[e]&&this._dictEffectPool[e].clear()},e.prototype.clearData=function(){this.reset()},e.prototype.preLoad=function(){for(var e=0;e<32;e++){var n=cc.instantiate(r.default.Instance.loadEffect(s.C.EffectName.fxCubeTuoWei)),o=cc.instantiate(r.default.Instance.loadEffect(s.C.EffectName.fxClean)),a=cc.instantiate(r.default.Instance.loadEffect(s.C.EffectName.fxClean03));n.parent=this._effectContainer,o.parent=this._effectContainer,a.parent=this._effectContainer,n.position=cc.Vec2.ZERO,o.position=cc.Vec2.ZERO,a.position=cc.Vec2.ZERO,n.active=!1,o.active=!1,a.active=!1,t.Instance.remove(n),t.Instance.remove(o),t.Instance.remove(a)}},e.prototype.playEffect=function(e,n,o,r){void 0===r&&(r=this._effectContainer);var a=this.add(e,n);if(a)return a.parent=r,i.default.Instance.setScheduleOnce(function(){t.Instance.remove(a)},o),a},e.prototype.add=function(e,t,n){void 0===n&&(n=this._effectContainer);var o=this.poolGet(e);if(null==o&&(o=cc.instantiate(r.default.Instance.loadEffect(e))),o)return o.active=!0,o.parent=n,o.setPosition(t),o.getComponent(a.default).play(),o},e.prototype.remove=function(e){this.poolPut(e)},e.prototype.poolPut=function(e){this._dictEffectPool.hasOwnProperty(e.name)?this._dictEffectPool[e.name].put(e):(this._dictEffectPool[e.name]=new cc.NodePool,this._dictEffectPool[e.name].put(e))},e.prototype.poolGet=function(e){return this._dictEffectPool.hasOwnProperty(e)&&this._dictEffectPool[e].size()>0?this._dictEffectPool[e].get():null},e.Instance=new t,e=t=o([u],e)}());n.default=l,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Tools/PetHero_FYEffectItem":"PetHero_FYEffectItem","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYScheduleCtl":"PetHero_FYScheduleCtl"}],PetHero_FYAudioCtl:[function(e,t,n){"use strict";cc._RF.push(t,"1c11fMZ5+NGqJjKmWa5by6S","PetHero_FYAudioCtl");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./PetHero_FYUtility"),i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arraySound=[],t.arrayMusic=[],t._bOpenSound=!0,t._bOpenMusic=!0,t._nPlayingMusic=-1,t}var n;return o(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance},enumerable:!0,configurable:!0}),t.prototype.playSound=function(e){this.arraySound[e]&&this._bOpenSound&&(a.default.log("-----------playSound------",e),this.arraySound[e].setCurrentTime(0),this.arraySound[e].play())},t.prototype.playMusic=function(e){this._nPlayingMusic!=e&&(this.arrayMusic[this._nPlayingMusic]&&this.arrayMusic[this._nPlayingMusic].stop(),this.arrayMusic[e]&&this.arrayMusic[e].play(),this._nPlayingMusic=e)},t.prototype.rewindMusic=function(){this.arrayMusic[this._nPlayingMusic]&&this.arrayMusic[this._nPlayingMusic].resume()},t.prototype.pauseSound=function(e){this.arraySound[e]&&this.arraySound[e].pause()},t.prototype.pauseMusic=function(e){this.arrayMusic[e]&&this.arrayMusic[e].pause()},t.prototype.stopSound=function(e){this.arraySound[e]&&this.arraySound[e].stop()},t.prototype.stopMusic=function(e){this.arrayMusic[e]&&(this.arrayMusic[e].stop(),e==this._nPlayingMusic&&(this._nPlayingMusic=-1))},t.prototype.changeSoundVolume=function(e){for(var t=0;t<this.arraySound.length;t++)this.arraySound[t]&&(this.arraySound[t].volume=e)},t.prototype.changeMusicVolume=function(e){for(var t=0;t<this.arrayMusic.length;t++)this.arrayMusic[t]&&(this.arrayMusic[t].volume=e)},t.prototype.onLoad=function(){n._instance=this},t._instance=null,r([c({type:Array(cc.AudioSource),displayName:"\u97f3\u6548\u6570\u7ec4"})],t.prototype,"arraySound",void 0),r([c({type:Array(cc.AudioSource),displayName:"\u97f3\u4e50\u6570\u7ec4"})],t.prototype,"arrayMusic",void 0),t=n=r([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_FYBaseNode:[function(e,t,n){"use strict";cc._RF.push(t,"3e5b1ALxXhAGJHLj6QrQX2M","PetHero_FYBaseNode");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.addListener=function(){},t.prototype.removeListener=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener()},t=r([i],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],PetHero_FYBaseUIPanel:[function(e,t,n){"use strict";cc._RF.push(t,"490dcBJXE5E16zU6g11Td3j","PetHero_FYBaseUIPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./PetHero_FYBaseNode"),i=e("./PetHero_FYMessenger"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeWidget=null,t}return o(t,e),t.prototype.setActive=function(e){this.nodeWidget&&(this.nodeWidget.active=e)},t.prototype.addListener=function(){e.prototype.addListener.call(this),i.default.Instance.add(this.node.name,this.onShow,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),i.default.Instance.remove(this.node.name,this.onShow,this)},t.prototype.onShow=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},r([u({type:cc.Node,displayName:"Widget\u8282\u70b9"})],t.prototype,"nodeWidget",void 0),t=r([c],t)}(a.default);n.default=l,cc._RF.pop()},{"./PetHero_FYBaseNode":"PetHero_FYBaseNode","./PetHero_FYMessenger":"PetHero_FYMessenger"}],PetHero_FYEffectControl:[function(e,t,n){"use strict";cc._RF.push(t,"7243cZGHglChod3JhCE9Gok","PetHero_FYEffectControl");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.partical=null,t}return o(t,e),t.prototype.playPartical=function(){this.partical.node.active=!0,this.partical.resetSystem()},t.prototype.stopPartical=function(){this.partical.node.active=!1,this.partical.stopSystem()},t.prototype.start=function(){},r([s({type:cc.ParticleSystem})],t.prototype,"partical",void 0),t=r([i],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],PetHero_FYEffectItem:[function(e,t,n){"use strict";cc._RF.push(t,"0c656atI3BPwJrhEzYDcD7/","PetHero_FYEffectItem");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listAnimation=[],t.listParticleSystem=[],t}return o(t,e),t.prototype.play=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!0,this.listAnimation[e].play();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!0,this.listParticleSystem[e].resetSystem()},t.prototype.stop=function(){for(var e=0;e<this.listAnimation.length;e++)this.listAnimation[e].node.active=!1,this.listAnimation[e].stop();for(e=0;e<this.listParticleSystem.length;e++)this.listParticleSystem[e].node.active=!1,this.listParticleSystem[e].stopSystem()},t.prototype.start=function(){},r([s({type:Array(cc.Animation),displayName:"\u52a8\u4f5c\u5217\u8868"})],t.prototype,"listAnimation",void 0),r([s({type:Array(cc.ParticleSystem),displayName:"\u7279\u6548\u5217\u8868"})],t.prototype,"listParticleSystem",void 0),t=r([i],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],PetHero_FYGlobalVarMgr:[function(e,t,n){"use strict";cc._RF.push(t,"71d0eOTwslMTpy8XiWviIZx","PetHero_FYGlobalVarMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){this._nodeCanvas=null,this._nodeBottom=null,this._nodeCenter=null,this._nodeTop=null}var t;return t=e,e.prototype.clearData=function(){this._nodeBottom=null,this._nodeCanvas=null,this._nodeCenter=null,this._nodeTop=null},Object.defineProperty(e.prototype,"nodeCanvas",{get:function(){return this._nodeCanvas||(this._nodeCanvas=this._nodeCanvas=cc.director.getScene().getChildByName("Canvas")),this._nodeCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeBottom",{get:function(){return this._nodeBottom||(this._nodeBottom=this.nodeCanvas.getChildByName("Bottom")),this._nodeBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeCenter",{get:function(){return this._nodeCenter||(this._nodeCenter=this.nodeCanvas.getChildByName("Center")),this._nodeCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeTop",{get:function(){return this._nodeTop||(this._nodeTop=this.nodeCanvas.getChildByName("Top")),this._nodeTop},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=o([a],e)}());n.default=i,cc._RF.pop()},{}],PetHero_FYMessenger:[function(e,t,n){"use strict";cc._RF.push(t,"61a7eOT0OZAXK4lApqz4hd1","PetHero_FYMessenger"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.listeners={}}return e.prototype.clearData=function(){this.listeners={}},e.prototype.add=function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(new r(t,n))},e.prototype.remove=function(e,t,n){var o=this.listeners[e];if(o){for(var r=o.length,a=0;a<r;a++){if(o[a].compar(n)){o.splice(a,1);break}}0==o.length&&delete this.listeners[e]}},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.listeners[e];if(o)for(var r=o.length,a=0;a<r;a++){var i=o[a];i.notify.apply(i,[e].concat(t))}},e.Instance=new e,e}();n.default=o;var r=function(){function e(e,t){this.callback=null,this.context=null;this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.callback).call.apply(e,[this.context].concat(t))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],PetHero_FYResMgr:[function(e,t,n){"use strict";cc._RF.push(t,"69c02vGOERDzbO8IDtkhlci","PetHero_FYResMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./PetHero_FYMessenger"),a=cc._decorator,i=a.ccclass,s=(a.property,function(){function e(){this.dictAtlas={},this.dictEffect={},this.dictSequenceFrame={},this.dictOther={}}var t;return t=e,e.prototype.reset=function(){this.dictAtlas={},this.dictEffect={},this.dictOther={},this.dictSequenceFrame={},cc.loader.releaseResDir("PetHero/atlas"),cc.loader.releaseResDir("PetHero/prefabs/Effect"),cc.loader.releaseResDir("PetHero/prefabs/SequenceFrame"),cc.loader.releaseResDir("PetHero/prefabs/Other")},e.prototype.clearData=function(){this.reset()},e.prototype.preLoadAltlas=function(){var e=this;cc.loader.loadResDir("PetHero/atlas",cc.SpriteAtlas,function(e,n,o){r.default.Instance.send(t.MsgPreLoadAtlasProgress,e,n)},function(n,o){for(var a=0;a<o.length;a++)for(var i in o[a]._spriteFrames)e.dictAtlas[o[a]._spriteFrames[i]._name]=o[a]._spriteFrames[i];r.default.Instance.send(t.MsgPreLoadAtlasComplete)})},e.prototype.preLoadEffect=function(){var e=this;cc.loader.loadResDir("PetHero/prefabs/Effect",cc.Prefab,function(e,n,o){r.default.Instance.send(t.MsgPreLoadEffectProgress,e,n)},function(n,o){for(var a=0;a<o.length;a++)e.dictEffect[o[a]._name]=o[a].data;r.default.Instance.send(t.MsgPreLoadEffectComplete)})},e.prototype.preLoadSequenceFrame=function(){var e=this;cc.loader.loadResDir("PetHero/prefabs/SequenceFrame",cc.Prefab,function(e,n,o){r.default.Instance.send(t.MsgPreLoadSequenceFrameProgress,e,n)},function(n,o){for(var a=0;a<o.length;a++)e.dictSequenceFrame[o[a]._name]=o[a].data;r.default.Instance.send(t.MsgPreLoadSequenceFrameComplete)})},e.prototype.preLoadOther=function(){var e=this;cc.loader.loadResDir("PetHero/prefabs/Other",cc.Prefab,function(e,n,o){r.default.Instance.send(t.MsgPreLoadOtherProgress,e,n)},function(n,o){for(var a=0;a<o.length;a++)e.dictOther[o[a]._name]=o[a].data;r.default.Instance.send(t.MsgPreLoadOtherComplete)})},e.prototype.loadSpriteFrame=function(e){return e in this.dictAtlas?this.dictAtlas[e]:null},e.prototype.loadEffect=function(e){return e in this.dictEffect?this.dictEffect[e]:null},e.prototype.loadSequenceFrame=function(e){return e in this.dictSequenceFrame?this.dictSequenceFrame[e]:null},e.prototype.loadOther=function(e){if(e in this.dictOther)return this.dictOther[e]},e.Instance=new t,e.MsgPreLoadAtlasProgress="PreLoadAtlasProgress",e.MsgPreLoadEffectProgress="MsgPreLoadEffectProgress",e.MsgPreLoadSequenceFrameProgress="MsgPreLoadSequenceFrameProgress",e.MsgPreLoadOtherProgress="MsgPreLoadOtherProgress",e.MsgPreLoadTextureProgress="MsgPreLoadTextureProgress",e.MsgPreLoadAtlasComplete="PreLoadAtlasComplete",e.MsgPreLoadEffectComplete="PreLoadEffectComplete",e.MsgPreLoadSequenceFrameComplete="MsgPreLoadSequenceFrameComplete",e.MsgPreLoadOtherComplete="MsgPreLoadOtherComplete",e.MsgPreLoadTextureComplete="MsgPreLoadTextureComplete",e.MsgPreLoadComplete="PreLoadComplete",e=t=o([i],e)}());n.default=s,cc._RF.pop()},{"./PetHero_FYMessenger":"PetHero_FYMessenger"}],PetHero_FYSDKMgr:[function(e,t,n){"use strict";cc._RF.push(t,"a4d77hfjeRLi69n5V71ufRy","PetHero_FYSDKMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){this.test={},this.test2={}}var t;return t=e,e.prototype.saveLocalData=function(e,t){cc.sys.localStorage.setItem(e,t)},e.prototype.loadLocalData=function(e,t){return void 0===t&&(t="0"),cc.sys.localStorage.getItem(e)||t},e.prototype.saveLocalJsonData=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.prototype.loadLocalJsonData=function(e){return JSON.parse(cc.sys.localStorage.getItem(e)||JSON.stringify({}))},e.prototype.removeLocalData=function(e){cc.sys.localStorage.removeItem(e)},e.prototype.removeAllLocalData=function(){cc.sys.localStorage.clear()},e.prototype.isAliGame=function(){return!1},e.prototype.AliGameInit=function(e){this.isAliGame()&&(CatcherSDK.init({url:"ws://47.107.149.93:12345/ws/game",gameVersion:"0.0.2",gameId:"172"}),CatcherSDK.instance().start())},e.prototype.qqGameReady=function(){this.isAliGame()},e.prototype.qqGameResultType=function(e,t){if(void 0===t&&(t=1),1==t){if(1==e)return 1;if(0==e)return 0;if(-1==e)return-1;if(-2==e)return-1}else{if(1==e)return qqgame.RESULT_WIN;if(0==e)return qqgame.RESULT_DRAW;if(-1==e)return qqgame.RESULT_LOSE;if(-2==e)return qqgame.RESULT_LEAVE}},e.prototype.qqIsIOS=function(){if(this.isAliGame())return cc.sys.os==cc.sys.OS_IOS},e.prototype.qqIsAndroid=function(){if(this.isAliGame())return cc.sys.os==cc.sys.OS_ANDROID},e.prototype.qqGetLog=function(){if(this.isAliGame())return qqgame.getLogText()},e.prototype.qqGameIsRobot=function(){if(this.isAliGame())return!1},e.Instance=new t,e=t=o([a],e)}());n.default=i,cc._RF.pop()},{}],PetHero_FYScheduleCtl:[function(e,t,n){"use strict";cc._RF.push(t,"ad93830nspIwZhX4wuibyuF","PetHero_FYScheduleCtl");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return o(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance},enumerable:!0,configurable:!0}),t.prototype.setSchedule=function(e,t,n,o){this.schedule(e,t,n,o)},t.prototype.setScheduleOnce=function(e,t){this.scheduleOnce(e,t)},t.prototype.toUnschedule=function(e){this.unschedule(e)},t.prototype.onLoad=function(){n._instance=this},t._instance=null,t=n=r([i],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],PetHero_FYSequenceFrameControl:[function(e,t,n){"use strict";cc._RF.push(t,"8b9a2RgcEFFtrfWmPqLXEPv","PetHero_FYSequenceFrameControl");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./PetHero_FYUtility"),i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arraySprite=[],t.interval=.1,t.delay=.1,t.playCount=-1,t.isAutoDestroy=!1,t.isRandomStartIndex=!1,t._curIndex=0,t._curPlayCount=0,t._callback=null,t}return o(t,e),t.prototype.updateSprite=function(){if(this._curIndex++,this._curIndex>=this.arraySprite.length&&(this._curIndex=0,this.playCount>0&&(this._curPlayCount++,this._curPlayCount==this.playCount)))return this._callback&&this._callback(),this.stop(),void(this.isAutoDestroy&&(this.node.destroy(),this.destroy()));this._curIndex=this._curIndex%this.arraySprite.length;var e=(this._curIndex-1+this.arraySprite.length)%this.arraySprite.length;this.arraySprite[e].active=!1,this.arraySprite[this._curIndex%this.arraySprite.length].active=!0},t.prototype.stop=function(){this.unschedule(this.updateSprite)},t.prototype.getCurIndex=function(){return this._curIndex},t.prototype.setCurIndex=function(e){this._curIndex=e,this._curIndex=this._curIndex%this.arraySprite.length},t.prototype.start=function(){this.isRandomStartIndex&&(this.arraySprite[0].active=!1,this._curIndex=a.default.getRangeRandom(0,this.arraySprite.length-1)),this.schedule(this.updateSprite,this.interval,cc.macro.REPEAT_FOREVER,this.delay)},r([c({type:Array(cc.Node),displayName:"\u56fe\u7247\u6570\u7ec4"})],t.prototype,"arraySprite",void 0),r([c({type:cc.Float,displayName:"\u95f4\u9694\u65f6\u95f4"})],t.prototype,"interval",void 0),r([c({type:cc.Float,displayName:"\u5ef6\u8fdf\u65f6\u95f4"})],t.prototype,"delay",void 0),r([c({type:cc.Integer,displayName:"\u64ad\u653e\u6b21\u6570"})],t.prototype,"playCount",void 0),r([c({type:Boolean,displayName:"\u662f\u5426\u81ea\u52a8\u5220\u9664"})],t.prototype,"isAutoDestroy",void 0),r([c({type:Boolean,displayName:"\u662f\u5426\u968f\u673a\u5f00\u59cb\u7d22\u5f15"})],t.prototype,"isRandomStartIndex",void 0),t=r([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_FYTweenMgr:[function(e,t,n){"use strict";cc._RF.push(t,"c5f894cQTtNrIw9965abunw","PetHero_FYTweenMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){}return e.moveTo=function(e,t,n,o,r,a){if(void 0===r&&(r=0),e instanceof cc.Node){var i=cc.moveTo(t,n,o),s=cc.callFunc(function(e){a&&a()},this,0),c=cc.sequence(cc.delayTime(r),i,s);return e.runAction(c),c}return null},e.moveBy=function(e,t,n,o,r,a){if(void 0===r&&(r=0),e instanceof cc.Node){var i=cc.moveBy(t,n,o),s=cc.callFunc(function(e){a&&a()},this,0),c=cc.sequence(cc.delayTime(r),i,s);return e.runAction(c),c}return null},e.rotateBy=function(e,t,n,o,r){if(void 0===o&&(o=0),e instanceof cc.Node){var a=cc.rotateBy(t,n),i=cc.callFunc(function(e){r&&r()},this,0),s=cc.sequence(cc.delayTime(o),a,i);return e.runAction(s),s}return null},e.scaleTo=function(e,t,n,o,r,a){if(void 0===r&&(r=0),e instanceof cc.Node){var i=cc.scaleTo(t,n,o),s=cc.callFunc(function(e){a&&a()},this,0),c=cc.sequence(cc.delayTime(r),i,s);return e.runAction(c),c}return null},e.scaleBigAndSmall=function(e,t,n,o,r){if(void 0===n&&(n=0),void 0===o&&(o=!1),e instanceof cc.Node){var a=cc.scaleTo(t/2,1.1,1.1),i=cc.scaleTo(t/2,.9,.9),s=cc.callFunc(function(e){r&&r()},this,0),c=cc.sequence(cc.delayTime(n),a,i,s);return o&&c.repeatForever(),e.runAction(c),c}return null},e.scaleBigAndNormal=function(e,t,n,o,r,a,i){if(void 0===r&&(r=0),void 0===a&&(a=!1),e instanceof cc.Node){var s=cc.scaleTo(t/2,n,o),c=cc.scaleTo(t/2,1,1),u=cc.callFunc(function(e){i&&i()},this,0),l=cc.sequence(cc.delayTime(r),s,c,u);return a&&l.repeatForever(),e.runAction(l),l}return null},e.waitBy=function(e,t,n){if(e instanceof cc.Node){var o=cc.fadeTo(t,e.opacity),r=cc.callFunc(function(e){n&&n()},this,0),a=cc.sequence(o,r);return e.runAction(a),a}return null},e.stopAllActions=function(e){e instanceof cc.Node&&e.stopAllActions()},e.stopAction=function(e,t){e instanceof cc.Node&&e.stopAction(t)},e=o([a],e)}());n.default=i,cc._RF.pop()},{}],PetHero_FYUIMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2604aqnyTdJkYCkKucAU3P5","PetHero_FYUIMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./PetHero_FYMessenger"),a=e("./PetHero_FYGlobalVarMgr"),i=e("./PetHero_FYUtility"),s=e("./PetHero_FYBaseNode"),c=cc._decorator,u=c.ccclass,l=(c.property,function(){function e(){this._dictUIPrefab={},this._dictUIPanel={}}var t;return t=e,e.prototype.reset=function(){for(var e in this._dictUIPanel)if(this._dictUIPanel[e]){var t=cc.loader.getDependsRecursively(this._dictUIPanel[e].node);cc.loader.release(t),this._dictUIPanel[e].node.destroy()}this._dictUIPanel={},this._dictUIPrefab={},cc.loader.releaseResDir("PetHero/prefabs/UI")},e.prototype.clearData=function(){this.reset()},e.prototype.preLoad=function(){var e=this;cc.loader.loadResDir("PetHero/prefabs/UI",cc.Prefab,function(e,n,o){r.default.Instance.send(t.MsgPreLoadUIProgress,e,n)},function(n,o){for(var a=0;a<o.length;a++)e._dictUIPrefab[o[a]._name]=o[a].data;r.default.Instance.send(t.MsgPreLoadUIComplete)})},e.prototype.show=function(e,t){void 0===t&&(t=a.default.Instance.nodeTop);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];t||(t=a.default.Instance.nodeTop),this._dictUIPrefab[e]?(this._dictUIPanel[e]?this._dictUIPanel[e].setActive(!0):this._dictUIPanel[e]=i.default.addChild(t,this._dictUIPrefab[e]).getComponent(s.default),r.default.Instance.send(e,n)):cc.error(e+" is not prelaod")},e.prototype.hide=function(e){this._dictUIPanel[e]&&this._dictUIPanel[e].setActive(!1)},e.prototype.close=function(e){this._dictUIPanel[e]&&(this._dictUIPanel[e].node.destroy(),delete this._dictUIPanel[e])},e.Instance=new t,e.MsgPreLoadUIProgress="PreLoadUIProgress",e.MsgPreLoadUIComplete="PreLoadUIComplete",e=t=o([u],e)}());n.default=l,cc._RF.pop()},{"./PetHero_FYBaseNode":"PetHero_FYBaseNode","./PetHero_FYGlobalVarMgr":"PetHero_FYGlobalVarMgr","./PetHero_FYMessenger":"PetHero_FYMessenger","./PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_FYUtility:[function(e,t,n){"use strict";cc._RF.push(t,"89d0b1gEwNHGL/lAt6LxF7n","PetHero_FYUtility");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){}var t;return t=e,e.changeSpriteFrame=function(e,t,n){cc.loader.loadRes(t,cc.SpriteAtlas,function(t,o){if(o instanceof cc.SpriteAtlas){var r=o.getSpriteFrame(n);e.spriteFrame=r}})},e.getRandomValueDif=function(e,t,n){for(var o=new Array,r=n?n>t-e+1?t-e+1:n:1,a=e,i=0;a<=t;a++,i++)o[i]=a;var s=[];o.sort(function(){return.5-Math.random()});for(var c=0;c<r;c++){var u=Math.floor(Math.random()*o.length);s.push(o[u]);var l=o[u];o[u]=o[o.length-1],o[o.length-1]=l,o.pop()}return s},e.getRangeRandom=function(e,n){return t.getRandomValueDif(e,n,1)[0]},e.addChild=function(e,t,n,o){if(void 0===n&&(n=cc.Vec2.ZERO),void 0===o&&(o=!0),void 0==e||void 0==t)return cc.error("----------\x3e>>>>>>>>parent is undefined",void 0==e),void cc.error("----------\x3e>>>>>>>>child is undefined",void 0==t);cc.Vec2.ZERO;var r=cc.instantiate(t);return r.parent=e,r.position=n,r.active=o,r},e.getCanvasWidth=function(){return cc.Canvas.instance.node.width},e.getCanvasHeight=function(){return cc.Canvas.instance.node.height},e.loadScene=function(e){cc.director.loadScene(e)},e.enablePhysicsSystem=function(e){cc.director.getPhysicsManager().enabled=e},e.enableCollisionSystem=function(e){cc.director.getCollisionManager().enabled=e},e.convertDateFromString=function(e){if(e){var t=e.split(" ")[0].split("/");return new Date(t[0],t[1]-1,t[2])}},e.getMonTimeByNowTime=function(){var e=new Date,t=e.getDay();return 0==t&&(t=7),e.setHours(0,0,0,0),new Date(e.getTime()-24*(t-1)*60*60*1e3).getTime()},e.isSameDay=function(e,t){void 0===t&&(t=Date.now());var n=Number(e),o=Number(t);if(n&&o){var r=new Date(n),a=new Date(o);return r.setHours(0,0,0,0)==a.setHours(0,0,0,0)}return!1},e.getDictionaryCount=function(e){var t=0;for(var n in e)t++;return t},e.formatTime=function(e){var n,o,r;e=parseInt(e);return r=Number(e%60),o=Number(e%3600/60),(n=Number(e/3600))?t.PadZero(n)+":"+t.PadZero(o)+":"+t.PadZero(r):t.PadZero(o)+":"+t.PadZero(r)},e.formatTime2=function(e){var n,o;e=parseInt(e);return o=Number(Math.floor((e-1e3*Math.floor(e/1e3))/10)),n=Number(e/1e3%60),Number(e/1e3%3600/60),Number(e/1e3/3600),t.PadZero(n)+":"+t.PadZero(o)},e.PadZero=function(e){return new RegExp(/^\d$/g).test(e)?"0"+e:e},e.getMonthWeek=function(){var e=new Date,t=(e.getFullYear(),e.getDay(),e.getDate(),e.getDay()),n=e.getDate();return Math.ceil((n+6-t)/7)},e.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e=t=o([a],e)}());n.default=i,cc._RF.pop()},{}],PetHero_GridMgr:[function(e,t,n){"use strict";cc._RF.push(t,"6b870RcAOtGhbCrZ5XN/w+O","PetHero_GridMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Tools/PetHero_FYUtility"),a=e("./PetHero_CellItem"),i=e("../Common/UserDataMgr"),s=cc._decorator,c=s.ccclass,u=(s.property,function(){function e(){this._indexSize=cc.Size.ZERO,this._arrayCell=[[]],this._gapSize=new cc.Vec2(2,2)}var t;return t=e,e.prototype.clearData=function(){t.Instance=new t},e.prototype.create=function(e,t,n){this._indexSize=n;for(var o=cc.size(i.default.Instance.MaxLength/this._indexSize.width,i.default.Instance.MaxLength/this._indexSize.height),s=cc.size(o.width-this._gapSize.x/2,o.height-this._gapSize.y/2),c=0;c<this._indexSize.width;c++)for(var u=0;u<this._indexSize.height;u++){this._arrayCell[c]||(this._arrayCell[c]=[]);var l=r.default.addChild(e,t).getComponent(a.default);l.setSize(s),l.setPosition(new cc.Vec2(c*o.width-i.default.Instance.MaxLength/2+o.width/2,u*o.height-i.default.Instance.MaxLength/2+o.height/2)),this._arrayCell[c].push(l),l.node.active=c%2==0?u%2==0:u%2==1}},e.Instance=new t,e=t=o([c],e)}());n.default=u,cc._RF.pop()},{"../Common/UserDataMgr":"UserDataMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility","./PetHero_CellItem":"PetHero_CellItem"}],PetHero_Main:[function(e,t,n){"use strict";cc._RF.push(t,"d2fe55trfxJqKt1oFUxEq9L","PetHero_Main");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Tools/PetHero_FYUIMgr"),i=e("./Tools/PetHero_FYMessenger"),s=e("./Common/PetHero_C"),c=e("./Tools/PetHero_FYResMgr"),u=e("./Common/UserDataMgr"),l=cc._decorator,d=l.ccclass,f=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nDropWaitTime=1,t.playerInfo=null,t.isChannelCreated=!1,t.isLoadSucced=!1,t.channelCreatedSucced=!1,t.canSync=!1,t}return o(t,e),t.prototype.addListener=function(){i.default.Instance.add(c.default.MsgPreLoadComplete,this.onPreLoadComplete,this),i.default.Instance.add(s.C.MsgType.CanStartGame,this.onStartGame,this)},t.prototype.removeListener=function(){i.default.Instance.remove(c.default.MsgPreLoadComplete,this.onPreLoadComplete,this),i.default.Instance.remove(s.C.MsgType.CanStartGame,this.onStartGame,this)},t.prototype.onLoad=function(){var e=this.getComponent(cc.Canvas),t=cc.director.getWinSize().width;cc.director.getWinSize().height;t<720&&(e.fitWidth=!0,e.fitHeight=!1,u.default.Instance.bNeedSetSelfAdaption=!0),u.default.Instance.DropWaitTime=this.nDropWaitTime,a.default.Instance.preLoad(),c.default.Instance.preLoadOther(),c.default.Instance.preLoadAltlas(),c.default.Instance.preLoadEffect(),c.default.Instance.preLoadSequenceFrame()},t.prototype.onPreLoadComplete=function(){u.default.Instance.GameMode=s.C.GameMode.OneRoundInstantMode},t.prototype.onStartGame=function(){a.default.Instance.hide(s.C.UIName.UILoadingPanel)},t.prototype.onEnable=function(){this.addListener()},t.prototype.onDisable=function(){this.removeListener()},r([f({type:cc.Float,displayName:"\u4e0b\u843d\u7b49\u5f85\u65f6\u95f4"})],t.prototype,"nDropWaitTime",void 0),t=r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./Common/PetHero_C":"PetHero_C","./Common/UserDataMgr":"UserDataMgr","./Tools/PetHero_FYMessenger":"PetHero_FYMessenger","./Tools/PetHero_FYResMgr":"PetHero_FYResMgr","./Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr"}],PetHero_TextMgr:[function(e,t,n){"use strict";cc._RF.push(t,"850c4gfMDRCGIitqKnN93BU","PetHero_TextMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Tools/PetHero_FYResMgr"),a=e("../Common/PetHero_C"),i=e("../Tools/PetHero_FYUtility"),s=e("../Common/UserDataMgr"),c=cc._decorator,u=c.ccclass,l=(c.property,function(){function e(){this._nodeContainer=null,this._animComb=null,this.labCombNum=null,this._animEvaluate=null,this._sprEvaluate=null,this._listLabScoreFinish=[]}var t;return t=e,e.prototype.init=function(e){this._nodeContainer=e},e.prototype.clearData=function(){for(var e in this._animComb=null,this._animEvaluate=null,this._listLabScoreFinish)if(this._listLabScoreFinish[e]){var t=cc.loader.getDependsRecursively(this._listLabScoreFinish[e]);cc.loader.release(t),this._listLabScoreFinish[e].destroy()}this._listLabScoreFinish=[]},e.prototype.playGetScore=function(e,t){if(this._listLabScoreFinish.length>0){var n=this._listLabScoreFinish.shift();n.node.setPosition(t),n.node.active=!0,n.string=e+"";var o=cc.moveBy(.5,cc.v2(0,20)),s=cc.fadeOut(.3),c=this,u=cc.sequence(o,s,cc.callFunc(function(){n.node.active=!1,n.node.opacity=255,c._listLabScoreFinish.push(n)}));n.node.runAction(u)}else{var l=i.default.addChild(this._nodeContainer,r.default.Instance.loadOther(a.C.OtherName.PiaoZi));if(l){var d=l.getComponent(cc.Label);d.string=e+"",l.scale=2,l.setPosition(t);o=cc.moveBy(.5,cc.v2(0,20)),s=cc.fadeOut(.3);var f=this;u=cc.sequence(o,s,cc.callFunc(function(){l.active=!1,l.opacity=255,f._listLabScoreFinish.push(d)}));l.runAction(u)}}},e.prototype.playCombAnim=function(e){null==this._animComb&&(this._animComb=i.default.addChild(this._nodeContainer,r.default.Instance.loadOther(a.C.OtherName.Comb)).getComponent(cc.Animation),this._animComb.node.x=-30,this.labCombNum=this._animComb.node.getChildByName("labCombNum").getComponent(cc.Label)),this.labCombNum.string=e.toString(),this._animComb.play()},e.prototype.playEvaluateAnim=function(e){if(null==this._animEvaluate){var t=i.default.addChild(this._nodeContainer,r.default.Instance.loadOther(a.C.OtherName.Evaluate));t&&(this._animEvaluate=t.getComponent(cc.Animation),this._sprEvaluate=this._animEvaluate.node.getComponent(cc.Sprite))}this._sprEvaluate&&(this._sprEvaluate.spriteFrame=r.default.Instance.loadSpriteFrame(e)),this._animEvaluate&&this._animEvaluate.play()},e.prototype.playEvaluateAnimByCount=function(e){var n=a.C.EvaluateType.Nice;4==e?n=a.C.EvaluateType.Nice:5==e?n=a.C.EvaluateType.Cool:6==e?n=a.C.EvaluateType.Wonderful:e>=7&&(n=a.C.EvaluateType.Perfect),s.default.Instance.GameMode!=a.C.GameMode.OneRoundInstantMode&&t.Instance.playEvaluateAnim(n)},e.Instance=new t,e=t=o([u],e)}());n.default=l,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/UserDataMgr":"UserDataMgr","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_UIGamePanel:[function(e,t,n){"use strict";cc._RF.push(t,"ea912tUz0lBcqWj4kMMKGdV","PetHero_UIGamePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./PetHero_CubeItem"),i=e("./PetHero_CubeMgr"),s=e("../Tools/PetHero_FYTweenMgr"),c=e("../Tools/PetHero_FYBaseUIPanel"),u=e("../Tools/PetHero_FYUIMgr"),l=e("../Tools/PetHero_FYGlobalVarMgr"),d=e("../Common/PetHero_C"),f=e("./PetHero_GridMgr"),p=e("../Tools/PetHero_FYMessenger"),h=e("../Tools/PetHero_FYResMgr"),y=e("../Common/UserDataMgr"),_=e("../Tools/PetHero_FYSDKMgr"),C=e("./PetHero_EffectMgr"),b=e("../Tools/PetHero_FYScheduleCtl"),g=e("../Tools/PetHero_FYAudioCtl"),m=e("./PetHero_TextMgr"),I=cc._decorator,P=I.ccclass,T=I.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeEffectContainer=null,t.nodeGrid=null,t.nodeCubeCtl=null,t.labTime=null,t.nodeTextContainer=null,t.nodeCrushTailPoint=null,t.nodeCrushTailContainer=null,t.labScore=null,t.labMaxScore=null,t._bCreateCube=!1,t._bCreateGrid=!1,t._nodeFirstSelectCube=null,t._nodeSecondSelectCube=null,t._timerCallback=null,t._nRound=1,t._listATKTotalCount=[0,0,0,0],t._nTimeStay=0,t._nTimeSuggestion=5,t._bSuggestion=!1,t._animReadyGo=null,t.postResultData=null,t.getResultData=null,t.statisticsNum=null,t.startStatisticsTime=0,t.hadResult=!1,t}return o(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.nodeCubeCtl.on(cc.Node.EventType.TOUCH_START,this.onCubeCtlTouchStart,this),this.nodeCubeCtl.on(cc.Node.EventType.TOUCH_MOVE,this.onCubeCtlTouchMove,this),this.nodeCubeCtl.on(cc.Node.EventType.TOUCH_END,this.onCubeCtlTouchEnd,this),this.nodeCubeCtl.on(cc.Node.EventType.TOUCH_CANCEL,this.onCubeCtlTouchCancel,this),p.default.Instance.add(h.default.MsgPreLoadComplete,this.onPreLoadComplete,this),p.default.Instance.add(d.C.MsgType.Restart,this.onRestart,this),p.default.Instance.add(d.C.MsgType.SetDoubleAttackCube,this.onSetDoubleAttackCube,this),p.default.Instance.add(d.C.MsgType.DestroySameColorCube,this.onDestroySameColorCube,this),p.default.Instance.add(d.C.MsgType.UseLightningLine,this.onUseLightningLine,this),p.default.Instance.add(d.C.MsgType.UseLightningRow,this.onUseLightningRow,this),p.default.Instance.add(d.C.MsgType.UseStarCube,this.onUseStarCube,this),p.default.Instance.add(d.C.MsgType.UseBomb,this.onUseBombCube,this),p.default.Instance.add(d.C.MsgType.CanStartGame,this.startGame,this),p.default.Instance.add(d.C.MsgType.GameOver,this.onGameOver,this),p.default.Instance.add(d.C.MsgType.RefreshScore,this.onRefreshScore,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.nodeCubeCtl.off(cc.Node.EventType.TOUCH_START,this.onCubeCtlTouchStart,this),this.nodeCubeCtl.off(cc.Node.EventType.TOUCH_MOVE,this.onCubeCtlTouchMove,this),this.nodeCubeCtl.off(cc.Node.EventType.TOUCH_END,this.onCubeCtlTouchEnd,this),this.nodeCubeCtl.off(cc.Node.EventType.TOUCH_CANCEL,this.onCubeCtlTouchCancel,this),p.default.Instance.remove(d.C.MsgType.UseLightningRow,this.onUseLightningRow,this),p.default.Instance.remove(d.C.MsgType.UseLightningLine,this.onUseLightningLine,this),p.default.Instance.remove(d.C.MsgType.UseBomb,this.onUseBombCube,this),p.default.Instance.remove(d.C.MsgType.UseStarCube,this.onUseStarCube,this),p.default.Instance.remove(h.default.MsgPreLoadComplete,this.onPreLoadComplete,this),p.default.Instance.remove(d.C.MsgType.Restart,this.onRestart,this),p.default.Instance.remove(d.C.MsgType.SetDoubleAttackCube,this.onSetDoubleAttackCube,this),p.default.Instance.remove(d.C.MsgType.DestroySameColorCube,this.onDestroySameColorCube,this),p.default.Instance.remove(d.C.MsgType.CanStartGame,this.startGame,this),p.default.Instance.remove(d.C.MsgType.GameOver,this.onGameOver,this),p.default.Instance.remove(d.C.MsgType.RefreshScore,this.onRefreshScore,this)},t.prototype.initData=function(){this.postResultData=null,this.getResultData=null,this._nRound=1,y.default.Instance.Round=this._nRound,y.default.Instance.RemainTime=y.default.Instance.OneRoundTime;for(var e=0;e<d.C.RoleType.Length;e++)this._listATKTotalCount[e]=0},t.prototype.createGrid=function(){this._bCreateGrid||(this._bCreateGrid=!0,f.default.Instance.create(this.nodeGrid,h.default.Instance.loadOther(d.C.OtherName.Cell),new cc.Size(y.default.Instance.row,y.default.Instance.col)))},t.prototype.createCube=function(){console.log("=========\u521b\u5efa\u65b9\u5757============"),this._bCreateCube?i.default.Instance.reCreate():(this._bCreateCube=!0,i.default.Instance.create())},t.prototype.startGame=function(){y.default.Instance.GameMode,d.C.GameMode.OneRoundInstantMode,i.default.Instance.init(this.nodeCrushTailPoint,this.nodeCrushTailContainer,this.nodeCubeCtl,h.default.Instance.loadOther(d.C.OtherName.Cube),new cc.Size(y.default.Instance.row,y.default.Instance.col)),g.default.Instance.playMusic(d.C.MusicType.MainBg),this.initData(),this.refreshUI();var e=this;y.default.Instance.TouchSwitch=!1,this.scheduleOnce(function(){e.showRound(function(){e.startTimer(),y.default.Instance.TouchSwitch=!0,e._bCreateCube=!1,e.createCube()})},.8),this.createGrid()},t.prototype.restart=function(){i.default.Instance.reCreate(),this.initData(),this.refreshUI(),y.default.Instance.TouchSwitch=!0,this.startTimer()},t.prototype.check=function(e,t){var n=t.node.getPosition(),o=e.node.getPosition();e.getCubeState()!=d.C.CubeState.Tween&&t.getCubeState()!=d.C.CubeState.Tween?i.default.Instance.distanceChecker(e,t)?(cc.log("\u76f8\u90bb"),e.setCubeState(d.C.CubeState.Tween),t.setCubeState(d.C.CubeState.Tween),this.enableSelectorTween(this._nodeFirstSelectCube,!1),s.default.moveTo(e.node,i.default.Instance.swapTweenTime,n.x,n.y,0,function(){}),b.default.Instance.setScheduleOnce(function(){e.setCubeState(d.C.CubeState.Normal),e.stopSelectedTween()},i.default.Instance.swapTweenTime),s.default.moveTo(t.node,i.default.Instance.swapTweenTime,o.x,o.y,0,function(){}),b.default.Instance.setScheduleOnce(function(){t.setCubeState(d.C.CubeState.Normal),i.default.Instance.ruleChecker(e.node,t.node,function(){i.default.Instance.crushFinish()})},i.default.Instance.swapTweenTime)):(cc.log("\u4e0d\u662f\u76f8\u90bb\u7684\u4e24\u4e2a\u65b9\u5757"),this.enableSelectorTween(this._nodeFirstSelectCube,!1),this._nodeFirstSelectCube=this._nodeSecondSelectCube,this._nodeSecondSelectCube=null,this.enableSelectorTween(this._nodeFirstSelectCube,!0)):cc.log("\u6709\u4eba\u5728\u8fd0\u52a8")},t.prototype.enableSelectorTween=function(e,t){var n=e.getComponent(a.default);t?n.playSelectedTween():n.stopSelectedTween()},t.prototype.posToIndex=function(e){var t=this.nodeCubeCtl.convertToNodeSpaceAR(e);t.x=t.x+y.default.Instance.MaxLength/2,t.y=t.y+y.default.Instance.MaxLength/2;var n=Math.floor(t.x/i.default.Instance.cubeSize.width),o=Math.floor(t.y/i.default.Instance.cubeSize.height);return new cc.Vec2(n,o)},t.prototype.refreshUI=function(){this.labTime.string=y.default.Instance.RemainTime.toString(),this.labScore.string="0",this.labMaxScore.string=y.default.Instance.MaxScore.toString()},t.prototype.checkResultNew=function(){if(y.default.Instance.RemainTime<=0){var e=this;y.default.Instance.TouchSwitch=!1,i.default.Instance.clearSuggestion(),b.default.Instance.setScheduleOnce(function(){if(e.getOurAttackTotalCount()>e.getEnemyAttackTotalCount())if(_.default.Instance.isAliGame()){_.default.Instance.qqIsIOS()?2000008:_.default.Instance.qqIsAndroid()&&1000008,y.default.Instance.FightMode==d.C.FightMode.OneVsOne||y.default.Instance.FightMode==d.C.FightMode.OneVsOnlineAI||(y.default.Instance.FightMode,d.C.FightMode.OneVsAI)}else u.default.Instance.show(d.C.UIName.UITipPanel,l.default.Instance.nodeTop,d.C.TipType.Win);else if(e.getOurAttackTotalCount()<e.getEnemyAttackTotalCount())if(_.default.Instance.isAliGame()){_.default.Instance.qqIsIOS()?2000008:_.default.Instance.qqIsAndroid()&&1000008,y.default.Instance.FightMode!=d.C.FightMode.OneVsOne&&y.default.Instance.FightMode!=d.C.FightMode.OneVsOnlineAI&&y.default.Instance.FightMode!=d.C.FightMode.OneVsAI||console.log("==============checkresult============",e.postResultData)}else u.default.Instance.show(d.C.UIName.UITipPanel,l.default.Instance.nodeTop,d.C.TipType.Lose);else if(_.default.Instance.isAliGame()){_.default.Instance.qqIsIOS()?2000008:_.default.Instance.qqIsAndroid()&&1000008,y.default.Instance.FightMode!=d.C.FightMode.OneVsOne&&y.default.Instance.FightMode!=d.C.FightMode.OneVsOnlineAI&&y.default.Instance.FightMode!=d.C.FightMode.OneVsAI||console.log("==============checkresult============",e.postResultData)}else u.default.Instance.show(d.C.UIName.UITipPanel,l.default.Instance.nodeTop,d.C.TipType.DogFall)},.01),this.stopTimer()}},t.prototype.sureResult=function(){if(!this.hadResult){this.hadResult=!0,this.unscheduleAllCallbacks(),this.unschedule(this.sureResult),this.stopTimer(),y.default.Instance.IsBloodTween=!1,g.default.Instance.stopMusic(d.C.MusicType.MainBg);JSON.parse(JSON.stringify(this.postResultData));console.log("==========sureResult===========",Date.now())}},t.prototype.onGameOver=function(){this.unscheduleAllCallbacks(),this.unschedule(this.sureResult),this.stopTimer(),y.default.Instance.IsBloodTween=!1,g.default.Instance.stopMusic(d.C.MusicType.MainBg),g.default.Instance.stopMusic(d.C.MusicType.BattleBg)},t.prototype.onRefreshScore=function(e,t){y.default.Instance.CurScore=t,y.default.Instance.CurScore>y.default.Instance.MaxScore&&(y.default.Instance.MaxScore=y.default.Instance.CurScore),this.labMaxScore.string=y.default.Instance.MaxScore.toString(),this.labScore.string=y.default.Instance.CurScore.toString()},t.prototype.checkOneRound=function(){y.default.Instance.GameMode==d.C.GameMode.OneRoundInstantMode?this.checkResultNew():y.default.Instance.GameMode==d.C.GameMode.ThreeRoundRoundMode&&(this._nRound>=3?this.checkResultNew():(this._nRound++,y.default.Instance.Round=this._nRound,this.checkResultNew())),y.default.Instance.IsBloodTween=!1},t.prototype.startTimer=function(){var e=this,t=y.default.Instance.OneRoundTime+600;this._timerCallback=function(){y.default.Instance.RemainTime--,e.labTime.string=y.default.Instance.RemainTime.toString(),y.default.Instance.RemainTime<=4&&g.default.Instance.playSound(d.C.SoundType.CountDown),y.default.Instance.RemainTime<=0&&e.onTimeOut()},y.default.Instance.StartTime=Date.now(),this.schedule(this._timerCallback,1,t,0)},t.prototype.stopTimer=function(){this._timerCallback&&this.unschedule(this._timerCallback)},t.prototype.nextRound=function(){cc.log("\u56de\u5408"+this._nRound),i.default.Instance.clearSuggestion();var e=this;this.showRound(function(){y.default.Instance.Ink&&(e.unschedule(e.changeAllCubeToTypeColor),e.changeAllCubeToTypeColor()),i.default.Instance.reCreate(),e.getResultData&&e._nRound<=3?y.default.Instance.RemainTime=1:y.default.Instance.RemainTime=y.default.Instance.OneRoundTime,e.refreshUI(),y.default.Instance.TouchSwitch=!0,e.startTimer()})},t.prototype.showRound=function(e){if(1==this._nRound)return null==this._animReadyGo?(this._animReadyGo=cc.instantiate(h.default.Instance.loadOther(d.C.OtherName.ReadyGo)).getComponent(cc.Animation),this._animReadyGo.node.parent=this.node):this._animReadyGo.play(),g.default.Instance.playSound(d.C.SoundType.Ready),void b.default.Instance.setScheduleOnce(function(){g.default.Instance.playSound(d.C.SoundType.Go),e&&e()},1.2);u.default.Instance.show(d.C.UIName.UITipPanel,l.default.Instance.nodeTop,d.C.TipType.Round,this._nRound);b.default.Instance.setScheduleOnce(function(){u.default.Instance.show(d.C.UIName.UITipPanel,l.default.Instance.nodeTop,d.C.TipType.Start),b.default.Instance.setScheduleOnce(function(){u.default.Instance.close(d.C.UIName.UITipPanel)},1),e&&e()},1)},t.prototype.isFightMode=function(e){return 1==e?y.default.Instance.FightMode==d.C.FightMode.OneVsOne||y.default.Instance.FightMode==d.C.FightMode.OneVsOnlineAI:2==e?y.default.Instance.FightMode==d.C.FightMode.TwoVsOnlineAI||y.default.Instance.FightMode==d.C.FightMode.TwoVsTwo:void 0},t.prototype.getOurAttackTotalCount=function(){return this._listATKTotalCount[d.C.RoleType.Me]+this._listATKTotalCount[d.C.RoleType.Friend]},t.prototype.getEnemyAttackTotalCount=function(){return this._listATKTotalCount[d.C.RoleType.Enemy1]+this._listATKTotalCount[d.C.RoleType.Enemy2]},t.prototype.changeAllCubeToTypeColor=function(){y.default.Instance.Ink&&(i.default.Instance.changeAllCubeToTypeColor(),y.default.Instance.Ink=!1)},t.prototype.stopSuggestion=function(){this._bSuggestion&&i.default.Instance.stopSuggestionTween(),this._bSuggestion=!1,this._nTimeStay=0},t.prototype.onCubeCtlTouchStart=function(e){if(y.default.Instance.TouchSwitch){this.stopSuggestion();var t=e.touch.getLocation(),n=this.posToIndex(t),o=i.default.Instance.getCubeNode(n.x,n.y);if(null!=o)if(o.getComponent(a.default).getCubeState()!=d.C.CubeState.Tween)if(this._nodeFirstSelectCube){if(!this._nodeSecondSelectCube){var r=o;this._nodeFirstSelectCube==r?(this._nodeSecondSelectCube=null,cc.log("onCubeCtlTouchStart-------------------\u70b9\u51fb\u4e24\u4e2a\u76f8\u540c\u7684")):(cc.log("onCubeCtlTouchStart-------------------\u8bbe\u7f6e\u7b2c\u4e8c\u4e2a\u65b9\u5757"),this._nodeSecondSelectCube=o,this.check(this._nodeFirstSelectCube.getComponent(a.default),this._nodeSecondSelectCube.getComponent(a.default)))}}else cc.log("onCubeCtlTouchStart-------------------\u8bbe\u7f6e\u7b2c\u4e00\u4e2a\u65b9\u5757"),this._nodeFirstSelectCube=o,this.enableSelectorTween(this._nodeFirstSelectCube,!0)}},t.prototype.onCubeCtlTouchMove=function(e){if(cc.log("onCubeCtlTouchMove==========================="),y.default.Instance.TouchSwitch&&(this.stopSuggestion(),this._nodeFirstSelectCube&&!this._nodeSecondSelectCube)){cc.log("---------------");var t=e.touch.getLocation(),n=this.posToIndex(t),o=i.default.Instance.getCubeNode(n.x,n.y);if(o){if(o.getComponent(a.default).getCubeState()==d.C.CubeState.Tween)return void cc.log("\u6b63\u5728\u52a8\u753b---------------");cc.log("\u6ca1\u6709\u64ad\u52a8\u753b================"),this._nodeFirstSelectCube!=o&&(this._nodeSecondSelectCube=o,cc.log(this._nodeFirstSelectCube.getComponent(a.default).getCubeInfo().cubeIndexPos),cc.log(o.getComponent(a.default).getCubeInfo().cubeIndexPos),cc.log("onCubeCtlTouchMove===========================\u8bbe\u7f6e\u7b2c\u4e8c\u4e2a\u65b9\u5757"),this.check(this._nodeFirstSelectCube.getComponent(a.default),this._nodeSecondSelectCube.getComponent(a.default)),cc.log("check after --- ",this._nodeFirstSelectCube.getComponent(a.default).getCubeInfo().cubeIndexPos))}}},t.prototype.onCubeCtlTouchEnd=function(e){cc.log("onCubeCtlTouchEnd++++++++++++++++++++++++++"),y.default.Instance.TouchSwitch&&(this.stopSuggestion(),this._nodeFirstSelectCube&&this._nodeSecondSelectCube&&(""!=this._nodeFirstSelectCube.name&&this.enableSelectorTween(this._nodeFirstSelectCube,!1),""!=this._nodeSecondSelectCube.name&&this.enableSelectorTween(this._nodeSecondSelectCube,!1),cc.log("\u6e05\u7a7a"),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null))},t.prototype.onCubeCtlTouchCancel=function(e){cc.log("onCubeCtlTouchCancel~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),y.default.Instance.TouchSwitch&&(this.stopSuggestion(),this._nodeFirstSelectCube&&this._nodeSecondSelectCube&&(this.enableSelectorTween(this._nodeFirstSelectCube,!1),this.enableSelectorTween(this._nodeSecondSelectCube,!1),cc.log("\u6e05\u7a7a"),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null))},t.prototype.onPreLoadComplete=function(){console.log("!!!!!!!!!!!!!!!!onPreLoadComplete"),i.default.Instance.init(this.nodeCrushTailPoint,this.nodeCrushTailContainer,this.nodeCubeCtl,h.default.Instance.loadOther(d.C.OtherName.Cube),new cc.Size(y.default.Instance.row,y.default.Instance.col)),i.default.Instance.preLoad(),C.default.Instance.preLoad(),p.default.Instance.send(d.C.MsgType.InitCube),this.startGame()},t.prototype.onRestart=function(){this.restart()},t.prototype.onTimeOut=function(){y.default.Instance.TouchSwitch=!1,this.stopTimer(),u.default.Instance.show(d.C.UIName.UITipPanel,l.default.Instance.nodeTop,d.C.TipType.TimeOut);var e=this;i.default.Instance.checkAnyCubeIsTween()||y.default.Instance.WaitForEffect||y.default.Instance.WaitForT1?b.default.Instance.setScheduleOnce(function(){e.onTimeOut()},1):(u.default.Instance.hide(d.C.UIName.UITipPanel),i.default.Instance.playAllCubeDownTween(null),e.checkResultNew())},t.prototype.onSetDoubleAttackCube=function(e,t){y.default.Instance.DoubleAttackCubeType=t},t.prototype.onUseStarCube=function(e,t){i.default.Instance.destroyStarCube(i.default.Instance.getCubeItem(t.x,t.y),function(){i.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onUseBombCube=function(e,t){i.default.Instance.destroyNinePlaceCube(i.default.Instance.getCubeItem(t.x,t.y),function(){i.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onUseLightningRow=function(e,t){i.default.Instance.destroyOneRowCube(i.default.Instance.getCubeItem(t.x,t.y),function(){i.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onUseLightningLine=function(e,t){i.default.Instance.destroyOneLineCube(i.default.Instance.getCubeItem(t.x,t.y),function(){i.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onDestroySameColorCube=function(e,t,n){i.default.Instance.destroySameColorCube(t,i.default.Instance.getCubeItem(n.x,n.y),function(){i.default.Instance.crushFinish()}),this._nodeFirstSelectCube=null,this._nodeSecondSelectCube=null},t.prototype.onLoad=function(){y.default.Instance.nodeEffectContainer=this.nodeEffectContainer,C.default.Instance.init(this.nodeEffectContainer),m.default.Instance.init(this.nodeTextContainer)},t.prototype.start=function(){this.refreshUI()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this)},t.prototype.update=function(e){y.default.Instance.TouchSwitch?this._nTimeStay>=this._nTimeSuggestion&&!this._bSuggestion?(i.default.Instance.playSuggestionTween(),this._bSuggestion=!0):this._nTimeStay<this._nTimeSuggestion&&(this._nTimeStay+=e,this._bSuggestion=!1):(this._nTimeStay=0,this.stopSuggestion())},r([T({type:cc.Node,displayName:"\u7279\u6548\u5bb9\u5668"})],t.prototype,"nodeEffectContainer",void 0),r([T({type:cc.Node,displayName:"\u7f51\u683c\u5bf9\u8c61"})],t.prototype,"nodeGrid",void 0),r([T({type:cc.Node,displayName:"\u65b9\u5757\u5bb9\u5668"})],t.prototype,"nodeCubeCtl",void 0),r([T({type:cc.Label,displayName:"\u65f6\u95f4"})],t.prototype,"labTime",void 0),r([T({type:cc.Node,displayName:"\u6587\u672c\u5bb9\u5668"})],t.prototype,"nodeTextContainer",void 0),r([T({type:cc.Node,displayName:"\u6d88\u9664\u62d6\u5c3e\u7279\u6548\u7ed3\u675f\u70b9"})],t.prototype,"nodeCrushTailPoint",void 0),r([T({type:cc.Node,displayName:"\u6d88\u9664\u62d6\u5c3e\u7279\u6548\u5bb9\u5668"})],t.prototype,"nodeCrushTailContainer",void 0),r([T(cc.Label)],t.prototype,"labScore",void 0),r([T(cc.Label)],t.prototype,"labMaxScore",void 0),t=r([P],t)}(c.default);n.default=S,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Common/UserDataMgr":"UserDataMgr","../Tools/PetHero_FYAudioCtl":"PetHero_FYAudioCtl","../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYGlobalVarMgr":"PetHero_FYGlobalVarMgr","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYSDKMgr":"PetHero_FYSDKMgr","../Tools/PetHero_FYScheduleCtl":"PetHero_FYScheduleCtl","../Tools/PetHero_FYTweenMgr":"PetHero_FYTweenMgr","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr","./PetHero_CubeItem":"PetHero_CubeItem","./PetHero_CubeMgr":"PetHero_CubeMgr","./PetHero_EffectMgr":"PetHero_EffectMgr","./PetHero_GridMgr":"PetHero_GridMgr","./PetHero_TextMgr":"PetHero_TextMgr"}],PetHero_UILoadingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"3e4dfMq+4VC2JqcmDHguEi2","PetHero_UILoadingPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Tools/PetHero_FYMessenger"),i=e("../Tools/PetHero_FYBaseUIPanel"),s=e("../Tools/PetHero_FYResMgr"),c=e("../Tools/PetHero_FYUIMgr"),u=e("../Tools/PetHero_FYSDKMgr"),l=cc._decorator,d=l.ccclass,f=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labProgress=null,t._preNum=5,t._curPreNum=0,t}return o(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),a.default.Instance.add(c.default.MsgPreLoadUIComplete,this.onPreLoadComplete,this),a.default.Instance.add(s.default.MsgPreLoadAtlasComplete,this.onPreLoadComplete,this),a.default.Instance.add(s.default.MsgPreLoadEffectComplete,this.onPreLoadComplete,this),a.default.Instance.add(s.default.MsgPreLoadSequenceFrameComplete,this.onPreLoadComplete,this),a.default.Instance.add(s.default.MsgPreLoadOtherComplete,this.onPreLoadComplete,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),a.default.Instance.remove(c.default.MsgPreLoadUIComplete,this.onPreLoadComplete,this),a.default.Instance.remove(s.default.MsgPreLoadAtlasComplete,this.onPreLoadComplete,this),a.default.Instance.remove(s.default.MsgPreLoadEffectComplete,this.onPreLoadComplete,this),a.default.Instance.remove(s.default.MsgPreLoadSequenceFrameComplete,this.onPreLoadComplete,this),a.default.Instance.remove(s.default.MsgPreLoadOtherComplete,this.onPreLoadComplete,this)},t.prototype.onPreLoadComplete=function(){this._curPreNum++,u.default.Instance.isAliGame()&&CatcherSDK.instance().ag&&(CatcherSDK.instance().ag.emit(CatcherSDK.instance().ag.constant.EVENT_LOAD_RES_PROGRESS_CHANGED,{ready:this._curPreNum/this._preNum>=1,progress:this._curPreNum/this._preNum}),console.log("---\x3e ",{ready:this._curPreNum/this._preNum>=1,progress:this._curPreNum/this._preNum})),console.log("\u52a0\u8f7d\u6570\u91cf\uff1a ",this._curPreNum,this._preNum),this._curPreNum>=this._preNum?(this.setActive(!1),this._curPreNum=0,a.default.Instance.send(s.default.MsgPreLoadComplete)):(this.labProgress.string=this._curPreNum+"/"+this._preNum,this.setActive(!0))},t.prototype.start=function(){this.labProgress.string=this._curPreNum+"/"+this._preNum},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this)},r([f({type:cc.Label,displayName:"\u8fdb\u5ea6"})],t.prototype,"labProgress",void 0),t=r([d],t)}(i.default);n.default=p,cc._RF.pop()},{"../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYSDKMgr":"PetHero_FYSDKMgr","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr"}],PetHero_UIMessageBoxPanel:[function(e,t,n){"use strict";cc._RF.push(t,"5b93b3rA69JGIbW600B6p/G","PetHero_UIMessageBoxPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Tools/PetHero_FYBaseUIPanel"),i=e("../Tools/PetHero_FYUIMgr"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labContent=null,t.btnOK=null,t.btnCancel=null,t}return o(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnOK.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnOK,this),this.btnCancel.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtnCancel,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnOK.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnOK,this),this.btnCancel.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtnCancel,this)},t.prototype.onShow=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];cc.log("msgType = "+e+" param = "+t),this.labContent.string=t[0]},t.prototype.onClickBtnOK=function(){i.default.Instance.close(this.node.name)},t.prototype.onClickBtnCancel=function(){i.default.Instance.close(this.node.name)},r([u({type:cc.Label,displayName:"\u6587\u672c"})],t.prototype,"labContent",void 0),r([u({type:cc.Button,displayName:"\u786e\u5b9a\u6309\u94ae"})],t.prototype,"btnOK",void 0),r([u({type:cc.Button,displayName:"\u53d6\u6d88\u6309\u94ae"})],t.prototype,"btnCancel",void 0),t=r([c],t)}(a.default);n.default=l,cc._RF.pop()},{"../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr"}],PetHero_UIRandomDoubleCubePanel:[function(e,t,n){"use strict";cc._RF.push(t,"24c73VsLWhA66x/dBAvG0XA","PetHero_UIRandomDoubleCubePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Tools/PetHero_FYBaseUIPanel"),i=e("../Tools/PetHero_FYSequenceFrameControl"),s=e("../Tools/PetHero_FYTweenMgr"),c=e("../Tools/PetHero_FYMessenger"),u=e("../Common/PetHero_C"),l=e("../Tools/PetHero_FYUIMgr"),d=e("../Tools/PetHero_FYUtility"),f=cc._decorator,p=f.ccclass,h=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sequenceFrameControl=null,t.nodeDouble=null,t}return o(t,e),t.prototype.setStartIndex=function(e){this.sequenceFrameControl.setCurIndex(e)},t.prototype.onTimeOut=function(){this.sequenceFrameControl.stop();var e=this.nodeDouble.getPosition();s.default.moveTo(this.sequenceFrameControl.node,1,e.x,e.y);var t=this.sequenceFrameControl.getCurIndex(),n=this.nodeDouble.getScale();s.default.scaleTo(this.sequenceFrameControl.node,1,n,n,0,function(){c.default.Instance.send(u.C.MsgType.SetDoubleAttackCube,t),l.default.Instance.close(u.C.UIName.UIRandomDoubleCubePanel)})},t.prototype.onLoad=function(){this.setStartIndex(d.default.getRangeRandom(0,u.C.CubeType.Length-1))},t.prototype.start=function(){this.schedule(this.onTimeOut,0,0,2)},r([h({type:i.default,displayName:"\u5e8f\u5217\u5e27\u52a8\u753b\u63a7\u5236\u5668"})],t.prototype,"sequenceFrameControl",void 0),r([h({type:cc.Node,displayName:"\u53cc\u500d\u4f24\u5bb3\u8282\u70b9"})],t.prototype,"nodeDouble",void 0),t=r([p],t)}(a.default);n.default=y,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYSequenceFrameControl":"PetHero_FYSequenceFrameControl","../Tools/PetHero_FYTweenMgr":"PetHero_FYTweenMgr","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr","../Tools/PetHero_FYUtility":"PetHero_FYUtility"}],PetHero_UITipPanel:[function(e,t,n){"use strict";cc._RF.push(t,"90649S5ne1KQagjco3eP+Np","PetHero_UITipPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Tools/PetHero_FYBaseUIPanel"),i=e("../Tools/PetHero_FYUIMgr"),s=e("../Common/PetHero_C"),c=e("../Tools/PetHero_FYMessenger"),u=cc._decorator,l=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeTimeOut=null,t.labTips=null,t.btnRestart=null,t}return o(t,e),t.prototype.addListener=function(){e.prototype.addListener.call(this),this.btnRestart.on(cc.Node.EventType.TOUCH_END,this.onClickBtnRestart,this)},t.prototype.removeListener=function(){e.prototype.removeListener.call(this),this.btnRestart.off(cc.Node.EventType.TOUCH_END,this.onClickBtnRestart,this)},t.prototype.start=function(){},t.prototype.onShow=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.nodeTimeOut.active=t[0]==s.C.TipType.TimeOut,t[0]==s.C.TipType.Win?this.labTips.string="\u606d\u559c\u60a8\u83b7\u80dc\uff01":t[0]==s.C.TipType.Lose?this.labTips.string="\u5931\u8d25\u4e43\u5175\u5bb6\u5e38\u4e8b!":t[0]==s.C.TipType.DogFall&&(this.labTips.string="\u5e73\u5c40\uff0c\u5927\u4fa0\u8bf7\u91cd\u5934\u518d\u6765")},t.prototype.onClickBtnRestart=function(){c.default.Instance.send(s.C.MsgType.Restart),i.default.Instance.close(this.node.name)},r([d({type:cc.Node,displayName:"\u65f6\u95f4\u5230"})],t.prototype,"nodeTimeOut",void 0),r([d({type:cc.Label,displayName:"\u63d0\u793a\u6587\u672c"})],t.prototype,"labTips",void 0),r([d({type:cc.Node,displayName:"\u91cd\u6765\u6309\u94ae"})],t.prototype,"btnRestart",void 0),t=r([l],t)}(a.default);n.default=f,cc._RF.pop()},{"../Common/PetHero_C":"PetHero_C","../Tools/PetHero_FYBaseUIPanel":"PetHero_FYBaseUIPanel","../Tools/PetHero_FYMessenger":"PetHero_FYMessenger","../Tools/PetHero_FYUIMgr":"PetHero_FYUIMgr"}],UserDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"9ee636Bd0tGSLB1guILww0W","UserDataMgr");var o=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./PetHero_C"),a=e("../Tools/PetHero_FYResMgr"),i=e("../Tools/PetHero_FYSDKMgr"),s=cc._decorator,c=s.ccclass,u=(s.property,function(){function e(){this.row=8,this.col=8,this.lietCanUseProp=[r.C.CubeType.T_0,r.C.CubeType.T_1,r.C.CubeType.T_2,,r.C.CubeType.T_4,r.C.CubeType.T_5],this.openFraming=1,this.fpsExpect=5,this._maxLength=620,this._cubeNum=6,this._gameMode=r.C.GameMode.ThreeRoundRoundMode,this._bBloodTween=!1,this._startTime=0,this._seat=-1,this._gameId=-1,this._groupId="-1",this._fightMode=r.C.FightMode.OneVsAI,this._nDoubleAttackCubeType=r.C.CubeType.A,this._bInk=!1,this._nRemainTime=120,this._nRound=1,this._myDamage=0,this._friendDamage=0,this._enemyDamage=0,this._enemyFriendDamage=0,this._listDamage=[0,0,0,0],this._myCurBlood=0,this._enemyCurBlood=0,this._bTouchSwitch=!1,this._nDropWaitTime=0,this._bWaitForEffect=!1,this._bWaitForT1=!1,this._bDoubleAttack=!1,this._bInkSwitch=!1,this._nodeEffectContainer=null,this._nodeFinger=null,this._isMainSeat=!1,this._crushCheckedDelay=.1,this._bAttackStage=!1,this.bNeedSetSelfAdaption=!1,this.CurScore=0,this._maxScore=-1}var t;return t=e,Object.defineProperty(e.prototype,"MaxLength",{get:function(){return this._maxLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cubeNum",{get:function(){return this.GameMode==r.C.GameMode.OneRoundInstantMode?this._cubeNum=5:this._cubeNum=6,this._cubeNum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GameMode",{get:function(){return this._gameMode},set:function(e){this._gameMode=e},enumerable:!0,configurable:!0}),e.prototype.clearData=function(){this._nodeFinger=null},Object.defineProperty(e.prototype,"OneRoundTime",{get:function(){return this.GameMode,r.C.GameMode.OneRoundInstantMode,60},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsBloodTween",{get:function(){return this._bBloodTween},set:function(e){this._bBloodTween=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StartTime",{get:function(){return this._startTime},set:function(e){this._startTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Seat",{get:function(){return this._seat},set:function(e){this._seat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GameId",{get:function(){return this._gameId},set:function(e){this._gameId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GroupId",{get:function(){return this._groupId},set:function(e){this._groupId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FightMode",{get:function(){return this._fightMode},set:function(e){this._fightMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DoubleAttackCubeType",{get:function(){return this._nDoubleAttackCubeType},set:function(e){this._nDoubleAttackCubeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Ink",{get:function(){return this._bInk},set:function(e){this._bInk=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RemainTime",{get:function(){return this._nRemainTime},set:function(e){this._nRemainTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Round",{get:function(){return this._nRound},set:function(e){this._nRound=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyDamage",{get:function(){return this._myDamage},set:function(e){this._myDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FriendDamage",{get:function(){return this._friendDamage},set:function(e){this._friendDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnemyDamage",{get:function(){return this._enemyDamage},set:function(e){this._enemyDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnemyFriendDamage",{get:function(){return this._enemyFriendDamage},set:function(e){this._enemyFriendDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ListDamage",{get:function(){return this._listDamage},set:function(e){this._listDamage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyBlood",{get:function(){return this._myCurBlood},set:function(e){this._myCurBlood=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnemyBlood",{get:function(){return this._enemyCurBlood},set:function(e){this._enemyCurBlood=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TouchSwitch",{get:function(){return this._bTouchSwitch},set:function(e){this._bTouchSwitch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DropWaitTime",{get:function(){return this._nDropWaitTime},set:function(e){this._nDropWaitTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WaitForEffect",{get:function(){return this._bWaitForEffect},set:function(e){this._bWaitForEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WaitForT1",{get:function(){return this._bWaitForT1},set:function(e){this._bWaitForT1=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DoubleAttackSwitch",{get:function(){return this._bDoubleAttack},set:function(e){this._bDoubleAttack=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InkSwitch",{get:function(){return this._bInkSwitch},set:function(e){this._bInkSwitch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeEffectContainer",{get:function(){return this._nodeEffectContainer},set:function(e){this._nodeEffectContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NodeFinger",{get:function(){return this._nodeFinger||(this._nodeFinger=cc.instantiate(a.default.Instance.loadOther(r.C.OtherName.Finger)),this._nodeFinger.parent=this.nodeEffectContainer),this._nodeFinger},set:function(e){this._nodeFinger=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMainSeat",{get:function(){return this._isMainSeat},set:function(e){this._isMainSeat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CrushCheckDelay",{get:function(){return this._crushCheckedDelay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsAttackStage",{get:function(){return this._bAttackStage},set:function(e){this._bAttackStage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxScore",{get:function(){return this._maxScore<0&&(this._maxScore=parseInt(i.default.Instance.loadLocalData(r.C.DataKey.MaxScore,"0"))),this._maxScore},set:function(e){this._maxScore!=e&&(this._maxScore=e,i.default.Instance.saveLocalData(r.C.DataKey.MaxScore,this._maxScore))},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=o([c],e)}());n.default=u,cc._RF.pop()},{"../Tools/PetHero_FYResMgr":"PetHero_FYResMgr","../Tools/PetHero_FYSDKMgr":"PetHero_FYSDKMgr","./PetHero_C":"PetHero_C"}]},{},["PetHero_C","UserDataMgr","PetHero_AttackMgr","PetHero_CellItem","PetHero_CubeInfo","PetHero_CubeItem","PetHero_CubeMgr","PetHero_EffectMgr","PetHero_GridMgr","PetHero_TextMgr","PetHero_UIGamePanel","PetHero_Main","PetHero_FYAudioCtl","PetHero_FYBaseNode","PetHero_FYBaseUIPanel","PetHero_FYEffectControl","PetHero_FYEffectItem","PetHero_FYGlobalVarMgr","PetHero_FYMessenger","PetHero_FYResMgr","PetHero_FYSDKMgr","PetHero_FYScheduleCtl","PetHero_FYSequenceFrameControl","PetHero_FYTweenMgr","PetHero_FYUIMgr","PetHero_FYUtility","PetHero_UILoadingPanel","PetHero_UIMessageBoxPanel","PetHero_UIRandomDoubleCubePanel","PetHero_UITipPanel"]);