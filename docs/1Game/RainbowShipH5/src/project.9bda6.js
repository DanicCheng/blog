require=function i(r,c,s){function l(t,e){if(!c[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var a=c[t]={exports:{}};r[t][0].call(a.exports,function(e){return l(r[t][1][e]||e)},a,a.exports,i,r,c,s)}return c[t].exports}for(var d="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2ad00nRKgRKrYIcZ6YNw+aX","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./FYMessenger"),i=e("./C"),r=e("./FYUtility"),n=cc._decorator,c=n.ccclass,s=n.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeAudio=null,e.audioClick=null,e.audioExplosion=null,e.audioGetStar=null,e._audidBgId=-1e3,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){cc.game.addPersistRootNode(this.node),cc.loader.loadRes("audio/bgm",cc.AudioClip,function(e,t){var o=r.default.loadLocalData(i.DataKey.MusicNum,1),n=cc.audioEngine.play(t,!0,parseFloat(o));a.default.Instance.send(i.MsgType.PlayBgAudioId,n)})},e.prototype.onGameOver=function(){this.audioExplosion.play()},e.prototype.onPlayClick=function(){this.audioClick.play()},e.prototype.onPlayGetStar=function(){this.audioGetStar.play()},e.prototype.onSetBgId=function(e,t){this._audidBgId=t},e.prototype.onChangeSound=function(e,t,o){"sound"==t?(this.audioClick.volume=o,this.audioGetStar.volume=o,this.audioExplosion.volume=o,r.default.saveLocalData(i.DataKey.SoundNum,o)):(-1e3==this._audidBgId||cc.audioEngine.setVolume(this._audidBgId,o),r.default.saveLocalData(i.DataKey.MusicNum,o))},e.prototype.onEnable=function(){a.default.Instance.add(i.MsgType.PlayBgAudioId,this.onSetBgId,this),a.default.Instance.add(i.MsgType.GameOver,this.onGameOver,this),a.default.Instance.add(i.MsgType.GetStar,this.onPlayGetStar,this),a.default.Instance.add(i.MsgType.ClickBtn,this.onPlayClick,this),a.default.Instance.add(i.MsgType.ChangeSoundNum,this.onChangeSound,this);var e=r.default.loadLocalData(i.DataKey.SoundNum,1);this.onChangeSound(i.MsgType.ChangeSoundNum,"sound",parseInt(e))},e.prototype.onDisable=function(){a.default.Instance.remove(i.MsgType.PlayBgAudioId,this.onSetBgId,this),a.default.Instance.remove(i.MsgType.GameOver,this.onGameOver,this),a.default.Instance.remove(i.MsgType.GetStar,this.onPlayGetStar,this),a.default.Instance.remove(i.MsgType.ClickBtn,this.onPlayClick,this),a.default.Instance.remove(i.MsgType.ChangeSoundNum,this.onChangeSound,this)},__decorate([s({type:cc.Node,displayName:"音效组件"})],e.prototype,"nodeAudio",void 0),__decorate([s({type:cc.AudioSource,displayName:"点击音效"})],e.prototype,"audioClick",void 0),__decorate([s({type:cc.AudioSource,displayName:"爆炸音效"})],e.prototype,"audioExplosion",void 0),__decorate([s({type:cc.AudioSource,displayName:"获得星星音效"})],e.prototype,"audioGetStar",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./C":"C","./FYMessenger":"FYMessenger","./FYUtility":"FYUtility"}],BgControl:[function(e,t,o){"use strict";cc._RF.push(t,"34cd0bYJGtKL5xVw1+C+z4f","BgControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,i=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBg1=null,e.nodeBg2=null,e.nodeBg1Copy=null,e.nodeBg2Copy=null,e.speed=20,e}return __extends(e,t),e.prototype.updatePos=function(e){this.nodeBg1.position.y<-1334&&this.nodeBg1.setPositionY(1334),this.nodeBg2.position.y<-1334&&this.nodeBg2.setPositionY(1334),this.nodeBg1Copy.position.y<-1334&&this.nodeBg1Copy.setPositionY(1334),this.nodeBg2Copy.position.y<-1334&&this.nodeBg2Copy.setPositionY(1334),this.nodeBg1.setPositionY(this.nodeBg1.position.y-e*this.speed),this.nodeBg2.setPositionY(this.nodeBg2.position.y-e*this.speed),this.nodeBg1Copy.setPositionY(this.nodeBg1Copy.position.y-e*this.speed),this.nodeBg2Copy.setPositionY(this.nodeBg2Copy.position.y-e*this.speed)},e.prototype.update=function(e){this.updatePos(e)},__decorate([i({type:cc.Node,displayName:"背景1"})],e.prototype,"nodeBg1",void 0),__decorate([i({type:cc.Node,displayName:"背景2"})],e.prototype,"nodeBg2",void 0),__decorate([i({type:cc.Node,displayName:"背景1拷贝"})],e.prototype,"nodeBg1Copy",void 0),__decorate([i({type:cc.Node,displayName:"背景2拷贝"})],e.prototype,"nodeBg2Copy",void 0),__decorate([i({type:cc.Integer,displayName:"速度"})],e.prototype,"speed",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],C:[function(e,t,o){"use strict";var n,a,i,r;cc._RF.push(t,"92915tgSLdCq6KZG372R4cT","C"),Object.defineProperty(o,"__esModule",{value:!0}),(n=o.DataKey||(o.DataKey={})).MaxRoleDistance="RainbowShip_MaxRoleDistance",n.StarNum="RainbowShip_StarNum",n.RoleId="RainbowShip_RoleId",n.SoundNum="RainbowShip_SoundNum",n.MusicNum="RainbowShip_MusicNum",n.ShopShowADTime="RainbowShip_ShopShowADTime",n.ShopShowADNum="RainbowShip_ShopShowADNum",(o.JsonDataKey||(o.JsonDataKey={})).HadRoleId="RainbowShip_HadRoleId",(a=o.PlanetType||(o.PlanetType={}))[a.A=0]="A",a[a.B=1]="B",a[a.C=2]="C",a[a.Length=3]="Length",(i=o.RoleType||(o.RoleType={}))[i.A=0]="A",i[i.B=1]="B",i[i.C=2]="C",i[i.D=3]="D",i[i.E=4]="E",i[i.Length=5]="Length",(r=o.MsgType||(o.MsgType={}))[r.GameOver=0]="GameOver",r[r.Restart=1]="Restart",r[r.Rotating=2]="Rotating",r[r.ClickBtn=3]="ClickBtn",r[r.GetStar=4]="GetStar",r[r.PlayBgAudioId=5]="PlayBgAudioId",r[r.ChangeSoundNum=6]="ChangeSoundNum",r[r.Revive=7]="Revive",cc._RF.pop()},{}],EffectControl:[function(e,t,o){"use strict";cc._RF.push(t,"98dbbFKC5xK3qVSCQ+IPmc5","EffectControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,i=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.partical=null,e}return __extends(e,t),e.prototype.playPartical=function(){this.partical.node.active=!0,this.partical.resetSystem(),cc.log("---------------playPartical----------------")},e.prototype.stopPartical=function(){this.partical.node.active=!1,this.partical.stopSystem(),cc.log("---------------stopPartical----------------")},e.prototype.start=function(){},__decorate([i({type:cc.ParticleSystem})],e.prototype,"partical",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],FYMessenger:[function(e,t,o){"use strict";cc._RF.push(t,"f80f02Sw+VMqpCiLpn5YkA/","FYMessenger"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.listeners={}}return e.prototype.add=function(e,t,o){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(new a(t,o))},e.prototype.remove=function(e,t,o){var n=this.listeners[e];if(n){for(var a=n.length,i=0;i<a;i++){if(n[i].compar(o)){n.splice(i,1);break}}0==n.length&&delete this.listeners[e]}},e.prototype.send=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.listeners[e];if(n)for(var a=n.length,i=0;i<a;i++){var r=n[i];r.notify.apply(r,[e].concat(t))}},e.Instance=new e,e}();o.default=n;var a=function(){function e(e,t){this.callback=null,this.context=null;this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.callback).call.apply(e,[this.context].concat(t))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],FYSDKMgr:[function(e,t,o){"use strict";cc._RF.push(t,"f5f0eUn6z9G6Jkl+rUEs+Uc","FYSDKMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./UserDataMgr"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){this.test={},this.test2={},this.FB_APP_ID="445079669300491",this.FB_AD_ID="445079669300491_445081542633637"}var a;return(a=e).prototype.saveLocalData=function(e,t){cc.sys.localStorage.setItem(e,t)},e.prototype.loadLocalData=function(e,t){return void 0===t&&(t="0"),cc.sys.localStorage.getItem(e)||t},e.prototype.saveLocalJsonData=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.prototype.loadLocalJsonData=function(e){return JSON.parse(cc.sys.localStorage.getItem(e)||JSON.stringify({}))},e.prototype.removeLocalData=function(e){cc.sys.localStorage.removeItem(e)},e.prototype.removeAllLocalData=function(){cc.sys.localStorage.clear()},e.prototype.FBIsFackBook=function(){return"undefined"!=typeof FBInstant},e.prototype.FBlogEvent=function(e,t,o){a.Instance.FBIsFackBook()&&FBInstant.logEvent(e,t,o)},e.prototype.FBPreLoadRewardedVideo=function(e){a.Instance.FBIsFackBook()&&FBInstant.getRewardedVideoAsync(e).then(function(e){return n.default.Instance.FBADInstance=e,n.default.Instance.FBADInstance.loadAsync()}).then(function(){console.log("Rewarded video preloaded")}).catch(function(e){console.error("Rewarded video failed to preload: "+e.message),n.default.Instance.FBADInstance=null})},e.prototype.FBShowAD=function(e,t){if(a.Instance.FBIsFackBook())if(null==n.default.Instance.FBADInstance){var o=null;FBInstant.getRewardedVideoAsync(e).then(function(e){return(o=e).loadAsync()}).then(function(){return o.showAsync()}).then(function(){console.log("Rewarded video watched successfully"),n.default.Instance.FBADInstance=null,t&&t()}).catch(function(e){n.default.Instance.FBADInstance=null,console.error(e.message)})}else n.default.Instance.FBADInstance.showAsync().then(function(){console.log("Rewarded video watched successfully"),n.default.Instance.FBADInstance=null,t&&t()}).catch(function(e){n.default.Instance.FBADInstance=null,console.error(e.message)})},e.prototype.FBShare=function(e,t,o,n){void 0===e&&(e="SHARE"),void 0===t&&(t=""),void 0===o&&(o="超级好玩的游戏"),void 0===n&&(n=null),a.Instance.FBIsFackBook()&&FBInstant.shareAsync({intent:e,image:t,text:o,data:n})},e.prototype.FBSuggestCreateShortcut=function(){a.Instance.FBIsFackBook()&&FBInstant.canCreateShortcutAsync().then(function(e){e&&FBInstant.createShortcutAsync().then(function(){console.log("Shortcut created")}).catch(function(){console.log("Shortcut not created")})})},e.Instance=new a,e=a=__decorate([i],e)}());o.default=r,cc._RF.pop()},{"./UserDataMgr":"UserDataMgr"}],FYUtility:[function(e,t,o){"use strict";cc._RF.push(t,"6160aqr+vBFra2J0JFy8hCj","FYUtility"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,i=(n.property,function(){function e(){}var o;return(o=e).changeSpriteFrame=function(n,e,a){cc.loader.loadRes(e,cc.SpriteAtlas,function(e,t){if(t instanceof cc.SpriteAtlas){var o=t.getSpriteFrame(a);n.spriteFrame=o}})},e.getRandomValueDif=function(e,t,o){for(var n=new Array,a=o?t-e<o?t-e:o:1,i=e,r=0;i<=t;i++,r++)n[r]=i;var c=[];n.sort(function(){return.5-Math.random()});for(var s=0;s<a;s++){var l=Math.floor(Math.random()*n.length);c.push(n[l]);var d=n[l];n[l]=n[n.length-1],n[n.length-1]=d,n.pop()}return c},e.getRangeRandom=function(e,t){return o.getRandomValueDif(e,t,1)[0]},e.addChild=function(e,t,o,n){if(void 0===o&&(o=cc.Vec2.ZERO),void 0===n&&(n=!0),null!=e&&null!=t){cc.Vec2.ZERO;null!=o&&o;null!=n&&n;var a=cc.instantiate(t);return a.parent=e,a.position=o,a.active=n,a}cc.error("--------------------\x3e>>>>>>>>>>>>>>parent or child is undefined!!!")},e.saveLocalData=function(e,t){cc.sys.localStorage.setItem(e,t)},e.loadLocalData=function(e,t){void 0===t&&(t=0);var o=cc.sys.localStorage.getItem(e);return null==o?t:o},e.saveLocalJsonData=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.loadLocalJsonData=function(e){return JSON.parse(cc.sys.localStorage.getItem(e))},e.removeLocalData=function(e){cc.sys.localStorage.removeItem(e)},e.isSameDay=function(e,t){void 0===t&&(t=Date.now());var o=Number(e),n=Number(t);if(o&&n){var a=new Date(o),i=new Date(n);return a.setHours(0,0,0,0)==i.setHours(0,0,0,0)}return!1},e=o=__decorate([a],e)}());o.default=i,cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"c7c51SCfWVITZXQhgLq/QKT","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./UserDataMgr"),a=e("./FYMessenger"),i=e("./C"),r=e("./FYSDKMgr"),c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labDistance=null,e.labStar=null,e.gameOver=null,e.nodeBtnRestart=null,e.btnWatchAdRevive=null,e.btnUseGoldRevive=null,e.btnSkip=null,e.nodeGameOver=null,e.labScore=null,e.labMaxScore=null,e.labGameOverDistance=null,e.nodeNewRecord=null,e.labNewRecord=null,e.arrayLeftArrow=[],e.arrayRightArrow=[],e.line=null,e.animGameOver=null,e._nReviveNum=0,e._deadPointY=0,e}return __extends(e,t),e.prototype.update=function(e){this.labDistance.string=n.default.Instance.roleDistance.toString()+"M",this.labStar.string="X"+n.default.Instance.starNum.toString()},e.prototype.addListener=function(){a.default.Instance.add(i.MsgType.GameOver,this.onGameOver,this),this.nodeBtnRestart.on(cc.Node.EventType.TOUCH_START,this.onBtnRestart,this),this.btnWatchAdRevive.on(cc.Node.EventType.TOUCH_START,this.onBtnWatchAdRevive,this),this.btnUseGoldRevive.on(cc.Node.EventType.TOUCH_START,this.onBtnUseGoldRevive,this),this.btnSkip.on(cc.Node.EventType.TOUCH_START,this.onBtnSkip,this)},e.prototype.removeListener=function(){a.default.Instance.remove(i.MsgType.GameOver,this.onGameOver,this),this.nodeBtnRestart.off(cc.Node.EventType.TOUCH_START,this.onBtnRestart,this),this.btnWatchAdRevive.off(cc.Node.EventType.TOUCH_START,this.onBtnWatchAdRevive,this),this.btnUseGoldRevive.off(cc.Node.EventType.TOUCH_START,this.onBtnUseGoldRevive,this),this.btnSkip.off(cc.Node.EventType.TOUCH_START,this.onBtnSkip,this)},e.prototype.playNewRecordTween=function(){this.nodeNewRecord.active=!0;for(var e=0;e<this.arrayLeftArrow.length;e++)this.arrayLeftArrow[e].active=!0,this.arrayRightArrow[e].active=!0;this.nodeNewRecord.opacity=0;var t=cc.fadeTo(.5,255),o=cc.fadeTo(.2,0),n=cc.fadeTo(.2,255),a=cc.fadeTo(.2,0),i=cc.fadeTo(.2,255),r=cc.sequence(cc.delayTime(.4),o,cc.delayTime(.2),n,cc.delayTime(1)).repeatForever(),c=cc.sequence(cc.delayTime(.4),cc.delayTime(.4),o,cc.delayTime(.2),n,cc.delayTime(.6)).repeatForever(),s=cc.sequence(cc.delayTime(.4),cc.delayTime(.8),o,cc.delayTime(.2),n,cc.delayTime(.2)).repeatForever(),l=cc.sequence(cc.delayTime(.4),a,cc.delayTime(.2),i,cc.delayTime(1)).repeatForever(),d=cc.sequence(cc.delayTime(.4),cc.delayTime(.4),a,cc.delayTime(.2),i,cc.delayTime(.6)).repeatForever(),p=cc.sequence(cc.delayTime(.4),cc.delayTime(.8),a,cc.delayTime(.2),i,cc.delayTime(.2)).repeatForever();this.arrayLeftArrow[0].runAction(r),this.arrayLeftArrow[1].runAction(c),this.arrayLeftArrow[2].runAction(s),this.arrayRightArrow[0].runAction(l),this.arrayRightArrow[1].runAction(d),this.arrayRightArrow[2].runAction(p),this.nodeNewRecord.runAction(t)},e.prototype.revive=function(){this.gameOver.active=!1,this.labDistance.node.active=!0,this.labStar.node.parent.active=!0,a.default.Instance.send(i.MsgType.Revive)},e.prototype.onGameOver=function(){this.nodeGameOver.opacity=0,this.labScore.node.parent.opacity=0,this.nodeBtnRestart.opacity=0,this.nodeBtnRestart.active=!1,this.gameOver.active=!0,n.default.Instance.maxRoleDistance<n.default.Instance.roleDistance&&(n.default.Instance.maxRoleDistance=n.default.Instance.roleDistance,n.default.Instance.bNewRecord=!0),this.labScore.string=n.default.Instance.roleDistance.toString(),this.labMaxScore.string=n.default.Instance.maxRoleDistance.toString(),this.labGameOverDistance.string=n.default.Instance.roleDistance.toString()+"M",this.labDistance.node.active=!1,this.labStar.node.parent.active=!1,this.animGameOver.play(),n.default.Instance.bNewRecord&&(this.line.active=!1,n.default.Instance.bNewRecord=!1,this.playNewRecordTween(),this.labNewRecord.string=n.default.Instance.maxRoleDistance.toString()),this.btnSkip.active=this._nReviveNum<2,this.btnWatchAdRevive.active=0==this._nReviveNum,this.btnUseGoldRevive.active=1==this._nReviveNum,this.nodeBtnRestart.active=2<=this._nReviveNum,n.default.Instance.starNum<3&&1<=this._nReviveNum&&(this.btnSkip.active=!1,this.btnWatchAdRevive.active=!1,this.btnUseGoldRevive.active=!1,this.nodeBtnRestart.active=!0)},e.prototype.onBtnRestart=function(){r.default.Instance.FBlogEvent("ClickBtnRestart"),a.default.Instance.send(i.MsgType.ClickBtn),n.default.Instance.roleDistance=0,cc.director.loadScene("MainMenu"),this._nReviveNum=0},e.prototype.onBtnWatchAdRevive=function(){if(r.default.Instance.FBlogEvent("ClickBtnWatchAdRevive"),r.default.Instance.FBIsFackBook()){var e=this;r.default.Instance.FBShowAD(r.default.Instance.FB_AD_ID,function(){e._nReviveNum++,e.revive(),r.default.Instance.FBPreLoadRewardedVideo(r.default.Instance.FB_AD_ID)})}else this._nReviveNum++,this.revive()},e.prototype.onBtnUseGoldRevive=function(){r.default.Instance.FBlogEvent("ClickBtnUseGoldRevive"),this._nReviveNum++,n.default.Instance.starNum-=3,n.default.Instance.starNum<0&&(n.default.Instance.starNum=0),this.revive()},e.prototype.onBtnSkip=function(){r.default.Instance.FBlogEvent("ClickBtnSkip"),this.btnUseGoldRevive.active=!1,this.btnWatchAdRevive.active=!1,this.btnSkip.active=!1,this.nodeBtnRestart.opacity=255,this.nodeBtnRestart.active=!0},e.prototype.onEnable=function(){this.addListener()},e.prototype.onDisable=function(){this.removeListener()},__decorate([l({type:cc.Label,displayName:"飞行距离"})],e.prototype,"labDistance",void 0),__decorate([l({type:cc.Label,displayName:"星星数"})],e.prototype,"labStar",void 0),__decorate([l({type:cc.Node,displayName:"结束界面"})],e.prototype,"gameOver",void 0),__decorate([l({type:cc.Node,displayName:"重来按钮"})],e.prototype,"nodeBtnRestart",void 0),__decorate([l(cc.Node)],e.prototype,"btnWatchAdRevive",void 0),__decorate([l(cc.Node)],e.prototype,"btnUseGoldRevive",void 0),__decorate([l(cc.Node)],e.prototype,"btnSkip",void 0),__decorate([l({type:cc.Node,displayName:"结束标题"})],e.prototype,"nodeGameOver",void 0),__decorate([l({type:cc.Label,displayName:"分数"})],e.prototype,"labScore",void 0),__decorate([l({type:cc.Label,displayName:"最高分数"})],e.prototype,"labMaxScore",void 0),__decorate([l({type:cc.Label,displayName:"距离"})],e.prototype,"labGameOverDistance",void 0),__decorate([l({type:cc.Node,displayName:"新纪录"})],e.prototype,"nodeNewRecord",void 0),__decorate([l({type:cc.Label,displayName:"新纪录数值"})],e.prototype,"labNewRecord",void 0),__decorate([l({type:cc.Node,displayName:"左边箭头数组"})],e.prototype,"arrayLeftArrow",void 0),__decorate([l({type:cc.Node,displayName:"右边箭头数组"})],e.prototype,"arrayRightArrow",void 0),__decorate([l({type:cc.Node,displayName:"记录线"})],e.prototype,"line",void 0),__decorate([l(cc.Animation)],e.prototype,"animGameOver",void 0),e=__decorate([s],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./C":"C","./FYMessenger":"FYMessenger","./FYSDKMgr":"FYSDKMgr","./UserDataMgr":"UserDataMgr"}],LineContainer:[function(e,t,o){"use strict";cc._RF.push(t,"7e789KtXGVAZ7LVWgBvLBrf","LineContainer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./FYMessenger"),a=e("./C"),i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeLineLeft=null,e.nodeLineRight=null,e.nodeRole=null,e.nodeLineLeftGlowBlue=null,e.nodeLineLeftGlowRed=null,e.particleLeft=null,e.nodeLeftLineSequence=null,e.nodeLineRightGlowBlue=null,e.nodeLineRightGlowRed=null,e.particleRight=null,e.nodeRightLineSequence=null,e._leftCollider=null,e._rightCollider=null,e._bOpenCollider=!0,e}return __extends(e,t),e.prototype.initComponent=function(){this._leftCollider=this.nodeLineLeft.getComponent(cc.BoxCollider),this._rightCollider=this.nodeLineRight.getComponent(cc.BoxCollider)},e.prototype.addListener=function(){n.default.Instance.add(a.MsgType.Rotating,this.onRotating,this)},e.prototype.removeListener=function(){n.default.Instance.remove(a.MsgType.Rotating,this.onRotating,this)},e.prototype.enableCollider=function(e){this._bOpenCollider=e,this._leftCollider.enabled=this._bOpenCollider,this._rightCollider.enabled=this._bOpenCollider,this.nodeLineLeftGlowBlue.active=!this._bOpenCollider,this.nodeLineLeftGlowRed.active=this._bOpenCollider,this.particleLeft.startColor=this._bOpenCollider?cc.hexToColor("#FF8888"):cc.hexToColor("#79A9FF"),this.particleLeft.endColor=this._bOpenCollider?cc.hexToColor("#FF8888"):cc.hexToColor("#79A9FF"),this.nodeLeftLineSequence.active=this._bOpenCollider,this.nodeLineRightGlowBlue.active=!this._bOpenCollider,this.nodeLineRightGlowRed.active=this._bOpenCollider,this.particleRight.startColor=this._bOpenCollider?cc.hexToColor("#FF8888"):cc.hexToColor("#79A9FF"),this.particleRight.endColor=this._bOpenCollider?cc.hexToColor("#FF8888"):cc.hexToColor("#79A9FF"),this.nodeRightLineSequence.active=this._bOpenCollider},e.prototype.onRotating=function(e,t){this.enableCollider(!t)},e.prototype.start=function(){this.initComponent()},e.prototype.onEnable=function(){this.addListener()},e.prototype.onDisable=function(){this.removeListener()},e.prototype.update=function(e){this.nodeLineLeft.setPositionY(this.nodeRole.position.y),this.nodeLineRight.setPositionY(this.nodeRole.position.y)},__decorate([c({type:cc.Node,displayName:"左线"})],e.prototype,"nodeLineLeft",void 0),__decorate([c({type:cc.Node,displayName:"右线"})],e.prototype,"nodeLineRight",void 0),__decorate([c({type:cc.Node,displayName:"角色对象"})],e.prototype,"nodeRole",void 0),__decorate([c({type:cc.Node,displayName:"左线蓝"})],e.prototype,"nodeLineLeftGlowBlue",void 0),__decorate([c({type:cc.Node,displayName:"左线红"})],e.prototype,"nodeLineLeftGlowRed",void 0),__decorate([c({type:cc.ParticleSystem,displayName:"左线粒子"})],e.prototype,"particleLeft",void 0),__decorate([c({type:cc.Node,displayName:"左线序列"})],e.prototype,"nodeLeftLineSequence",void 0),__decorate([c({type:cc.Node,displayName:"右线蓝"})],e.prototype,"nodeLineRightGlowBlue",void 0),__decorate([c({type:cc.Node,displayName:"右线红"})],e.prototype,"nodeLineRightGlowRed",void 0),__decorate([c({type:cc.ParticleSystem,displayName:"右线粒子"})],e.prototype,"particleRight",void 0),__decorate([c({type:cc.Node,displayName:"右线序列"})],e.prototype,"nodeRightLineSequence",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./C":"C","./FYMessenger":"FYMessenger"}],MainMenu:[function(e,t,o){"use strict";cc._RF.push(t,"22e04fU+4pI+J/5BKkWtKH0","MainMenu"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UserDataMgr"),c=e("./FYUtility"),s=e("./C"),l=e("./FYMessenger"),d=e("./FYSDKMgr"),n=cc._decorator,a=n.ccclass,i=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniRole=null,e.aniClickPlay=null,e.btnPlay=null,e.btnShop=null,e.btnSetting=null,e.btnShare=null,e.labScore=null,e.sprRole=null,e.sprShopRole=null,e.nodeContent=null,e.nodeShop=null,e.labStarNum=null,e.nodeBuySuccess=null,e.nodeNoEnough=null,e.btnBack=null,e.listItem=[],e.nodeSurePanel=null,e.labSurePanel=null,e.nodeSettingPanel=null,e.sliderSound=null,e.sliderMusic=null,e.btnBackSetting=null,e._roleIdList=[0,1,2,3,4],e._needList=[0,5,10,15,20],e}return __extends(e,t),e.prototype.showTipsDlg=function(e){this.nodeSurePanel.active=!0,this.labSurePanel.string=e,this.nodeSurePanel.getChildByName("sureBtn").once(cc.Node.EventType.TOUCH_END,function(){this.nodeSurePanel.active=!1},this)},e.prototype.onPlayAniFinish=function(){cc.director.loadScene("Game"),this.aniRole.off("finished",this.onPlayAniFinish,this)},e.prototype.onClickPlay=function(e){d.default.Instance.FBlogEvent("ClickBtnPlay"),l.default.Instance.send(s.MsgType.ClickBtn),this.aniClickPlay.play(),this.aniRole.on("finished",this.onPlayAniFinish,this),this.aniRole.play("mainRoleGoAni")},e.prototype.onClickBack=function(){d.default.Instance.FBlogEvent("ClickBtnBack"),l.default.Instance.send(s.MsgType.ClickBtn),this.nodeContent.active=!0,this.nodeShop.active=!1},e.prototype.onClickBuy=function(e){l.default.Instance.send(s.MsgType.ClickBtn);for(var t=e.target.name,o=parseInt(t.replace("roleItem","")),n=c.default.loadLocalJsonData(s.JsonDataKey.HadRoleId),a=0;a<this._roleIdList.length;a++)if(o==a)if(null!=n&&null!=n[a])d.default.Instance.FBlogEvent("ClickShopBtnSelectRole"),this.listItem[r.default.Instance.roleId].getChildByName("had").active=!0,this.listItem[r.default.Instance.roleId].getChildByName("selected").active=!1,this.listItem[r.default.Instance.roleId].getChildByName("particle").active=!1,r.default.Instance.roleId=o,c.default.changeSpriteFrame(this.sprRole,"atlas/role/role","role_"+r.default.Instance.roleId),c.default.changeSpriteFrame(this.sprShopRole,"atlas/role/role","role_"+r.default.Instance.roleId),this.listItem[a].getChildByName("had").active=!1,this.listItem[a].getChildByName("selected").active=!0,this.listItem[a].getChildByName("particle").active=!0;else{d.default.Instance.FBlogEvent("ClickShopBtnBuyRole");var i=r.default.Instance.starNum;this._needList[a]>i?(this.nodeSurePanel.active=!0,this.labSurePanel.string="Star not enough"):(n[o]=o,c.default.saveLocalJsonData(s.JsonDataKey.HadRoleId,n),r.default.Instance.roleId=o,c.default.changeSpriteFrame(this.sprRole,"atlas/role/role","role_"+r.default.Instance.roleId),c.default.changeSpriteFrame(this.sprShopRole,"atlas/role/role","role_"+r.default.Instance.roleId),r.default.Instance.starNum=r.default.Instance.starNum-this._needList[a],this.listItem[a].getChildByName("state").active=!1,this.listItem[a].getChildByName("had").active=!0,this.nodeSurePanel.active=!0,this.labSurePanel.string="Buy success",this.labStarNum.string="X"+r.default.Instance.starNum.toString()),this.nodeSurePanel.getChildByName("sureBtn").once(cc.Node.EventType.TOUCH_END,function(){this.nodeSurePanel.active=!1},this)}},e.prototype.onClickShop=function(e){if(d.default.Instance.FBlogEvent("ClickShopButton"),r.default.Instance.FBShopShowADCurCount<r.default.Instance.FBShopShowADMaxCount)if(r.default.Instance.FBShopShowADCurCount++,console.log(r.default.Instance.FBShopShowADCurCount),console.log("进入商店广告"),d.default.Instance.FBIsFackBook()){var t=this;d.default.Instance.FBShowAD(d.default.Instance.FB_AD_ID,function(){r.default.Instance.starNum+=3,t.showTipsDlg("Get 3 Stars"),t.labStarNum.string="X"+r.default.Instance.starNum.toString(),d.default.Instance.FBPreLoadRewardedVideo(d.default.Instance.FB_AD_ID)})}else r.default.Instance.starNum+=3,this.showTipsDlg("Get 3 Stars"),this.labStarNum.string="X"+r.default.Instance.starNum.toString();l.default.Instance.send(s.MsgType.ClickBtn),this.nodeContent.active=!1,this.nodeShop.active=!0,this.btnBack.on(cc.Node.EventType.TOUCH_END,this.onClickBack,this);var o=c.default.loadLocalJsonData(s.JsonDataKey.HadRoleId);null==o&&(o={0:0},c.default.saveLocalJsonData(s.JsonDataKey.HadRoleId,o));for(var n=0;n<this._roleIdList.length;n++){var a=this.listItem[n];null!=o&&null!=o[n]?(a.getChildByName("state").active=!1,a.getChildByName("had").active=!0):a.getChildByName("state").getComponent(cc.Label).string=this._needList[n].toString(),a.off(cc.Node.EventType.TOUCH_END,this.onClickBuy,this),a.on(cc.Node.EventType.TOUCH_END,this.onClickBuy,this)}this.listItem[r.default.Instance.roleId].getChildByName("had").active=!1,this.listItem[r.default.Instance.roleId].getChildByName("selected").active=!0,this.listItem[r.default.Instance.roleId].getChildByName("particle").active=!0,this.labStarNum.string="X"+r.default.Instance.starNum.toString(),c.default.changeSpriteFrame(this.sprShopRole,"atlas/role/role","role_"+r.default.Instance.roleId)},e.prototype.onClickSetting=function(e){d.default.Instance.FBlogEvent("ClickBtnSetting"),l.default.Instance.send(s.MsgType.ClickBtn),this.nodeSettingPanel.active=!0,this.nodeContent.active=!1,this.sliderSound.progress=c.default.loadLocalData(s.DataKey.SoundNum,1),this.sliderMusic.progress=c.default.loadLocalData(s.DataKey.MusicNum,1),this.sliderMusic.node.off("slide",this.onChangeSound,this),this.sliderMusic.node.on("slide",this.onChangeSound,this),this.sliderSound.node.off("slide",this.onChangeSound,this),this.sliderSound.node.on("slide",this.onChangeSound,this),this.btnBackSetting.node.once(cc.Node.EventType.TOUCH_END,function(){this.nodeSettingPanel.active=!1,this.nodeContent.active=!0},this)},e.prototype.onChangeSound=function(e){var t=e.detail;t.node.getChildByName("Background").width=300*t.progress,l.default.Instance.send(s.MsgType.ChangeSoundNum,t.node.name,t.progress)},e.prototype.onClickShare=function(e){d.default.Instance.FBlogEvent("ClickBtnShare"),d.default.Instance.FBShare(),l.default.Instance.send(s.MsgType.ClickBtn)},e.prototype.addListener=function(){this.btnPlay.node.on(cc.Node.EventType.TOUCH_END,this.onClickPlay,this),this.btnSetting.node.on(cc.Node.EventType.TOUCH_END,this.onClickSetting,this),this.btnShop.node.on(cc.Node.EventType.TOUCH_END,this.onClickShop,this),this.btnShare.node.on(cc.Node.EventType.TOUCH_END,this.onClickShare,this)},e.prototype.removeListener=function(){this.btnPlay.node.off(cc.Node.EventType.TOUCH_END,this.onClickPlay,this),this.btnSetting.node.off(cc.Node.EventType.TOUCH_END,this.onClickSetting,this),this.btnShop.node.off(cc.Node.EventType.TOUCH_END,this.onClickShop,this),this.btnShare.node.off(cc.Node.EventType.TOUCH_END,this.onClickShare,this)},e.prototype.start=function(){cc.director.preloadScene("Game"),d.default.Instance.FBPreLoadRewardedVideo(d.default.Instance.FB_AD_ID)},e.prototype.onEnable=function(){this.addListener(),this.labScore.string=r.default.Instance.maxRoleDistance.toString()+"M",c.default.changeSpriteFrame(this.sprRole,"atlas/role/role","role_"+r.default.Instance.roleId),d.default.Instance.FBSuggestCreateShortcut()},e.prototype.onDisable=function(){this.removeListener()},__decorate([i({type:cc.Animation,displayName:"角色动画"})],e.prototype,"aniRole",void 0),__decorate([i({type:cc.Animation,displayName:"点击动画"})],e.prototype,"aniClickPlay",void 0),__decorate([i({type:cc.Button,displayName:"开始按钮"})],e.prototype,"btnPlay",void 0),__decorate([i({type:cc.Button,displayName:"商店按钮"})],e.prototype,"btnShop",void 0),__decorate([i({type:cc.Button,displayName:"设置按钮"})],e.prototype,"btnSetting",void 0),__decorate([i({type:cc.Button,displayName:"分享按钮"})],e.prototype,"btnShare",void 0),__decorate([i({type:cc.Label,displayName:"分数"})],e.prototype,"labScore",void 0),__decorate([i({type:cc.Sprite,displayName:"角色图片"})],e.prototype,"sprRole",void 0),__decorate([i({type:cc.Sprite,displayName:"角色图片"})],e.prototype,"sprShopRole",void 0),__decorate([i({type:cc.Node,displayName:"主界面"})],e.prototype,"nodeContent",void 0),__decorate([i({type:cc.Node,displayName:"购买界面"})],e.prototype,"nodeShop",void 0),__decorate([i({type:cc.Label,displayName:"星星数量"})],e.prototype,"labStarNum",void 0),__decorate([i({type:cc.Node,displayName:"购买成功提示"})],e.prototype,"nodeBuySuccess",void 0),__decorate([i({type:cc.Node,displayName:"钻石不足提示"})],e.prototype,"nodeNoEnough",void 0),__decorate([i({type:cc.Node,displayName:"返回按钮"})],e.prototype,"btnBack",void 0),__decorate([i({type:Array(cc.Node),displayName:"item列表"})],e.prototype,"listItem",void 0),__decorate([i({type:cc.Node,displayName:"确定面板"})],e.prototype,"nodeSurePanel",void 0),__decorate([i({type:cc.Label,displayName:"确定面板信息"})],e.prototype,"labSurePanel",void 0),__decorate([i({type:cc.Node,displayName:"设置面板"})],e.prototype,"nodeSettingPanel",void 0),__decorate([i({type:cc.Slider,displayName:"音效slider"})],e.prototype,"sliderSound",void 0),__decorate([i({type:cc.Slider,displayName:"音乐slider"})],e.prototype,"sliderMusic",void 0),__decorate([i({type:cc.Button,displayName:"返回按钮"})],e.prototype,"btnBackSetting",void 0),e=__decorate([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./C":"C","./FYMessenger":"FYMessenger","./FYSDKMgr":"FYSDKMgr","./FYUtility":"FYUtility","./UserDataMgr":"UserDataMgr"}],PathPointControl:[function(e,t,o){"use strict";cc._RF.push(t,"550dafizJdKlq5L7NnVKe5w","PathPointControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./FYUtility"),a=cc._decorator,i=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodePointItem=null,e._arrayPoint=[],e}return __extends(e,t),e.prototype.generalPath=function(e){for(var t=0;t<e.length;t++){var o=n.default.addChild(this.node,this.nodePointItem,e[t],!0);this._arrayPoint.push(o)}},e.prototype.deletePath=function(){for(var e=this._arrayPoint.length-1;0<=e;e--)this._arrayPoint[e].destroy(),this._arrayPoint.pop()},e.prototype.start=function(){},__decorate([r({type:cc.Node,displayName:"路径点"})],e.prototype,"nodePointItem",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./FYUtility":"FYUtility"}],PlanetControl:[function(e,t,o){"use strict";cc._RF.push(t,"36714x3QDRGiJKNAMQWqx5F","PlanetControl"),Object.defineProperty(o,"__esModule",{value:!0});var p=e("./FYUtility"),u=e("./C"),h=e("./PlanetItem"),n=cc._decorator,a=n.ccclass,i=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrayNodePlanetItem=[],e.numberOfPlanet=50,e.planetPosXMin=-260,e.planetPosXMax=260,e.planetPosYMin=260,e.planetPosYMax=460,e.nodeFinishedLevel=null,e.maxGenerateNum=50,e.minDecreaseRatio=1,e.maxDecreaseRatio=3,e.nodeStar=null,e.numberOfStar=2,e._v2CurrentPlanetPos=new cc.Vec2(0,750),e._v2AvaragePos=new cc.Vec2(0,0),e._nCurrGenerateNum=0,e._arrayPlanet=[],e._arrayStar=[],e}return __extends(e,t),e.prototype.reset=function(){for(var e in this._arrayPlanet)this._arrayPlanet[e].destroy();this._v2CurrentPlanetPos=new cc.Vec2(0,0),this._v2AvaragePos=new cc.Vec2(0,0),this._nCurrGenerateNum=0,this._arrayPlanet=[]},e.prototype.getCurPlanetMaxPos=function(){return 0<this._arrayPlanet.length?this._arrayPlanet[this._arrayPlanet.length-1].convertToWorldSpaceAR(new cc.Vec2(0,0)):new cc.Vec2(0,0)},e.prototype.increaseDiffcult=function(){this.planetPosYMin-=this.minDecreaseRatio,this.planetPosYMin<=260&&(this.planetPosYMin=260),this.planetPosYMax-=this.maxDecreaseRatio,this.planetPosYMax<=460&&(this.planetPosYMax=460),this._nCurrGenerateNum<this.maxGenerateNum&&this.generalPlanet()},e.prototype.generalPlanet=function(){for(var e=p.default.getRandomValueDif(0,this.numberOfPlanet-1,this.numberOfStar),t=0;t<this.numberOfPlanet;t++){for(var o=p.default.getRangeRandom(0,u.PlanetType.Length-1),n=p.default.getRangeRandom(this.planetPosXMin,this.planetPosXMax),a=p.default.getRangeRandom(this.planetPosYMin,this.planetPosYMax),i=0;i<e.length;i++)if(e[i]==t){var r=p.default.getRangeRandom(this.planetPosXMin,this.planetPosXMax),c=p.default.getRangeRandom(this._v2CurrentPlanetPos.y+100,this._v2CurrentPlanetPos.y+a),s=p.default.addChild(this.node,this.nodeStar,new cc.Vec2(r,c),!0);this._arrayStar.push(s)}this._v2CurrentPlanetPos.x=n,this._v2CurrentPlanetPos.y+=a;var l=p.default.addChild(this.node,this.arrayNodePlanetItem[o],this._v2CurrentPlanetPos,!0),d=l.getComponent(h.default);d.init(o),d.setPos(this._v2CurrentPlanetPos),this._arrayPlanet.push(l),t==Math.floor(this.numberOfPlanet/2)&&(this._v2AvaragePos=new cc.Vec2(0,this._v2CurrentPlanetPos.y))}this._nCurrGenerateNum++,this._nCurrGenerateNum==this.maxGenerateNum&&p.default.addChild(this.node,this.nodeFinishedLevel,new cc.Vec2(0,this._v2CurrentPlanetPos.y+22),!0)},e.prototype.clearPlanet=function(){for(var e in this._arrayPlanet)this._arrayPlanet[e].destroy();for(var e in this._arrayStar)this._arrayStar[e].destroy();this._arrayPlanet=[],this._arrayStar=[]},e.prototype.start=function(){this.generalPlanet()},__decorate([i({type:Array(cc.Node),displayName:"星球种类数组"})],e.prototype,"arrayNodePlanetItem",void 0),__decorate([i({type:cc.Integer,displayName:"一次生成星球总数"})],e.prototype,"numberOfPlanet",void 0),__decorate([i({type:cc.Integer,displayName:"星球X最小值"})],e.prototype,"planetPosXMin",void 0),__decorate([i({type:cc.Integer,displayName:"星球X最大值"})],e.prototype,"planetPosXMax",void 0),__decorate([i({type:cc.Integer,displayName:"星球Y最小值"})],e.prototype,"planetPosYMin",void 0),__decorate([i({type:cc.Integer,displayName:"星球Y最大值"})],e.prototype,"planetPosYMax",void 0),__decorate([i({type:cc.Node,displayName:"通关对象"})],e.prototype,"nodeFinishedLevel",void 0),__decorate([i({type:cc.Integer,displayName:"最大生成次数"})],e.prototype,"maxGenerateNum",void 0),__decorate([i({type:cc.Integer,displayName:"最小减少比例"})],e.prototype,"minDecreaseRatio",void 0),__decorate([i({type:cc.Integer,displayName:"最大减少比例"})],e.prototype,"maxDecreaseRatio",void 0),__decorate([i({type:cc.Node,displayName:"星星对象"})],e.prototype,"nodeStar",void 0),__decorate([i({type:cc.Integer,displayName:"一次生成星星总数"})],e.prototype,"numberOfStar",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./C":"C","./FYUtility":"FYUtility","./PlanetItem":"PlanetItem"}],PlanetItem:[function(e,t,o){"use strict";cc._RF.push(t,"609e5McYgtEa4DfPbYUR9kJ","PlanetItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./C"),a=cc._decorator,i=a.ccclass,r=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ePlanetType=n.PlanetType.A,e._circleCollider=null,e._worldPos=new cc.Vec2(0,0),e}return __extends(e,t),e.prototype.init=function(e){this.initComponet(),this._ePlanetType=e},e.prototype.setPos=function(e){this.node.setPosition(e),this._worldPos=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0))},e.prototype.getWorldPos=function(){return this._worldPos},e.prototype.initComponet=function(){this._circleCollider=this.node.getComponent(cc.CircleCollider)},e.prototype.onLoad=function(){},e.prototype.start=function(){},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{"./C":"C"}],RoleControl:[function(e,t,o){"use strict";cc._RF.push(t,"578b7tcIsZHsLNbzfEJklYq","RoleControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PlanetItem"),a=e("./RoleLine"),i=e("./UserDataMgr"),s=e("./FYMessenger"),l=e("./C"),r=e("./PlanetControl"),c=e("./EffectControl"),d=e("./PathPointControl"),p=e("./StarItem"),u=cc._decorator,h=u.ccclass,y=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrayRoleSprite=[],e.listDeathEffect=[],e.trailEffect=null,e.planetControl=null,e.nodeTouch=null,e.nodeRole=null,e.roleLine=null,e.speed=500,e.camera=null,e.v2Distance=new cc.Vec2(0,167),e.pathPointControl=null,e._nAngle=0,e._dictCanLinePlanet={},e._bRotate=!1,e._nDistance=0,e._oCurPlanetItem=null,e._nDirect=1,e._preDistance=0,e._bRoleMove=!0,e._v2RoleWorldPos=new cc.Vec2(0,0),e._nodeColliderPlanet=null,e._bGameOver=!1,e}return __extends(e,t),e.prototype.addListener=function(){this.nodeTouch.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),s.default.Instance.add(l.MsgType.GameOver,this.onGameOver,this),s.default.Instance.add(l.MsgType.Restart,this.onRestart,this),s.default.Instance.add(l.MsgType.Revive,this.onRevive,this)},e.prototype.removeListener=function(){this.nodeTouch.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),s.default.Instance.remove(l.MsgType.GameOver,this.onGameOver,this),s.default.Instance.remove(l.MsgType.Restart,this.onRestart,this),s.default.Instance.remove(l.MsgType.Revive,this.onRevive,this)},e.prototype.updateRoleWorldPos=function(){this._v2RoleWorldPos},e.prototype.getMinDistancePlanet=function(){var e="";for(var t in this._dictCanLinePlanet){if(null!=this._dictCanLinePlanet[t])if(null!=this._dictCanLinePlanet[e])cc.pDistance(this._dictCanLinePlanet[t].node.convertToWorldSpaceAR(new cc.Vec2(0,0)),this.nodeRole.convertToWorldSpaceAR(new cc.Vec2(0,0)))<cc.pDistance(this._dictCanLinePlanet[e].node.convertToWorldSpaceAR(new cc.Vec2(0,0)),this.nodeRole.convertToWorldSpaceAR(new cc.Vec2(0,0)))&&(e=t);else e=t}return this._dictCanLinePlanet[e]},e.prototype.getCirclePos=function(e,t,o){var n=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o);return new cc.Vec2(n,a)},e.prototype.getMoveDirect=function(){if(null!=this._oCurPlanetItem){var e=this._oCurPlanetItem.getWorldPos().sub(this._v2RoleWorldPos),t=new cc.Vec2(0,1).rotate(-this.nodeRole.rotation*Math.PI/180);return e.signAngle(t)<=0?-1:1}},e.prototype.checkDistance=function(){if(0<this.nodeRole.position.y){var e=Math.floor(this.nodeRole.position.y/100);e>this._preDistance+.5&&(i.default.Instance.roleDistance=e,this._preDistance=e)}},e.prototype.setRolePos=function(e){this.nodeRole.setPosition(e),this._v2RoleWorldPos=this.nodeRole.convertToWorldSpaceAR(new cc.Vec2(0,0))},e.prototype.reset=function(){this._bGameOver=!1,i.default.Instance.roleDistance=0,this.nodeRole.setPosition(new cc.Vec2(0,-167)),this.nodeRole.rotation=0,this.nodeRole.getComponent(cc.Sprite).enabled=!0,this._nAngle=0,this._dictCanLinePlanet={},this._bRotate=!1,this._nDistance=0,this._oCurPlanetItem=null,this._nDirect=1,this._preDistance=1,this.planetControl.reset()},e.prototype.checkLineOut=function(){var e=this.nodeRole.getPosition();return 375<e.x||e.x<-375},e.prototype.onCollisionEnter=function(e){if("TouchRange<CircleCollider>"==e.name){var t=e.node.parent.getComponent(n.default);this._dictCanLinePlanet[e.uuid]=t}else"PlanetItem<CircleCollider>"==e.name||"LineLeft<BoxCollider>"==e.name||"LineRight<BoxCollider>"==e.name||"LineStart<BoxCollider>"==e.name?("PlanetItem<CircleCollider>"==e.name?this._nodeColliderPlanet=e.node:this._nodeColliderPlanet=null,s.default.Instance.send(l.MsgType.GameOver)):"StarItem<BoxCollider>"==e.name&&(console.log("获得星星"),i.default.Instance.starNum++,s.default.Instance.send(l.MsgType.GetStar),e.node.getComponent(p.default).getStar())},e.prototype.onCollisionStay=function(e){},e.prototype.onCollisionExit=function(e){if("TouchRange<CircleCollider>"==e.name){e.node.parent.getComponent(n.default);e.uuid in this._dictCanLinePlanet&&(this._dictCanLinePlanet[e.uuid]=null,delete this._dictCanLinePlanet[e.uuid])}cc.log(e.name)},e.prototype.onTouchStart=function(e){if(!this._bGameOver){var t=this.getMinDistancePlanet();if(null!=(this._oCurPlanetItem=t)){this._bRotate=!0,this.roleLine.setActive(!0),s.default.Instance.send(l.MsgType.Rotating,!0);var o=t.getWorldPos();this.roleLine.setLinePos(o),this._nDistance=cc.pDistance(o,this._v2RoleWorldPos),this.roleLine.setLineLength(this._nDistance);var n=this._v2RoleWorldPos.sub(o);this._nAngle=n.signAngle(new cc.Vec2(1,0)),this._nDirect=this.getMoveDirect();for(var a=this._oCurPlanetItem.getWorldPos(),i=[],r=0;r<2*Math.PI;r+=2*Math.PI/10){var c=this.getCirclePos(a,this._nDistance,r);i.push(this.pathPointControl.node.parent.convertToNodeSpaceAR(c))}this.pathPointControl.generalPath(i)}}},e.prototype.onTouchEnd=function(e){this._bGameOver||(this._bRotate=!1,s.default.Instance.send(l.MsgType.Rotating,!1),this.roleLine.setActive(!1),this.pathPointControl.deletePath(),this.checkLineOut()&&(this._nodeColliderPlanet=null,s.default.Instance.send(l.MsgType.GameOver)))},e.prototype.onRestart=function(){this.reset()},e.prototype.onGameOver=function(){this._bRoleMove=!1,this.nodeRole.getComponent(cc.Sprite).enabled=!1,this.roleLine.setActive(!1);for(var e=0;e<this.listDeathEffect.length;e++)this.listDeathEffect[e].playPartical();this.trailEffect.stopPartical()},e.prototype.onRevive=function(){this._bRoleMove=!0,this._nodeColliderPlanet?this._nodeColliderPlanet.active=!1:this.nodeRole.setPositionX(0),this.nodeRole.getComponent(cc.Sprite).enabled=!0;for(var e=this.nodeRole.rotation=0;e<this.listDeathEffect.length;e++)this.listDeathEffect[e].stopPartical();this.trailEffect.playPartical()},e.prototype.onLoad=function(){},e.prototype.start=function(){this.nodeRole.getComponent(cc.Sprite).spriteFrame=this.arrayRoleSprite[i.default.Instance.roleId],cc.director.getCollisionManager().enabled=!0},e.prototype.update=function(e){if(this._bRoleMove){if(this._bRotate&&null!=this._oCurPlanetItem){var t=this._oCurPlanetItem.getWorldPos(),o=Math.asin(3*this.speed*e/2/this._nDistance),n=this.getCirclePos(t,this._nDistance,this._nAngle+=o*this._nDirect),a=this.nodeRole.parent.convertToNodeSpaceAR(n);this.setRolePos(a);var i=this._v2RoleWorldPos.sub(t).signAngle(new cc.Vec2(0,1));this.roleLine.setLineRotate(180*-i/Math.PI),this.nodeRole.rotation=this.roleLine.node.rotation-90*this._nDirect}else{var r=new cc.Vec2(0,1*this.speed*e);r=r.rotate(-this.nodeRole.rotation*Math.PI/180),this.nodeRole.setPosition(this.nodeRole.position.add(r))}this._v2RoleWorldPos=this.nodeRole.convertToWorldSpaceAR(new cc.Vec2(0,0)),this.camera.node.setPosition(this._v2RoleWorldPos.add(this.v2Distance)),this.checkDistance();var c=this.nodeRole.convertToWorldSpaceAR(new cc.Vec2(0,0)),s=this.planetControl.getCurPlanetMaxPos();0<s.y&&c.y>s.y-450&&this.planetControl.increaseDiffcult(),0<s.y&&c.y>s.y&&this.planetControl.clearPlanet()}},e.prototype.onEnable=function(){this.addListener()},e.prototype.onDisable=function(){this.removeListener()},__decorate([y({type:Array(cc.SpriteFrame),displayName:"角色图片数组"})],e.prototype,"arrayRoleSprite",void 0),__decorate([y({type:Array(c.default),displayName:"死亡特效"})],e.prototype,"listDeathEffect",void 0),__decorate([y({type:c.default,displayName:"拖尾特效"})],e.prototype,"trailEffect",void 0),__decorate([y({type:r.default,displayName:"星球控制器"})],e.prototype,"planetControl",void 0),__decorate([y({type:cc.Node,displayName:"触摸Node"})],e.prototype,"nodeTouch",void 0),__decorate([y({type:cc.Node,displayName:"角色"})],e.prototype,"nodeRole",void 0),__decorate([y({type:a.default,displayName:"连线"})],e.prototype,"roleLine",void 0),__decorate([y({type:cc.Integer,displayName:"速度"})],e.prototype,"speed",void 0),__decorate([y({type:cc.Camera,displayName:"摄像机"})],e.prototype,"camera",void 0),__decorate([y({type:cc.Vec2,displayName:"角色与摄像机间距"})],e.prototype,"v2Distance",void 0),__decorate([y({type:d.default,displayName:"路径点控制器"})],e.prototype,"pathPointControl",void 0),e=__decorate([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./C":"C","./EffectControl":"EffectControl","./FYMessenger":"FYMessenger","./PathPointControl":"PathPointControl","./PlanetControl":"PlanetControl","./PlanetItem":"PlanetItem","./RoleLine":"RoleLine","./StarItem":"StarItem","./UserDataMgr":"UserDataMgr"}],RoleLine:[function(e,t,o){"use strict";cc._RF.push(t,"a8aa9lNUFRMSoLOnMu5Lx0O","RoleLine"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,i=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setLinePos=function(e){var t=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(t)},t.prototype.setLineRotate=function(e){this.node.rotation=e},t.prototype.setLineLength=function(e){this.node.height=e},t.prototype.setActive=function(e){this.node.active=e},t.prototype.start=function(){},t=__decorate([a],t)}(cc.Component));o.default=i,cc._RF.pop()},{}],SequenceFrameControl:[function(e,t,o){"use strict";cc._RF.push(t,"0227ffLDmZGLocQQygwxOSN","SequenceFrameControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,i=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arraySprite=[],e.interval=.1,e.delay=.1,e._curIndex=0,e}return __extends(e,t),e.prototype.updateSprite=function(){var e=(this._curIndex-1+this.arraySprite.length)%this.arraySprite.length;this.arraySprite[e].active=!1,this.arraySprite[this._curIndex%this.arraySprite.length].active=!0,this._curIndex++},e.prototype.start=function(){this.schedule(this.updateSprite,this.interval,cc.macro.REPEAT_FOREVER,this.delay)},__decorate([i({type:Array(cc.Node),displayName:"图片数组"})],e.prototype,"arraySprite",void 0),__decorate([i({type:cc.Float,displayName:"间隔时间"})],e.prototype,"interval",void 0),__decorate([i({type:cc.Float,displayName:"延迟时间"})],e.prototype,"delay",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],StarItem:[function(e,t,o){"use strict";cc._RF.push(t,"e959dxJjBRKcqHbYdpC9iAz","StarItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,i=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeStar=null,e.nodeParticle=null,e.rotateSpeed=100,e}return __extends(e,t),e.prototype.getStar=function(){this.nodeStar.active=!1,this.nodeParticle.active=!0;var e=this;this.scheduleOnce(function(){e.node.active=!1,e.node.destroy()},.45)},e.prototype.start=function(){},e.prototype.update=function(e){this.node.rotation=this.node.rotation+this.rotateSpeed*e},__decorate([i({type:cc.Node,displayName:"星星图片"})],e.prototype,"nodeStar",void 0),__decorate([i({type:cc.Node,displayName:"星星粒子"})],e.prototype,"nodeParticle",void 0),__decorate([i({type:cc.Integer,displayName:"旋转速度"})],e.prototype,"rotateSpeed",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],Test:[function(e,t,o){"use strict";cc._RF.push(t,"637a5PToP1BT6ahc7dt2YDP","Test"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,i=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},__decorate([i(cc.Label)],e.prototype,"label",void 0),__decorate([i],e.prototype,"text",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],UserDataMgr:[function(e,t,o){"use strict";cc._RF.push(t,"10f09Mf/X1G+LB0vswaCnwC","UserDataMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./C"),a=e("./FYUtility"),i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(){this._nMaxRoleDistance=-1,this._nRoleDistance=0,this._nStarNum=-1,this._nRoleId=-1,this.bNewRecord=!1,this.FBADInstance=null,this.FBShopShowADMaxCount=2,this._FBShopShowADCurCount=-1,this._ShopShowADTime=-1}var t;return t=e,Object.defineProperty(e.prototype,"roleId",{get:function(){return this._nRoleId<0&&(this._nRoleId=parseInt(a.default.loadLocalData(n.DataKey.RoleId,0))),this._nRoleId},set:function(e){this._nRoleId!=e&&(this._nRoleId=e,a.default.saveLocalData(n.DataKey.RoleId,this._nRoleId))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxRoleDistance",{get:function(){return this._nMaxRoleDistance<0&&(this._nMaxRoleDistance=parseInt(a.default.loadLocalData(n.DataKey.MaxRoleDistance,0))),this._nMaxRoleDistance},set:function(e){this._nMaxRoleDistance!=e&&(this._nMaxRoleDistance=e,a.default.saveLocalData(n.DataKey.MaxRoleDistance,this._nMaxRoleDistance))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roleDistance",{get:function(){return this._nRoleDistance},set:function(e){this._nRoleDistance=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"starNum",{get:function(){return this._nStarNum<0&&(this._nStarNum=parseInt(a.default.loadLocalData(n.DataKey.StarNum,0))),this._nStarNum},set:function(e){this._nStarNum!=e&&(this._nStarNum=e,a.default.saveLocalData(n.DataKey.StarNum,this._nStarNum))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FBShopShowADCurCount",{get:function(){return this._FBShopShowADCurCount<=-1&&(this._FBShopShowADCurCount=parseInt(a.default.loadLocalData(n.DataKey.ShopShowADNum,0))),a.default.isSameDay(this.ShopShowADTime)||(this.ShopShowADTime=Date.now(),this._FBShopShowADCurCount=0,a.default.saveLocalData(n.DataKey.ShopShowADNum,this._FBShopShowADCurCount)),this._FBShopShowADCurCount},set:function(e){a.default.isSameDay(this.ShopShowADTime)?this._FBShopShowADCurCount=e:(this.ShopShowADTime=Date.now(),this._FBShopShowADCurCount=0),a.default.saveLocalData(n.DataKey.ShopShowADNum,this._FBShopShowADCurCount)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ShopShowADTime",{get:function(){return this._ShopShowADTime<=-1&&(this._ShopShowADTime=parseInt(a.default.loadLocalData(n.DataKey.ShopShowADTime,0))),this._ShopShowADTime},set:function(e){e!=this._ShopShowADTime&&(this._ShopShowADTime=e,a.default.saveLocalData(n.DataKey.ShopShowADTime,this._ShopShowADTime))},enumerable:!0,configurable:!0}),e.Instance=new t,e=t=__decorate([r],e)}());o.default=c,cc._RF.pop()},{"./C":"C","./FYUtility":"FYUtility"}]},{},["AudioMgr","BgControl","C","EffectControl","FYMessenger","FYSDKMgr","FYUtility","Game","LineContainer","MainMenu","PathPointControl","PlanetControl","PlanetItem","RoleControl","RoleLine","SequenceFrameControl","StarItem","Test","UserDataMgr"]);